!function(){function e(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],i=!0,r=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);i=!0);}catch(l){r=!0,o=l}finally{try{i||null==a.return||a.return()}finally{if(r)throw o}}return n}(e,t)||i(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=i(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,a=!0,l=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,s=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw s}}}}function n(e){return function(e){if(Array.isArray(e))return r(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||i(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function o(e,t,n){return(o=d()?Reflect.construct:function(e,t,n){var i=[null];i.push.apply(i,t);var r=new(Function.bind.apply(e,i));return n&&l(r,n.prototype),r}).apply(null,arguments)}function s(e,t,n){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=A(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=d();return function(){var n,i=A(e);if(t){var r=A(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return c(this,n)}}function c(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function A(e){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function g(e,t,n){return t&&f(e.prototype,t),n&&f(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{0:function(e,t,n){e.exports=n("zUnb")},B9Yq:function(e,t){e.exports=function(){throw new Error("define cannot be used indirect")}},PDX0:function(e,t){(function(t){e.exports=t}).call(this,{})},YuTi:function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},mqXB:function(e,t,n){(function(e){var i,r,o,s;o=window,void 0===(r="function"==typeof(i=s=function(){return function(e){var t,n,i,r,o,s,l,h=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});!function(e){var t=function(){function e(e,t,n){void 0===t&&(t=null),void 0===n&&(n=null),this.type=e,this.target=t,this.data=n}return e.isNativeType=function(e){return-1<"fullscreenchange mozfullscreenchange webkitfullscreenchange MSFullscreenChange focusin focusout touchstart touchmove touchend touchenter touchleave touchcancel".split(" ").indexOf(e)},e.COMPLETE="event_complete",e.CONNECTED="event_connected",e.PROGRESS="event_progress",e.SELECT="event_select",e.CHANGE="event_change",e.ERROR="event_error",e.OPENED="event_opened",e.CLOSED="event_closed",e.CANCEL="event_cancel",e.OPEN="event_open",e.CLOSE="event_close",e.RESIZE="event_resize",e}();e._Event=t,t=function(){function t(){this.dispatchActive=!1,this._listeners=[],this._addedListeners=[],this._deletedListeners=[]}return t.prototype.areListenersEqual=function(e,t){return e.type==t.type&&e.handler==t.handler},t.prototype.hasEventListener=function(e,t){if(s.nullOrUndefined(this._listeners[e]))return!1;for(var n=0;n<this._listeners[e].length;n++)if(this.areListenersEqual(this._listeners[e][n],t))return!0;return!1},t.prototype.addEventListener=function(e,t,n){if(void 0===n&&(n=0),!this.hasEventListener(e,t={type:e,handler:t,priority:n}))if(this.dispatchActive)s.nullOrUndefined(this._addedListeners[e])&&(this._addedListeners[e]=[]),this._addedListeners[e].push(t);else if(s.nullOrUndefined(this._listeners[e])&&(this._listeners[e]=[]),0==this._listeners[e].length)this._listeners[e].push(t);else{this._listeners[e][this._listeners[e].length-1].priority>=n&&this._listeners[e].push(t);for(var i=0;i<this._listeners[e].length;i++)if(this._listeners[e][i].priority<n){this._listeners[e].splice(i,0,t);break}}},t.prototype.removeEventListener=function(e,t){if(!s.nullOrUndefined(this._listeners[e])){for(var n={type:e,handler:t},i=this._listeners[e].slice(0),r=[],o=0;o<i.length;o++)this.areListenersEqual(i[o],n)?this.dispatchActive&&(s.nullOrUndefined(this._deletedListeners[e])&&(this._deletedListeners[e]=[]),this._deletedListeners[e].push(i[o])):r.push(i[o]);this._listeners[e]=r}},t.prototype.removeAllEventListeners=function(e){void 0===e?(this._listeners=[],this._addedListeners=[],this._deletedListeners=[]):(s.nullOrUndefined(this._listeners)||(this._listeners[e]=[]),s.nullOrUndefined(this._addedListeners)||(this._addedListeners[e]=[]),s.nullOrUndefined(this._deletedListeners)||(this._deletedListeners[e]=[]))},t.prototype.dispatch=function(e){if(!s.nullOrUndefined(this._listeners[e.type])){this.dispatchActive=!0;for(var t=this._listeners[e.type].slice(0),n=0;n<t.length;n++){if(!s.nullOrUndefined(this._deletedListeners[e.type])){var i,o=!1;for(i in this._deletedListeners[e.type])this.areListenersEqual(t[n],this._deletedListeners[e.type][i])&&(o=!0);if(o)continue}t[n].handler.call(this,e instanceof r.model.APIEvent?e.data:e)}for(var a in delete this._deletedListeners[e.type],this._addedListeners){if(s.nullOrUndefined(this._listeners[a]))t=[];else{if(!(this._listeners[a]instanceof Array))continue;t=this._listeners[a].slice(0)}if(!s.nullOrUndefined(this._addedListeners[a]))for(n=0;n<this._addedListeners[a].length;n++)if(0==t.length)t.push(this._addedListeners[a][n]);else for(t[t.length-1].priority==this._addedListeners[a][n].priority&&t.push(this._addedListeners[a][n]),e=0;e<t.length;e++)if(t[e].priority<this._addedListeners[a][n].priority){t.splice(e,0,this._addedListeners[a][n]);break}this._listeners[a]=t,this._addedListeners[a]=[]}this.dispatchActive=!1}},t.prototype.dispatchWith=function(t,n,i){t=new e._Event(t,null==n?this:n,i),this.dispatch(t)},t}(),e.EventDispatcher=t}(t||(t={})),function(e){var t,n;t=e.dragndrop||(e.dragndrop={}),n=function(){function t(){var e=this;this.distance=5,this._lastDraggable=null,s.fmdocument.addEventListener("mousemove",(function(t){return e.onMouseMove(t)})),s.fmdocument.addEventListener("touchmove",(function(t){return e.onTouchMove(t)}),!1),s.fmdocument.addEventListener("mouseup",(function(t){return e.onMouseUp(t)})),s.fmdocument.addEventListener("touchend",(function(t){return e.onTouchEnd(t)})),s.fmdocument.addEventListener("touchcancel",(function(t){return e.onTouchEnd(t)}))}return t.getInstance=function(){return t.instance||(t.instance=new t),t.instance},t.dispose=function(){t.instance=null},t.prototype.makeDraggable=function(e,t){var n=this;e.addClass("wdr-draggable");var i=function(i){t.handle&&!i.target.matches(t.handle)||n.dragElement==e||(null!=n.dragElement&&n.stopDrag(t,i),n.dragElement=e,n.dragOptions=t,n.startX=n.getX(i),n.startY=n.getY(i))};e.addEventListener("mousedown",i),e.addEventListener("touchstart",i)},t.prototype.getX=function(e){return e instanceof MouseEvent?e.clientX:e.changedTouches[0].clientX},t.prototype.getY=function(e){return e instanceof MouseEvent?e.clientY:e.changedTouches[0].clientY},t.prototype.onMouseMove=function(e){1==e.which&&this.dragElement&&(this.dragHelper&&this.dragElement.hasClass("wdr-dragging")?(this.setHelperPosition(e.clientX,e.clientY),this.dragOptions.onDrag&&this.dragOptions.onDrag(this.dragElement,e),e.preventDefault()):s.nullOrUndefined(this.dragOptions.onDragStart)||this.dragOptions.onDragStart(this.dragElement,e)?(this.dragHelper=this.dragOptions.createHelper(this.dragElement),this.dragHelper.css("opacity",0),r._view.PivotView.stage.container.addChild(this.dragHelper),this.setHelperPosition(e.clientX,e.clientY,!0),this.dragElement.addClass("wdr-dragging")):(this.dragElement=null,this.dragHelper.removeFromParent(!0),this.dragHelper=null))},t.prototype.isDistanceOK=function(e,t){return Math.abs(this.startX-e)>this.distance||Math.abs(this.startY-t)>this.distance},t.prototype.setHelperPosition=function(e,t,n){if(void 0===n&&(n=!1),null!=this.dragHelper){var i=r._view.PivotView.stage.container.getOffset();this.dragHelper.position({top:t-i.top,left:e-i.left}),this.isDistanceOK(e,t)&&(this.dragHelper.css("opacity",1),this.dragElement.addClass("wdr-dragging-move")),n&&null!=this.dragElement&&(i=this.dragElement.getOffset(),t=Math.max(0,Math.min(this.dragElement.height,t-i.top)),e=Math.max(0,Math.min(this.dragElement.width,this.dragHelper.width,e-i.left)),this.dragHelper.css("margin-top",-t+"px"),this.dragHelper.css("margin-left",-e+"px"))}},t.prototype.onTouchMove=function(t){if(this.dragElement){var n=t.touches[0];if(this.dragHelper&&this.dragElement.hasClass("wdr-dragging")){if(this.setHelperPosition(n.clientX,n.clientY),this.dragOptions.onDrag&&this.dragOptions.onDrag(this.dragElement,t),t.preventDefault(),n=t.changedTouches[0],n=e.UIElement.convert(document.elementFromPoint(n.clientX,n.clientY))){var i=n.closest(".wdr-droppable");i&&i.droppableOptions&&i.droppableOptions.onDragOver&&(i.droppableOptions.onDragOver(this.dragElement,this.dragHelper,i,t),this._lastDraggable=i)}(null==n||null==i)&&null!=this._lastDraggable&&this._lastDraggable.droppableOptions&&this._lastDraggable.droppableOptions.onDragLeave&&this._lastDraggable.droppableOptions.onDragLeave(this.dragElement,this.dragHelper,this._lastDraggable,t)}else s.nullOrUndefined(this.dragOptions.onDragStart)||this.dragOptions.onDragStart(this.dragElement,t)?(this.dragHelper=this.dragOptions.createHelper(this.dragElement),this.dragHelper.css("opacity",0),r._view.PivotView.stage.container.addChild(this.dragHelper),this.setHelperPosition(n.clientX,n.clientY,!0),this.dragElement.addClass("wdr-dragging")):(this.dragElement=null,this.dragHelper.removeFromParent(!0),this.dragHelper=null)}},t.prototype.onMouseUp=function(e){this.stopDrag(this.dragOptions,e)},t.prototype.onTouchEnd=function(t){for(var n=t.changedTouches[0],i=n=e.UIElement.convert(document.elementFromPoint(n.clientX,n.clientY));n;){if(n.hasClass("wdr-droppable")){s.nullOrEmpty(n.droppableOptions.itemSelector)||(i=i.closest(n.droppableOptions.itemSelector)),n.droppableOptions.onDrop(this.dragElement,n,i,t);break}n=n.parent}this.stopDrag(this.dragOptions,t)},t.prototype.stopDrag=function(e,t){null!=this.dragHelper&&(this.dragHelper.removeFromParent(!0),this.dragHelper=null),null!=this.dragElement&&(this.dragElement.removeClass("wdr-dragging"),this.dragElement.removeClass("wdr-dragging-move"),e.onDragEnd&&this.isDistanceOK(this.getX(t),this.getY(t))&&e.onDragEnd(this.dragElement,t),this.dragElement=null),this._lastDraggable=null,this.startY=this.startX=NaN},t.prototype.makeDroppable=function(t,n,i){var r=this;t.hasClass("wdr-droppable")||(t.addClass("wdr-droppable"),t.addEventListener("mouseenter",(function(e){null!=r.dragElement&&1==e.which&&i.onDragEnter&&i.onDragEnter(r.dragElement,r.dragHelper,n,e)})),t.addEventListener("mouseleave",(function(e){null!=r.dragElement&&1==e.which&&i.onDragLeave&&i.onDragLeave(r.dragElement,r.dragHelper,n,e)})),t.addEventListener("mouseover",(function(e){null!=r.dragElement&&1==e.which&&i.onDragOver&&i.onDragOver(r.dragElement,r.dragHelper,n,e)})),t.addEventListener("mouseup",(function(n){if(null!=r.dragElement&&1==n.which){var o=e.UIElement.convert(n.target);s.nullOrEmpty(i.itemSelector)||(o=o.closest(i.itemSelector)),i.onDrop(r.dragElement,t,o,n)}})))},t}(),t.DragManager=n}(i||(i={})),function(e){var n=function(t){function n(n,i){void 0===n&&(n="div"),void 0===i&&(i="");var r=t.call(this)||this;return r.container=new e.UIElement(n),r.container.addClass("wdr-ui "+i),s.browserVersion().isMobile&&r.container.addClass("wdr-ui-mobile"),r.validate(),r}return h(n,t),n.prototype.validate=function(){this.invalidHash={}},n.prototype.invalidate=function(e){void 0===e&&(e="all"),this.invalidHash[e]=!0,this.draw()},n.prototype.isInvalid=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(this.invalidHash.all)return!0;for(t=0;t<e.length;t++)if(this.invalidHash[e[t]])return!0;return!1},n.prototype.draw=function(){this.validate()},n.prototype.validateNow=function(){this.invalidate()},n.prototype.show=function(){this.container.show()},n.prototype.hide=function(){this.container.hide()},n.prototype.getId=function(){return this.container.attr("id")},n.prototype.setId=function(e){this.container.attr("id",e)},n.prototype.getName=function(){return this.name},n.prototype.setName=function(e){this.name=e},n.prototype.html=function(e){return void 0===e?this.container.html():(this.container.html(e),this)},n.prototype.setEnabled=function(e){this.container.toggleClass("wdr-ui-disabled",!e)},n.prototype.getEnabled=function(){return!this.container.hasClass("wdr-ui-disabled")},n.prototype.addClass=function(e){void 0===e&&(e=""),this.container.addClass(e)},n.prototype.removeClass=function(e){this.container.removeClass(e)},Object.defineProperty(n.prototype,"padding",{get:function(){return this.container.padding},set:function(e){},enumerable:!0,configurable:!0}),n.prototype.getWidth=function(e){return this.container.getWidth(e)},n.prototype.setWidth=function(e){this.getWidth()!==e&&(this.container.setWidth(e),this.invalidate("size"))},n.prototype.getHeight=function(e){return void 0===e&&(e=!1),this.container.getHeight(e)},n.prototype.setHeight=function(e){this.getHeight()!==e&&(this.container.setHeight(e),this.invalidate("size"))},n.prototype.isVisible=function(e){return void 0===e&&(e=void 0),void 0!==e&&(e?this.show():this.hide()),this.container.visible},n.prototype.position=function(){return this.container.position()},n.prototype.addChild=function(e,t){void 0===t&&(t=!1),t?this.container.prepend(e.container):this.container.append(e.container)},n.prototype.removeFromParent=function(e){void 0===e&&(e=!1),e?this.container.remove():this.container.detach()},n.prototype.getX=function(){return this.container.left},n.prototype.getY=function(){return this.container.top},n.prototype.hitTestPoint=function(e,t){return e>=this.getX()&&e<=this.getX()+this.getWidth()&&t>=this.getY()&&t<=this.getY()+this.getHeight()},n.prototype.addEventListener=function(e,t){this.container.addEventListener(e,t)},n.prototype.removeEventListener=function(e,t){this.container.removeEventListener(e,t)},n.prototype.dispatch=function(e){this.container.dispatch(e)},n.prototype.dispatchWith=function(e,t,n){this.container.dispatchWith(e,t,n)},n.prototype.addLayoutClasses=function(e){void 0===e&&(e=!1),e=e?this.getWidth(!0):r._view.PivotView.stageWidth,this.container.toggleClass("wdr-layout-tablet",768>e),this.container.toggleClass("wdr-layout-mobile",580>e),this.container.toggleClass("wdr-layout-mobile-small",460>e)},n}(t.EventDispatcher);e.UIComponentBase=n}(i||(i={})),function(e){var n=function(n){function i(e,t){void 0===e&&(e="div"),void 0===t&&(t="");var i=n.call(this)||this;return i.display="block",i.frames=[],i.__handlers=[],i.element="string"==typeof e?document.createElement(e):e,i.addClass("wdr-ui-element"),i.addClass(t),i}return h(i,n),Object.defineProperty(i.prototype,"element",{get:function(){return this._element},set:function(e){(this._element=e)&&(this._element.uielement=this)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"id",{get:function(){return this.element.id},set:function(e){this.element.id=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"parent",{get:function(){return i.convert(this.element.parentElement)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"nodeName",{get:function(){return this._element.nodeName.toLowerCase()},enumerable:!0,configurable:!0}),i.prototype.addChild=function(e){this.element.appendChild(e.element)},i.prototype.children=function(){for(var e=this.element.firstElementChild,t=[];e;)t.push(i.convert(e)),e=e.nextElementSibling;return t},i.prototype.contains=function(e){return this.element.contains(e.element)},i.prototype.append=function(e){return e&&this.addChild(e),this},i.prototype.prepend=function(e){return this.element.insertBefore(e.element,this.element.firstChild),this},i.prototype.before=function(e){return this.element.parentNode&&this.element.parentNode.insertBefore(e.element,this.element),this},i.prototype.after=function(e){return this.element.parentNode&&this.element.nextElementSibling?this.element.parentNode.insertBefore(e.element,this.element.nextElementSibling):this.append(e),this},i.prototype.addComponent=function(e){this.element.appendChild(e.container.element)},i.prototype.removeFromParent=function(e){void 0===e&&(e=!0),e?this.remove():this.detach()},i.prototype.remove=function(){null!=this.element&&(this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.dispose())},i.prototype.detach=function(){if(null!=this.element&&this.element.parentNode){var e=this.element.cloneNode(!0);this.element.parentNode.removeChild(this.element),this.element=e}},i.prototype.removeAllChildren=function(){for(;this.element&&this.element.firstChild;){var e=i.convert(this.element.firstChild);e&&e.dispose&&e.dispose(),this.element.removeChild(this.element.firstChild)}},i.prototype.clone=function(){return i.convert(this.element.cloneNode(!0))},i.convert=function(e){return e&&e.nodeType==Node.ELEMENT_NODE?s.nullOrUndefined(e.uielement)?new i(e):e.uielement:null},i.prototype.get=function(e){var t=this.children();return 0<t.length?t[e]:null},i.prototype.find=function(e,t){if(void 0===t||0==t)return i.convert(this.element.querySelector(e));for(var n=this.element.querySelectorAll(e),r=[],o=0;o<n.length;o++)r.push(i.convert(n[o]));return r},i.prototype.closest=function(e){if(!this.element)return null;for(var t=this.element;null!=t;){if(t.matches){if(t.matches(e))return t==this.element?this:i.convert(t)}else if(t.msMatchesSelector(e))return t==this.element?this:i.convert(t);t=t.parentElement}return null},i.prototype.addClass=function(e){if(!this.element)return this;for(var t=(e=e.trim()).split(" "),n=0;n<t.length;n++)0<t[n].length&&(s.detectBrowser().isMsie?(e=this.element.getAttribute("class"),s.nullOrUndefined(e)?this.element.setAttribute("class",t[n]):-1==e.split(" ").indexOf(t[n])&&this.element.setAttribute("class",e+" "+t[n])):0==this.element.classList.contains(t[n])&&this.element.classList.add(t[n]));return this},i.prototype.removeClass=function(e){if(!this.element)return this;if(0<(e=e.trim()).length)if(s.detectBrowser().isMsie){var t=this.element.getAttribute("class");s.nullOrUndefined(t)||-1<(e=(t=t.split(" ")).indexOf(e))&&(t.splice(e,1),this.element.setAttribute("class",t.join(" ")))}else this.element.classList.contains(e)&&this.element.classList.remove(e);return this},i.prototype.toggleClass=function(e,t){t?this.addClass(e):this.removeClass(e)},i.prototype.hasClass=function(e){return this.element.classList.contains(e)},i.prototype.disableSelection=function(){return this.addClass("wdr-noselect"),this},i.prototype.enableSelection=function(){return this.addClass("wdr-selectable"),this},i.prototype.getWidth=function(e){if(void 0===e&&(e=!1),!this.element)return 0;var t=window.getComputedStyle(this.element);return e=e?0:(parseFloat(t.paddingLeft)||0)+(parseFloat(t.paddingRight)||0),this.element.clientWidth-e},i.prototype.setWidth=function(e){return"number"==typeof e?this.element.style.width=e+"px":"string"==typeof e&&(this.element.style.width=e),this},Object.defineProperty(i.prototype,"width",{get:function(){return this.getWidth()},set:function(e){this.setWidth(e)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"padding",{get:function(){var e=window.getComputedStyle(this.element);return{left:parseFloat(e.paddingLeft)||0,right:parseFloat(e.paddingRight)||0,top:parseFloat(e.paddingTop)||0,bottom:parseFloat(e.paddingBottom)||0}},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"borderWidth",{get:function(){var e=window.getComputedStyle(this.element);return{left:parseFloat(e.borderLeftWidth||e.borderWidth)||0,right:parseFloat(e.borderRightWidth||e.borderWidth)||0,top:parseFloat(e.borderTopWidth||e.borderWidth)||0,bottom:parseFloat(e.borderBottomWidth||e.borderWidth)||0}},enumerable:!0,configurable:!0}),i.prototype.getHeight=function(e){void 0===e&&(e=!1);var t=window.getComputedStyle(this.element);return e=e?0:(parseFloat(t.paddingTop)||0)+(parseFloat(t.paddingBottom)||0),0>this.element.clientHeight-e?0:this.element.clientHeight-e},i.prototype.setHeight=function(e){return"number"==typeof e?this.element.style.height=e+"px":"string"==typeof e&&(this.element.style.height=e),this},Object.defineProperty(i.prototype,"height",{get:function(){return this.getHeight()},set:function(e){this.setHeight(e)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"left",{get:function(){return this.element.getBoundingClientRect().left},set:function(e){this.element.style.left=e+"px"},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"top",{get:function(){return this.element.getBoundingClientRect().top},set:function(e){this.element.style.top=e+"px"},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"right",{get:function(){return this.element.getBoundingClientRect().right},set:function(e){this.element.style.right=e+"px"},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"bottom",{get:function(){return this.element.getBoundingClientRect().bottom},set:function(e){this.element.style.bottom=e+"px"},enumerable:!0,configurable:!0}),i.prototype.outerHtml=function(){return this.element.outerHTML},i.prototype.html=function(e){return void 0===e?this.element.innerHTML:(this.element.innerHTML=e,this)},i.prototype.empty=function(){this.html("")},i.prototype.clear=function(){this.empty()},i.prototype.text=function(e){return void 0===e?this.element.textContent:("input"==this.element.tagName.toLowerCase()?this.element.value=e:this.element.textContent=e,this)},i.prototype.focus=function(){return this.element.focus(),this},i.prototype.blur=function(){return this.element.blur(),this},i.prototype.show=function(){this.element.style.display=this.display},i.prototype.hide=function(){this.element.style.display="none"},Object.defineProperty(i.prototype,"x",{get:function(){return this.element.offsetLeft},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"y",{get:function(){return this.element.offsetTop},enumerable:!0,configurable:!0}),i.prototype.offset=function(e){if(void 0===e)return this.getOffset();this.css("left",e.left+"px"),this.css("top",e.top+"px")},i.prototype.getBoundingClientRect=function(){return this.element.getBoundingClientRect()},i.prototype.position=function(e){if(void 0===e)return{top:this.y,left:this.x};this.offset(e)},i.prototype.attr=function(e,t){if(void 0===t)return this.element.getAttribute(e);try{this.element.setAttribute(e,t)}catch(n){this.element.attributes[e]=t}return this},i.prototype.removeAttr=function(e){return this.element.removeAttribute(e),this},i.prototype.css=function(e,t){return void 0===t?window.getComputedStyle(this.element)[i.toCamelCase(e)]:(this.element.style[i.toCamelCase(e)]=t,this)},i.toCamelCase=function(e){var t=e.split("-");if(1<t.length){for(e=1;e<t.length;e++)t[e]=t[e].charAt(0).toUpperCase()+t[e].substr(1);return t.join("")}return e},i.prototype.val=function(){return"input"==this.element.tagName.toLowerCase()||"textarea"==this.element.tagName.toLowerCase()?this.element.value:this.element.textContent},i.prototype.requestAnimationFrame=function(e){var t=0;return window.requestAnimationFrame?t=window.requestAnimationFrame(e):window.msRequestAnimationFrame?t=window.msRequestAnimationFrame(e):window.mozRequestAnimationFrame?t=window.mozRequestAnimationFrame(e):window.webkitRequestAnimationFrame?t=window.webkitRequestAnimationFrame(e):e.call(null),this.frames.push(t),t},i.prototype.cancelAnimationFrame=function(e){this.frames.splice(this.frames.indexOf(e),1),0!=e&&(null!=window.cancelAnimationFrame?window.cancelAnimationFrame(e):null!=window.msCancelRequestAnimationFrame?window.msCancelRequestAnimationFrame(e):null!=window.mozCancelAnimationFrame?window.mozCancelAnimationFrame(e):null!=window.webkitCancelAnimationFrame&&window.webkitCancelAnimationFrame(e))},Object.defineProperty(i.prototype,"visible",{get:function(){return this.element&&"none"!=this.css("display")},set:function(e){e?this.show():this.hide()},enumerable:!0,configurable:!0}),i.prototype.getOffset=function(e){if(void 0===e&&(e=null),null==e)return this.element.getBoundingClientRect();for(var t=0,n=0,i=this.element;i&&i!=e&&!isNaN(i.offsetLeft)&&!isNaN(i.offsetTop);)t+=i.offsetLeft-i.scrollLeft,n+=i.offsetTop-i.scrollTop,i=i.offsetParent;return{top:n,left:t}},i.prototype.getScrollTop=function(){return this.element.scrollTop},i.prototype.setScrollTop=function(e){return this.element.scrollTop=e,this},i.prototype.setScrollLeft=function(e){return this.element.scrollLeft=e,this},i.prototype.addEventListener=function(e,i,r){void 0!==this.element["on"+e]||t._Event.isNativeType(e)?(s.nullOrUndefined(this.__handlers[e])&&(this.__handlers[e]=[]),this.__handlers[e][i.toString()]=function(e){i(e)},this.element.addEventListener(e,this.__handlers[e][i.toString()],r)):n.prototype.addEventListener.call(this,e,i,r)},i.prototype.removeEventListener=function(e,i,r){void 0!==this.element["on"+e]||t._Event.isNativeType(e)?this.__handlers[e]&&this.element.removeEventListener(e,this.__handlers[e][i.toString()],r):n.prototype.removeEventListener.call(this,e,i)},i.prototype.dispatch=function(e){n.prototype.dispatch.call(this,e)},i.prototype.removeAllEventListeners=function(e){for(var t in this.__handlers)if(void 0===e||e==t)for(var i in this.__handlers[t])try{this.element.removeEventListener(t,this.__handlers[t][i],!0),this.element.removeEventListener(t,this.__handlers[t][i],!1)}catch(r){console.error(r)}this.__handlers=[],n.prototype.removeAllEventListeners.call(this,t)},i.prototype.dispose=function(){this.removeAllEventListeners(),this.removeAllChildren(),this._element=this._element.uielement=null;for(var e=0;e<this.frames.length;e++)this.cancelAnimationFrame(this.frames[e]);this.frames=[],this._resizableHelper&&this._resizableHelper.dispose()},i.prototype.refresh=function(){this.html(this.html())},i.prototype.draggable=function(t){e.dragndrop.DragManager.getInstance().makeDraggable(this,t)},i.prototype.droppable=function(t,n){this._droppableOptions=t,e.dragndrop.DragManager.getInstance().makeDroppable(this,n||this,t)},Object.defineProperty(i.prototype,"droppableOptions",{get:function(){return this._droppableOptions},enumerable:!0,configurable:!0}),i.prototype.index=function(){for(var e=0,t=this.element;t=t.previousElementSibling;)e++;return e},i.prototype.resizable=function(t){this._resizableHelper=new e.resizable.ResizableHelper(this,t)},i}(t.EventDispatcher);e.UIElement=n}(i||(i={})),function(e){var n=function(e){function n(t){void 0===t&&(t="");var n=e.call(this,"a","wdr-ui-btn")||this;return n.mouseDownTimeout=0,n.repeatDelay=50,n.addClass(t),n.container.addEventListener("click",(function(e){return n.onClick(e)})),n.container.addEventListener("mousedown",(function(e){return n.onMouseDown()})),n.container.addEventListener("mouseup",(function(e){return n.onMouseUp()})),n.container.addEventListener("mouseout",(function(e){return n.onMouseOut()})),n.container.display="inline-block",n}return h(n,e),n.prototype.onClick=function(e){this.getEnabled()&&this.dispatchWith(n.CLICK_EVENT,this),e.stopImmediatePropagation()},n.prototype.onMouseDown=function(){var e=this;this.container.toggleClass("wdr-ui-pressed",!0),this.mouseDownTimeout=s.fmSetInterval((function(){return e.dispatchMouseDown()}),this.getRepeatDelay())},n.prototype.dispatchMouseDown=function(){this.dispatch(new t._Event(n.MOUSE_DOWN_EVENT,this))},n.prototype.onMouseUp=function(){this.container.toggleClass("wdr-ui-pressed",!1),s.fmClearInterval(this.mouseDownTimeout)},n.prototype.onMouseOut=function(){this.container.toggleClass("wdr-ui-pressed",!1),s.fmClearInterval(this.mouseDownTimeout)},n.prototype.getLabel=function(){return this.label},n.prototype.setRepeatDelay=function(e){this.repeatDelay=e},n.prototype.getRepeatDelay=function(){return this.repeatDelay},n.prototype.setLabel=function(e){this.label!=e&&(this.label=e,this.container.text(this.label))},n.MOUSE_DOWN_EVENT="buttonmousedown",n.CLICK_EVENT="buttonclick",n}(e.UIComponentBase);e.UIButton=n}(i||(i={})),function(e){var t=function(e){function t(t){void 0===t&&(t="");var n=e.call(this,"span","wdr-ui wdr-ui-label")||this;return n.container.display="inline-block",n.setLabel(t),n}return h(t,e),t.prototype.getLabel=function(){return this.label},t.prototype.setLabel=function(e,t){void 0===t&&(t=!1),this.label!=e&&(this.label=e,t?this.container.html(this.label):this.container.text(this.label))},t.prototype.setSelectable=function(e){e?this.container.enableSelection():this.container.disableSelection()},t}(e.UIComponentBase);e.UILabel=t}(i||(i={})),function(e){var n=function(n){function i(){var e=n.call(this,"textarea","wdr-ui-text-area")||this;return e.container.addEventListener("keypress",(function(t){return e.onKeyPressed(t)})),e.container.addEventListener("keyup",(function(t){return e.onKeyUp(t)})),e.container.addEventListener("paste",(function(t){return e.onInputPaste(t)})),e}return h(i,n),i.prototype.onKeyUp=function(e){this.dispatchChange()},i.prototype.onInputPaste=function(e){this.dispatchChange()},i.prototype.dispatchChange=function(){this.dispatch(new t._Event(e.UITextInput.CHANGE_EVENT,this))},i.prototype.getText=function(){return this.container.val()},i.prototype.setText=function(e){this.getText()!=e&&(this.container.element.value=e,this.dispatchChange())},i.prototype.clear=function(){this.setText("")},i.prototype.insertText=function(e){var t=this.getSelectionBeginIndex(),n=this.getSelectionEndIndex(),i=(i=this.getText()).substr(0,t)+e+i.substr(t);this.setText(i),this.setSelection(t+e.length,n+e.length)},i.prototype.setSelection=function(e,t){void 0===t&&(t=-1),this.container.element.focus(),this.container.element.setSelectionRange(e,0>t?e:t)},i.prototype.getSelectionBeginIndex=function(){return this.container.element.selectionStart},i.prototype.getSelectionEndIndex=function(){return this.container.element.selectionEnd},i.prototype.selectAll=function(){this.setSelection(0,this.getText().length)},i.prototype.onKeyPressed=function(e){e.ctrlKey?(this.dispatchWith(i.EVENT_CTRL_ENTER),e.preventDefault()):13==e.keyCode&&(this.dispatchWith(i.EVENT_ENTER),e.preventDefault())},i.EVENT_ENTER="ntr",i.EVENT_CTRL_ENTER="ntl",i}(e.UIComponentBase);e.UITextArea=n}(i||(i={})),function(e){var n=function(e){function n(){var t=e.call(this,"input","wdr-ui-text-input")||this;return t.text="",t.prompt="",t.changeDelay=0,t.changeDispatched=!0,t.container.display="inline-block",t.container.attr("type","text"),t.container.attr("data-placeholder",""),t.container.addEventListener("focusin",(function(e){return t.onFocusIn()})),t.container.addEventListener("focusout",(function(e){return t.onFocusOut()})),t.container.addEventListener("keyup",(function(e){return t.onKeyUp(e)})),t.container.addEventListener("keypress",(function(e){return t.onKeyPressed(e)})),t.container.addEventListener("paste",(function(e){return t.onInputPaste(e)})),t}return h(n,e),n.getChar=function(e){return null==e.which?32>e.keyCode?null:String.fromCharCode(e.keyCode):0!=e.which&&0!=e.charCode?32>e.which?null:String.fromCharCode(e.which):null},n.prototype.onKeyPressed=function(e){if(13==e.keyCode&&this.dispatchWith(n.EVENT_ENTER),!(s.nullOrUndefined(this.restrictRule)||e.ctrlKey||e.altKey||e.metaKey)){var t=n.getChar(e);null!=t&&!1===this.restrictRule.test(t)&&e.preventDefault()}},n.prototype.onKeyUp=function(e){this.container.val()!==this.text&&(this.text=this.container.val(),this.dispatchChange())},n.prototype.onInputPaste=function(e){this.container.val()!==this.text&&(this.text=this.container.val(),this.dispatchChange())},n.prototype.dispatchChange=function(){var e=this;0<this.changeDelay?this.changeDispatched&&(this.changeDispatched=!1,s.fmSetTimeout((function(){return e._dispatchChange()}),this.changeDelay)):this._dispatchChange()},n.prototype._dispatchChange=function(){this.changeDispatched=!0,this.dispatch(new t._Event(n.CHANGE_EVENT,this,this.text))},n.prototype.onFocusIn=function(){0==this.text.length&&(this.container.text(""),this.enablePrompt(!1))},n.prototype.onFocusOut=function(){this.enablePrompt(0==this.text.length)},n.prototype.getText=function(){return this.text=this.container.val()==this.prompt?this.text:this.container.val()},n.prototype.setText=function(e){this.text!=e&&(this.text=e,this.container.text(this.text),this.enablePrompt(0==this.text.length))},n.prototype.clear=function(e){void 0===e&&(e=!0),this.setText(""),e&&this._dispatchChange()},n.prototype.setPrompt=function(e){e!=this.prompt&&(this.prompt=e,this.container.attr("data-placeholder",this.prompt),this.enablePrompt(0==this.text.length))},n.prototype.enablePrompt=function(e){this.container.text(e?this.prompt:this.text),this.container.toggleClass("wdr-ui-prompt",e)},n.prototype.getPrompt=function(){return this.prompt},n.prototype.setRestriction=function(e){this.restrictRule=e},n.prototype.getRestriction=function(){return this.restrictRule},n.prototype.setChangeDelay=function(e){this.changeDelay=e},n.prototype.getChangeDelay=function(){return this.changeDelay},n.prototype.getType=function(){return this.container.attr("type")},n.prototype.setType=function(e){this.container.attr("type",e)},n.CHANGE_EVENT="_",n.EVENT_ENTER="ntr",n}(e.UIComponentBase);e.UITextInput=n}(i||(i={})),function(e){var n=function(n){function i(){var t=n.call(this)||this;return t.container.display="inline-block",t.container.hasClass("wdr-ui-btn")&&t.container.removeClass("wdr-ui-btn"),t.container.addClass("wdr-ui-toggle-btn"),t.selected=0,t.addEventListener(e.UIButton.CLICK_EVENT,(function(){return t.onClick()})),t}return h(i,n),i.prototype.onClick=function(){this.getEnabled()&&(this.toggle(),this.dispatchWith(t._Event.CHANGE,this))},i.prototype.toggle=function(){this.selected=1==this.selected?0:1,this.container.toggleClass("wdr-selected",1==this.selected)},i.prototype.setSelection=function(e){this.selected==e||1<e||-1>e||(this.selected=e,this.container.toggleClass("wdr-selected",1==this.selected))},i.prototype.getSelection=function(){return this.selected},i}(e.UIButton);e.UIToggleButton=n}(i||(i={})),function(e){var t=function(t){function n(){var n=t.call(this)||this;return n.container.display="inline-block",n.container.hasClass("wdr-ui-toggle-btn")&&n.container.removeClass("wdr-ui-toggle-btn"),n.container.addClass("wdr-ui-checkbox"),n.labelHolder=new e.UILabel("Label"),n.container.append(n.labelHolder.container),n}return h(n,t),n.prototype.toggle=function(){t.prototype.toggle.call(this),this.container.toggleClass("wdr-ui-semi-selected",-1==this.getSelection())},n.prototype.setLabel=function(e,t){void 0===t&&(t=!1),null!=this.labelHolder&&this.labelHolder.setLabel(e,t)},n.prototype.getLabel=function(){return null!=this.labelHolder?this.labelHolder.getLabel():""},n.prototype.setSelection=function(e){this.getSelection()==e||1<e||-1>e||(t.prototype.setSelection.call(this,e),this.container.toggleClass("wdr-ui-semi-selected",-1==this.getSelection()))},Object.defineProperty(n.prototype,"checked",{get:function(){return 1==this.getSelection()},set:function(e){this.setSelection(e?1:0)},enumerable:!0,configurable:!0}),n.SELECTED=1,n.UNSELECTED=0,n.SEMI_SELECTED=-1,n}(e.UIToggleButton);e.UICheckBox=t}(i||(i={})),function(e){var t=function(e){function t(){var n=e.call(this,"div","wdr-ui-divider")||this;return n.mouseMoveHandler=function(e){return n.onMouseMove(e)},n.mouseDownHandler=function(e){return n.onMouseDown(e)},n.mouseUpHandler=function(e){return n.onMouseUp(e)},n.direction=t.HORIZONTAL,n.addEventListener("mousedown",n.mouseDownHandler),s.fmdocument.addEventListener("mouseup",n.mouseUpHandler),n.container.disableSelection(),n}return h(t,e),t.prototype.onMouseDown=function(e){this._height=this.direction==t.HORIZONTAL?this.getHeight():this.getWidth(),this._baseOffset=this.container.parent.getOffset(),s.fmdocument.addEventListener("mousemove",this.mouseMoveHandler),e.preventDefault(),e.stopImmediatePropagation()},t.prototype.onMouseMove=function(e){if(this.direction==t.HORIZONTAL){var n=e.clientY-this._baseOffset.top;if(this._containment&&(n<this._containment[1]||n>this._containment[3]))return;this.container.css("top",n-this._height/2+"px"),this.dispatchWith(t.EVENT_MOVED,this,{top:n})}this.direction==t.VERTICAL&&(e=e.clientX-this._baseOffset.left,this._containment&&(e<this._containment[0]||e>this._containment[2])||(this.container.css("left",e-this._height/2+"px"),this.dispatchWith(t.EVENT_MOVED,this,{left:e})))},t.prototype.onMouseUp=function(e){s.fmdocument.removeEventListener("mousemove",this.mouseMoveHandler)},Object.defineProperty(t.prototype,"direction",{get:function(){return this._direction},set:function(e){this._direction=e,this.container.toggleClass("wdr-ui-horizontal",this._direction==t.HORIZONTAL),this.container.toggleClass("wdr-ui-vertical",this._direction==t.VERTICAL),this.container.css("position","absolute")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"containment",{set:function(e){this._containment=e},enumerable:!0,configurable:!0}),t.HORIZONTAL=0,t.VERTICAL=1,t.EVENT_MOVED="divider_moved_event",t}(e.UIComponentBase);e.UIDivider=t}(i||(i={})),function(e){var t=function(e){function t(){return e.call(this,"div","wdr-ui-modal-overlay")||this}return h(t,e),t.prototype.setTransparent=function(e){this.container.toggleClass("wdr-ui-opaque",!1),this.container.toggleClass("wdr-ui-transparent",e)},t.prototype.setOpaque=function(e){this.container.toggleClass("wdr-ui-transparent",!1),this.container.toggleClass("wdr-ui-opaque",e)},t}(e.UIComponentBase);e.UIModalOverlay=t}(i||(i={})),function(e){var t,n;t=e.containers||(e.containers={}),n=function(e){function t(t){return void 0===t&&(t="wdr-ui-container"),e.call(this,"div",t)||this}return h(t,e),t.prototype.removeChild=function(e){this.contains(e)&&e.container.detach()},t.prototype.contains=function(e){return!s.nullOrUndefined(e)&&this.container.contains(e.container)},t.prototype.getWidth=function(){return this.container.width},t.prototype.getHeight=function(){return this.container.height},t.prototype.removeAllChildren=function(){for(var e=this.container.children(),t=e.length-1;0<=t;t--)e[t].removeFromParent()},t}(e.UIComponentBase),t.UIContainer=n}(i||(i={})),function(e){var t=function(e){function t(){return e.call(this,"wdr-ui-border-container")||this}return h(t,e),t}(e.UIContainer);e.UIBorderContainer=t}((l=i||(i={})).containers||(l.containers={})),function(e){!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t.container.addClass("wdr-ui-window"),t.hide(),t}return h(t,e),t.prototype.setPosition=function(e,t){this.container.offset({left:Math.floor(e),top:Math.floor(t)}),this.container.css("position","absolute")},t.prototype.getPosition=function(){return this.container.offset()},t}(e.UIContainer);e.UIWindow=t}(e.containers||(e.containers={}))}(i||(i={})),function(e){!function(e){var t=function(e){function t(){return e.call(this,"wdr-ui-hgroup")||this}return h(t,e),t}(e.UIContainer);e.UIHGroup=t}(e.containers||(e.containers={}))}(i||(i={})),function(e){!function(e){var t=function(e){function t(){return e.call(this,"wdr-ui-vgroup")||this}return h(t,e),t}(e.UIContainer);e.UIVGroup=t}(e.containers||(e.containers={}))}(i||(i={})),function(e){!function(e){var t=function(e){function t(){return e.call(this,"wdr-ui-panel")||this}return h(t,e),t}(e.UIContainer);e.UIPanel=t}(e.containers||(e.containers={}))}(i||(i={})),function(e){var n,i;i=function(n){function i(t){var i=n.call(this)||this;return i._overlayClickHandler=function(){return i.onOverlayClick()},i.resizeHandler=function(e){return i.onWindowResize(e)},i.isOpaque=!1,i._modalParent=t,i.container.addClass("wdr-ui-popup"),i.hide(),i._overlay=new e.UIModalOverlay,i._overlay.addEventListener("click",i._overlayClickHandler),i._overlay.hide(),i._modalParent&&i._modalParent.addChild(i._overlay.container),i}return h(i,n),i.prototype.onWindowResize=function(e){var t=this;e.target===window&&(this.container.requestAnimationFrame((function(){return t.centerPosition()})),this.addLayoutClasses())},i.prototype.onOverlayClick=function(){this.close()},i.prototype.open=function(){s.fmwindow.addEventListener("resize",this.resizeHandler),this._overlay.show(),this._overlay.container.toggleClass("wdr-ui-opaque",this.isOpaque),this.show(),this.centerPosition(),this.dispatchWith(t._Event.OPENED),this.addLayoutClasses()},i.prototype.close=function(){s.fmwindow.removeEventListener("resize",this.resizeHandler),this._overlay.hide(),this.hide(),this.dispatchWith(t._Event.CLOSED)},i.prototype.centerPosition=function(){if(t=this._modalParent){var e=Math.max(0,(t.getWidth(!0)-this.container.getWidth(!0)-2)/2),t=Math.max(0,(t.getHeight(!0)-this.container.getHeight(!0)-2)/2);this.setPosition(e,t)}},Object.defineProperty(i.prototype,"overlay",{get:function(){return this._overlay},enumerable:!0,configurable:!0}),i}((n=e.containers||(e.containers={})).UIWindow),n.UIPopup=i}(i||(i={})),function(e){!function(e){var t=function(e){function t(){return e.call(this,"wdr-ui-toolbar")||this}return h(t,e),t}(e.UIContainer);e.UIToolbar=t}(e.containers||(e.containers={}))}(i||(i={})),function(e){var t,n;n=function(t){function n(){var n=t.call(this,"wdr-ui-toolbar-mobile")||this;return n.headerDisplay=new e.UILabel,n.headerDisplay.addClass("wdr-ui-header-display"),n.addChild(n.headerDisplay),n}return h(n,t),n.prototype.setHeader=function(e){this.header!=e&&(this.header=e,this.headerDisplay.setLabel(e))},n.prototype.getHeader=function(){return this.header},n.prototype.setLeftItem=function(e){this.leftItem!=e&&(null!=this.leftItem&&this.leftItem.removeFromParent(),this.leftItem=e,null!=this.leftItem&&(this.leftItem.addClass("wdr-ui-left"),this.addChild(this.leftItem)))},n.prototype.setRightItem=function(e){this.rightItem!=e&&(null!=this.rightItem&&this.rightItem.removeFromParent(),this.rightItem=e,null!=this.rightItem&&(this.rightItem.addClass("wdr-ui-right"),this.addChild(this.rightItem)))},n}((t=e.containers||(e.containers={})).UIContainer),t.UIToolbarMobile=n}(i||(i={})),function(e){!function(e){var t=function(){function e(){this.items=[],this.allItems=[]}return e.prototype.setItems=function(e){this.allItems=e},e.prototype.getItems=function(e,t){if(0>e||t>this.allItems.length+1)return[];this.items.length=0;for(var n=e;n<t;n++)this.items.push(this.allItems[n]);return this.items},e.prototype.getLength=function(){return this.allItems.length},e}();e.SmartDataProvider=t}(e.dataProviders||(e.dataProviders={}))}(i||(i={})),function(e){var n,i;n=e.lists||(e.lists={}),i=function(n){function i(){var e=n.call(this,"ul","wdr-ui-list")||this;return e.rowHeight=s.browserVersion().isMobile?i.DEFAULT_ROW_HEIGHT_MOBILE:i.DEFAULT_ROW_HEIGHT,e.selectedItems=[],e.selectedIndices=[],e.markSelected=!1,e.useCache=!0,e._allowMultipleSelection=!1,e.dataProvider=[],e.itemsCache=[],e.visibleItems=[],e.labelField="label",e.itemRendererFactory=e.defaultItemRendererFactory,e.selectedItem=null,e.selectedIndex=-1,e.container.addEventListener("click",(function(t){return e.onItemClick(t)})),e}return h(i,n),i.prototype.getRowHeight=function(){return 0<this.visibleItems.length?this.visibleItems[0].getHeight():this.rowHeight},i.prototype.getStartIdx=function(){return 0},i.prototype.getRowCount=function(){return this.dataProvider.length},i.prototype.draw=function(){this.isInvalid("data")&&this.drawItems(),this.validate()},i.prototype.drawItems=function(){var e=this,t=this.container.getScrollTop();this.removeAllItems();for(var n,i=this.getDataProvider(),r=0;r<i.length;r++)n=this.getItem(i[r],r),this.addItem(n);this.container.setScrollTop(t),this.container.requestAnimationFrame((function(){0<e.visibleItems.length&&(e.rowHeight=e.visibleItems[0].getHeight())}))},i.prototype.getItem=function(e,t){var n;return this.useCache&&0<this.itemsCache.length?((n=this.itemsCache.pop()).setData(e),n.setIndex(t)):(n=this.itemRendererFactory(e,t)).setLabelField(this.labelField),n},i.prototype.addItem=function(e){this.visibleItems.push(e),this.addChild(e)},i.prototype.removeAllItems=function(){for(;0<this.visibleItems.length;)this._removeItem(this.visibleItems.pop())},i.prototype.removeItem=function(e){for(var t=0;t<this.visibleItems.length;t++)if(this.visibleItems[t]===e){this.visibleItems.splice(t,1);break}this._removeItem(e)},i.prototype._removeItem=function(e){null!=this.container.find(e.container.element.nodeName)&&e.container.remove()},i.prototype.onItemClick=function(n){if(null!=(n=e.UIElement.convert(n.target).closest("li"))){n=parseInt(n.attr("data-index"));var i=this.getStartIdx()+n,r=this.selectedItem,o=this.selectedIndex;this.setSelectedIndex(n),this.dispatchWith(t._Event.CHANGE,this,{selectedItem:this.selectedItem,selectedIndex:this.selectedIndex,realIndex:i,prevItem:r,prevIndex:o})}},i.prototype.getDataProvider=function(){return this.dataProvider},i.prototype.setDataProvider=function(e,t){void 0===t&&(t=!0),this.dataProvider=e,t&&this.invalidate("data")},i.prototype.getLabelField=function(){return this.labelField},i.prototype.setLabelField=function(e){this.labelField!=e&&(this.labelField=e,this.invalidate("data"))},i.prototype.setItemRendererFactory=function(e){this.itemRendererFactory=e,this.invalidate("data")},i.prototype.validateItemAt=function(e){-1<e&&e<this.visibleItems.length&&this.visibleItems[e].validateNow()},i.prototype.validateItem=function(e,t){void 0===t&&(t="");for(var n,i=0;i<this.visibleItems.length;i++)if(n=this.visibleItems[i].getData(),0==t.length&&n===e||0<t.length&&n.hasOwnProperty(t)&&n[t]==e[t]){this.visibleItems[i].validateNow();break}},i.prototype.getSelectedIndex=function(){return this.selectedIndex},i.prototype.setSelectedIndex=function(e){var t=this.getDataProvider();-1<e&&e<t.length?this.updateSelectedItem(t[e],e):this.updateSelectedItem(null,-1)},i.prototype.getSelectedItem=function(){return this.selectedItem},i.prototype.setSelectedItem=function(e,t){var n=this.getDataProvider();if(s.nullOrUndefined(e)||s.nullOrEmpty(t))-1<n.indexOf(e)&&this.updateSelectedItem(e,n.indexOf(e));else for(var i=0;i<n.length;i++)if(!s.nullOrUndefined(n[i])&&n[i][t]==e[t]){this.updateSelectedItem(n[i],i);break}},i.prototype.updateSelectedItem=function(e,t){if(this.allowMultipleSelection){var n=-1<this.selectedIndices.indexOf(t);!(n=!n)&&2>this.selectedIndices.length||(n?(this.selectedIndices.push(t),this.selectedItems.push(e)):(this.selectedIndices.splice(this.selectedIndices.indexOf(t),1),this.selectedItems.splice(this.selectedItems.indexOf(e),1)),this.markSelected&&(e.isSelected=n,this.validateItemAt(t)))}else this.markSelected&&null!=this.selectedItem&&(this.selectedItem.isSelected=!1,this.validateItemAt(this.selectedIndex)),this.selectedItem=e,this.selectedIndex=t,this.markSelected&&null!=this.selectedItem&&(this.selectedItem.isSelected=!0,this.validateItemAt(this.selectedIndex))},i.prototype.defaultItemRendererFactory=function(t,n){var i=new e.renderers.UIItemRenderer;return i.setData(t),i.setIndex(n),i},i.prototype.getMinHeight=function(){return this.getRowHeight()},i.prototype.getMaxHeight=function(){return this.getRowHeight()*this.getDataProvider().length},Object.defineProperty(i.prototype,"allowMultipleSelection",{get:function(){return this._allowMultipleSelection},set:function(e){this._allowMultipleSelection=e},enumerable:!0,configurable:!0}),i.prototype.getSelectedIndices=function(){return this.selectedIndices},i.prototype.setSelectedIndices=function(e){this.selectedIndices=e,this.selectedItems.length=0,e=this.getDataProvider();for(var t=0;t<e.length;t++)-1<this.selectedIndices.indexOf(t)?(this.selectedItems.push(e[t]),this.markSelected&&(e[t].isSelected=!0,this.validateItemAt(t))):this.markSelected&&(e[t].isSelected=!1,this.validateItemAt(t))},i.prototype.getSelectedItems=function(){return this.selectedItems},i.prototype.setSelectedItems=function(e){this.selectedItems=e,this.selectedIndices.length=0,e=this.getDataProvider();for(var t=0;t<e.length;t++)-1<this.selectedItems.indexOf(e[t])?(this.selectedIndices.push(t),this.markSelected&&(e[t].isSelected=!0,this.validateItemAt(t))):this.markSelected&&(e[t].isSelected=!1,this.validateItemAt(t))},i.prototype.droppable=function(e){this.container.droppable(e,this)},i.DEFAULT_ROW_HEIGHT=21,i.DEFAULT_ROW_HEIGHT_MOBILE=31,i}(e.UIComponentBase),n.UIList=i}(i||(i={})),function(e){var n,i;n=e.lists||(e.lists={}),i=function(i){function r(){var r=i.call(this,"div","wdr-ui-dropdown")||this;return r.prompt="Choose item",r.mouseHandler=function(e){return r.handleMouse(e)},r._allowMultipleSelection=!1,r.container.display="inline-block",r.dropDownBtn=new n.UIDropDownButton,r.dropDownBtn.addEventListener(t._Event.CHANGE,(function(){return r.onBtnChange()})),r.dropDownListWrap=new e.UIComponentBase("div","wdr-ui-dropdown-list"),r.dropDownListWrap.hide(),r.dropDownList=new n.UIList,r.dropDownList.markSelected=!0,r.dropDownList.setItemRendererFactory(r.itemRendererFactory),r.dropDownList.addEventListener(t._Event.CHANGE,(function(e){return r.onListChange(e)})),r.dropDownListWrap.addChild(r.dropDownList),r.addChild(r.dropDownBtn),r.addChild(r.dropDownListWrap),r}return h(r,i),r.prototype.itemRendererFactory=function(t,n){var i=new e.renderers.SelectItemRenderer;return i.setData(t),i.setIndex(n),i},r.prototype.onListChange=function(e){this.enablePrompt(null==e.data.selectedItem),this.dispatchWith(t._Event.CHANGE,this,e.data),this.allowMultipleSelection||this.close()},r.prototype.onBtnChange=function(){this.dropDownBtn.getSelection()?this.open():this.close()},r.prototype.enablePrompt=function(e){var t=this.dropDownList.getSelectedItem();t=e||this.allowMultipleSelection||null==t?this.prompt:t[this.getLabelField()],this.dropDownBtn.setLabel(t),this.container.toggleClass("wdr-ui-prompt",e)},r.prototype.setPrompt=function(e){this.prompt!==e&&(this.prompt=e,this.enablePrompt(!0))},r.prototype.getPrompt=function(){return this.prompt},r.prototype.open=function(){this.getEnabled()&&(this.dropDownListWrap.show(),this.dropDownList.setWidth(this.dropDownBtn.getWidth(!0)),this.dropDownBtn.setSelection(1),document.body.addEventListener("mousedown",this.mouseHandler))},r.prototype.handleMouse=function(t){null==e.UIElement.convert(t.target).closest(".wdr-ui-dropdown")&&(document.body.removeEventListener("mousedown",this.mouseHandler),this.close())},r.prototype.close=function(){this.getEnabled()&&(this.dropDownListWrap.hide(),this.dropDownBtn.setSelection(0),document.body.removeEventListener("mouseup",this.mouseHandler))},r.prototype.getDataProvider=function(){return this.dropDownList.getDataProvider()},r.prototype.setDataProvider=function(e){this.dropDownList.setDataProvider(e)},r.prototype.getLabelField=function(){return this.dropDownList.getLabelField()},r.prototype.setLabelField=function(e){this.dropDownList.setLabelField(e)},r.prototype.setItemRendererFactory=function(e){this.dropDownList.setItemRendererFactory(e)},r.prototype.validateNow=function(){this.dropDownList.validateNow()},r.prototype.validateItemAt=function(e){this.dropDownList.validateItemAt(e)},r.prototype.getSelectedIndex=function(){return this.dropDownList.getSelectedIndex()},r.prototype.setSelectedIndex=function(e){this.dropDownList.setSelectedIndex(e),this.enablePrompt(null==this.dropDownList.getSelectedItem())},r.prototype.getSelectedIndices=function(){return this.dropDownList.getSelectedIndices()},r.prototype.setSelectedIndices=function(e){this.dropDownList.setSelectedIndices(e),this.enablePrompt(!0)},r.prototype.getSelectedItem=function(){return this.dropDownList.getSelectedItem()},r.prototype.setSelectedItem=function(e,t){this.dropDownList.setSelectedItem(e,t),this.enablePrompt(null==this.dropDownList.getSelectedItem())},r.prototype.getSelectedItems=function(){return this.dropDownList.getSelectedItems()},r.prototype.setSelectedItems=function(e){this.dropDownList.setSelectedItems(e),this.enablePrompt(!0)},r.prototype.show=function(){i.prototype.show.call(this)},r.prototype.getRowHeight=function(){return this.dropDownList.getRowHeight()},r.prototype.getRowCount=function(){return this.dropDownList.getRowCount()},r.prototype.validateItem=function(e,t){},r.prototype.getMinHeight=function(){return 0},r.prototype.getMaxHeight=function(){return 0},Object.defineProperty(r.prototype,"allowMultipleSelection",{get:function(){return this._allowMultipleSelection},set:function(e){this._allowMultipleSelection=e,this.dropDownList.allowMultipleSelection=e,this._allowMultipleSelection?this.dropDownList.container.addClass("wdr-ui-dropdown-multiple-selection-list"):this.dropDownList.container.removeClass("wdr-ui-dropdown-multiple-selection-list")},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"markSelected",{set:function(e){this.dropDownList.markSelected=e},enumerable:!0,configurable:!0}),r}(e.UIComponentBase),n.UIDropDownList=i}(i||(i={})),function(e){var t,n;t=e.lists||(e.lists={}),n=function(n){function i(){var i=n.call(this)||this;return i.addClass("wdr-ui-vlist"),i._list=new t.UIList,i.addChild(i._list),i._placeholder=new e.UIComponentBase("div","wdr-ui-vlist-placeholder"),i.addChild(i._placeholder),i.addEventListener("scroll",(function(){return i.onScroll()})),i}return h(i,n),i.prototype.onScroll=function(){this.invalidate("data")},i.prototype.draw=function(){if(this._placeholder.setHeight(Math.min(this.getMaxHeight(),i.MAX_HEIGHT)),this.isInvalid("data")){this._list.setDataProvider(this.getDataProvider());var e=this.getStartIdx()*this.getRowHeight()*this.getScale()-this.getScaleFix();this._list.container.top=Math.min(e,this._placeholder.getHeight()-this._list.container.height)}this.validate()},i.prototype.getScale=function(){return this.getMaxHeight()>i.MAX_HEIGHT?i.MAX_HEIGHT/this.getMaxHeight():1},i.prototype.getStartIdx=function(){return 1!=this.getScale()?Math.floor((this.getScrollPosition()+this.getScaleFix())/this.getScale()/this.getRowHeight()):Math.floor(this.getScrollPosition()/this.getRowHeight())},i.prototype.getScaleFix=function(){return 1!=this.getScale()?(this.getHeight()/this.getScale()-this.getHeight())*(this.getScrollPosition()/i.MAX_HEIGHT)*this.getScale():0},Object.defineProperty(i.prototype,"allowMultipleSelection",{get:function(){return this._list.allowMultipleSelection},set:function(e){this._list.allowMultipleSelection=e},enumerable:!0,configurable:!0}),i.prototype.getLabelField=function(){return this._list.getLabelField()},i.prototype.setLabelField=function(e){this._list.setLabelField(e)},i.prototype.setItemRendererFactory=function(e){this._list.setItemRendererFactory(e)},i.prototype.validateItemAt=function(e){this._list.validateItemAt(e)},i.prototype.validateItem=function(e,t){void 0===t&&(t=""),this._list.validateItem(e,t)},i.prototype.getRowHeight=function(){return 37},i.prototype.getRowCount=function(){return 0<this.getRowHeight()?Math.ceil(this.getHeight()/this.getRowHeight())+1:0},i.prototype.getSelectedIndex=function(){return this._list.getSelectedIndex()},i.prototype.setSelectedIndex=function(e){this._list.setSelectedIndex(e)},i.prototype.getSelectedIndices=function(){return this._list.getSelectedIndices()},i.prototype.setSelectedIndices=function(e){this._list.setSelectedIndices(e)},i.prototype.getSelectedItem=function(){return this._list.getSelectedItem()},i.prototype.setSelectedItem=function(e,t){this._list.setSelectedItem(e,t)},i.prototype.getSelectedItems=function(){return this._list.getSelectedItems()},i.prototype.setSelectedItems=function(e){this._list.setSelectedItems(e)},i.prototype.getMinHeight=function(){return this._list.getRowHeight()},i.prototype.getMaxHeight=function(){return this.getRowHeight()*this.getSmartDataProvider().getLength()},i.prototype.getSmartDataProvider=function(){return this.smartDataProvider},i.prototype.setSmartDataProvider=function(e){this.smartDataProvider=e},i.prototype.getScrollPosition=function(){return this.container.getScrollTop()},i.prototype.setScrollPosition=function(e){this.container.setScrollTop(e)},i.prototype.setDataProvider=function(e){this.getSmartDataProvider()&&(this.getSmartDataProvider().setItems(e),this.setScrollPosition(0),this.invalidate("data"))},i.prototype.getDataProvider=function(){var e=this.getStartIdx(),t=e+this.getRowCount();return this.getSmartDataProvider()?this.getSmartDataProvider().getItems(e,t):[]},i.MAX_HEIGHT=1e6,i}(e.UIComponentBase),t.UIVirtualList=n}(i||(i={})),function(e){var t,n;t=e.lists||(e.lists={}),n=function(t){function n(){var n=t.call(this)||this;return n.addClass("wdr-ui-dropdown-btn"),n.labelDisplay=new e.UILabel,n.addChild(n.labelDisplay),n}return h(n,t),n.prototype.setLabel=function(e){this.labelDisplay.setLabel(e)},n}(e.UIToggleButton),t.UIDropDownButton=n}(i||(i={})),function(e){var t,n;t=e.renderers||(e.renderers={}),n=function(e){function t(){var t=e.call(this,"li")||this;return t.labelField="label",t}return h(t,e),t.prototype.getData=function(){return this.data},t.prototype.setData=function(e){null!=e&&(this.data=e,this.invalidate("data"))},t.prototype.getIndex=function(){return parseInt(this.container.attr("data-index"))},t.prototype.setIndex=function(e){this.container.attr("data-index",e)},t.prototype.getLabelField=function(){return this.labelField},t.prototype.setLabelField=function(e){this.labelField!=e&&(this.labelField=e,this.invalidate("data"))},t.prototype.getLabelFunction=function(){return this.labelFunction},t.prototype.setLabelFunction=function(e){this.labelFunction!=e&&(this.labelFunction=e,this.invalidate("data"))},t.prototype.draw=function(){this.isInvalid("data")&&this.container.text(this.data[this.labelField]),this.validate()},t}(e.UIComponentBase),t.UIItemRenderer=n}(i||(i={})),function(e){var t,n;n=function(t){function n(){return t.call(this)||this}return h(n,t),n.prototype.draw=function(){var t=this.getData();null==this.label&&(this.label=new e.UILabel,this.label.setId("#wdr-text-display"),this.container.append(this.label.container)),this.label.setLabel(t[this.getLabelField()],!0),this.container.toggleClass("wdr-selected",!0===t.isSelected),this.container.toggleClass("wdr-not-selected",!0!==t.isSelected)},n}((t=e.renderers||(e.renderers={})).UIItemRenderer),t.SelectItemRenderer=n}(i||(i={})),function(e){var t,n;t=e.resizable||(e.resizable={}),n=function(){function t(e,t){var n=this;this._mouseDownHandler=function(e){return n.onMouseDown(e)},this._mouseUpHandler=function(e){return n.onMouseUp(e)},this._mouseMoveHandler=function(e){return n.onMouseMove(e)},this.target=e,this.options=t,this.createHandles()}return t.prototype.createHandles=function(){for(var e=0;e<this.options.sides.length;e++)this.createHandle(this.options.sides[e])},t.prototype.createHandle=function(t){var n=new e.UIElement("div","wdr-resizable-handle");return n.addClass("wdr-"+t),n.addEventListener("mousedown",this._mouseDownHandler),this.target.addChild(n),n},t.prototype.onMouseDown=function(t){(t=e.UIElement.convert(t.target)).hasClass("wdr-left")?this._currentSide="left":t.hasClass("wdr-right")&&(this._currentSide="right"),this.startResizing()},t.prototype.onMouseUp=function(e){this.onResize(e.clientX,e.clientY),this.stopResizing()},t.prototype.onMouseMove=function(e){this._boundingRect&&(e.clientX<this._boundingRect.left||e.clientX>this._boundingRect.right||e.clientY<this._boundingRect.top||e.clientY>this._boundingRect.bottom)?this.onMouseUp(e):this.onResize(e.clientX,e.clientY)},t.prototype.onResize=function(e,t){var n={left:this._originalPosition.left,top:this._originalPosition.top},i={width:this._originalSize.width,height:this._originalSize.height};"left"==this._currentSide&&(n.left=e,i.width+=this._originalPosition.left-n.left),"right"==this._currentSide&&(i.width=e-this._originalPosition.left),this.options.resize&&this.options.resize({side:this._currentSide,originalPosition:this._originalPosition,originalSize:this._originalSize,position:n,size:i})},t.prototype.startResizing=function(){document.addEventListener("mousemove",this._mouseMoveHandler),document.addEventListener("mouseup",this._mouseUpHandler),this._originalSize={width:this.target.getWidth(!0),height:this.target.getHeight(!0)},this._originalPosition={left:this.target.getOffset().left,top:this.target.getOffset().top},this._boundingRect=this.options.containtment?this.options.containtment.getBoundingClientRect():null},t.prototype.stopResizing=function(){document.removeEventListener("mousemove",this._mouseMoveHandler),document.removeEventListener("mouseup",this._mouseUpHandler)},t.prototype.dispose=function(){document.removeEventListener("mousemove",this._mouseMoveHandler),document.removeEventListener("mouseup",this._mouseUpHandler)},t}(),t.ResizableHelper=n}(i||(i={})),function(e){!function(e){var t=function(){function e(e,t){void 0===t&&(t=1e3);var n=this;this.touchStartHandler=function(e){return n.onTouchStart(e)},this.touchEndHandler=function(e){return n.onTouchEnd(e)},this.target=e,this.delay=t}return e.prototype.listen=function(e){this.handler=e,this.target.addEventListener("touchstart",this.touchStartHandler),this.target.addEventListener("touchend",this.touchEndHandler)},e.prototype.stop=function(){this.target.removeEventListener("touchstart",this.touchStartHandler),this.target.removeEventListener("touchend",this.touchEndHandler)},e.prototype.onTouchStart=function(e){var t=this;this.timer=s.fmSetTimeout((function(){return t.callHandler(e)}),this.delay)},e.prototype.onTouchEnd=function(e){this.timer&&s.fmClearTimeout(this.timer)},e.prototype.callHandler=function(e){this.handler(e,e&&0<e.changedTouches.length?e.changedTouches[0]:null)},e}();e.LongPressListener=t}(e._utils||(e._utils={}))}(i||(i={})),function(e){var t=function(){function e(t,n,i){void 0===n&&(n=0),void 0===i&&(i=e.LITTLE_ENDIAN),this._dynamicSize=!0,this._byteLength=0,this._byteOffset=n,this.buffer=t,this.position=0,this.endianness=i}return Object.defineProperty(e.prototype,"byteOffset",{get:function(){return this._byteOffset},set:function(e){this._byteOffset=e,this._dataView=new DataView(this._buffer,this._byteOffset),this._byteLength=this._buffer.byteLength},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"byteLength",{get:function(){return this._byteLength-this._byteOffset},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"buffer",{get:function(){return this._trimAlloc(),this._buffer},set:function(e){this._buffer=e,this._dataView=0==this._byteOffset?new DataView(this._buffer):new DataView(this._buffer,this._byteOffset),this._byteLength=this._buffer.byteLength},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dataView",{get:function(){return this._dataView},set:function(e){this._byteOffset=e.byteOffset,this._buffer=e.buffer,this._dataView=new DataView(this._buffer,this._byteOffset),this._byteLength=this._byteOffset+e.byteLength},enumerable:!0,configurable:!0}),e.prototype.seek=function(e){e=Math.max(0,Math.min(this.byteLength,e)),this.position=isNaN(e)||!isFinite(e)?0:e},e.prototype.writeString=function(e){this.writeUint8Array(n.encode(e))},e.prototype.writeUint32=function(e,t){void 0===t&&(t=null),this._realloc(4),this._dataView.setUint32(this.position,e,null==t?this.endianness:t),this.position+=4},e.prototype.writeUint8=function(e){this._realloc(1),this._dataView.setUint8(this.position,e),this.position+=1},e.prototype.writeUint8Array=function(e){if(this._realloc(1*e.length),e instanceof Uint8Array&&0==this.byteOffset+this.position%e.BYTES_PER_ELEMENT)this.memcpy(this._buffer,this.byteOffset+this.position,e.buffer,0,e.byteLength),this.mapUint8Array(e.length);else for(var t=0;t<e.length;t++)this.writeUint8(e[t])},e.prototype.readString=function(e,t){return i.decode(this.mapUint8Array(e))},e.prototype.readUint32=function(){var e=this._dataView.getUint32(this.position,this.endianness);return this.position+=4,e},e.prototype.readUint8=function(){var e=this._dataView.getUint8(this.position);return this.position+=1,e},e.prototype.readUint8Array=function(e){void 0===e&&(e=-1),e=0>e?this.byteLength-this.position:e;var t=new Uint8Array(e);return this.memcpy(t.buffer,0,this.buffer,this.byteOffset+this.position,e*t.BYTES_PER_ELEMENT),this.position+=t.byteLength,t},e.prototype.mapUint8Array=function(e){this._realloc(1*e);var t=new Uint8Array(this._buffer,this.byteOffset+this.position,e);return this.position+=1*e,t},e.prototype._realloc=function(e){if(this._dynamicSize)if((e=this._byteOffset+this.position+e)<=(t=this._buffer.byteLength))e>this._byteLength&&(this._byteLength=e);else{for(1>t&&(t=1);e>t;)t*=2;var t=new ArrayBuffer(t),n=new Uint8Array(this._buffer);new Uint8Array(t,0,n.length).set(n),this.buffer=t,this._byteLength=e}},e.prototype._trimAlloc=function(){if(this._byteLength!=this._buffer.byteLength){var e=new ArrayBuffer(this._byteLength),t=new Uint8Array(e),n=new Uint8Array(this._buffer,0,t.length);t.set(n),this.buffer=e}},e.prototype.memcpy=function(e,t,n,i,r){e=new Uint8Array(e,t,r),n=new Uint8Array(n,i,r),e.set(n)},e.BIG_ENDIAN=!1,e.LITTLE_ENDIAN=!0,e}();e.DataStream=t;var n=function(){function e(){}return e.encode=function(t){t=t?String(t):"";var n,i=[],r=new a(i);for(t=new l(t),null==e.encoder&&(e.encoder=new o);t.get()!==e.EOF_code_point;)e.encoder.encode(r,t);do{n=e.encoder.encode(r,t)}while(n!==e.EOF_byte);return new Uint8Array(i)},e.EOF_byte=-1,e.EOF_code_point=-1,e}();e.TextEncoder=n;var i=function(){function e(){}return e.decode=function(t){t||(t=new Uint8Array(0)),t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength),t=new s(t);var n,i=new u;for(null==e.decoder&&(e.decoder=new r);t.get()!==e.EOF_byte;)null!==(n=e.decoder.decode(t))&&n!==e.EOF_code_point&&i.emit(n);do{null!==(n=e.decoder.decode(t))&&n!==e.EOF_code_point&&i.emit(n)}while(n!==e.EOF_code_point);return i.str()},e.EOF_byte=-1,e.EOF_code_point=-1,e}();e.TextDecoder=i;var r=function(){function e(){this.EOF_code_point=this.EOF_byte=-1,this.utf8_lower_boundary=this.utf8_bytes_seen=this.utf8_bytes_needed=this.utf8_code_point=0}return e.prototype.decode=function(e){var t=e.get();if(t===this.EOF_byte)return this.EOF_code_point;if(e.offset(1),0===this.utf8_bytes_needed){if(this.inRange(t,0,127))return t;if(this.inRange(t,194,223))this.utf8_bytes_needed=1,this.utf8_lower_boundary=128,this.utf8_code_point=t-192;else if(this.inRange(t,224,239))this.utf8_bytes_needed=2,this.utf8_lower_boundary=2048,this.utf8_code_point=t-224;else{if(!this.inRange(t,240,244))return this.EOF_code_point;this.utf8_bytes_needed=3,this.utf8_lower_boundary=65536,this.utf8_code_point=t-240}return this.utf8_code_point*=Math.pow(64,this.utf8_bytes_needed),null}return this.inRange(t,128,191)?(this.utf8_bytes_seen+=1,this.utf8_code_point+=(t-128)*Math.pow(64,this.utf8_bytes_needed-this.utf8_bytes_seen),this.utf8_bytes_seen!==this.utf8_bytes_needed?null:(e=this.utf8_code_point,t=this.utf8_lower_boundary,this.utf8_lower_boundary=this.utf8_bytes_seen=this.utf8_bytes_needed=this.utf8_code_point=0,this.inRange(e,t,1114111)&&!this.inRange(e,55296,57343)?e:this.EOF_code_point)):(this.utf8_lower_boundary=this.utf8_bytes_seen=this.utf8_bytes_needed=this.utf8_code_point=0,e.offset(-1),this.EOF_code_point)},e.prototype.inRange=function(e,t,n){return t<=e&&e<=n},e}();e.UTF8Decoder=r;var o=function(){function e(){this.EOF_code_point=this.EOF_byte=-1}return e.prototype.inRange=function(e,t,n){return t<=e&&e<=n},e.prototype.div=function(e,t){return Math.floor(e/t)},e.prototype.encode=function(e,t){var n,i,r=t.get();if(r===this.EOF_code_point)return this.EOF_byte;if(t.offset(1),this.inRange(r,55296,57343))return this.EOF_code_point;if(this.inRange(r,0,127))return e.emit(r);for(this.inRange(r,128,2047)?(n=1,i=192):this.inRange(r,2048,65535)?(n=2,i=224):this.inRange(r,65536,1114111)&&(n=3,i=240),i=e.emit(this.div(r,Math.pow(64,n))+i);0<n;)i=this.div(r,Math.pow(64,n-1)),i=e.emit(128+i%64),n-=1;return i},e}();e.UTF8Encoder=o;var s=function(){function e(e){this.EOF_byte=-1,this.pos=0,this.bytes=e}return e.prototype.get=function(){return this.pos>=this.bytes.length?this.EOF_byte:Number(this.bytes[this.pos])},e.prototype.offset=function(e){if(this.pos+=e,0>this.pos)throw Error("Seeking past start of the buffer");if(this.pos>this.bytes.length)throw Error("Seeking past EOF")},e.prototype.match=function(e){if(e.length>this.pos+this.bytes.length)return!1;var t;for(t=0;t<e.length;t+=1)if(Number(this.bytes[this.pos+t])!==e[t])return!1;return!0},e}();e.ByteInputStream=s;var a=function(){function e(e){this.EOF_byte=-1,this.pos=0,this.bytes=e}return e.prototype.emit=function(e){var t,n=this.EOF_byte;for(t=0;t<arguments.length;++t)n=Number(arguments[t]),this.bytes[this.pos++]=n;return n},e}();e.ByteOutputStream=a;var l=function(){function e(e){this.pos=0,this.EOF_code_point=-1,this._str=e,this.cps=this.getCps(this._str)}return e.prototype.getCps=function(e){for(var t=[],n=0,i=e.length;n<e.length;){var r=e.charCodeAt(n);if(this.inRange(r,55296,57343))if(this.inRange(r,56320,57343))t.push(65533);else if(n===i-1)t.push(65533);else{var o=e.charCodeAt(n+1);this.inRange(o,56320,57343)?(n+=1,t.push(65536+((r&=1023)<<10)+(o&=1023))):t.push(65533)}else t.push(r);n+=1}return t},e.prototype.inRange=function(e,t,n){return t<=e&&e<=n},e.prototype.offset=function(e){if(this.pos+=e,0>this.pos)throw Error("Seeking past start of the buffer");if(this.pos>this.cps.length)throw Error("Seeking past EOF")},e.prototype.get=function(){return this.pos>=this.cps.length?this.EOF_code_point:this.cps[this.pos]},e}();e.CodePointInputStream=l;var u=function(){function e(){this._str=""}return e.prototype.str=function(){return this._str},e.prototype.emit=function(e){65535>=e?this._str+=String.fromCharCode(e):(e-=65536,this._str+=String.fromCharCode(55296+(e>>10&1023)),this._str+=String.fromCharCode(56320+(1023&e)))},e}();e.CodePointOutputStream=u}(r||(r={})),function(e){var n=function(e){function n(){var t=e.call(this)||this;return t.connected=!1,t}return h(n,e),n.prototype.load=function(e){var t=this;this.url=e,this.connected=!1,this.close(),this.xhr=new XMLHttpRequest,this.xhr.open("GET",e,!0),this.xhr.responseType="arraybuffer",this.xhr.onload=function(e){return t.onComplete(e)},this.xhr.onprogress=function(e){return t.onProgress(e)},this.xhr.onerror=function(e){return t.onError(e)},this.xhr.onreadystatechange=function(e){return t.onReadyStateChange(e)},this.xhr.send()},n.prototype.onComplete=function(e){this.response=this.xhr.response,this.dispatch(new t._Event(t._Event.COMPLETE,this))},n.prototype.onProgress=function(e){this.dispatch(e)},n.prototype.onError=function(e){this.dispatch(e)},n.prototype.onReadyStateChange=function(e){null!=this.xhr&&4===this.xhr.readyState&&200!==this.xhr.status&&this.dispatch(new t._Event(t._Event.ERROR,this,this.xhr.statusText)),null!=this.xhr&&3>this.xhr.readyState&&!this.connected&&(this.connected=!0,this.dispatch(new t._Event(t._Event.CONNECTED)))},n.prototype.close=function(){null!=this.xhr&&this.xhr.abort()},n.prototype.dispose=function(){this.response=null,null!=this.xhr&&(this.xhr.onload=null,this.xhr.onprogress=null,this.xhr.onerror=null,this.xhr.onreadystatechange=null),this.xhr=null},n}(t.EventDispatcher);e.URLBinaryLoader=n}(o||(o={})),function(e){var n=function(e){function n(){var t=e.call(this)||this;return t.dataType=i.TEXT,t.contentType=r.TEXT_PLAIN,t.requestMethod=o.GET,t.connected=!1,t.withCredentials=!1,t._lastProgressTriggered=0,t._lastEvent=null,t.progressInterval=0,t.requestHeaders=[],t.data={},t._bytesLoaded=0,t}return h(n,e),n.prototype.load=function(e,t){var n=this;void 0===t&&(t=null),this.url=e,this._bytesLoaded=0,this.connected=!1,this.processRequestHeader(t),this.close(),this.xhr=new XMLHttpRequest,this.xhr.open(this.requestMethod,this.url,!0),this.xhr.onerror=function(e){return n.onError(e)},this.xhr.onreadystatechange=function(e){return n.onReadyStateChange(e)},this.xhr.onprogress=function(e){return n.onProgress(e)},this.xhr.setRequestHeader("Content-type",this.contentType);for(var i=0;i<this.requestHeaders.length;i++)this.xhr.setRequestHeader(this.requestHeaders[i].header,this.requestHeaders[i].value);this.xhr.send(this.data)},n.prototype.processRequestHeader=function(e){if(this.requestHeaders=[],null!=e)for(var t in e)this.requestHeaders.push(new a(t,e[t]))},n.prototype.getBytesLoaded=function(){return this._bytesLoaded},n.prototype.success=function(){this.response=this.xhr.response||this.xhr.responseText,this._bytesLoaded=this._lastEvent?this._lastEvent.loaded:this.response.length,this.dispatch(new t._Event(t._Event.COMPLETE,this))},n.prototype.onReadyStateChange=function(e){null!=this.xhr&&4===this.xhr.readyState&&(200===this.xhr.status?this.success():this.dispatch(new t._Event(t._Event.ERROR,this,this.xhr.statusText))),null!=this.xhr&&3>this.xhr.readyState&&!this.connected&&(this.connected=!0,this.dispatch(new t._Event(t._Event.CONNECTED)))},n.prototype.onProgress=function(e){s.getTimer()-this._lastProgressTriggered>this.progressInterval?(this.response=this.xhr.response||this.xhr.responseText,this._bytesLoaded=e.loaded,this.dispatch(e),this._lastProgressTriggered=s.getTimer(),this._lastEvent=null):this._lastEvent=e},n.prototype.onError=function(e){this.dispatch(new t._Event(t._Event.ERROR,this))},n.prototype.close=function(){null!=this.xhr&&(this.xhr.onprogress=null,this.xhr.onreadystatechange=null,this.xhr.abort())},n.prototype.dispose=function(){this.data=this.response=null,this.requestHeaders=[],null!=this.xhr&&(this.xhr.onprogress=null,this.xhr.onreadystatechange=null),this._lastProgressTriggered=this._lastEvent=this.xhr=null},n}(t.EventDispatcher);e.URLStream=n;var i=function(){function e(){}return e.TEXT="text",e.XML="xml",e.HTML="html",e.JSON="json",e}();e.DataType=i;var r=function(){function e(){}return e.TEXT_PLAIN="text/plain",e.TEXT_XML="text/xml",e.APPLICATION_JSON="application/json",e.APPLICATION_URLENCODED="application/x-www-form-urlencoded",e}();e.ContentType=r;var o=function(){function e(){}return e.POST="POST",e.GET="GET",e}();e.URLRequestMethod=o;var a=function(e,t){this.header=e,this.value=t};e.URLRequestHeader=a,n=function(){function e(){this.data={}}return e.prototype.toString=function(){var e,t=[];for(e in this.data)t.push(e+"="+this.data[e]);return t.join("&")},e}(),e.URLVariables=n}(o||(o={})),function(e){var n=function(e){function n(){var t=e.call(this)||this;return t.dialogOpened=!1,document.body.onfocus=function(){return t.onFocus()},t}return h(n,e),n.prototype.browse=function(e){var t=this;void 0===e&&(e=[]),this.input=document.createElement("input"),this.input.setAttribute("type","file"),this.input.style.display="none",document.body.appendChild(this.input),this.input.setAttribute("accept",e.join(",")),this.input.addEventListener("change",(function(){return t.onChange()})),this.dialogOpened=!0,this.input.click()},n.prototype.onChange=function(){this.dialogOpened=!1,s.nullOrUndefined(this.input.files)||s.nullOrUndefined(this.input.files[0])||(this.file=this.input.files[0],this.dispatchWith(t._Event.SELECT))},n.prototype.onFocus=function(){var e=this;this.dialogOpened&&s.fmSetTimeout((function(){(s.nullOrUndefined(e.input.files)||s.nullOrUndefined(e.input.files[0]))&&e.dispatchWith(t._Event.CANCEL),e.dialogOpened=!1}),500)},n.prototype.load=function(e){var t=this;void 0===e&&(e=i.TEXT),null!=this.file&&(this.reader=new FileReader,this.reader.onload=function(e){return t.onLoad(e)},this.reader.onprogress=function(e){return t.onProgress(e)},this.reader.onerror=function(e){return t.onError(e)},e==i.ARRAY_BUFFER?this.reader.readAsArrayBuffer(this.file):this.reader.readAsText(this.file))},n.prototype.onLoad=function(e){this.response=this.reader.result,this.dispatch(new t._Event(t._Event.COMPLETE,this))},n.prototype.onProgress=function(e){this.dispatch(e)},n.prototype.onError=function(e){this.dispatch(e)},n.prototype.dispose=function(){this.reader=this.file=this.response=null},n}(t.EventDispatcher);e.FileReference=n;var i=function(){function e(){}return e.TEXT="TEXT",e.ARRAY_BUFFER="ARRAY_BUFFER",e}();e.ReadMethod=i}(o||(o={})),function(e){var t=function(){function e(){}return Object.defineProperty(e.prototype,"item",{get:function(){return this[0]},enumerable:!0,configurable:!0}),e.prototype.find=function(e){return void 0===this.item?this:this.item.find(e)},e.prototype.text=function(){return void 0===this.item?"":this.item.text()},e.prototype.attr=function(e,t){return void 0===this.item?void 0:t?this.item.attr(e,t):this.item.attr(e)},e.prototype.children=function(){for(var t=new e,i=0;void 0!==this[i];)t[i++]=n.convert(this[i]);return t},e.prototype.push=function(e){return this[this.length]=e,this},Object.defineProperty(e.prototype,"length",{get:function(){for(var e=0;void 0!==this[e];)e++;return e},enumerable:!0,configurable:!0}),e}();e.XMLNodeList=t;var n=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return h(n,e),n.prototype.text=function(e){return e||!1===e?(this.textContent=e.toString(),this):e=s.nullOrUndefined(this.textContent)?"":this.textContent},n.prototype.append=function(e){return s.nullOrUndefined(e)||"string"==typeof e&&s.nullOrEmpty(e)||(e instanceof CDATASection||""!=e.textContent)&&this.appendChild(e),this},n.prototype.isEmpty=function(){return""==this.text()},n.prototype.find=function(e){e=this.querySelectorAll(e);for(var i=new t,r=0;r<e.length;r++)i[r]=n.convert(e[r]);return i},n.prototype.attr=function(e,t){return t||!1===t?(this.setAttribute(e,t),this):(null==(t=this.getAttribute(e))&&(t=void 0),t)},n.prototype.getChildren=function(){for(var e=new t,i=this.firstElementChild;i;)i.nodeType===Node.ELEMENT_NODE&&e.push(n.convert(i)),i=i.nextElementSibling;return e},Object.defineProperty(n.prototype,"length",{get:function(){return this.childNodes.length},enumerable:!0,configurable:!0}),n.convert=function(e){return e.find=n.prototype.find,e.append=n.prototype.append,e.text=n.prototype.text,e.attr=n.prototype.attr,e.isEmpty=n.prototype.isEmpty,e.getChildren=n.prototype.getChildren,e},n}(Element);e.XMLNode=n;var i=function(){function e(){throw Error("Singleton")}return e.create=function(t){if(null==t.firstChild){if(t=(new DOMParser).parseFromString(t,"text/xml"),e.isParseError(t))return null;t=t.firstElementChild?t.firstElementChild:t.firstChild}else t=t.firstChild;return n.convert(t)},e.isParseError=function(e){if(!e.getElementsByTagName("parsererror")||!e.getElementsByTagName("parsererror")[0])return!1;var t=e.getElementsByTagName("parsererror")[0].namespaceURI;return 0<e.getElementsByTagNameNS(t,"parsererror").length},e.cdata=function(t){return e.doc.createCDATASection(t)},e.toXMLString=function(t,n){void 0===n&&(n=!1),null==e.serializer&&(e.serializer=new XMLSerializer);var i=e.serializer.serializeToString(t);return 1==n&&(i=e.format(i)),i.trim()},e.format=function(e){var t=(e=e.replace(/>\s{0,}</g,"><").replace(/</g,"~::~<").replace(/\s*xmlns\:/g,"~::~xmlns:").replace(/\s*xmlns\=/g,"~::~xmlns=").split("~::~")).length,n=!1,i=0,r="",o=0,s=["\n"];for(o=0;20>o;o++)s.push(s[o]+"    ");for(o=0;o<t;o++)-1<e[o].search(/<!/)?(r+=s[i]+e[o],n=!0,(-1<e[o].search(/--\x3e/)||-1<e[o].search(/\]>/)||-1<e[o].search(/!DOCTYPE/))&&(n=!1)):-1<e[o].search(/--\x3e/)||-1<e[o].search(/\]>/)?(r+=e[o],n=!1):/^<\w/.exec(e[o-1])&&/^<\/\w/.exec(e[o])&&/^<[\w:\-\.\,]+/.exec(e[o-1])[0]==/^<\/[\w:\-\.\,]+/.exec(e[o])[0].replace("/","")?(r+=e[o],n||i--):r=-1<e[o].search(/<\w/)&&-1==e[o].search(/<\//)&&-1==e[o].search(/\/>/)?r+=n?e[o]:s[i++]+e[o]:-1<e[o].search(/<\w/)&&-1<e[o].search(/<\//)?r+=n?e[o]:s[i]+e[o]:-1<e[o].search(/<\//)?r+=n?e[o]:s[--i]+e[o]:-1<e[o].search(/\/>/)?r+=n?e[o]:s[i]+e[o]:-1<e[o].search(/<\?/)||-1<e[o].search(/xmlns\:/)||-1<e[o].search(/xmlns\=/)?r+(s[i]+e[o]):r+e[o];return(e=(e="\n"==r[0]?r.slice(1):r).replace(/[\r\n\s]*<\!\[CDATA\[/g,"<![CDATA[")).replace(/]]\x3e\s*/g,"]]>")},e.doc=(new DOMParser).parseFromString("<tmp/>","text/xml"),e}();e.XML=i}(o||(o={})),function(e){var t=function(){function e(){}return e.print=function(e,t,n){void 0===t&&(t=""),void 0===n&&(n="");var r="printer-"+(new Date).getTime(),o=new i.UIElement("iframe").attr("name",r);o.css("width","1px").css("height","1px").css("position","absolute").css("left","-9999px"),i.UIElement.convert(document.body).append(o);var a=(r=window.frames[r]).document;a.open(),a.write("<!DOCTYPE html>"),a.write("<html>"),a.write("<head>"),a.write("<title>"),a.write(n),a.write("</title>"),a.write("<style>"),a.write(t+"body{-webkit-print-color-adjust:exact;}"),a.write("</style>"),a.write("</head>"),a.write("<body>"),a.write(e),a.write("</body>"),a.write("</html>"),a.close(),r.focus(),r.print(),s.fmSetTimeout((function(){o.remove()}),2e3)},e}();e.PrintJob=t}(o||(o={})),function(e){var t=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return h(t,e),t.getInstance=function(){return null==t.instance&&(t.instance=new t),t.instance},Object.defineProperty(t.prototype,"target",{get:function(){return document},enumerable:!0,configurable:!0}),t}(n=function(){function t(){this.listeners={}}return Object.defineProperty(t.prototype,"target",{get:function(){return null},enumerable:!0,configurable:!0}),t.prototype.areListenersEqual=function(e,t){return e.type===t.type&&e.handler===t.handler&&e.useCapture===t.useCapture},t.prototype.hasEventListener=function(t,n){if(e.nullOrUndefined(this.listeners[t]))return!1;for(var i=0;i<this.listeners[t].length;i++)if(this.areListenersEqual(this.listeners[t][i],n))return!0;return!1},t.prototype.addEventListener=function(t,n,i){var r={type:t,handler:n,useCapture:i};this.hasEventListener(t,r)||(e.nullOrUndefined(this.listeners[t])&&(this.listeners[t]=[]),this.listeners[t].push(r),this.target.addEventListener(t,n,i))},t.prototype.removeEventListener=function(e,t,n){for(e in t={type:e,handler:t,useCapture:n},this.listeners){for(var i=[],r=0;r<this.listeners[e].length;r++)this.areListenersEqual(this.listeners[e][r],t)?"boolean"==typeof n?this.target.removeEventListener(e,this.listeners[e][r].handler,n):this.target.removeEventListener(e,this.listeners[e][r].handler):i.push(this.listeners[e][r]);this.listeners[e]=i}},t.prototype.dispose=function(){for(var e in this.listeners)for(var t=0;t<this.listeners[e].length;t++)this.target.removeEventListener(e,this.listeners[e][t].handler,!0),this.target.removeEventListener(e,this.listeners[e][t].handler,!1);this.listeners={}},t}()),n=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return h(t,e),t.getInstance=function(){return null==t.instance&&(t.instance=new t),t.instance},Object.defineProperty(t.prototype,"target",{get:function(){return window},enumerable:!0,configurable:!0}),t}(n),i=function(){function e(){}return e.dispose=function(){for(;0<e.timeouts.length;)clearTimeout(e.timeouts.pop());for(;0<e.intervals.length;)clearInterval(e.intervals.pop())},e.timeouts=[],e.intervals=[],e}();e.Timers=i,e.fmSetTimeout=function(e,t){var n=setTimeout(e,t);return i.timeouts.push(n),n},e.fmClearTimeout=function(e){clearTimeout(e),i.timeouts.splice(i.timeouts.indexOf(e),1)},e.fmSetInterval=function(e,t){var n=setInterval(e,t);return i.intervals.push(n),n},e.fmClearInterval=function(e){clearInterval(e),i.intervals.splice(i.intervals.indexOf(e),1)},e.fmdocument=t.getInstance(),e.fmwindow=n.getInstance()}(s||(s={})),function(e){var n=function(e){function n(t){var n=e.call(this)||this;return n._scrollListener=function(){return n.scrollListener()},n._dispatchResize=function(){return n._dispatchResize()},n._target=t,n.startListener(n._target.element),n}return h(n,e),n.prototype.resetTriggers=function(e){var t,n=(e=(t=e.__resizeTriggers__).firstElementChild).firstElementChild;(t=t.lastElementChild).scrollLeft=t.scrollWidth,t.scrollTop=t.scrollHeight,n.style.width=e.offsetWidth+1+"px",n.style.height=e.offsetHeight+1+"px",e.scrollLeft=e.scrollWidth,e.scrollTop=e.scrollHeight},n.prototype.checkTriggers=function(e){return e.offsetWidth!=e.__resizeLast__.width||e.offsetHeight!=e.__resizeLast__.height},n.prototype.scrollListener=function(){var e=this;if(null!=this._target){var t=this._target.element;this.resetTriggers(t),t.__resizeRAF__&&this._target.cancelAnimationFrame(t.__resizeRAF__),t.__resizeRAF__=this._target.requestAnimationFrame((function(){e.checkTriggers(t)&&(t.__resizeLast__.width=t.offsetWidth,t.__resizeLast__.height=t.offsetHeight,e.dispatchResize())}))}},n.prototype.dispatchResize=function(){this.dispatchWith(t._Event.RESIZE)},n.prototype.startListener=function(e){e.attachEvent?e.attachEvent("onresize",this._dispatchResize):e.__resizeTriggers__||("static"==getComputedStyle(e).position&&(e.style.position="relative"),e.__resizeLast__={},e.__resizeListeners__=[],e.__resizeTriggers__=document.createElement("div"),e.__resizeTriggers__.className="wdr-resize-triggers",e.__resizeTriggers__.innerHTML='<div class="wdr-expand-trigger"><div></div></div><div class="wdr-contract-trigger"></div>',e.appendChild(e.__resizeTriggers__),this.resetTriggers(e),e.addEventListener("scroll",this._scrollListener,!0))},n.prototype.stopListener=function(e){e.detachEvent?e.detachEvent("onresize",this._dispatchResize):(e.removeEventListener("scroll",this._scrollListener),e.__resizeTriggers__=!e.removeChild(e.__resizeTriggers__))},n.prototype.dispose=function(){this._target&&this._target.element&&this.stopListener(this._target.element),this._dispatchResize=this._scrollListener=this._target=null},n}(t.EventDispatcher);e.ResizeListener=n}(s||(s={})),function(e){var t=function(){function e(){}return e.isHttpURL=function(e){return null!=e&&(0==e.indexOf("http://")||0==e.indexOf("https://"))},e.isBlobURL=function(e){return null!=e&&0==e.indexOf("blob:http")},e.getUrl=function(t,n){if(void 0===n&&(n=!1),!t)return"()";if(0==(t=t.trim()).length)return"()";if(e.isBlobURL(t))return t;if(n){var i=-1<t.indexOf("?")?"&":"?";t+=i+Math.round(Date.now()/3600)}if(e.isHttpURL(t)||0==t.indexOf("file")||"/"==t.substr(0,1))return t;if(-1!=t.indexOf("..")){for(i=t.split("/");".."==i[0];)0<i.length&&i.shift();"/"==(t="/"+i.join("/")).substr(0,1)&&(t=t.substring(1))}return t},e.addTimestamp=function(e){var t=-1<e.indexOf("?")?"&":"?";return e+(t+Math.round(Date.now()/3600))},e}();e.URLUtils=t}(s||(s={})),function(e){var t=function(){function e(){}return e.isUTCFormat=function(e){return"UTC:"==e.slice(0,4)},e.format=function(t,n){var i=!1;"UTC:"==n.slice(0,4)&&(n=n.slice(4),i=!0);var r=t[(h=i?"getUTC":"get")+"Date"](),o=t[h+"Day"](),s=t[h+"Month"](),a=t[h+"FullYear"](),l=t[h+"Hours"](),u=t[h+"Minutes"](),c=t[h+"Seconds"](),h=t[h+"Milliseconds"](),d=i?0:t.getTimezoneOffset(),A={d:r,dd:e.pad(r),ddd:e.i18n.dayNames[o],dddd:e.i18n.dayNames[o+7],D:r,DD:e.pad(r),DDD:e.i18n.dayNames[o],DDDD:e.i18n.dayNames[o+7],M:s+1,MM:e.pad(s+1),MMM:e.i18n.monthNames[s],MMMM:e.i18n.monthNames[s+12],yy:String(a).slice(2),yyyy:a,YY:String(a).slice(2),YYYY:a,h:l%12||12,hh:e.pad(l%12||12),H:l,HH:e.pad(l),m:u,mm:e.pad(u),s:c,ss:e.pad(c),l:e.pad(h,3),L:e.pad(99<h?Math.round(h/10):h),t:12>l?"a":"p",tt:12>l?"am":"pm",T:12>l?"A":"P",TT:12>l?"AM":"PM",Z:i?"UTC":(String(t).match(e.timezone)||[""]).pop().replace(e.timezoneClip,""),o:(0<d?"-":"+")+e.pad(100*Math.floor(Math.abs(d)/60)+Math.abs(d)%60,4),S:["th","st","nd","rd"][3<r%10?0:(10!=r%100-r%10?1:0)*r%10]};return n.replace(e.token,(function(e){return e in A?A[e]:e.slice(1,e.length-1)}))},e.pad=function(e,t){var n=""+e;for(t=t||2;n.length<t;)n="0"+n;return n},e.setDayNames=function(t,n){e.i18n.dayNames=n.concat(t)},e.setMonthNames=function(t,n){e.i18n.monthNames=n.concat(t)},e.token=/d{1,4}|D{1,4}|m{1,4}|M{1,4}|yy(?:yy)?|YY(?:YY)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,e.timezone=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,e.timezoneClip=/[^-+\dA-Z]/g,e.i18n={dayNames:"Sun Mon Tue Wed Thu Fri Sat Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),monthNames:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec January February March April May June July August September October November December".split(" ")},e}();e.DateFormat=t}(s||(s={})),function(e){function t(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(t=0;t<e.length;t++)if(null==e[t])return!0;return!1}var n=function(){function n(){}return n.toBoolean=function(e){return null!=e&&("true"==e.toLowerCase()||"on"==e.toLowerCase())},n.generateID=function(){var e=(new Date).getTime()-new Date(2012,2,8).getTime();return n.lastGeneratedID==e?e.toString(35)+(n.lastGeneratedIDSuffix++).toString():(n.lastGeneratedID=e,n.lastGeneratedIDSuffix=0,e.toString(35))},n.bind=function(t){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];if(e.nullOrUndefined(t))return t;for(i=0;i<n.length;i++)t=t.replace(RegExp("\\{"+i+"\\}","gi"),null==n[i]?"":n[i].toString());return t},n.concat=function(e,t){if(0==e.length)return t;var n=0<e.length?e.charCodeAt(e.length-1):-1,i=0<e.length?e.charCodeAt(e.length-2):-1,r="";if(-1!=i&&128<i&&256>i&&!(191<i&&224>i))return r=t.charCodeAt(0),r=String.fromCharCode((15&i)<<12|(63&n)<<6|63&r),e.substr(0,e.length-2)+r+t.substr(1);if(!(128>n||256<n)){if(191<n&&224>n)return i=t.charCodeAt(0),r=String.fromCharCode((31&n)<<6|63&i),e.substr(0,e.length-1)+r+t.substr(1);if(256>n)return i=t.charCodeAt(0),r=t.charCodeAt(1),r=String.fromCharCode((15&n)<<12|(63&i)<<6|63&r),e.substr(0,e.length-1)+r+t.substr(2)}return e+t},n.toTime=function(e){if(isNaN(e))return r.model._labels.Labels.INVALID_DATE;var t="",n=0>e;0>e&&(e*=-1);var i=(e=Math.round(e))%60;return t=10>i?"0"+i:i.toString(),t=(10>(i=(e=(e-i)/60)%60)?"0"+i:i.toString())+":"+t,t=(10>(i=(e=(e-i)/60)%24)?"0"+i:i.toString())+":"+t,0<(e=(e-i)/24)&&(t=e.toString()+"d "+t),n&&(t="-"+t),t},n.toDate=function(t,n){if(void 0===n&&(n="dd/MM/yyyy"),isNaN(t)||0==t)return r.model._labels.Labels.INVALID_DATE;var i=new Date(t);return isNaN(i.getTime())?"":e.DateFormat.format(i,n)},n.toDateTime=function(e,t){return void 0===t&&(t="dd/MM/yyyy HH:mm:ss"),n.toDate(e,t)},n.isDate=function(e){return this.matchesISODate(e)&&!isNaN(Date.parse(e))&&(1<e.match(/\d+/).length||1==e.match(/\d+/).length&&new Date(Date.parse(e)).toDateString()!=new Date(Date.parse(e.match(/\d+/)[0])).toDateString())},n.matchesISODate=function(t){return!(e.detectBrowser().isChrome&&!t.match(/^([\+-]?\d{4}(?!\d{2}\b))((-?)((0[1-9]|1[0-2])(\3([12]\d|0[1-9]|3[01]))?|W([0-4]\d|5[0-2])(-?[1-7])?|(00[1-9]|0[1-9]\d|[12]\d{2}|3([0-5]\d|6[1-6])))([T\s]((([01]\d|2[0-3])((:?)[0-5]\d)?|24\:?00)([\.,]\d+(?!:))?)?(\17[0-5]\d([\.,]\d+)?)?([zZ]|([\+-])([01]\d|2[0-3]):?([0-5]\d)?)?)?)?$/i))},n.fromRgbToHex=function(e){if(t(e))return 0;if("#"===e.substr(0,1))return parseInt(e.substr(1),16);"transparent"==e&&(e="rgb(255,255,255)"),e=(e=e.replace(/[^\d,]/g,"")).split(",");var n=parseInt(e[0]),i=parseInt(e[1]),r=parseInt(e[2]);return 0===parseInt(e[3])&&(n=i=r=255),r|i<<8|n<<16},n.strToUint8Arr=function(e){for(var t=new Uint8Array(e.length),n=0,i=e.length;n<i;++n)t[n]=e.charCodeAt(n);return t},n.strToUint8ArrExtended=function(e){for(var t=new r.DataStream(new ArrayBuffer(e.length)),n=0,i=e.length;n<i;++n)t.writeString(e.charAt(n));return t.seek(0),t.readUint8Array(t.byteLength)},n.dataURItoUint8Arr=function(e){return e=-1!==e.split(",")[0].indexOf("base64")?atob(e.split(",")[1]):decodeURI(e.split(",")[1]),n.strToUint8Arr(e)},n.decode2=function(e){var t,n,i,r,o,s;for(t="",i=e.length,n=0;n<i;)switch((r=e[n++])>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:t+=String.fromCharCode(r);break;case 12:case 13:o=e[n++],t+=String.fromCharCode((31&r)<<6|63&o);break;case 14:o=e[n++],s=e[n++],t+=String.fromCharCode((15&r)<<12|(63&o)<<6|(63&s)<<0)}return t},n.decode=function(e){for(var t="",n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return decodeURIComponent(escape(t))},n.contains=function(e,t){return-1<e.toLowerCase().indexOf(t)},n.parseBool=function(e){return"string"==typeof e&&(e=String(e).toLowerCase()),"true"===e||"on"===e||1===e||!0===e},n.toNumber=function(e){return null==e?NaN:"number"==typeof e?e:("string"!=typeof e&&(e=e.toString()),","==r.model.format.FormatManager.getFormat("").thousandsSeparator&&(e=e.replace(/,/gi,"")),e=(e=e.replace(",",".")).replace(/[^[,|\.|\-|\d|e]]*/gi,""),parseFloat(e))},n.trim=function(e,t){if(void 0===t&&(t=null),null==e)return"";for(var i=0;n.isWhitespace(e.charAt(i),t);)++i;for(var r=e.length-1;n.isWhitespace(e.charAt(r),t);)--r;return r>=i?e.slice(i,r+1):""},n.trimLeft=function(e,t){if(void 0===t&&(t=null),null==e)return"";for(var i=0;n.isWhitespace(e.charAt(i),t);)++i;var r=e.length-1;return r>=i?e.slice(i,r+1):""},n.isWhitespace=function(e,t){if(void 0===t&&(t=null),null!=t&&e==t)return!1;switch(e){case" ":case"\t":case"\r":case"\n":case"\f":return!0}return!1},n.isEntity=function(e){for(var t in n.entityMap)if(n.entityMap[t]==e)return!0;return!1},n.escapeHtml=function(e,t){return void 0===t&&(t=!1),e.replace(t?/[<>"'\/]/g:/[&<>"'\/]/g,(function(e){return n.entityMap[e]}))},n.lastGeneratedIDSuffix=0,n.entityMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"},n}();e.StringUtils=n,e.nullOrUndefined=t,e.nullOrEmpty=function(e){if(t(e)||"string"!=typeof e||0==e.trim().length)return!0;e=e.trim();for(var n=0;n<e.length;n++)if(0!=e.charCodeAt(n))return!1;return!0},e.strEncode=function(e){return e.replace(/\|/g,"{%7C}")},e.strDecode=function(e){return e.replace(/{%7C}/g,"|")}}(s||(s={})),function(e){var t=function(){function e(){}return e.sortOn=function(t,n,i,r){var o=1==(i>>=1)%2,s=1==(i=i>>1>>1)%2;return i=1==(i>>=1)%2,s?(t=e.sortIndices(t,n,r),o&&t.reverse(),t):(i?e.sortNumeric(t,n):""==n?t.sort():t.sort((function(e,t){return e[n]==t[n]?0:e[n]>t[n]?1:-1})),o&&t.reverse(),t)},e.sort=function(t,n,i){return void 0===n&&(n=0),e.sortOn(t,"",n,i)},e.sortNumeric=function(e,t){e.sort(""==t?function(e,t){return isNaN(e)?1:isNaN(t)?-1:e-t}:function(e,n){return isNaN(e[t])?1:isNaN(n[t])?-1:e[t]-n[t]})},e.sortIndices=function(e,t,n){var i,r=[];for(i in e)r.push([e[i],parseInt(i)]);for(var o in r.sort(""==t?n?function(e,t){return n(e[0],t[0])}:function(e,t){return e[0]==t[0]?0:e[0]>t[0]?1:-1}:n?function(e,i){return n(e[0][t],i[0][t])}:function(e,n){return e[0][t]==n[0][t]?0:e[0][t]>n[0][t]?1:-1}),e=[],r)e.push(r[o][1]);return e},e.find=function(e,t,n){void 0===n&&(n=null);for(var i=e.length-1;-1<i;i--)if(null===n&&e[i]===t||null!==n&&e[i][n]===t)return e[i];return null},e.findIndex=function(e,t,n){void 0===n&&(n=null);for(var i=e.length-1;-1<i;i--)if(null===n&&e[i]===t||null!==n&&e[i][n]===t)return i;return-1},e.insert=function(e,t,n){for(var i=0;i<t.length;i++)e.splice(n+i,0,t[i])},e.CASEINSENSITIVE=1,e.DESCENDING=2,e.UNIQUESORT=4,e.RETURNINDEXEDARRAY=8,e.NUMERIC=16,e}();e.ArrayUtils=t}(s||(s={})),function(e){var t=function(){function t(){this.values={},this.keys=[]}return t.prototype.addItem=function(e,t){void 0===this.values[e]&&this.keys.push(e),this.values[e]=t},t.prototype.addUniqueItem=function(e,t){this.keys.push(e),this.values[e]=t},t.prototype.unshift=function(e,t){this.keys.unshift(e),this.values[e]=t},t.prototype.setItemAt=function(e,t,n){this.keys[n]=e,this.values[e]=t},t.prototype.addItemAt=function(e,t,n){null!=this.getItem(e)&&this.removeItem(e),this.keys.splice(n,0,e),this.values[e]=t},t.prototype.removeItem=function(e){null!=this.getItem(e)&&(this.keys.splice(this.indexOf(e),1),delete this.values[e])},t.prototype.removeItemAt=function(e){var t=this.getKeyAt(e);null!=t&&(this.keys.splice(e,1),delete this.values[t])},Object.defineProperty(t.prototype,"length",{get:function(){return this.keys.length},set:function(e){},enumerable:!0,configurable:!0}),t.prototype.indexOf=function(e){return this.keys.indexOf(e)},t.prototype.keyExists=function(e){return null!=this.values[e]},t.prototype.getItem=function(e){return this.values[e]},t.prototype.getItemAt=function(e){return this.getItem(this.keys[e])},t.prototype.getKeyAt=function(e){return this.keys[e]},t.prototype.moveItemAt=function(e,t){this.keys.splice(t,0,this.keys.splice(e,1)[0])},t.prototype.slice=function(n,i){void 0===n&&(n=0),void 0===i&&(i=0),0==i&&(i=this.length-n);for(var r=new t,o=0;o<i;o++)this.length>o+n&&(e.nullOrUndefined(this.getItemAt(o+n))||r.addItem(this.getKeyAt(o+n),this.getItemAt(o+n)));return r},t.prototype.concat=function(e,n){if(void 0===n&&(n=!0),!n)return this._concat(e),null;var i,r=new t;for(i=0;i<this.length;i++)r.addItem(this.getKeyAt(i),this.getItemAt(i));for(i=0;i<e.length;i++)r.addItem(e.getKeyAt(i),e.getItemAt(i));return r},t.prototype._concat=function(e){var t,n=e.length;for(t=0;t<n;t++)this.addItem(e.getKeyAt(t),e.getItemAt(t))},t.prototype.splice=function(e,n){void 0===n&&(n=0);var i=new t;e+n>this.length&&(n=this.length-e),1>n&&(n=this.length);for(var r=0;r<this.length;r++)(r<e||r>=e+n)&&i.addItem(this.getKeyAt(r),this.getItemAt(r));return i},t.prototype.reverse=function(){var e,n=new t;for(e=this.length-1;-1<e;e--)n.addItem(this.getKeyAt(e),this.getItemAt(e));return n},t.prototype.toArray=function(e){if(void 0===e&&(e=!1),e)return this.keys.slice(0);e=[];for(var t=0;t<this.length;t++)e.push(this.getItemAt(t));return e},t.prototype.toKeyArray=function(e){if(void 0===e&&(e=!1),e)return this.keys.slice(0);e=[];for(var t=0;t<this.length;t++)e.push(this.getKeyAt(t));return e},t.fromArray=function(e){for(var n=new t,i=0;i<e.length;i++)n.addItem(i.toString(),e[i]);return n},t.convert=function(e,n){for(var i=new t,r=0;r<e.length;r++)i.addItem(e[r][n],e[r]);return i},t.prototype.toString=function(){var e,t=[];for(e in this.keys){var n="{"+e+": "+this.getItem(e)+"}";t.push(n)}return t.join(", ")},t}();e.AssociativeArray=t}(s||(s={})),function(e){var t=function(){function e(){this.quotes=[]}return e.prototype.parse=function(e){try{this.quotes=[];for(var t=[],n=!1,i="",r=0;r<e.length;r++){var o=e.charAt(r);'"'==o||"'"==o?(n&&(this.quotes.push(i),t.push(o),i=""),n=!n):n&&(i+=o)}var s;for(e="  "+e,r=0;r<this.quotes.length;r++)if("truestyle"!=this.quotes[r].toLowerCase()){var a=t[r]+this.quotes[r]+t[r],l=e.substring(0,e.indexOf(a)+a.length+2);if((s=/(\w\w\w\()[\'|\"][^\'|^\"]*[\'|\"]/i).test(l))e=e.replace(a,"@"+r);else{s=/(\W)[\'|\"][^\'|^\"]*[\'|\"]/i;var u=(-1!=l.indexOf("#value")||-1!=l.indexOf("#updateDifference")||-1!=l.indexOf("#updatePercent"))&&-1!=l.indexOf("if(");s.test(l)&&!u?e=e.replace(a,"sum(@"+r+")"):(s=/(\W)[\'|\"][^\'|^\"]*[\'|\"]/i,e=e.replace(a,"@"+r))}}e=(e=(e=(e=e.replace(s=/\#value/g,"value()")).replace(s=/\#updateDifference/g,"updateDifference()")).replace(s=/\#updatePercent/g,"updatePercent()")).toLocaleLowerCase();var c=(c=this._parse(e))[1][0]}catch(h){return null}return c},e.prototype._parse=function(e){for(var t=[],n="",i=e.length,r=0;r<e.length;r++){var o=e.charAt(r);if("("==o)n+="$"+t.length+";",o=this._parse(e.slice(r+1)),t.push(o[1]),r=r+o[0]+1;else{if(")"==o){i=r;break}n+=o}}for(e=[],n=n.split(","),r=0;r<n.length;r++)e.push(this._parseOperands(n[r],t));return[i,e]},e.prototype._parseOperands=function(e,t){for(var n=[[" or "," and "],"== != >= <= = > <".split(" "),["-","+"],["/","*"],["^"]],i=0;i<n.length;i++){var r=Number.MIN_VALUE,o=n[i][0];if(3==i){r=e.indexOf(n[i][0]);var s=e.indexOf(n[i][1]);-1!=r&&-1!=s?o=r<s?n[i][0]:n[i][1]:-1!=r?o=n[i][0]:-1!=s&&(o=n[i][1])}else for(s=0;s<n[i].length;s++){var a=e.indexOf(n[i][s]);-1!=a&&a>=r&&(r=a+(o=n[i][s]).length)}if(2<(r=e.split(o)).length&&(s=r[r.length-1],r.pop(),r=[r.join(o),s]),2==r.length)return[o.trim(),[this._parseOperands(r[0],t),this._parseOperands(r[1],t)],!0]}return this._parseElements(e,t)},e.prototype._parseElements=function(e,t){if(-1!=(e=e.trim()).indexOf("$")){var n=(i=e.split("$"))[0],i=parseInt(i[1]);if(0<n.length){var r="string"!=typeof t[i][0];return("min"==n||"max"==n)&&1<t[i].length&&(r=!0,"string"==typeof t[i][0]&&(t[i][0]=["sum",[t[i][0]],!1]),"string"==typeof t[i][1]&&(t[i][1]=["sum",[t[i][1]],!1])),[n,t[i],r]}return t[i][0]}return-1!=e.indexOf("@")?(n=parseInt(e.slice(1)),this.quotes[n]):"truestyle"==e.toLowerCase()||"truestyle"==e.substring(1,e.length-1).toLowerCase()?"truestyle":(n=parseFloat(e),isNaN(n)?0:n)},e}();e.Lexer=t}(s||(s={})),function(e){var t=function(){function e(){}return Object.defineProperty(e,"isMac",{get:function(){return/Mac/i.test(navigator.platform)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isWin",{get:function(){return/Win/i.test(navigator.platform)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isIOS",{get:function(){return/(iPhone|iPod|iPad)/i.test(navigator.platform)||/(iPhone|iPod|iPad)/i.test(navigator.userAgent)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isAnd",{get:function(){return/Android/i.test(navigator.userAgent)},enumerable:!0,configurable:!0}),e}();e.OSUtil=t}(s||(s={})),function(e){var t=function(){function t(){}return t.isEmptyObject=function(t){for(var n in t)if(!e.nullOrUndefined(t[n]))return!1;return!0},t.deepCopy=function(e){if(e instanceof Array)return t.deepCopyArray(e);var n,i={};for(n in e)i[n]="object"!=typeof e[n]?e[n]:t.deepCopy(e[n]);return i},t.deepCopyArray=function(e){for(var n=[],i=0;i<e.length;i++)n[i]="object"!=typeof e[i]?e[i]:t.deepCopy(e[i]);return n},t}();e.ObjectUtils=t}(s||(s={})),function(e){var t=function(){function e(){throw Error("Singleton")}return e.dispose=function(){e.queue=[],e.instance=null,e.runningThread=null},e.addTask=function(t,n,i,r){void 0===i&&(i=null),void 0===r&&(r=null),e.queue.push({taskFunction:t,context:n,args:i,completeCallback:r}),null==e.runningThread&&e.run()},e.run=function(){(e.runningThread=new n(e.queue.shift(),(function(){return e.onTaskComplete()}))).run()},e.pause=function(){null!=e.runningThread&&e.runningThread.stop()},e.resume=function(){null!=e.runningThread?e.runningThread.run():0<e.queue.length&&e.run()},e.onTaskComplete=function(){e.runningThread=null,0<e.queue.length&&this.run()},e.cancel=function(){null!=e.runningThread&&(e.runningThread.stop(),e.runningThread=null),e.queue=[]},e.isRunning=function(){return null!=e.runningThread},e.adjustTaskSize=function(e,t){return 10<e-50?t=Math.floor(.95*t):-10>e-50&&(t=Math.floor(1.05*t)),Math.max(5,t)},e.queue=[],e}();e.ThreadManager=t;var n=function(){function t(e,t){void 0===t&&(t=null),this.delay=1,this.isComplete=!1,this.task=e,this.completeCallback=t}return t.prototype.run=function(){var t=this;this.currentTimeout=e.fmSetTimeout((function(){return t.doTask()}),this.delay)},t.prototype.stop=function(){e.fmClearTimeout(this.currentTimeout)},t.prototype.doTask=function(){var t=this;this.isComplete=this.task.taskFunction.call(this.task.context,this.task.args),1==this.isComplete?this.onComplete():this.currentTimeout=e.fmSetTimeout((function(){return t.doTask()}),this.delay)},t.prototype.onComplete=function(){null!=this.completeCallback&&this.completeCallback(),null!=this.task.completeCallback&&this.task.completeCallback()},t.prototype.dispose=function(){this.stop(),this.completeCallback=this.task=null},t}()}(s||(s={})),function(e){function t(){var e=navigator.userAgent.toLowerCase(),t={};if(t.isFirefox=/mozilla/.test(e)&&/firefox/.test(e),t.isChrome=/webkit/.test(e)&&/chrome/.test(e)&&!/edge/.test(e),t.isEdge=/edge/.test(e),t.isSafari=/applewebkit/.test(e)&&/safari/.test(e)&&!/chrome/.test(e),t.isOpera=/opera/.test(e),t.isMsie=/msie/.test(e),t.isMobile=/Android|webOS|iPhone|iPad|iPod|BlackBerry|Windows Phone/i.test(e)||/iPad|iPhone|iPod|BlackBerry/i.test(navigator.platform),t.version=NaN,t.isMsie||t.isFirefox||t.isChrome||t.isSafari||t.isOpera||!/trident/.test(e)||(t.isMsie=!0,t.version=11),isNaN(t.version))for(var n=["chrome","firefox","msie","safari","opera"],i=0;i<n.length;i++)try{t.version=parseInt(e.match(RegExp("("+n[i]+")( |/)([0-9]+)"))[3]);break}catch(r){}return t}e.browserVersion=function(){return t()},e.detectBrowser=t,e.isFullscreen=function(){return null!=document.fullscreenElement||null!=document.mozFullScreenElement||null!=document.webkitFullscreenElement||null!=document.msFullscreenElement},e.isHTML5Supported=function(){try{var e;if(e=void 0!==ArrayBuffer){var t;if(t=void 0!==DataView){var n;if(n=void 0!==Uint8Array){var i;if(window.chrome&&navigator.userAgent.match(/chrome.\d*/gi)){var r=navigator.userAgent.match(/chrome.\d*/gi)[0];i=12<=parseInt(r.replace(/[^\d]/g,""))}else i=!0;n=i&&(!window.opera||15<=window.opera.version())&&(!navigator.userAgent.match("Safari/")||!navigator.userAgent.match("Version/5.")&&!navigator.userAgent.match("Version/6.0"))}t=n}e=t}return e}catch(o){return!1}},e.getCookie=function(e){var t=document.cookie,n=t.indexOf(" "+e+"=");return-1==n&&(n=t.indexOf(e+"=")),-1==n?t=null:(n=t.indexOf("=",n)+1,-1==(e=t.indexOf(";",n))&&(e=t.length),t=decodeURI(t.substring(n,e))),t},e.setCookie=function(e,t){var n=new Date;n.setDate(n.getDate()+1825),t=encodeURI(t)+"; expires="+n.toUTCString(),document.cookie=e+"="+t},e.isLandscapeOrientation=function(){return screen.orientation&&-1<screen.orientation.type.indexOf("landscape")},e.isPortraitOrientation=function(){return screen.orientation&&-1<screen.orientation.type.indexOf("portrait")},e.viewportWidth=function(){return Math.max(document.documentElement.clientWidth)},e.viewportHeight=function(){return Math.max(document.documentElement.clientHeight)}}(s||(s={})),function(e){var n=function(n){function r(e,t){void 0===t&&(t=0);var i=n.call(this)||this;return i._currentCount=0,i._delay=0,i._repeatCount=0,i._running=!1,i._delay=e,i._repeatCount=t,i}return h(r,n),r.prototype.onTimer=function(){this._currentCount++,this.dispatch(new t._Event(i.TIMER)),0<this._repeatCount&&this._currentCount>=this._repeatCount&&(this.stop(),this.dispatch(new t._Event(i.TIMER_COMPLETE)))},r.prototype.start=function(){var t=this;this._running||(this._intervalId=e.fmSetInterval((function(){return t.onTimer()}),this._delay),this._running=!0)},r.prototype.stop=function(){this._running&&!e.nullOrUndefined(this._intervalId)&&(e.fmClearInterval(this._intervalId),this._running=!1)},r.prototype.reset=function(){this._currentCount=0,this.stop()},Object.defineProperty(r.prototype,"currentCount",{get:function(){return this._currentCount},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"running",{get:function(){return this._running},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"repeatCount",{get:function(){return this._repeatCount},set:function(e){this._repeatCount=e,this._currentCount>=this._repeatCount&&this.stop()},enumerable:!0,configurable:!0}),r}(t.EventDispatcher);e.Timer=n;var i=function(){function e(){}return e.TIMER="timer",e.TIMER_COMPLETE="complete",e}();e.TimerEvent=i,e.getTimer=function(){return"undefined"!=typeof performance&&"function"==typeof window.performance.now?performance.now():(new Date).getTime()}}(s||(s={})),function(e){var n=function(t){function n(r){var o=t.call(this)||this;if(o._isFocused=!1,o._keydownHandler=function(e){return o.onKeyDown(e)},o.inputKeyUpHandler=function(e){return o.onInputKeyUp(e)},null!=n._instance)throw Error("KeyboardListener is singleton");return o.target=r,e.browserVersion().isMobile||(e.fmdocument.addEventListener("keydown",o._keydownHandler),o._inputContainer=new i.UIElement("div"),o._inputContainer.attr("id","pivot-hiddenInputContainer"),o._inputContainer.css("position","fixed").css("left","0px").css("top","0px").css("opacity","0").css("width","0px").css("height","0px"),o._inputContainer.hide(),o._input=new i.UITextArea,o._input.setId("pivot-hiddenInput"),o._input.container.css("width","1px").css("height","1px").css("padding","0px"),o._input.addEventListener("focusin",(function(){o._isFocused=!0})),o._input.addEventListener("focusout",(function(){o._isFocused=!1})),o._inputContainer.append(o._input.container),r.append(o._inputContainer)),o}return h(n,t),n.getInstance=function(){return null==n._instance&&(n._instance=new n(r._view.PivotView.stage.container)),n._instance},Object.defineProperty(n.prototype,"isFocused",{get:function(){return this._isFocused},enumerable:!0,configurable:!0}),n.prototype.onKeyDown=function(e){var t=new o(o.KEY_DOWN);t.keyCode=e.keyCode,t.altKey=e.altKey,t.ctrlKey=e.ctrlKey,t.metaKey=e.metaKey,t.shiftKey=e.shiftKey,this.dispatch(t)},n.prototype.onInputKeyUp=function(e){this._inputContainer.hide(),this._input.setText(""),this._input.container.blur(),this._input.removeEventListener("keyup",this.inputKeyUpHandler)},n.prototype.copy=function(e){this._inputContainer.show(),this._input.setText(e),this._input.container.focus(),this._input.selectAll(),this._input.container.focus(),this._input.addEventListener("keyup",this.inputKeyUpHandler)},n}(t.EventDispatcher);e.KeyboardListener=n;var o=function(e){function t(t){return e.call(this,t)||this}return h(t,e),t.KEY_DOWN="event_keydown",t}(t._Event);e.KeyboardEvent=o}(s||(s={})),function(e){e.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(null!=console&&null!=console.log)for(t=s.browserVersion().isFirefox&&s.browserVersion().isMobile?0:1;t<e.length;t++);},e.stackTrace=function(){var e=Error();return e&&e.stack?e.stack.substr(77):""}}(r||(r={})),function(e){e.uialert=function(n,i,r,o,s,a){void 0===i&&(i=""),void 0===r&&(r=t.ALERT),void 0===o&&(o=null),void 0===s&&(s=null),void 0===a&&(a=!1),e._view.AlertView.getInstance().openView(n,i,r,o,s,a)};var t=function(){function e(){}return e.ALERT="alert",e.CONFIRMATION="confirmation",e.ERROR="error",e.INFO="info",e}();e.AlertType=t}(r||(r={})),function(e){e.preloader=function(t,n,i,r,o){void 0===t&&(t=!0),e._view.Preloader.getInstance().show(t,n,i,r,o)}}(r||(r={})),function(e){var n,i;n=e.model||(e.model={}),i=function(t){function i(){var r=t.call(this)||this;if(null!=i.instance)throw Error("Singleton");return r.cube_=e.data_.Cube.getInstance(),r.state_=new n._state.StateManager,r}return h(i,t),i.getInstance=function(){return null==this.instance&&(this.instance=new i),this.instance},i.prototype.init=function(t){i.id=t.id?t.id:"",n.JavaScriptHandlers.setHandlers(t),n._labels.LabelsManager.getInstance().reset(),e._view.grid.vo.GridCell.customizeCellFunction=t.customizeCell,this.state_.init(t)},i.prototype.open=function(){this.state_.open()},i.prototype.load=function(e){this.state_.load(e)},i.prototype.save=function(e,t,n,i,r){return void 0===t&&(t=null),void 0===r&&(r=!1),this.state_.save(e,t,n,i,r)},i.prototype.setReport=function(e){this.state_.setReport(e)},i.prototype.getReport=function(e){return void 0===e&&(e={}),this.state_.getReport(e)},i.prototype.clear=function(){this.state_.clear()},i.prototype.checkDataObject=function(e){var t={};return s.nullOrUndefined(e.dataSourceType)||(t.dataSourceType=e.dataSourceType),s.nullOrUndefined(e.filename)||(t.filename=e.filename),s.nullOrUndefined(e.requestHeader)||(t.requestHeader=e.requestHeader),s.nullOrUndefined(e.fieldSeparator)||(t.fieldSeparator=e.fieldSeparator),s.nullOrUndefined(e.recordsetDelimiter)||(t.recordsetDelimiter=e.recordsetDelimiter),s.nullOrUndefined(e.browseForFile)||(t.browseForFile=e.browseForFile),s.nullOrUndefined(e.data)||(t.data=e.data),s.nullOrUndefined(e.ignoreQuotedLineBreaks)||(t.ignoreQuotedLineBreaks=e.ignoreQuotedLineBreaks),s.nullOrUndefined(e.hash)||(t.hash=e.hash),s.nullOrUndefined(e.username)||(t.username=e.username),s.nullOrUndefined(e.password)||(t.password=e.password),t},i.prototype.connectTo=function(e){this.state_.connectTo(this.checkDataObject(e))},i.prototype.updateData=function(e,t){t.partial?this.state_.updateDataPartial(e.data,t):this.state_.updateData(this.checkDataObject(e),t)},i.prototype.getData=function(t,i,r){if(null!=r&&e.Pivot.instance.on("update",(function(){e.Pivot.instance.getData(t,r)})),null!=t&&null!=t.slice){var o=t.slice instanceof e.data_._structure.Slice?t.slice:e.data_._structure.Slice.fromObject(n.report.SliceValueObject.fromObject(t.slice),this.cube_.structure_);n.integration.IntegrationDataManager.getInstance().selectData(o,i)}else i((o=n.integration.IntegrationDataManager.getInstance().getData()).toObject())},i.prototype.getAllConditions=function(){return n.condition.ConditionManager.getObjects()},i.prototype.getCondition=function(e){return(e=n.condition.ConditionManager.get(e))?e.toObject():null},i.prototype.addCondition=function(e){n.condition.ConditionManager.add(n.condition.vo.ConditionValueObject.fromObject(e))},i.prototype.removeCondition=function(e){n.condition.ConditionManager.remove(e)},i.prototype.removeAllConditions=function(){n.condition.ConditionManager.removeAll()},i.prototype.addCalculatedMeasure=function(e){this.cube_.addCalculatedMeasure(e)},i.prototype.removeCalculatedMeasure=function(e){this.cube_.removeCalculatedMeasure(e)},i.prototype.removeAllCalculatedMeasures=function(){this.cube_.removeAllCalculatedMeasures()},i.prototype.expandAllData=function(t){void 0===t&&(t=!0),this.cube_.slice_.expandAll=!0,this.cube_.slice_.drillAll=t,this.cube_.slice_.clearExpands(),this.cube_.slice_.clearDrills(),e.data_.dataprovider_.DataProviderFactory.dispose(),this.refresh()},i.prototype.expandData=function(e){this.dataProvider_.expandData(e)},i.prototype.collapseAllData=function(){this.cube_.slice_.expandAll=!1,this.cube_.slice_.drillAll=!1,this.cube_.slice_.columnAxis.expandedTuples=[],this.cube_.slice_.columnAxis.drilledTuples=[],this.cube_.slice_.rowAxis.expandedTuples=[],this.cube_.slice_.rowAxis.drilledTuples=[],e.data_.dataprovider_.DataProviderFactory.dispose(),this.refresh()},i.prototype.collapseData=function(e){this.dataProvider_.collapseData(e)},i.prototype.setOptions=function(e){null!=e.localSettingsUrl&&delete e.localSettingsUrl,null!=e.zoom&&delete e.zoom,n._options.OptionsManager.setOptions(e,!1)},i.prototype.print=function(e){n.printing.PrintingManager.getInstance().print(e)},i.prototype.exportTo=function(e,t,i){void 0===t&&(t=null),void 0===i&&(i=null),n._export.ExportManager.exportTo(e,t,i)},i.prototype.getFilter=function(e){if(null==this.cube_||null==this.cube_.structure_)return[];var t=[];if((e=this.cube_.structure_.allHierarchies(!1).getItem(e))&&e.hasFilter())for(var n=e.filter,i=0;i<n.length;i++){var r=n.getItemAt(i);t.push({caption:r.caption,uniqueName:r.uniqueName,hierarchyName:e.uniqueName,parentMember:r.parent.uniqueName})}return t},i.prototype.getFilterProperties=function(t){if(null==this.cube_||null==this.cube_.structure_)return[];var n={};if(n.type=e.data_.consts.FilterType.NONE,n.members=[],(t=this.cube_.structure_.allHierarchies(!1).getItem(t))&&t.hasFilter()){if(t.hasMembersFilter()){n.type="members";for(var i=t.filterMembers,r=0;r<i.length;r++){var o=i.getItemAt(r);n.members.push({caption:o.caption,uniqueName:o.uniqueName,hierarchyName:t.uniqueName,parentMember:o.parent.uniqueName})}}t.hasValuesFilter()&&(n.type=t.filterType,n.quantity=t.filterQuantity,n.measure=t.filterMeasureName,n.measureName=t.filterMeasureName)}return n},i.prototype.setFilter=function(t,i,r){if(void 0===r&&(r=!1),t=this.cube_.structure_.allHierarchies(!1).getItem(t)){var o={};o.members=i,o.negation=r,e.data_._structure.GenericHierarchy.filterFromObject(o,t),n.JavaScriptHandlers.getInstance().dispatch(new n.APIEvent(n.JavaScriptHandlers.REPORT_CHANGE)),this.cube_.filter()}},i.prototype.clearFilter=function(e){(e=this.cube_.structure_.allHierarchies(!1).getItem(e))&&(e.clearFilter(),this.cube_.select())},i.prototype.getRows=function(){if(null==this.cube_||null==this.cube_.slice_)return[];for(var e=this.cube_.slice_.rows,t=[],n=0;n<e.length;n++){var i=e.getItemAt(n);t.push({caption:i.caption,uniqueName:i.uniqueName,sort:i.sortName,folder:i.folder})}return t},i.prototype.getColumns=function(){if(null==this.cube_||null==this.cube_.slice_)return[];for(var e=this.cube_.slice_.columns,t=[],n=0;n<e.length;n++){var i=e.getItemAt(n);t.push({caption:i.caption,uniqueName:i.uniqueName,sort:i.sortName,folder:i.folder})}return t},i.prototype.getPages=function(){if(null==this.cube_||null==this.cube_.slice_)return[];for(var e=this.cube_.slice_.pages,t=[],n=0;n<e.length;n++){var i=e.getItemAt(n);t.push({caption:i.caption,uniqueName:i.uniqueName,sort:i.sortName,folder:i.folder})}return t},i.prototype.getMeasures=function(){if(null==this.cube_||null==this.cube_.slice_)return[];var t,i,r,o=[];if(n._options.OptionsManager.flatView){var s=this.cube_.slice_.flatten();for(t=0;t<s.length;t++)i=s.getItemAt(t),(i=this.cube_.structure_.hierarchyToMeasure(i.uniqueName))&&((r=e.data_._structure.GenericMeasure.toObject(i)).availableAggregations=[],r.availableAggregationsCaptions=[],r.caption=r.grandTotalCaption=i.originalCaption,o.push(r))}else for(s=this.cube_.slice_.measures_,t=0;t<s.length;t++){i=s.getItemAt(t),r=e.data_._structure.GenericMeasure.toObject(i);var a=i.availableAggregations;0!=i.availableAggregations.length||i.calculated||(a=e.data_.consts.AggregationName.ALL_AGGREGATIONS),r.availableAggregations=a,r.availableAggregationsCaptions=e.data_.consts.AggregationName.aggregationCaptions(a),o.push(r)}return o},i.prototype.getAllMeasures=function(){if(null==this.cube_||null==this.cube_.structure_)return[];for(var t=this.cube_.structure_.measures_,i=[],r=0;r<t.length;r++){var o=t.getItemAt(r),s=e.data_._structure.GenericMeasure.toObject(o);if(n._options.OptionsManager.flatView)s.availableAggregations=[],s.availableAggregationsCaptions=[],s.caption=s.grandTotalCaption=o.originalCaption;else{var a=o.availableAggregations;0!=o.availableAggregations.length||o.calculated||(a=e.data_.consts.AggregationName.ALL_AGGREGATIONS),s.availableAggregations=a,s.availableAggregationsCaptions=e.data_.consts.AggregationName.aggregationCaptions(a)}i.push(s)}return i},i.prototype.replaceHierarchyCaption=function(e){this.cube_.structure_.allHierarchies(!1).getItem(e.name).label=e.caption},i.prototype.getAllHierarchies=function(){if(null==this.cube_||null==this.cube_.structure_)return[];for(var e=this.cube_.structure_.allHierarchies(!1),t=[],n=0;n<e.length;n++){var i=e.getItemAt(n);t.push({caption:i.caption,uniqueName:i.uniqueName,folder:i.folder})}return t},i.prototype.sortValues=function(e,t,n,i){null!=(e=this.cube_.slice_.axes.getItem(e))&&((i=this.cube_.structure_.measures_.getItem(i))&&(e.sortType=t,e.sortTuple=n,e.sortMeasure=i),this.cube_.sort())},i.prototype.setSort=function(t,i){var r=this.cube_.structure_.allHierarchies(!1).getItem(t);if(r){var o=this.cube_.slice_.axes.getItem(e.data_.consts.AxisName.COLUMNS_AXIS),s=this.cube_.slice_.axes.getItem(e.data_.consts.AxisName.ROWS_AXIS);-1!=o.hierarchies.indexOf(r.uniqueName)?this.cube_.clearSortValues(s):-1!=s.hierarchies.indexOf(r.uniqueName)&&this.cube_.clearSortValues(o),r.sortName=i,n._options.OptionsManager.flatView&&(this.dataProvider_.columnSortType=i,this.dataProvider_.columnSortTuple=this.dataProvider_.getColumnTupleByName(r.uniqueName),this.dataProvider_.columnSortMeasure=this.cube_.structure_.hierarchyToMeasure(r.uniqueName))}this.cube_.select()},i.prototype.getSort=function(e){return null==this.cube_||null==this.cube_.structure_?"":null!=(e=this.cube_.structure_.allHierarchies(!1).getItem(e))?e.sortName:""},i.prototype.setTopX=function(t,i,r){t=this.cube_.structure_.allHierarchies(!1).getItem(t);var o=n._options.OptionsManager.flatView?this.cube_.structure_.measures_.getItem(r):this.cube_.slice_.measures_.getItem(r);t&&o&&!t.isMeasures&&(t.filterType=e.data_.consts.FilterType.TOP,t.filterQuantity=i,t.filterMeasureName=r,t.sortName=e.data_.consts.SortType.UNSORTED,i=this.cube_.slice_.findAxis(e.data_.consts.AxisName.ROWS_AXIS),r=this.cube_.slice_.findAxis(e.data_.consts.AxisName.COLUMNS_AXIS),-1!=i.hierarchies.indexOf(t.uniqueName)&&(r.sortTuple=[],r.sortType=e.data_.consts.SortType.DESC,r.sortMeasure=this.cube_.slice_.measures_.getItem(t.filterMeasureName)),-1!=r.hierarchies.indexOf(t.uniqueName)&&(i.sortTuple=[],i.sortType=e.data_.consts.SortType.DESC,i.sortMeasure=this.cube_.slice_.measures_.getItem(t.filterMeasureName))),this.cube_.filter()},i.prototype.setBottomX=function(t,i,r){t=this.cube_.structure_.allHierarchies(!1).getItem(t);var o=n._options.OptionsManager.flatView?this.cube_.structure_.measures_.getItem(r):this.cube_.slice_.measures_.getItem(r);t&&o&&!t.isMeasures&&(t.filterType=e.data_.consts.FilterType.BOTTOM,t.filterQuantity=i,t.filterMeasureName=r,t.sortName=e.data_.consts.SortType.UNSORTED,i=this.cube_.slice_.findAxis(e.data_.consts.AxisName.ROWS_AXIS),r=this.cube_.slice_.findAxis(e.data_.consts.AxisName.COLUMNS_AXIS),-1!=i.hierarchies.indexOf(t.uniqueName)&&(r.sortTuple=[],r.sortType=e.data_.consts.SortType.ASC,r.sortMeasure=this.cube_.slice_.measures_.getItem(t.filterMeasureName)),-1!=r.hierarchies.indexOf(t.uniqueName)&&(i.sortTuple=[],i.sortType=e.data_.consts.SortType.ASC,i.sortMeasure=this.cube_.slice_.measures_.getItem(t.filterMeasureName))),this.cube_.filter()},i.prototype.getMembers=function(e,t,n){return null==this.cube_||null==this.cube_.structure_?[]:(t=[],(e=this.cube_.structure_.allHierarchies(!1).getItem(e))&&(t=this.getAllChildren(e.allMember),null!=n&&n(t)),t)},i.prototype.getChildrenByMember=function(e,t){for(var n=""==t?e.allMember.children:e.findMember(t).children,i=[],r=0;r<n.length;r++){var o=n.getItemAt(r);o.uniqueName!=e.allMemberName&&i.push({caption:o.caption,uniqueName:o.uniqueName,hierarchyName:e.uniqueName,parentMember:o.parent.isAll?"(All)":o.parent.uniqueName,isLeaf:o.level.num==o.hierarchy_.levels_.length-1})}return i},i.prototype.getAllChildren=function(e){e=e.hierarchy_.sortChildren(e,!1);for(var t=[],i=0;i<e.length;i++){var r=e.getItemAt(i),o=r.level.num==r.hierarchy_.levels_.length-1,s=[];1==r.children.length&&r.children.getItemAt(0).caption==n._labels.Labels.MEMBER_BLANK||(s=this.getAllChildren(r)),t.push({caption:r.caption,uniqueName:r.uniqueName,hierarchyName:r.hierarchy_.uniqueName,children:s,parentMember:r.parent.isAll?"(All)":r.parent.uniqueName,isLeaf:o})}return t},i.prototype.runQuery=function(e){this.state_.runQuery(e)},i.prototype.getOptions=function(){return n._options.OptionsManager.getOptions(!0,!0).toObject()},i.prototype.getFormat=function(e){return((e=this.cube_&&this.cube_.structure_?this.cube_.structure_.findMeasure(e):null)?e.getFormat():n.format.FormatManager.getFormat("")).toObject(!0)},i.prototype.setFormat=function(t,i){t.hasOwnProperty("name")||(t.name=s.StringUtils.generateID());try{n.format.FormatManager.setFormat(t)}catch(a){return void e.uialert("Can't add format. Component's configuration requires more parameters.")}try{var r=this.cube_.structure_.findMeasure(i);if(r&&(r.format=t.name),""!=t.name&&(""==i||null==i))for(var o=0;o<this.cube_.structure_.measures_.length;o++)(r=this.cube_.structure_.measures_.getItemAt(o)).format=t.name}catch(l){e.uialert("List of measures is empty. There is nothing to format.")}},i.prototype.refresh=function(){this.cube_.filter()},i.prototype.dispose=function(){e.data_.dataprovider_.DataProviderFactory.dispose(),this.cube_&&this.cube_.dispose(),this.state_&&this.state_.dispose(),this.dataProvider_=this.state_=this.cube_=null,i.instance=null},i.id="WebDataRocks",i}(t.EventDispatcher),n.PivotModel=i}(r||(r={})),function(e){!function(e){var n=function(e,t){void 0===t&&(t=null),this.type=e,this.data=t};e.APIEvent=n,n=function(e){function t(){var n=e.call(this)||this;if(null!=t.instance)throw Error("Singleton");return n}return h(t,e),t.getInstance=function(){return null==t.instance&&(t.instance=new t),t.instance},t.dispose=function(){t.instance=null},t.toTypes=function(e){return t.isValidType(e)?e:""},t.isValidType=function(e){return-1<t.types.indexOf(e)},t.prototype.addEventListener=function(n,i,r){void 0===r&&(r=0),n=t.toTypes(n),t.isValidType(n)&&e.prototype.addEventListener.call(this,n,i,r)},t.prototype.removeEventListener=function(n,i){n=t.toTypes(n),t.isValidType(n)&&e.prototype.removeEventListener.call(this,n,i)},t.setHandlers=function(e){t.setHandler(t.READY,e[t.READY]),t.setHandler(t.OPENING_REPORT_FILE,e[t.OPENING_REPORT_FILE]),t.setHandler(t.LOADING_REPORT_FILE,e[t.LOADING_REPORT_FILE]),t.setHandler(t.REPORT_FILE_LOADED,e[t.REPORT_FILE_LOADED]),t.setHandler(t.REPORT_FILE_ERROR,e[t.REPORT_FILE_ERROR]),t.setHandler(t.REPORT_FILE_CANCELLED,e[t.REPORT_FILE_CANCELLED]),t.setHandler(t.REPORT_CHANGE,e[t.REPORT_CHANGE]),t.setHandler(t.LOADING_DATA,e[t.LOADING_DATA]),t.setHandler(t.DATA_LOADED,e[t.DATA_LOADED]),t.setHandler(t.DATA_ERROR,e[t.DATA_ERROR]),t.setHandler(t.DATA_FILE_CANCELLED,e[t.DATA_FILE_CANCELLED]),t.setHandler(t.DATA_CHANGED,e[t.DATA_CHANGED]),t.setHandler(t.RUNNING_QUERY,e[t.RUNNING_QUERY]),t.setHandler(t.QUERY_COMPLETE,e[t.QUERY_COMPLETE]),t.setHandler(t.QUERY_ERROR,e[t.QUERY_ERROR]),t.setHandler(t.LOADING_LOCALIZATION,e[t.LOADING_LOCALIZATION]),t.setHandler(t.LOCALIZATION_LOADED,e[t.LOCALIZATION_LOADED]),t.setHandler(t.LOCALIZATION_ERROR,e[t.LOCALIZATION_ERROR]),t.setHandler(t.REPORT_COMPLETE,e[t.REPORT_COMPLETE]),t.setHandler(t.PRINT_START,e[t.PRINT_START]),t.setHandler(t.PRINT_COMPLETE,e[t.PRINT_COMPLETE]),t.setHandler(t.EXPORT_START,e[t.EXPORT_START]),t.setHandler(t.EXPORT_COMPLETE,e[t.EXPORT_COMPLETE]),t.setHandler(t.UPDATE,e[t.UPDATE]),t.setHandler(t.BEFORE_GRID_DRAW,e[t.BEFORE_GRID_DRAW]),t.setHandler(t.AFTER_GRID_DRAW,e[t.AFTER_GRID_DRAW]),t.setHandler(t.CELL_CLICK,e[t.CELL_CLICK]),t.setHandler(t.CELL_DOUBLE_CLICK,e[t.CELL_DOUBLE_CLICK]),t.setHandler(t.FILTER_OPEN,e[t.FILTER_OPEN]),t.setHandler(t.FILDS_LIST_OPEN,e[t.FILDS_LIST_OPEN]),t.setHandler(t.FILDS_LIST_CLOSE,e[t.FILDS_LIST_CLOSE]),t.setHandler(t.BEFORE_TOOLBAR_CREATED,e[t.BEFORE_TOOLBAR_CREATED])},t.setHandler=function(e,n){if(n){"string"==typeof n&&(n=t.getFunctionByName(n));var i=n;e!=t.BEFORE_TOOLBAR_CREATED&&e!=t.BEFORE_GRID_DRAW&&e!=t.AFTER_GRID_DRAW&&(i=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];s.fmSetTimeout((function(){n.apply(null,e)}),1)}),t.getInstance().addEventListener(e,i)}},t.getFunctionByName=function(e,t){void 0===t&&(t=window);for(var n=e.split("."),i=n.pop(),r=0;r<n.length;r++){if(null==t)return null;t=t[n[r]]}return t[i]},t.OPENING_REPORT_FILE="openingreportfile",t.LOADING_REPORT_FILE="loadingreportfile",t.REPORT_FILE_LOADED="reportfileloaded",t.REPORT_FILE_ERROR="reportfileerror",t.REPORT_FILE_CANCELLED="reportfilecancelled",t.LOADING_DATA="loadingdata",t.DATA_LOADED="dataloaded",t.DATA_ERROR="dataerror",t.DATA_FILE_CANCELLED="datafilecancelled",t.DATA_CHANGED="datachanged",t.RUNNING_QUERY="runningquery",t.QUERY_COMPLETE="querycomplete",t.QUERY_ERROR="queryerror",t.LOADING_LOCALIZATION="loadinglocalization",t.LOCALIZATION_LOADED="localizationloaded",t.LOCALIZATION_ERROR="localizationerror",t.REPORT_COMPLETE="reportcomplete",t.REPORT_CHANGE="reportchange",t.EXPORT_START="exportstart",t.EXPORT_COMPLETE="exportcomplete",t.PRINT_START="printstart",t.PRINT_COMPLETE="printcomplete",t.types=[t.READY="ready",t.OPENING_REPORT_FILE,t.LOADING_REPORT_FILE,t.REPORT_FILE_LOADED,t.REPORT_FILE_ERROR,t.REPORT_FILE_CANCELLED,t.LOADING_DATA,t.DATA_LOADED,t.DATA_ERROR,t.DATA_FILE_CANCELLED,t.DATA_CHANGED,t.RUNNING_QUERY,t.QUERY_COMPLETE,t.QUERY_ERROR,t.LOADING_LOCALIZATION,t.LOCALIZATION_LOADED,t.LOCALIZATION_ERROR,t.REPORT_COMPLETE,t.REPORT_CHANGE,t.PRINT_START,t.PRINT_COMPLETE,t.EXPORT_START,t.EXPORT_COMPLETE,t.UPDATE="update",t.BEFORE_GRID_DRAW="beforegriddraw",t.AFTER_GRID_DRAW="aftergriddraw",t.CELL_CLICK="cellclick",t.CELL_DOUBLE_CLICK="celldoubleclick",t.FILTER_OPEN="filteropen",t.FILDS_LIST_OPEN="fieldslistopen",t.FILDS_LIST_CLOSE="fieldslistclose",t.BEFORE_TOOLBAR_CREATED="beforetoolbarcreated"],t}(t.EventDispatcher),e.JavaScriptHandlers=n}(e.model||(e.model={}))}(r||(r={})),function(e){!function(e){var t=function(){function e(){}return e.valid=function(e){return null==e||-1==(e=e.toLowerCase()).indexOf("<script")&&-1==e.indexOf("javascript:")&&-1==e.indexOf("<iframe")&&-1==e.indexOf("<object")&&-1==e.indexOf("expression(")&&-1==e.indexOf("onmouseover")&&-1==e.indexOf("onerror")},e.validate=function(e,t){return void 0===t&&(t=!1),s.StringUtils.escapeHtml(e,t)},e}();e.XSSCheck=t}(e.model||(e.model={}))}(r||(r={})),function(e){var t,n,i;t=e.model||(e.model={}),n=t.integration||(t.integration={}),i=function(){function i(){}return i.getInstance=function(){return null==i.instance&&(i.instance=new i),i.instance},i.dispose=function(){i.instance=null},i.prototype.getData=function(){var t=e.data_.dataprovider_.DataProviderFactory.getDataProvider();return this.composeData(t)},i.prototype.selectData=function(t,n){var i=e.data_.Cube.getInstance(),r=e.data_.LocalDataStorage.clone(i.localDataStorage);r.slice_=t,r.filter(),r.select(),(i=new e.data_.dataprovider_.ChartDataProvider).reset(),i.dataStorage=r,i.slice=t,i.load(),n((r=this.composeData(i)).toObject()),i.reset()},i.prototype.composeData=function(e){var i=new n.OutputDataValueObject;if(null==e.slice)return i;i.slice=e.slice.toObject(),i.meta={vAmount:e.slice.measures_.length,formats:[]};var r=0,o=0;if(e.dataLoaded&&!e.isEmpty){var s,a;s="on"==t._options.OptionsManager.showGrandTotals||"rows"==t._options.OptionsManager.showGrandTotals?e.dataWidth-1:e.dataWidth,a="on"==t._options.OptionsManager.showGrandTotals||"columns"==t._options.OptionsManager.showGrandTotals?e.dataHeight-1:e.dataHeight;var l,u,c,h=NaN,d="";d="",i.data=[],l=[],u=[],c={};for(var A=0;A<e.measures.length;A++){h=e.measures.getItemAt(A),i.meta["v"+A+"Name"]=h.caption;var p=t.PivotModel.getInstance().getFormat(h.uniqueName);i.meta.formats.push(p),h=e.getValue(l,u,h),c["v"+A]=h}for(i.data.push(c),p=0;p<a;p++){for(c={},l=e.getRowTuple(p),r=Math.max(r,l.length),u=[],A=e.rowsOnly,h=0;h<l.length;h++){var f=h,g=(d=A.getItemAt(f)).members.getItemAt(g=l[h]);i.meta["r"+f+"Name"]=d.caption,d=this.getDataFromMember(g),c["r"+f]=d}for(A=0;A<e.measures.length;A++)h=e.measures.getItemAt(A),h=e.getValue(l,u,h),c["v"+A]=h;i.data.push(c)}for(var m=0;m<s;m++){for(c={},l=[],u=e.getColumnTuple(m),o=Math.max(o,u.length),A=e.columnsOnly,h=0;h<u.length;h++)g=(d=A.getItemAt(f=h)).members.getItemAt(g=u[h]),i.meta["c"+f+"Name"]=d.caption,d=this.getDataFromMember(g),c["c"+f]=d;for(A=0;A<e.measures.length;A++)h=e.measures.getItemAt(A),h=e.getValue(l,u,h),c["v"+A]=h;i.data.push(c)}for(p=0;p<a;p++)for(l=e.getRowTuple(p),r=Math.max(r,l.length),m=0;m<s;m++){for(u=e.getColumnTuple(m),o=Math.max(o,u.length),c={},A=e.rowsOnly,h=0;h<l.length;h++)g=(d=A.getItemAt(f=h)).members.getItemAt(g=l[h]),d=this.getDataFromMember(g),c["r"+f]=d;for(A=e.columnsOnly,h=0;h<u.length;h++)g=(d=A.getItemAt(f=h)).members.getItemAt(g=u[h]),d=this.getDataFromMember(g),c["c"+f]=d;for(A=0;A<e.measures.length;A++)h=e.measures.getItemAt(A),h=e.getValue(l,u,h),c["v"+A]=h;i.data.push(c)}}return i.meta.rAmount=r,i.meta.cAmount=o,i},i.prototype.getDataFromMember=function(t){return t.level.type==e.data_.types.LevelType.NUMBER||t.level.type==e.data_.types.LevelType.TIME?t.levelOrdinal:t.level.type==e.data_.types.LevelType.TIME_DATE?Date.parse(t.caption):t.level.type==e.data_.types.LevelType.DAY?isNaN(parseFloat(t.caption))?t.caption:parseFloat(t.caption):t.caption},i}(),n.IntegrationDataManager=i}(r||(r={})),function(e){!function(e){!function(e){var t=function(){function e(){this.slice={},this.meta={},this.data=[]}return e.prototype.toObject=function(){var e,t={};for(e in this)"slice"!=e&&"function"!=typeof this[e]&&(t[e]=this[e]);return t},e}();e.OutputDataValueObject=t}(e.integration||(e.integration={}))}(e.model||(e.model={}))}(r||(r={})),function(e){!function(e){!function(e){var t=function(){function e(){}return e.DEFAULT_EXPORT_TITLE="WebDataRocks Reporting Tool",e}();e.Labels=t}(e._labels||(e._labels={}))}(e.model||(e.model={}))}(r||(r={})),function(e){!function(e){!function(e){var t=function(){function t(){}return t.prototype.load=function(e,t,n){var i=this;this.successHandler=t,this.errorHandler=n,this.xhr=new XMLHttpRequest,this.xhr.open("GET",e,!0),this.xhr.onerror=function(e){return i.onError(e)},this.xhr.onreadystatechange=function(e){return i.onReadyStateChange(e)},this.xhr.send()},t.prototype.onReadyStateChange=function(e){null!=this.xhr&&4===this.xhr.readyState&&(200===this.xhr.status?this.success():this.errorHandler())},t.prototype.success=function(){this.xhr.response&&null==this.xhr.response.error?null!=this.successHandler&&this.onLoaded(this.xhr.response):this.errorHandler&&this.errorHandler()},t.prototype.onError=function(e){null!=this.errorHandler&&this.errorHandler()},t.prototype.onLoaded=function(t){try{var n=JSON.parse(t);this.successHandler(e.LabelsValueObject.fromObject(n))}catch(i){console.error(i),this.errorHandler()}},t}();e.LabelsLoader=t}(e._labels||(e._labels={}))}(e.model||(e.model={}))}(r||(r={})),function(e){!function(e){!function(e){var t=function(){function t(){if(null!=t.instance)throw Error("Singleton");this.defaults=new e.LabelsValueObject,this.defaults.setDefaults()}return t.getInstance=function(){return null==t.instance&&(t.instance=new t),t.instance},t.dispose=function(){e.Labels.MONTHS_LABELS=null,e.Labels.MONTHS_LABELS_SHORT=null,e.Labels.WEEKDAYS_LABELS=null,e.Labels.WEEKDAYS_LABELS_SHORT=null,e.Labels.QUARTER_LABELS=null,t.instance.defaults=null,t.instance.globals=null,t.instance.reports=null,t.instance=null},t.prototype.getReportLocalization=function(){return this.reports},t.prototype.setReportLocalization=function(e){this.reports!=e&&(this.reports=e,this.updateLabels())},t.prototype.updateLabels=function(){e.Labels.FIELDS_LIST_FLAT_HIERARCHY_BOX=this.getLabel("fieldsList/flatHierarchyBox"),e.Labels.FIELDS_LIST_HIERARCHY_BOX=this.getLabel("fieldsList/hierarchyBox"),e.Labels.FIELDS_LIST_FILTER_BOX=this.getLabel("fieldsList/filterBox"),e.Labels.FIELDS_LIST_ROW_BOX=this.getLabel("fieldsList/rowBox"),e.Labels.FIELDS_LIST_COLUMN_BOX=this.getLabel("fieldsList/columnBox"),e.Labels.FIELDS_LIST_MEASURE_BOX=this.getLabel("fieldsList/measureBox"),e.Labels.FIELDS_LIST_VALUES=this.getLabel("fieldsList/values"),e.Labels.FIELDS_LIST_ADD_CALCULATED_MEASURE=this.getLabel("fieldsList/addCalculatedMeasure"),e.Labels.FIELDS_LIST_EXPAND_ALL=this.getLabel("fieldsList/expandAll"),e.Labels.FIELDS_LIST_COLLAPSE_ALL=this.getLabel("fieldsList/collapseAll"),e.Labels.FIELDS_LIST_FORMULAS_GROUP_NAME=this.getLabel("fieldsList/formulasGroupName"),e.Labels.FIELDS_LIST_ALL_FIELDS=this.getLabel("fieldsList/allFields"),e.Labels.FIELDS_LIST_ROWS=this.getLabel("fieldsList/rows"),e.Labels.FIELDS_LIST_COLUMNS=this.getLabel("fieldsList/columns"),e.Labels.FIELDS_LIST_FILTERS=this.getLabel("fieldsList/filters"),e.Labels.FIELDS_LIST_DROP_FIELD=this.getLabel("fieldsList/dropField"),e.Labels.FIELDS_LIST_TITLE=this.getLabel("fieldsList/title"),e.Labels.FIELDS_LIST_SUBTITLE=this.getLabel("fieldsList/subtitle"),e.Labels.FILTER_ALL=this.getLabel("filter/all"),e.Labels.FILTER_MULTIPLE_ITEMS=this.getLabel("filter/multipleItems"),e.Labels.FILTER_SELECT_ALL=this.getLabel("filter/selectAll"),e.Labels.FILTER_SELECT_ALL_RESULTS=this.getLabel("filter/selectAllResults"),e.Labels.FILTER_TOP=this.getLabel("filter/top"),e.Labels.FILTER_BOTTOM=this.getLabel("filter/bottom"),e.Labels.FILTER_ASC_SORT=this.getLabel("filter/ascSort"),e.Labels.FILTER_DESC_SORT=this.getLabel("filter/descSort"),e.Labels.FILTER_TOP_X=this.getLabel("filter/topX"),e.Labels.FILTER_TOP_X_CLEAR=this.getLabel("filter/clearTopX"),e.Labels.FILTER_SEARCH=this.getLabel("filter/search"),e.Labels.FILTER_AMOUNT_SELECTED=this.getLabel("filter/amountSelected"),e.Labels.FILTER_AMOUNT_FOUND=this.getLabel("filter/amountFound"),e.Labels.FILTER_SORT=this.getLabel("filter/sort"),e.Labels.DRILL_THROUGH_TITLE=this.getLabel("drillThrough/title"),e.Labels.DRILL_THROUGH_ROW=this.getLabel("drillThrough/row"),e.Labels.DRILL_THROUGH_COLUMN=this.getLabel("drillThrough/column"),e.Labels.DRILL_THROUGH_VALUE=this.getLabel("drillThrough/value"),e.Labels.CALCULATED_VIEW_TITLE=this.getLabel("calculatedView/title"),e.Labels.CALCULATED_VIEW_MEASURE_BOX=this.getLabel("calculatedView/measureBox"),e.Labels.CALCULATED_VIEW_MEASURE_NAME=this.getLabel("calculatedView/measureName"),e.Labels.CALCULATED_VIEW_FORMULA=this.getLabel("calculatedView/formula"),e.Labels.CALCULATED_VIEW_FORMULA_PROMPT=this.getLabel("calculatedView/formulaPrompt"),e.Labels.CALCULATED_VIEW_CALCULATE_INDI_VALUES=this.getLabel("calculatedView/calculateIndividualValues"),e.Labels.CALCULATED_VIEW_REMOVE_VALUE=this.getLabel("calculatedView/removeValue"),e.Labels.CALCULATED_VIEW_REMOVE_VALUE_TITLE=this.getLabel("calculatedView/removeValueTitle"),e.Labels.CALCULATED_VIEW_REMOVE_VALUE_MESSAGE=this.getLabel("calculatedView/removeValueMessage"),e.Labels.CALCULATED_VIEW_HEADER=this.getLabel("calculatedView/header"),e.Labels.CALCULATED_VIEW_ALL_VALUES=this.getLabel("calculatedView/allValues"),e.Labels.GRID_TOTAL=this.getLabel("grid/total"),e.Labels.GRID_TOTALS=this.getLabel("grid/totals"),e.Labels.GRID_GRAND_TOTAL=this.getLabel("grid/grandTotal"),e.Labels.MEMBER_BLANK=this.getLabel("grid/blankMember"),e.Labels.INVALID_DATE=this.getLabel("grid/dateInvalidCaption"),e.Labels.TOOLTIPS_ROW=this.getLabel("tooltips/row"),e.Labels.TOOLTIPS_COLUMN=this.getLabel("tooltips/column"),e.Labels.TOOLTIPS_HEADER_RESIZE=this.getLabel("tooltips/headerResize"),e.Labels.TOOLTIPS_HEADER_FIT=this.getLabel("tooltips/headerFit"),e.Labels.TOOLTIPS_FILTER_ICON=this.getLabel("tooltips/filterIcon"),e.Labels.TOOLTIPS_FILTERED=this.getLabel("tooltips/filtered"),e.Labels.TOOLTIPS_EXPAND_ICON=this.getLabel("tooltips/expandIcon"),e.Labels.TOOLTIPS_COLLAPSE_ICON=this.getLabel("tooltips/collapseIcon"),e.Labels.TOOLTIPS_DRILL_DOWN=this.getLabel("tooltips/drillDown"),e.Labels.TOOLTIPS_DRILL_UP=this.getLabel("tooltips/drillUp"),e.Labels.TOOLTIPS_SORT_ICON=this.getLabel("tooltips/sortIcon"),e.Labels.TOOLTIPS_SORTED_DESC=this.getLabel("tooltips/sortedDescIcon"),e.Labels.TOOLTIPS_SORTED_ASC=this.getLabel("tooltips/sortedAscIcon"),e.Labels.TOOLTIPS_CLOSE=this.getLabel("tooltips/close"),e.Labels.SUM_CAPTION=this.getLabel("aggregations/sum/caption"),e.Labels.SUM_TOTAL_CAPTION=this.getLabel("aggregations/sum/totalCaption"),e.Labels.SUM_GRAND_TOTAL_CAPTION=this.getLabel("aggregations/sum/grandTotalCaption"),e.Labels.COUNT_CAPTION=this.getLabel("aggregations/count/caption"),e.Labels.COUNT_TOTAL_CAPTION=this.getLabel("aggregations/count/totalCaption"),e.Labels.COUNT_GRAND_TOTAL_CAPTION=this.getLabel("aggregations/count/grandTotalCaption"),e.Labels.DISTINCT_COUNT_CAPTION=this.getLabel("aggregations/distinctCount/caption"),e.Labels.DISTINCT_COUNT_TOTAL_CAPTION=this.getLabel("aggregations/distinctCount/totalCaption"),e.Labels.DISTINCT_COUNT_GRAND_TOTAL_CAPTION=this.getLabel("aggregations/distinctCount/grandTotalCaption"),e.Labels.DIFFERENCE_CAPTION=this.getLabel("aggregations/difference/caption"),e.Labels.DIFFERENCE_TOTAL_CAPTION=this.getLabel("aggregations/difference/totalCaption"),e.Labels.DIFFERENCE_GRAND_TOTAL_CAPTION=this.getLabel("aggregations/difference/grandTotalCaption"),e.Labels.PERCENT_DIFFERENCE_CAPTION=this.getLabel("aggregations/percentDifference/caption"),e.Labels.PERCENT_DIFFERENCE_TOTAL_CAPTION=this.getLabel("aggregations/percentDifference/totalCaption"),e.Labels.PERCENT_DIFFERENCE_GRAND_TOTAL_CAPTION=this.getLabel("aggregations/percentDifference/grandTotalCaption"),e.Labels.AVERAGE_CAPTION=this.getLabel("aggregations/average/caption"),e.Labels.AVERAGE_TOTAL_CAPTION=this.getLabel("aggregations/average/totalCaption"),e.Labels.AVERAGE_GRAND_TOTAL_CAPTION=this.getLabel("aggregations/average/grandTotalCaption"),e.Labels.PRODUCT_CAPTION=this.getLabel("aggregations/product/caption"),e.Labels.PRODUCT_TOTAL_CAPTION=this.getLabel("aggregations/product/totalCaption"),e.Labels.PRODUCT_GRAND_TOTAL_CAPTION=this.getLabel("aggregations/product/grandTotalCaption"),e.Labels.MIN_CAPTION=this.getLabel("aggregations/min/caption"),e.Labels.MIN_TOTAL_CAPTION=this.getLabel("aggregations/min/totalCaption"),e.Labels.MIN_GRAND_TOTAL_CAPTION=this.getLabel("aggregations/min/grandTotalCaption"),e.Labels.MAX_CAPTION=this.getLabel("aggregations/max/caption"),e.Labels.MAX_TOTAL_CAPTION=this.getLabel("aggregations/max/totalCaption"),e.Labels.MAX_GRAND_TOTAL_CAPTION=this.getLabel("aggregations/max/grandTotalCaption"),e.Labels.PERCENT_CAPTION=this.getLabel("aggregations/percent/caption"),e.Labels.PERCENT_TOTAL_CAPTION=this.getLabel("aggregations/percent/totalCaption"),e.Labels.PERCENT_GRAND_TOTAL_CAPTION=this.getLabel("aggregations/percent/grandTotalCaption"),e.Labels.PERCENT_COLUMN_CAPTION=this.getLabel("aggregations/percentOfColumn/caption"),e.Labels.PERCENT_COLUMN_TOTAL_CAPTION=this.getLabel("aggregations/percentOfColumn/totalCaption"),e.Labels.PERCENT_COLUMN_GRAND_TOTAL_CAPTION=this.getLabel("aggregations/percentOfColumn/grandTotalCaption"),e.Labels.PERCENT_ROW_CAPTION=this.getLabel("aggregations/percentOfRow/caption"),e.Labels.PERCENT_ROW_TOTAL_CAPTION=this.getLabel("aggregations/percentOfRow/totalCaption"),e.Labels.PERCENT_ROW_GRAND_TOTAL_CAPTION=this.getLabel("aggregations/percentOfRow/grandTotalCaption"),e.Labels.INDEX_CAPTION=this.getLabel("aggregations/index/caption"),e.Labels.INDEX_TOTAL_CAPTION=this.getLabel("aggregations/index/totalCaption"),e.Labels.INDEX_GRAND_TOTAL_CAPTION=this.getLabel("aggregations/index/grandTotalCaption"),e.Labels.NONE_CAPTION=this.getLabel("aggregations/none/caption"),e.Labels.MEDIAN_CAPTION=this.getLabel("aggregations/median/caption"),e.Labels.MEDIAN_TOTAL_CAPTION=this.getLabel("aggregations/median/totalCaption"),e.Labels.MEDIAN_GRAND_TOTAL_CAPTION=this.getLabel("aggregations/median/grandTotalCaption"),e.Labels.STDEVP_CAPTION=this.getLabel("aggregations/stdevp/caption"),e.Labels.STDEVP_TOTAL_CAPTION=this.getLabel("aggregations/stdevp/totalCaption"),e.Labels.STDEVP_GRAND_TOTAL_CAPTION=this.getLabel("aggregations/stdevp/grandTotalCaption"),e.Labels.STDEVS_CAPTION=this.getLabel("aggregations/stdevs/caption"),e.Labels.STDEVS_TOTAL_CAPTION=this.getLabel("aggregations/stdevs/totalCaption"),e.Labels.STDEVS_GRAND_TOTAL_CAPTION=this.getLabel("aggregations/stdevs/grandTotalCaption"),e.Labels.RUNNING_TOTALS_CAPTION=this.getLabel("aggregations/runningTotals/caption"),e.Labels.RUNNING_TOTALS_TOTAL_CAPTION=this.getLabel("aggregations/runningTotals/totalCaption"),e.Labels.RUNNING_TOTALS_GRAND_TOTAL_CAPTION=this.getLabel("aggregations/runningTotals/grandTotalCaption"),e.Labels.ERROR=this.getLabel("messages/error"),e.Labels.WARNING=this.getLabel("messages/warning"),e.Labels.LIMITATION=this.getLabel("messages/limitation"),e.Labels.BROWSE=this.getLabel("messages/browse"),e.Labels.CONFIRMATION=this.getLabel("messages/confirmation"),e.Labels.REPORT_FILE_TYPE=this.getLabel("messages/reportFileType"),e.Labels.MESSAGE_LOADING=this.getLabel("messages/loading"),e.Labels.MESSAGE_LOADING_CONFIGURATION=this.getLabel("messages/loadingConfiguration"),e.Labels.MESSAGE_LOADING_DATA=this.getLabel("messages/loadingData"),e.Labels.MESSAGE_LOADING_WAITING=this.getLabel("messages/waiting"),e.Labels.MESSAGE_LOADING_PROGRESS=this.getLabel("messages/progress"),e.Labels.MESSAGE_LOADING_PROGRESS_UNKNOWN=this.getLabel("messages/progressUnknown"),e.Labels.MESSAGE_ANALYZING_DATA=this.getLabel("messages/analyzing"),e.Labels.MESSAGE_ANALYZING_PROGRESS=this.getLabel("messages/analyzingProgress"),e.Labels.MESSAGE_ANALYZING_RECORDS=this.getLabel("messages/analyzingRecords"),e.Labels.MESSAGE_SAVING=this.getLabel("messages/saving"),e.Labels.MESSAGE_LOADING_DIMENSIONS=this.getLabel("messages/loadingDimensions"),e.Labels.MESSAGE_LOADING_HIERARCHIES=this.getLabel("messages/loadingHierarchies"),e.Labels.MESSAGE_LOADING_MEASURES=this.getLabel("messages/loadingMeasures"),e.Labels.MESSAGE_LOADING_MEMBERS=this.getLabel("messages/loadingMembers"),e.Labels.MESSAGE_LOADING_LEVELS=this.getLabel("messages/loadingLevels"),e.Labels.MESSAGE_FULLSCREEN=this.getLabel("messages/fullscreen"),e.Labels.MESSAGE_EXPORT_COMPLETE=this.getLabel("messages/exportComplete"),e.Labels.MESSAGE_EXPORT_PROGRESS=this.getLabel("messages/exportProgress"),e.Labels.MESSAGE_EXPORT_ERROR=this.getLabel("messages/exportError"),e.Labels.MESSAGE_GENERATING_PDF=this.getLabel("messages/generatingPDF"),e.Labels.MESSAGE_PLEASE_WAIT=this.getLabel("messages/pleaseWait"),e.Labels.MESSAGE_PAGES_WERE_GENERATED=this.getLabel("messages/pagesWereGenerated"),e.Labels.MESSAGE_UPLOADING=this.getLabel("messages/uploading"),e.Labels.MESSAGE_CANT_SAVE_FILE=this.getLabel("messages/cantSaveFile"),e.Labels.MESSAGE_CANT_WRITE_TO_CLIPBOARD=this.getLabel("messages/cantSaveToClipboard"),e.Labels.MESSAGE_SAVE_REPORT_TO_FILE=this.getLabel("messages/saveReportToFile"),e.Labels.MESSAGE_LOAD_REPORT_FROM_FILE=this.getLabel("messages/loadReportFromFile"),e.Labels.MESSAGE_INPUT_NEW_NAME=this.getLabel("messages/inputNewName"),e.Labels.MESSAGE_INPUT_REPORT_NAME=this.getLabel("messages/inputReportName"),e.Labels.MESSAGE_INVALID_DATASOURCE=this.getLabel("messages/invalidDataSource"),e.Labels.MESSAGE_DATA_STREAM_ERROR=this.getLabel("messages/dataStreamError"),e.Labels.MESSAGE_UNABLE_TO_OPEN_FILE=this.getLabel("messages/unableToOpenFile"),e.Labels.MESSAGE_DOUBLE_FILE_BROWSING_SESSION=this.getLabel("messages/unableTwoFileBrowsingSessions"),e.Labels.MESSAGE_INAPPROPRIATE_FILE_FORMAT=this.getLabel("messages/inappropriateFileFormat"),e.Labels.MESSAGE_INVALID_JSON_DATA=this.getLabel("messages/invalidJSONdata"),e.Labels.MESSAGE_WRONG_FORMULA_FORMAT=this.getLabel("messages/wrongFormulaFormat"),e.Labels.MESSAGE_EXCEL_PDF_EXPORT_LIMITATION=this.getLabel("messages/excelPdfExportLimitation"),e.Labels.MESSAGE_EXPORT_LIMITATION=this.getLabel("messages/excelExportLimitation"),e.Labels.MESSAGE_NO_DATA_AVAILABLE=this.getLabel("messages/noDataAvailable"),e.Labels.MESSAGE_SAVE_DATA_TO_FILE=this.getLabel("messages/saveDataToFile"),e.Labels.MESSAGE_DATA_WAS_UPDATED=this.getLabel("messages/dataWasUpdated"),e.Labels.MESSAGE_OCSV_INCOMPATIBLE=this.getLabel("messages/ocsvIncompatible"),e.Labels.MESSAGE_UNKNOWN_ERROR=this.getLabel("messages/unknownError"),e.Labels.MESSAGE_INVALID_REPORT_FORMAT=this.getLabel("messages/invalidReportFormat"),e.Labels.MESSAGE_CSV_HEADER_PARSING_ERROR=this.getLabel("messages/csvHeaderParsingError"),e.Labels.MESSAGE_TOO_MANY_COLUMNS_IN_CLASSIC_MODE=this.getLabel("messages/tooManyColumnsInClassicMode"),e.Labels.MESSAGE_CANT_EXPAND=this.getLabel("messages/cantExpand"),e.Labels.MESSAGE_CANT_EXPAND_TITLE=this.getLabel("messages/cantExpandTitle"),e.Labels.MESSAGE_NO_GOOGLE_CLIENT_KEY=this.getLabel("messages/noGoogleClientKey"),e.Labels.BUTTON_OK=this.getLabel("buttons/ok"),e.Labels.BUTTON_APPLY=this.getLabel("buttons/apply"),e.Labels.BUTTON_CANCEL=this.getLabel("buttons/cancel"),e.Labels.BUTTON_SAVE=this.getLabel("buttons/save"),e.Labels.BUTTON_CLEAR=this.getLabel("buttons/clear"),e.Labels.BUTTON_SELECT=this.getLabel("buttons/select"),e.Labels.BUTTON_YES=this.getLabel("buttons/yes"),e.Labels.BUTTON_NO=this.getLabel("buttons/no"),e.Labels.CONTEXT_MENU_CLEAR_SORTING=this.getLabel("contextMenu/clearSorting"),e.Labels.CONTEXT_MENU_COLLAPSE=this.getLabel("contextMenu/collapse"),e.Labels.CONTEXT_MENU_DRILL_THROUGH=this.getLabel("contextMenu/drillThrough"),e.Labels.CONTEXT_MENU_EXPAND=this.getLabel("contextMenu/expand"),e.Labels.CONTEXT_MENU_OPEN_FILTER=this.getLabel("contextMenu/openFilter"),e.Labels.CONTEXT_MENU_SORT_COLUMN_ASC=this.getLabel("contextMenu/sortColumnAsc"),e.Labels.CONTEXT_MENU_SORT_COLUMN_DESC=this.getLabel("contextMenu/sortColumnDesc"),e.Labels.CONTEXT_MENU_SORT_ROW_ASC=this.getLabel("contextMenu/sortRowAsc"),e.Labels.CONTEXT_MENU_SORT_ROW_DESC=this.getLabel("contextMenu/sortRowDesc"),e.Labels.YEAR=this.getLabel("date/year"),e.Labels.QUARTER=this.getLabel("date/quarter"),e.Labels.MONTH=this.getLabel("date/month"),e.Labels.DAY=this.getLabel("date/day"),e.Labels.QUARTER_LABELS=[this.getLabel("quarters/q1"),this.getLabel("quarters/q2"),this.getLabel("quarters/q3"),this.getLabel("quarters/q4")],e.Labels.MONTHS_LABELS=[this.getLabel("months/january"),this.getLabel("months/february"),this.getLabel("months/march"),this.getLabel("months/april"),this.getLabel("months/may"),this.getLabel("months/june"),this.getLabel("months/july"),this.getLabel("months/august"),this.getLabel("months/september"),this.getLabel("months/october"),this.getLabel("months/november"),this.getLabel("months/december")],e.Labels.MONTHS_LABELS_SHORT=[this.getLabel("monthsShort/january"),this.getLabel("monthsShort/february"),this.getLabel("monthsShort/march"),this.getLabel("monthsShort/april"),this.getLabel("monthsShort/may"),this.getLabel("monthsShort/june"),this.getLabel("monthsShort/july"),this.getLabel("monthsShort/august"),this.getLabel("monthsShort/september"),this.getLabel("monthsShort/october"),this.getLabel("monthsShort/november"),this.getLabel("monthsShort/december")],e.Labels.WEEKDAYS_LABELS=[this.getLabel("weekdays/first"),this.getLabel("weekdays/second"),this.getLabel("weekdays/third"),this.getLabel("weekdays/fourth"),this.getLabel("weekdays/fifth"),this.getLabel("weekdays/sixth"),this.getLabel("weekdays/seventh")],e.Labels.WEEKDAYS_LABELS_SHORT=[this.getLabel("weekdaysShort/first"),this.getLabel("weekdaysShort/second"),this.getLabel("weekdaysShort/third"),this.getLabel("weekdaysShort/fourth"),this.getLabel("weekdaysShort/fifth"),this.getLabel("weekdaysShort/sixth"),this.getLabel("weekdaysShort/seventh")],s.DateFormat.setDayNames(e.Labels.WEEKDAYS_LABELS,e.Labels.WEEKDAYS_LABELS_SHORT),s.DateFormat.setMonthNames(e.Labels.MONTHS_LABELS,e.Labels.MONTHS_LABELS_SHORT)},t.prototype.getLabel=function(e){if(0==s.nullOrUndefined(this.reports)){var t=this.reports.getLabel(e);if(0==s.nullOrUndefined(t))return t}return 0==s.nullOrUndefined(this.globals)&&(t=this.globals.getLabel(e),0==s.nullOrUndefined(t))?t:this.defaults.getLabel(e)},t.prototype.reset=function(){this.reports=null,this.updateLabels()},t.prototype.load=function(t,n,i){var r=this;void 0===i&&(i=!1);try{"string"==typeof t&&0==s.nullOrEmpty(t)?(new e.LabelsLoader).load(s.URLUtils.getUrl(t,!0),(function(e){r.onLoadingComplete(e,i),null!=n&&n(!0)}),(function(){null!=n&&n(!1)})):(t instanceof Object?this.onLoadingComplete(e.LabelsValueObject.fromObject(t),i):this.reset(),null!=n&&n(!0))}catch(o){console.error(o),null!=n&&n(!1)}},t.prototype.onLoadingComplete=function(e,t){void 0===t&&(t=!1),t?this.globals=e:this.reports=e,this.updateLabels()},t.prototype.generateLocalization=function(){var t=new e.LabelsValueObject;return t.setDefaults(),t.merge(this.globals),t.toObject()},t.prototype.getCurrentLocalization=function(){var t=new e.LabelsValueObject;return t.setDefaults(),t.merge(this.globals),this.reports&&t.merge(this.reports),t},t}();e.LabelsManager=t}(e._labels||(e._labels={}))}(e.model||(e.model={}))}(r||(r={})),function(e){!function(e){!function(e){var t=function(){function e(){this.fieldsList={flatHierarchyBox:null,hierarchyBox:null,filterBox:null,rowBox:null,columnBox:null,measureBox:null,values:null,addCalculatedMeasure:null,expandAll:null,collapseAll:null,formulasGroupName:null,allFields:null,rows:null,columns:null,filters:null,dropField:null,title:null,subtitle:null},this.filter={all:null,multipleItems:null,selectAll:null,selectAllResults:null,top:null,bottom:null,ascSort:null,descSort:null,topX:null,clearTopX:null,measuresPrompt:null,search:null,amountSelected:null,amountFound:null,sort:null},this.drillThrough={title:null,row:null,column:null,value:null},this.calculatedView={title:null,measureBox:null,measureName:null,formula:null,formulaPrompt:null,calculateIndividualValues:null,removeValue:null,removeValueTitle:null,removeValueMessage:null,header:null,allValues:null},this.grid={total:null,totals:null,grandTotal:null,blankMember:null,dateInvalidCaption:null},this.tooltips={row:null,column:null,headerResize:null,headerFit:null,filterIcon:null,filtered:null,expandIcon:null,collapseIcon:null,drillDown:null,drillUp:null,sortIcon:null,sortedDescIcon:null,sortedAscIcon:null,close:null},this.aggregations={sum:{caption:null,totalCaption:null,grandTotalCaption:null},count:{caption:null,totalCaption:null,grandTotalCaption:null},distinctCount:{caption:null,totalCaption:null,grandTotalCaption:null},difference:{caption:null,totalCaption:null,grandTotalCaption:null},percentDifference:{caption:null,totalCaption:null,grandTotalCaption:null},average:{caption:null,totalCaption:null,grandTotalCaption:null},product:{caption:null,totalCaption:null,grandTotalCaption:null},min:{caption:null,totalCaption:null,grandTotalCaption:null},max:{caption:null,totalCaption:null,grandTotalCaption:null},percent:{caption:null,totalCaption:null,grandTotalCaption:null},percentOfColumn:{caption:null,totalCaption:null,grandTotalCaption:null},percentOfRow:{caption:null,totalCaption:null,grandTotalCaption:null},index:{caption:null,totalCaption:null,grandTotalCaption:null},none:{caption:null},median:{caption:null,totalCaption:null,grandTotalCaption:null},stdevp:{caption:null,totalCaption:null,grandTotalCaption:null},stdevs:{caption:null,totalCaption:null,grandTotalCaption:null},runningTotals:{caption:null,totalCaption:null,grandTotalCaption:null}},this.messages={error:null,warning:null,limitation:null,browse:null,confirmation:null,reportFileType:null,loading:null,loadingConfiguration:null,loadingData:null,waiting:null,progress:null,progressUnknown:null,analyzing:null,analyzingProgress:null,analyzingRecords:null,saving:null,loadingDimensions:null,loadingHierarchies:null,loadingMeasures:null,loadingMembers:null,loadingLevels:null,loadingProperties:null,fullscreen:null,exportComplete:null,exportProgress:null,exportError:null,generatingPDF:null,pleaseWait:null,pagesWereGenerated:null,uploading:null,cantSaveFile:null,cantSaveToClipboard:null,saveReportToFile:null,loadReportFromFile:null,inputNewName:null,inputReportName:null,invalidDataSource:null,dataStreamError:null,unableToOpenFile:null,unableTwoFileBrowsingSessions:null,noGoogleClientKey:null,inappropriateFileFormat:null,invalidJSONdata:null,wrongFormulaFormat:null,excelPdfExportLimitation:null,excelExportLimitation:null,noDataAvailable:null,saveDataToFile:null,dataWasUpdated:null,ocsvIncompatible:null,unknownError:null,invalidReportFormat:null,csvHeaderParsingError:null,tooManyColumnsInClassicMode:null,cantExpand:null,cantExpandTitle:null},this.buttons={ok:null,apply:null,cancel:null,save:null,clear:null,select:null,yes:null,no:null},this.contextMenu={clearSorting:null,collapse:null,drillThrough:null,expand:null,openFilter:null,sortColumnAsc:null,sortColumnDesc:null,sortRowAsc:null,sortRowDesc:null},this.date={year:null,quarter:null,month:null,day:null},this.quarters={q1:null,q2:null,q3:null,q4:null},this.months={january:null,february:null,march:null,april:null,may:null,june:null,july:null,august:null,september:null,october:null,november:null,december:null},this.monthsShort={january:null,february:null,march:null,april:null,may:null,june:null,july:null,august:null,september:null,october:null,november:null,december:null},this.weekdays={first:null,second:null,third:null,fourth:null,fifth:null,sixth:null,seventh:null},this.weekdaysShort={first:null,second:null,third:null,fourth:null,fifth:null,sixth:null,seventh:null},this.toolbar={connect:null,connect_local_csv:null,connect_local_json:null,connect_remote_csv:null,connect_remote_csv_mobile:null,connect_remote_json:null,connect_remote_json_mobile:null,connect_google_drive:null,open:null,local_report:null,remote_report:null,remote_report_mobile:null,save:null,save_json:null,load_json:null,grid:null,grid_flat:null,grid_classic:null,grid_compact:null,format:null,format_cells:null,format_cells_mobile:null,conditional_formatting:null,conditional_formatting_mobile:null,options:null,fullscreen:null,minimize:null,export:null,export_print:null,export_html:null,export_csv:null,export_excel:null,export_image:null,export_pdf:null,fields:null,ok:null,apply:null,done:null,cancel:null,value:null,delete:null,if:null,then:null,open_remote_csv:null,open_remote_json:null,csv:null,open_remote_report:null,choose_value:null,text_align:null,align_left:null,align_right:null,none:null,space:null,thousand_separator:null,decimal_separator:null,decimal_places:null,currency_symbol:null,currency_align:null,null_value:null,is_percent:null,true_value:null,false_value:null,conditional:null,add_condition:null,less_than:null,less_than_or_equal:null,greater_than:null,greater_than_or_equal:null,equal_to:null,not_equal_to:null,between:null,is_empty:null,all_values:null,and:null,and_symbole:null,cp_text:null,cp_highlight:null,layout_options:null,layout:null,compact_view:null,classic_view:null,flat_view:null,grand_totals:null,grand_totals_off:null,grand_totals_on:null,grand_totals_on_rows:null,grand_totals_on_columns:null,subtotals:null,subtotals_off:null,subtotals_on:null,subtotals_on_rows:null,subtotals_on_columns:null,choose_page_orientation:null,landscape:null,portrait:null,message_error:null,message_no_google_client_id:null}}return e.prototype.setDefaults=function(){this.fieldsList.flatHierarchyBox="Select and arrange columns",this.fieldsList.hierarchyBox="Drag Dimensions",this.fieldsList.filterBox="Drop & Arrange Report Filter",this.fieldsList.rowBox="Drop & Arrange Rows",this.fieldsList.columnBox="Drop & Arrange Columns",this.fieldsList.measureBox="Drop & Arrange Values",this.fieldsList.values="Values",this.fieldsList.allFields="All Fields",this.fieldsList.rows="Rows",this.fieldsList.columns="Columns",this.fieldsList.filters="Report Filters",this.fieldsList.dropField="Drop field here",this.fieldsList.addCalculatedMeasure="Add calculated value",this.fieldsList.expandAll="Expand All",this.fieldsList.collapseAll="Collapse All",this.fieldsList.formulasGroupName="Calculated Values",this.fieldsList.title="Fields",this.fieldsList.subtitle="Drag and drop fields to arrange",this.filter.ascSort="Az",this.filter.descSort="zA",this.filter.topX="Top 10",this.filter.clearTopX="Clear",this.filter.top="Top",this.filter.bottom="Bottom",this.filter.measuresPrompt="Choose value",this.filter.search="Search",this.filter.selectAll="Select All",this.filter.selectAllResults="Select All Results",this.filter.amountSelected="{0} of {1} selected",this.filter.amountFound="{0} of {1} found are selected",this.filter.multipleItems="Multiple Items",this.filter.all="All",this.filter.sort="Sort:",this.drillThrough.title="Details",this.drillThrough.row="Row: <b>{0}</b>",this.drillThrough.column="Column: <b>{0}</b>",this.drillThrough.value="{0}: <b>{1}</b>",this.calculatedView.title="Calculated Value",this.calculatedView.measureBox="Drag values to formula",this.calculatedView.measureName="Value name",this.calculatedView.formula="Formula",this.calculatedView.formulaPrompt="Drop values and edit formula here",this.calculatedView.calculateIndividualValues="Calculate individual values",this.calculatedView.removeValue="Remove",this.calculatedView.removeValueTitle="Remove {0}?",this.calculatedView.removeValueMessage="Are you sure you want to remove this calculated value?",this.calculatedView.header="Add calculated value",this.calculatedView.allValues="All values",this.grid.total="Total",this.grid.totals="Totals",this.grid.grandTotal="Grand Total",this.grid.blankMember="(blank)",this.grid.dateInvalidCaption="Invalid date",this.tooltips.row="Row:",this.tooltips.column="Column:",this.tooltips.headerResize="Drag to resize",this.tooltips.headerFit="Double click to fit",this.tooltips.filterIcon="Click to filter",this.tooltips.filtered="Filtered",this.tooltips.expandIcon="Click to expand",this.tooltips.collapseIcon="Click to collapse",this.tooltips.drillDown="Click to drill down",this.tooltips.drillUp="Click to drill up",this.tooltips.sortIcon="Click to sort Desc",this.tooltips.sortedDescIcon="Click to sort Asc",this.tooltips.sortedAscIcon="Click to sort Desc",this.tooltips.close="Click to close",this.aggregations.sum.caption="Sum",this.aggregations.sum.totalCaption="Sum of {0}",this.aggregations.sum.grandTotalCaption="Total Sum of {0}",this.aggregations.count.caption="Count",this.aggregations.count.totalCaption="Count of {0}",this.aggregations.count.grandTotalCaption="Total Count of {0}",this.aggregations.distinctCount.caption="Distinct Count",this.aggregations.distinctCount.totalCaption="Distinct Count of {0}",this.aggregations.distinctCount.grandTotalCaption="Total Distinct Count of {0}",this.aggregations.average.caption="Average",this.aggregations.average.totalCaption="Average of {0}",this.aggregations.average.grandTotalCaption="Total Average of {0}",this.aggregations.product.caption="Product",this.aggregations.product.totalCaption="Product of {0}",this.aggregations.product.grandTotalCaption="Total Product of {0}",this.aggregations.min.caption="Min",this.aggregations.min.totalCaption="Min of {0}",this.aggregations.min.grandTotalCaption="Total Min of {0}",this.aggregations.max.caption="Max",this.aggregations.max.totalCaption="Max of {0}",this.aggregations.max.grandTotalCaption="Total Max of {0}",this.aggregations.percent.caption="% of Grand Total",this.aggregations.percent.totalCaption="% of Grand Total of {0}",this.aggregations.percent.grandTotalCaption="Total % of Grand Total of {0}",this.aggregations.percentOfColumn.caption="% of Column",this.aggregations.percentOfColumn.totalCaption="% of Column of {0}",this.aggregations.percentOfColumn.grandTotalCaption="Total % of Column of {0}",this.aggregations.percentOfRow.caption="% of Row",this.aggregations.percentOfRow.totalCaption="% of Row of {0}",this.aggregations.percentOfRow.grandTotalCaption="Total % of Row of {0}",this.aggregations.index.caption="Index",this.aggregations.index.totalCaption="Index of {0}",this.aggregations.index.grandTotalCaption="Index of {0}",this.aggregations.difference.caption="Difference",this.aggregations.difference.totalCaption="Difference of {0}",this.aggregations.difference.grandTotalCaption="Difference of {0}",this.aggregations.percentDifference.caption="% Difference",this.aggregations.percentDifference.totalCaption="% Difference of {0}",this.aggregations.percentDifference.grandTotalCaption="% Difference of {0}",this.aggregations.none.caption="No Calculation",this.aggregations.median.caption="Median",this.aggregations.median.totalCaption="Median of {0}",this.aggregations.median.grandTotalCaption="Total Median of {0}",this.aggregations.stdevp.caption="Population StDev",this.aggregations.stdevp.totalCaption="Population StDev of {0}",this.aggregations.stdevp.grandTotalCaption="Total Population StDev of {0}",this.aggregations.stdevs.caption="Sample StDev",this.aggregations.stdevs.totalCaption="Sample StDev of {0}",this.aggregations.stdevs.grandTotalCaption="Total Sample StDev of {0}",this.aggregations.runningTotals.caption="Running Totals",this.aggregations.runningTotals.totalCaption="Running Totals of {0}",this.aggregations.runningTotals.grandTotalCaption="Running Totals of {0}",this.messages.error="Error!",this.messages.warning="Warning!",this.messages.limitation="Limitation!",this.messages.browse="Browse",this.messages.confirmation="Confirmation",this.messages.reportFileType="WebDataRocks report file",this.messages.loading="Loading...",this.messages.loadingConfiguration="",this.messages.loadingData="Loading data...",this.messages.uploading="Uploading...",this.messages.waiting="Waiting for the response {0} sec.",this.messages.progress="{0}K",this.messages.progressUnknown="loaded {0}K",this.messages.analyzing="Analyzing data...",this.messages.analyzingProgress="{0} records of {1} ({2}%)",this.messages.analyzingRecords="{0} records",this.messages.saving="Saving...",this.messages.loadingDimensions="Loading dimensions...",this.messages.loadingHierarchies="Loading hierarchies...",this.messages.loadingMeasures="Loading measures...",this.messages.loadingMembers="Loading members...",this.messages.loadingLevels="Loading levels...",this.messages.fullscreen="Open report in full screen?",this.messages.exportComplete='Export data is created, please click "Save" button to save the _data.',this.messages.generatingPDF="Generating PDF",this.messages.pleaseWait="Please wait.",this.messages.pagesWereGenerated="pages were generated.",this.messages.exportProgress="Export in progress...",this.messages.exportError="Failed to export. An unexpected error occurred.",this.messages.cantSaveFile="Cannot save file.",this.messages.cantSaveToClipboard="Error: Cannot write to the clipboard.",this.messages.saveReportToFile='Report is ready to be saved to file, please click "Save" button to save the report.',this.messages.saveDataToFile='Data is ready to be saved to file, please click "Save" button to save the file.',this.messages.loadReportFromFile="Select report file to be loaded.",this.messages.inputNewName="Input new name",this.messages.inputReportName="Please input report name",this.messages.dataStreamError="Stream error occurred while loading '{0}'",this.messages.unableToOpenFile="Unable to open file {0}.<br/><br/>It seems that this file doesn't exist or 'Access-Control-Allow-Origin' header is absent in the resource requested.",this.messages.unableTwoFileBrowsingSessions="Browse file dialog is already opened.",this.messages.noGoogleClientKey="Please enter Google Client Key in index.html file.",this.messages.wrongFormulaFormat="Wrong formula format. Please check.",this.messages.inappropriateFileFormat="The data file is of inappropriate format.",this.messages.invalidJSONdata="JSON data is invalid.",this.messages.excelPdfExportLimitation="Export to Microsoft Excel or PDF is not available in the current edition.",this.messages.excelExportLimitation="Export is not available in the current edition.",this.messages.noDataAvailable="Data source is empty. Please check the CSV file.",this.messages.csvHeaderParsingError="CSV header parsing error.",this.messages.dataWasUpdated="Data source has been updated on the server. Refresh the report?",this.messages.ocsvIncompatible="Unable to read data source. It seems that OCSV file was compressed with a newer version. Please update the component to version {0} or newer.",this.messages.unknownError="Unknown error occurred.",this.messages.invalidReportFormat="Invalid report format or access to file is denied.",this.messages.tooManyColumnsInClassicMode="Too many columns for classic form. Switched layout to compact form.",this.messages.cantExpand="Some fields cannot be expanded. Please narrow down the data set.",this.messages.cantExpandTitle="Data set is too large",this.buttons.ok="OK",this.buttons.apply="Apply",this.buttons.cancel="Cancel",this.buttons.save="Save",this.buttons.clear="Clear",this.buttons.select="Select",this.buttons.yes="Yes",this.buttons.no="No",this.contextMenu.drillThrough="Drill through",this.contextMenu.openFilter="Open filter",this.contextMenu.collapse="Collapse",this.contextMenu.expand="Expand",this.contextMenu.sortRowDesc="Sort row desc",this.contextMenu.sortRowAsc="Sort row asc",this.contextMenu.clearSorting="Clear sorting",this.contextMenu.sortColumnDesc="Sort column desc",this.contextMenu.sortColumnAsc="Sort column asc",this.date.year="Year",this.date.quarter="Quarter",this.date.month="Month",this.date.day="Day",this.quarters.q1="Quarter 1",this.quarters.q2="Quarter 2",this.quarters.q3="Quarter 3",this.quarters.q4="Quarter 4",this.months.january="January",this.months.february="February",this.months.march="March",this.months.april="April",this.months.may="May",this.months.june="June",this.months.july="July",this.months.august="August",this.months.september="September",this.months.october="October",this.months.november="November",this.months.december="December",this.monthsShort.january="Jan",this.monthsShort.february="Feb",this.monthsShort.march="Mar",this.monthsShort.april="Apr",this.monthsShort.may="May",this.monthsShort.june="Jun",this.monthsShort.july="Jul",this.monthsShort.august="Aug",this.monthsShort.september="Sep",this.monthsShort.october="Oct",this.monthsShort.november="Nov",this.monthsShort.december="Dec",this.weekdays.first="Sunday",this.weekdays.second="Monday",this.weekdays.third="Tuesday",this.weekdays.fourth="Wednesday",this.weekdays.fifth="Thursday",this.weekdays.sixth="Friday",this.weekdays.seventh="Saturday",this.weekdaysShort.first="Sun",this.weekdaysShort.second="Mon",this.weekdaysShort.third="Tue",this.weekdaysShort.fourth="Wed",this.weekdaysShort.fifth="Thu",this.weekdaysShort.sixth="Fri",this.weekdaysShort.seventh="Sat",this.toolbar.connect="Connect",this.toolbar.connect_local_csv="To local CSV",this.toolbar.connect_local_json="To local JSON",this.toolbar.connect_google_drive="To Google Drive",this.toolbar.connect_remote_csv="To remote CSV",this.toolbar.connect_remote_csv_mobile="CSV",this.toolbar.connect_remote_json="To remote JSON",this.toolbar.connect_remote_json_mobile="JSON",this.toolbar.open="Open",this.toolbar.local_report="Local report",this.toolbar.remote_report="Remote report",this.toolbar.remote_report_mobile="Report",this.toolbar.save="Save",this.toolbar.load_json="JSON report",this.toolbar.grid="Grid",this.toolbar.grid_flat="Flat",this.toolbar.grid_classic="Classic",this.toolbar.grid_compact="Compact",this.toolbar.format="Format",this.toolbar.format_cells="Format cells",this.toolbar.format_cells_mobile="Format",this.toolbar.conditional_formatting="Conditional formatting",this.toolbar.conditional_formatting_mobile="Conditional",this.toolbar.options="Options",this.toolbar.fullscreen="Fullscreen",this.toolbar.minimize="Minimize",this.toolbar.export="Export",this.toolbar.export_print="Print",this.toolbar.export_html="To HTML",this.toolbar.export_csv="To CSV",this.toolbar.export_excel="To Excel",this.toolbar.export_image="To Image",this.toolbar.export_pdf="To PDF",this.toolbar.fields="Fields",this.toolbar.ok="OK",this.toolbar.apply="Apply",this.toolbar.done="Done",this.toolbar.cancel="Cancel",this.toolbar.value="Value",this.toolbar.delete="Delete",this.toolbar.if="If",this.toolbar.then="Then",this.toolbar.open_remote_csv="Open remote CSV",this.toolbar.open_remote_json="Open remote JSON",this.toolbar.csv="CSV",this.toolbar.credentials="credentials",this.toolbar.username="Username",this.toolbar.password="Password",this.toolbar.open_remote_report="Open remote report",this.toolbar.choose_value="Choose value",this.toolbar.text_align="Text align",this.toolbar.align_left="left",this.toolbar.align_right="right",this.toolbar.none="None",this.toolbar.space="(Space)",this.toolbar.thousand_separator="Thousand separator",this.toolbar.decimal_separator="Decimal separator",this.toolbar.decimal_places="Decimal places",this.toolbar.currency_symbol="Currency symbol",this.toolbar.currency_align="Currency align",this.toolbar.null_value="Null value",this.toolbar.is_percent="Format as percent",this.toolbar.true_value="true",this.toolbar.false_value="false",this.toolbar.conditional="Conditional",this.toolbar.add_condition="Add condition",this.toolbar.less_than="Less than",this.toolbar.less_than_or_equal="Less than or equal to",this.toolbar.greater_than="Greater than",this.toolbar.greater_than_or_equal="Greater than or equal to",this.toolbar.equal_to="Equal to",this.toolbar.not_equal_to="Not equal to",this.toolbar.between="Between",this.toolbar.is_empty="Empty",this.toolbar.all_values="All values",this.toolbar.and="and",this.toolbar.and_symbole="&",this.toolbar.cp_text="Text",this.toolbar.cp_highlight="Highlight",this.toolbar.layout_options="Layout options",this.toolbar.layout="Layout",this.toolbar.compact_view="Compact form",this.toolbar.classic_view="Classic form",this.toolbar.flat_view="Flat form",this.toolbar.grand_totals="Grand totals",this.toolbar.grand_totals_off="Do not show grand totals",this.toolbar.grand_totals_on="Show grand totals",this.toolbar.grand_totals_on_rows="Show for rows only",this.toolbar.grand_totals_on_columns="Show for columns only",this.toolbar.subtotals="Subtotals",this.toolbar.subtotals_off="Do not show subtotals",this.toolbar.subtotals_on="Show subtotals",this.toolbar.subtotals_on_rows="Show subtotal rows only",this.toolbar.subtotals_on_columns="Show subtotal columns only",this.toolbar.choose_page_orientation="Choose page orientation",this.toolbar.landscape="Landscape",this.toolbar.portrait="Portrait",this.toolbar.message_error=this.messages.error,this.toolbar.message_no_google_client_id=this.messages.noGoogleClientKey},e.prototype.getLabel=function(e){return 1==(e=e.split("/")).length?this[e[0]]:2!=e.length||s.nullOrUndefined(this[e[0]])||s.nullOrUndefined(this[e[0]][e[1]])?3!=e.length||s.nullOrUndefined(this[e[0]])||s.nullOrUndefined(this[e[0]][e[1]])||s.nullOrUndefined(this[e[0]][e[1]][e[2]])?null:this[e[0]][e[1]][e[2]]:this[e[0]][e[1]]},e.prototype.merge=function(t){e.nodeFromObject(t,this)},e.prototype.toObject=function(){var e,t={};for(e in this)this[e]instanceof Function||s.nullOrUndefined(this[e])||(t[e]=this[e]);return JSON.stringify(t,null,2)},e.fromObject=function(t){var n=new e;return e.nodeFromObject(t,n),n},e.nodeFromObject=function(t,n){if(!s.nullOrUndefined(t)&&!s.nullOrUndefined(n)&&t instanceof Object)for(var i in t){var r=t[i];s.nullOrUndefined(r)||("string"==typeof r?n[i]=r:r instanceof Object&&e.nodeFromObject(r,n[i]))}},e}();e.LabelsValueObject=t}(e._labels||(e._labels={}))}(e.model||(e.model={}))}(r||(r={})),function(e){!function(e){!function(e){var n=function(){function e(){}return e.REPORT_FILE_LOADED="load",e.REPORT_FILE_FAILED="fail",e.REPORT_FILE_CANCELLED="cancel",e}();e.ReportEvent=n;var i=function(e){function t(t){var i=e.call(this,n.REPORT_FILE_LOADED)||this;return i.report=t,i}return h(t,e),t}(t._Event);e.ReportFileLoadedEvent=i,i=function(e){function t(t){var i=e.call(this,n.REPORT_FILE_FAILED)||this;return i.message=t,i}return h(t,e),t}(t._Event),e.ReportFileFailedEvent=i}(e.report||(e.report={}))}(e.model||(e.model={}))}(r||(r={})),function(e){var n,i,r;n=e.model||(e.model={}),i=n.report||(n.report={}),r=function(a){function l(){var e=a.call(this)||this;return e.defaultFilename="report.json",e}return h(l,a),l.prototype.open=function(){var e=this;this.localReportLoader=new i.LocalReportLoader,this.localReportLoader.addEventListener(i.ReportEvent.REPORT_FILE_LOADED,(function(t){return e.onReportFileLoaded(t)})),this.localReportLoader.addEventListener(i.ReportEvent.REPORT_FILE_FAILED,(function(t){return e.onReportFileFailed(t)})),this.localReportLoader.addEventListener(i.ReportEvent.REPORT_FILE_CANCELLED,(function(){return e.onReportFileCancelled()})),this.localReportLoader.load()},l.prototype.load=function(t){var r=this;e.preloader(!0,n._labels.Labels.MESSAGE_LOADING),this.urlReportLoader=new i.UrlReportLoader,this.urlReportLoader.addEventListener(i.ReportEvent.REPORT_FILE_LOADED,(function(e){return r.onReportFileLoaded(e)})),this.urlReportLoader.addEventListener(i.ReportEvent.REPORT_FILE_FAILED,(function(e){return r.onReportFileFailed(e)})),this.urlReportLoader.load(s.URLUtils.addTimestamp(t))},l.prototype.cancel=function(){this.localReportLoader&&(this.localReportLoader.removeAllEventListeners(i.ReportEvent.REPORT_FILE_LOADED),this.localReportLoader.removeAllEventListeners(i.ReportEvent.REPORT_FILE_FAILED),this.localReportLoader=null),this.urlReportLoader&&(this.urlReportLoader.removeAllEventListeners(i.ReportEvent.REPORT_FILE_LOADED),this.urlReportLoader.removeAllEventListeners(i.ReportEvent.REPORT_FILE_FAILED),this.urlReportLoader=null),this.removeAllEventListeners(i.ReportEvent.REPORT_FILE_LOADED),this.removeAllEventListeners(i.ReportEvent.REPORT_FILE_FAILED)},l.prototype.onReportFileLoaded=function(e){this.dispatch(new i.ReportFileLoadedEvent(e.report))},l.prototype.onReportFileFailed=function(t){e.uialert(t.message,n._labels.Labels.ERROR,e.AlertType.ERROR),this.dispatchWith(i.ReportEvent.REPORT_FILE_FAILED)},l.prototype.onReportFileCancelled=function(){this.dispatchWith(i.ReportEvent.REPORT_FILE_CANCELLED)},l.prototype.save=function(t,n,r,o,s,a){var l=this;void 0===n&&(n=null),void 0===s&&(s=!1),this.saveCallbackHandler=r,r=!1;var u="string"==typeof t?t:null,c=o;switch(o=s,t instanceof Object&&(t.hasOwnProperty("filename")&&(u=t.filename),t.hasOwnProperty("destination")&&(n=t.destination),t.hasOwnProperty("url")&&(c=t.url),t.hasOwnProperty("embedData")&&(o=t.embedData)),null!=u&&""!=u||(u=this.defaultFilename),a.connectionInfo.dataSourceType==e.data_.consts.DataSourceType.CSV&&a.options.gridType!=e._view.grid.GridType.FLAT&&(a.connectionInfo instanceof e.data_.vo.FileConnectionInfo&&a.connectionInfo.browseForFile||a.connectionInfo.embedded||o)&&((t=new e.data_.vo.CSVConnectionInfo).embedded=!0,a.connectionInfo=t,r=!0),n=null==n?i.DestinationType.FILE:n.toLowerCase()){case i.DestinationType.SERVER:r?(new e.data_.csv.CSVSaver).getData((function(e){return l.saveToServer(c,u,a,e)})):this.saveToServer(c,u,a);break;case i.DestinationType.FILE:r?(new e.data_.csv.CSVSaver).getData((function(e){return l.saveToFile(u,a,e)})):this.saveToFile(u,a);break;default:r?(new e.data_.csv.CSVSaver).getData((function(e){return l.saveToFile(u,a,e)})):this.saveToFile(u,a)}return null},l.prototype.dispatchReportSaved=function(e){if(null!=this.saveCallbackHandler)try{this.saveCallbackHandler(e)}catch(l){this.saveCallbackHandler("Error! "+l)}},l.prototype.defineReportType=function(e){return JSON.stringify(e.toObject(),null,4)},l.prototype.saveToFile=function(t,i,o){void 0===o&&(o=null);var s=[this.defineReportType(i)];null!=o&&(s.push("\n"),s.push(o));try{var a=this;e.uialert(n._labels.Labels.MESSAGE_SAVE_REPORT_TO_FILE,n._labels.Labels.CONFIRMATION,e.AlertType.CONFIRMATION,[n._labels.Labels.BUTTON_SAVE,n._labels.Labels.BUTTON_CANCEL],[function(){var e=new Blob(s,{type:"text/js;charset=utf-8"});u(e,t),a.dispatchReportSaved(!0)},function(){a.dispatchReportSaved(!1)}])}catch(r){e.uialert(n._labels.Labels.MESSAGE_CANT_SAVE_FILE,n._labels.Labels.ERROR,e.AlertType.ERROR),this.dispatchReportSaved(!1)}},l.prototype.saveToServer=function(i,r,a,l){var u=this;void 0===l&&(l=null),s.nullOrEmpty(i)&&e.uialert("Report cannot be saved. Save report url is empty.",n._labels.Labels.WARNING,e.AlertType.ERROR);var c=new o.URLVariables;c.data.name=r,c.data.report=null==l?this.defineReportType(a):this.defineReportType(a)+"\n"+l,c.data.type="json";var h=new o.URLStream;return h.data=c.toString(),h.contentType=o.ContentType.APPLICATION_URLENCODED,h.requestMethod=o.URLRequestMethod.POST,h.addEventListener(t._Event.COMPLETE,(function(){return u.onSaveComplete(h)})),h.addEventListener(t._Event.ERROR,(function(){return u.onError(h)})),h.load(i),e.preloader(!0,n._labels.Labels.MESSAGE_UPLOADING),null},l.prototype.onSaveComplete=function(t){e.preloader(!1),this.dispatchReportSaved(t.response)},l.prototype.onError=function(t){e.preloader(!1),this.dispatchReportSaved(!1),t=n.XSSCheck.valid(t.url)?t.url:n.XSSCheck.validate(t.url),e.uialert(n._labels.Labels.MESSAGE_CANT_SAVE_FILE+s.StringUtils.bind(' (<a href="{0}">{0}</a>)',t),n._labels.Labels.ERROR,e.AlertType.ERROR)},l}(t.EventDispatcher),i.ReportManager=r}(r||(r={})),function(e){var t,n,i;t=e.model||(e.model={}),n=t.report||(t.report={}),i=function(){function i(){this.withDefaults=!1,this.connectionInfo=new e.data_.vo.ConnectionInfo,this.slice=new n.SliceValueObject,this.options=new t._options.vo.OptionsValueObject,this.formats=[],this.conditions=[],this.columnSizes={},this.rowSizes={},this.columnHeaderSizes=[],this.rowHeaderSizes=[],this.rowFilterSizes=[],this.columnSizesByIdx={},this.rowSizesByIdx={},this.customFields=[],this.labels={},this.localization=null}return i.fromObject=function(r){if(null==r)return null;r instanceof i||(r=i.toPlainObject(r));var o=new i;return o.connectionInfo=e.data_.vo.ConnectionInfo.fromObject(null!=r.connectionInfo?r.connectionInfo:r),o.options=t._options.vo.OptionsValueObject.fromObject(null!=r.options?r.options:r),o.slice=n.SliceValueObject.fromObject(null!=r.slice?r.slice:r,o.connectionInfo,o.options.gridType==e._view.grid.GridType.FLAT),null!=r.formats&&r.formats.length&&(o.formats=r.formats),null!=r.conditions&&r.conditions.length&&(o.conditions=r.conditions),null!=r.columnSizes&&"string"!=typeof r.columnSizes&&(o.columnSizes=r.columnSizes),null!=r.rowSizes&&"string"!=typeof r.rowSizes&&(o.rowSizes=r.rowSizes),null!=r.columnHeaderSizes&&"string"!=typeof r.columnHeaderSizes&&(o.columnHeaderSizes=r.columnHeaderSizes),null!=r.rowHeaderSizes&&"string"!=typeof r.rowHeaderSizes&&(o.rowHeaderSizes=r.rowHeaderSizes),null!=r.rowFilterSizes&&"string"!=typeof r.rowFilterSizes&&(o.rowFilterSizes=r.rowFilterSizes),null!=r.columnSizesByIdx&&(o.columnSizesByIdx=r.columnSizesByIdx),null!=r.rowSizesByIdx&&(o.rowSizesByIdx=r.rowSizesByIdx),null!=r.customFields&&(o.customFields=r.customFields),null!=r.localization&&(o.localization=r.localization),o},i.prototype.toObject=function(){var e={},t=this.connectionInfo.toObject(this.withDefaults);if(s.ObjectUtils.isEmptyObject(t)||(e.dataSource=t),t=this.slice.toObject(this.withDefaults),s.ObjectUtils.isEmptyObject(t)||(e.slice=t),t=this.options.toObject(),s.ObjectUtils.isEmptyObject(t)||(e.options=t),0<(t=this.composeConditionsObject()).length&&(e.conditions=t),null!=this.formats&&0!=this.formats.length){t=[];for(var n=!this.options.saveAllFormats&&5<this.formats.length,i=0;i<this.formats.length;i++){var r=this.formats[i];""!=r.name&&(null==this.slice.formatsInUse[r.name]||n&&!this.slice.formatsInUse[r.name])||t.push(r)}e.formats=t}return t=this.composeTableSizesObject(),s.ObjectUtils.isEmptyObject(t)||(e.tableSizes=t),null!=this.customFields&&0!=this.customFields.length&&(e.customFields=this.customFields),null!=this.localization&&""!=this.localization&&(e.localization=this.localization),e},i.prototype.composeConditionsObject=function(){for(var e=[],t=0;t<this.conditions.length;t++){var n=this.conditions[t],i={};i.formula=n.formula,-1<n.row&&(i.row=n.row),-1<n.column&&(i.column=n.column),-1<n.isTotal&&(i.isTotal=1==n.isTotal),n.measure&&0<n.measure.length&&(i.measure=n.measure),n.hierarchy&&0<n.hierarchy.length&&(i.hierarchy=n.hierarchy),n.member&&0<n.member.length&&(i.member=n.member),n.format&&!s.ObjectUtils.isEmptyObject(n.format)&&(i.format=n.format),e.push(i)}return e},i.prototype.composeTableSizesObject=function(){var e,t,i,r,o={};if(null!=this.columnHeaderSizes&&!s.ObjectUtils.isEmptyObject(this.columnHeaderSizes)||null!=this.columnSizes&&!s.ObjectUtils.isEmptyObject(this.columnSizes)){if(o.columns=[],null!=this.columnHeaderSizes&&!s.ObjectUtils.isEmptyObject(this.columnHeaderSizes))for(t=0;t<this.columnHeaderSizes.length;t++)null!=this.columnHeaderSizes[t]&&o.columns.push({idx:t,width:this.columnHeaderSizes[t]});if(t=n.SliceValueObject.findMeasure(this.slice.columns),null!=this.columnSizes&&!s.ObjectUtils.isEmptyObject(this.columnSizes))for(e in this.columnSizes)i=e.split(","),0<=t?(r=i.pop(),o.columns.push({tuple:i,measure:r,width:this.columnSizes[e]})):o.columns.push({tuple:i,width:this.columnSizes[e]})}if(null!=this.rowFilterSizes&&!s.ObjectUtils.isEmptyObject(this.rowFilterSizes)||null!=this.rowHeaderSizes&&!s.ObjectUtils.isEmptyObject(this.rowHeaderSizes)||null!=this.rowSizes&&!s.ObjectUtils.isEmptyObject(this.rowSizes)){if(o.rows=[],null!=this.rowFilterSizes&&!s.ObjectUtils.isEmptyObject(this.rowFilterSizes))for(t=0;t<this.rowFilterSizes.length;t++)null!=this.rowFilterSizes[t]&&o.rows.push({idx:t,height:this.rowFilterSizes[t]});if(null!=this.rowHeaderSizes&&!s.ObjectUtils.isEmptyObject(this.rowHeaderSizes))for(t=0;t<this.rowHeaderSizes.length;t++)null!=this.rowHeaderSizes[t]&&o.rows.push({idx:t,height:this.rowHeaderSizes[t]});if(t=n.SliceValueObject.findMeasure(this.slice.rows),null!=this.rowSizes&&!s.ObjectUtils.isEmptyObject(this.rowSizes))for(e in this.rowSizes)i=e.split(","),0<=t?(r=i.pop(),o.rows.push({tuple:i,measure:r,height:this.rowSizes[e]})):o.rows.push({tuple:i,height:this.rowSizes[e]})}return o},i.toPlainObject=function(i){var r={};if(null==i)return r;if(null!=i.columnSizes&&(r.columnSizes=i.columnSizes),null!=i.rowSizes&&(r.rowSizes=i.rowSizes),null!=i.columnHeaderSizes&&(r.columnHeaderSizes=i.columnHeaderSizes),null!=i.rowHeaderSizes&&(r.rowHeaderSizes=i.rowHeaderSizes),null!=i.rowFilterSizes&&(r.rowFilterSizes=i.rowFilterSizes),null!=i.rowSizesByIdx&&(r.rowSizesByIdx=i.rowSizesByIdx),null!=i.columnSizesByIdx&&(r.columnSizesByIdx=i.columnSizesByIdx),null!=i.customFields&&(r.customFields=i.customFields),null!=i.labels&&(r.labels=i.labels),r.connectionInfo=e.data_.vo.ConnectionInfo.toPlainObject(null!=i.connectionInfo?i.connectionInfo:i),r.slice=n.SliceValueObject.toPlainObject(null!=i.slice?i.slice:i),r.options=t._options.vo.OptionsValueObject.toPlainObject(null!=i.options?i.options:i),null!=i.formats&&0<i.formats.length&&(r.formats=i.formats),null!=i.conditions&&0<i.conditions.length&&(r.conditions=i.conditions),null!=i.tableSizes){var o,s;if(null!=i.tableSizes.columns){var a=i.tableSizes.columns;for(o=0;o<a.length;o++)null!=a[o].idx&&(null==r.columnSizesByIdx&&(r.columnSizesByIdx={}),r.columnSizesByIdx[parseInt(a[o].idx)]=parseInt(a[o].width)),(null!=a[o].tuple||null!=a[o].measure)&&(null==r.columnSizes&&(r.columnSizes={}),s=null==a[o].tuple?[]:a[o].tuple.slice(),null!=a[o].measure&&s.push(a[o].measure),r.columnSizes[s.join(",")]=parseInt(a[o].width))}if(null!=i.tableSizes.rows)for(a=i.tableSizes.rows,o=0;o<a.length;o++)null!=a[o].idx&&(null==r.rowSizesByIdx&&(r.rowSizesByIdx={}),r.rowSizesByIdx[parseInt(a[o].idx)]=parseInt(a[o].height)),(null!=a[o].tuple||null!=a[o].measure)&&(null==r.rowSizes&&(r.rowSizes={}),s=null==a[o].tuple?[]:a[o].tuple.slice(),null!=a[o].measure&&s.push(a[o].measure),r.rowSizes[s.join(",")]=parseInt(a[o].height))}return null!=i.localization&&(r.localization=i.localization),r},i.prototype.merge=function(n){if(s.nullOrUndefined(n))return this;n=i.toPlainObject(n);var r,o=i.toPlainObject(this);for(r in n)n.hasOwnProperty(r)&&("connectionInfo"==r?e.data_.vo.ConnectionInfo.fromObject(n.connectionInfo).isEmpty||(o[r]=n[r]):"options"==r?(this.options.mergeWith(n[r]),o[r]=t._options.vo.OptionsValueObject.toPlainObject(this.options)):o[r]=n[r]);return i.fromObject(o)},i}(),n.ReportValueObject=i}(r||(r={})),function(e){var n,i,r;n=e.model||(e.model={}),i=n.report||(n.report={}),r=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return h(r,t),r.prototype.dispatchReportLoaded=function(e){this.dispatch(e?new i.ReportFileLoadedEvent(e):new i.ReportFileFailedEvent(n._labels.Labels.MESSAGE_INVALID_REPORT_FORMAT))},r.prototype.parseReport=function(e){try{var n=e.indexOf("/**----**");return JSON.parse(-1<n?e.substring(0,n):e)}catch(t){return console.error(t),null}},r.prototype.getStringByteLength=function(t){var n=new e.DataStream(new ArrayBuffer(0),0,e.DataStream.BIG_ENDIAN);return n.writeString(t),n.byteLength},r}(t.EventDispatcher),i.ReportLoader=r}(r||(r={})),function(e){var n,i,r;n=e.model||(e.model={}),r=function(r){function a(){var e=r.call(this)||this;return e.counter=0,e.embeddedStartDataSign="\x3c!--",e.embeddedDataJSONStartSign="/**----**",e}return h(a,r),a.prototype.load=function(e){var n=this;this.url=e,this.bytesLoaded=0,this.loader=new o.URLStream,this.loader.dataType=o.DataType.TEXT,this.loader.addEventListener(t._Event.PROGRESS,(function(e){return n.onProgress(e)})),this.loader.addEventListener(t._Event.COMPLETE,(function(){return n.onLoaded()})),this.loader.addEventListener(t._Event.ERROR,(function(){return n.onError()})),this.loader.load(e)},a.prototype.onProgress=function(e){e=0,null!=this.loader&&-1<(e=this.loader.response.indexOf("</config>"))&&e+this.embeddedDataJSONStartSign.length+1<this.loader.response.length&&this.onLoaded()},a.prototype.onLoaded=function(){if(null!=this.loader){this.loader.removeAllEventListeners(t._Event.COMPLETE);var n=this.parseReport(this.loader.response);if(n instanceof i.ReportValueObject){if(n.connectionInfo instanceof e.data_.vo.CSVConnectionInfo&&1==n.connectionInfo.embedded){var r=n.connectionInfo;r.filename=this.loader.url,r.embeddedDataOffset=this.getStringByteLength(this.loader.response.substring(0,this.loader.response.indexOf("</config>")+9)+"\n"),this.loader.response.indexOf(this.embeddedStartDataSign),n.connectionInfo=r}}else s.nullOrUndefined(n)||s.nullOrUndefined(n.dataSource)||1!=n.dataSource.embedded||(n.dataSource.filename=this.loader.url,n.dataSource.embeddedDataOffset=this.getStringByteLength(this.loader.response.substring(0,this.loader.response.indexOf(this.embeddedDataJSONStartSign))));this.dispatchReportLoaded(n),this.dispose()}},a.prototype.onError=function(){this.loader.removeAllEventListeners(t._Event.PROGRESS),this.loader.removeAllEventListeners(t._Event.COMPLETE),this.loader.removeAllEventListeners(t._Event.ERROR);var e=n.XSSCheck.valid(this.url)?this.url:n.XSSCheck.validate(this.url);e=s.StringUtils.bind(n._labels.Labels.MESSAGE_UNABLE_TO_OPEN_FILE,e),this.dispatch(new i.ReportFileFailedEvent(e)),this.dispose()},a.prototype.dispose=function(){null!=this.loader&&(this.loader.removeAllEventListeners(),this.loader.dispose(),this.loader=null)},a}((i=n.report||(n.report={})).ReportLoader),i.UrlReportLoader=r}(r||(r={})),function(e){var n,i,r;n=e.model||(e.model={}),r=function(r){function a(){return r.call(this)||this}return h(a,r),a.prototype.load=function(){var e=this;this.file=new o.FileReference,this.file.addEventListener(t._Event.SELECT,(function(){return e.onSelected()})),this.file.addEventListener(t._Event.COMPLETE,(function(){return e.onLoaded()})),this.file.addEventListener(t._Event.CANCEL,(function(){return e.onCancel()})),this.file.addEventListener(t._Event.ERROR,(function(){return e.onError()})),this.file.browse([".json",".js"])},a.prototype.onSelected=function(){null!=this.file&&this.file.load(o.ReadMethod.ARRAY_BUFFER)},a.prototype.onLoaded=function(){try{var t=new e.DataStream(this.file.response,0,e.DataStream.BIG_ENDIAN),r=t.readString(t.byteLength),o=this.parseReport(r);if(o instanceof i.ReportValueObject){if(o.connectionInfo instanceof e.data_.vo.CSVConnectionInfo&&1==o.connectionInfo.embedded){var a=o.connectionInfo;a.embeddedDataToLoad=this.file.response,a.embeddedDataOffset=this.getStringByteLength(r.substring(0,r.indexOf("</config>")+9)+"\n"),o.connectionInfo=a}}else s.nullOrUndefined(o)||s.nullOrUndefined(o.dataSource)||1!=o.dataSource.embedded||(o.dataSource.embeddedDataToLoad=this.file.response,o.dataSource.embeddedDataOffset=this.getStringByteLength(r.substring(0,r.indexOf("/**----**"))));this.dispatchReportLoaded(o),this.dispose()}catch(n){console.error(n),this.onError()}},a.prototype.onError=function(){var e=s.StringUtils.bind(n._labels.Labels.MESSAGE_UNABLE_TO_OPEN_FILE,"");this.dispatch(new i.ReportFileFailedEvent(e)),this.dispose()},a.prototype.onCancel=function(){this.dispatchWith(i.ReportEvent.REPORT_FILE_CANCELLED),this.dispose()},a.prototype.dispose=function(){null!=this.file&&(this.file.removeAllEventListeners(),this.file.dispose(),this.file=null)},a}((i=n.report||(n.report={})).ReportLoader),i.LocalReportLoader=r}(r||(r={})),function(e){!function(e){!function(e){var t=function(){function e(){}return e.validType=function(t){return t==e.FILE||t==e.SERVER||t==e.BINARY||t==e.PLAIN},e.FILE="file",e.SERVER="server",e.BINARY="binary",e.PLAIN="plain",e}();e.DestinationType=t}(e.report||(e.report={}))}(e.model||(e.model={}))}(r||(r={})),function(e){!function(e){!function(e){var t=function(){function e(){}return e.customFields=[],e}();e.CustomFieldsManager=t}(e.report||(e.report={}))}(e.model||(e.model={}))}(r||(r={})),function(e){var t,n,i;n=(t=e.model||(e.model={})).report||(t.report={}),i=function(){function n(){this.rows=[],this.columns=[],this.pages=[],this.measures=[],this.rowSorting={},this.columnSorting={},this.expandedRows=[],this.expandedColumns=[],this.drilledRows=[],this.drilledColumns=[],this.drillAll=this.expandAll=!1,this.flatOrder=[],this.formatsInUse={}}return n.prototype.normalizeSlice=function(e){if(0<=n.findMeasure(e.rows)){var t=n.findMeasure(e.columns);0<=t&&(e.columns[t]=e.columns[0],e.columns.shift())}},n.findMeasure=function(t){for(var n=e.data_.Cube.MEASURES_NAME,i=0;i<t.length;i++)if(t[i].uniqueName==n)return i;return-1},n.readExpandedFromObject=function(e){for(var t,n=[],i=0;i<e.length;i++){if((t=[]).push(null!=e[i].measure?e[i].measure:""),null!=e[i].tuple)for(var r=0;r<e[i].tuple.length;r++)t.push(e[i].tuple[r]);n.push(t)}return n},n.readDrilledFromObject=function(e){for(var t,n=[],i=0;i<e.length;i++){if((t=[]).push(null!=e[i].level?e[i].level:""),t.push(null!=e[i].measure?e[i].measure:-1),null!=e[i].tuple){t.push(e[i].tuple[e[i].tuple.length-1]);for(var r=0;r<e[i].tuple.length;r++)t.push(e[i].tuple[r])}n.push(t)}return n},n.fromObject=function(e,i,r){if(void 0===i&&(i=null),void 0===r&&(r=!1),null==e)return null;e instanceof n||(e=n.toPlainObject(e));var o=new n;return null!=e.measures&&e.measures.length&&(o.measures=e.measures),null==i&&t.PivotModel.getInstance(),null!=e.pages&&e.pages.length&&(o.pages=n.hierarchiesFromObject(e.pages)),null!=e.columns&&e.columns.length&&(o.columns=n.hierarchiesFromObject(e.columns,r)),null!=e.rows&&e.rows.length&&(o.rows=n.hierarchiesFromObject(e.rows,r)),null!=e.flatOrder&&e.flatOrder.length&&(o.flatOrder=e.flatOrder),o.normalizeSlice(o),null!=e.rowSorting&&(o.rowSorting=e.rowSorting),null!=e.columnSorting&&(o.columnSorting=e.columnSorting),null!=e.expandAll&&(o.expandAll=e.expandAll),null!=e.expandedRows&&e.expandedRows.length&&(o.expandedRows=e.expandedRows),null!=e.expandedColumns&&e.expandedColumns.length&&(o.expandedColumns=e.expandedColumns),null!=e.drillAll&&(o.drillAll=e.drillAll),null!=e.drilledRows&&e.drilledRows.length&&(o.drilledRows=e.drilledRows),null!=e.drilledColumns&&e.drilledColumns.length&&(o.drilledColumns=e.drilledColumns),o},n.hierarchiesFromObject=function(t,n){void 0===n&&(n=!1);for(var i=[],r=0;r<t.length;r++)for(var o in i[r]={},n&&!t[r].sort&&(t[r].sort=e.data_.consts.SortType.UNSORTED),t[r])"sort"==o?i[r].sortName=t[r].sort:i[r][o]=t[r][o];return i},n.prototype.toObject=function(t){void 0===t&&(t=!1);var n,i={},r=[];for(n=0;n<this.pages.length;n++)r.push(this.hierarchyToJSON(this.pages[n],t));for(0<r.length&&(i.reportFilters=r),r=[],n=0;n<this.rows.length;n++)r.push(this.hierarchyToJSON(this.rows[n],t));for(0<r.length&&(i.rows=r),r=[],n=0;n<this.columns.length;n++)r.push(this.hierarchyToJSON(this.columns[n],t));for(0<r.length&&(i.columns=r),r=[],n=0;n<this.measures.length;n++)r.push(this.measureToJSON(this.measures[n],t));return 0<r.length&&(i.measures=r),(null!=this.rowSorting&&null!=this.rowSorting.type&&this.rowSorting.type!=e.data_.consts.SortType.UNSORTED||null!=this.columnSorting&&this.columnSorting.type&&this.columnSorting.type!=e.data_.consts.SortType.UNSORTED)&&(i.sorting={},null!=this.rowSorting&&null!=this.rowSorting.type&&this.rowSorting.type!=e.data_.consts.SortType.UNSORTED&&(i.sorting.row=this.rowSorting),null!=this.columnSorting&&this.columnSorting.type&&this.columnSorting.type!=e.data_.consts.SortType.UNSORTED&&(i.sorting.column=this.columnSorting)),n={},(t||this.expandAll)&&(n.expandAll=this.expandAll),0<this.expandedRows.length&&(n.rows=this.expandedElementsToJSON(this.expandedRows)),0<this.expandedColumns.length&&(n.columns=this.expandedElementsToJSON(this.expandedColumns)),s.ObjectUtils.isEmptyObject(n)||(i.expands=n),n={},(t||this.drillAll)&&(n.drillAll=this.drillAll),0<this.drilledRows.length&&(n.rows=this.drilledElementsToJSON(this.drilledRows)),0<this.drilledColumns.length&&(n.columns=this.drilledElementsToJSON(this.drilledColumns)),s.ObjectUtils.isEmptyObject(n)||(i.drills=n),0<this.flatOrder.length&&(i.flatOrder=this.flatOrder),i},n.prototype.expandedElementsToJSON=function(e){for(var t,n,i,r=[],o=0;o<e.length;o++)t={},i=(n=e[o].slice(0)).shift(),0!=n.length&&(t.tuple=n,""!=i&&(t.measure=i),r.push(t));return r},n.prototype.drilledElementsToJSON=function(e){for(var t,n,i,r,o=[],s=0;s<e.length;s++)t={},n=(r=e[s].slice(0)).shift(),i=r.shift(),r.shift(),0!=r.length&&(t.tuple=r,""!=i&&(t.measure=i),""!=n&&(t.level=n),o.push(t));return o},n.prototype.measureToJSON=function(t,n){var i={};return i.uniqueName=t.uniqueName,null!=t.formula&&""!=t.formula?(i.formula=t.formula,t.individual&&(i.individual=!0),i.caption=t.caption):(n||t.aggregation!=e.data_.consts.AggregationName.NONE)&&(i.aggregation=t.aggregation),(n||0==t.active)&&(i.active=t.active),null!=t.format&&""!=t.format&&(i.format=t.format,this.formatsInUse[t.format]=t.active),null!=t.availableAggregations&&0<t.availableAggregations.length&&(i.availableAggregations=t.availableAggregations),i},n.prototype.hierarchyToJSON=function(t,n){var i={};if(i.uniqueName=t.uniqueName,null!=t.activeLevelName&&(i.levelName=t.activeLevelName),null!=t.filter&&(i.filter={},null!=t.filter.type&&t.filter.type!=e.data_.consts.FilterType.NONE&&(i.filter={type:t.filter.type,quantity:t.filter.quantity,measure:t.filter.measure}),null!=t.filter.members)){var r="string"==typeof t.filter.members?t.filter.members.split(","):t.filter.members;0<r.length&&(i.filter.members=r,!0===t.filter.negation&&(i.filter.negation=t.filter.negation))}return t.filterEnabled||(i.filterEnabled=!0),t.uniqueName!=e.data_.Cube.MEASURES_NAME&&t.sortName&&(n||t.sortName!=e.data_._structure.GenericHierarchy.DEFAULT_SORT_NAME)&&(i.sort=t.sortName),t.uniqueName!=e.data_.Cube.MEASURES_NAME&&t.sortAs&&(i.sortAs=t.sortAs),i},n.toPlainObject=function(e){var t={};return null==e||(null!=e.pages&&(t.pages=e.pages),null!=e.reportFilters&&(t.pages=e.reportFilters),null!=e.rows&&(t.rows=e.rows),null!=e.columns&&(t.columns=e.columns),null!=e.measures&&(t.measures=e.measures),null!=e.rowSorting&&(t.rowSorting=e.rowSorting,null!=t.rowSorting.tuple&&"string"==typeof t.rowSorting.tuple&&(t.rowSorting.tuple=t.rowSorting.tuple.split(","))),null!=e.sorting&&null!=e.sorting.row&&(t.rowSorting=e.sorting.row),null!=e.columnSorting&&(t.columnSorting=e.columnSorting,null!=t.columnSorting.tuple&&"string"==typeof t.columnSorting.tuple&&(t.columnSorting.tuple=t.columnSorting.tuple.split(","))),null!=e.sorting&&null!=e.sorting.column&&(t.columnSorting=e.sorting.column),null!=e.expandAll&&(t.expandAll=e.expandAll),null!=e.expandedRows&&(t.expandedRows=e.expandedRows),null!=e.expandedColumns&&(t.expandedColumns=e.expandedColumns),null!=e.expands&&(null!=e.expands.expandAll&&(t.expandAll=e.expands.expandAll),null!=e.expands.rows&&(t.expandedRows=n.readExpandedFromObject(e.expands.rows)),null!=e.expands.columns&&(t.expandedColumns=n.readExpandedFromObject(e.expands.columns))),null!=e.drillAll&&(t.drillAll=e.drillAll),null!=e.drilledRows&&(t.drilledRows=e.drilledRows),null!=e.drilledColumns&&(t.drilledColumns=e.drilledColumns),null!=e.drills&&(null!=e.drills.drillAll&&(t.drillAll=e.drills.drillAll),null!=e.drills.rows&&(t.drilledRows=n.readDrilledFromObject(e.drills.rows)),null!=e.drills.columns&&(t.drilledColumns=n.readDrilledFromObject(e.drills.columns))),null!=e.flatOrder&&(t.flatOrder=e.flatOrder),null!=e.slice&&(null!=(e=e.slice).pages&&e.pages.length&&(t.pages=e.pages),null!=e.reportFilters&&e.reportFilters.length&&(t.pages=e.reportFilters),null!=e.rows&&e.rows.length&&(t.rows=e.rows),null!=e.columns&&e.columns.length&&(t.columns=e.columns),null!=e.measures&&e.measures.length&&(t.measures=e.measures),null!=e.sorting&&null!=e.sorting.row&&(t.rowSorting=e.sorting.row),null!=e.sorting&&null!=e.sorting.column&&(t.columnSorting=e.sorting.column),null!=e.expands&&(null!=e.expands.expandAll&&(t.expandAll=e.expands.expandAll),null!=e.expands.rows&&(t.expandedRows=n.readExpandedFromObject(e.expands.rows)),null!=e.expands.columns&&(t.expandedColumns=n.readExpandedFromObject(e.expands.columns))),null!=e.drills&&(null!=e.drills.drillAll&&(t.drillAll=e.drills.drillAll),null!=e.drills.rows&&(t.drilledRows=n.readDrilledFromObject(e.drills.rows)),null!=e.drills.columns&&(t.drilledColumns=n.readDrilledFromObject(e.drills.columns))),null!=e.flatOrder&&e.flatOrder.length&&(t.flatOrder=e.flatOrder))),t},n}(),n.SliceValueObject=i}(r||(r={})),function(e){var t,n,i,r;i=(n=(t=e.model||(e.model={}))._state||(t._state={})).vo||(n.vo={}),r=function(){function n(){this.formats=new s.AssociativeArray,this.conditions=new s.AssociativeArray,this.customFields=[],this.rowSizes={},this.columnSizes={},this.startTableRow=0,this.rowHeaderSizes={},this.columnHeaderSizes={},this.rowFilterSizes={},this.expandedRows=[],this.expandedColumns=[],this.drilledRows=[],this.drilledColumns=[],this.localization=null,this.labels={},this.withGlobals=this.withDefaults=!1}return n.toReport=function(n){var i,r,o=new t.report.ReportValueObject;if(o.withDefaults=n.withDefaults,o.connectionInfo=n._connectionInfo,n._slice){var s,a=e.data_._structure.Axis.toObject(n._slice.findAxis(e.data_.consts.AxisName.ROWS_AXIS)),l=e.data_._structure.Axis.toObject(n._slice.findAxis(e.data_.consts.AxisName.COLUMNS_AXIS));for(i=e.data_._structure.Axis.toObject(n._slice.findAxis(e.data_.consts.AxisName.PAGES_AXIS)),o.slice=new t.report.SliceValueObject,o.slice.rows=a.hierarchies,o.slice.columns=l.hierarchies,o.slice.pages=i.hierarchies,o.slice.measures=[],i=0;i<n._slice.measures_.length;i++)s=n._slice.measures_.getItemAt(i),(s=e.data_._structure.GenericMeasure.toObject(s)).active=!0,o.slice.measures.push(s);for(i=0;i<n._structure.measures_.length;i++)s=n._structure.measures_.getItemAt(i),n._slice.measures_.keyExists(s.uniqueName)||s.hasDefaultParams()||((s=e.data_._structure.GenericMeasure.toObject(s)).active=!1,o.slice.measures.push(s));o.slice.rowSorting=a.sort,o.slice.columnSorting=l.sort,o.slice.expandAll=n._slice.expandAll,o.slice.expandedRows=n.expandedRows,o.slice.expandedColumns=n.expandedColumns,o.slice.drillAll=n._slice.drillAll,o.slice.drilledRows=n.drilledRows,o.slice.drilledColumns=n.drilledColumns,o.slice.flatOrder=n._slice.flatOrder}for(o.options=n._options,a=[],i=0;i<n.formats.length;i++)a[i]=n.formats.getItemAt(i).toObject();for(o.formats=a,a=[],i=0;i<n.conditions.length;i++)a[i]=t.condition.vo.ConditionValueObject.toObject(n.conditions.getItemAt(i));for(r in o.conditions=a,o.customFields=n.customFields,o.labels=n.labels,i={},n.columnSizes)i[r]=n.columnSizes[r];for(r in o.columnSizes=i,a=[],n.columnHeaderSizes)a[i=parseInt(r)]=n.columnHeaderSizes[r];for(r in o.columnHeaderSizes=a,i={},n.rowSizes)i[r]=n.rowSizes[r];for(r in o.rowSizes=i,a=[],n.rowHeaderSizes)a[(i=parseInt(r))+n.startTableRow]=n.rowHeaderSizes[r];if(o.rowHeaderSizes=a,a=[],0!=n.startTableRow)for(r in n.rowFilterSizes)a[i=parseInt(r)]=n.rowFilterSizes[r];return o.rowFilterSizes=a,o.localization=n.localization,o},n}(),i.StateValueObject=r}(r||(r={})),function(e){var t,n,r;n=(t=e.model||(e.model={})).printing||(t.printing={}),r=function(){function n(){var e=this;this.MARGINS=25,this._printInProgress=!1,this.printCompletedHandler=function(){return e.onPrintCompleted()},this.footerHeight=this.headerHeight=0}return n.getInstance=function(){return null==n._instance&&(n._instance=new n),n._instance},n.dispose=function(){n._instance=null},n.prototype.print=function(n){void 0===n&&(n=null),this._printInProgress||(this._printInProgress=!0,this._options=n||new t.printing.PrintOptions,t.PivotModel.getInstance().addEventListener(e.PivotEvent.PRINT_COMPLETE,this.printCompletedHandler),t.PivotModel.getInstance().dispatchWith(e.PivotEvent.PRINT))},n.prototype.onPrintCompleted=function(){t.PivotModel.getInstance().removeEventListener(e.PivotEvent.PRINT_COMPLETE,this.printCompletedHandler),this._printInProgress=!1},n.prototype.run=function(e,t){this.grid=e,this.dataProvider=t,this.gridLayout=null!=e?e.gridLayout:null,this.start()},n.prototype.start=function(){var e=this;this.pageNumber=0,this._pageWidth=576-2*this.MARGINS,this._pageHeight=756-2*this.MARGINS,this.pages=new i.UIElement("div"),this.stylesList=[],this.rowsShift=this.columnsShift=0,s.ThreadManager.addTask(this.generatePageColumn,this,null,(function(){return e.finish()}))},n.prototype.clear=function(){this._printInProgress=!1,this.columnsShift=this.pageNumber=this.rowsShift=this.columnsShift=0,this.pages=this.printSprite=null,this.footerHeight=this.headerHeight=0},n.prototype.generatePageColumn=function(){return this.addColumn()},n.prototype.addColumn=function(){if(null==this.printSprite)this.printSprite=this.createPage(),this.printTable=this.printSprite.find("table");else if(!(this.printSprite.getWidth(!0)<=this._pageWidth&&0!=this.columnsShift)&&(this.printSprite.getWidth(!0)>this._pageWidth&&(this.columnsShift--,this.printSprite.find("td:last-child").remove()),this.addPageToPJ(),this.printSprite=this.createPage(),this.printTable=this.printSprite.find("table"),0==this.grid.isFlatTable)){var e=this.columnsShift;0!=this.columnsShift&&(this.columnsShift=0,this.addColumnOnPage(),this.columnsShift=e,this.columnsShift+1<=this.dataProvider.extendedDataWidth-(this.grid.isFlatTable?1:0)&&(this.columnsShift+=1))}return this.addColumnOnPage(),1==this.shift()&&(this.addPageToPJ(),!0)},n.prototype.createPage=function(){var e=new i.UIElement("div").addClass("page");if(e.css("position","absolute").css("left","-9999px"),null!=this._options.header){var n=this.createHeaderFooter(this._options.header);e.append(n)}var r=new i.UIElement("table");if(0==this.pageNumber&&0<t._options.OptionsManager.gridTitle.length&&r.append(new i.UIElement("caption").text(t._options.OptionsManager.gridTitle)),e.append(r),null!=this._options.footer){var o=this.createHeaderFooter(this._options.footer);e.append(o)}return this.grid.container.append(e),this.headerHeight=null!=n?n.getHeight():0,this.footerHeight=null!=o?o.getHeight():0,e},n.prototype.createHeaderFooter=function(e){var t=new i.UIElement("div");return e=(e=e.replace(/##PAGE-NUMBER##/gi,(this.pageNumber+1).toString())).replace(/##CURRENT-DATE##/gi,(new Date).toLocaleString()),t.html(e),t},n.prototype.addPageToPJ=function(){return this.pageNumber++,e.preloader(!0,t._labels.Labels.MESSAGE_PLEASE_WAIT,this.pageNumber+" "+t._labels.Labels.MESSAGE_PAGES_WERE_GENERATED,!0),this.rowHeightSum>this._pageHeight&&(this._rowIdx--,this.printSprite.find("tr:last-child").remove()),this.printSprite.detach(),this.printSprite.css("position","").css("left",""),this.pages.append(this.printSprite),!1},n.prototype.shift=function(){return++this.columnsShift,this.columnsShift>this.dataProvider.extendedDataWidth-(this.grid.isFlatTable?1:0)&&(this.columnsShift=0,this.rowsShift+=this._rowIdx-this.grid.FIRST_DATA_ROW),1e3<=this.pageNumber||this.rowsShift>=this.dataProvider.extendedDataHeight},n.prototype.addColumnOnPage=function(){this.rowHeightSum=0;var e=this.grid.START_HEADERS_COLUMN+this.columnsShift,t=this._pageHeight-this.headerHeight-this.footerHeight;for(this._rowIdx=this.grid.START_TABLE_ROW;this.rowHeightSum<=t&&this._rowIdx<this.dataProvider.extendedDataHeight+this.grid.FIRST_DATA_ROW-this.rowsShift;this._rowIdx++){this.rowIndex=this._rowIdx<this.grid.FIRST_DATA_ROW?this._rowIdx:this._rowIdx+this.rowsShift;var n=this.gridLayout.getCell(this.rowIndex,e,!0,!0);if(this.rowHeightSum+=this.addCell(this._rowIdx,this.columnsShift,n),this.rowHeightSum>=t)break}},n.prototype.addCell=function(e,t,n){for(t=0<(t=this.printTable.find("tr",!0)).length?t[e]:null;null==t;)this.printTable.append(new i.UIElement("tr")),t=this.printTable.find("tr",!0)[e];if(e="<td {0}>"+(n?n.getLabel():"")+"</td>",null==n)e=s.StringUtils.bind(e,"class='cell'");else{var r="",o="";n.isCustomized&&(o=n.style.getStyleString(),r=n.style.getCustomClassString(),this.appendStylesList(n.style.customStyleNames)),""!=(r=n.isRowHeader?r+" rowHeaderCell level"+n.level:n.isColumnHeader?r+" columnHeaderCell":n.isFilterHeader?r+" filterHeaderCell":n.isTotal&&""!=n.getLabel()?r+" totalCell":r+" cell").trim()&&(r="class='"+r.trim()+"'"),""!=o.trim()&&(o="style='"+o.trim()+"maxWidth:400px'"),e=s.StringUtils.bind(e,r+" "+o)}return t.element.innerHTML+=e,t.getHeight(!0)+4},n.prototype.appendStylesList=function(e){for(var t=0;t<e.length;t++)0>this.stylesList.indexOf(e[t])&&this.stylesList.push(e[t])},n.prototype.finish=function(){e.preloader(!0,t._labels.Labels.MESSAGE_PLEASE_WAIT,"Sending pages to printer...",!1,!0),o.PrintJob.print(this.pages.html(),this.generateStyle(),t._options.OptionsManager.gridTitle),e.preloader(!1),t.PivotModel.getInstance().dispatchWith(e.PivotEvent.PRINT_COMPLETE),this.clear()},n.prototype.generateStyle=function(){var t="",n=i.UIElement.convert(this.gridLayout.element),r=n.find("#wdr-data-sheet");for(t=(t=(t=(t=(t=(t=(t=(t+=s.StringUtils.bind("table{width:100%;border-collapse:collapse;{0}}\n",e._view.grid.vo.StyleValueObject.fromItemToString(n,["font-family","font-size"])))+s.StringUtils.bind("caption{{0}}\n",e._view.grid.vo.StyleValueObject.fromClassToString(e._view.grid.vo.GridStyleName.TITLE,n)))+s.StringUtils.bind("td{white-space:nowrap;{0}}\n",s.browserVersion().isChrome?"":"border: 1px solid #eee;"))+s.StringUtils.bind(".cell{{0}}\n",e._view.grid.vo.StyleValueObject.fromClassToString(e._view.grid.vo.GridStyleName.CELL,r)))+s.StringUtils.bind(".totalCell{{0}}\n",e._view.grid.vo.StyleValueObject.fromClassToString(e._view.grid.vo.GridStyleName.CELL+" "+e._view.grid.vo.GridStyleName.TOTAL,r)))+s.StringUtils.bind(".rowHeaderCell{{0}}\n",e._view.grid.vo.StyleValueObject.fromClassToString(e._view.grid.vo.GridStyleName.CELL+" "+e._view.grid.vo.GridStyleName.HEADER+" "+e._view.grid.vo.GridStyleName.HEADER_ROW,n)))+s.StringUtils.bind(".columnHeaderCell{{0}}\n",e._view.grid.vo.StyleValueObject.fromClassToString(e._view.grid.vo.GridStyleName.CELL+" "+e._view.grid.vo.GridStyleName.HEADER+" "+e._view.grid.vo.GridStyleName.HEADER_COLUMN,n)))+s.StringUtils.bind(".filterHeaderCell{{0}}\n",e._view.grid.vo.StyleValueObject.fromClassToString(e._view.grid.vo.GridStyleName.CELL+" "+e._view.grid.vo.GridStyleName.HEADER+" "+e._view.grid.vo.GridStyleName.FILTER_HEADER,n)),r=1;20>=r;r++)t+=s.StringUtils.bind(".level{0}{{1}}\n",r,e._view.grid.vo.StyleValueObject.fromClassToString(e._view.grid.vo.GridStyleName.HEADER_ROW+" "+e._view.grid.vo.GridStyleName.LEVEL+r,n,["padding-left"]));for(r=0;r<this.stylesList.length;r++)t+=s.StringUtils.bind(".{0}{{1}}\n",this.stylesList[r],e._view.grid.vo.StyleValueObject.fromClassToString(this.stylesList[r],n));return(t=(t+".page:not(:last-child), svg { page-break-after: always; }").replace(/background-color:rgb\(33, 33, 33\)/g,"background-color:rgb(255, 255, 255)")).replace(/background-color:rgb\(66, 66, 66\)/g,"background-color:rgb(247, 247, 247)")},n}(),n.PrintingManager=r}(r||(r={})),function(e){!function(e){!function(e){var t=function(){function e(){}return e.fromObject=function(t){var n=new e;return null!=t&&(null!=t.header&&(n.header=t.header),null!=t.footer&&(n.footer=t.footer)),n},e}();e.PrintOptions=t}(e.printing||(e.printing={}))}(e.model||(e.model={}))}(r||(r={})),function(e){var n,i,r;n=e.model||(e.model={}),i=n._options||(n._options={}),r=function(r){function o(){var e=r.call(this)||this;if((o._defaults=new i.vo.OptionsValueObject).setDefaults(),o._options=new i.vo.OptionsValueObject,o.instance)throw Error("Singleton");return e}return h(o,r),o.getInstance=function(){return s.nullOrUndefined(o.instance)&&(o.instance=new o),o.instance},o.dispose=function(){o._globals._defaults=null,o._globals=null,o._options=null,o._defaults=null,o.instance=null},o.setGlobalOptions=function(e){o._globals=e},o.getOptions=function(e,t){void 0===e&&(e=!1),void 0===t&&(t=!1);var n=new i.vo.OptionsValueObject;return e&&n.mergeWith(o._defaults),t&&n.mergeWith(o._globals),n.mergeWith(o._options),e||n.cleanFromDefaults(),n},o.clear=function(){this._options=new i.vo.OptionsValueObject},o.setOptions=function(t,n){if(void 0===n&&(n=!0),s.nullOrUndefined(o._options)||n){var r=o.configuratorOpened;(o._options=new i.vo.OptionsValueObject).configuratorOpened=r}r=i.vo.OptionsValueObject.toPlainObject(t);var a=!1;o.dispatchSuspended=!0;var l,u=o.getOptions(!0,!0);for(l in r)if(null!=u[l]&&r[l]!=u[l]&&(a=!0,o.optionAffectDataProvider(l))){o.optionAffectedDataProvider=!0;break}o._options.mergeWith(r),e.data_._structure.GenericHierarchy.DEFAULT_SORT_NAME=o.defaultHierarchySortName,o.dispatchSuspended=!1,a&&o.dispatchReportChange()},o.optionAffectDataProvider=function(e){return-1<o._optionsAffectDataProvider.indexOf(e)},o.getOption=function(e){return null!=o._options[e]?o._options[e]:o._globals&&null!=o._globals[e]?o._globals[e]:o._defaults[e]},Object.defineProperty(o,"configuratorOpened",{get:function(){return o._options.configuratorOpened},set:function(e){o._options.configuratorOpened=e},enumerable:!0,configurable:!0}),Object.defineProperty(o,"configuratorActive",{get:function(){return o.getOption("configuratorActive")},set:function(e){o._options.configuratorActive!=e&&(o.configuratorOpened=o._options.configuratorActive=e,o.dispatchReportChange())},enumerable:!0,configurable:!0}),Object.defineProperty(o,"configuratorButton",{get:function(){return o.getOption("configuratorButton")},set:function(e){o._options.configuratorButton!=e&&(o._options.configuratorButton=e,o.dispatchReportChange())},enumerable:!0,configurable:!0}),Object.defineProperty(o,"classicView",{get:function(){return o.getOption("gridType")==e._view.grid.GridType.CLASSIC},set:function(t){o._options.gridType!=e._view.grid.GridType.CLASSIC&&(o._options.gridType=e._view.grid.GridType.CLASSIC,o.optionAffectedDataProvider=o.optionAffectDataProvider("gridType"),o.dispatchReportChange())},enumerable:!0,configurable:!0}),Object.defineProperty(o,"flatView",{get:function(){return o.getOption("gridType")==e._view.grid.GridType.FLAT},set:function(t){o._options.gridType!=e._view.grid.GridType.FLAT&&(o._options.gridType=e._view.grid.GridType.FLAT,o.optionAffectedDataProvider=o.optionAffectDataProvider("gridType"),o.dispatchReportChange())},enumerable:!0,configurable:!0}),Object.defineProperty(o,"gridType",{get:function(){return o.getOption("gridType")},set:function(e){o._options.gridType!=e&&(o._options.gridType=e,o.dispatchReportChange())},enumerable:!0,configurable:!0}),Object.defineProperty(o,"gridTitle",{get:function(){return o.getOption("gridTitle")},set:function(e){o._options.gridTitle!=e&&(o._options.gridTitle=e,o.dispatchReportChange())},enumerable:!0,configurable:!0}),Object.defineProperty(o,"showFilter",{get:function(){return o.getOption("showFilter")},set:function(e){o._options.showFilter!=e&&(o._options.showFilter=e,o.dispatchReportChange())},enumerable:!0,configurable:!0}),Object.defineProperty(o,"showDefaultSlice",{get:function(){return o.getOption("showDefaultSlice")},set:function(e){o._options.showDefaultSlice!=e&&(o._options.showDefaultSlice=e,o.dispatchReportChange())},enumerable:!0,configurable:!0}),Object.defineProperty(o,"showEmptyData",{get:function(){return o.getOption("showEmptyData")},set:function(e){o._options.showEmptyData!=e&&(o._options.showEmptyData=e,o.dispatchReportChange())},enumerable:!0,configurable:!0}),Object.defineProperty(o,"showAggregations",{get:function(){return o.getOption("showAggregations")},set:function(e){o._options.showAggregations!=e&&(o._options.showAggregations=e,o.dispatchReportChange())},enumerable:!0,configurable:!0}),Object.defineProperty(o,"showHierarchyCaptions",{get:function(){return o.getOption("showHierarchyCaptions")},set:function(e){o._options.showHierarchyCaptions!=e&&(o._options.showHierarchyCaptions=e,o.dispatchReportChange())},enumerable:!0,configurable:!0}),Object.defineProperty(o,"showExtraTotalLabels",{get:function(){return o.getOption("showExtraTotalLabels")},set:function(e){o._options.showExtraTotalLabels!=e&&(o._options.showExtraTotalLabels=e,o.dispatchReportChange())},enumerable:!0,configurable:!0}),Object.defineProperty(o,"showHeaders",{get:function(){return o.getOption("showHeaders")},set:function(e){o._options.showHeaders!=e&&(o._options.showHeaders=e,o.dispatchReportChange())},enumerable:!0,configurable:!0}),Object.defineProperty(o,"sorting",{get:function(){return o.getOption("sorting")},set:function(e){o._options.sorting!=e&&(o._options.sorting=e,o.dispatchReportChange())},enumerable:!0,configurable:!0}),Object.defineProperty(o,"drillThrough",{get:function(){return o.getOption("drillThrough")},set:function(e){o._options.drillThrough!=e&&(o._options.drillThrough=e,o.dispatchReportChange())},enumerable:!0,configurable:!0}),Object.defineProperty(o,"showDrillThroughConfigurator",{get:function(){return o.getOption("showDrillThroughConfigurator")},set:function(e){o._options.showDrillThroughConfigurator!=e&&(o._options.showDrillThroughConfigurator=e,o.dispatchReportChange())},enumerable:!0,configurable:!0}),Object.defineProperty(o,"showHierarchies",{get:function(){return o.getOption("showHierarchies")},set:function(e){o._options.showHierarchies!=e&&(o._options.showHierarchies=e,o.dispatchReportChange())},enumerable:!0,configurable:!0}),Object.defineProperty(o,"saveAllFormats",{get:function(){return o.getOption("saveAllFormats")},set:function(e){o._options.saveAllFormats!=e&&(o._options.saveAllFormats=e,o.dispatchReportChange())},enumerable:!0,configurable:!0}),Object.defineProperty(o,"showTotals",{get:function(){return o.getOption("showTotals")},set:function(e){o._options.showTotals!=e&&(o._options.showTotals=e,o.optionAffectedDataProvider=o.optionAffectDataProvider("showTotals"),o.dispatchReportChange())},enumerable:!0,configurable:!0}),Object.defineProperty(o,"showAutoCalculationBar",{get:function(){return o.getOption("showAutoCalculationBar")},set:function(e){if(o._options.showAutoCalculationBar!=e){var t=!s.nullOrUndefined(o._options.showAutoCalculationBar);o._options.showAutoCalculationBar=e,t&&o.dispatchReportChange()}},enumerable:!0,configurable:!0}),Object.defineProperty(o,"showGrandTotals",{get:function(){return o.getOption("showGrandTotals")},set:function(e){o._options.showGrandTotals!=e&&(o._options.showGrandTotals=e,o.optionAffectedDataProvider=o.optionAffectDataProvider("showGrandTotals"),o.dispatchReportChange())},enumerable:!0,configurable:!0}),Object.defineProperty(o,"datePattern",{get:function(){return o.getOption("datePattern")},set:function(e){o._options.datePattern!=e&&(o._options.datePattern=e,o.dispatchReportChange())},enumerable:!0,configurable:!0}),Object.defineProperty(o,"dateTimePattern",{get:function(){return o.getOption("dateTimePattern")},set:function(e){o._options.dateTimePattern!=e&&(o._options.dateTimePattern=e,o.dispatchReportChange())},enumerable:!0,configurable:!0}),Object.defineProperty(o,"showCalculatedValuesButton",{get:function(){return o.getOption("showCalculatedValuesButton")},set:function(e){o._options.showCalculatedValuesButton!=e&&(o._options.showCalculatedValuesButton=e,o.dispatchReportChange())},enumerable:!0,configurable:!0}),Object.defineProperty(o,"selectEmptyCells",{get:function(){return o.getOption("selectEmptyCells")},set:function(e){o._options.selectEmptyCells!=e&&(o._options.selectEmptyCells=e,o.dispatchReportChange())},enumerable:!0,configurable:!0}),Object.defineProperty(o,"defaultHierarchySortName",{get:function(){return o.getOption("defaultHierarchySortName")},set:function(e){o._options.defaultHierarchySortName!=e&&(o._options.defaultHierarchySortName=e,o.dispatchReportChange())},enumerable:!0,configurable:!0}),Object.defineProperty(o,"showAggregationLabels",{get:function(){return o.getOption("showAggregationLabels")},set:function(e){o._options.showAggregationLabels!=e&&(o._options.showAggregationLabels=e,o.dispatchReportChange())},enumerable:!0,configurable:!0}),Object.defineProperty(o,"grandTotalsPosition",{get:function(){return o.getOption("grandTotalsPosition")},set:function(e){o._options.grandTotalsPosition!=e&&(o._options.grandTotalsPosition=e,o.optionAffectedDataProvider=o.optionAffectDataProvider("grandTotalsPosition"),o.dispatchReportChange())},enumerable:!0,configurable:!0}),Object.defineProperty(o,"showReportFiltersArea",{get:function(){return o.getOption("showReportFiltersArea")},set:function(e){o._options.showReportFiltersArea!=e&&(o._options.showReportFiltersArea=e,o.dispatchReportChange())},enumerable:!0,configurable:!0}),o.dispatchReportChange=function(){o.dispatchSuspended||o.getInstance().dispatch(new t._Event(n._state.StateEvent.REPORT_CHANGED))},o.optionAffectedDataProvider=!1,o.dispatchSuspended=!1,o._optionsAffectDataProvider=["gridType","showTotals","showGrandTotals","grandTotalsPosition"],o.defaultDatePattern="dd/MM/yyyy",o.defaultDateTimePattern="dd/MM/yyyy HH:mm:ss",o}(t.EventDispatcher),i.OptionsManager=r}(r||(r={})),function(e){var t;!function(t){!function(t){var n=function(){function t(){this._defaults={configuratorActive:!1,configuratorOpened:!1,configuratorButton:!0,gridType:e._view.grid.GridType.COMPACT,gridTitle:"",showFilter:!0,showDefaultSlice:!0,showEmptyData:!0,showAggregations:!0,showHierarchyCaptions:!0,drillthroughMaxRows:1e3,showHeaders:!0,showReportFiltersArea:!0,showExtraTotalLabels:!1,drillThrough:!0,showDrillThroughConfigurator:!0,sorting:"on",showHierarchies:!0,saveAllFormats:!1,showTotals:"on",showGrandTotals:"on",showAutoCalculationBar:!0,datePattern:"dd/MM/yyyy",dateTimePattern:"dd/MM/yyyy HH:mm:ss",showCalculatedValuesButton:!0,selectEmptyCells:!0,defaultHierarchySortName:e.data_.consts.SortType.ASC,showAggregationLabels:!0,grandTotalsPosition:"top"}}return t.prototype.setDefaults=function(){for(var e in this._defaults)this[e]=this._defaults[e]},t.prototype.cleanFromDefaults=function(){for(var e in this._defaults)this[e]==this._defaults[e]&&(this[e]=void 0)},t.fromObject=function(e){var n=new t;return null==e||(null!=e.options&&(e=e.options),e instanceof t||(e=t.toPlainObject(e)),null!=e.configuratorActive&&(n.configuratorActive=e.configuratorActive),null!=e.configuratorButton&&(n.configuratorButton=e.configuratorButton),null!=e.gridTitle&&(n.gridTitle=e.gridTitle),null!=e.gridType&&(n.gridType=e.gridType),null!=e.showFilter&&(n.showFilter=e.showFilter),null!=e.showDefaultSlice&&(n.showDefaultSlice=e.showDefaultSlice),null!=e.showEmptyData&&(n.showEmptyData=e.showEmptyData),null!=e.showAggregations&&(n.showAggregations=e.showAggregations),null!=e.showHierarchyCaptions&&(n.showHierarchyCaptions=e.showHierarchyCaptions),null!=e.showHeaders&&(n.showHeaders=e.showHeaders),null!=e.showReportFiltersArea&&(n.showReportFiltersArea=e.showReportFiltersArea),null!=e.showExtraTotalLabels&&(n.showExtraTotalLabels=e.showExtraTotalLabels),null!=e.drillThrough&&(n.drillThrough=e.drillThrough),null!=e.showDrillThroughConfigurator&&(n.showDrillThroughConfigurator=e.showDrillThroughConfigurator),null!=e.sorting&&(n.sorting=e.sorting,"true"==n.sorting.toString().toLowerCase()&&(n.sorting="on"),"false"==n.sorting.toString().toLowerCase()&&(n.sorting="off")),null!=e.showHierarchies&&(n.showHierarchies=e.showHierarchies),null!=e.saveAllFormats&&(n.saveAllFormats=e.saveAllFormats),null!=e.showTotals&&(n.showTotals=e.showTotals,"true"==n.showTotals.toString().toLowerCase()&&(n.showTotals="on"),"false"==n.showTotals.toString().toLowerCase()&&(n.showTotals="off")),null!=e.showGrandTotals&&(n.showGrandTotals=e.showGrandTotals,"true"==n.showGrandTotals.toString().toLowerCase()&&(n.showGrandTotals="on"),"false"==n.showGrandTotals.toString().toLowerCase()&&(n.showGrandTotals="off")),null!=e.showAutoCalculationBar&&(n.showAutoCalculationBar=e.showAutoCalculationBar),null!=e.datePattern&&(n.datePattern=e.datePattern),null!=e.dateTimePattern&&(n.dateTimePattern=e.dateTimePattern),null!=e.showCalculatedValuesButton&&(n.showCalculatedValuesButton=e.showCalculatedValuesButton),null!=e.selectEmptyCells&&(n.selectEmptyCells=e.selectEmptyCells),null!=e.defaultHierarchySortName&&(n.defaultHierarchySortName=e.defaultHierarchySortName),null!=e.showAggregationLabels&&(n.showAggregationLabels=e.showAggregationLabels),null!=e.grandTotalsPosition&&(n.grandTotalsPosition=e.grandTotalsPosition)),n},t.toPlainObject=function(e){var t={};return null==e||(null!=e.configuratorActive&&(t.configuratorActive=e.configuratorActive),null!=e.configuratorButton&&(t.configuratorButton=e.configuratorButton),null!=e.showAggregations&&(t.showAggregations=e.showAggregations),null!=e.showCalculatedValuesButton&&(t.showCalculatedValuesButton=e.showCalculatedValuesButton),null!=e.drillThrough&&(t.drillThrough=e.drillThrough),null!=e.showDrillThroughConfigurator&&(t.showDrillThroughConfigurator=e.showDrillThroughConfigurator),null!=e.sorting&&(t.sorting=e.sorting),null!=e.datePattern&&(t.datePattern=e.datePattern),null!=e.dateTimePattern&&(t.dateTimePattern=e.dateTimePattern),null!=e.saveAllFormats&&(t.saveAllFormats=e.saveAllFormats),null!=e.showDefaultSlice&&(t.showDefaultSlice=e.showDefaultSlice),null!=e.showEmptyData&&(t.showEmptyData=e.showEmptyData),null!=e.defaultHierarchySortName&&(t.defaultHierarchySortName=e.defaultHierarchySortName),null!=e.selectEmptyCells&&(t.selectEmptyCells=e.selectEmptyCells),null!=e.showAggregationLabels&&(t.showAggregationLabels=e.showAggregationLabels),null!=e.classicView&&(t.classicView=e.classicView),null!=e.flatView&&(t.flatView=e.flatView),null!=e.gridType&&(t.gridType=e.gridType),null!=e.gridTitle&&(t.gridTitle=e.gridTitle),null!=e.showFilter&&(t.showFilter=e.showFilter),null!=e.showHeaders&&(t.showHeaders=e.showHeaders),null!=e.showTotals&&(t.showTotals=e.showTotals),null!=e.showGrandTotals&&(t.showGrandTotals=e.showGrandTotals),null!=e.showAutoCalculationBar&&(t.showAutoCalculationBar=e.showAutoCalculationBar),null!=e.grandTotalsPosition&&(t.grandTotalsPosition=e.grandTotalsPosition),null!=e.showExtraTotalLabels&&(t.showExtraTotalLabels=e.showExtraTotalLabels),null!=e.showHierarchies&&(t.showHierarchies=e.showHierarchies),null!=e.showHierarchyCaptions&&(t.showHierarchyCaptions=e.showHierarchyCaptions),null!=e.drillthroughMaxRows&&(t.drillthroughMaxRows=e.drillthroughMaxRows),null!=e.showReportFiltersArea&&(t.showReportFiltersArea=e.showReportFiltersArea),null!=e.grid&&(null!=(e=e.grid).type&&(t.gridType=e.type),null!=e.title&&(t.gridTitle=e.title),null!=e.showFilter&&(t.showFilter=e.showFilter),null!=e.showHeaders&&(t.showHeaders=e.showHeaders),null!=e.showAutoCalculationBar&&(t.showAutoCalculationBar=e.showAutoCalculationBar),null!=e.showTotals&&(t.showTotals=e.showTotals,"true"==t.showTotals.toString().toLowerCase()&&(t.showTotals="on"),"false"==t.showTotals.toString().toLowerCase()&&(t.showTotals="off")),null!=e.showGrandTotals&&(t.showGrandTotals=e.showGrandTotals,"true"==t.showGrandTotals.toString().toLowerCase()&&(t.showGrandTotals="on"),"false"==t.showGrandTotals.toString().toLowerCase()&&(t.showGrandTotals="off")),null!=e.grandTotalsPosition&&(t.grandTotalsPosition=e.grandTotalsPosition),null!=e.showExtraTotalLabels&&(t.showExtraTotalLabels=e.showExtraTotalLabels),null!=e.showHierarchies&&(t.showHierarchies=e.showHierarchies),null!=e.showHierarchyCaptions&&(t.showHierarchyCaptions=e.showHierarchyCaptions),null!=e.drillthroughMaxRows&&(t.drillthroughMaxRows=e.drillthroughMaxRows),null!=e.showReportFiltersArea&&(t.showReportFiltersArea=e.showReportFiltersArea))),t},t.prototype.toObject=function(){var t={},n={};return this.gridType===e._view.grid.GridType.COMPACT?n.type=e._view.grid.GridType.COMPACT:this.gridType===e._view.grid.GridType.CLASSIC?n.type=e._view.grid.GridType.CLASSIC:this.gridType===e._view.grid.GridType.FLAT&&(n.type=e._view.grid.GridType.FLAT),null!=this.gridTitle&&(n.title=this.gridTitle),null!=this.showFilter&&(n.showFilter=this.showFilter),null!=this.showHeaders&&(n.showHeaders=this.showHeaders),null!=this.showTotals&&(n.showTotals=this.showTotals),null!=this.showGrandTotals&&(n.showGrandTotals=this.showGrandTotals),null!=this.grandTotalsPosition&&(n.grandTotalsPosition=this.grandTotalsPosition),null!=this.showExtraTotalLabels&&(n.showExtraTotalLabels=this.showExtraTotalLabels),null!=this.showHierarchies&&(n.showHierarchies=this.showHierarchies),null!=this.showHierarchyCaptions&&(n.showHierarchyCaptions=this.showHierarchyCaptions),null!=this.drillthroughMaxRows&&(n.drillthroughMaxRows=this.drillthroughMaxRows),null!=this.showReportFiltersArea&&(n.showReportFiltersArea=this.showReportFiltersArea),null!=this.showAutoCalculationBar&&(n.showAutoCalculationBar=this.showAutoCalculationBar),s.ObjectUtils.isEmptyObject(n)||(t.grid=n),null!=this.configuratorActive&&(t.configuratorActive=this.configuratorActive),null!=this.configuratorButton&&(t.configuratorButton=this.configuratorButton),null!=this.showAggregations&&(t.showAggregations=this.showAggregations),null!=this.showCalculatedValuesButton&&(t.showCalculatedValuesButton=this.showCalculatedValuesButton),null!=this.drillThrough&&(t.drillThrough=this.drillThrough),null!=this.showDrillThroughConfigurator&&(t.showDrillThroughConfigurator=this.showDrillThroughConfigurator),null!=this.sorting&&(t.sorting=this.sorting),null!=this.datePattern&&(t.datePattern=this.datePattern),null!=this.dateTimePattern&&(t.dateTimePattern=this.dateTimePattern),null!=this.saveAllFormats&&(t.saveAllFormats=this.saveAllFormats),null!=this.showDefaultSlice&&(t.showDefaultSlice=this.showDefaultSlice),null!=this.showEmptyData&&(t.showEmptyData=this.showEmptyData),null!=this.defaultHierarchySortName&&(t.defaultHierarchySortName=this.defaultHierarchySortName),null!=this.selectEmptyCells&&(t.selectEmptyCells=this.selectEmptyCells),null!=this.showAggregationLabels&&(t.showAggregationLabels=this.showAggregationLabels),t},t.prototype.mergeWith=function(e){for(var t in e)this._defaults.hasOwnProperty(t)&&null!=e[t]&&(this[t]=e[t])},t}();t.OptionsValueObject=n}(t.vo||(t.vo={}))}((t=e.model||(e.model={}))._options||(t._options={}))}(r||(r={})),function(e){!function(e){var n,i;n=e.condition||(e.condition={}),i=function(t){function n(){var e=t.call(this)||this;if(null!=n.instance)throw Error("Singleton");return e}return h(n,t),n.getInstance=function(){return null==n.instance&&(n.instance=new n),n.instance},n.dispose=function(){n.conditions=null,n.instance=null},n.add=function(e){null!=e&&(n.conditions.addItem(e.id,e),this.dispatchReportChange())},n.get=function(e){return n.conditions.getItem(e)},n.remove=function(e){n.conditions.removeItem(e),this.dispatchReportChange()},n.removeAll=function(){n.conditions=new s.AssociativeArray,this.dispatchReportChange()},n.getObjects=function(){for(var e=[],t=0;t<n.conditions.length;t++){var i=n.conditions.getItemAt(t);i.isUpdate||e.push(i.toObject())}return e},n.dispatchReportChange=function(){n.getInstance().dispatchWith(e._state.StateEvent.REPORT_CHANGED)},n.conditions=new s.AssociativeArray,n}(t.EventDispatcher),n.ConditionManager=i}(e.model||(e.model={}))}(r||(r={})),function(e){var t;!function(t){!function(t){var n=function(){function t(){this.id="",this.column=this.row=-1,this.formula=this.hierarchy=this.member=this.measure="",this.params=[]}return Object.defineProperty(t.prototype,"isUpdate",{get:function(){return-1<this.formula.toLowerCase().indexOf(e.data_.consts.FunctionName.UPDATE_DIFFERENCE)||-1<this.formula.toLowerCase().indexOf(e.data_.consts.FunctionName.UPDATE_PERCENT)},enumerable:!0,configurable:!0}),t.prototype.toObject=function(){var e={};return e.id=this.id,e.row=this.row,e.column=this.column,void 0!==this.isTotal&&(e.isTotal=this.isTotal),e.measure=this.measure,e.member=this.member,e.hierarchy=this.hierarchy,e.formula=this.formula,null!=this.format&&(e.format=this.format.toObject(),e.formatCSS=this.format.toString()),e},t.toObject=function(e){return e.toObject()},t.fromObject=function(e){var n=new t;return n.id=null!=e.id?e.id:s.StringUtils.generateID(),null!=e.row&&(n.row=e.row),null!=e.column&&(n.column=e.column),null!=e.isTotal&&(1!=e.isTotal&&1!=e.isTotal||(n.isTotal=!0),0!=e.isTotal&&0!=e.isTotal||(n.isTotal=!1)),null!=e.measure&&(n.measure=e.measure),n.formula=e.formula,null!=e.trueStyle&&null==e.format&&(e.format=e.trueStyle),null!=e.format&&(n.format="string"==typeof e.format?i.fromString(e.format):i.fromObject(e.format)),e=new s.Lexer,n.params=e.parse(n.formula),null==n.params?null:n},t}();t.ConditionValueObject=n;var i=function(){function e(){}return e.fromObject=function(t){var n=new e;return null==t||(null!=t.backgroundColor&&(n.backgroundColor=e.color(t.backgroundColor)),null!=t.color&&(n.color=e.color(t.color)),null!=t.fontFamily&&(n.fontFamily=t.fontFamily),null!=t.fontSize&&(n.fontSize=e.size(t.fontSize)),null!=t.italic&&t.italic&&(n.fontStyle="italic"),null!=t.fontStyle&&(n.fontStyle=t.fontStyle),null!=t.bold&&t.bold&&(n.fontWeight="bold"),null!=t.fontWeight&&(n.fontWeight=t.fontWeight),null!=t.padding&&(n.padding=e.size(Math.round(1.5*t.padding))),null!=t.textAlign&&(n.textAlign=t.textAlign),null!=t.textIndent&&(n.textIndent=e.size(t.textIndent))),n},e.fromString=function(t){var n={};if(null!=(t=t.split(";")))for(var i=0;i<t.length;i++){var r=t[i].split(":")[0],o=t[i].split(":")[1];""!=r&&(n[r]=o)}return e.fromObject(n)},e.prototype.toObject=function(){var e={};return null!=this.backgroundColor&&(e.backgroundColor=this.backgroundColor),null!=this.color&&(e.color=this.color),null!=this.fontFamily&&(e.fontFamily=this.fontFamily),null!=this.fontSize&&(e.fontSize=this.fontSize),null!=this.fontStyle&&(e.fontStyle=this.fontStyle),null!=this.fontWeight&&(e.fontWeight=this.fontWeight),null!=this.padding&&(e.padding=this.padding),null!=this.textAlign&&(e.textAlign=this.textAlign),null!=this.textIndent&&(e.textIndent=this.textIndent),e},e.prototype.toCSSObject=function(){var e={};return null!=this.backgroundColor&&(e["background-color"]=this.backgroundColor),null!=this.color&&(e.color=this.color),null!=this.fontFamily&&(e["font-family"]=this.fontFamily),null!=this.fontSize&&(e["font-size"]=this.fontSize),null!=this.fontStyle&&(e["font-style"]=this.fontStyle),null!=this.fontWeight&&(e["font-weight"]=this.fontWeight),null!=this.padding&&(e.padding=this.padding),null!=this.textAlign&&(e["text-align"]=this.textAlign),null!=this.textIndent&&(e["text-indent"]=this.textIndent),e},e.prototype.toString=function(){var e,t="",n=this.toCSSObject();for(e in n)t+=e+":"+n[e]+";";return t},e.color=function(e){return e.replace("0x","#")},e.size=function(e){return"number"==typeof e?e+"px":"string"==typeof e&&0>e.indexOf("px")?e.trim()+"px":e},e}();t.CSSValueObject=i}(t.vo||(t.vo={}))}((t=e.model||(e.model={})).condition||(t.condition={}))}(r||(r={})),function(e){var n,i,r;i=(n=e.model||(e.model={})).sizes||(n.sizes={}),r=function(t){function i(){var e=t.call(this)||this;if(null!=i.instance)throw Error("Singleton");return e}return h(i,t),i.getInstance=function(){return null==i.instance&&(i.instance=new i),i.instance},i.dispose=function(){i.rowFilterSizes=null,i.rowHeaderSizes=null,i.rowSizes=null,i.rowSizesByIdx=null,i._rowSizesNamed=null,i._rowSizesNamedToApply=null,i.columnHeaderSizes=null,i.columnSizes=null,i.columnSizesByIdx=null,i._columnSizesNamed=null,i._columnSizesNamedToApply=null,i.instance=null},Object.defineProperty(i,"rowSizesNamed",{get:function(){return this._rowSizesNamed=i.toNamedSizes(e.data_.consts.AxisName.ROWS_AXIS)},enumerable:!0,configurable:!0}),Object.defineProperty(i,"columnSizesNamed",{get:function(){return this._columnSizesNamed=i.toNamedSizes(e.data_.consts.AxisName.COLUMNS_AXIS)},enumerable:!0,configurable:!0}),i.clear=function(){i.rowSizes={},i.columnSizes={},i._rowSizesNamedToApply={},i._rowSizesNamed={},i._columnSizesNamedToApply={},i._columnSizesNamed={},i.rowSizesByIdx={},i.columnSizesByIdx={},i.rowHeaderSizes={},i.columnHeaderSizes={},i.rowFilterSizes={}},i.applySizes=function(e,t,n,r,o,s,a){i.basedOnNamesArray(e)||i.basedOnNamesArray(t)?(i._rowSizesNamedToApply=i.convertSizes(e),i._columnSizesNamedToApply=i.convertSizes(t),i.processSizes()):(i.basedOnNamesObject(e)||i.basedOnNamesObject(t))&&(i._rowSizesNamedToApply=e,i._columnSizesNamedToApply=t,i.processSizes()),i.rowSizesByIdx=n,i.columnSizesByIdx=r,i.rowHeaderSizes=o,i.columnHeaderSizes=s,i.rowFilterSizes=a},i.processSizes=function(){n.PivotModel.getInstance().state_.reportState==n._state.StateEvent.REPORT_COMPLETE?this.onDataLoaded():e.data_.Cube.getInstance().addEventListener(e.data_.DataEvent.QUERY_COMPLETE,i.onDataLoaded,1)},i.basedOnNamesArray=function(e){var t,n=/[A-Za-z]+/;for(t in e)if(-1<e[t].toString().search(n))return!0;return!1},i.basedOnNamesObject=function(e){var t,n=/[A-Za-z]+/;for(t in e)if(-1<t.toString().search(n))return!0;return!1},i.convertSizes=function(e){var t={};if(null!=e)for(var n in e){var i=e[n];if(i instanceof Array&&0<i.length){var r=parseInt(i.pop());t[i.toString()]=r}}return t},i.onDataLoaded=function(){e.data_.Cube.getInstance().removeEventListener(e.data_.DataEvent.QUERY_COMPLETE,i.onDataLoaded),i.rowSizes=i.fromNamedSizes(e.data_.consts.AxisName.ROWS_AXIS),i._rowSizesNamedToApply={},i.columnSizes=i.fromNamedSizes(e.data_.consts.AxisName.COLUMNS_AXIS),i._columnSizesNamedToApply={}},i.fromNamedSizes=function(t){var r,o={},s=t==e.data_.consts.AxisName.ROWS_AXIS?i._rowSizesNamedToApply:i._columnSizesNamedToApply;for(r in s){var a,l=r.split(","),u=s[r],c=e.data_.Cube.getInstance().slice_.axes.getItem(t).hasMeasures;c&&!n._options.OptionsManager.flatView&&(a=l[l.length-1],l.splice(l.length-1,1));for(var h=!1,d=[],A=0;A<l.length;A++)if(n._options.OptionsManager.flatView)if(t==e.data_.consts.AxisName.ROWS_AXIS)d.push(l[A]);else{var p=l[A];if(-1==(p=e.data_.Cube.getInstance().localDataStorage.keys.indexOf(p))){h=!0;break}d.push(p)}else{if(p=l[A],null==(p=(t==e.data_.consts.AxisName.ROWS_AXIS?e.data_.Cube.getInstance().slice_.rowsOnly.getItemAt(A):e.data_.Cube.getInstance().slice_.columnsOnly.getItemAt(A)).members.getItem(p))){h=!0;break}d.push(p.isAll?"":p.ordinal.toString())}if(!h){if(c&&!n._options.OptionsManager.flatView){if(l=e.data_.Cube.getInstance().slice_.measures_.indexOf(a),""!=a&&-1==l)continue;d.push(l)}o[d.toString()]=u}}return o},i.toNamedSizes=function(t){var r,o={},s=t==e.data_.consts.AxisName.ROWS_AXIS?i.rowSizes:i.columnSizes;for(r in s){var a,l=r.split(","),u=s[r],c=e.data_.Cube.getInstance().slice_.axes.getItem(t).hasMeasures;c&&!n._options.OptionsManager.flatView&&(a=parseInt(l[l.length-1]),l.splice(l.length-1,1));for(var h=!1,d=[],A=0;A<l.length;A++)if(n._options.OptionsManager.flatView)if(t==e.data_.consts.AxisName.ROWS_AXIS)d.push(l[A]);else{var p=""===l[A]?0:parseInt(l[A]);if(null==(p=e.data_.Cube.getInstance().localDataStorage.keys[p])){h=!0;break}d.push(p)}else{p=""===l[A]?0:parseInt(l[A]);var f=t==e.data_.consts.AxisName.ROWS_AXIS?e.data_.Cube.getInstance().slice_.rowsOnly.getItemAt(A):e.data_.Cube.getInstance().slice_.columnsOnly.getItemAt(A);if(null==f){h=!0;break}if(null==(p=f.members.getItemAt(p))){h=!0;break}d.push(p.uniqueName)}if(!h){if(c&&!n._options.OptionsManager.flatView){if(a>=e.data_.Cube.getInstance().slice_.measures_.length)continue;-1==a&&1==e.data_.Cube.getInstance().slice_.measures_.length&&(a=0),d.push(e.data_.Cube.getInstance().slice_.measures_.getKeyAt(a))}o[d.toString()]=u}}return o},i.rowSizes={},i.columnSizes={},i._rowSizesNamedToApply={},i._rowSizesNamed={},i._columnSizesNamedToApply={},i._columnSizesNamed={},i.startTableRow=0,i.rowSizesByIdx={},i.columnSizesByIdx={},i.rowHeaderSizes={},i.columnHeaderSizes={},i.rowFilterSizes={},i}(t.EventDispatcher),i.SizesManager=r}(r||(r={})),function(e){var n,r,o;n=e.model||(e.model={}),r=n._export||(n._export={}),o=function(){function o(){}return o.run=function(i,r,a,l){var u=this;e.preloader(!0,n._labels.Labels.MESSAGE_PLEASE_WAIT,"...",!0,!0),o.clear(),o.grid=i,o.dataHeight=l,o.dataWidth=a,o.coords=i.gridLayout.coords,o.exportOptions=r,o.pdf=new jsPDF(r.pageOrientation,"mm","a4",!s.browserVersion().isMsie),o.pageHeight=o.fullPageHeight-2*o.PAGE_MARGIN,o.pageWidth=o.fullPageWidth-2*o.PAGE_MARGIN,o.totalColumnCount=o.grid.FIRST_DATA_COLUMN+a,o.totalRowCount=o.grid.FIRST_DATA_ROW+l,o.widthSize={},o.currentYPos=o.PAGE_MARGIN;try{o.calculateColumnCount(),o.getStyles(),o.createHeaderAndFooter(o.exportOptions.header,o.exportOptions.footer,(function(){return u.onHeaderAndFooterCreated()}))}catch(c){console.error("Export PDF error:",c),e.uialert(n._labels.Labels.MESSAGE_EXPORT_ERROR,n._labels.Labels.ERROR,e.AlertType.ERROR),e.preloader(!1),n.PivotModel.getInstance().dispatch(new t._Event(e.PivotEvent.EXPORT_COMPLETE)),o.clear()}},o.createHeaderAndFooter=function(t,n,s){try{o.headerHeight=0,o.footerHeight=0;var a=null==t,l=null==n;if(a&&l)s();else{if(!a){t=(t=t.replace(/##PAGE-NUMBER##/gi,(o.pageNumber+1).toString())).replace(/##CURRENT-DATE##/gi,(new Date).toLocaleString());var u=new i.UIElement("div");u.css("position","absolute"),u.css("background","white"),u.setWidth(o.mm2px(o.fullPageWidth-2*o.HEADER_FOOTER_MARGIN)),u.html(t),e._view.PivotView.stage.container.prepend(u),html2canvas(u.element).then((function(e){u.remove(),o.headerImage=e,o.headerHeight=o.px2mm(e.height),a=!0,l&&s()}))}if(!l){n=(n=n.replace(/##PAGE-NUMBER##/gi,(o.pageNumber+1).toString())).replace(/##CURRENT-DATE##/gi,(new Date).toLocaleString());var c=new i.UIElement("div");c.css("position","absolute"),c.css("background","white"),c.setWidth(o.mm2px(o.fullPageWidth-2*o.HEADER_FOOTER_MARGIN)),c.html(n),e._view.PivotView.stage.container.prepend(c),html2canvas(c.element).then((function(e){c.remove(),o.footerImage=e,o.footerHeight=o.px2mm(e.height),l=!0,a&&s()}))}}}catch(r){o.headerImage=null,o.headerHeight=0,o.footerImage=null,o.footerHeight=0,s()}},o.addHeader=function(e,t){e.addImage(t,"JPEG",o.HEADER_FOOTER_MARGIN,o.HEADER_FOOTER_MARGIN)},o.addFooter=function(e,t){e.addImage(t,"JPEG",o.HEADER_FOOTER_MARGIN,o.fullPageHeight-o.footerHeight-o.HEADER_FOOTER_MARGIN)},o.addHeaderAndFooter=function(){null!=o.headerImage&&o.addHeader(o.pdf,o.headerImage),null!=o.footerImage&&o.addFooter(o.pdf,o.footerImage),o.pageHeight=o.fullPageHeight,o.pageHeight-=0==o.headerHeight?o.PAGE_MARGIN:o.headerHeight+2*o.HEADER_FOOTER_MARGIN,o.pageHeight-=0==o.footerHeight?o.PAGE_MARGIN:o.footerHeight+2*o.HEADER_FOOTER_MARGIN,o.currentYPos=0==o.headerHeight?o.PAGE_MARGIN:o.headerHeight+2*o.HEADER_FOOTER_MARGIN},Object.defineProperty(o,"fullPageHeight",{get:function(){return"portrait"===o.exportOptions.pageOrientation?297:210},enumerable:!0,configurable:!0}),Object.defineProperty(o,"fullPageWidth",{get:function(){return"portrait"===o.exportOptions.pageOrientation?210:297},enumerable:!0,configurable:!0}),o.onHeaderAndFooterCreated=function(){o.addHeaderAndFooter(),o.addTitle(n._options.OptionsManager.gridTitle,o.pdf),s.nullOrEmpty(n._options.OptionsManager.gridTitle)||0!=o.pageNumber||(o.currentYPos+=5),o.preprocessData(),s.ThreadManager.addTask(o.generateRow,null,null,(function(){return o.onPdfGenerated()}))},o.addTitle=function(e,t){if(!s.nullOrEmpty(e)){t.setTextColor(0,0,0),t.setFontStyle("bold"),t.setFontSize(12);var n=12*t.getStringUnitWidth(e)/t.internal.scaleFactor;t.text(e,(t.internal.pageSize.width-n)/2,o.currentYPos)}},o.getStyles=function(){var t=o.grid.gridLayout,n=t.find("#wdr-data-sheet");o.cellStyle=e._view.grid.vo.StyleValueObject.fromClass(e._view.grid.vo.GridStyleName.CELL,n),o.totalCellStyle=e._view.grid.vo.StyleValueObject.fromClass(e._view.grid.vo.GridStyleName.CELL+" "+e._view.grid.vo.GridStyleName.TOTAL,n),o.rowHeaderCellStyle=e._view.grid.vo.StyleValueObject.fromClass(e._view.grid.vo.GridStyleName.CELL+" "+e._view.grid.vo.GridStyleName.HEADER+" "+e._view.grid.vo.GridStyleName.HEADER_ROW,i.UIElement.convert(t.element)),o.columnHeaderCellStyle=e._view.grid.vo.StyleValueObject.fromClass(e._view.grid.vo.GridStyleName.CELL+" "+e._view.grid.vo.GridStyleName.HEADER+" "+e._view.grid.vo.GridStyleName.HEADER_COLUMN,i.UIElement.convert(t.element)),o.filterHeaderCellStyle=e._view.grid.vo.StyleValueObject.fromClass(e._view.grid.vo.GridStyleName.CELL+" "+e._view.grid.vo.GridStyleName.HEADER+" "+e._view.grid.vo.GridStyleName.FILTER_HEADER,i.UIElement.convert(t.element))},o.getColumnWidth=function(e){return.9*((e=o.pixel2mm(o.grid.gridLayout.coords.getColWidth(e)))<o.pageWidth?e:o.pageWidth-1)},o.setDefaultCellStyle=function(t,n){if(null!=t&&t.isCustomized){var i=0<t.style.customStyleNames.length?e._view.grid.vo.StyleValueObject.fromClass(t.style.getCustomClassString()):e._view.grid.vo.StyleValueObject.fromString(t.style.getStyleString());i.merge(n),n=i}return n.color=n.color||"rgb(0,0,0)","rgb(33, 33, 33)"==n.backgroundColor&&(n.color="rgb(242, 242, 242)"),n.backgroundColor=n.backgroundColor||"rgb(0,0,0,0)",n.borderColor=n.borderColor||"rgb(222,222,222)",n.fontSize=n.fontSize||11,n},o.getOptionsForCell=function(t){return{fontSize:.85*t.fontSize,fontName:null==t.fontFamily?o.FONT_NAME:t.fontFamily,fontStyle:e._view.grid.vo.FontStylePDFType.getFontStyle(parseFloat(t.fontWeight))}},o.preprocessData=function(){o.heigthSize=Array(o.totalRowCount);for(var t,n=0,i=0,r=0;i<o.totalRowCount;){r=n=0;for(var s=.8*Math.max(o.px2mm(o.coords.getRowHeight(i)),6);n<o.totalColumnCount;){t=o.grid.gridLayout.getCell(i,n,!0,!0);var a=new e._view.grid.vo.StyleValueObject;if(a=o.cellStyle.clone(),a=o.setDefaultCellStyle(t,a),null!=t){var l=t.getLabel();"number"==typeof l&&(t.value=l,l+="",t.numeric=!0),l=l.replace(/<(?:.|\n)*?>/gi,""),t=null!=o.widthSize&&null!=o.widthSize[n]?o.widthSize[n]:o.getColumnWidth(n),a=o.pdf.splitTextToSize(l,t,o.getOptionsForCell(a)),r=(a=(a=1>(a=o.px2mm(1<a.length?a.length*(11+2*o.PADDING)-2*o.PADDING:11*a.length-o.PADDING)/s)?s:(a+1)*s)>o.pageHeight/2?(o.pageHeight-1)/2:a)>r?a:r}n++}o.heigthSize[i]=r,i++}},o.generateRow=function(){if(o._addingHeaderFooter)return!1;for(var t=s.getTimer(),i=0;i<o.BLOCK_SIZE;i++){if(o.pageIsFilled&&(o.addNewPage(),o._addingHeaderFooter))return!1;var r,a=0,l=o.PAGE_MARGIN,u=(a=!1,""),c=o.currentRowIdx-o.currentStartRowIdx<o.grid.FIRST_DATA_ROW&&o.currentRowIdx>o.grid.START_HEADERS_COLUMN?o.currentRowIdx-o.currentStartRowIdx:o.currentRowIdx,h=o.heigthSize[c];for(o.currentColIdx=o.currentStartColIdx;o.currentColIdx<o.currentColumnCount+o.currentStartColIdx;){if(r=(a=!n._options.OptionsManager.flatView&&o.currentColIdx==o.currentStartColIdx&&o.currentColIdx>o.grid.START_HEADERS_COLUMN)?o.grid.START_HEADERS_COLUMN:o.currentColIdx,o.allRowsGenerated()||!(o.rowsHeightSum+h<=o.pageHeight)){o.pageIsFilled=!0;break}if(.9*(l+(a=null!=o.widthSize&&null!=o.widthSize[r]?o.widthSize[r]:o.getColumnWidth(r)))>o.pageWidth)break;r=o.grid.gridLayout.getCell(c,r,!0,!0),"number"==typeof(u=s.nullOrUndefined(r)?"":r.getLabel())&&(r.value=u,u+="",r.numeric=!0);var d=(u=u.replace(/<(?:.|\n)*?>/gi,"")).match(/&#(\d{3,4});/gi);if(d)for(var A,p=0;p<d.length;p++)A=parseInt(d[p].substring(2,d[p].length-1)),u=u.replace(d[p],String.fromCharCode(A));d=[u],p=new e._view.grid.vo.StyleValueObject,null!=r&&r.isRowHeader?(p=o.rowHeaderCellStyle.clone(),p=o.setDefaultCellStyle(r,p),d=o.pdf.splitTextToSize(u,a,o.getOptionsForCell(p))):null!=r&&r.isColumnHeader?(p=o.columnHeaderCellStyle.clone(),p=o.setDefaultCellStyle(r,p),d=o.pdf.splitTextToSize(u,a,o.getOptionsForCell(p))):null!=r&&r.isFilterHeader?(p=o.filterHeaderCellStyle.clone(),p=o.setDefaultCellStyle(r,p)):null!=r&&r.isTotal&&""!=r.getLabel()?(p=o.totalCellStyle.clone(),p=o.setDefaultCellStyle(r,p)):(p=o.cellStyle.clone(),p=o.setDefaultCellStyle(r,p),d=o.pdf.splitTextToSize(u,a,o.getOptionsForCell(p)));var f=o.px2mm(1<(A=d.length)?d.length*(p.fontSize+2*o.PADDING)-2*o.PADDING:d.length*p.fontSize-o.PADDING);f>o.pageHeight/2&&(f=(o.pageHeight-20)/2,A=Math.floor(o.mm2px(f)/(p.fontSize+2*o.PADDING))),p.fontSize*=.7;var g=e._view.grid.vo.StyleValueObject.parseRGB(p.backgroundColor);if(o.pdf.setFillColor(g[0],g[1],g[2],0!=g[3]?void 0:0),g=e._view.grid.vo.StyleValueObject.parseRGB(p.borderColor),o.pdf.setDrawColor(g[0],g[1],g[2],0!=g[3]?void 0:0),g=e._view.grid.vo.StyleValueObject.parseRGB(p.color),o.pdf.setTextColor(g[0],g[1],g[2]),o.pdf.setFontStyle("bold"==p.fontWeight?"bold":"normal"),o.pdf.setFontSize(p.fontSize),o.pdf.rect(l,o.currentYPos,a,h,"FD"),f=o.currentYPos+(h-f)/2+o.PADDING,"right"==p.textAlign)if(1<d.length)for(i=0;i<A;i++)o.pdf.text(d[i],l+a-o.PADDING,f,null,null,"right"),f+=2*o.PADDING;else o.pdf.text(u,l+a-o.PADDING,f,null,null,"right");else if(1<d.length)for(i=0;i<A;i++)o.pdf.text(d[i],l+(p=!n._options.OptionsManager.classicView&&null!=r&&0<r.level?(r.level+1)*o.PADDING:o.PADDING),f),f+=2*o.PADDING;else o.pdf.text(u,l+(p=!n._options.OptionsManager.classicView&&null!=r&&0<r.level?(r.level+1)*o.PADDING:o.PADDING),f);o.currentColIdx++,l+=a}if(o.pageIsFilled||(o.currentYPos+=h,o.rowsHeightSum+=h,o.currentRowIdx++),o.allColumnsGenerated()&&o.allRowsGenerated())break}return o.BLOCK_SIZE=s.ThreadManager.adjustTaskSize(s.getTimer()-t,o.BLOCK_SIZE),o.allColumnsGenerated()&&o.allRowsGenerated()},o.allColumnsGenerated=function(){return o.currentStartColIdx+o.currentColumnCount>=o.dataWidth+o.grid.FIRST_DATA_COLUMN},o.allRowsGenerated=function(){return o.currentRowIdx>=o.dataHeight+o.grid.FIRST_DATA_ROW},o.addNewPage=function(){o.pdf.addPage(),o.pageNumber++,o.pageIsFilled=!1,o._addingHeaderFooter=!0,o.createHeaderAndFooter(o.exportOptions.header,o.exportOptions.footer,(function(){o._addingHeaderFooter=!1,o.addHeaderAndFooter()})),o.rowsHeightSum=0,1<o.pageNumber&&(o.shiftRows(),o.shiftColumns()),e.preloader(!0,n._labels.Labels.MESSAGE_PLEASE_WAIT,o.pageNumber+1+" "+n._labels.Labels.MESSAGE_PAGES_WERE_GENERATED,!0)},o.shiftRows=function(){o.allColumnsGenerated()&&!o.allRowsGenerated()?o.currentStartRowIdx=o.currentRowIdx-=o.grid.FIRST_DATA_ROW:o.currentRowIdx=o.currentStartRowIdx},o.shiftColumns=function(){o.allColumnsGenerated()?o.allRowsGenerated()||(o.currentStartColIdx=0,o.currentColIdx=0):o.currentColIdx=o.currentStartColIdx+=o.currentColumnCount,o.calculateColumnCount()},o.calculateColumnCount=function(){o.currentColumnCount=0;var e=o.currentStartColIdx,t=0,i=0;for(!n._options.OptionsManager.flatView&&o.currentStartColIdx>=o.grid.FIRST_DATA_COLUMN&&(i+=t=o.getColumnWidth(o.grid.START_HEADERS_COLUMN),o.currentColumnCount++,o.currentStartColIdx--,o.currentColIdx--);e<o.totalColumnCount;){if((t=o.getColumnWidth(e))>o.pageWidth/2-o.PAGE_MARGIN&&(o.widthSize[e]=t=(o.pageWidth+o.PAGE_MARGIN)/2),!((i+=t)<=o.pageWidth)){0==o.currentColumnCount&&(o.currentColumnCount=1);break}o.currentColumnCount++,e++}},o.onPdfGenerated=function(){0==o.exportOptions.filename.length&&(o.exportOptions.filename="pivot.pdf");var i=o.pdf.output();i=s.StringUtils.strToUint8Arr(i),r.ExportManager.save(i,o.exportOptions),o.clear(),n.PivotModel.getInstance().dispatch(new t._Event(e.PivotEvent.EXPORT_COMPLETE))},o.clear=function(){o.grid=null,o.exportOptions=null,o.pdf=null,o.dataWidth=0,o.dataHeight=0,o.totalColumnCount=0,o.totalRowCount=0,o.currentColumnCount=0,o.currentColIdx=0,o.currentStartColIdx=0,o.currentRowIdx=0,o.currentStartRowIdx=0,o.rowsHeightSum=0,o.currentYPos=0,o.pageIsFilled=!1,o.pageNumber=0,o.pageHeight=0,o.pageWidth=0,o.headerHeight=0,o.headerImage=null,o.footerHeight=0,o.footerImage=null},o.pixel2mm=function(e){return.264*e},o.mm2px=function(e){return 3.779*e},o.px2mm=function(e){return e/3.779},o.FONT_NAME="Helvetica",o.PAGE_MARGIN=15,o.pageIsFilled=!1,o.pageNumber=0,o.HEADER_FOOTER_MARGIN=5,o.headerHeight=0,o.footerHeight=0,o._addingHeaderFooter=!1,o.BLOCK_SIZE=20,o.PADDING=o.pixel2mm(8),o}(),r.ExportPDF=o}(r||(r={})),function(e){var n,r,o;n=e.model||(e.model={}),r=n._export||(n._export={}),o=function(){function o(){throw Error("Singleton")}return o.run=function(i,r,s,a){o.grid=i,o.dataWidth=s,o.dataHeight=a,o.exportOptions=r;try{o.exportToHTML()}catch(l){console.error("Export HTML error:",l),e.uialert(n._labels.Labels.MESSAGE_EXPORT_ERROR,n._labels.Labels.ERROR,e.AlertType.ERROR),e.preloader(!1),n.PivotModel.getInstance().dispatch(new t._Event(e.PivotEvent.EXPORT_COMPLETE)),o.clear()}},o.exportToHTML=function(){e.preloader(!0,n._labels.Labels.MESSAGE_EXPORT_PROGRESS),o.htmlString="",o.rowIdx=o.grid.START_TABLE_ROW,o.stylesList=[],s.ThreadManager.addTask(o.generateRow,null,null,o.onHTMLExportComplete)},o.generateStyle=function(){var t="",n=o.grid.gridLayout,r=n.find("#wdr-data-sheet");for(t=(t=(t=(t=(t=(t=(t=(t+=s.StringUtils.bind("body{{0}}\n",e._view.grid.vo.StyleValueObject.fromItemToString(i.UIElement.convert(n.element),["font-family"])))+s.StringUtils.bind(".grid{border-collapse:collapse;{0}border-top:1px solid #e9e9e9;border-left:1px solid #e9e9e9;}\n",e._view.grid.vo.StyleValueObject.fromItemToString(i.UIElement.convert(n.element),["font-family","font-size","color"])))+s.StringUtils.bind(".title{{0}}\n",e._view.grid.vo.StyleValueObject.fromClassToString(e._view.grid.vo.GridStyleName.TITLE,i.UIElement.convert(n.element))))+s.StringUtils.bind(".cell{{0}}\n",e._view.grid.vo.StyleValueObject.fromClassToString(e._view.grid.vo.GridStyleName.CELL,r)))+s.StringUtils.bind(".totalCell{{0}}\n",e._view.grid.vo.StyleValueObject.fromClassToString(e._view.grid.vo.GridStyleName.CELL+" "+e._view.grid.vo.GridStyleName.TOTAL,r)))+s.StringUtils.bind(".rowHeaderCell{{0}}\n",e._view.grid.vo.StyleValueObject.fromClassToString(e._view.grid.vo.GridStyleName.CELL+" "+e._view.grid.vo.GridStyleName.HEADER+" "+e._view.grid.vo.GridStyleName.HEADER_ROW,i.UIElement.convert(n.element))))+s.StringUtils.bind(".columnHeaderCell{{0}}\n",e._view.grid.vo.StyleValueObject.fromClassToString(e._view.grid.vo.GridStyleName.CELL+" "+e._view.grid.vo.GridStyleName.HEADER+" "+e._view.grid.vo.GridStyleName.HEADER_COLUMN,i.UIElement.convert(n.element))))+s.StringUtils.bind(".filterHeaderCell{{0}}\n",e._view.grid.vo.StyleValueObject.fromClassToString(e._view.grid.vo.GridStyleName.CELL+" "+e._view.grid.vo.GridStyleName.HEADER+" "+e._view.grid.vo.GridStyleName.FILTER_HEADER,i.UIElement.convert(n.element))),r=1;20>=r;r++)t+=s.StringUtils.bind(".level{0}{{1}}\n",r,e._view.grid.vo.StyleValueObject.fromClassToString(e._view.grid.vo.GridStyleName.HEADER_ROW+" "+e._view.grid.vo.GridStyleName.LEVEL+r,i.UIElement.convert(n.element),["padding-left"]));for(r=0;r<o.stylesList.length;r++)t+=s.StringUtils.bind(".{0}{{1}}\n",o.stylesList[r],e._view.grid.vo.StyleValueObject.fromClassToString(o.stylesList[r],i.UIElement.convert(n.element)));return t},o.appendStylesList=function(e){for(var t=0;t<e.length;t++)0>o.stylesList.indexOf(e[t])&&o.stylesList.push(e[t])},o.generateRow=function(){for(var e,t=s.getTimer(),n=Math.min(o.rowIdx+o.BLOCK_SIZE,o.dataHeight+o.grid.FIRST_DATA_ROW),i="";o.rowIdx<n;o.rowIdx++){i="";for(var r=o.grid.START_HEADERS_COLUMN;r<o.dataWidth+o.grid.FIRST_DATA_COLUMN;r++)if(i+="<td {0}>"+((e=o.grid.gridLayout.getCell(o.rowIdx,r,!0,!0))?e.getLabel():"")+"</td>",null==e)i=s.StringUtils.bind(i,"class='cell'");else{var a="",l="";e.isCustomized&&(l=e.style.getStyleString(),a=e.style.getCustomClassString(),o.appendStylesList(e.style.customStyleNames)),a=e.isRowHeader?a+" rowHeaderCell level"+e.level:e.isColumnHeader?a+" columnHeaderCell":e.isFilterHeader?a+" filterHeaderCell":e.isTotal&&""!=e.getLabel()?a+" totalCell":a+" cell",null!=e&&e.isFilterHeader&&(a+=" level"+e.level),""!=a.trim()&&(a="class='"+a.trim()+"'"),""!=(l+="width:"+o.grid.gridLayout.coords.getColWidth(r)+"px;").trim()&&(l="style='"+l.trim()+"'"),i=s.StringUtils.bind(i,a+" "+l)}o.rowsString+="<tr>"+i+"</tr>"}return o.BLOCK_SIZE=s.ThreadManager.adjustTaskSize(s.getTimer()-t,o.BLOCK_SIZE),o.showProgress(o.rowIdx),o.rowIdx>=o.dataHeight+o.grid.FIRST_DATA_ROW},o.showProgress=function(t){e.preloader(!0,n._labels.Labels.MESSAGE_EXPORT_PROGRESS,s.StringUtils.bind("{0}%",(t/(o.dataHeight+o.grid.FIRST_DATA_ROW)*100).toFixed(0)))},o.onHTMLExportComplete=function(){e.preloader(!1),o.saveHTMLExport(),o.clear()},o.saveHTMLExport=function(){0==o.exportOptions.filename.length&&(o.exportOptions.filename="pivotgrid.html");var i="";s.nullOrEmpty(o.exportOptions.header)||(i+=o.exportOptions.header.replace(/##PAGE-NUMBER##/gi,"").replace(/##CURRENT-DATE##/gi,(new Date).toLocaleString())),i+="<div class='title'>"+n._options.OptionsManager.gridTitle+"</div>",i+="<table class='grid'>"+o.rowsString+"</table>",s.nullOrEmpty(o.exportOptions.footer)||(i+=o.exportOptions.footer.replace(/##PAGE-NUMBER##/gi,"").replace(/##CURRENT-DATE##/gi,(new Date).toLocaleString())),o.htmlString="<!DOCTYPE html><html><head><meta charset='UTF-8'/>",o.htmlString+="<title>"+(s.nullOrEmpty(n._options.OptionsManager.gridTitle)?n._labels.Labels.DEFAULT_EXPORT_TITLE:n._options.OptionsManager.gridTitle)+"</title>",o.htmlString+="<style>"+o.generateStyle()+"</style></head>",r.ExportManager.save(o.htmlString+="<body>"+i+"</body></html>",o.exportOptions),n.PivotModel.getInstance().dispatch(new t._Event(e.PivotEvent.EXPORT_COMPLETE))},o.clear=function(){o.rowIdx=0,o.htmlString="",o.rowsString="",o.dataWidth=0,o.dataHeight=0,o.grid=null,o.exportOptions=null},o.rowIdx=0,o.htmlString="",o.rowsString="",o.BLOCK_SIZE=20,o}(),r.ExportHTML=o}(r||(r={})),function(e){var n,r,o;n=e.model||(e.model={}),r=n._export||(n._export={}),o=function(){function o(){throw Error("Singleton")}return o.run=function(i,r,s,a){o.grid=i,o.dataWidth=s,o.dataHeight=a,o.exportOptions=r;try{o.exportToXLS()}catch(l){console.error("Export XLS error:",l),e.uialert(n._labels.Labels.MESSAGE_EXPORT_ERROR,n._labels.Labels.ERROR,e.AlertType.ERROR),e.preloader(!1),n.PivotModel.getInstance().dispatch(new t._Event(e.PivotEvent.EXPORT_COMPLETE))}},o.exportToXLS=function(){e.preloader(!0,n._labels.Labels.MESSAGE_EXPORT_PROGRESS),o.rowIdx=o.grid.START_TABLE_ROW,o.xlsPadding=0,o.xlsDocument=new p.XLS;var t=s.nullOrEmpty(n._options.OptionsManager.gridTitle)?n._labels.Labels.DEFAULT_EXPORT_TITLE:n._options.OptionsManager.gridTitle.replace(/[^a-zA-Z\d\s\-|+@#$^&()_,.!]/g,"");30<(t=0<o.exportOptions.excelSheetName.length?o.exportOptions.excelSheetName:t).length&&(t=t.substr(0,27)+"..."),t=new p.XLSSheet(t),o.xlsDocument.sheets.push(t),o.getStyles(),o.addTitle(),o.addXLSCustomFields(),o.addFilters(),s.ThreadManager.addTask(o.generateXLSRow,null,null,(function(){return o.onXLSExportComplete()}))},o.getStyles=function(){var t=o.grid.gridLayout.element;o.cellStyle=e._view.grid.vo.StyleValueObject.fromClass(e._view.grid.vo.GridStyleName.CELL,i.UIElement.convert(t)),o.totalCellStyle=e._view.grid.vo.StyleValueObject.fromClass(e._view.grid.vo.GridStyleName.CELL+" "+e._view.grid.vo.GridStyleName.TOTAL,i.UIElement.convert(t)),o.rowHeaderCellStyle=e._view.grid.vo.StyleValueObject.fromClass(e._view.grid.vo.GridStyleName.CELL+" "+e._view.grid.vo.GridStyleName.HEADER+" "+e._view.grid.vo.GridStyleName.HEADER_ROW,i.UIElement.convert(t)),o.columnHeaderCellStyle=e._view.grid.vo.StyleValueObject.fromClass(e._view.grid.vo.GridStyleName.CELL+" "+e._view.grid.vo.GridStyleName.HEADER+" "+e._view.grid.vo.GridStyleName.HEADER_COLUMN,i.UIElement.convert(t)),o.filterHeaderCellStyle=e._view.grid.vo.StyleValueObject.fromClass(e._view.grid.vo.GridStyleName.CELL+" "+e._view.grid.vo.GridStyleName.HEADER+" "+e._view.grid.vo.GridStyleName.FILTER_HEADER,i.UIElement.convert(t));for(var n=1;20>=n;n++)o.rowHeaderLevelsCellStyle[n]=e._view.grid.vo.StyleValueObject.fromClass(e._view.grid.vo.GridStyleName.CELL+" "+e._view.grid.vo.GridStyleName.HEADER+" "+e._view.grid.vo.GridStyleName.HEADER_ROW+" "+e._view.grid.vo.GridStyleName.LEVEL+n,i.UIElement.convert(t))},o.onXLSExportComplete=function(){o.mergeTitleCells(),e.preloader(!1),o.saveXLSExport()},o.saveXLSExport=function(){o.rowIdx=o.grid.START_TABLE_ROW,0==o.exportOptions.filename.length&&(o.exportOptions.filename="pivot.xlsx"),r.ExportManager.save(o.xlsDocument.toUint8Array(),o.exportOptions),o.xlsDocument=null,o.exportOptions=null,n.PivotModel.getInstance().dispatch(new t._Event(e.PivotEvent.EXPORT_COMPLETE))},o.generateXLSRow=function(){for(var t=s.getTimer(),i=o.dataHeight+o.grid.FIRST_DATA_ROW;o.rowIdx<i;o.rowIdx++){if(100<s.getTimer()-t){if(100<(t=o.rowIdx/i*100))return!1;e.preloader(!0,n._labels.Labels.MESSAGE_EXPORT_PROGRESS,s.StringUtils.bind("{0}% ({1} rows)",t.toFixed(0),o.rowIdx.toString()));break}for(var r=o.grid.START_HEADERS_COLUMN;r<o.dataWidth+o.grid.FIRST_DATA_COLUMN;r++){var a,l=o.grid.gridLayout.getCell(o.rowIdx,r,!0,!0),u=s.nullOrUndefined(l)?"":l.getLabel();s.nullOrUndefined(l)||null!=l.measure&&(l.measure.type==e.data_.types.MeasureType.DATE?isNaN(l.value)||(a=o.convertToExcelDate(l.value)):l.measure.type==e.data_.types.MeasureType.DATETIME&&(isNaN(l.value)||(a=o.convertToExcelDateTime(l.value)))),"number"==typeof u&&(l.value=u,u+="",l.numeric=!0);var c=null!=l&&(l.isRowHeader||l.isColumnHeader);if(o.exportOptions.excelExportAll&&""==u&&null!=l&&null!=l.member&&(u=l.member.caption),""!=u.trim()||c){c=new e._view.grid.vo.StyleValueObject,c=null!=l&&l.isRowHeader?0<l.level&&o.rowHeaderLevelsCellStyle[l.level]?o.rowHeaderLevelsCellStyle[l.level].clone():o.rowHeaderCellStyle.clone():null!=l&&l.isColumnHeader?o.columnHeaderCellStyle.clone():null!=l&&l.isFilterHeader?o.filterHeaderCellStyle.clone():null!=l&&l.isTotal&&""!=l.getLabel()?o.totalCellStyle.clone():o.cellStyle.clone(),null!=l&&l.isCustomized&&((f=0<l.style.customStyleNames.length?e._view.grid.vo.StyleValueObject.fromClass(l.style.getCustomClassString()):e._view.grid.vo.StyleValueObject.fromString(l.style.getStyleString())).merge(c),c=f),c.color=c.color||"rgb(0,0,0)","rgb(33, 33, 33)"==c.backgroundColor&&(c.color="rgb(242, 242, 242)"),c.backgroundColor=c.backgroundColor||"rgb(255,255,255)",c.fontSize=c.fontSize?o.px2pt(c.fontSize):8;var h=new p.styles.fonts.XLSStyleFont("Tahoma",c.fontSize,s.StringUtils.fromRgbToHex(c.color));h.bold="bold"==c.fontWeight,h.italic=!1;var d=null,A=f=!1;if(l.numeric){if(null!=l.measure){A=""!=(d=l.measure.getFormat()).nullValue||A;var f=l.measure.aggregation==e.data_.consts.AggregationName.PERCENT||l.measure.aggregation==e.data_.consts.AggregationName.PERCENT_COLUMN||l.measure.aggregation==e.data_.consts.AggregationName.PERCENT_ROW||l.measure.aggregation==e.data_.consts.AggregationName.PERCENT_DIFFERENCE||l.measure.calculated&&-1<l.measure.formula.indexOf("percent"),g=d.toXLSFormatCode();(f||d.isPercent)&&((d=d.clone()).currencySymbol=""==d.currencySymbol?"%":d.currencySymbol,g=d.toXLSFormatCode()),d=new p.styles.format.XLSStyleFormat(""==g?0:-1,g)}}else null==l.measure||l.measure.type!=e.data_.types.MeasureType.DATE&&l.measure.type!=e.data_.types.MeasureType.DATETIME||(d=new p.styles.format.XLSStyleFormat(14,""));d&&o.xlsDocument.styleSheet.addFormat(d),h=new p.styles.XLSStyle(h,s.StringUtils.fromRgbToHex(c.backgroundColor),d,c.textAlign),!n._options.OptionsManager.classicView&&l&&l.isRowHeader&&0<l.level&&(h.textIndent=l.level),o.xlsDocument.styleSheet.addStyle(h),d=null!=l.measure?l.measure.getFormat():null,l.numeric?null==d||l.label!=d.infinityValue&&l.label!=d.divideByZeroValue?(a=null==d||!f&&"%"!=d.currencySymbol?l.value:l.value/100,o.xlsDocument.sheets[0].setCell(o.rowIdx-o.grid.START_TABLE_ROW+o.xlsPadding,r,isNaN(l.value)&&A?l.getLabel():a,h)):o.xlsDocument.sheets[0].setCell(o.rowIdx-o.grid.START_TABLE_ROW+o.xlsPadding,r,l.getLabel(),h):o.xlsDocument.sheets[0].setCell(o.rowIdx-o.grid.START_TABLE_ROW+o.xlsPadding,r,!l.isValue||null==l.measure||l.measure.type!=e.data_.types.MeasureType.DATE&&l.measure.type!=e.data_.types.MeasureType.DATETIME?l.isValue&&null!=l.measure&&l.measure.aggregation==e.data_.consts.AggregationName.NONE?l.value:u:a,h),null!=l&&(0==o.xlsDocument.sheets[0].getColumnWidth(r)&&(l=o.convertPixelsToWidth(o.grid.gridLayout.coords.getColWidth(r)),o.xlsDocument.sheets[0].setColumnWidth(r,l)),r!=o.grid.START_HEADERS_COLUMN||o.grid.gridLayout.coords.isRowHeightDefault(o.rowIdx)||(l=o.convertPixelsToPoints(o.grid.gridLayout.coords.getRowHeight(o.rowIdx)),o.xlsDocument.sheets[0].setRowHeight(o.rowIdx+o.xlsPadding,l)),u.length>c.width&&o.xlsDocument.sheets[0].setColumnWidth(r,o.convertPixelsToPoints(u.length+o.cellPadding)>o.convertPixelsToPoints(o.DEFAULT_CELL_WIDTH)?o.convertPixelsToPoints(o.DEFAULT_CELL_WIDTH):o.convertPixelsToPoints(u.length+o.cellPadding)))}}}return o.rowIdx>=i},o.convertToExcelDate=function(e){return s.DateFormat.isUTCFormat(n._options.OptionsManager.datePattern)||(e-=6e4*new Date(e).getTimezoneOffset()),e=-Date.parse("1899-12-30")+e,Math.floor(e/864e5)},o.convertToExcelDateTime=function(e){return s.DateFormat.isUTCFormat(n._options.OptionsManager.dateTimePattern)||(e-=6e4*new Date(e).getTimezoneOffset()),(-Date.parse("1899-12-30")+e)/864e5},o.px2pt=function(e){return.75*e},o.convertPixelsToPoints=function(t){return 0>=t?0:o.defaultExcelCellHeightPoints/o.defaultExcelCellHeightPixels*t*(o.defaultExcelCellHeightPixels/e._view.grid.sheet.GridCoords.CELL_HEIGHT)},o.convertPixelsToWidth=function(e){return 0>=e?0:((e-5)/7*100+.5)/100},o.addXLSCustomFields=function(){var t=n.report.CustomFieldsManager.customFields;if(0<t.length){var i=getComputedStyle(e._view.PivotView.stage.container.find("."+e._view.grid.vo.GridStyleName.HEADER_COLUMN).element),r=new p.styles.fonts.XLSStyleFont(i.fontFamily,parseInt(i.fontSize)-2,s.StringUtils.fromRgbToHex(i.color));r.bold="bold"===i.fontWeight,r.italic="italic"===i.fontStyle,(r=new p.styles.XLSStyle(r,s.StringUtils.fromRgbToHex(i.backgroundColor))).textAlign=i.textAlign,o.xlsDocument.styleSheet.addStyle(r),o.xlsDocument.sheets[0].setCell(o.xlsPadding,0,"Report Information",r),o.xlsDocument.sheets[0].setCell(o.xlsPadding,1,"",r),i=getComputedStyle(e._view.PivotView.stage.container.find("."+e._view.grid.vo.GridStyleName.CELL).element);var a=new p.styles.fonts.XLSStyleFont(i.fontFamily,parseInt(i.fontSize)-2,s.StringUtils.fromRgbToHex(i.color));for(a.bold="bold"===i.fontWeight,a.italic="italic"===i.fontStyle,(a=new p.styles.XLSStyle(a,s.StringUtils.fromRgbToHex(i.backgroundColor))).textAlign=i.textAlign,o.xlsDocument.styleSheet.addStyle(a),i=0;i<t.length;i++)o.xlsDocument.sheets[0].setCell(i+1+o.xlsPadding,0,String(t[i].name),r),o.xlsDocument.sheets[0].setCell(i+1+o.xlsPadding,1,String(t[i].value),r)}o.xlsPadding+=0==t.length?0:t.length+2},o.addTitle=function(){var t=n._options.OptionsManager.gridTitle;if(0!=t.length){var i=getComputedStyle(e._view.PivotView.stage.container.find("."+e._view.grid.vo.GridStyleName.TITLE).element),r=new p.styles.fonts.XLSStyleFont(i.fontFamily,parseInt(i.fontSize)-2,s.StringUtils.fromRgbToHex(i.color));r.bold="bold"===i.fontWeight,r.italic="italic"===i.fontStyle,(i=new p.styles.XLSStyle(r,s.StringUtils.fromRgbToHex(i.backgroundColor))).textAlign="center",o.xlsDocument.styleSheet.addStyle(i),o.xlsDocument.sheets[0].setCell(0,0,t,i),o.xlsPadding=1}},o.mergeTitleCells=function(){if(0<n._options.OptionsManager.gridTitle.length){var e=o.xlsDocument.sheets[0];e.mergeCells(0,0,Math.min(e.columnsCount,10))}},o.addFilters=function(){if(o.exportOptions.showFilters){var t,i=n.PivotModel.getInstance().cube_.slice_.allHierarchies(),r=[],a="",l=!0,u=getComputedStyle(e._view.PivotView.stage.container.find("."+e._view.grid.vo.GridStyleName.HEADER).element),c=new p.styles.fonts.XLSStyleFont(u.fontFamily,parseInt(u.fontSize)-2,s.StringUtils.fromRgbToHex(u.color));c.bold="bold"===u.fontWeight,c.italic="italic"===u.fontStyle,(c=new p.styles.XLSStyle(c,s.StringUtils.fromRgbToHex(u.backgroundColor))).textAlign=u.textAlign,o.xlsDocument.styleSheet.addStyle(c);var h=getComputedStyle(e._view.PivotView.stage.container.find("."+e._view.grid.vo.GridStyleName.CELL).element);(u=new p.styles.fonts.XLSStyleFont(h.fontFamily,parseInt(h.fontSize)-2,s.StringUtils.fromRgbToHex(h.color))).bold="bold"===h.fontWeight,u.italic="italic"===h.fontStyle,(u=new p.styles.XLSStyle(u,s.StringUtils.fromRgbToHex(h.backgroundColor))).textAlign=h.textAlign,o.xlsDocument.styleSheet.addStyle(u),h=o.xlsDocument.sheets[0],a=!1;for(var d=0,A=0;A<i.length;A++)if(a=(t=i.getItemAt(A)).dimension.type==e.data_.types.DimensionType.MD_DIMTYPE_TIME,t.hasFilter()){if(r.length=0,a)a=o.composeDateRange(t);else{for(var f=0;f<t.filterMembers.length;f++)a=t.filterMembers.getItemAt(f),r.push(a.caption);a=r.join(", ")}l&&(h.setCell(d+o.xlsPadding,0,"",c),h.setCell(d+o.xlsPadding,1,"Filters",c),d++),h.setCell(d+o.xlsPadding,0,t.caption,c),h.setCell(d+o.xlsPadding,1,a,u),d++,l=!1}if(n._options.OptionsManager.gridType==e._view.grid.GridType.FLAT)for(i=n.PivotModel.getInstance().cube_.slice_.measuresAll,A=0;A<i.length;A++)if((t=n.PivotModel.getInstance().cube_.slice_.measureToHierarchy(i.getItemAt(A))).hasFilter()){for(f=r.length=0;f<t.filterMembers.length;f++)a=t.filterMembers.getItemAt(f),r.push(a.caption);a=r.join(", "),l&&(h.setCell(d+o.xlsPadding,0,"",c),h.setCell(d+o.xlsPadding,1,"Filters",c),d++),h.setCell(d+o.xlsPadding,0,t.caption,c),h.setCell(d+o.xlsPadding,1,a,u),d++,l=!1}o.xlsPadding+=l?0:d+1}},o.composeDateRange=function(e){var t,n,i,r=!1,s=[];r=n="",null!=o.sortedMembers&&(o.sortedMembers.length=0),o.sortMembers(e.allMember);for(var a=o.composeFilteredMembers(e),l=!1,u=0;u<o.sortedMembers.length;u++)n=o.sortedMembers[u],r=u==o.sortedMembers.length-1,!l&&e.filterMembers.keyExists(n.uniqueName)&&(l=!0,t=n),l&&(e.filterMembers.keyExists(n.uniqueName)&&(i=n),-1<a.indexOf(n)&&!r||(i=null!=i?i:t,n=o.composeDate(t),r=i.uniqueName!=t.uniqueName?":"+o.composeDate(i,!0):"",i=t=null,l=!1,s.push(n+r)));return s.join(", ")},o.sortMembers=function(t){null==o.sortedMembers&&(o.sortedMembers=[]),t.isAll||o.sortedMembers.push(t);for(var n,i=(t=t.hierarchy_.sortChildren(t,!1,e.data_.consts.SortType.ASC)).length,r=0;r<i;r++)0<(n=t.getItemAt(r)).children.length?o.sortMembers(n):o.sortedMembers.push(n)},o.composeDate=function(t,n){void 0===n&&(n=!1);var i=t,r=[];for(r.push(t.caption);i&&i.uniqueName!=t.uniqueName&&!i.level.isLast&&0<i.children.length;)r.push(i.caption),i=(i=i.hierarchy_.sortChildren(i,!1,e.data_.consts.SortType.ASC)).getItemAt(n?i.length-1:0);for(i=t.parent;i&&!i.isAll;)r.unshift(i.caption),i=i.parent;return r.join("-")},o.composeFilteredMembers=function(e){var t=[];e=e.filterMembers;for(var n,i,r=0;r<e.length;r++){n=e.getItemAt(r),t.push(n),i=n.descendants;for(var o=0;o<i.length;o++)t.push(i.getItemAt(o));if(!(n.parent&&!n.parent.isAll&&-1<t.indexOf(n.parent)))for(;n.parent&&!n.parent.isAll;)t.push(n=n.parent)}return t},o.rowIdx=0,o.xlsPadding=0,o.cellPadding=3,o.DEFAULT_CELL_WIDTH=100,o.rowHeaderLevelsCellStyle=[],o.defaultExcelCellHeightPoints=14.3,o.defaultExcelCellHeightPixels=38,o}(),r.ExportXLS=o}(r||(r={})),function(e){var n;!function(i){var r=function(){function r(){}return r.exportTo=function(t,o,u){void 0===o&&(o=null),void 0===u&&(u=null),r._exportInProgress?this.delayedExports.push({type:t,options:o,callback:u}):(t=t.toLowerCase(),t=l.validType(t)?t:l.PDF,n.PivotModel.getInstance().addEventListener(e.PivotEvent.EXPORT_COMPLETE,r.exportCompleteHandler),r._exportInProgress=!0,r.callbackHandler=u,s.nullOrUndefined(o)&&(o=new i.ExportOptions),o.type=t,t=new a(t,o,u),n.PivotModel.getInstance().dispatch(t))},r.stopExport=function(){e.preloader(!1),n.PivotModel.getInstance().removeEventListener(e.PivotEvent.EXPORT_COMPLETE,r.exportCompleteHandler),r._exportInProgress=!1},r.onExportCompleted=function(e){r.stopExport(),0<r.delayedExports.length&&(e=r.delayedExports.shift(),this.exportTo(e.type,e.options,e.callback))},r.save=function(e,t){switch(t.destinationType.toLowerCase()){case n.report.DestinationType.FILE:r.saveToFile(e,t);break;case n.report.DestinationType.SERVER:r.saveToServer(e,t);break;case n.report.DestinationType.BINARY:r.saveToBinary(e,t);break;case n.report.DestinationType.PLAIN:r.saveToPlain(e,t);break;default:r.saveToFile(e,t)}},r.saveToServer=function(t,i){switch(i.type){case l.HTML:case l.EXCEL:case l.PDF:r.saveToServerAsBinary(t,i);break;default:var o=n.XSSCheck.validate(i.type);e.uialert("Unknown type of export: '"+o+"'",n._labels.Labels.ERROR)}},r.saveToFile=function(t,o){var s;switch(o.type){case l.HTML:s="text/html;charset=utf-8",o.filename=r.appendFileExtension(o.filename,".html");break;case l.EXCEL:s="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",o.filename=r.appendFileExtension(o.filename,".xlsx");break;case l.PDF:s="application/pdf",o.filename=r.appendFileExtension(o.filename,".pdf");break;default:s="text/plain;charset=utf-8"}var a=[t];try{var c=new Blob(a,{type:s});u(c,o.filename),r.triggerCallback({data:t,fielname:o.filename,type:o.type})}catch(i){e.uialert(n._labels.Labels.MESSAGE_CANT_SAVE_FILE,n._labels.Labels.ERROR,e.AlertType.ERROR),r.triggerCallback(null,{message:n._labels.Labels.MESSAGE_CANT_SAVE_FILE})}},r.appendFileExtension=function(e,t){return e.indexOf(t)!=e.length-t.length&&(e+=t),e},r.saveToServerAsBinary=function(i,a){var l=new s.Timer(500);l.addEventListener(s.TimerEvent.TIMER,(function(t){e.preloader(!0,n._labels.Labels.MESSAGE_UPLOADING,(l.currentCount/10).toString()+" sec")}));var u=new o.URLStream;u.addEventListener(t._Event.ERROR,(function(t){e.uialert(n._labels.Labels.MESSAGE_CANT_SAVE_FILE,n._labels.Labels.ERROR),l.stop(),e.preloader(!1),r.triggerCallback(null,{message:n._labels.Labels.MESSAGE_CANT_SAVE_FILE})})),u.addEventListener(t._Event.COMPLETE,(function(){l.stop(),e.preloader(!1),r.triggerCallback({data:i,fielname:a.filename,type:a.type,response:u.response})}));var c=new Blob([i],{type:"application/octet-binary"}),h=new FormData;for(var d in h.append("filedata",c,a.filename),a.extendedParameters)h.append(d,a.extendedParameters[d]);u.requestMethod=o.URLRequestMethod.POST,u.data=h,u.contentType=!1,u.load(a.url),l.start()},r.saveToBinary=function(e,t){},r.saveToPlain=function(e,t){},r.triggerCallback=function(e,t){void 0===e&&(e=null),void 0===t&&(t=null),null!=r.callbackHandler&&r.callbackHandler.call(null,e,t)},r._exportInProgress=!1,r.delayedExports=[],r.exportCompleteHandler=function(e){return r.onExportCompleted(e)},r}();i.ExportManager=r;var a=function(t){function n(n,i,r){var o=t.call(this,e.PivotEvent.EXPORT)||this;return o.exportType=n,o.exportOptions=i,o.callbackHandler=r,o}return h(n,t),n}(t._Event);i.ExportEvent=a;var l=function(){function e(){}return e.validType=function(t){return t===e.EXCEL||t===e.HTML||t===e.PDF},e.EXCEL="excel",e.HTML="html",e.PDF="pdf",e}();i.ExportType=l}((n=e.model||(e.model={}))._export||(n._export={}))}(r||(r={})),function(e){var t;!function(t){var n=function(){function n(n){void 0===n&&(n="file"),this.showHeaders=!0,this.destinationType=e.model.report.DestinationType.FILE,this.filename="",this.url="()",this.type=t.ExportType.HTML,this.pageOrientation="portrait",this.excelSheetName="",this.showFilters=this.excelExportAll=!1,this.extendedParameters={},this.destinationType=n}return n.fromObject=function(t){var i=new n;return s.nullOrUndefined(t)||(t.hasOwnProperty("showHeaders")&&(i.showHeaders="true"===t.showHeaders||!0===t.showHeaders),t.hasOwnProperty("filename")&&(i.filename=t.filename),t.hasOwnProperty("url")&&(i.url=t.url),t.hasOwnProperty("excelSheetName")&&(i.excelSheetName=t.excelSheetName),t.hasOwnProperty("excelExportAll")&&(i.excelExportAll=t.excelExportAll),!t.hasOwnProperty("pageOrientation")||"portrait"!==t.pageOrientation&&"landscape"!==t.pageOrientation||(i.pageOrientation=t.pageOrientation.toLowerCase()),t.hasOwnProperty("destinationType")&&e.model.report.DestinationType.validType(t.destinationType.toString().toLowerCase())&&(i.destinationType=t.destinationType.toString().toLowerCase()),null!=t.showFilters&&(i.showFilters=t.showFilters),null!=t.extendedParameters&&(i.extendedParameters=t.extendedParameters),null!=t.header&&(i.header=t.header),null!=t.footer&&(i.footer=t.footer)),i},n}();t.ExportOptions=n}((t=e.model||(e.model={}))._export||(t._export={}))}(r||(r={})),function(e){!function(e){!function(e){var t=function(){function t(){}return t.getFormat=function(e){return t.formats.keyExists(e)?t.formats.getItem(e):""!=e&&t.formats.keyExists("")?t.formats.getItem(""):t.getDefaultFormat()},t.setFormat=function(n){var i=e.vo.FormatValueObject.fromObject(n);if(t.cleanFormats.addItem(i.name,i),null!=t.defaultFormat)i.mergeDefaults(t.defaultFormat);else if(""==i.name)for(t.defaultFormat=n,n=0;n<t.formats.length;n++)t.formats.getItemAt(n).mergeDefaults(t.defaultFormat);t.formats.addItem(i.name,i)},t.getAllFormats=function(){return t.cleanFormats.slice()},t.clear=function(){t.formats=new s.AssociativeArray,t.cleanFormats=new s.AssociativeArray,t.defaultFormat=null},t.getDefaultFormat=function(){return new e.vo.FormatValueObject},t.formatExists=function(e){return t.formats.keyExists(e)},t.dispose=function(){t.formats=null,t.cleanFormats=null,t.defaultFormat=null},t.formats=new s.AssociativeArray,t.cleanFormats=new s.AssociativeArray,t.defaultFormat=null,t}();e.FormatManager=t}(e.format||(e.format={}))}(e.model||(e.model={}))}(r||(r={})),function(e){!function(e){var t,n,i;n=(t=e.format||(e.format={})).vo||(t.vo={}),i=function(){function t(e){void 0===e&&(e=""),this.name="",this._params={},this._defaults={thousandsSeparator:" ",decimalSeparator:".",decimalPlaces:-1,maxDecimalPlaces:-1,maxSymbols:20,currencySymbol:"",currencySymbolAlign:"left",nullValue:"",infinityValue:"Infinity",divideByZeroValue:"Infinity",textAlign:"",isPercent:!1,isCount:!1},this.name=e}return Object.defineProperty(t.prototype,"params",{get:function(){return this._params},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"thousandsSeparator",{get:function(){return null!=this._params.thousandsSeparator?this._params.thousandsSeparator:this._defaults.thousandsSeparator},set:function(e){this._params.thousandsSeparator=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"decimalSeparator",{get:function(){return null!=this._params.decimalSeparator?this._params.decimalSeparator:this._defaults.decimalSeparator},set:function(e){this._params.decimalSeparator=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"decimalPlaces",{get:function(){return null!=this._params.decimalPlaces?this._params.decimalPlaces:this._defaults.decimalPlaces},set:function(e){this._params.decimalPlaces=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxDecimalPlaces",{get:function(){return null!=this._params.maxDecimalPlaces?this._params.maxDecimalPlaces:this._defaults.maxDecimalPlaces},set:function(e){this._params.maxDecimalPlaces=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxSymbols",{get:function(){return null!=this._params.maxSymbols?this._params.maxSymbols:this._defaults.maxSymbols},set:function(e){this._params.maxSymbols=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currencySymbol",{get:function(){return null!=this._params.currencySymbol?this._params.currencySymbol:this._defaults.currencySymbol},set:function(e){this._params.currencySymbol=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currencySymbolAlign",{get:function(){return null!=this._params.currencySymbolAlign?this._params.currencySymbolAlign:this._defaults.currencySymbolAlign},set:function(e){this._params.currencySymbolAlign=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"nullValue",{get:function(){return null!=this._params.nullValue?this._params.nullValue:this._defaults.nullValue},set:function(e){this._params.nullValue=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"infinityValue",{get:function(){return null!=this._params.infinityValue?this._params.infinityValue:this._defaults.infinityValue},set:function(e){this._params.infinityValue=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"divideByZeroValue",{get:function(){return null!=this._params.divideByZeroValue?this._params.divideByZeroValue:this._defaults.divideByZeroValue},set:function(e){this._params.divideByZeroValue=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"textAlign",{get:function(){return null!=this._params.textAlign?this._params.textAlign:this._defaults.textAlign},set:function(e){this._params.textAlign=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isPercent",{get:function(){return null!=this._params.isPercent?this._params.isPercent:this._defaults.isPercent},set:function(e){this._params.isPercent=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isCount",{get:function(){return null!=this._params.isCount?this._params.isCount:this._defaults.isCount},set:function(e){this._params.isCount=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currencySymbolLength",{get:function(){return 1<this.currencySymbol.length&&"&"==this.currencySymbol.charAt(0)&&";"==this.currencySymbol.charAt(this.currencySymbol.length-1)?1:this.currencySymbol.length},set:function(e){},enumerable:!0,configurable:!0}),t.prototype.applyFormat=function(e){return s.NumberFormatter.format(e,this)},t.prototype.toXLSFormatCode=function(){var e,t="";if(-1==this.decimalPlaces&&""==this.currencySymbol)return"";if("%"==this.currencySymbol){var n=-1==this.decimalPlaces?0:this.decimalPlaces;for(t=0<n?"0.":"0",e=0;e<n;e++)t+="0";return t+this.currencySymbol}if(t=""!=this.thousandsSeparator?"#,##0":"###0",0<this.decimalPlaces)for(t+=".",e=0;e<this.decimalPlaces;e++)t+="0";return""!=this.currencySymbol&&(t="left"==this.currencySymbolAlign?"\\"+this.currencySymbol+t:t+"\\"+this.currencySymbol),t},t.prototype.toObject=function(e){void 0===e&&(e=!1);var t={};if(t.name=this.name,e)t.thousandsSeparator=this.thousandsSeparator,t.decimalSeparator=this.decimalSeparator,t.decimalPlaces=this.decimalPlaces,t.maxDecimalPlaces=this.maxDecimalPlaces,t.maxSymbols=this.maxSymbols,t.currencySymbol=this.currencySymbol,t.currencySymbolAlign=this.currencySymbolAlign,t.nullValue=this.nullValue,t.infinityValue=this.infinityValue,t.divideByZeroValue=this.divideByZeroValue,t.textAlign=""!=this.textAlign?this.textAlign:"right",t.isPercent=this.isPercent,t.isCount=this.isCount;else for(var n in this._params)t[n]="textAlign"==n?""==this.textAlign?"right":this.textAlign:this._params[n];return t},t.fromObject=function(n){var i=new t;return null!=n.name&&(i.name=n.name),null!=n.thousandsSeparator&&e.XSSCheck.valid(n.thousandsSeparator)&&(i.thousandsSeparator=e.XSSCheck.validate(n.thousandsSeparator,!0)),null!=n.decimalSeparator&&e.XSSCheck.valid(n.decimalSeparator)&&(i.decimalSeparator=e.XSSCheck.validate(n.decimalSeparator)),null!=n.decimalPlaces&&-1<parseInt(n.decimalPlaces)&&(i.decimalPlaces=isNaN(parseInt(n.decimalPlaces))?-1:parseInt(n.decimalPlaces)),null!=n.maxDecimalPlaces&&-1<parseInt(n.maxDecimalPlaces)&&(i.maxDecimalPlaces=n.maxDecimalPlaces),null!=n.maxSymbols&&1<parseInt(n.maxSymbols)&&(i.maxSymbols=n.maxSymbols),null!=n.currencySymbol&&e.XSSCheck.valid(n.currencySymbol)&&(i.currencySymbol=e.XSSCheck.validate(n.currencySymbol,!0)),null!=n.currencySymbolAlign&&e.XSSCheck.valid(n.currencySymbolAlign)&&(i.currencySymbolAlign=e.XSSCheck.validate(n.currencySymbolAlign)),null!=n.nullValue&&e.XSSCheck.valid(n.nullValue)&&(i.nullValue=e.XSSCheck.validate(n.nullValue)),null!=n.infinityValue&&e.XSSCheck.valid(n.infinityValue)&&(i.infinityValue=e.XSSCheck.validate(n.infinityValue)),null!=n.divideByZeroValue&&e.XSSCheck.valid(n.divideByZeroValue)&&(i.divideByZeroValue=e.XSSCheck.validate(n.divideByZeroValue)),null!=n.textAlign&&e.XSSCheck.valid(n.textAlign)&&(i.textAlign=e.XSSCheck.validate(n.textAlign)),null!=n.isPercent&&(i.isPercent=1==n.isPercent),null!=n.isCount&&(i.isCount=1==n.isCount),i},t.prototype.clone=function(){var e=new t;e.name=this.name,this._params.hasOwnProperty("thousandsSeparator")&&(e.thousandsSeparator=this.thousandsSeparator),this._params.hasOwnProperty("decimalSeparator")&&(e.decimalSeparator=this.decimalSeparator),this._params.hasOwnProperty("decimalPlaces")&&(e.decimalPlaces=this.decimalPlaces),this._params.hasOwnProperty("maxDecimalPlaces")&&(e.maxDecimalPlaces=this.maxDecimalPlaces),this._params.hasOwnProperty("maxSymbols")&&(e.maxSymbols=this.maxSymbols),this._params.hasOwnProperty("currencySymbol")&&(e.currencySymbol=this.currencySymbol),this._params.hasOwnProperty("currencySymbolAlign")&&(e.currencySymbolAlign=this.currencySymbolAlign),this._params.hasOwnProperty("nullValue")&&(e.nullValue=this.nullValue),this._params.hasOwnProperty("infinityValue")&&(e.infinityValue=this.infinityValue),this._params.hasOwnProperty("divideByZeroValue")&&(e.divideByZeroValue=this.divideByZeroValue),this._params.hasOwnProperty("textAlign")&&(e.textAlign=this.textAlign),this._params.hasOwnProperty("isPercent")&&(e.isPercent=this.isPercent),this._params.hasOwnProperty("isPercent")&&(e.isCount=this.isCount);var n,i={};for(n in this._defaults)i[n]=this._defaults[n];return e._defaults=i,e},t.prototype.mergeDefaults=function(e){for(var t in e)this._defaults[t]=e[t]},t}(),n.FormatValueObject=i}(e.model||(e.model={}))}(r||(r={})),function(e){var t=function(){function t(){}return t.format=function(n,i,o,s,a){if(void 0===i&&(i=null),void 0===o&&(o=!1),void 0===s&&(s=!1),void 0===a&&(a=-1),null==i&&(i=t.defaultFormatVO),isNaN(n)||e.nullOrUndefined(n))return i.nullValue;if(1/0==n)return i.infinityValue;if(n==r.data_.consts.DataConsts.DIVIDE_BY_ZERO)return i.divideByZeroValue;o||(o=i.isCount),n=i.isPercent&&"%"!=i.currencySymbol?100*n:n;var l=s?"%":i.currencySymbol;l=!s&&i.isPercent&&"%"!=i.currencySymbol?"%":l,i.currencySymbolAlign=i.isPercent?"right":i.currencySymbolAlign;var u=o?0:i.decimalPlaces,c="";if(0==n&&0>u)return c="0",!o&&0<l.length&&(c=t.formatCurrency(c,l,i.currencySymbolAlign,s)),c;if(c=0>n?i.maxSymbols-1:i.maxSymbols,1<i.thousandsSeparator.length&&!e.StringUtils.isEntity(i.thousandsSeparator)&&(c-=Math.floor(c/3)*i.thousandsSeparator.length),!o&&0<i.currencySymbolLength&&(c-=i.currencySymbolLength),i.thousandsSeparator="&#39;"==i.thousandsSeparator?"'":i.thousandsSeparator,1<(h=n.toString().split(".")).length&&10<=h[1].length){for(var h,d=0,A=0,p=(h=h[1]).length-2;0<=p;p--)if("9"!=h.charAt(p)&&"0"!=h.charAt(p)||h.charAt(p)!=h.charAt(p+1)){if(!(4>d)){A=p+1;break}d=0}else d++;4<=d&&(h=Math.pow(10,A),n=Math.round(n*h)/h)}return h=4<u?Math.pow(10,c-u-1):Math.pow(10,c-4),d=Math.pow(10,-(c-4)),-1<a&&(u=a),Math.abs(n)>h?(a=Math.round(Math.log(n)/Math.LN10),a=Math.round(Math.log(a)/Math.LN10+1),20<(c=0>n?i.maxSymbols-a-5:i.maxSymbols-a-4)&&(c=20),1>c&&(c=1),c=n.toExponential(c)):Math.abs(n)<d&&0>u?(a=Math.round(Math.log(n)/Math.LN10),20<(c=c-4-(a=Math.round(Math.log(-a)/Math.LN10+1)))&&(c=20),1>c&&(c=1),c=n.toExponential(c)):0>u?(a=1,1<Math.abs(n)?(a=Math.round(Math.log(Math.abs(n))/Math.LN10),a=Math.pow(10,c-a-2)):a=Math.pow(10,c-2),c=(Math.round(Math.abs(n)*a)/a).toString(),0>n&&(c="-"+c)):c=0==u?Math.round(n).toString():n.toFixed(u),-1==c.indexOf("e")&&(c=c.split("."),a=t.formatThousands(c[0],i),h=1<c.length?c[1]:"",(1<c.length||0<u)&&0!=i.maxDecimalPlaces?(-1<i.maxDecimalPlaces&&h.length>i.maxDecimalPlaces&&(h=h.substr(0,i.maxDecimalPlaces)),c=a+i.decimalSeparator+h):c=a),!o&&0<l.length&&(c=t.formatCurrency(c,l,i.currencySymbolAlign,s)),t.checkNegativeZero(c,n)},t.formatThousands=function(e,n){void 0===n&&(n=null);var i=0>parseFloat(e);i&&(e=e.substr(1));var o=e;if(3<e.length){null==n&&(null==t.defaultFormatVO&&(t.defaultFormatVO=new r.model.format.vo.FormatValueObject("")),n=t.defaultFormatVO),o=Math.floor(e.length/3);var s=[],a=e.length%3;0<a&&s.push(e.substr(0,a));for(var l=0;l<o;l++)s.push(e.substr(a+3*l,3));o=s.join(n.thousandsSeparator)}return i&&(o="-"+o),o},t.formatCurrency=function(e,t,n,i){return"left"!=n||i?e+t:0==e.indexOf("-")?"-"+t+e.substr(1):t+e},t.checkNegativeZero=function(e,t){return 0<=t||-1==e.indexOf("-")||-1<e.search("[1-9]+")?e:e.replace("-","")},t.defaultFormatVO=new r.model.format.vo.FormatValueObject,t}();e.NumberFormatter=t}(s||(s={})),function(e){!function(e){var t=function(){function t(){}return t.getStructureLoader=function(t){var n=null;switch(t.dataSourceType){case e.consts.DataSourceType.CSV:n=1==t.embedded?new e.csv.CSVEmbeddedLoader:new e.csv.CSVLoader;break;case e.consts.DataSourceType.JSON:n=new e.json.JSONLoader}return n},t}();e.StructureLoaderFactory=t}(e.data_||(e.data_={}))}(r||(r={})),function(e){!function(e){e.Query=function(){this.mdx=this.type="",this.axisName=e.consts.AxisName.ROWS_AXIS,this.tuple=[]}}(e.data_||(e.data_={}))}(r||(r={})),function(e){!function(e){var t=function(){function e(){}return e.MEMBERS="members",e.ASCENDANTS="ascendants",e.DESCENDANTS="descendants",e.SIBLINGS="siblings",e.SEARCH="search",e}();e.MembersLoaderState=t}(e.data_||(e.data_={}))}(r||(r={})),function(e){!function(e){var n=function(){function e(){}return e.BEFORE_STRUCTURE_LOADING="BEFORE_STRUCTURE_LOADING",e.STRUCTURE_CONNECTED="STRUCTURE_CONNECTED",e.STRUCTURE_LOADED="STRUCTURE_LOADED",e.STRUCTURE_CANCELLED="STRUCTURE_CANCELLED",e.STRUCTURE_LOADING_FAILED="STRUCTURE_LOADING_FAILED",e.BEFORE_QUERY="BEFORE_QUERY",e.QUERY_COMPLETE="QUERY_COMPLETE",e.QUERY_ERROR="QUERY_ERROR",e}();e.DataEvent=n;var i=function(e){function t(t){var i=e.call(this,n.BEFORE_QUERY)||this;return i.queryType=t,i}return h(t,e),t}(t._Event);e.BeforeQueryEvent=i,i=function(t){function i(i){var r=t.call(this,n.QUERY_COMPLETE)||this;return r.queryType=e.consts.QueryType.SELECT,r.queryType=i,r}return h(i,t),i}(t._Event),e.QueryCompleteEvent=i}(e.data_||(e.data_={}))}(r||(r={})),function(e){var n,i,r;i=(n=e.data_||(e.data_={})).dataprovider_||(n.dataprovider_={}),r=function(t){function o(){var e=t.call(this)||this;return e.rowTuples=[],e._rowTuples=[],e.columnTuples=[],e._columnTuples=[],e.rowDepths=[],e.rowType=[],e.columnDepths=[],e._name="",e.queryCompleteHandler=function(){return e.onQueryComplete()},e.beforeQueryHandler=function(t){return e.onBeforeQuery(t)},e.structureLoadedHandler=function(t){return e.onStructureLoaded()},e._rows=new s.AssociativeArray,e._rowLevels=[],e._columnLevels=[],e._columns=new s.AssociativeArray,e._pages=new s.AssociativeArray,e._measures=new s.AssociativeArray,e._measuresPosition=0,e._dataLoaded=!1,e._rowMaxDepth=0,e._columnMaxDepth=0,e._measureDepth=0,e.queryType=n.consts.QueryType.SELECT,e._showUnexpandedDataAlert=!1,e._fillRowTuplesStart=0,o.counter++,e.cube_=n.Cube.getInstance(),e}return h(o,t),o.getInstance=function(){return null==o.instance&&((o.instance=new o)._name="grid"+o.counter),o.instance},o.prototype.addEventListeners=function(){this.cube_.addEventListener(n.DataEvent.QUERY_COMPLETE,this.queryCompleteHandler,1),this.cube_.addEventListener(n.DataEvent.BEFORE_QUERY,this.beforeQueryHandler),this.cube_.addEventListener(n.DataEvent.STRUCTURE_LOADED,this.structureLoadedHandler,1)},o.prototype.removeEventListeners=function(){this.cube_.removeEventListener(n.DataEvent.QUERY_COMPLETE,this.queryCompleteHandler),this.cube_.removeEventListener(n.DataEvent.BEFORE_QUERY,this.beforeQueryHandler),this.cube_.removeEventListener(n.DataEvent.STRUCTURE_LOADED,this.structureLoadedHandler)},Object.defineProperty(o.prototype,"dataStorage",{get:function(){return null!=this._dataStorage?this._dataStorage:this.cube_.localDataStorage},set:function(e){this._dataStorage=e},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"slice",{get:function(){return null!=this._slice?this._slice:this.cube_.slice_},set:function(e){this._slice=e},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"isClassic",{get:function(){return e.model._options.OptionsManager.classicView},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"rows",{get:function(){return this._rows},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"rowsOnly",{get:function(){return this.slice.rowsOnly},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"rowLevels",{get:function(){return this._rowLevels},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"columnLevels",{get:function(){return this._columnLevels},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"columns",{get:function(){return this._columns},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"columnsOnly",{get:function(){return this.slice.columnsOnly},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"pages",{get:function(){return this._pages},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"measures",{get:function(){return this._measures},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"measuresPosition",{get:function(){return this._measuresPosition},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"dataLoaded",{get:function(){return this.slice&&this._dataLoaded},set:function(e){this._dataLoaded=e},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"rowMaxDepth",{get:function(){return this._rowMaxDepth},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"columnMaxDepth",{get:function(){return this._columnMaxDepth},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"measureDepth",{get:function(){return this._measureDepth},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"rowAxis",{get:function(){return this._rowAxis},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"columnAxis",{get:function(){return this._columnAxis},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"rowCount",{get:function(){return this._rowAxis?this._rowAxis.hasMeasures?this._rowAxis.hierarchies.length-1:this._rowAxis.hierarchies.length:0},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"columnCount",{get:function(){return this._columnAxis?this._columnAxis.hasMeasures?this._columnAxis.hierarchies.length-1:this._columnAxis.hierarchies.length:0},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"multiMeasures",{get:function(){return 1<this._measures.length||this._columnAxis.hasMeasures&&e.model._options.OptionsManager.showExtraTotalLabels},set:function(e){},enumerable:!0,configurable:!0}),o.prototype.getExpandedRows=function(){return this._rowAxis&&!this.isAllExpanded()?this._rowAxis.expandedTuples:[]},o.prototype.setExpandedRows=function(e){this._rowAxis&&!this.isAllExpanded()&&(this._rowAxis.expandedTuples=e)},o.prototype.getExpandedColumns=function(){return this._columnAxis&&!this.isAllExpanded()?this._columnAxis.expandedTuples:[]},o.prototype.setExpandedColumns=function(e){this._columnAxis&&!this.isAllExpanded()&&(this._columnAxis.expandedTuples=e)},o.prototype.getCollapsedRows=function(){return this._rowAxis&&this.isAllExpanded()?this._rowAxis.expandedTuples:[]},o.prototype.setCollapsedRows=function(e){this._rowAxis&&this.isAllExpanded()&&(this._rowAxis.expandedTuples=e)},o.prototype.getCollapsedColumns=function(){return this._columnAxis&&this.isAllExpanded()?this._columnAxis.expandedTuples:[]},o.prototype.setCollapsedColumns=function(e){this._columnAxis&&this.isAllExpanded()&&(this._columnAxis.expandedTuples=e)},o.prototype.getDrilledDownRows=function(){return this._rowAxis&&!this.isAllDrilled()?this._rowAxis.drilledTuples:[]},o.prototype.setDrilledDownRows=function(e){this._rowAxis&&!this.isAllDrilled()&&(this._rowAxis.drilledTuples=e)},o.prototype.getDrilledDownColumns=function(){return this._columnAxis&&!this.isAllDrilled()?this._columnAxis.drilledTuples:[]},o.prototype.setDrilledDownColumns=function(e){this._columnAxis&&!this.isAllDrilled()&&(this._columnAxis.drilledTuples=e)},o.prototype.getDrilledUpRows=function(){return this._rowAxis&&this.isAllDrilled()?this._rowAxis.drilledTuples:[]},o.prototype.setDrilledUpRows=function(e){this._rowAxis&&this.isAllDrilled()&&(this._rowAxis.drilledTuples=e)},o.prototype.getDrilledUpColumns=function(){return this._columnAxis&&this.isAllDrilled()?this._columnAxis.drilledTuples:[]},o.prototype.setDrilledUpColumns=function(e){this._columnAxis&&this.isAllDrilled()&&(this._columnAxis.drilledTuples=e)},o.prototype.isAllDrilled=function(){return this.slice.drillAll},o.prototype.isAllExpanded=function(){return this.slice.expandAll},Object.defineProperty(o.prototype,"rowSortType",{get:function(){var e=n.consts.SortType.UNSORTED;return this._rowAxis&&(e=this._rowAxis.sortType)==n.consts.SortType.UNSORTED&&this._rowAxis.totalSortMeasure&&this._rowAxis.totalSortType!=n.consts.SortType.UNSORTED&&(e=this._rowAxis.totalSortType),e},set:function(e){this._rowAxis&&(this._rowAxis.sortType=e)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"rowSortTuple",{get:function(){var e;return this._rowAxis&&(e=this._rowAxis.sortTuple,this._rowAxis.sortType==n.consts.SortType.UNSORTED&&this._rowAxis.totalSortMeasure&&this._rowAxis.totalSortType!=n.consts.SortType.UNSORTED&&(e=[])),e},set:function(e){this._rowAxis&&(this._rowAxis.sortTuple=e)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"rowSortMeasure",{get:function(){var e;return this._rowAxis&&(e=this._rowAxis.sortMeasure,this._rowAxis.sortType==n.consts.SortType.UNSORTED&&this._rowAxis.totalSortMeasure&&this._rowAxis.totalSortType!=n.consts.SortType.UNSORTED&&(e=this._rowAxis.totalSortMeasure)),e},set:function(e){this._rowAxis&&(this._rowAxis.sortMeasure=e)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"hasRowSorting",{get:function(){if(this.rowSortType==n.consts.SortType.UNSORTED||null==this.rowSortTuple)return!1;if(1>this.rowSortTuple.length)return!0;var e=!1;try{e=this.isRowExpanded(this.rowSortTuple.slice(0,this.rowSortTuple.length-1))}catch(o){}return e},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"columnSortType",{get:function(){var e=n.consts.SortType.UNSORTED;return this._columnAxis&&(e=this._columnAxis.sortType)==n.consts.SortType.UNSORTED&&this._columnAxis.totalSortMeasure&&this._columnAxis.totalSortType!=n.consts.SortType.UNSORTED&&(e=this._columnAxis.totalSortType),e},set:function(e){this._columnAxis&&(this._columnAxis.sortType=e)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"columnSortTuple",{get:function(){var e;return this._columnAxis&&(e=this._columnAxis.sortTuple,this._columnAxis.sortType==n.consts.SortType.UNSORTED&&this._columnAxis.totalSortMeasure&&this._columnAxis.totalSortType!=n.consts.SortType.UNSORTED&&(e=[])),e},set:function(e){this._columnAxis&&(this._columnAxis.sortTuple=e)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"columnSortMeasure",{get:function(){var e;return this._columnAxis&&(e=this._columnAxis.sortMeasure,this._columnAxis.sortType==n.consts.SortType.UNSORTED&&this._columnAxis.totalSortMeasure&&this._columnAxis.totalSortType!=n.consts.SortType.UNSORTED&&(e=this._columnAxis.totalSortMeasure)),e},set:function(e){this._columnAxis&&(this._columnAxis.sortMeasure=e)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"hasColumnSorting",{get:function(){if(this.columnSortType==n.consts.SortType.UNSORTED||null==this.columnSortTuple)return!1;if(1>this.columnSortTuple.length)return!0;var e=!1;try{e=this.isColumnExpanded(this.columnSortTuple.slice(0,this.columnSortTuple.length-1))}catch(o){}return e},set:function(e){},enumerable:!0,configurable:!0}),o.prototype.reset=function(e){void 0===e&&(e=!0),this.dataLoaded=!1,this._measures=new s.AssociativeArray,this._rows=new s.AssociativeArray,this._columns=new s.AssociativeArray,this._pages=new s.AssociativeArray,this._rowLevels=[],this._columnLevels=[],this._rowTuples=[],this._columnTuples=[],this.rowTuples=[],this.columnTuples=[],this.rowDepths=[],this.columnDepths=[],this._columnMaxDepth=this._rowMaxDepth=0,this.rowType=[],e&&(this._columnAxis&&(this._columnAxis.expandedTuples=[]),this._rowAxis&&(this._rowAxis.expandedTuples=[]),this._columnAxis&&(this._columnAxis.drilledTuples=[]),this._rowAxis&&(this._rowAxis.drilledTuples=[]))},o.prototype.onBeforeQuery=function(e){this.queryType=e.queryType,this.dataLoaded=!1,e.queryType==n.consts.QueryType.SELECT&&this.reset(),e.queryType!=n.consts.QueryType.DRILL_UP&&e.queryType!=n.consts.QueryType.DRILL_DOWN||this.reset(!1)},o.prototype.onQueryComplete=function(){this.load()},o.prototype.onStructureLoaded=function(){this.dataLoaded=!1,this.reset()},o.prototype.load=function(){if(null!=this.dataStorage||(this.dataStorage=this.cube_.localDataStorage,null!=this.dataStorage))if(this.slice){if(this._columnAxis=this.slice.findAxis(n.consts.AxisName.COLUMNS_AXIS),this._rowAxis=this.slice.findAxis(n.consts.AxisName.ROWS_AXIS),0==this.columnTuples.length&&0==this.rowTuples.length||this.queryType==n.consts.QueryType.FILTER){var e,t,o;if(this.isAllExpanded()?this.dataStorage.expandAll(this.slice.drillAll):(this.dataStorage.expand([],n.consts.AxisName.ROWS_AXIS,null),this.dataStorage.expand([],n.consts.AxisName.COLUMNS_AXIS,null)),(0<this.getDrilledDownRows().length||0<this.getDrilledUpRows().length)&&this._drillRows(),(0<this.getDrilledDownColumns().length||0<this.getDrilledUpColumns().length)&&this._drillColumns(),this.queryType==n.consts.QueryType.FILTER)if(this.slice.expandAll){var s=this.getCollapsedRows();if(0<s.length)for(e=0;e<s.length;e++)try{t=this.slice.measures_.getItemAt(s[e][0]),o=s[e].slice(1),this.dataStorage.collapse(o,n.consts.AxisName.ROWS_AXIS,t)}catch(a){}if(s=this.getCollapsedColumns(),0<this.getCollapsedColumns().length)for(e=0;e<this.getCollapsedColumns().length;e++)try{t=this.slice.measures_.getItemAt(s[e][0]),o=s[e].slice(1),this.dataStorage.collapse(o,n.consts.AxisName.COLUMNS_AXIS,t)}catch(r){}}else{if(0<(s=this.getExpandedRows()).length)for(e=0;e<s.length;e++)try{t=this.slice.measures_.getItemAt(s[e][0]),o=s[e].slice(1),this.dataStorage.expand(o,n.consts.AxisName.ROWS_AXIS,t)}catch(i){}if(0<(s=this.getExpandedColumns()).length)for(e=0;e<s.length;e++)try{t=this.slice.measures_.getItemAt(s[e][0]),o=s[e].slice(1),this.dataStorage.expand(o,n.consts.AxisName.COLUMNS_AXIS,t)}catch(l){}}(0<this.getDrilledDownRows().length||0<this.getDrilledUpRows().length)&&this._drillRows(),(0<this.getDrilledDownColumns().length||0<this.getDrilledUpColumns().length)&&this._drillColumns()}this.prepare(),this.dataLoaded=!0}else this._rowAxis=this._columnAxis=null},o.prototype._drillRows=function(){var e,t,i,r,o,s=this.rowAxis.hierarchies.slice();if(s.removeItem(n.Cube.MEASURES_NAME),this.isAllDrilled())for(var a=this.getDrilledUpRows(),l=0;l<a.length;l++)try{e=this.slice.measures_.getItemAt(a[l][0]),i=a[l].slice(2),o=(r=s.getItemAt(i.length-1)).members.getItem(a[l][1]),this.dataStorage.isRowDrilledDown(i,o,e)&&this.dataStorage.drillUp(i,o,n.consts.AxisName.ROWS_AXIS,e)}catch(c){}else for(a=this.getDrilledDownRows(),l=0;l<a.length;l++)try{if("string"==typeof a[l][0]?(t=a[l][0],e=this.slice.measures_.getItemAt(a[l][1]),i=a[l].slice(3),o=(r=s.getItemAt(i.length-1)).members.getItem(a[l][2])):(e=this.slice.measures_.getItemAt(a[l][0]),i=a[l].slice(2),o=(r=s.getItemAt(i.length-1)).members.getItem(a[l][1])),void 0!==t)if(r.findLevel(t).num<o.level.num){var u=this.ascendantByLevel(o,t);i[i.length-1]=u.ordinal,r.drillUpMember(u),this.dataStorage.drillUp(i,u,n.consts.AxisName.ROWS_AXIS,e)}else this.dataStorage.drillDownTo(i,o,n.consts.AxisName.ROWS_AXIS,t);else this.dataStorage.isRowDrilledDown(i,o,e)||(this.dataStorage.hierarchize(i,o,n.consts.AxisName.ROWS_AXIS),this.dataStorage.drillDown(i,o,n.consts.AxisName.ROWS_AXIS,e))}catch(h){}},o.prototype._drillColumns=function(){var e,t,i,r=this.columnAxis.hierarchies.slice();if(r.removeItem(n.Cube.MEASURES_NAME),this.isAllDrilled())for(var o=this.getDrilledUpColumns(),s=0;s<o.length;s++)try{e=this.slice.measures_.getItemAt(o[s][0]),t=o[s].slice(2),i=r.getItemAt(t.length-1).members.getItem(o[s][1]),this.dataStorage.isColumnDrilledDown(t,i,e)&&this.dataStorage.drillUp(t,i,n.consts.AxisName.COLUMNS_AXIS,e)}catch(a){}else for(o=this.getDrilledDownColumns(),s=0;s<o.length;s++)try{e=this.slice.measures_.getItemAt(o[s][0]),t=o[s].slice(2),i=r.getItemAt(t.length-1).members.getItem(o[s][1]),this.dataStorage.isColumnDrilledDown(t,i,e)||(this.dataStorage.hierarchize(t,i,n.consts.AxisName.COLUMNS_AXIS),this.dataStorage.drillDown(t,i,n.consts.AxisName.COLUMNS_AXIS,e))}catch(l){}},o.prototype.prepare=function(){this._showUnexpandedDataAlert=!1,this.slice?(this._measures=this.slice.measures_,this._measuresPosition=this._rowAxis.hasMeasures?this._rowAxis.measuresPosition:this._columnAxis.measuresPosition,this._rows=this.slice.rows,this._columns=this.slice.columns,this._pages=this.slice.pages):(this._measures=new s.AssociativeArray,this._measuresPosition=0,this._rows=new s.AssociativeArray,this._columns=new s.AssociativeArray,this._pages=new s.AssociativeArray),this._rowLevels=[],this._columnLevels=[],this._rowTuples=[],this._columnTuples=[],this.rowTuples=[],this.columnTuples=[],this.rowDepths=[],this.columnDepths=[],this.rowType=[],this._columnMaxDepth=this._rowMaxDepth=0;var t,n=this.dataStorage.result[0],i=this.dataStorage.result[1];if(!s.nullOrUndefined(this.slice)&&!this.slice.isEmpty){if((!this._rowAxis.hasMeasures||1<this._rows.length||this.isClassic)&&this.fillRowTuples(n,[],0),("on"==e.model._options.OptionsManager.showGrandTotals||"columns"==e.model._options.OptionsManager.showGrandTotals||this._rowAxis.hasMeasures&&1==this._rows.length)&&(this.rowTuples.push([]),this.rowDepths.push(0)),!this.isClassic)if(this._rowAxis.hasMeasures&&this.multiMeasures){if(this.rowDepths=[],this.rowType=[],1<this._rows.length)for(0!=this.measuresPosition&&this.fillRowTuples1(n,[],-1,0),t=0;t<this._measures.length;t++)"on"==e.model._options.OptionsManager.showGrandTotals||"columns"==e.model._options.OptionsManager.showGrandTotals?(this._rowTuples.push([[],t]),this.rowDepths.push(0)):0!=this._measuresPosition||"off"!=e.model._options.OptionsManager.showGrandTotals&&"rows"!=e.model._options.OptionsManager.showGrandTotals||(this._rowTuples.push([[],t]),this.rowDepths.push(0)),0==this.measuresPosition&&this.fillRowTuples1(n,[],t,1);if(0==this.measuresPosition&&("on"==e.model._options.OptionsManager.showGrandTotals||"columns"==e.model._options.OptionsManager.showGrandTotals||this._rowAxis.hasMeasures&&1==this._rows.length))for(t=0;t<this._measures.length;t++)this._rowTuples.push([[],t]),this.rowDepths.push(0)}else this._rowTuples=this.rowTuples;if((!this._columnAxis.hasMeasures||1<this._columns.length)&&this.fillColumnTuples(i,[],0),this._measureDepth=-1,("on"==e.model._options.OptionsManager.showGrandTotals||"rows"==e.model._options.OptionsManager.showGrandTotals||this._columnAxis.hasMeasures&&1==this._columns.length)&&(this.columnTuples.push([]),this.columnDepths.push(0)),this._columnAxis.hasMeasures&&this.multiMeasures){if(this.columnDepths=[],1<this._columns.length)for(0!=this._measuresPosition&&this.fillColumnTuples1(i,[],-1,0),t=0;t<this._measures.length;t++)"on"==e.model._options.OptionsManager.showGrandTotals||"rows"==e.model._options.OptionsManager.showGrandTotals?(this._columnTuples.push([[],t]),this.columnDepths.push(0)):0!=this._measuresPosition||"off"!=e.model._options.OptionsManager.showGrandTotals&&"columns"!=e.model._options.OptionsManager.showGrandTotals||(this._columnTuples.push([[],t]),this.columnDepths.push(0)),0==this._measuresPosition&&this.fillColumnTuples1(i,[],t,0);if(0==this._measuresPosition&&("on"==e.model._options.OptionsManager.showGrandTotals||"rows"==e.model._options.OptionsManager.showGrandTotals||this._columnAxis.hasMeasures&&1==this._columns.length))for(t=0;t<this._measures.length;t++)this._columnTuples.push([[],t]),this.columnDepths.push(0)}else this._columnTuples=this.columnTuples;for(n=0;n<this.rowDepths.length;n++)this.rowDepths[n]>this._rowMaxDepth&&(this._rowMaxDepth=this.rowDepths[n]);for(this._rowMaxDepth++,n=0;n<this.columnDepths.length;n++)this.columnDepths[n]>this._columnMaxDepth&&(this._columnMaxDepth=this.columnDepths[n]);this._columnMaxDepth++,0<this.slice.columnsOnly.length&&this._columnAxis.hasMeasures&&this.multiMeasures&&this._columnMaxDepth++,-1==this._measureDepth?this._measureDepth=0==this.measuresPosition?0:this._columnMaxDepth:this._measureDepth++,this._showUnexpandedDataAlert&&e.uialert(e.model._labels.Labels.MESSAGE_CANT_EXPAND,e.model._labels.Labels.MESSAGE_CANT_EXPAND_TITLE,e.AlertType.ALERT)}},o.prototype.showRowTuples=function(){for(var e=0;e<this.rowTuples.length;e++);},o.prototype.showRowTuples1=function(){for(var e=0;e<this._rowTuples.length;e++)this.getRowTuple(e,!0),this.getRowMeasure(e)},o.prototype.showColumnTuples=function(){for(var e=0;e<this.columnTuples.length;e++);},o.prototype.showColumnTuples1=function(){for(var e=0;e<this._columnTuples.length;e++)this.getColumnTuple(e,!0),this.getColumnMeasure(e)},o.prototype.fillRowTuples=function(e,t,n){var i=t.length;(i=this._rows.getItemAt(this._rowAxis.hasMeasures&&t.length>=this._measuresPosition?i+1:i))&&(0==n&&(this._fillRowTuplesStart=Date.now()),this.isClassic?this._fillRowChildren(i.allMember,e,t,n):this.fillRowChildren(i.allMember,e,t,n))},o.prototype.isEmptyOnRows=function(e){for(var t=0;t<this.measures.length;t++)if(!isNaN(this.getValue(e,[],this.measures.getItemAt(t))))return!1;return!0},o.prototype.isEmptyOnColumns=function(e){for(var t=0;t<this.measures.length;t++)if(!isNaN(this.getValue([],e,this.measures.getItemAt(t))))return!1;return!0},o.prototype.fillRowChildren=function(e,t,n,i){if(null!=e){var r;r=e.hierarchy_.sortChildren(e,!1,""),r=this.sortRowsByValue(r,t,n),e=this.rowsOnly.indexOf(e.hierarchy_.uniqueName)<this.rowsOnly.length-1;for(var s=0;s<r.length;s++){var a=r.getItemAt(s);if(0==s&&this.fillRowLevels(a),null!=t[a.ordinal]&&!a.isAll){var l=n.slice(0);if(l.push(a.ordinal),!this.isEmptyOnRows(l)){var u=!a.isLeaf&&this.dataStorage.isRowDrilledDown(l,a),c=e&&this.dataStorage.isRowExpanded(l);this.rowTuples.push(l),this.rowDepths.push(i),Date.now()-this._fillRowTuplesStart<o.SCRIPT_EXECUTION_TIMEOUT&&(u?this.fillRowChildren(a,t,n,i+1):c&&this.fillRowTuples(t[a.ordinal],l,i+1))}}}}},o.prototype.fillRowTuples1=function(e,t,n,i){if(!this.isClassic){var r=t.length;(r=this._rows.getItemAt(this._rowAxis.hasMeasures&&t.length>=this._measuresPosition?r+1:r))&&this.fillRowChildren1(r.allMember,e,t,n,i)}},o.prototype.fillRowChildren1=function(e,t,n,i,r){if(null!=e){var o=n.length;e=e.hierarchy_.sortChildren(e,!1,""),e=this.sortRowsByValue(e,t,n);for(var s,a=0;a<e.length;a++){var l=e.getItemAt(a);if(null!=t[l.ordinal]&&!l.isAll){var u=n.slice(0);if(u.push(l.ordinal),!this.isEmptyOnRows(u))if(o<this._measuresPosition)if(this._rowTuples.push([u,-1]),this.rowDepths.push(r),o==this._measuresPosition-1&&this.dataStorage.isRowExpanded(u,i))for(s=0;s<this._measures.length;s++)this.dataStorage.isRowDrilledDown(u,l,s)?this.fillRowChildren1(l,t,n,s,r+2):(this._rowTuples.push([u,s]),this.rowDepths.push(r+1),this.dataStorage.isRowExpanded(u)&&this.fillRowTuples1(t[l.ordinal],u,s,r+2));else{for(s=0;s<this._measures.length;s++)this._rowTuples.push([u,s]),this.rowDepths.push(r+1);this.dataStorage.isRowDrilledDown(u,l,i)?this.fillRowChildren1(l,t,n,i,r+2):this.dataStorage.isRowExpanded(u,i)&&this.fillRowTuples1(t[l.ordinal],u,i,r+2)}else this._rowTuples.push([u,i]),this.rowDepths.push(r),this.dataStorage.isRowDrilledDown(u,l,i)?this.fillRowChildren1(l,t,n,i,r+1):this.dataStorage.isRowExpanded(u,i)&&this.fillRowTuples1(t[l.ordinal],u,i,r+1)}}}},o.prototype._fillRowChildren=function(t,n,i,r){if(null!=t){t=t.hierarchy_.sortChildren(t,!1,""),t=this.sortRowsByValue(t,n,i);for(var s=0;s<t.length;s++){var a=t.getItemAt(s);if(0==s&&this.fillRowLevels(a),null!=n[a.ordinal]&&!a.isAll){var l=i.slice(0);if(l.push(a.ordinal),!this.isEmptyOnRows(l)){var u=this.dataStorage.isRowDrilledDown(l,a),c=this.dataStorage.isRowExpanded(l),h=this.rowTuples.length;this.rowCount>l.length&&(this.rowType[h]=1,null==this.rowDepths[h]&&(this.rowDepths[h]=r)),Date.now()-this._fillRowTuplesStart<o.SCRIPT_EXECUTION_TIMEOUT?u?this._fillRowChildren(a,n,i,r+1):c&&this.fillRowTuples(n[a.ordinal],l,r+1):(u||c)&&(this._showUnexpandedDataAlert=!0),u||c?("on"!=e.model._options.OptionsManager.showTotals&&"rows"!=e.model._options.OptionsManager.showTotals||(this.rowTuples.push(l),this.rowType[this.rowTuples.length-1]=2,this.rowDepths[this.rowTuples.length-1]=r),u&&this.rowDepths[h]>r&&(this.rowDepths[h]=r,this.rowType[h]=0)):(this.rowTuples.push(l),null==this.rowType[this.rowTuples.length-1]&&(this.rowType[this.rowTuples.length-1]=0,this.rowDepths[this.rowTuples.length-1]=r))}}}}},o.prototype.fillRowLevels=function(e){this.fillLevels(this._rowLevels,e)},o.prototype.fillColumnLevels=function(e){this.fillLevels(this._columnLevels,e)},o.prototype.fillLevels=function(e,t){if(-1==e.indexOf(t.level.uniqueName))if(1>=t.level.num)e.push(t.level.uniqueName);else{var n=e.indexOf(t.parent.level.uniqueName);e.splice(n+1,0,t.level.uniqueName)}},o.prototype.isValidSortTuple=function(e,t){for(var n=0;n<e.length;n++){var i=t.getItemAt(n);if(i.hasFilter()){var r=i.members.getItemAt(e[n]);if(!i.filter.keyExists(r.uniqueName))return!1}}return!0},o.prototype.sortRowsByValue=function(e,t,i){if(!this.hasColumnSorting)return e;var r=this.columnSortTuple;if(!this.isValidSortTuple(r,this.columnsOnly))return e;for(var o,a=[],l=[],u=[],c=new s.AssociativeArray,h=0;h<e.length;h++)if(null!=t[(o=e.getItemAt(h)).ordinal]&&!o.isAll){var d=i.slice(0);d.push(o.ordinal),d=this.getValue(d,r,this.columnSortMeasure),isNaN(d)?u.push(o):(a.push(d),l.push(o))}for(e=s.ArrayUtils.sort(a,this.columnSortType!=n.consts.SortType.DESC?s.ArrayUtils.NUMERIC|s.ArrayUtils.RETURNINDEXEDARRAY:s.ArrayUtils.NUMERIC|s.ArrayUtils.DESCENDING|s.ArrayUtils.RETURNINDEXEDARRAY),h=0;h<e.length;h++)null!=(o=l[e[h]])&&c.addItem(o.uniqueName,o);for(h=0;h<u.length;h++)o=u[h],this.columnSortType==n.consts.SortType.DESC?c.addItem(o.uniqueName,o):c.addItemAt(o.uniqueName,o,h);return c},o.prototype.sortColumnsByValue=function(e,t,i){if(!this.hasRowSorting)return e;var r=this.rowSortTuple;if(!this.isValidSortTuple(r,this.rowsOnly))return e;for(var o,a=[],l=[],u=[],c=new s.AssociativeArray,h=0;h<e.length;h++)if(null!=t[(o=e.getItemAt(h)).ordinal]&&!o.isAll){var d=i.slice(0);d.push(o.ordinal),d=this.getValue(r,d,this.rowSortMeasure),isNaN(d)?u.push(o):(a.push(d),l.push(o))}for(e=s.ArrayUtils.sort(a,this.rowSortType!=n.consts.SortType.DESC?s.ArrayUtils.NUMERIC|s.ArrayUtils.RETURNINDEXEDARRAY:s.ArrayUtils.NUMERIC|s.ArrayUtils.DESCENDING|s.ArrayUtils.RETURNINDEXEDARRAY),h=0;h<e.length;h++)null!=(o=l[e[h]])&&c.addItem(o.uniqueName,o);for(h=0;h<u.length;h++)o=u[h],this.rowSortType==n.consts.SortType.DESC?c.addItem(o.uniqueName,o):c.addItemAt(o.uniqueName,o,h);return c},o.prototype.fillColumnTuples=function(e,t,n){var i=t.length;(i=this._columns.getItemAt(this._columnAxis.hasMeasures&&t.length>=this._measuresPosition?i+1:i))&&this.fillColumnChildren(i.allMember,e,t,n)},o.prototype.fillColumnChildren=function(e,t,n,i){e=e.hierarchy_.sortChildren(e,!1,""),e=this.sortColumnsByValue(e,t,n);for(var r=0;r<e.length;r++){var o=e.getItemAt(r);if(0==r&&this.fillColumnLevels(o),null!=t[o.ordinal]&&!o.isAll){var s=n.slice(0);if(s.push(o.ordinal),!this.isEmptyOnColumns(s)){var a=this.dataStorage.isColumnExpanded(s);this.columnTuples.push(s),this.columnDepths.push(i),this.dataStorage.isColumnDrilledDown(s,o)?this.fillColumnChildren(o,t,n,i+1):a&&this.fillColumnTuples(t[o.ordinal],s,i+1)}}}},o.prototype.fillColumnTuples1=function(e,t,n,i){var r=t.length;(r=this._columns.getItemAt(this._columnAxis.hasMeasures&&t.length>=this._measuresPosition?r+1:r))&&this.fillColumnChildren1(r.allMember,e,t,n,i)},o.prototype.fillColumnChildren1=function(e,t,n,i,r){var o=n.length;e=e.hierarchy_.sortChildren(e,!1,""),e=this.sortColumnsByValue(e,t,n);for(var s,a=0;a<e.length;a++){var l=e.getItemAt(a);if(null!=t[l.ordinal]&&!l.isAll){var u=n.slice(0);if(u.push(l.ordinal),!this.isEmptyOnColumns(u)){var c=this.dataStorage.isColumnExpanded(u,i);if(o<this._measuresPosition)if(this._columnAxis.hasMeasures&&this._measureDepth<r+1&&(this._measureDepth=r+1),o==this._measuresPosition-1&&c)if(this.dataStorage.isColumnDrilledDown(u,l)){for(s=0;s<this._measures.length;s++)this._columnTuples.push([u,s]),this.columnDepths.push(r);this.fillColumnChildren1(l,t,n,i,r+1)}else for(s=0;s<this._measures.length;s++)this._columnTuples.push([u,s]),this.columnDepths.push(r),this.dataStorage.isColumnExpanded(u,s)&&this.fillColumnTuples1(t[l.ordinal],u,s,r+1);else{for(s=0;s<this._measures.length;s++)this._columnTuples.push([u,s]),this.columnDepths.push(r);this.dataStorage.isColumnDrilledDown(u,l,i)?this.fillColumnChildren1(l,t,n,i,r+1):c&&this.fillColumnTuples1(t[l.ordinal],u,i,r+1)}else this._columnTuples.push([u,i]),this.columnDepths.push(r),this.dataStorage.isColumnDrilledDown(u,l,i)?this.fillColumnChildren1(l,t,n,i,r+1):c&&this.fillColumnTuples1(t[l.ordinal],u,i,r+1)}}}},Object.defineProperty(o.prototype,"isEmpty",{get:function(){return 0==this.columnTuples.length&&0==this.rowTuples.length},set:function(e){},enumerable:!0,configurable:!0}),o.prototype.getRowDepth=function(e){return this.isClassic?this.rowDepths[this._rowAxis.hasMeasures?Math.floor(e/this._measures.length):e]:this.rowDepths[e]},o.prototype.getRowType=function(e){return this.isClassic?this.rowType[this._rowAxis.hasMeasures?Math.floor(e/this._measures.length):e]:this.rowType[e]},o.prototype.getColumnType=function(e){return 1},o.prototype.getColumnDepth=function(e){return this.columnDepths[e]},o.prototype.getRowHierarchyIdx=function(e){return this._rowAxis.hasMeasures&&(e.length>this._measuresPosition||0==this._measuresPosition)?e.length:e.length-1},o.prototype.getRowHierarchy=function(e){return e=this.getRowHierarchyIdx(e),this._rows.getItemAt(e)},o.prototype.getColumnHierarchyIdx=function(e){return this._columnAxis.hasMeasures&&(e.length>this._measuresPosition||0==this._measuresPosition)?e.length:e.length-1},o.prototype.getColumnHierarchy=function(e){return e=this.getColumnHierarchyIdx(e),this._columns.getItemAt(e)},Object.defineProperty(o.prototype,"dataWidth",{get:function(){return this.columnTuples.length},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"dataHeight",{get:function(){return this.rowTuples.length},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"extendedDataWidth",{get:function(){return this._columnTuples.length},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"extendedDataHeight",{get:function(){return this.isClassic?(this.rowAxis&&this.rowAxis.hasMeasures?this._measures.length:1)*this.rowTuples.length:this._rowTuples.length},set:function(e){},enumerable:!0,configurable:!0}),o.prototype.isRowExpanded=function(e,t){return void 0===t&&(t=null),this.dataStorage.isRowExpanded(e,t)},o.prototype.isColumnExpanded=function(e,t){return void 0===t&&(t=null),this.dataStorage.isColumnExpanded(e,t)},o.prototype.isRowDrilledDown=function(e,t,n){return void 0===n&&(n=null),this.dataStorage.isRowDrilledDown(e,t,n)},o.prototype.isColumnDrilledDown=function(e,t,n){return void 0===n&&(n=null),this.dataStorage.isColumnDrilledDown(e,t,n)},o.prototype.isAggregated=function(e,t){return this.dataStorage.isAggregated(e,t)},o.prototype.getColumnTupleIndex=function(e){e=e.slice(0);for(var t=this._columnAxis.hasMeasures,n=t?e.pop():-1,i=this._columnTuples,r=0;r<i.length;r++){var o,s=!0;if(t&&this.multiMeasures){if(n!=i[r][1])continue;o=i[r][0]}else o=i[r];if(o.length==e.length){for(var a=0;a<o.length;a++)if(o[a]!=e[a]){s=!1;break}if(s)return r}}return-1},o.prototype.getRowTupleIndex=function(e){e=e.slice(0);for(var t=this._rowAxis.hasMeasures,n=t?e.pop():-1,i=this.isClassic?this.rowTuples:this._rowTuples,r=0;r<i.length;r++){var o,s=!0;if(t&&this.multiMeasures){if(n!=i[r][1])continue;o=i[r][0]}else o=i[r];if(o.length==e.length){for(var a=0;a<o.length;a++)if(o[a]!=e[a]){s=!1;break}if(s)return r}}return-1},o.prototype.getRowTuple=function(e,t){if(void 0===t&&(t=!1),0>e||null==this._rowAxis||null==this._measures)return null;if(t&&this._rowAxis.hasMeasures&&this.multiMeasures){if(this.isClassic){var n=Math.floor(e/this._measures.length);return null==this.rowTuples[n]?null:this.rowTuples[n].slice(0)}return null==this._rowTuples[e]?null:this._rowTuples[e][0].slice(0)}return null==this.rowTuples[e]?null:this.rowTuples[e].slice(0)},o.prototype.getColumnTuple=function(e,t){return void 0===t&&(t=!1),0>e||null==this._columnAxis||null==this._measures?null:t&&this._columnAxis.hasMeasures&&this.multiMeasures?null==this._columnTuples[e]?null:this._columnTuples[e][0].slice():null==this.columnTuples[e]?null:this.columnTuples[e].slice()},o.prototype.getColumnTupleByName=function(e,t){return null},o.prototype.getColumnTupleForExport=function(e){return this._columnAxis.hasMeasures&&this.multiMeasures?this._columnTuples[e]:this.columnTuples[e]},o.prototype.getRowMeasure=function(e){return null==this._rowTuples[e]?null:this._rowAxis.hasMeasures&&this.multiMeasures?this._measures.getItemAt(this._rowTuples[e][1]):null},o.prototype.getRowMeasureIndex=function(e){return null==this._rowTuples[e]?-1:this._rowAxis.hasMeasures&&this.multiMeasures?this._rowTuples[e][1]:-1},o.prototype.getColumnMeasure=function(e){return null==this._columnTuples[e]?null:this._columnAxis.hasMeasures&&this.multiMeasures?this._measures.getItemAt(this._columnTuples[e][1]):null},o.prototype.getColumnMeasureIndex=function(e){return null==this._columnTuples[e]?-1:this._columnAxis.hasMeasures&&this.multiMeasures?this._columnTuples[e][1]:-1},o.prototype.getMeasure=function(e,t){if(null==this._measures||null==this._rowAxis||null==this._columnAxis)return null;if(this.multiMeasures){if(this._rowAxis.hasMeasures){if(this.isClassic){var n=e%this._measures.length;return null==this.rowTuples[Math.floor(e/this.measures.length)]?this._measures.getItemAt(0):this._measures.getItemAt(n)}return this._measures.getItemAt(null==this._rowTuples[e]?0:this._rowTuples[e][1])}return this._measures.getItemAt(null==this._columnTuples[t]?0:this._columnTuples[t][1])}return this._measures.getItemAt(0)},o.prototype.drillThrough=function(e,t,n){return this.dataStorage.drillThrough(e,t,n)},o.prototype.save=function(e,t,n,i,r){this.dataStorage.save(e,t,n,i,r)},o.prototype.getUpdatedValue=function(e,t,n){return this.dataStorage.getUpdatedValue(e,t,n)},o.prototype.getRecordId=function(e,t,n){return null},o.prototype.getValue=function(e,t,i){var r;if(i.aggregation==n.consts.AggregationName.PERCENT)return r=this.dataStorage.getValue([],[],i),e=this.dataStorage.getValue(e,t,i),Math.abs(100*e/r);if(i.aggregation==n.consts.AggregationName.PERCENT_COLUMN)return r=this.dataStorage.getValue([],t,i),100*(e=this.dataStorage.getValue(e,t,i))/r;if(i.aggregation==n.consts.AggregationName.PERCENT_ROW)return r=this.dataStorage.getValue(e,[],i),100*(e=this.dataStorage.getValue(e,t,i))/r;if(i.aggregation==n.consts.AggregationName.INDEX){r=this.dataStorage.getValue([],[],i);var o=this.dataStorage.getValue(e,[],i),s=this.dataStorage.getValue([],t,i);return e=this.dataStorage.getValue(e,t,i),Math.abs(r*e/(s*o))}return i.aggregation==n.consts.AggregationName.DIFFERENCE?this.getDifference(e,t,i,!1):i.aggregation==n.consts.AggregationName.PERCENT_DIFFERENCE?this.getDifference(e,t,i,!0):i.aggregation==n.consts.AggregationName.RUNNING_TOTALS?this.dataStorage.getRunningTotals(e,t,i,this.rowAxis.hasMeasures?n.consts.AxisName.ROWS_AXIS:n.consts.AxisName.COLUMNS_AXIS):this.dataStorage.getValue(e,t,i)},o.prototype.getDifference=function(e,t,n,i){return this.rowAxis.hasMeasures?this.getDifferenceColumn(e,t,n,i):this.getDifferenceRow(e,t,n,i)},o.prototype.getDifferenceColumn=function(e,t,n,i){var r;if(0<this.columns.length){if(0>(r=this.getColumnTupleIndex(t)))return 0;if(0==r||0==t.length)return NaN;if(r=this.getColumnTuple(r-1),t.length!=r.length)return NaN;r=this.dataStorage.getValue(e,r,n)}else{if(e.slice(0),e.push(-1),r=this.getRowTupleIndex(e),e.pop(),0==r||0==e.length)return NaN;if(0>r)return 0;if(r=this.getRowTuple(r-1,!0),e.length!=r.length)return NaN;r=this.dataStorage.getValue(r,t,n)}return e=this.dataStorage.getValue(e,t,n),i?(e-r)/r*100:e-r},o.prototype.getDifferenceRow=function(e,t,n,i){var r;if(0<this.rows.length){if(0==(r=this.getRowTupleIndex(e))||0==e.length)return NaN;if(0>r)return 0;if(r=this.getRowTuple(r-1),e.length!=r.length)return NaN;r=this.dataStorage.getValue(r,t,n)}else{if((t=t.slice(0)).push(0),r=this.getColumnTupleIndex(t),t.pop(),0==r||0==t.length)return NaN;if(0>r)return 0;if(r=this.getColumnTuple(r-1,!0),t.length!=r.length)return NaN;r=this.dataStorage.getValue(e,r,n)}return e=this.dataStorage.getValue(e,t,n),i?(e-r)/r*100:e-r},o.prototype.calculate=function(e,t,n,i){return this.dataStorage.calculate(e,t,n,i)},o.prototype.expandData=function(e){this.dataLoaded&&null!=(e=this.slice.allHierarchies().getItem(e))&&this.expandHierarchy(e)},o.prototype.expandHierarchy=function(e){var t=this.slice.rows.keyExists(e.uniqueName)?n.consts.AxisName.ROWS_AXIS:n.consts.AxisName.COLUMNS_AXIS,i=t==n.consts.AxisName.ROWS_AXIS?this.slice.rowsOnly.length:this.slice.columnsOnly.length;if((e=t==n.consts.AxisName.ROWS_AXIS?this.slice.rowsOnly.indexOf(e.uniqueName):this.slice.columnsOnly.indexOf(e.uniqueName))+1!=i){i=[];var r=(t==n.consts.AxisName.ROWS_AXIS?this.slice.rowsOnly:this.slice.columnsOnly).slice(0,e+1);this.getTuples([],r,i),r=t==this.slice.axisWithMeasures.uniqueName?this.slice.axisWithMeasures.measuresPosition:-1;for(var o=0;o<i.length;o++)if(0<=r&&r<=e&&1<this.slice.measures_.length)for(var s=0;s<this.slice.measures_.length;s++){var a=this.slice.measures_.getItemAt(s);this.expand(i[o],t,i[o].length>r?a:null,!1)}else this.expand(i[o],t,null,!1);this.cube_.dispatch(new n.QueryCompleteEvent(n.consts.QueryType.EXPAND))}},o.prototype.getTuples=function(e,t,n,i){if(void 0===i&&(i=!0),0!=t.length)for(var r=(r=t.getItemAt(0)).hasFilter()?r.filter:r.members,o=0;o<r.length;o++){var s=r.getItemAt(o);if(!s.isAll){var a=e.slice(0);a.push(s.ordinal),(i||!i&&1==t.length)&&n.push(a.slice(0)),this.getTuples(a.slice(0),t.slice(1),n,i)}}},o.prototype.collapseData=function(e){this.dataLoaded&&null!=(e=this.slice.allHierarchies().getItem(e))&&this.collapseHierarchy(e)},o.prototype.collapseHierarchy=function(e){var t=this.slice.rows.keyExists(e.uniqueName)?n.consts.AxisName.ROWS_AXIS:n.consts.AxisName.COLUMNS_AXIS,i=t==n.consts.AxisName.ROWS_AXIS?this.slice.rowsOnly.length:this.slice.columnsOnly.length;if((e=t==n.consts.AxisName.ROWS_AXIS?this.slice.rowsOnly.indexOf(e.uniqueName):this.slice.columnsOnly.indexOf(e.uniqueName))+1!=i){i=[];var r=(t==n.consts.AxisName.ROWS_AXIS?this.slice.rowsOnly:this.slice.columnsOnly).slice(0,e+1);this.getTuples([],r,i,!1),r=t==this.slice.axisWithMeasures.uniqueName?this.slice.axisWithMeasures.measuresPosition:-1;for(var o=0;o<i.length;o++)if(0<=r&&r<=e&&1<this.slice.measures_.length)for(var s=0;s<this.slice.measures_.length;s++){var a=this.slice.measures_.getItemAt(s);this.collapse(i[o],t,i[o].length>r?a:null,!1)}else this.collapse(i[o],t,null,!1);this.cube_.dispatch(new n.QueryCompleteEvent(n.consts.QueryType.COLLAPSE))}},o.prototype.expandAll=function(){this.dataLoaded&&(this.reset(),this.slice.expandAll?this.dataStorage.expandAll(this.slice.drillAll):this.cube_.select())},o.prototype.sort=function(){this.prepare(),this.cube_.dispatchWith(e.model._state.StateEvent.REPORT_CHANGED)},Object.defineProperty(o.prototype,"lastRowsTupleInteracted",{get:function(){return this._lastRowsTupleInteracted},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"lastColsTupleInteracted",{get:function(){return this._lastColsTupleInteracted},enumerable:!0,configurable:!0}),o.prototype.expand=function(t,i,r,o){void 0===r&&(r=null),void 0===o&&(o=!0),i==n.consts.AxisName.ROWS_AXIS&&(this._lastRowsTupleInteracted=t),i==n.consts.AxisName.COLUMNS_AXIS&&(this._lastColsTupleInteracted=t);var s=this.slice.findAxis(i),a=t.slice(0);s=r&&s.hasMeasures?this._measures.indexOf(r.uniqueName):-1,a.unshift(s);var l=[];if(this.isAllExpanded())if(i==n.consts.AxisName.ROWS_AXIS){l=[];var u=this.getCollapsedRows();for(s=0;s<u.length;s++)a.toString()!=u[s].toString()&&l.push(u[s]);this.setCollapsedRows(l)}else{for(l=[],u=this.getCollapsedColumns(),s=0;s<u.length;s++)a.toString()!=u[s].toString()&&l.push(u[s]);this.setCollapsedColumns(l)}else i==n.consts.AxisName.ROWS_AXIS?((l=this.getExpandedRows().slice(0)).push(a),this.setExpandedRows(l)):((l=this.getExpandedColumns().slice(0)).push(a),this.setExpandedColumns(l));this.cube_.expand(t,i,r,o),this.cube_.dispatchWith(e.model._state.StateEvent.REPORT_CHANGED)},o.prototype.collapse=function(t,i,r,o){void 0===r&&(r=null),void 0===o&&(o=!0),i==n.consts.AxisName.ROWS_AXIS&&(this._lastRowsTupleInteracted=t.slice(0,t.length-1)),i==n.consts.AxisName.COLUMNS_AXIS&&(this._lastColsTupleInteracted=t.slice(0,t.length-1));var s=this.slice.findAxis(i),a=t.slice(0);s=r&&s.hasMeasures?this._measures.indexOf(r.uniqueName):-1,a.unshift(s);var l=[];if(this.isAllExpanded())i==n.consts.AxisName.ROWS_AXIS?((l=this.getCollapsedRows().slice(0)).push(a),this.setCollapsedRows(l)):((l=this.getCollapsedColumns().slice(0)).push(a),this.setCollapsedColumns(l));else if(i==n.consts.AxisName.ROWS_AXIS){l=[];var u=this.getExpandedRows();for(s=0;s<u.length;s++)a.toString()!=u[s].toString()&&l.push(u[s]);this.setExpandedRows(l)}else{for(l=[],u=this.getExpandedColumns(),s=0;s<u.length;s++)a.toString()!=u[s].toString()&&l.push(u[s]);this.setExpandedColumns(l)}this.cube_.collapse(t,i,r,o),this.cube_.dispatchWith(e.model._state.StateEvent.REPORT_CHANGED)},o.prototype.drillUp=function(t,i,r,o,s){if(void 0===o&&(o=null),void 0!==s)return this.drillUpTo(t,i,r,o,s);var a=this.slice.findAxis(r);s=[];var l=t.slice(0);if(l.unshift(i.uniqueName),a=o&&a.hasMeasures?this._measures.indexOf(o.uniqueName):-1,l.unshift(a),this.isAllDrilled())r==n.consts.AxisName.ROWS_AXIS?((s=this.getDrilledUpRows().slice(0)).push(l),this.setDrilledUpRows(s)):((s=this.getDrilledUpColumns().slice(0)).push(l),this.setDrilledUpColumns(s));else if(r==n.consts.AxisName.ROWS_AXIS){var u,c=this.getDrilledDownRows();for(u in c)"string"==typeof(a=c[u])[0]&&(a=a.slice(1)),a.toString()!=l.toString()&&s.push(a);this.setDrilledDownRows(s)}else{for(u in c=this.getDrilledDownColumns())"string"==typeof(a=c[u])[0]&&(a=a.slice(1)),a.toString()!=l.toString()&&s.push(a);this.setDrilledDownColumns(s)}this.cube_.drillUp(t,i,r,o),this.cube_.dispatchWith(e.model._state.StateEvent.REPORT_CHANGED)},o.prototype.ascendantByLevel=function(e,t){for(var n=e;void 0!==n&&n.level.uniqueName!=t;)n=n.parent;return n},o.prototype.drillUpTo=function(e,t,i,r,o){void 0===r&&(r=null);var s,a=this.ascendantByLevel(t,o),l=this.slice.findAxis(i),u=[],c=e.slice(0);if(c.unshift(t.uniqueName),l=r&&l.hasMeasures?this._measures.indexOf(r.uniqueName):-1,c.unshift(l),c.unshift(o),u.push(c),i==n.consts.AxisName.ROWS_AXIS){var h=this.getDrilledDownRows();for(l=h.length-1;0<=l;l--)s=t.hierarchy_.findMember("string"==typeof(c=h[l])[0]?c[2]:c[1]),void 0!==(s=this.ascendantByLevel(s,o))&&s.uniqueName==a.uniqueName||u.unshift(c);this.setDrilledDownRows(u)}else{for(l=(h=this.getDrilledDownColumns()).length-1;0<=l;l--)s=t.hierarchy_.findMember("string"==typeof(c=h[l])[0]?c[2]:c[1]),void 0!==(s=this.ascendantByLevel(s,o))&&s.uniqueName==a.uniqueName||u.unshift(c);this.setDrilledDownColumns(u)}(c=e.slice(0))[c.length-1]=a.ordinal,this.cube_.drillUp(c,a,i,r)},o.prototype.drillDown=function(t,i,r,o,s){if(void 0===o&&(o=null),void 0!==s)return this.drillDownTo(t,i,r,o,s);var a=this.slice.findAxis(r);s=[];var l=t.slice(0);if(l.unshift(i.uniqueName),a=o&&a.hasMeasures?this._measures.indexOf(o.uniqueName):-1,l.unshift(a),this.isAllDrilled())if(r==n.consts.AxisName.ROWS_AXIS){var u,c=this.getDrilledUpRows();for(u in c)(a=c[u]).toString()!=l.toString()&&s.push(a);this.setDrilledUpRows(s)}else{for(u in c=this.getDrilledUpColumns())(a=c[u]).toString()!=l.toString()&&s.push(a);this.setDrilledUpColumns(s)}else r==n.consts.AxisName.ROWS_AXIS?((s=this.getDrilledDownRows().slice(0)).push(l),this.setDrilledDownRows(s)):((s=this.getDrilledDownColumns().slice(0)).push(l),this.setDrilledDownColumns(s));this.cube_.drillDown(t,i,r,o),this.cube_.dispatchWith(e.model._state.StateEvent.REPORT_CHANGED)},o.prototype.drillDownTo=function(e,t,i,r,o){var s=this.slice.findAxis(i),a=[];(e=e.slice(0)).unshift(t.uniqueName),t=r&&s.hasMeasures?this._measures.indexOf(r.uniqueName):-1,e.unshift(t),e.unshift(o),i==n.consts.AxisName.ROWS_AXIS?((a=this.getDrilledDownRows().slice(0)).push(e),this.setDrilledDownRows(a)):((a=this.getDrilledDownColumns().slice(0)).push(e),this.setDrilledDownColumns(a))},o.dispose=function(){o.instance&&(o.instance.removeEventListeners(),o.instance.removeAllEventListeners()),o.instance=null},o.counter=0,o.SCRIPT_EXECUTION_TIMEOUT=9e3,o}(t.EventDispatcher),i.ViewDataProvider=r}(r||(r={})),function(e){var t;!function(t){var n=function(){function n(){}return n.getDataProvider=function(r){void 0===r&&(r=""),""==r&&(r=e.model._options.OptionsManager.flatView?i.FLAT:i.PIVOT);var o=null;return(o=r==i.FLAT?t.FlatViewDataProvider.getInstance():t.ViewDataProvider.getInstance()).addEventListeners(),n.dataProvider_!=o?(n.dataProvider_&&n.dataProvider_.removeEventListeners(),o.load()):e.model._options.OptionsManager.optionAffectedDataProvider&&(o.load(),e.model._options.OptionsManager.optionAffectedDataProvider=!1),n.dataProvider_=o},n.dispose=function(){t.FlatViewDataProvider.dispose(),t.ViewDataProvider.dispose(),n.dataProvider_=null},n.dataProvider_=null,n}();t.DataProviderFactory=n;var i=function(){function e(){}return e.PIVOT="pivot",e.FLAT="flat",e}();t.DataProviderType=i}((t=e.data_||(e.data_={})).dataprovider_||(t.dataprovider_={}))}(r||(r={})),function(e){!function(e){var n,i;n=e.dataprovider_||(e.dataprovider_={}),i=function(t){function n(){var n=t.call(this)||this;return n._measures=new s.AssociativeArray,n._dataLoaded=!1,n.queryCompleteHandler=function(){return n.onQueryComplete()},n._columnSortType=e.consts.SortType.UNSORTED,n._columnSortTuple=null,n.indices=[],n.colIndices=[],n.cube_=e.Cube.getInstance(),n}return h(n,t),Object.defineProperty(n.prototype,"dataStorage",{get:function(){return null!=this._dataStorage?this._dataStorage:this.cube_.localDataStorage},set:function(e){this._dataStorage=e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"slice",{get:function(){return null!=this._slice?this._slice:this.cube_.slice_},set:function(e){this._slice=e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"measures",{get:function(){return this._measures},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"multiMeasures",{get:function(){return 1<this._measures.length},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"dataLoaded",{get:function(){return this.slice&&this._dataLoaded},set:function(e){},enumerable:!0,configurable:!0}),n.getInstance=function(){return null==n.instance&&(n.instance=new n),n.instance},n.prototype.addEventListeners=function(){this.cube_.addEventListener(e.DataEvent.QUERY_COMPLETE,this.queryCompleteHandler,1)},n.prototype.removeEventListeners=function(){this.cube_.removeEventListener(e.DataEvent.QUERY_COMPLETE,this.queryCompleteHandler)},n.prototype.load=function(){null==this.dataStorage&&(this.dataStorage=this.cube_.localDataStorage,null==this.dataStorage)||this.slice&&(this.dataStorage.expand([],e.consts.AxisName.ROWS_AXIS,null),this.dataStorage.expand([],e.consts.AxisName.COLUMNS_AXIS,null),this.prepare(),this._dataLoaded=!0)},n.prototype.onQueryComplete=function(){this.load()},n.prototype.prepare=function(){var t,n,i,r=this.slice?this.slice.flatten(!0):new s.AssociativeArray;for(this.colIndices.length=0,this.colNames=new s.AssociativeArray,this._measures=new s.AssociativeArray,t=0;t<r.length;t++)i=r.getItemAt(t),null==(n=this.cube_.structure_.hierarchyToMeasure(i.uniqueName))&&(n=this.cube_.structure_.calculatedMeasures.getItem(i.uniqueName)),n&&this._measures.addItem(n.uniqueName,n),n=this.dataStorage.factKeys.indexOf(i.uniqueName),this.colIndices.push(n),this.colNames.addItem(i.uniqueName,this.colIndices.length-1);if(this.hasColumnSorting)this._sort();else for(t=0;t<r.length;t++)if((i=r.getItemAt(t)).sortName!=e.consts.SortType.UNSORTED){this._columnSortType=i.sortName,this._columnSortTuple=this.getColumnTuple(t),this._columnSortMeasure=this.cube_.structure_.hierarchyToMeasure(i.uniqueName),null==this._columnSortMeasure&&(this._columnSortMeasure=this.cube_.structure_.calculatedMeasures.getItem(i.uniqueName)),this.sort();break}},Object.defineProperty(n.prototype,"measuresPosition",{get:function(){return 0},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"rowMaxDepth",{get:function(){return 0},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"columnMaxDepth",{get:function(){return 0},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"measureDepth",{get:function(){return 0},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"rows",{get:function(){return new s.AssociativeArray},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"rowsOnly",{get:function(){return new s.AssociativeArray},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"rowLevels",{get:function(){return[]},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"columnLevels",{get:function(){return[]},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"columns",{get:function(){return new s.AssociativeArray},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"columnsOnly",{get:function(){return new s.AssociativeArray},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"pages",{get:function(){return new s.AssociativeArray},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"rowAxis",{get:function(){return new e._structure.Axis(e.consts.AxisName.ROWS_AXIS)},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"columnAxis",{get:function(){return new e._structure.Axis(e.consts.AxisName.COLUMNS_AXIS)},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"rowCount",{get:function(){return 1},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"columnCount",{get:function(){return 0},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"rowSortType",{get:function(){return null},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"rowSortTuple",{get:function(){return null},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"rowSortMeasure",{get:function(){return null},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"hasRowSorting",{get:function(){return!1},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"columnSortType",{get:function(){return this._columnSortType},set:function(t){t=t.toLowerCase(),this._columnSortType=t==e.consts.SortType.ASC||t==e.consts.SortType.DESC?t:e.consts.SortType.UNSORTED},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"columnSortTuple",{get:function(){return this._columnSortTuple},set:function(e){this._columnSortTuple=e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"columnSortMeasure",{get:function(){return this._columnSortMeasure},set:function(e){this._columnSortMeasure=e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"hasColumnSorting",{get:function(){return this._columnSortType!=e.consts.SortType.UNSORTED&&null!=this._columnSortTuple},set:function(e){},enumerable:!0,configurable:!0}),n.prototype.reset=function(t){this._dataLoaded=!1,this._sortedHierarchy=null,this._measures=new s.AssociativeArray,this.indices.length=0,this.colIndices.length=0,this.colNames=new s.AssociativeArray,this._columnSortTuple=this._columnSortMeasure=null,this._columnSortType=e.consts.SortType.UNSORTED},Object.defineProperty(n.prototype,"isEmpty",{get:function(){return 0==this.colIndices.length},set:function(e){},enumerable:!0,configurable:!0}),n.prototype.getRowDepth=function(e){return 0},n.prototype.getRowType=function(e){return 0},n.prototype.getColumnType=function(e){return 0},n.prototype.getColumnDepth=function(e){return 1},n.prototype.getRowHierarchyIdx=function(e){return 0},n.prototype.getRowHierarchy=function(e){return this.getColumnHierarchy(e)},n.prototype.getColumnHierarchyIdx=function(e){return 0},n.prototype.getColumnHierarchy=function(e){return this.cube_.structure_.allHierarchies().getItem(this.dataStorage.keys[e[0]])},Object.defineProperty(n.prototype,"dataWidth",{get:function(){return this.colIndices.length},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"dataHeight",{get:function(){return this.dataStorage?this.dataStorage.result[0]:0},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"extendedDataWidth",{get:function(){return this.colIndices.length},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"extendedDataHeight",{get:function(){return this.dataStorage.getRowCount()},set:function(e){},enumerable:!0,configurable:!0}),n.prototype.isRowExpanded=function(e,t){return!1},n.prototype.isColumnExpanded=function(e,t){return!1},n.prototype.isRowDrilledDown=function(e,t,n){return!1},n.prototype.isColumnDrilledDown=function(e,t,n){return!1},n.prototype.isAggregated=function(e,t){return!1},n.prototype.getColumnTupleIndex=function(e){for(var t=0;t<this.colIndices.length;t++)if(this.colIndices[t].toString()==e.toString())return t;return-1},n.prototype.getRowTupleIndex=function(e){if(!(0<this.indices.length&&e[0]<this.indices.length))return e[0];for(var t=0;t<this.indices.length;t++)if(this.indices[t].toString()==e.toString())return t;return-1},n.prototype.getRowTuple=function(e,t){return 0>e?null:0<this.indices.length&&e<this.indices.length?[this.indices[e]]:[e]},n.prototype.getColumnTuple=function(e,t){return 0>e?null:0<this.colIndices.length&&e<this.colIndices.length?[this.colIndices[e]]:[e]},n.prototype.getColumnTupleByName=function(e,t){void 0===t&&(t=!1);var n=this.colNames.getItem(e);return this.getColumnTuple(n,t)},n.prototype.getColumnTupleForExport=function(e){return null},n.prototype.getRowMeasure=function(e){return null},n.prototype.getRowMeasureIndex=function(e){return 0},n.prototype.getColumnMeasure=function(e){return null},n.prototype.getColumnMeasureIndex=function(e){return 0},n.prototype.getMeasure=function(e,t){var n=this.getColumnTuple(t);return this._measures.getItem(this.dataStorage.factKeys[n[0]])},n.prototype.getUpdatedValue=function(e,t,n){return this.dataStorage.getFlatUpdatedValue(null==e?null:e[0],n)},n.prototype.getValue=function(t,n,i){return null==n&&null==t?this.dataStorage.getValue([],[],i):this.dataStorage.getFlatValue(t[0],n[0],i,i.type!=e.types.MeasureType.COUNT)},n.prototype.getRecordId=function(e,t,n){return null==t&&null==e?null:this.dataStorage.getRecordId(e[0],t[0],n)},n.prototype.sort=function(){this._sort()},n.prototype._sort=function(){if(this.hasColumnSorting){this._columnSortMeasure.type!=e.types.MeasureType.COUNT?this.sortRowsByValue():this.sortRowsByMembers(),this._sortedHierarchy&&(this._sortedHierarchy.sortName=e.consts.SortType.UNSORTED);var t=this.getColumnHierarchy(this._columnSortTuple);t&&(t.sortName=this._columnSortType,this._sortedHierarchy=t)}},n.prototype.sortRowsByValue=function(){var t,n,i=[];for(t=0;t<this.extendedDataHeight;t++)n=this.getValue([t],this._columnSortTuple,this._columnSortMeasure),i[t]=isNaN(n)?Number.NEGATIVE_INFINITY:n;this.indices=s.ArrayUtils.sort(i,this._columnSortType!=e.consts.SortType.DESC?s.ArrayUtils.NUMERIC|s.ArrayUtils.RETURNINDEXEDARRAY:s.ArrayUtils.NUMERIC|s.ArrayUtils.DESCENDING|s.ArrayUtils.RETURNINDEXEDARRAY)},n.prototype.sortRowsByMembers=function(){var t=this,n=this.getColumnHierarchy(this._columnSortTuple);if(null!=n){var i,r,o=[],a=(i=n.levels_.getItemAt(1).type)==e.types.LevelType.YEAR||i==e.types.LevelType.MONTH||i==e.types.LevelType.DAY;for(i=0;i<this.extendedDataHeight;i++)r=this.getValue([i],this._columnSortTuple,this._columnSortMeasure),r=n.members.getItemAt(r),o.push(a?r.uniqueName:r.caption);if(a){for(this.sortedIndex={},a=n.sortChildren(n.allMember,!1,this._columnSortType),i=0;i<n.members.length;i++)r=n.members.getItemAt(i),this.sortedIndex[r.uniqueName]=a.indexOf(r.uniqueName);this.indices=s.ArrayUtils.sort(o,s.ArrayUtils.RETURNINDEXEDARRAY,(function(e,n){return t.sortFunction(e,n)}))}else this.indices=s.ArrayUtils.sort(o,this._columnSortType!=e.consts.SortType.DESC?s.ArrayUtils.RETURNINDEXEDARRAY:s.ArrayUtils.DESCENDING|s.ArrayUtils.RETURNINDEXEDARRAY)}},n.prototype.sortFunction=function(e,t){var n=this.sortedIndex[e],i=this.sortedIndex[t];return n>i?1:n<i?-1:0},n.prototype.calculate=function(e,t,n,i){return this.dataStorage.calculateFlat(e,t,n,i)},n.prototype.expandData=function(e){},n.prototype.collapseData=function(e){},n.prototype.expandAll=function(){},Object.defineProperty(n.prototype,"lastRowsTupleInteracted",{get:function(){return null},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"lastColsTupleInteracted",{get:function(){return null},enumerable:!0,configurable:!0}),n.prototype.expand=function(e,t,n,i){},n.prototype.collapse=function(e,t,n,i){},n.prototype.drillUp=function(e,t,n,i){},n.prototype.drillDown=function(e,t,n,i){},n.prototype.drillThrough=function(e,t,n){return[]},n.prototype.save=function(e,t,n,i,r){this.dataStorage.saveFlat(e,t,n,i,r)},Object.defineProperty(n.prototype,"isClassic",{get:function(){return!1},set:function(e){},enumerable:!0,configurable:!0}),n.dispose=function(){n.instance&&(n.instance.removeAllEventListeners(),n.instance.removeEventListeners()),n.instance=null},n}(t.EventDispatcher),n.FlatViewDataProvider=i}(e.data_||(e.data_={}))}(r||(r={})),function(e){!function(e){!function(e){var t=function(t){function n(){return t.call(this)||this}return h(n,t),n.getInstance=function(){return null==n._instance&&((n._instance=new n)._name="chart"+e.ViewDataProvider.counter),n._instance},Object.defineProperty(n.prototype,"isClassic",{get:function(){return!1},set:function(e){},enumerable:!0,configurable:!0}),n.dispose=function(){n._instance&&(n._instance.removeEventListeners(),n._instance.removeAllEventListeners()),n._instance=null},n}(e.ViewDataProvider);e.ChartDataProvider=t}(e.dataprovider_||(e.dataprovider_={}))}(e.data_||(e.data_={}))}(r||(r={})),function(e){var t;!function(t){var n=function(){function t(e,t){void 0===t&&(t=""),this.data={},this.uniqueName=e,this.caption=t}return Object.defineProperty(t.prototype,"caption",{get:function(){return this._caption},set:function(t){null==t&&(t=""),t=t.toString(),this._caption="number"==typeof t?""+t:""==t.trim()?e.model._labels.Labels.MEMBER_BLANK:t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"uniqueName",{get:function(){return this._uniqueName},set:function(e){this._uniqueName=e},enumerable:!0,configurable:!0}),t.prototype._getProperty=function(e){if(this._hasProperty(e))return this.data[e]},t.prototype._setProperty=function(e,t){this.data[e]=t},t.prototype._hasProperty=function(e){return this.data.hasOwnProperty(e)},t.prototype.toString=function(){return this.uniqueName},t.prototype.toObject=function(){var e={};return e.caption=this.caption,e.uniqueName=this.uniqueName,e},t.prototype.fromObject=function(e){for(var t in e)null!=this[t]&&(this[t]=e[t])},t}();t.GenericElement=n}((t=e.data_||(e.data_={}))._structure||(t._structure={}))}(r||(r={})),function(e){var t,n,i;t=e.data_||(e.data_={}),i=function(i){function r(e,o){void 0===o&&(o="");var a=i.call(this,e,o)||this;a._type=1,a._origin=0,a._folder="",a._allMemberName="",a._sortName=r.DEFAULT_SORT_NAME,a._sortAs=null,a._filter=new s.AssociativeArray,a._filterMembers=new s.AssociativeArray,a.__filterMembersChanged=!1,a._filterMembersNegated=new s.AssociativeArray,a.__filterMembersNegatedChanged=!1,a._members=new s.AssociativeArray,a._drilledDownMembers=new s.AssociativeArray,a._levels=new s.AssociativeArray,a._isHierarchy=!1,a._filterEnabled=!0,a._predefinedDrillDowns=[],a.cache=[],a.cacheWithDescendants=[],a._filterType=t.consts.FilterType.NONE,a._filterQuantity=-1,a._filterMeasureName="";var l=e+".(All)",u=new n.GenericLevel(l,"All",0);a.addLevel(u);var c=new n.GenericMember(u=e+".(All Member)","All");return a.addMember(c,l),a.allMemberName=u,a}return h(r,i),Object.defineProperty(r.prototype,"dimension",{get:function(){return this._dimension},set:function(e){this._dimension=e},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"type",{get:function(){return this._type},set:function(e){this._type=e},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"origin",{get:function(){return this._origin},set:function(e){this._origin=e,this._isHierarchy=1==(1&e)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"quantity",{get:function(){return this.members.length},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"folder",{get:function(){return this._folder},set:function(e){this._folder="undefined"==e?"":e},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"levels_",{get:function(){return this._levels},set:function(e){},enumerable:!0,configurable:!0}),r.prototype.addLevel=function(e){e.hierarchy=this,this._levels.addItem(e.uniqueName,e),this._drilledDownMembers.addItemAt(e.uniqueName,new s.AssociativeArray,e.num)},r.prototype.addLevelAt=function(e,t){e.hierarchy=this,this._levels.addItemAt(e.uniqueName,e,t);for(var n=2;n<this._levels.length;n++)this._levels.getItemAt(n).num++;this._drilledDownMembers.addItemAt(e.uniqueName,new s.AssociativeArray,e.num)},r.prototype.findLevel=function(e){return this._levels.getItem(e)},Object.defineProperty(r.prototype,"isHierarchy",{get:function(){return 2<this.levels_.length},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"isMeasures",{get:function(){return this.uniqueName==t.Cube.MEASURES_NAME},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"filterEnabled",{get:function(){return this._filterEnabled},set:function(e){this._filterEnabled=e},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"members",{get:function(){return this._members},set:function(e){},enumerable:!0,configurable:!0}),r.prototype.clear=function(){this._members=new s.AssociativeArray},r.prototype.addMember=function(t,n,i){void 0===n&&(n=""),void 0===i&&(i=""),""==n&&(n=this.levels_&&1<this.levels_.length?this.levels_.getItemAt(1).uniqueName:this.uniqueName+"."+this.caption,this.caption==e.model._labels.Labels.MEMBER_BLANK&&(n=this.uniqueName+".[]")),null==this.findMember(t.uniqueName)&&(t.hierarchy_=this,t.parent=this.findMember(i)||this.allMember,t.level=this.findLevel(n),null!=t.parent&&t.parent.addChild(t),t.ordinal=this._members.length,this._members.addItem(t.uniqueName,t),this.cache=[],this.cacheWithDescendants=[])},r.prototype.drillDownMember=function(e){null!=e&&(e.isDrilledDown=!0,this._drilledDownMembers.getItem(e.level.uniqueName).addItem(e.uniqueName,e))},r.prototype.drillUpMember=function(e){e.isDrilledDown=!1,this._drilledDownMembers.getItem(e.level.uniqueName).removeItem(e.uniqueName),e=e.descendants;for(var t=0;t<e.length;t++){var n=e.getItemAt(t);n.isDrilledDown&&this.drillUpMember(n)}},r.prototype.drilledDownMembers=function(e){return this._drilledDownMembers.getItem(e.uniqueName)},Object.defineProperty(r.prototype,"drillDownDepth",{get:function(){for(var e=1;e<this.levels_.length;e++){var t=this.levels_.getItemAt(e);if(0==this.drilledDownMembers(t).length)return e}return 1},set:function(e){},enumerable:!0,configurable:!0}),r.prototype.findMemberByCaption=function(e){for(var t=0;t<this.members.length;t++)if(this.members.getItemAt(t).caption==e)return this.members.getItemAt(t);return null},r.prototype.findMember=function(e){return this.members.getItem(e)},r.prototype.clearSort=function(e){void 0===e&&(e=!1),this.sortName=e?t.consts.SortType.UNSORTED:r.DEFAULT_SORT_NAME},r.prototype.clearSortCache=function(){this.cache=[]},Object.defineProperty(r.prototype,"sortName",{get:function(){return this._sortName},set:function(e){this._sortName=e},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"sortAs",{get:function(){return this._sortAs},set:function(e){this._sortAs=e},enumerable:!0,configurable:!0}),r.prototype.sort=function(){return this.sortChildren(this.allMember)},r.prototype.sortChildren=function(e,n,i){if(void 0===n&&(n=!0),void 0===i&&(i=""),null==e)return new s.AssociativeArray;if(t.consts.SortType.isValid(i)||(i=this._sortName),n){if(null!=this.cacheWithDescendants[e.ordinal]){if(null!=this.cacheWithDescendants[e.ordinal][i])return this.cacheWithDescendants[e.ordinal][i];if(!this.isHierarchy){if(i==t.consts.SortType.DESC&&null!=this.cacheWithDescendants[e.ordinal][t.consts.SortType.ASC])return this.cacheWithDescendants[e.ordinal][t.consts.SortType.DESC]=this.cacheWithDescendants[e.ordinal][t.consts.SortType.ASC].reverse(),this.cacheWithDescendants[e.ordinal][t.consts.SortType.DESC];if(i==t.consts.SortType.ASC&&null!=this.cacheWithDescendants[e.ordinal][t.consts.SortType.DESC])return this.cacheWithDescendants[e.ordinal][t.consts.SortType.ASC]=this.cacheWithDescendants[e.ordinal][t.consts.SortType.DESC].reverse(),this.cacheWithDescendants[e.ordinal][t.consts.SortType.ASC]}}}else if(null!=this.cache[e.ordinal]){if(null!=this.cache[e.ordinal][i])return this.cache[e.ordinal][i];if(!this.isHierarchy){if(i==t.consts.SortType.DESC&&null!=this.cache[e.ordinal][t.consts.SortType.ASC])return this.cache[e.ordinal][t.consts.SortType.DESC]=this.cache[e.ordinal][t.consts.SortType.ASC].reverse(),this.cache[e.ordinal][t.consts.SortType.DESC];if(i==t.consts.SortType.ASC&&null!=this.cache[e.ordinal][t.consts.SortType.DESC])return this.cache[e.ordinal][t.consts.SortType.ASC]=this.cache[e.ordinal][t.consts.SortType.DESC].reverse(),this.cache[e.ordinal][t.consts.SortType.ASC]}}var r,o=this._sortName;return this._sortName=i,1e6<(r=n?e.descendants:e.children).length?r=n?e.descendants:e.children:this._sortName==t.consts.SortType.UNSORTED?0<(r=n?e.descendants:e.children).length&&r.getItemAt(0).isAll&&r.removeItemAt(0):r=this.sortByCaption(e,n),n?(null==this.cacheWithDescendants[e.ordinal]&&(this.cacheWithDescendants[e.ordinal]=[]),this.cacheWithDescendants[e.ordinal][i]=r):(null==this.cache[e.ordinal]&&(this.cache[e.ordinal]=[]),this.cache[e.ordinal][i]=r),this._sortName=o,r},r.prototype._sortByCaptionOptimized=function(e,n){var i=(r=e.getChildrenCaptions()).captions,r=r.members;this._sortName==t.consts.SortType.DESC&&(i=i.reverse(),r=r.reverse());for(var o=new s.AssociativeArray,a=0;a<i.length;a++)if(null!=i[a]){var l;this._sortName==t.consts.SortType.ASC&&(l=s.ArrayUtils.sort(i[a],s.ArrayUtils.CASEINSENSITIVE|s.ArrayUtils.RETURNINDEXEDARRAY)),this._sortName==t.consts.SortType.DESC&&(l=s.ArrayUtils.sort(i[a],s.ArrayUtils.DESCENDING|s.ArrayUtils.CASEINSENSITIVE|s.ArrayUtils.RETURNINDEXEDARRAY));for(var u=0;u<l.length;u++){var c=r[a][l[u]];o.addUniqueItem(c.uniqueName,c),n&&0<(c=this.sortChildren(c)).length&&o.concat(c,!1)}}return o},r.prototype.checkIfMonth=function(n){try{if("month"==n.level.caption.toLowerCase())return!0;if(12<n.children.length)return!1;for(var i=0;i<n.children.length;i++){var r=n.children.getItemAt(i).caption.split(" ")[0];if(-1==e.model._labels.Labels.MONTHS_LABELS.indexOf(r)&&-1==e.model._labels.Labels.MONTHS_LABELS_SHORT.indexOf(r))return!1}var o=n.hierarchy_.levels_.indexOf(n.level.uniqueName);return!(n.hierarchy_.levels_.length<o+2||(n.hierarchy_.levels_.getItemAt(o+1).type=t.types.LevelType.MONTH,n.hierarchy_.levels_.getItemAt(o+2).type=t.types.LevelType.DAY,0))}catch(s){}return!1},r.prototype.sortByCaption=function(e,n){var i=this.levels_.getItemAt(e.level.num+1),r=i&&i.type==t.types.LevelType.YEAR,o=i&&i.type==t.types.LevelType.HALFYEAR,a=i&&i.type==t.types.LevelType.QUARTER,l=i&&i.type==t.types.LevelType.MONTH,u=i&&i.type==t.types.LevelType.WEEK,c=i&&i.type==t.types.LevelType.DAY,h=i&&i.type==t.types.LevelType.HOUR,d=i&&i.type==t.types.LevelType.MINUTE,A=i&&i.type==t.types.LevelType.NUMBER,p=i&&i.type==t.types.LevelType.TIME||i&&i.type==t.types.LevelType.DATE,f=i&&i.type==t.types.LevelType.TIME_DATE,g=this.sortAs==t.consts.SortType.NUMERIC_RANGE;if(!(a||l||u||p||c||h||d||A||f)){if(1e3<e.children.length)return this._sortByCaptionOptimized(e,n);this.checkIfMonth(e)&&(l=!0)}var m=e.children.toArray();for(a||l||u||c||h||d||f||o||r?m=this.sortOrdinal(m,i?i.type:-1):p?m=this.sortDate(m):A?(this._sortName==t.consts.SortType.ASC&&s.ArrayUtils.sortOn(m,"levelOrdinal",s.ArrayUtils.NUMERIC),this._sortName==t.consts.SortType.DESC&&s.ArrayUtils.sortOn(m,"levelOrdinal",s.ArrayUtils.DESCENDING|s.ArrayUtils.NUMERIC)):g?m.sort(this.numericRangeSort):(this._sortName==t.consts.SortType.ASC&&s.ArrayUtils.sortOn(m,"caption",s.ArrayUtils.CASEINSENSITIVE),this._sortName==t.consts.SortType.DESC&&s.ArrayUtils.sortOn(m,"caption",s.ArrayUtils.DESCENDING|s.ArrayUtils.CASEINSENSITIVE)),i=new s.AssociativeArray,r=0;r<m.length;r++)i.addUniqueItem((o=m[r]).uniqueName,o),n&&!e.isLeaf&&0<(o=this.sortChildren(o,n)).length&&i.concat(o,!1);return i},r.prototype.sortOrdinal=function(e,n){return n==t.types.LevelType.MONTH?e=this.sortMonths(e):n==t.types.LevelType.DAY?e=this.sortWeekdays(e):n==t.types.LevelType.QUARTER||n==t.types.LevelType.HALFYEAR||n==t.types.LevelType.YEAR?e=s.ArrayUtils.sortOn(e,"caption",s.ArrayUtils.CASEINSENSITIVE|(this.sortName==t.consts.SortType.DESC?s.ArrayUtils.DESCENDING:0)):(this.sortName==t.consts.SortType.ASC&&s.ArrayUtils.sortOn(e,"levelOrdinal",s.ArrayUtils.NUMERIC),this.sortName==t.consts.SortType.DESC&&s.ArrayUtils.sortOn(e,"levelOrdinal",s.ArrayUtils.DESCENDING|s.ArrayUtils.NUMERIC)),e},r.prototype.sortMonths=function(e){for(var n=this,i=[],r=[],o=0;o<e.length;++o){var a=e[o];this._checkIfMonth(a.caption)?r.push(a):i.push(a)}return this.sortName==t.consts.SortType.ASC&&s.ArrayUtils.sortOn(i,"caption",s.ArrayUtils.CASEINSENSITIVE),this.sortName==t.consts.SortType.DESC&&s.ArrayUtils.sortOn(i,"caption",s.ArrayUtils.DESCENDING|s.ArrayUtils.CASEINSENSITIVE),r.sort((function(e,t){return n.dateTimeMonthSort(e,t)})),r.concat(i)},r.prototype.sortWeekdays=function(e){for(var n=this,i=[],r=[],o=0;o<e.length;++o){var a=e[o];this._checkIfWeekday(a.caption)?r.push(a):i.push(a)}return this.sortName==t.consts.SortType.ASC&&s.ArrayUtils.sortOn(i,"caption",s.ArrayUtils.CASEINSENSITIVE|s.ArrayUtils.NUMERIC),this.sortName==t.consts.SortType.DESC&&s.ArrayUtils.sortOn(i,"caption",s.ArrayUtils.DESCENDING|s.ArrayUtils.CASEINSENSITIVE|s.ArrayUtils.NUMERIC),r.sort((function(e,t){return n.weekDaySort(e,t)})),r.concat(i)},r.prototype._checkIfMonth=function(t){return-1!=e.model._labels.Labels.MONTHS_LABELS.indexOf(t)||-1!=e.model._labels.Labels.MONTHS_LABELS_SHORT.indexOf(t)},r.prototype._checkIfWeekday=function(t){return-1!=e.model._labels.Labels.WEEKDAYS_LABELS.indexOf(t)||-1!=e.model._labels.Labels.WEEKDAYS_LABELS_SHORT.indexOf(t)},r.prototype.dateTimeMonthSort=function(n,i){var r=e.model._labels.Labels.MONTHS_LABELS.indexOf(this.sortName==t.consts.SortType.ASC?n.caption:i.caption);-1==r&&(r=e.model._labels.Labels.MONTHS_LABELS_SHORT.indexOf(this.sortName==t.consts.SortType.ASC?n.caption:i.caption));var o=e.model._labels.Labels.MONTHS_LABELS.indexOf(this.sortName==t.consts.SortType.ASC?i.caption:n.caption);return-1==o&&(o=e.model._labels.Labels.MONTHS_LABELS_SHORT.indexOf(this.sortName==t.consts.SortType.ASC?i.caption:n.caption)),r>o?1:r<o?-1:0},r.prototype.weekDaySort=function(n,i){var r=e.model._labels.Labels.WEEKDAYS_LABELS.indexOf(this.sortName==t.consts.SortType.ASC?n.caption:i.caption);-1==r&&(r=e.model._labels.Labels.WEEKDAYS_LABELS_SHORT.indexOf(this.sortName==t.consts.SortType.ASC?n.caption:i.caption));var o=e.model._labels.Labels.WEEKDAYS_LABELS.indexOf(this.sortName==t.consts.SortType.ASC?i.caption:n.caption);return-1==o&&(o=e.model._labels.Labels.WEEKDAYS_LABELS_SHORT.indexOf(this.sortName==t.consts.SortType.ASC?i.caption:n.caption)),r>o?1:r<o?-1:0},r.prototype.sortDate=function(e){return this._sortName==t.consts.SortType.ASC&&s.ArrayUtils.sortOn(e,"levelOrdinal",s.ArrayUtils.NUMERIC),this._sortName==t.consts.SortType.DESC&&s.ArrayUtils.sortOn(e,"levelOrdinal",s.ArrayUtils.DESCENDING|s.ArrayUtils.NUMERIC),e},r.prototype.numericRangeSort=function(e,t){var n=e.caption.match(/(?:\d*\.)?\d+/),i=t.caption.match(/(?:\d*\.)?\d+/);return(n=n&&0<n.length?parseFloat(n[0]):Number.POSITIVE_INFINITY)>(i=i&&0<i.length?parseFloat(i[0]):Number.POSITIVE_INFINITY)?1:n<i?-1:0},r.prototype.membersByLevel=function(e){e=this._levels.getItem(e).num;for(var t=new s.AssociativeArray,n=this.sort(),i=0;i<n.length;i++){var r=n.getItemAt(i);r&&r.level.num==e&&t.addItem(r.uniqueName,r)}return t},Object.defineProperty(r.prototype,"filter",{get:function(){return 0<this._filter.length?this._filter:this.filterMembers},set:function(e){this._filter=e},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"filterMembers",{get:function(){return this.__filterMembersNegatedChanged&&(this._filterMembers=new s.AssociativeArray,0<this._filterMembersNegated.length&&(this._filterMembers=this.createOpposite(this._filterMembersNegated)),this.__filterMembersNegatedChanged=!1),this._filterMembers},set:function(e){e.length+1==this.members.length&&(e=new s.AssociativeArray),this.__filterMembersChanged=!0,this._filterMembers=e,this._filterMembersNegated=new s.AssociativeArray},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"filterMembersNegated",{get:function(){return this.__filterMembersChanged&&(this._filterMembersNegated=new s.AssociativeArray,0<this._filterMembers.length&&(this._filterMembersNegated=this.createOpposite(this._filterMembers)),this.__filterMembersChanged=!1),this._filterMembersNegated},set:function(e){e.length+1==this.members.length&&(e=new s.AssociativeArray),this.__filterMembersNegatedChanged=!0,this._filterMembersNegated=e,this._filterMembers=new s.AssociativeArray},enumerable:!0,configurable:!0}),r.prototype.createOpposite=function(e){for(var t=this.members.slice(1),n=0;n<e.length;n++){var i=e.getItemAt(n);t.removeItem(i.uniqueName),this.removeMemberChildren(t,i),i.parent&&this.removeMemberParent(t,i.parent)}return this.checkMemberChildren(t,this.allMember),t},r.prototype.checkMemberChildren=function(e,t){for(var n=0;n<t.children.length;n++){var i=t.children.getItemAt(n);0<i.children.length&&(e.getItem(i.uniqueName)?e.getItem(i.children.getItemAt(0).uniqueName)&&this.removeMemberChildren(e,i):this.checkMemberChildren(e,i))}},r.prototype.removeMemberChildren=function(e,t){if(t)for(var n=t.children,i=0;i<n.length;i++)e.removeItem(n.getItemAt(i).uniqueName),this.removeMemberChildren(e,n.getItemAt(i))},r.prototype.removeMemberParent=function(e,t){t&&(e.removeItem(t.uniqueName),t.parent&&this.removeMemberParent(e,t.parent))},Object.defineProperty(r.prototype,"filterType",{get:function(){return-1==this._filterQuantity?t.consts.FilterType.NONE:this._filterType},set:function(e){e=e.toLowerCase(),this._filterType=e==t.consts.FilterType.TOP||e==t.consts.FilterType.BOTTOM?e:t.consts.FilterType.NONE},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"filterQuantity",{get:function(){return this._filterQuantity},set:function(e){isNaN(e)||1>e?(this._filterQuantity=-1,this._filterType=t.consts.FilterType.NONE):this._filterQuantity=e},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"filterMeasureName",{get:function(){return this._filterMeasureName},set:function(e){this._filterMeasureName=e},enumerable:!0,configurable:!0}),r.prototype.clearFilter=function(){this.clearMembersFilter(),this.clearValuesFilter()},r.prototype.clearMembersFilter=function(){this._filter=new s.AssociativeArray,this._filterMembers=new s.AssociativeArray,this._filterMembersNegated=new s.AssociativeArray},r.prototype.clearValuesFilter=function(){this._filter=new s.AssociativeArray,this._filterQuantity=-1,this._filterType=t.consts.FilterType.NONE,this._filterMeasureName=""},r.prototype.hasFilter=function(){return this.hasMembersFilter()||this.hasValuesFilter()},r.prototype.hasMembersFilter=function(){return 0<this._filterMembers.length||0<this._filterMembersNegated.length},r.prototype.hasValuesFilter=function(){return this._filterType&&this.filterType!=t.consts.FilterType.NONE},r.prototype.filterByLevel=function(e){for(var t=new s.AssociativeArray,n=0<this._filter.length?this._filter:this._filterMembers,i=0;i<n.length;i++){var r=n.getItemAt(i);r.level.num==e&&t.addItem(r.uniqueName,r)}return t},Object.defineProperty(r.prototype,"allMemberName",{get:function(){return this._allMemberName},set:function(e){this._allMemberName=e},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"allMember",{get:function(){return this._allMember||(this._allMember=this.findMember(this._allMemberName),this.drillDownMember(this._allMember)),this._allMember},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"predefinedDrillDowns",{get:function(){return this._predefinedDrillDowns},set:function(e){this._predefinedDrillDowns=e},enumerable:!0,configurable:!0}),r.toObject=function(e){var t={};return t.uniqueName=e.uniqueName,t.caption=e.caption,t.filterEnabled=e.filterEnabled,t.sortName=e.sortName,t.sortAs=e.sortAs,t.type=e.type,t.filter=r.filterToObject(e),t},r.filterToObject=function(e){if(0==e.hasFilter())return null;var t={};return e.hasValuesFilter()&&(t={type:e.filterType,quantity:e.filterQuantity,measure:e.filterMeasureName,measureName:e.filterMeasureName}),e.hasMembersFilter()&&(e.filterMembers.length<e.members.length/2?t.members=e.filterMembers.toArray(!0):(t.negation=!0,t.members=e.filterMembersNegated.toArray(!0))),t},r.fromObject=function(e,t){return void 0===t&&(t=null),null==t&&(t=new r(e.uniqueName)),e.hasOwnProperty("caption")&&(t.caption=e.caption),e.hasOwnProperty("sortName")&&(t.sortName=e.sortName),e.hasOwnProperty("sortAs")&&(t.sortAs=e.sortAs),e.hasOwnProperty("filterEnabled")&&(t.filterEnabled=e.filterEnabled),e.hasOwnProperty("type")&&(t.type=e.type),e.hasOwnProperty("origin")&&(t.origin=e.origin),e.hasOwnProperty("folder")&&(t.folder=e.folder),e.hasOwnProperty("filter")&&r.filterFromObject(e.filter,t),e.hasOwnProperty("allMemberName")&&(t.allMemberName=e.allMemberName),t},r.filterFromObject=function(e,n){if(null!=e){if(e.hasOwnProperty("members")){for(var i,r,o=new s.AssociativeArray,a=0;a<e.members.length;a++)null!=(r=n.findMember(i="string"==typeof e.members[a]?e.members[a]:e.members[a].uniqueName))&&o.addItem(i,r);e.negation?n.filterMembersNegated=o:n.filterMembers=o}i=e.hasOwnProperty("type")?e.type:t.consts.FilterType.NONE,r=e.hasOwnProperty("quantity")?Number(e.quantity):-1,o="",e.hasOwnProperty("measureName")&&(o=e.measureName),e.hasOwnProperty("measure")&&(o=e.measure),i!=t.consts.FilterType.NONE&&(n.filterType=i,n.filterQuantity=r,n.filterMeasureName=o)}},r.DEFAULT_SORT_NAME="asc",r}((n=t._structure||(t._structure={})).GenericElement),n.GenericHierarchy=i}(r||(r={})),function(e){!function(e){!function(e){var t=function(e){function t(t,n,i){return void 0===n&&(n=""),void 0===i&&(i=0),(t=e.call(this,t,n)||this)._type=1,t._properties=new s.AssociativeArray,t._number=i,t}return h(t,e),Object.defineProperty(t.prototype,"num",{get:function(){return this._number},set:function(e){this._number=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"type",{get:function(){return this._type},set:function(e){this._type=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isLast",{get:function(){return this._hierarchy.levels_.length-1==this._number},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hierarchy",{get:function(){return this._hierarchy},set:function(e){this._hierarchy=e},enumerable:!0,configurable:!0}),t}(e.GenericElement);e.GenericLevel=t}(e._structure||(e._structure={}))}(e.data_||(e.data_={}))}(r||(r={})),function(e){!function(e){var t,n;n=function(t){function n(e,n){var i=t.call(this,e,n)||this;return i._ordinal=1,i._levelOrdinal=0,i._isDrilledDown=!1,i._numDescendants=-1,i._hasCaptionSorting=-1,i}return h(n,t),Object.defineProperty(n.prototype,"ordinal",{get:function(){return this._ordinal},set:function(e){this._ordinal=e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"levelOrdinal",{get:function(){return this._levelOrdinal},set:function(e){this._levelOrdinal=e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"hierarchy_",{get:function(){return this._hierarchy},set:function(e){this._hierarchy=e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"parent",{get:function(){return this._parent},set:function(e){this._parent=e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"root",{get:function(){if(2>this._level.num)return this;var e=this;do{e=e.parent}while(1<e.level.num);return e},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"level",{get:function(){return this._level},set:function(e){this._level=e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isAll",{get:function(){return null!=this.hierarchy_.allMember&&this.hierarchy_.allMember.uniqueName==this.uniqueName},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isDrilledDown",{get:function(){return this._isDrilledDown},set:function(e){this._isDrilledDown=e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"children",{get:function(){return this._hasProperty("_children_")?this._getProperty("_children_"):new s.AssociativeArray},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"descendants",{get:function(){if(this._hasProperty("_descendants_"))return this._getProperty("_descendants_");var e=new s.AssociativeArray;if(e.addItem(this.uniqueName,this),0==this.numDescendants)return e;for(var t=this.children.length,n=0;n<t;n++){var i=this.children.getItemAt(n);i.isLeaf?e.addItem(i.uniqueName,i):0<i.numDescendants?e.concat(i.descendants,!1):e.addItem(i.uniqueName,i)}return 0<e.length&&this._setProperty("descendants",e),e},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"numDescendants",{get:function(){if(-1<this._numDescendants)return this._numDescendants;if(!this._hasProperty("_children_"))return this._numDescendants=0;for(var e=this.children.length,t=e,n=0;n<e;n++)t+=this.children.getItemAt(n).numDescendants;return t},set:function(e){},enumerable:!0,configurable:!0}),n.prototype.getChildrenCaptions=function(){return{captions:this.captions,members:this.captionMembers}},n.prototype.clearDescendantsCache=function(){this._hasProperty("_descendants_")&&delete this._descendants_,this.parent&&this.parent.clearDescendantsCache()},Object.defineProperty(n.prototype,"captions",{get:function(){return this._hasProperty("_captions_")||(this.captions=[]),this._getProperty("_captions_")},set:function(e){this._setProperty("_captions_",e)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"captionMembers",{get:function(){return this._hasProperty("_captionMembers_")||(this.captionMembers=[]),this._getProperty("_captionMembers_")},set:function(e){this._setProperty("_captionMembers_",e)},enumerable:!0,configurable:!0}),n.prototype.addChild=function(e){var t=this.children;t.addItem(e.uniqueName,e),this._setProperty("_children_",t),e.parent=this,this._numDescendants=-1,this.clearDescendantsCache(),1==this.hasCaptionSorting(e)&&(t=e.caption.charAt(0).toLowerCase().charCodeAt(0),null==this.captions[t]&&(this.captions[t]=[],this.captionMembers[t]=[]),this.captions[t].push(e.caption),this.captionMembers[t].push(e)),1e6<this.children.length&&(this._hasCaptionSorting=0,this.captions=[],this.captionMembers=[])},n.prototype.removeChild=function(e){if(this.children.removeItem(e.uniqueName),this.clearDescendantsCache(),1==this.hasCaptionSorting(e)){var t=e.caption.charAt(0).toLowerCase().charCodeAt(0);e=this.captions[t].indexOf(e.caption),this.captions[t].splice(e,1),this.captionMembers[t].splice(e,1)}},n.prototype.hasCaptionSorting=function(t){return-1!=this._hasCaptionSorting?this._hasCaptionSorting:this._hasCaptionSorting=t.level.type==e.types.LevelType.HOUR||t.level.type==e.types.LevelType.MINUTE||t.level.type==e.types.LevelType.DAY||t.level.type==e.types.LevelType.NUMBER?0:1},n.prototype.toString=function(){return this.uniqueName+" : "+this._ordinal},Object.defineProperty(n.prototype,"isLeaf",{get:function(){return!this._hasProperty("_children_")||0==this.children.length},set:function(e){},enumerable:!0,configurable:!0}),n.toObject=function(e){var t={};return t.uniqueName=e.uniqueName,t.caption=e.caption,t.hierarchyName=e.hierarchy_.uniqueName,t},n}((t=e._structure||(e._structure={})).GenericElement),t.GenericMember=n}(e.data_||(e.data_={}))}(r||(r={})),function(e){var t,n,i;t=e.data_||(e.data_={}),i=function(i){function r(e,n){void 0===n&&(n="");var r=i.call(this,e,n)||this;return r._folder="",r._format="",r._type=t.types.MeasureType.NUMBER,r._grandTotalCaption="",r._defaultAggregation=t.consts.AggregationName.SUM,r._aggregation="",r._availableAggregations=[],r._params=[],r._formula="",r._individual=!1,r._hidden=!1,r._defaultAggregation=t.consts.AggregationName.SUM,r}return h(r,i),Object.defineProperty(r.prototype,"caption",{get:function(){if(this._customCaption)return this._customCaption;if(0==e.model._options.OptionsManager.showAggregationLabels)return this._caption;switch(this.aggregation){case t.consts.AggregationName.COUNT:return s.StringUtils.bind(e.model._labels.Labels.COUNT_TOTAL_CAPTION,this._caption);case t.consts.AggregationName.PRODUCT:return s.StringUtils.bind(e.model._labels.Labels.PRODUCT_TOTAL_CAPTION,this._caption);case t.consts.AggregationName.DISTINCT_COUNT:return s.StringUtils.bind(e.model._labels.Labels.DISTINCT_COUNT_TOTAL_CAPTION,this._caption);case t.consts.AggregationName.AVERAGE:return s.StringUtils.bind(e.model._labels.Labels.AVERAGE_TOTAL_CAPTION,this._caption);case t.consts.AggregationName.MAX:return s.StringUtils.bind(e.model._labels.Labels.MAX_TOTAL_CAPTION,this._caption);case t.consts.AggregationName.MIN:return s.StringUtils.bind(e.model._labels.Labels.MIN_TOTAL_CAPTION,this._caption);case t.consts.AggregationName.PERCENT:return s.StringUtils.bind(e.model._labels.Labels.PERCENT_TOTAL_CAPTION,this._caption);case t.consts.AggregationName.PERCENT_COLUMN:return s.StringUtils.bind(e.model._labels.Labels.PERCENT_COLUMN_TOTAL_CAPTION,this._caption);case t.consts.AggregationName.PERCENT_ROW:return s.StringUtils.bind(e.model._labels.Labels.PERCENT_ROW_TOTAL_CAPTION,this._caption);case t.consts.AggregationName.INDEX:return s.StringUtils.bind(e.model._labels.Labels.INDEX_TOTAL_CAPTION,this._caption);case t.consts.AggregationName.DIFFERENCE:return s.StringUtils.bind(e.model._labels.Labels.DIFFERENCE_TOTAL_CAPTION,this._caption);case t.consts.AggregationName.PERCENT_DIFFERENCE:return s.StringUtils.bind(e.model._labels.Labels.PERCENT_DIFFERENCE_TOTAL_CAPTION,this._caption);case t.consts.AggregationName.MEDIAN:return s.StringUtils.bind(e.model._labels.Labels.MEDIAN_TOTAL_CAPTION,this._caption);case t.consts.AggregationName.STDEVP:return s.StringUtils.bind(e.model._labels.Labels.STDEVP_TOTAL_CAPTION,this._caption);case t.consts.AggregationName.STDEVS:return s.StringUtils.bind(e.model._labels.Labels.STDEVS_TOTAL_CAPTION,this._caption);case t.consts.AggregationName.RUNNING_TOTALS:return s.StringUtils.bind(e.model._labels.Labels.RUNNING_TOTALS_TOTAL_CAPTION,this._caption);case t.consts.AggregationName.NONE:return this._caption}return s.StringUtils.bind(e.model._labels.Labels.SUM_TOTAL_CAPTION,this._caption)},set:function(t){this._caption=""==t.trim()?e.model._labels.Labels.MEMBER_BLANK:t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"originalCaption",{get:function(){return this._caption},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"customCaption",{get:function(){return this._customCaption},set:function(e){this._customCaption=e},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"folder",{get:function(){return this._folder},set:function(e){this._folder=e},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"format",{get:function(){return this._format},set:function(e){this._format=e},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"individual",{get:function(){return this._individual},set:function(e){this._individual=e},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"hidden",{get:function(){return this._hidden},set:function(e){this._hidden=e},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"type",{get:function(){return this._type},set:function(e){this._type=e,this._type!=t.types.MeasureType.NUMBER&&this._type!=t.types.MeasureType.TIME&&(this._type==t.types.MeasureType.DATE||this._type==t.types.MeasureType.DATETIME?(this.availableAggregations=[t.consts.AggregationName.COUNT,t.consts.AggregationName.DISTINCT_COUNT,t.consts.AggregationName.MAX,t.consts.AggregationName.MIN],this._defaultAggregation=t.consts.AggregationName.MAX):(this.availableAggregations=[t.consts.AggregationName.COUNT,t.consts.AggregationName.DISTINCT_COUNT],this._defaultAggregation=t.consts.AggregationName.COUNT))},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"grandTotalCaption",{get:function(){if(this.calculated)return this._caption;if(this._grandTotalCaption)return this._grandTotalCaption;if(0==e.model._options.OptionsManager.showAggregationLabels)return this._caption;switch(this.aggregation){case t.consts.AggregationName.SUM:return s.StringUtils.bind(e.model._labels.Labels.SUM_GRAND_TOTAL_CAPTION,this._caption);case t.consts.AggregationName.COUNT:return s.StringUtils.bind(e.model._labels.Labels.COUNT_GRAND_TOTAL_CAPTION,this._caption);case t.consts.AggregationName.PRODUCT:return s.StringUtils.bind(e.model._labels.Labels.PRODUCT_GRAND_TOTAL_CAPTION,this._caption);case t.consts.AggregationName.DISTINCT_COUNT:return s.StringUtils.bind(e.model._labels.Labels.DISTINCT_COUNT_GRAND_TOTAL_CAPTION,this._caption);case t.consts.AggregationName.AVERAGE:return s.StringUtils.bind(e.model._labels.Labels.AVERAGE_GRAND_TOTAL_CAPTION,this._caption);case t.consts.AggregationName.MAX:return s.StringUtils.bind(e.model._labels.Labels.MAX_GRAND_TOTAL_CAPTION,this._caption);case t.consts.AggregationName.MIN:return s.StringUtils.bind(e.model._labels.Labels.MIN_GRAND_TOTAL_CAPTION,this._caption);case t.consts.AggregationName.PERCENT:return s.StringUtils.bind(e.model._labels.Labels.PERCENT_GRAND_TOTAL_CAPTION,this._caption);case t.consts.AggregationName.PERCENT_COLUMN:return s.StringUtils.bind(e.model._labels.Labels.PERCENT_COLUMN_GRAND_TOTAL_CAPTION,this._caption);case t.consts.AggregationName.PERCENT_ROW:return s.StringUtils.bind(e.model._labels.Labels.PERCENT_ROW_GRAND_TOTAL_CAPTION,this._caption);case t.consts.AggregationName.INDEX:return s.StringUtils.bind(e.model._labels.Labels.INDEX_GRAND_TOTAL_CAPTION,this._caption);case t.consts.AggregationName.DIFFERENCE:return s.StringUtils.bind(e.model._labels.Labels.DIFFERENCE_GRAND_TOTAL_CAPTION,this._caption);case t.consts.AggregationName.PERCENT_DIFFERENCE:return s.StringUtils.bind(e.model._labels.Labels.PERCENT_DIFFERENCE_GRAND_TOTAL_CAPTION,this._caption);case t.consts.AggregationName.MEDIAN:return s.StringUtils.bind(e.model._labels.Labels.MEDIAN_GRAND_TOTAL_CAPTION,this._caption);case t.consts.AggregationName.STDEVP:return s.StringUtils.bind(e.model._labels.Labels.STDEVP_GRAND_TOTAL_CAPTION,this._caption);case t.consts.AggregationName.STDEVS:return s.StringUtils.bind(e.model._labels.Labels.STDEVS_GRAND_TOTAL_CAPTION,this._caption);case t.consts.AggregationName.RUNNING_TOTALS:return s.StringUtils.bind(e.model._labels.Labels.RUNNING_TOTALS_GRAND_TOTAL_CAPTION,this._caption)}return this._caption},set:function(e){this._grandTotalCaption=e},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"aggregation",{get:function(){return""==this._aggregation?this._defaultAggregation:this._aggregation},set:function(e){e&&e.toLowerCase()!=this._aggregation?(e=e.toLowerCase(),t.consts.AggregationName.deprecatedType(e)&&(e=t.consts.AggregationName.fromDeprecatedToValid(e)),t.consts.AggregationName.validType(e)||this.calculated&&e==t.consts.AggregationName.NONE?(this._grandTotalCaption=this._customCaption=void 0,this._aggregation=e,!this.calculated&&0<this.availableAggregations.length&&-1==this.availableAggregations.indexOf(e)&&(this._aggregation=this._availableAggregations[0])):this.resolveColisionsForAggregations()):""==e&&this.resolveColisionsForAggregations()},enumerable:!0,configurable:!0}),r.prototype.resolveColisionsForAggregations=function(){this._grandTotalCaption=this._customCaption=void 0,this._aggregation=0<this._availableAggregations.length?this._availableAggregations[0]:this._defaultAggregation},Object.defineProperty(r.prototype,"availableAggregations",{get:function(){return this._availableAggregations},set:function(e){if(this._availableAggregations=[],null==e)this._availableAggregations=[];else if(this.type!=t.types.MeasureType.NUMBER&&this._type!=t.types.MeasureType.TIME&&0==this._availableAggregations.length)this._availableAggregations=this._type==t.types.MeasureType.DATE||this._type==t.types.MeasureType.DATETIME?[t.consts.AggregationName.COUNT,t.consts.AggregationName.DISTINCT_COUNT,t.consts.AggregationName.MAX,t.consts.AggregationName.MIN]:[t.consts.AggregationName.COUNT,t.consts.AggregationName.DISTINCT_COUNT];else for(var n=0;n<e.length;n++){var i=e[n].trim().toLowerCase();t.consts.AggregationName.deprecatedType(i)&&(i=t.consts.AggregationName.fromDeprecatedToValid(i)),(this.type==t.types.MeasureType.NUMBER||this._type==t.types.MeasureType.TIME||i==t.consts.AggregationName.COUNT||i==t.consts.AggregationName.DISTINCT_COUNT)&&t.consts.AggregationName.validType(i)&&this._availableAggregations.push(i)}},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"params",{get:function(){return this._params},set:function(e){this._params=e},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"calculated",{get:function(){return null!=this.formula&&""!=this.formula},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"formula",{get:function(){return this._formula},set:function(e){this._formula=e},enumerable:!0,configurable:!0}),r.toObject=function(e){var t={};return t.uniqueName=e.uniqueName,t.name=e.originalCaption,e.calculated&&(t.formula=e.formula),t.format=e.format,t.individual=e.individual,t.availableAggregations=e.availableAggregations,t.aggregation=e.aggregation,t.caption=e.caption,t.originalCaption=e.originalCaption,t.grandTotalCaption=e.grandTotalCaption,t.folder=e.folder,t.type=e.type,t.calculated=e.calculated,t},r.fromObject=function(e,i){void 0===i&&(i=null);var r=e.uniqueName;return null==i&&(i=new n.GenericMeasure(r)),e.hasOwnProperty("type")&&(i.type="string"==typeof e.type?t.types.MeasureType.fromColumnType(parseInt(e.type)):e.type),e.hasOwnProperty("individual")&&(i.individual=e.individual),e.hasOwnProperty("formula")&&(i.formula=e.formula),e.hasOwnProperty("format")&&(i.format=e.format),e.hasOwnProperty("availableAggregations")&&(i.availableAggregations=e.availableAggregations),i.aggregation=e.hasOwnProperty("aggregation")?e.aggregation:i.calculated?t.consts.AggregationName.NONE:"",e.hasOwnProperty("caption")&&(i.caption=e.caption),e.hasOwnProperty("name")&&(i.caption=e.name),e.hasOwnProperty("grandTotalCaption")&&(i.grandTotalCaption=e.grandTotalCaption),e.hasOwnProperty("folder")&&(i.folder=e.folder),i.calculated&&(r=new s.Lexer,i.params=r.parse(i.formula)),i},r.prototype.hasDefaultParams=function(){var e=new r("","");return!(this.individual!=e.individual||this.formula!=e.formula||this.format!=e.format||this.type==t.types.MeasureType.COUNT&&this.aggregation!=t.consts.AggregationName.COUNT&&this.aggregation!=t.consts.AggregationName.NONE||this.type==t.types.MeasureType.NUMBER&&this.aggregation!=t.consts.AggregationName.SUM&&this.aggregation!=t.consts.AggregationName.NONE)},r.prototype.getFormat=function(n){var i;return void 0===n&&(n=!1),i=e.model.format.FormatManager.formatExists(this.format)?e.model.format.FormatManager.getFormat(this.format):""!=this.format&&e.model.format.FormatManager.formatExists("")?e.model.format.FormatManager.getFormat(""):e.model.format.FormatManager.getDefaultFormat(),n&&s.nullOrUndefined(i.params.textAlign)&&this.type!=t.types.MeasureType.NUMBER&&this.type!=t.types.MeasureType.TIME&&this.type!=t.types.MeasureType.DATETIME&&((i=i.clone()).textAlign="left"),i},r}((n=t._structure||(t._structure={})).GenericElement),n.GenericMeasure=i}(r||(r={})),function(e){!function(e){!function(e){var t=function(e){function t(t,n){void 0===n&&(n="");var i=e.call(this,t,n)||this;return i.hierarchies=new s.AssociativeArray,i}return h(t,e),Object.defineProperty(t.prototype,"hierarchies",{get:function(){return this._hierarchies},set:function(e){this._hierarchies=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"type",{get:function(){return this._type},set:function(e){this._type=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"structure",{get:function(){return this._structure},set:function(e){this._structure=e},enumerable:!0,configurable:!0}),t.prototype.addHierarchy=function(e){e.dimension=this,this._hierarchies.addItem(e.uniqueName,e)},t.prototype.findHierarchy=function(e){return this._hierarchies.getItem(e)},t.fromObject=function(e,n){return void 0===n&&(n=null),null==n&&(n=new t(e.uniqueName)),void 0!==e.caption&&(n.caption=e.caption),void 0!==e.type&&(n.type=e.type),n},t}(e.GenericElement);e.GenericDimension=t}(e._structure||(e._structure={}))}(e.data_||(e.data_={}))}(r||(r={})),function(e){var t,n,i;t=e.data_||(e.data_={}),n=t._structure||(t._structure={}),i=function(){function i(){this._isComplete=!1,this.id=this.deleteId="",this.levels=[],this._dimensions=new s.AssociativeArray,this._measures=new s.AssociativeArray,this._measureToHierarchyMap={},this._hierarchyToMeasureMap={};var e=new n.GenericHierarchy(t.Cube.MEASURES_NAME,t.Cube.MEASURES_NAME),i=new n.GenericDimension(t.Cube.MEASURES_NAME,t.Cube.MEASURES_NAME);i.type=t.types.DimensionType.MD_DIMTYPE_MEASURE,i.addHierarchy(e),this.addDimension(i),this.fields=new s.AssociativeArray,this.types=[],this.id=this.deleteId=""}return Object.defineProperty(i.prototype,"isComplete",{get:function(){return this._isComplete},set:function(e){this._isComplete=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"dimensions",{get:function(){return this._dimensions},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"measures_",{get:function(){return this._measures},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"calculatedMeasures",{get:function(){for(var e=new s.AssociativeArray,t=0;t<this._measures.length;t++){var n=this._measures.getItemAt(t);n.calculated&&e.addItem(n.uniqueName,n)}return e},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"regularMeasures",{get:function(){for(var e=new s.AssociativeArray,t=0;t<this._measures.length;t++){var n=this._measures.getItemAt(t);n.calculated||e.addItem(n.uniqueName,n)}return e},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"measuresHierarchy",{get:function(){if(null==(e=this.findDimension(t.Cube.MEASURES_NAME))){var e,i=new n.GenericHierarchy(t.Cube.MEASURES_NAME,t.Cube.MEASURES_NAME);(e=new n.GenericDimension(t.Cube.MEASURES_NAME,t.Cube.MEASURES_NAME)).type=t.types.DimensionType.MD_DIMTYPE_MEASURE,e.addHierarchy(i),this.addDimension(e)}return e.findHierarchy(t.Cube.MEASURES_NAME)},set:function(e){},enumerable:!0,configurable:!0}),i.prototype.addDimension=function(e){null==this.findDimension(e.uniqueName)&&(e.structure=this,this.dimensions.addItem(e.uniqueName,e))},i.prototype.findDimension=function(e){return this.dimensions.getItem(e)},i.prototype.allHierarchies=function(e){void 0===e&&(e=!1);for(var n=new s.AssociativeArray,i=0;i<this.dimensions.length;i++){var r=this.dimensions.getItemAt(i);(e||r.type!=t.types.DimensionType.MD_DIMTYPE_MEASURE)&&(n=n.concat(r.hierarchies))}return n},i.prototype.findHierarchy=function(e){return this.allHierarchies(!0).getItem(e)},i.prototype.addMeasure=function(e){this.measures_.addItem(e.uniqueName,e)},i.prototype.findMeasure=function(e){return this.measures_.getItem(e)},i.prototype.removeMeasure=function(e){return this.measures_.removeItem(e)},i.prototype.clear=function(){this._measureToHierarchyMap={},this._hierarchyToMeasureMap={},this.fields=new s.AssociativeArray,this.types=[],this.id=this.deleteId="",this._dimensions=new s.AssociativeArray,this._measures=new s.AssociativeArray,this.isComplete=!1},i.prototype.measureToHierarchy=function(e){return this._measureToHierarchyMap[e]},i.prototype.hierarchyToMeasure=function(e){return this._hierarchyToMeasureMap[e]},i.prototype.getDataType=function(e){return this.types[e]},i.prototype.getDataField=function(e){return this.fields.getItem(e)},i.prototype.getDataKeys=function(){return this.fields.toArray(!0)},i.prototype.addKeys=function(e,t){this._measureToHierarchyMap[e]=this.findHierarchy(t),this._hierarchyToMeasureMap[t]=this.findMeasure(e)},i.prototype._addMeasure=function(e,t){var i=new n.GenericMeasure(e.uniqueName,e.caption);i.type=t,this.addMeasure(i),this.addKeys(i.uniqueName,e.uniqueName),this.localDataStorage.addFactKey(i.uniqueName)},i.prototype.addStringHierarchy=function(i,r,o){var s=r.uniqueName;r=new n.GenericHierarchy(s,r.caption),i.addHierarchy(r),this.localDataStorage.addKey(s),i=new n.GenericLevel(r.caption==e.model._labels.Labels.MEMBER_BLANK?s+".[]":s,r.caption,1),r.addLevel(i),this._addMeasure(r,t.types.MeasureType.COUNT),this.fields.addItem(o,r)},i.prototype.addHierarchicalDateHierarchy=function(i,r,o){var s=r.uniqueName,a=r.caption;i.type=t.types.DimensionType.MD_DIMTYPE_TIME,a=new n.GenericHierarchy(s,a),i.addHierarchy(a),(i=new n.GenericLevel(s+".Year",e.model._labels.Labels.YEAR,a.levels_.length)).type=t.types.LevelType.YEAR,a.addLevel(i),this.localDataStorage.addKey(a.uniqueName),r.type==t.types.DataFieldType.HIERARCHICAL_DATE_WITH_QUARTERS&&((i=new n.GenericLevel(r=s+".Quarter",e.model._labels.Labels.QUARTER,a.levels_.length)).type=t.types.LevelType.QUARTER,a.addLevel(i),this.localDataStorage.addKey(r,a.uniqueName)),(i=new n.GenericLevel(r=s+".Month",e.model._labels.Labels.MONTH,a.levels_.length)).type=t.types.LevelType.MONTH,a.addLevel(i),this.localDataStorage.addKey(r,a.uniqueName),(i=new n.GenericLevel(s+=".Day",e.model._labels.Labels.DAY,a.levels_.length)).type=t.types.LevelType.DAY,a.addLevel(i),this.localDataStorage.addKey(s,a.uniqueName),this._addMeasure(a,t.types.MeasureType.COUNT),this.fields.addItem(o,a)},i.prototype.addLevelOfHierarchy=function(e,i,r){var o=i.hasOwnProperty("hierarchy")?i.hierarchy:i.uniqueName,s=i.hasOwnProperty("hierarchy")?i.hierarchy:i.caption,a=e.findHierarchy(o);if(null==a&&(a=new n.GenericHierarchy(o,s),e.addHierarchy(a)),s=0,i.hasOwnProperty("parent")){if(null==(o=a.findLevel(i.parent)))return null==this.levels[a.uniqueName]&&(this.levels[a.uniqueName]=[]),void(this.levels[a.uniqueName][i.parent]=[i,r]);s=a.levels_.indexOf(o.uniqueName)}o=i.hasOwnProperty("level")?i.level:r,i=i.hasOwnProperty("level")?i.level:r,i=new n.GenericLevel(o,i,s+1),a.addLevel(i),1==i.num?this.localDataStorage.addKey(a.uniqueName):this.localDataStorage.addKey(o,a.uniqueName),this._addMeasure(a,t.types.MeasureType.COUNT),this.fields.addItem(r,i),this.levels[a.uniqueName]&&this.levels[a.uniqueName][o]&&this.addLevelOfHierarchy(e,this.levels[a.uniqueName][o][0],this.levels[a.uniqueName][o][1])},i.prototype.addDateHierarchy=function(i,r,o){var s=r.uniqueName,a=r.caption;i.type=t.types.DimensionType.MD_DIMTYPE_TIME;var l=s+".Year",u=a+"."+e.model._labels.Labels.YEAR;(r=new n.GenericHierarchy(l,u)).type=t.types.DataFieldType.typeNum(t.types.DataFieldType.DATE),i.addHierarchy(r),(u=new n.GenericLevel(l+"."+u,u,1)).type=t.types.LevelType.YEAR,r.addLevel(u),this.localDataStorage.addKey(l),this._addMeasure(r,t.types.MeasureType.COUNT),r=new n.GenericHierarchy(l=s+".Month",u=a+"."+e.model._labels.Labels.MONTH),i.addHierarchy(r),(u=new n.GenericLevel(l+"."+u,u,1)).type=t.types.LevelType.MONTH,r.addLevel(u),this.localDataStorage.addKey(l),this._addMeasure(r,t.types.MeasureType.COUNT),r=new n.GenericHierarchy(s+=".Day",a=a+"."+e.model._labels.Labels.DAY),i.addHierarchy(r),(a=new n.GenericLevel(s+"."+a,a,1)).type=t.types.LevelType.DAY,r.addLevel(a),this.localDataStorage.addKey(s),this._addMeasure(r,t.types.MeasureType.COUNT),this.fields.addItem(o,i)},i.prototype.addNumberHierarchy=function(e,i,r){var o=i.uniqueName,s=i.caption;i=new n.GenericHierarchy(o,s),e.addHierarchy(i),this.localDataStorage.addKey(o),(e=new n.GenericLevel(o+"."+s,s,1)).type=t.types.LevelType.NUMBER,i.addLevel(e),this._addMeasure(i,t.types.MeasureType.NUMBER),this.fields.addItem(r,i)},i.prototype.addMonthHierarchy=function(e,i,r){var o=i.uniqueName,s=i.caption;i=new n.GenericHierarchy(o,s),e.addHierarchy(i),this.localDataStorage.addKey(o),(e=new n.GenericLevel(o+"."+s,s,1)).type=t.types.LevelType.MONTH,i.addLevel(e),this._addMeasure(i,t.types.MeasureType.COUNT),this.fields.addItem(r,i)},i.prototype.addWeekdayHierarchy=function(e,i,r){var o=i.uniqueName,s=i.caption;i=new n.GenericHierarchy(o,s),e.addHierarchy(i),this.localDataStorage.addKey(o),(e=new n.GenericLevel(o+"."+s,s,1)).type=t.types.LevelType.DAY,i.addLevel(e),this._addMeasure(i,t.types.MeasureType.COUNT),this.fields.addItem(r,i)},i.prototype.addDateStringHierarchy=function(e,i,r){var o=i.uniqueName,s=i.caption;i=new n.GenericHierarchy(o,s),e.addHierarchy(i),this.localDataStorage.addKey(o),(e=new n.GenericLevel(o+"."+s,s,1)).type=t.types.LevelType.TIME,i.addLevel(e),this._addMeasure(i,t.types.MeasureType.DATE),this.fields.addItem(r,i)},i.prototype.addTimeHierarchy=function(e,i,r){var o=i.uniqueName,s=i.caption;i=new n.GenericHierarchy(o,s),e.addHierarchy(i),this.localDataStorage.addKey(o),(e=new n.GenericLevel(o+"."+s,s,1)).type=t.types.LevelType.NUMBER,i.addLevel(e),this._addMeasure(i,t.types.MeasureType.TIME),this.fields.addItem(r,i)},i.prototype.addDateTimeHierarchy=function(e,i,r){var o=i.uniqueName,s=i.caption;i=new n.GenericHierarchy(o,s),e.addHierarchy(i),this.localDataStorage.addKey(o),(e=new n.GenericLevel(o+"."+s,s,1)).type=t.types.LevelType.NUMBER,i.addLevel(e),this._addMeasure(i,t.types.MeasureType.DATETIME),this.fields.addItem(r,i)},i.prototype.isMetaObject=function(e){return e.hasOwnProperty("type")||e.hasOwnProperty("caption")||e.hasOwnProperty("hierarchy")||e.hasOwnProperty("level")||e.hasOwnProperty("parent")||e.hasOwnProperty("dimensionCaption")},i.prototype.addDataStructure=function(e){var n,i=!1;for(n in e)null==e[n]&&(e[n]=""),"string"==typeof e[n]||"number"==typeof e[n]?this.addDataFieldString(n,t.types.DataFieldType.typeFromValue(e[n])):e[n]instanceof Date?this.addDataFieldString(n,t.types.DataFieldType.DATE):e[n]instanceof Array||(this.isMetaObject(e[n])&&(i=!0),e[n].hasOwnProperty("formula")?0==s.nullOrEmpty(e[n].formula)&&this.addCalculatedMeasure(e[n],n):this.addDataField(e[n],n));return this.isComplete=!0,i},i.prototype.addCalculatedMeasure=function(n,i){var r;(r=new t._structure.GenericMeasure(i,null==n.caption?i:n.caption)).formula=n.formula,r.grandTotalCaption=null==n.grandTotalCaption?e.model._labels.Labels.GRID_GRAND_TOTAL:n.grandTotalCaption,e.model.PivotModel.getInstance().addCalculatedMeasure(r)},i.prototype.addDataFieldString=function(e,t){this.addDataField({uniqueName:e,caption:e,type:t},e)},i.prototype.addDataField=function(e,n){void 0===n&&(n="");var i,r,o={};for(i in e)o[i]=e[i];switch(o.hasOwnProperty("uniqueName")||(o.uniqueName=n),o.hasOwnProperty("caption")&&""!=o.caption||(o.caption=n),""==n&&(n=o.uniqueName),i=t.types.DataFieldType.STRING,o.hasOwnProperty("type")&&(i=String(o.type).trim().toLowerCase()),o.type=i,(o.hasOwnProperty("hierarchy")||i==t.types.DataFieldType.LEVEL&&o.hasOwnProperty("hierarchy"))&&(r=this.findDimension(o.hierarchy)),null==r&&(r=t._structure.GenericDimension.fromObject(o),o.hasOwnProperty("hierarchy")&&(r.uniqueName=o.hierarchy),r.caption=o.hasOwnProperty("caption")?o.caption:o.hasOwnProperty("hierarchy")?o.hierarchy:r.caption,i==t.types.DataFieldType.LEVEL&&o.hasOwnProperty("hierarchy")&&(r.uniqueName=o.hierarchy),this.addDimension(r)),this.types[n]=i,i){case t.types.DataFieldType.STRING:this.addStringHierarchy(r,o,n);break;case t.types.DataFieldType.NUMBER:this.addNumberHierarchy(r,o,n);break;case t.types.DataFieldType.MONTH:this.addMonthHierarchy(r,o,n);break;case t.types.DataFieldType.WEEKDAY:this.addWeekdayHierarchy(r,o,n);break;case t.types.DataFieldType.DATE:this.addDateHierarchy(r,o,n);break;case t.types.DataFieldType.DATETIME:this.addDateTimeHierarchy(r,o,n);break;case t.types.DataFieldType.TIME:this.addTimeHierarchy(r,o,n);break;case t.types.DataFieldType.LEVEL:this.addLevelOfHierarchy(r,o,n);break;case t.types.DataFieldType.HIERARCHICAL_DATE:case t.types.DataFieldType.HIERARCHICAL_DATE_WITH_QUARTERS:this.addHierarchicalDateHierarchy(r,o,n);break;case t.types.DataFieldType.DATE_STRING:this.addDateStringHierarchy(r,o,n);break;case t.types.DataFieldType.ID:this.id=n,this.fields.addItem(n,null);break;case t.types.DataFieldType.DELETE:this.deleteId=n;break;case t.types.DataFieldType.HIDDEN:break;default:this.addStringHierarchy(r,o,n)}},i}(),n.GenericStructure=i}(r||(r={})),function(e){!function(e){var t,n;t=e._structure||(e._structure={}),n=function(){function n(t){this._hierarchies=new s.AssociativeArray,this.totalSortType=e.consts.SortType.UNSORTED,this._sortTuple=this.__sortTuple=null,this._expandedTuples=[],this._drilledTuples=[],this._sortType=e.consts.SortType.UNSORTED,this._name=t}return Object.defineProperty(n.prototype,"sortTuple",{get:function(){if(null!=this.__sortTuple)return this.__sortTuple;var e=null;if(null!=this._sortTuple)for(var t=0,n=(e=[],0);n<this._hierarchies.length;n++){var i=this.hierarchies.getItemAt(n);if(!i.isMeasures){if(!this._sortTuple[t])break;if("number"==typeof this._sortTuple[t]){e=this._sortTuple;break}var r=this._sortTuple[t].toString().trim();if(!/\D/.test(r)){e=this._sortTuple;break}if(null!=(i=i.findMember(this._sortTuple[t].toString().trim())))e.push(i.ordinal);else if(this._sortTuple[t]){e=null;break}}t++}return this.__sortTuple=e},set:function(e){this._sortTuple=e,this.__sortTuple=null},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"sortNamedTuple",{get:function(){var e=null,t=this.sortTuple;if(null!=t)for(var n=0,i=(e=[],0);i<this._hierarchies.length;i++){if(!(r=this.hierarchies.getItemAt(i)).isMeasures){if(!t[n])break;var r,o=""===t[i]?0:parseInt(t[i]);if(null!=(r=r.members.getItemAt(o)))e.push(r.uniqueName);else if(t[n]){e=null;break}}n++}return e},set:function(e){this.sortTuple=e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"expandedTuples",{get:function(){return this._expandedTuples},set:function(e){if(null==e)this._expandedTuples=[];else if(this.hasMeasures)this._expandedTuples=e;else{this._expandedTuples=[];for(var t=0;t<e.length;t++){var n=e[t];n[0]=-1,this._expandedTuples.push(n)}}},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"expandedTuplesBasedOnUniqueNames",{get:function(){for(var e,t,n,i,r,o,s=[],a=0;a<this.expandedTuples.length;a++){t=[],n=(e=this.expandedTuples[a].slice(0)).shift(),i="";for(var l=r=0;l<e.length;l++)(o=this.hierarchies.getItemAt(r)).isMeasures&&(-1<n&&(i=o.members.getItemAt(n).uniqueName),r++,o=this.hierarchies.getItemAt(r)),null!=o.members.getItemAt(e[l])&&t.push(o.members.getItemAt(e[l]).uniqueName),r++;t.unshift(i),s.push(t)}return s},enumerable:!0,configurable:!0}),n.prototype.parseExpandedTuplesBasedOnUniqueNames=function(e,t){void 0===t&&(t=null);for(var n,i,r,o,a,l,u=[],c=0;c<e.length;c++){if(n=e[c].slice(0),isNaN(parseInt(n[0]))){if(i=[],o=-1,r=n.shift(),a=0,0<this.hierarchies.length)for(var h=0;h<n.length;h++){if(l=this.hierarchies.getItemAt(a),s.nullOrUndefined(l))return[];l.isMeasures&&(""!=r&&(o=t?t.indexOf(r):l.members.indexOf(r)),a++,l=this.hierarchies.getItemAt(a)),i.push(l.members.indexOf(n[h])),a++}i.unshift(o)}else i=n;u.push(i)}return u},Object.defineProperty(n.prototype,"drilledTuples",{get:function(){return this._drilledTuples},set:function(e){if(s.nullOrUndefined(e))this._drilledTuples=[];else{var t;if(this.hasMeasures)this._drilledTuples=e;else{this._drilledTuples=[];for(var n=0;n<e.length;n++)"string"==typeof(t=e[n])[0]?t[1]=-1:t[0]=-1,this._drilledTuples.push(t)}this.setPredefinedDrillDowns(e)}},enumerable:!0,configurable:!0}),n.prototype.setPredefinedDrillDowns=function(t){var n,i=this._hierarchies.slice();i.removeItem(e.Cube.MEASURES_NAME);for(var r,o=0;o<t.length;o++){"string"==typeof(n=t[o].slice(0))[0]&&(r=n.shift());var s=i.getItemAt(n.length-3);if(null==s)break;var a=n[1];isNaN(parseFloat(n[1]))||null!=(n=s.members.getItemAt(n[1]))&&(a=n.uniqueName),-1==s.predefinedDrillDowns.indexOf(a)&&s.predefinedDrillDowns.push([r,a])}},Object.defineProperty(n.prototype,"drilledTuplesBasedOnUniqueNames",{get:function(){for(var e,t,n,i,r,o,s,a,l=[],u=0;u<this.drilledTuples.length;u++){t=[],r=n="","string"==typeof(e=this.drilledTuples[u].slice(0))[0]&&(n=e.shift()),i=e.shift(),o=e.shift();for(var c=s=0;c<e.length;c++)(a=this.hierarchies.getItemAt(s)).isMeasures&&(-1<i&&(r=a.members.getItemAt(i).uniqueName),s++,a=this.hierarchies.getItemAt(s)),null!=a.members.getItemAt(e[c])&&t.push(a.members.getItemAt(e[c]).uniqueName),s++;t.unshift(o),t.unshift(r),t.unshift(n),l.push(t)}return l},enumerable:!0,configurable:!0}),n.prototype.parseDrilledTuplesBasedOnUniqueNames=function(e,t){void 0===t&&(t=null);for(var n,i,r,o,a,l,u,c,h=[],d=0;d<e.length;d++){if(n=e[d].slice(0),isNaN(parseInt(n[n.length-1]))){if(i=[],o=-1,r=n.shift(),a=n.shift(),l=n.shift(),u=0,0<this.hierarchies.length)for(var A=0;A<n.length;A++){if(c=this.hierarchies.getItemAt(u),s.nullOrUndefined(c))return[];c.isMeasures&&(""!=a&&(o=t?t.indexOf(a):c.members.indexOf(a)),u++,c=this.hierarchies.getItemAt(u)),i.push(c.members.indexOf(n[A])),u++}i.unshift(l),i.unshift(o),""!=r&&i.unshift(r)}else i=n;h.push(i)}return h},Object.defineProperty(n.prototype,"sortType",{get:function(){return this._sortType},set:function(t){t=t.toLowerCase(),this._sortType=t==e.consts.SortType.ASC||t==e.consts.SortType.DESC?t:e.consts.SortType.UNSORTED},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"uniqueName",{get:function(){return this._name},set:function(e){this._name=e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"caption",{get:function(){return this._caption},set:function(e){this._caption=e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"hierarchies",{get:function(){return this._hierarchies},set:function(t){this.expandedTuples=[],this.drilledTuples=[],this._sortTuple=null,this._sortType=e.consts.SortType.UNSORTED,this.sortMeasure=null,this._hierarchies=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"size",{get:function(){for(var e=1,t=0;t<this._hierarchies.length;t++)e*=this._hierarchies.getItemAt(t).size;return e},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"measuresPosition",{get:function(){return this._hierarchies.indexOf(e.Cube.MEASURES_NAME)},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"measuresHierarchy",{get:function(){return this._hierarchies.getItem(e.Cube.MEASURES_NAME)},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"hasMeasures",{get:function(){return-1<this.measuresPosition},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"depth",{get:function(){for(var e=0,t=0;t<this._hierarchies.length;t++)e+=this._hierarchies.getItemAt(t).drillDownDepth;return e},set:function(e){},enumerable:!0,configurable:!0}),n.prototype.toString=function(){return"[Axis:"+this._name+" ]"},n.fromObject=function(t,i,r,o,a,l,u){var c;if(void 0===u&&(u=null),(t=new n(t)).hierarchies=new s.AssociativeArray,i)for(c=0;c<i.length;c++)if(null!=i[c].uniqueName){var h=l.findHierarchy(i[c].uniqueName);null!=h&&(e._structure.GenericHierarchy.fromObject(i[c],h),h.isMeasures&&t.uniqueName==e.consts.AxisName.PAGES_AXIS||t.hierarchies.addItem(h.uniqueName,h))}if(r&&(null!=(c=l.findMeasure(r.measure?r.measure:""))&&null!=r.tuple?t.setSort(c,r.tuple,r.type):t.sortToSet=r),o&&0<o.length){for(h=[],c=0;c<o.length;c++){for(l=[],0<(i=o[c]).length&&l.push((isNaN(parseInt(i[0])),i[0])),r=1;r<i.length;r++)l.push((isNaN(parseInt(i[r])),i[r]));h.push(l)}o=h}if(t.expandedTuples=o?t.parseExpandedTuplesBasedOnUniqueNames(o,u):[],a&&0<a.length){for(o=[],c=0;c<a.length;c++){for(l=[],0<(i=a[c]).length&&l.push((isNaN(parseInt(i[0])),i[0])),r=1;r<i.length;r++)l.push((isNaN(parseInt(i[r])),i[r]));o.push(l)}a=o}return t.drilledTuples=a?t.parseDrilledTuplesBasedOnUniqueNames(a,u):[],t},n.toObject=function(n){for(var i={},r=[],o=0;o<n.hierarchies.length;o++){var a=t.GenericHierarchy.toObject(n.hierarchies.getItemAt(o));r.push(a)}return i.hierarchies=r,n.sortType==e.consts.SortType.UNSORTED||s.nullOrUndefined(n.sortTuple)||s.nullOrUndefined(n.sortMeasure)||(i.sort={type:n.sortType,tuple:n.sortNamedTuple,measure:n.sortMeasure.uniqueName}),i},n.prototype.setSort=function(e,t,n){this.sortMeasure=e,this.sortTuple=t,this.sortType=n,0==t.length&&(this.totalSortType=this.sortType,this.totalSortMeasure=this.sortMeasure)},n}(),t.Axis=n}(e.data_||(e.data_={}))}(r||(r={})),function(e){var t,n,i,r;t=e.data_||(e.data_={}),i=n=t._structure||(t._structure={}),r=function(){function r(e){this._axes=new s.AssociativeArray,this._measures=new s.AssociativeArray,this._drillAll=this._expandAll=!1,this._flatOrder=[],this.structure=e,this.addAxis(new t._structure.Axis(t.consts.AxisName.ROWS_AXIS)),this.addAxis(new t._structure.Axis(t.consts.AxisName.COLUMNS_AXIS)),this.addAxis(new t._structure.Axis(t.consts.AxisName.PAGES_AXIS))}return Object.defineProperty(r.prototype,"axes",{get:function(){return this._axes},set:function(e){},enumerable:!0,configurable:!0}),r.prototype.addAxis=function(e){this._axes.addItem(e.uniqueName,e),e.hasMeasures&&(this._axisWithMeasures=e)},r.prototype.findAxis=function(e){return this._axes.getItem(e)},Object.defineProperty(r.prototype,"axisWithMeasures",{get:function(){if(null==this._axisWithMeasures){for(var e=0;e<this._axes.length;e++){var n=this._axes.getItemAt(e);if(n.hasMeasures){this._axisWithMeasures=n;break}}null==this._axisWithMeasures&&(this._axisWithMeasures=this.findAxis(t.consts.AxisName.COLUMNS_AXIS))}return this._axisWithMeasures.hasMeasures||(e=this.structure.measuresHierarchy)&&this._axisWithMeasures.hierarchies.addItem(e.uniqueName,e),this._axisWithMeasures},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"regularMeasures",{get:function(){for(var e=new s.AssociativeArray,t=0;t<this._measures.length;t++){var n=this._measures.getItemAt(t);n.calculated||e.addItem(n.uniqueName,n)}return e},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"calculatedMeasures",{get:function(){for(var e=new s.AssociativeArray,t=0;t<this._measures.length;t++){var n=this._measures.getItemAt(t);n.calculated&&e.addItem(n.uniqueName,n)}return e},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"measuresAll",{get:function(){return this._measures},set:function(e){this.measures_=e},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"measures_",{get:function(){for(var e=new s.AssociativeArray,t=0;t<this._measures.length;t++){var n=this._measures.getItemAt(t);n.hidden||e.addItem(n.uniqueName,n)}return e},set:function(e){if(this._measures=e,null!=(e=this.axisWithMeasures.measuresHierarchy)&&(e.clear(),null!=this._measures))for(var t=0;t<this._measures.length;t++){var i=this._measures.getItemAt(t);i=new n.GenericMember(i.uniqueName,i.caption),e.addMember(i,"","",!1)}},enumerable:!0,configurable:!0}),r.prototype.allHierarchies=function(e,t,n){void 0===e&&(e=!0),void 0===t&&(t=!0),void 0===n&&(n=!1);for(var i=new s.AssociativeArray,r=0;r<this._axes.length;r++){var o=this._axes.getItemAt(r);i=i.concat(o.hierarchies)}if(e||i.removeItem(this.structure.measuresHierarchy.uniqueName),!t)for(e=0;e<this.pages.length;e++)i.removeItem(this.pages.getKeyAt(r));if(n)for(r=0;r<this.measures_.length;r++)(n=this.measures_.getItemAt(r)).calculated||(n=this.structure.measureToHierarchy(n.uniqueName),i.addItem(n.uniqueName,n));return i},r.prototype.clear=function(){for(var e=0;e<this._axes.length;e++)this._axes.getItemAt(e).hierarchies=new s.AssociativeArray;this._measures=new s.AssociativeArray},Object.defineProperty(r.prototype,"rows",{get:function(){return this.findAxis(t.consts.AxisName.ROWS_AXIS).hierarchies},set:function(e){var n=this.findAxis(t.consts.AxisName.ROWS_AXIS);null==n&&(n=new i.Axis(t.consts.AxisName.ROWS_AXIS)),n.hierarchies=e,null==e&&(n.hierarchies=new s.AssociativeArray),this.addAxis(n)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"columns",{get:function(){return this.findAxis(t.consts.AxisName.COLUMNS_AXIS).hierarchies},set:function(e){var n=this.findAxis(t.consts.AxisName.COLUMNS_AXIS);null==n&&(n=new i.Axis(t.consts.AxisName.COLUMNS_AXIS)),n.hierarchies=e,null==e&&(n.hierarchies=new s.AssociativeArray),this.addAxis(n)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"pages",{get:function(){return this.findAxis(t.consts.AxisName.PAGES_AXIS).hierarchies},set:function(e){var n=this.findAxis(t.consts.AxisName.PAGES_AXIS);null==n&&(n=new i.Axis(t.consts.AxisName.PAGES_AXIS)),n.hierarchies=e,null==e&&(n.hierarchies=new s.AssociativeArray),this.addAxis(n)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"rowsOnly",{get:function(){return this.axisWithMeasures.uniqueName==t.consts.AxisName.ROWS_AXIS?this.rows.splice(this.axisWithMeasures.measuresPosition,1):this.rows},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"columnsOnly",{get:function(){return this.axisWithMeasures.uniqueName==t.consts.AxisName.COLUMNS_AXIS?this.columns.splice(this.axisWithMeasures.measuresPosition,1):this.columns},set:function(e){},enumerable:!0,configurable:!0}),r.prototype.clone=function(){var e=new r(this.structure);return e.rows=this.rows.slice(),e.columns=this.columns.slice(),e.pages=this.pages.slice(),e.measures_=this.measures_.slice(),e.flatOrder=this.flatOrder.slice(0),e},r.areRowsDiffer=function(e,n,i){if(void 0===i&&(i=!0),null==n)return!0;var o=e.rows.length!=n.rows.length;if(!o)for(var s=0;s<e.rows.length;s++)if(e.rows.getItemAt(s).uniqueName!=n.rows.getItemAt(s).uniqueName){o=!0;break}return!o&&i&&e.findAxis(t.consts.AxisName.ROWS_AXIS).hasMeasures&&n.findAxis(t.consts.AxisName.ROWS_AXIS).hasMeasures&&(o=r.areMeasuresDiffer(e,n)),o},r.areColumnsDiffer=function(e,n,i){if(void 0===i&&(i=!0),null==n)return!0;var o=e.columns.length!=n.columns.length;if(!o)for(var s=0;s<e.columns.length;s++)if(e.columns.getItemAt(s).uniqueName!=n.columns.getItemAt(s).uniqueName){o=!0;break}return!o&&i&&e.findAxis(t.consts.AxisName.COLUMNS_AXIS).hasMeasures&&n.findAxis(t.consts.AxisName.COLUMNS_AXIS).hasMeasures&&(o=r.areMeasuresDiffer(e,n)),o},r.areMeasuresDiffer=function(e,t){if(null==t)return!0;var n=e.measures_.length!=t.measures_.length;if(!n)for(var i=0;i<e.measures_.length;i++)if(e.measures_.getItemAt(i).uniqueName!=t.measures_.getItemAt(i).uniqueName){n=!0;break}return n},r.fromObject=function(e,n){for(var i=new r(n),o=new s.AssociativeArray,a=0;a<e.measures.length;a++)if(e.measures[a].hasOwnProperty("uniqueName")){var l=n.measures_.getItem(e.measures[a].uniqueName);null==l&&s.nullOrEmpty(e.measures[a].formula)||((l=t._structure.GenericMeasure.fromObject(e.measures[a],l)).calculated&&!n.measures_.keyExists(l.uniqueName)&&n.addMeasure(l),(s.nullOrUndefined(e.measures[a].active)||e.measures[a].active)&&o.addItem(l.uniqueName,l))}return a=t._structure.Axis.fromObject(t.consts.AxisName.ROWS_AXIS,e.rows,e.rowSorting,e.expandedRows,e.drilledRows,n,o.toArray(!0)),l=t._structure.Axis.fromObject(t.consts.AxisName.COLUMNS_AXIS,e.columns,e.columnSorting,e.expandedColumns,e.drilledColumns,n,o.toArray(!0)),i.rows=a.hierarchies,i.columns=l.hierarchies,i.pages=t._structure.Axis.fromObject(t.consts.AxisName.PAGES_AXIS,e.pages,null,[],[],n).hierarchies,i.measures_=o,i.expandAll=e.expandAll,i.drillAll=e.drillAll,i.flatOrder=e.flatOrder,i.addAxis(a),i.addAxis(l),i},r.prototype.toObject=function(){for(var e={rows:[]},t=0;t<this.rows.length;t++){var n=this.rows.getItemAt(t).toObject();e.rows[t]=n}for(e.columns=[],t=0;t<this.columns.length;t++)n=this.columns.getItemAt(t).toObject(),e.columns[t]=n;for(e.pages=[],t=0;t<this.pages.length;t++)n=this.pages.getItemAt(t).toObject(),e.pages[t]=n;for(e.measures=[],t=0;t<this.measures_.length;t++)n=this.measures_.getItemAt(t).toObject(),e.measures[t]=n;return e},r.prototype.parseExpandedTuples=function(){for(var e=0;e<this._axes.length;e++)this._axes.getItemAt(e).parseExpandedTuples()},r.prototype.flatten=function(e){void 0===e&&(e=!1);for(var t=this.allHierarchies(!1),n=0;n<this.measures_.length;n++){var r=this.measures_.getItemAt(n),o=this.measureToHierarchy(r.uniqueName);null!=o&&t.addItem(o.uniqueName,o),r.calculated&&e&&(o=new i.GenericHierarchy(r.uniqueName,r.caption),t.addItem(r.uniqueName,o))}for(e=new s.AssociativeArray,n=0;n<this.flatOrder.length;n++)t.keyExists(r=this.flatOrder[n])&&(e.addItem(r,t.getItem(r)),t.removeItem(r));for(n=0;n<t.length;n++)e.addItem(t.getKeyAt(n),t.getItemAt(n));return e},r.prototype.isEqual=function(e){if(null==e||this.pages.length!=e.pages.length||this.rows.length!=e.rows.length||this.columns.length!=e.columns.length||this.measures_.length!=e.measures_.length)return!1;for(var t=0;t<this.pages.length;t++)if(this.pages.getKeyAt(t)!=e.pages.getKeyAt(t))return!1;for(t=0;t<this.rows.length;t++)if(this.rows.getKeyAt(t)!=e.rows.getKeyAt(t))return!1;for(t=0;t<this.columns.length;t++)if(this.columns.getKeyAt(t)!=e.columns.getKeyAt(t))return!1;for(t=0;t<this.measures_.length;t++)if(this.measures_.getKeyAt(t)!=e.measures_.getKeyAt(t)||this.measures_.getItemAt(t).aggregation!=e.measures_.getItemAt(t).aggregation)return!1;return!0},r.prototype.measureToHierarchy=function(e){return this.structure.measureToHierarchy(e)},r.prototype.hierarchyToMeasure=function(e){return this.structure.hierarchyToMeasure(e)},Object.defineProperty(r.prototype,"isEmpty",{get:function(){return 0==this.allHierarchies(!1).length&&0==this.measures_.length},set:function(e){},enumerable:!0,configurable:!0}),r.prototype.makeDefault=function(){var n;if(e.model._options.OptionsManager.flatView){this.rows=new s.AssociativeArray,this.columns=new s.AssociativeArray,this.pages=new s.AssociativeArray;for(var i=new s.AssociativeArray,r=[],o=0;o<this.structure.measures_.length;o++)n=this.structure.measures_.getItemAt(o),r.push(n.uniqueName),n.type==t.types.MeasureType.COUNT?(n=this.structure.measureToHierarchy(n.uniqueName))&&this.rows.addItem(n.uniqueName,n):i.addItem(n.uniqueName,n);this._flatOrder=r,this.measures_=i}else{for(o=0;o<this.structure.measures_.length&&((n=this.structure.measures_.getItemAt(o)).type!=t.types.MeasureType.NUMBER?null==i&&(i=this.structure.measureToHierarchy(n.uniqueName)):null==r&&(r=n),null==i||null==r);o++);null==r?r=this.structure.measures_.getItemAt(0):null==i?(n=this.structure.measures_.getItemAt(0),i=this.structure.measureToHierarchy(n.uniqueName)):null==i&&null==r&&0<this.structure.measures_.length&&(r=this.structure.measures_.getItemAt(0),i=this.structure.measureToHierarchy(r.uniqueName)),null!=i&&null!=r&&(this.pages=new s.AssociativeArray,this.rows=new s.AssociativeArray,this.columns=new s.AssociativeArray,this.rows.addItem(i.uniqueName,i),(i=new s.AssociativeArray).addItem(r.uniqueName,r),this.measures_=i)}},Object.defineProperty(r.prototype,"expandAll",{get:function(){return this._expandAll},set:function(e){this._expandAll=e},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"drillAll",{get:function(){return this._drillAll},set:function(e){this._drillAll=e},enumerable:!0,configurable:!0}),r.prototype.clearExpands=function(){this.rowAxis.expandedTuples=[],this.columnAxis.expandedTuples=[]},r.prototype.clearDrills=function(){this.rowAxis.drilledTuples=[],this.columnAxis.drilledTuples=[]},Object.defineProperty(r.prototype,"flatOrder",{get:function(){return null==this._flatOrder&&(this._flatOrder=[]),this._flatOrder},set:function(e){this._flatOrder=e},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"rowAxis",{get:function(){return this.axes.getItem(t.consts.AxisName.ROWS_AXIS)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"columnAxis",{get:function(){return this.axes.getItem(t.consts.AxisName.COLUMNS_AXIS)},enumerable:!0,configurable:!0}),r.prototype.mergeExpandsAndDrills=function(e){s.nullOrUndefined(e)||(this.expandAll=e.expandAll,this.drillAll=e.drillAll,r.areRowsDiffer(this,e,!1)?(this.rowAxis.expandedTuples=this.cutTuples(e.rowAxis.expandedTuples,this.getCommonFieldsCount(this.rowAxis.hierarchies,e.rowAxis.hierarchies)),this.rowAxis.drilledTuples=this.cutTuples(e.rowAxis.drilledTuples,this.getCommonFieldsCount(this.rowAxis.hierarchies,e.rowAxis.hierarchies)+2)):(this.rowAxis.expandedTuples=this.cloneTuples(e.rowAxis.expandedTuples),this.rowAxis.drilledTuples=this.cloneTuples(e.rowAxis.drilledTuples)),r.areColumnsDiffer(this,e,!1)?(this.columnAxis.expandedTuples=this.cutTuples(e.columnAxis.expandedTuples,this.getCommonFieldsCount(this.columnAxis.hierarchies,e.columnAxis.hierarchies)),this.columnAxis.drilledTuples=this.cutTuples(e.columnAxis.drilledTuples,this.getCommonFieldsCount(this.columnAxis.hierarchies,e.columnAxis.hierarchies)+2)):(this.columnAxis.expandedTuples=this.cloneTuples(e.columnAxis.expandedTuples),this.columnAxis.drilledTuples=this.cloneTuples(e.columnAxis.drilledTuples)))},r.prototype.removeMeasure=function(e){this._measures.removeItem(e)},r.prototype.getCommonFieldsCount=function(e,t){for(var n=0,i=Math.min(e.length,t.length),r=0;r<i;r++){var o=e.getItemAt(r),s=t.getItemAt(r);if(o.uniqueName!=s.uniqueName)break;o.isMeasures||n++}return n},r.prototype.cutTuples=function(e,t){var n=[];if(1<t)for(var i=0;i<e.length;i++){var r=e[i];r.length<=t&&n.push(r.slice())}return n},r.prototype.cloneTuples=function(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n].slice());return t},r}(),i.Slice=r}(r||(r={})),function(e){var n;!function(i){var r=function(){function i(){var e=this;this.beforeBeforeLastByte=this.beforeLastByte=this.lastByte=0,this.fileExtensions=[".csv"],this.onAuthApiLoadHandler=function(){return e.onAuthApiLoad()},this.onhandleAuthResultHandler=function(t){return e.handleAuthResult(t)},this.tickHandler=function(){return e.onTick()},this.timerCompleteHandler=function(){return e.onTimerComplete()},this.lastPosition=0,this.isStarted=!1,this.preloaderTime=0,this.cube_=n.Cube.getInstance(),this.fileExtensions=[".csv"]}return i.prototype.clear=function(){this.data=[],this.dataLoadedLength=this.bytesLoaded=0,this.connected=!1,this.chunkIndex=this.lastPosition=0,this.recordsetDelimiter="\n",this.fieldEnclosureToken='"',this.columnType=[],this.hasSizeHeader=this.isFileFailed=this.isFileLoaded=this.isHeaderParsed=!1,this.lastByte=0,this.lastRow="",this.rowIdx=this.beforeBeforeLastByte=this.beforeLastByte=0,this.BLOCK_SIZE=100,null!=this.loader&&(this.loader.removeAllEventListeners(),this.loader.dispose(),this.loader=null),this.stopTimer()},i.prototype.load=function(t,n,i,o,a){try{this.clear(),this.filename=t.filename,this.successHandler=n,this.errorHandler=i,this.connectedHandler=o,this.cancelledHandler=a,this.fieldSeparator=t.fieldSeparator,this.ignoreQuotedLineBreaks=t.ignoreQuotedLineBreaks,t.isDemo?this.generate():(void 0!==this.filename&&""!=this.filename&&"()"!=this.filename.substr(-2)||!1!==t.browseForFile?this.filename=s.URLUtils.getUrl(this.filename,!0):this.onFileError(),!0===t.browseForFile?this.browseFile():this.isGooggleDrive(t.filename)&&s.nullOrUndefined(t.requestHeader)?this.authorizeGoogleDrive():(e.preloader(!0,e.model._labels.Labels.MESSAGE_LOADING_DATA),this.loadFile(this.filename,t.requestHeader)))}catch(r){console.error(r.stack),this.onFileError()}},i.prototype.generate=function(){},i.prototype.authorizeGoogleDrive=function(){window.gapi&&window.gapi.load("auth",{callback:this.onAuthApiLoadHandler})},i.prototype.onAuthApiLoad=function(){""==e._view.PivotView.stage.getToolbar().googleClientId||null==e._view.PivotView.stage.getToolbar().googleClientId?this.onGoogleClientIdNotSet():window.gapi.auth.authorize({client_id:e._view.PivotView.stage.getToolbar().googleClientId,scope:e._view.PivotView.stage.getToolbar().googleScope,immediate:!1},this.onhandleAuthResultHandler)},i.prototype.handleAuthResult=function(t){var n={};t&&!t.error?(n.Authorization="Bearer "+t.access_token,e.preloader(!0,e.model._labels.Labels.MESSAGE_LOADING_DATA),this.loadFile(this.filename,n)):(e.preloader(!1),this.onFileError())},i.prototype.isGooggleDrive=function(e){return-1<e.indexOf("www.googleapis.com/drive")},i.prototype.onGoogleClientIdNotSet=function(){e.uialert(e.model._labels.Labels.MESSAGE_NO_GOOGLE_CLIENT_KEY,e.model._labels.Labels.ERROR,e.AlertType.ERROR)},i.prototype.browseFile=function(){var e=this;this.fileReference=new o.FileReference,this.fileReference.addEventListener(t._Event.SELECT,(function(){return e.onFileSelected()})),this.fileReference.addEventListener(t._Event.COMPLETE,(function(){return e.onFileComplete()})),this.fileReference.addEventListener(t._Event.PROGRESS,(function(t){return e.onFileProgress(t)})),this.fileReference.addEventListener(t._Event.CANCEL,(function(){return e.onFileCancelled()})),this.fileReference.addEventListener(t._Event.ERROR,(function(){return e.onFileError()})),this.fileReference.browse(this.fileExtensions)},i.prototype.onFileSelected=function(){e.preloader(!0,e.model._labels.Labels.MESSAGE_LOADING_DATA,"",!0,!0),this.loader=this.fileReference,this.fileReference.load(),this.fileReference=null},i.prototype.loadFile=function(e,n){var i=this;void 0===n&&(n=null);var r=new o.URLStream;r.dataType=o.DataType.TEXT,r.addEventListener(t._Event.COMPLETE,(function(){return i.onFileComplete()})),r.addEventListener(t._Event.CONNECTED,(function(){return i.onFileConnected()})),r.addEventListener(t._Event.PROGRESS,(function(e){return i.onFileProgress(e)})),r.addEventListener(t._Event.ERROR,(function(){return i.onFileError()})),r.load(e,n),this.loader=r,this.timer=new s.Timer(100,1e3),this.timer.addEventListener(s.TimerEvent.TIMER,this.tickHandler),this.timer.addEventListener(s.TimerEvent.TIMER_COMPLETE,this.timerCompleteHandler),this.timer.start()},i.prototype.onTick=function(){0<this.bytesLoaded||this.isFileLoaded||this.isFileFailed?this.stopTimer():null!=this.timer&&e.preloader(!0,e.model._labels.Labels.MESSAGE_LOADING_DATA,s.StringUtils.bind(e.model._labels.Labels.MESSAGE_LOADING_WAITING,s.NumberFormatter.format(this.timer.currentCount/10,new e.model.format.vo.FormatValueObject,!1,!1,1)))},i.prototype.onTimerComplete=function(){this.timer.running&&this.stopTimer()},i.prototype.stopTimer=function(){this.timer&&this.timer.running&&(this.timer.stop(),this.timer.removeEventListener(s.TimerEvent.TIMER,this.tickHandler),this.timer.removeEventListener(s.TimerEvent.TIMER_COMPLETE,this.timerCompleteHandler))},i.prototype.onFileCancelled=function(){null!=this.cancelledHandler&&(this.cancelledHandler(),this.cancelledHandler=null),this.clear()},i.prototype.onFileError=function(){if(e.preloader(!1),0==this.isFileFailed){this.isFileFailed=!0;var t=e.model.XSSCheck.valid(this.filename)?this.filename:e.model.XSSCheck.validate(this.filename);e.uialert(s.StringUtils.bind(e.model._labels.Labels.MESSAGE_UNABLE_TO_OPEN_FILE,t),e.model._labels.Labels.ERROR,e.AlertType.ERROR)}null!=this.errorHandler&&(this.errorHandler(),this.errorHandler=null),this.stopTimer()},i.prototype.onHeaderParsingError=function(){e.preloader(!1),e.uialert(s.StringUtils.bind(e.model._labels.Labels.MESSAGE_CSV_HEADER_PARSING_ERROR),e.model._labels.Labels.ERROR,e.AlertType.ERROR)},i.prototype.onFileProgress=function(t){if(404==t.target.status)this.onFileError();else if(!s.nullOrUndefined(this.loader))try{var n=this.loader.response;if(null!=n&&0!=n.length&&(this.bytesLoaded!=t.loaded||this.dataLoadedLength!=n.length)&&(this.hasSizeHeader=0<t.total&&t.lengthComputable,this.dataLoadedLength=n.length,this.bytesLoaded=t.loaded,1e4<n.length-this.lastPosition||t.loaded==t.total))if(this.bytesLoaded>e.model.license.Limitations.MAX_CSV)e.uialert(e.model.license.LicenseLabels.getLabel(e.model.license.LicenseLabels.betaversion),e.model.license.LicenseLabels.getLabel(e.model.license.LicenseLabels.tooLarge)),e.preloader(!1),null!=this.errorHandler&&(this.errorHandler(),this.errorHandler=null),this.stopTimer();else{this.isFileLoaded=t.loaded==t.total,void 0!==n&&this.parseChunk(n.substring(this.lastPosition,n.length)),this.lastPosition=n.length;var i=s.StringUtils.bind(e.model._labels.Labels.MESSAGE_LOADING_PROGRESS,s.NumberFormatter.formatThousands(t.loaded.toFixed(0)),s.NumberFormatter.formatThousands(t.total.toFixed(0)));e.preloader(!0,e.model._labels.Labels.MESSAGE_LOADING_DATA,i)}}catch(r){console.error(r.stack),this.onFileError()}},i.prototype.onFileConnected=function(){this.connected=!0,e.preloader(!0,e.model._labels.Labels.MESSAGE_LOADING_DATA,"")},i.prototype.setConnected=function(){null!=this.connectedHandler&&(this.connectedHandler(),this.connectedHandler=null)},i.prototype.onFileComplete=function(){if(!s.nullOrUndefined(this.loader))try{if(0==this.lastPosition||!this.hasSizeHeader){var t=this.loader.response;this.connected=!0,t.length>e.model.license.Limitations.MAX_CSV?(e.uialert(e.model.license.LicenseLabels.getLabel(e.model.license.LicenseLabels.betaversion),e.model.license.LicenseLabels.getLabel(e.model.license.LicenseLabels.tooLarge)),e.preloader(!1),null!=this.errorHandler&&(this.errorHandler(),this.errorHandler=null),this.clear()):(this.isFileLoaded=!0,this.isStarted?this.hasSizeHeader||(this.lastPosition<t.length?(this.parseChunk(t.substring(this.lastPosition,t.length)),this.lastPosition=t.length):this.data.push(this.lastRow)):this.parseChunk(t),this.parseAllDataRows(),this.onDataParsed())}}catch(i){console.error(i.stack),this.onFileError()}},i.isCSVValid=function(t){return-1==(t=t.toLowerCase()).indexOf("<html>")&&-1==t.indexOf("<config>")&&0!=t.trim().length&&-1==t.indexOf("<!doctype")||(e.uialert(e.model._labels.Labels.MESSAGE_INAPPROPRIATE_FILE_FORMAT,e.model._labels.Labels.ERROR,e.AlertType.ERROR),!1)},i.prototype.parseChunk=function(t){this.isStarted=!0,this.setConnected(),0==this.chunkIndex&&-1==t.indexOf("\n")&&-1!=t.indexOf("\r")&&(this.recordsetDelimiter="\r"),void 0===this.fieldSeparator&&(this.fieldSeparator=this.chooseSeparator(-1==t.indexOf("\n")&&-1==t.indexOf("\r")?t:t.substring(0,t.indexOf(this.recordsetDelimiter)))),this.appendData(t),0==this.isHeaderParsed&&(1<this.data.length||e.model._options.OptionsManager.showEmptyData)&&(this.parseHeader(this.data.shift(),this.data[0]),this.isHeaderParsed=!0)},i.prototype.onDataParsed=function(){e.preloader(!1),this.isHeaderParsed?null!=this.successHandler&&this.successHandler():(e.uialert(e.model._labels.Labels.MESSAGE_NO_DATA_AVAILABLE,e.model._labels.Labels.ERROR,e.AlertType.ALERT),null!=this.errorHandler&&(this.errorHandler(),this.errorHandler=null)),this.clear()},i.prototype.parseHeader=function(t,r){if(i.isCSVValid(t))try{s.nullOrUndefined(this.fieldSeparator)&&(this.fieldSeparator=",");var o=i.splitRow(t,this.fieldSeparator),a=i.splitRow(r,this.fieldSeparator);this.columnNames=[];for(var l=0;l<o.length;l++){var u,h=this.getColumnValue(a[l]),d=o[l],A=null;if(0<o[l].length&&-1<o[l].indexOf("{")){var p=o[l].substr(o[l].indexOf(":")+1,o[l].length);if(0<p.length){d=o[l].substring(0,o[l].indexOf(":"));try{A=JSON.parse(p)}catch(c){console.error("The following JSON meta object for the field '"+o[l].substring(0,o[l].indexOf(":"))+"' in CSV is invalid: "+p),console.error(c.stack),o[l]=d}}}if(s.nullOrUndefined(A)){var f=this.getColumnType(o[l],h,0==a.length);u=this.getColumnName(o[l]);var g=this.getColumnCaption(u),m=this.getColumnAlias(o[l])||g;if(this.columnType[l]=f,this.columnNames.push(u),A={type:f,caption:m,uniqueName:u},f==n.types.DataFieldType.LEVEL){var y=u.split(":");if(A.hierarchy=y[0],A.level=y.pop(),0<y.length){var v=y.pop();A.parent=v}}}else!s.nullOrUndefined(A.type)&&n.types.DataFieldType.valid(A.type)||(""==h||void 0===h?A.type=n.types.DataFieldType.STRING:isNaN(Number(h))?isNaN(Number(h))&&(A.type=s.StringUtils.isDate(h)&&e.model._options.OptionsManager.datePattern==e.model._options.OptionsManager.defaultDatePattern?n.types.DataFieldType.DATE:n.types.DataFieldType.STRING):A.type=n.types.DataFieldType.NUMBER),u=this.getColumnName(d),(s.nullOrUndefined(A.caption)||""==A.caption.length)&&(A.caption=this.getColumnCaption(u)),this.columnType[l]=A.type,this.columnNames.push(u);this.cube_.structure_.addDataField(A,u)}}catch(w){console.error(w.stack),this.onHeaderParsingError()}else this.onFileError()},i.prototype.getColumnValue=function(e){return null!=e&&(e=e.replace(",",".")),e},i.prototype.getColumnCaption=function(e){var t=e.split(a.ALIAS_DELIMITER);return 1<t.length?t[1]:(this.hasParentHierarchy(e)&&(t=e.split(":")),t[t.length-1])},i.prototype.getColumnName=function(e){if(e=e.trim().split(a.ALIAS_DELIMITER)[0],e=this.removeColumnFlags(e),-1<this.columnNames.indexOf(e)){for(var t=1,n=e;-1<this.columnNames.indexOf(n);)n=e+t,t++;e=n}return e},i.prototype.getColumnAlias=function(e){return 1<(e=e.split(a.ALIAS_DELIMITER)).length?e[1]:null},i.prototype.removeColumnFlags=function(e){return e.replace(/^(\+|dt\+|t\+|n\+|-|ds\+|d\+|m\+|w\+|D\+|D4\+|url\+|img\+|id\+)/,"")},i.prototype.getColumnType=function(t,i,r){var o=n.types.DataFieldType.NUMBER;return t=t.trim(),s.nullOrUndefined(i)&&!r?n.types.DataFieldType.STRING:("+"==t.charAt(0)?o=n.types.DataFieldType.STRING:"t+"==t.substr(0,2)?o=n.types.DataFieldType.TIME:"dt+"==t.substr(0,3)?o=n.types.DataFieldType.DATETIME:"n+"==t.substr(0,2)||"-"==t.charAt(0)?o=n.types.DataFieldType.NUMBER:"ds+"==t.substr(0,3)?o=n.types.DataFieldType.DATE_STRING:"d+"==t.substr(0,2)?o=n.types.DataFieldType.DATE:"m+"==t.substr(0,2)?o=n.types.DataFieldType.MONTH:"w+"==t.substr(0,2)?o=n.types.DataFieldType.WEEKDAY:"D+"==t.substr(0,2)?o=n.types.DataFieldType.HIERARCHICAL_DATE:"D4+"==t.substr(0,3)?o=n.types.DataFieldType.HIERARCHICAL_DATE_WITH_QUARTERS:"id+"==t.substr(0,3)?o=n.types.DataFieldType.ID:""==i||void 0===i?o=n.types.DataFieldType.STRING:isNaN(Number(i))&&(o=s.StringUtils.isDate(i)&&e.model._options.OptionsManager.datePattern==e.model._options.OptionsManager.defaultDatePattern?n.types.DataFieldType.DATE:n.types.DataFieldType.STRING),o==n.types.DataFieldType.STRING&&this.hasParentHierarchy(t)&&(o=n.types.DataFieldType.LEVEL),o)},i.prototype.hasParentHierarchy=function(e){return"+"==e.charAt(0)&&(e=e.substr(1)),1<e.split(":").length&&-1<this.columnNames.indexOf(e.split(":")[0].trim())},i.prototype.parseDataRows=function(){for(var t=s.getTimer(),n=this.data.length;50>s.getTimer()-t&&this.rowIdx!=n;)this.parseDataRow(this.data[this.rowIdx++]);return 500<s.getTimer()-this.preloaderTime&&this.isFileLoaded&&(t=e.model._labels.Labels.MESSAGE_ANALYZING_DATA,n=(this.rowIdx/this.data.length*100).toFixed(0),n=s.StringUtils.bind(e.model._labels.Labels.MESSAGE_ANALYZING_PROGRESS,s.NumberFormatter.formatThousands(this.rowIdx.toFixed(0)),s.NumberFormatter.formatThousands(this.data.length.toFixed(0)),n),e.preloader(!0,t,n),this.preloaderTime=s.getTimer()),this.isFileLoaded&&this.rowIdx>=this.data.length},i.prototype.parseAllDataRows=function(){for(e.preloader(!0,e.model._labels.Labels.MESSAGE_ANALYZING_DATA,s.StringUtils.bind(e.model._labels.Labels.MESSAGE_ANALYZING_RECORDS,s.NumberFormatter.formatThousands(this.data.length.toFixed(0))));this.rowIdx<this.data.length;this.rowIdx++)this.parseDataRow(this.data[this.rowIdx])},i.prototype.parseDataRow=function(t){if(!s.nullOrEmpty(t)&&void 0!==this.columnNames){if((t=s.StringUtils.trim(t,this.fieldSeparator)).split(this.fieldSeparator).length<this.columnNames.length)for(var i=t.split(this.fieldSeparator).length;i<this.columnNames.length;i++)t=t.concat(this.fieldSeparator);t+=" ";var r=!1,o=!1,a="",l=0,u=[],c=[],h="";for(i=0;i<t.length;i++){var d=t.charAt(i);i==t.length-1||d==this.fieldSeparator&&!r?(i==t.length-1&&(a+=d),(a=(a=a.trim()).replace("\r","")).charAt(0)==this.fieldEnclosureToken&&a.charAt(a.length-1)==this.fieldEnclosureToken&&(a=a.slice(1,a.length-1)),this.columnType[l]==n.types.DataFieldType.ID&&(h=a),e.model.XSSCheck.valid(a)||(a=e.model.XSSCheck.validate(a)),null!=this.columnNames[l]&&this.cube_.localDataStorage.addMember(this.columnNames[l],a,this.columnType[l],u,c),r=o=!1,a="",l++):d==this.fieldEnclosureToken?(o||(a+=d),r=!r,o=!0):(a+=d,o=!1)}this.cube_.localDataStorage.insert(u,c,h)}},i.prototype.appendData=function(e){void 0!==this.lastRow&&0<this.lastRow.length&&(e=s.StringUtils.concat(this.lastRow,e)),e=this.splitLines(e);for(var t=0;t<e.length;t++)this.data.push(e[t]);1!=this.isFileLoaded&&(this.lastRow=this.data.pop())},i.prototype.splitLines=function(e){var t=!1;if(e=e.split(this.recordsetDelimiter),0==this.ignoreQuotedLineBreaks)for(var n=0;n<e.length;n++)t?(this.isQuoteOpen(e[n])&&(t=!1),e[n-1]+="<br/>"+e[n],e.splice(n,1),n--):this.isQuoteOpen(e[n])&&(t=!0);return e},i.prototype.isQuoteOpen=function(e){return 1==this.countChar(e,this.fieldEnclosureToken)%2},i.prototype.countChar=function(e,t){var n=0;if(e)for(var i=0;i<e.length;i++)e.charAt(i)==t&&n++;return n},i.prototype.chooseSeparator=function(e){if(null==this.fieldSeparator)return e.split(",").length>(e=e.split(";").length)?",":";"},i.splitRow=function(e,t,n){if(void 0===n&&(n='"'),null==e)return[];for(var i="",r=!1,o=!1,s=[],a=0;a<e.length;a++){var l=e.charAt(a);a==e.length-1||l==t&&!r?(a==e.length-1&&l==t?(s.push(i),i=""):a==e.length-1&&(i+=l),(i=i.trim()).charAt(0)==n&&i.charAt(i.length-1)==n&&(i=i.slice(1,i.length-1)),r=o=!1,s.push(i),i=""):l==n?(o||(i+=l),r=!r,o=!0):(i+=l,o=!1)}return s},i.splitRowWithMeta=function(e,t,n,i,r){if(void 0===n&&(n='"'),void 0===i&&(i="{"),void 0===r&&(r="}"),null==e)return[];for(var o="",s=!1,a=!1,l=!1,u=[],c=0;c<e.length;c++){var h=e.charAt(c);c==e.length-1||h==t&&!s&&!l?(c==e.length-1&&h==t?(u.push(o),o=""):c==e.length-1&&(o+=h),(o=o.trim()).charAt(0)==n&&o.charAt(o.length-1)==n&&(o=o.slice(1,o.length-1)),l=s=a=!1,u.push(o),o=""):h==n?(a||(o+=h),s=!s,a=!0):(a=!1,h==i?l=!0:h==r&&(l=!1),o+=h)}return u},i.timeCaption=function(t){return t&&0<t.length?t:e.model._labels.Labels.INVALID_DATE},i.prototype.loadMembers=function(e,t,n){},i.prototype.loadMemberChildren=function(e,t,n,i){},i.prototype.loadMemberDescendants=function(e,t,n,i){},i.prototype.searchMembers=function(e,t,n,i){},i.prototype.cancel=function(){this.clear(),this.connectedHandler=this.errorHandler=this.successHandler=null},i}();i.CSVLoader=r;var a=function(){function e(){}return e.NAN="N",e.FLOAT="F",e.DELIMITER="|",e.NEW_LINE="\n",e.ALIAS_DELIMITER="+T+",e}();i.Consts=a}((n=e.data_||(e.data_={})).csv||(n.csv={}))}(r||(r={})),function(e){var t,n,i;t=e.data_||(e.data_={}),n=t.csv||(t.csv={}),i=function(){function i(){this._embedded=!1,this._dataOffset=0,this.FIELD_DELIMITER=",",this.RECORDSET_DELIMITER="\n",this._cube=t.Cube.getInstance(),this._isStarted=!1,this._embeddedDataStartSign="\x3c!--",this._embeddedDataStopSign="--\x3e",this._embeddedDataJSONStartSign="/**----**",this._embeddedDataJSONStopSign="**--!--**/",this._currentDataStopSign=this._currentDataStartSign="",this._preloaderTime=0,this.regDelimiter=RegExp("%d%","g"),this.regQuote=RegExp("%q%","g"),this.regNewline=RegExp("%n%","g")}return i.prototype.load=function(e,n,i,r,o){try{this.clear(),this._connectionInfo=e,this._successHandler=n,this.connectedHandler=r,this.cancelledHandler=o,this._errorHandler=i,this._embedded=this._connectionInfo.embedded,this._dataOffset=this._connectionInfo.embeddedDataOffset,this._dataToLoad=this._connectionInfo.embeddedDataToLoad,this._embeddedDataStarted=!1,this._embedded&&null!=this._dataToLoad&&this.loadEmbedded(this._dataToLoad)}catch(t){console.error(t.stack),this.onFileError()}},i.prototype.defineCurrentDataSigns=function(e){this._currentDataStartSign=-1<e.indexOf(this._embeddedDataJSONStartSign)?this._embeddedDataJSONStartSign:this._embeddedDataStartSign,this._currentDataStopSign=this._currentDataStartSign==this._embeddedDataJSONStartSign?this._embeddedDataJSONStopSign:this._embeddedDataStopSign},i.prototype.loadEmbedded=function(n){var i=this;this.BLOCK_SIZE=2e3,this._bytesLoaded=0;try{var r=new e.DataStream(n,this._dataOffset,e.DataStream.BIG_ENDIAN);s.getTimer();var o=r.byteLength>this.BLOCK_SIZE?this.BLOCK_SIZE:r.byteLength,a=r.readString(o);this.defineCurrentDataSigns(a),this._dataStrFromBytes="",this._dataStrFromBytes+=a.substring(this._currentDataStartSign.length),this._bytesLoaded+=o,this._bytesToLoad=r.byteLength,this._bytesLoaded<this._bytesToLoad?s.ThreadManager.addTask(this.loadBytes,this,r,(function(){return i.onComplete()})):this.onComplete()}catch(t){console.error(t.stack),this.onFileError()}},i.prototype.loadBytes=function(e){var t=this._bytesToLoad-this._bytesLoaded>this.BLOCK_SIZE?this.BLOCK_SIZE:this._bytesToLoad-this._bytesLoaded;return e=e.readString(t),this._bytesLoaded+=t,this._dataStrFromBytes+=e,this.showLoadingProgress(this._bytesLoaded,this._bytesToLoad),this._bytesLoaded>=this._bytesToLoad},i.prototype.showLoadingProgress=function(t,n){var i=s.StringUtils.bind(e.model._labels.Labels.MESSAGE_ANALYZING_RECORDS,(t/n*100).toFixed(0)+"%");e.preloader(!0,e.model._labels.Labels.MESSAGE_LOADING,i)},i.prototype.onComplete=function(){e.preloader(!1),this._isFileLoaded=!0,this.processStringFromBytes(this._dataStrFromBytes)},i.prototype.setConnected=function(){null!=this.connectedHandler&&(this.connectedHandler(),this.connectedHandler=null)},i.prototype.processStringFromBytes=function(e){e=s.StringUtils.trimLeft(e),this.parseChunk(e)},i.prototype.onTick=function(){if(this._timerCount++,0<this._bytesLoaded||this._isFileLoaded||this._isFileFailed)s.fmClearInterval(this._timer),this._timerCount=0;else{var t=this._timerCount/10;this._isConnected?(196<t&&(t=196),t=s.NumberFormatter.format(t/2,new e.model.format.vo.FormatValueObject,!1,!1,1)+"%"):t=s.StringUtils.bind(e.model._labels.Labels.MESSAGE_LOADING_WAITING,s.NumberFormatter.format(t,new e.model.format.vo.FormatValueObject,!1,!1,1)),e.preloader(!0,e.model._labels.Labels.MESSAGE_LOADING_DATA,t)}},i.prototype.onFileError=function(){s.fmClearInterval(this._timer),e.preloader(!1),0==this._isFileFailed&&(this._isFileFailed=!0,e.uialert(s.StringUtils.bind(e.model._labels.Labels.MESSAGE_UNABLE_TO_OPEN_FILE,""),e.model._labels.Labels.ERROR,e.AlertType.ERROR)),null!=this.errorHandler&&(this.errorHandler(),this.errorHandler=null),this.clear()},i.prototype.parseChunk=function(e){this._isStarted=!0,this.setConnected(),this.appendData(e),0==this._isHeaderParsed&&1<this._data.length&&(this._data.shift(),this.parseHeader(this._data.shift()),this._isHeaderParsed=!0,this.parseAllDataRows(),this.onDataParsed())},i.prototype.appendData=function(e){void 0!==this._lastRow&&0<this._lastRow.length&&(e=s.StringUtils.concat(this._lastRow,e)),e=0<=e.indexOf(this.RECORDSET_DELIMITER)?e.split(this.RECORDSET_DELIMITER):[];for(var t=0;t<e.length;t++)this._data.push(e[t]);1!=this._isFileLoaded&&(this._lastRow=this._data.pop(),this._lastRow=this._lastRow==this._currentDataStopSign?this._data.pop():this._lastRow)},i.prototype.parseHeader=function(e){e=n.CSVLoader.splitRowWithMeta(e,this.FIELD_DELIMITER),this._columnNames=[];for(var i=0;i<e.length;i++){var r=e[i],o={};if(0<e[i].length&&-1<e[i].indexOf("{")){var a=e[i].substr(e[i].indexOf(":")+1,e[i].length);if(0<a.length){r=e[i].substring(0,e[i].indexOf(":"));try{o=JSON.parse(a)}catch(t){console.error("The following JSON meta object for the field '"+e[i].substring(0,e[i].indexOf(":"))+"' in CSV is invalid: "+a),console.error(t.stack)}}}r=this.getColumnName(r),(s.nullOrUndefined(o.caption)||""==o.caption.length)&&(o.caption=this.getColumnCaption(r)),this._columnType[i]=o.type,this._columnNames.push(r),this._cube.structure_.addDataField(o,r)}},i.prototype.getColumnCaption=function(e){var t=e.split(n.Consts.ALIAS_DELIMITER);return 1<t.length?t[1]:(this.hasParentHierarchy(e)&&(t=e.split(":")),t[t.length-1])},i.prototype.hasParentHierarchy=function(e){return"+"==e.charAt(0)&&(e=e.substr(1)),1<e.split(":").length&&-1<this._columnNames.indexOf(e.split(":")[0].trim())},i.prototype.getColumnName=function(e){if(e=e.trim().split(n.Consts.ALIAS_DELIMITER)[0],e=this.removeColumnFlags(e),e=this.decodeChars(e),-1<this._columnNames.indexOf(e)){for(var t=1,i=e;-1<this._columnNames.indexOf(i);)i=e+t,t++;e=i}return e},i.prototype.removeColumnFlags=function(e){return e.replace(/^(\+|dt\+|t\+|n\+|-|ds\+|d\+|m\+|w\+|D\+|D4\+|url\+|img\+|id\+)/,"")},i.prototype.parseAllDataRows=function(){for(e.preloader(!0,e.model._labels.Labels.MESSAGE_ANALYZING_DATA,s.StringUtils.bind(e.model._labels.Labels.MESSAGE_ANALYZING_RECORDS,s.NumberFormatter.formatThousands(this._data.length.toFixed(0))));this._rowIdx<this._data.length;this._rowIdx++)this.parseDataRow(this._data[this._rowIdx])},i.prototype.parseDataRows=function(){var t=s.getTimer(),n=this._rowIdx+this.BLOCK_SIZE;for(n>this._data.length&&(n=this._data.length);this._rowIdx<n;this._rowIdx++)this.parseDataRow(this._data[this._rowIdx]);return this.BLOCK_SIZE=s.ThreadManager.adjustTaskSize(s.getTimer()-t,this.BLOCK_SIZE),1e3<s.getTimer()-this._preloaderTime&&this._isFileLoaded&&(t=e.model._labels.Labels.MESSAGE_ANALYZING_DATA,n=(this._rowIdx/this._data.length*100).toFixed(0),n=s.StringUtils.bind(e.model._labels.Labels.MESSAGE_ANALYZING_PROGRESS,s.NumberFormatter.formatThousands(this._rowIdx.toFixed(0)),s.NumberFormatter.formatThousands(this._data.length.toFixed(0)),n),e.preloader(!0,t,n),this._preloaderTime=s.getTimer()),this._isFileLoaded&&this._rowIdx>=this._data.length},i.prototype.parseDataRow=function(e){if(!s.nullOrEmpty(e)&&void 0!==this._columnNames&&e!=this._currentDataStopSign){if(e.split(this.FIELD_DELIMITER).length<this._columnNames.length)for(var t=e.split(this.FIELD_DELIMITER).length;t<this._columnNames.length;t++)e=e.concat(this.FIELD_DELIMITER);var n=[],i=[];for(e=e.split(this.FIELD_DELIMITER),t=0;t<e.length;t++)this.parseDataValue(e[t],t,n,i);this._cube.localDataStorage.insert(n,i)}},i.prototype.parseDataValue=function(n,i,r,o){var s=!0;if(null!=this._columnNames[i]){if(this._columnType[i]==t.types.DataFieldType.STRING||this._columnType[i]==t.types.DataFieldType.WEEKDAY||this._columnType[i]==t.types.DataFieldType.MONTH){if("^"==n.charAt(0)){var a=parseInt(n.substring(1));if(0==isNaN(a)){var l=this._cube.structure_.getDataField(this._columnNames[i]);null!=(a=l.members.getItemAt(a+1))&&(n=a.caption==e.model._labels.Labels.MEMBER_BLANK?"":a.caption,s=!1)}}}else this._columnType[i]==t.types.DataFieldType.LEVEL?"^"==n.charAt(0)&&(a=parseInt(n.substring(1)),0==isNaN(a)&&(null==(l=this._cube.structure_.getDataField(this._columnNames[i])).members&&(l=this._cube.structure_.getDataField(this._columnNames[i]).hierarchy),null!=(a=l.members.getItemAt(a+1))&&(n=a.caption==e.model._labels.Labels.MEMBER_BLANK?"":a.caption,s=!1))):this._columnType[i]!=t.types.DataFieldType.DATE&&this._columnType[i]!=t.types.DataFieldType.DATE_STRING&&this._columnType[i]!=t.types.DataFieldType.HIERARCHICAL_DATE&&this._columnType[i]!=t.types.DataFieldType.HIERARCHICAL_DATE_WITH_QUARTERS||(n=1e3*parseInt(n),s=!1);1==s&&(n=this.decodeChars(n)),this._cube.localDataStorage.addMember(this._columnNames[i],n,this._columnType[i],r,o)}},i.prototype.decodeChars=function(e){return e.replace(this.regDelimiter,",").replace(this.regQuote,'"').replace(this.regNewline,"\n")},i.prototype.onDataParsed=function(){e.preloader(!1),this._isHeaderParsed?this.successHandler():(e.uialert(e.model._labels.Labels.MESSAGE_NO_DATA_AVAILABLE,e.model._labels.Labels.ERROR,e.AlertType.ALERT),this.errorHandler(),this._errorHandler=null),this.clear()},i.prototype.clear=function(){this._data=[],this._currentDataStopSign=this._currentDataStartSign="",this._bytesLoaded=0,this._isConnected=!1,this._columnType=[],this._hasSizeHeader=this._isFileFailed=this._isFileLoaded=this._isHeaderParsed=!1,this._lastRow="",this._rowIdx=0,this.BLOCK_SIZE=100,s.fmClearInterval(this._timer)},i.prototype.successHandler=function(){null!=this._successHandler&&this._successHandler()},i.prototype.errorHandler=function(){null!=this._errorHandler&&this._errorHandler()},i.prototype.loadDimensions=function(e){},i.prototype.loadHierarchies=function(e){},i.prototype.loadLevels=function(e){},i.prototype.loadMeasures=function(e){},i.prototype.loadMembers=function(e,t,n){},i.prototype.loadMemberChildren=function(e,t,n,i){},i.prototype.loadMemberDescendants=function(e,t,n,i){},i.prototype.searchMembers=function(e,t,n,i){},i.prototype.cancel=function(){this.connectedHandler=this.errorHandler=this.successHandler=null},i}(),n.CSVEmbeddedLoader=i}(r||(r={})),function(e){var t;!function(n){var i=function(){function n(){this.NaN="NaN",this._embeddedJSONDataStart="/**----**",this._embeddedJSONDataFinish="**--!--**/"}return n.prototype.getData=function(t){this._callback=t,e.preloader(!0,e.model._labels.Labels.MESSAGE_SAVING),this.preprocessHeader(),this.composeData()},n.prototype.preprocessHeader=function(){var e;for(this._allHierarchies=t.Cube.getInstance().structure_.allHierarchies(),this._columnsList=[],this._colIdx=0;this._colIdx<this._allHierarchies.length;){e=this._allHierarchies.getItemAt(this._colIdx);var n=t.Cube.getInstance().structure_.hierarchyToMeasure(e.uniqueName).type;n!=t.types.MeasureType.COUNT&&n!=t.types.MeasureType.DATE?this.processMeasureColumn(t.Cube.getInstance().structure_.hierarchyToMeasure(e.uniqueName)):this.processHierarchyColumn(e),this._colIdx++}},n.prototype.composeData=function(){var e=this;this._rowIdx=0,this._data="",this._facts=t.Cube.getInstance().localDataStorage.getFacts(),this._tuples=t.Cube.getInstance().localDataStorage.getTuples(),s.ThreadManager.addTask(this.composeLine,this,null,(function(){return e.onDataCreated()}))},n.prototype.composeLine=function(){var e=s.getTimer();for(this._colIdxDifference=this._colIdx=0;this._rowIdx<this._tuples.length;){for(;this._colIdx+this._colIdxDifference<this._tuples[this._rowIdx].length;)this.addMember(this.composeMember()),this._colIdx++;if(this._rowIdx++,this._data+="\n",this._colIdxDifference=this._colIdx=0,100<s.getTimer()-e)break}return this.showSavingProgress(this._rowIdx,this._tuples.length),this._rowIdx>=this._tuples.length},n.prototype.composeMember=function(){var e,n=this._columnsList[this._colIdx].type;if(n!=t.types.DataFieldType.DATE&&n!=t.types.DataFieldType.DATE_STRING&&n!=t.types.DataFieldType.LEVEL&&n!=t.types.DataFieldType.HIERARCHICAL_DATE&&n!=t.types.DataFieldType.HIERARCHICAL_DATE_WITH_QUARTERS&&n!=t.types.DataFieldType.TIME&&n!=t.types.DataFieldType.DATETIME&&(e=this._allHierarchies.getItem(this._columnsList[this._colIdx].uniqueName).members.getItemAt(this._tuples[this._rowIdx][this._colIdx+this._colIdxDifference]).caption),n==t.types.DataFieldType.NUMBER)return null!=e?e.toString():"";if(n!=t.types.DataFieldType.STRING&&n!=t.types.DataFieldType.WEEKDAY&&n!=t.types.DataFieldType.MONTH){if(n==t.types.DataFieldType.LEVEL){e=(n=this._allHierarchies.getItem(this._columnsList[this._colIdx].hierarchy)).members.getItemAt(this._tuples[this._rowIdx][this._colIdx+this._colIdxDifference]).caption;for(var i=this._colIdx,r=0;r<n.levels_.length-2;r++)this.addMember(this.composeStringData(e,i)),this._colIdx++,e=null==this._tuples[this._rowIdx][this._colIdx+this._colIdxDifference]||""==this._tuples[this._rowIdx][this._colIdx+this._colIdxDifference]+""?"":n.members.getItemAt(this._tuples[this._rowIdx][this._colIdx+this._colIdxDifference]).caption;return this.composeStringData(e,i)}if(n==t.types.DataFieldType.DATE_STRING)return this._allHierarchies.getItem(this._columnsList[this._colIdx].uniqueName).members.getItemAt(this._tuples[this._rowIdx][this._colIdx+this._colIdxDifference]).levelOrdinal/1e3+"";if(n==t.types.DataFieldType.DATE)return e="",e+=(n=this._allHierarchies.getItem(this._columnsList[this._colIdx].uniqueName+".Year").members.getItemAt(this._tuples[this._rowIdx][this._colIdx+this._colIdxDifference])).caption+"-",this._colIdxDifference++,e+=(n=this._allHierarchies.getItem(this._columnsList[this._colIdx].uniqueName+".Month").members.getItemAt(this._tuples[this._rowIdx][this._colIdx+this._colIdxDifference])).caption+"-",this._colIdxDifference++,e+=(n=this._allHierarchies.getItem(this._columnsList[this._colIdx].uniqueName+".Day").members.getItemAt(this._tuples[this._rowIdx][this._colIdx+this._colIdxDifference])).caption,new Date(e).getTime()/1e3+Math.abs(60*(new Date).getTimezoneOffset())+"";if(n==t.types.DataFieldType.HIERARCHICAL_DATE||n==t.types.DataFieldType.HIERARCHICAL_DATE_WITH_QUARTERS)return this.composeHierarchicalDateData(n);if(n==t.types.DataFieldType.TIME||n==t.types.DataFieldType.DATETIME)return this._facts[this._rowIdx][this._colIdx+this._colIdxDifference]+""}return this.composeStringData(e)},n.prototype.addMember=function(t){this._data+=t==this.NaN||t==e.model._labels.Labels.MEMBER_BLANK?"":t,this._data+=this._colIdx+this._colIdxDifference<this._tuples[this._rowIdx].length-1?",":""},n.prototype.composeStringData=function(e,t){return void 0===t&&(t=this._colIdx),""==e?e:(this._columnsList[t].members.keyExists(e)||this._columnsList[t].members.addItem(e,this._columnsList[t].members.length),this.encodeChars(e))},n.prototype.encodeChars=function(e){return e.replace(/,/g,"%d%").replace(/\"/g,"%q%").replace(/\n/g,"%n%")},n.prototype.composeHierarchicalDateData=function(e){return this._colIdxDifference+=2,this._colIdxDifference=e==t.types.DataFieldType.HIERARCHICAL_DATE_WITH_QUARTERS?this._colIdxDifference+1:this._colIdxDifference,this._allHierarchies.getItem(this._columnsList[this._colIdx].uniqueName).members.getItemAt(this._tuples[this._rowIdx][this._colIdx+this._colIdxDifference]).levelOrdinal/1e3+""},n.prototype.onDataCreated=function(){e.preloader(!1),null!=this._callback&&this._callback(this.getResult())},n.prototype.processHierarchyColumn=function(e){var n=this.getHierarchyType(e);n==t.types.DataFieldType.LEVEL?this.processLevelsColumn(e):n==t.types.DataFieldType.DATE?(this._columnsList.push(this.createColumn(n,e.dimension.uniqueName,e.dimension.caption)),this._colIdx+=2):this._columnsList.push(this.createColumn(n,e.uniqueName,e.caption))},n.prototype.getResult=function(){for(var t=this._embeddedJSONDataStart+"\n___csv___WDR___"+e.Pivot.BUILD_VERSION+"\n",n=0;n<this._columnsList.length;n++)t+=this._columnsList[n].uniqueName,t+=":{",t+='"type": "'+this._columnsList[n].type+'"',this._columnsList[n].isLevel?(t+=', "hierarchy": "'+this._columnsList[n].hierarchy+'"',t+=', "level": "'+this._columnsList[n].uniqueName+'"',s.nullOrUndefined(this._columnsList[n].parent)||(t+=', "parent": "'+this._columnsList[n].parent+'"')):this._columnsList[n].uniqueName!=this._columnsList[n].caption&&(t+=', "caption": "'+this._columnsList[n].caption+'"'),t+="}",t+=n<this._columnsList.length-1?",":"";return t+"\n"+this._data+this._embeddedJSONDataFinish},n.prototype.processMeasureColumn=function(e){this._columnsList.push(this.createColumn(t.types.MeasureType.toDataFieldType(e.type),e.uniqueName,e.originalCaption,!0))},n.prototype.processLevelsColumn=function(e){var n=e.uniqueName;e=e.levels_;for(var i,r,o=1;o<e.length;o++){var a;r=o,i=e.getItem(e.getKeyAt(o)),1<r&&(a=e.getItem(e.getKeyAt(r-1)).uniqueName),(i=this.createColumn(t.types.DataFieldType.LEVEL,i.uniqueName,i.caption)).isLevel=!0,i.hierarchy=n,s.nullOrUndefined(a)||(i.parent=a),this._columnsList.push(i)}},n.prototype.getHierarchyType=function(e){if(e.dimension.type.toString()==t.types.DataFieldType.DATE_STRING)return t.types.DataFieldType.DATE_STRING;var n=t.types.DataFieldType.typeName(e.type);return 2<e.levels_.length&&(n=4==e.levels_.length&&e.levels_.getItemAt(1).uniqueName==e.uniqueName+".Year"?t.types.DataFieldType.HIERARCHICAL_DATE:5==e.levels_.length&&e.levels_.getItemAt(1).uniqueName==e.uniqueName+".Year"?t.types.DataFieldType.HIERARCHICAL_DATE_WITH_QUARTERS:t.types.DataFieldType.LEVEL),n},n.prototype.showSavingProgress=function(t,n){var i=s.StringUtils.bind(e.model._labels.Labels.MESSAGE_ANALYZING_RECORDS,(t/n*100).toFixed(0)+"%");e.preloader(!0,e.model._labels.Labels.MESSAGE_SAVING,i)},n.prototype.createColumn=function(e,t,n,i){void 0===i&&(i=!1);var o=new r;return o.type=e,o.uniqueName=t,o.caption=n,o.isMeasure=i,o},n}();n.CSVSaver=i;var r=function(){function e(){this._isLevel=!1,this._members=new s.AssociativeArray}return Object.defineProperty(e.prototype,"members",{get:function(){return this._members},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return this._type},set:function(e){this._type=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"uniqueName",{get:function(){return this._uniqueName},set:function(e){this._uniqueName=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"caption",{get:function(){return this._caption},set:function(e){this._caption=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isMeasure",{get:function(){return this._isMeasure},set:function(e){this._isMeasure=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isLevel",{get:function(){return this._isLevel},set:function(e){this._isLevel=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hierarchy",{get:function(){return this._hierarchyUniqueName},set:function(e){this._hierarchyUniqueName=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this._parentUniqueName},set:function(e){this._parentUniqueName=e},enumerable:!0,configurable:!0}),e}();n.Column=r}((t=e.data_||(e.data_={})).csv||(t.csv={}))}(r||(r={})),function(e){var t,n,i;n=(t=e.data_||(e.data_={})).json||(t.json={}),i=function(t){function n(){var e=t.call(this)||this;return e.CHUNK_SIZE=1e4,e.factsCounter=0,e.fileExtensions=[".js",".json"],e}return h(n,t),n.prototype.load=function(e,n,i,r,o){this.clear(),this.successHandler=n,this.errorHandler=i,this.connectedHandler=r,this.cancelledHandler=o,!0===e.browseForFile?this.browseFile():void 0!==e.filename&&""!=e.filename&&"()"!=e.filename.substr(-2)?t.prototype.load.call(this,e,n,i,r,o):this.addData(e.data)},n.prototype.onFileProgress=function(n){if(!s.nullOrUndefined(this.loader))try{if(1e4<n.loaded-this.bytesLoaded){var i=s.StringUtils.bind(e.model._labels.Labels.MESSAGE_LOADING_PROGRESS,s.NumberFormatter.formatThousands((n.loaded/1e3).toFixed(0)),s.NumberFormatter.formatThousands((n.total/1e3).toFixed(0)));e.preloader(!0,e.model._labels.Labels.MESSAGE_LOADING_DATA,i)}this.bytesLoaded=n.loaded}catch(t){console.error(t.stack),this.onFileError()}},n.prototype.onFileComplete=function(){if(!s.nullOrUndefined(this.loader)){var t=this.loader.response;this.connected=!0,t.length>e.model.license.Limitations.MAX_JSON?(e.uialert(e.model.license.LicenseLabels.getLabel(e.model.license.LicenseLabels.betaversion),e.model.license.LicenseLabels.getLabel(e.model.license.LicenseLabels.tooLarge)),e.preloader(!1),null!=this.errorHandler&&(this.errorHandler(),this.errorHandler=null),this.clear()):(this.isFileLoaded=!0,this.parseChunk(t))}},n.prototype.parseChunk=function(n){try{var i=JSON.parse(n);if(s.nullOrUndefined(i.items)||(i=i.items),s.nullOrUndefined(i.length))return void this.invalidFormat()}catch(t){return void this.invalidFormat()}e.preloader(!1),this.addData(i)},n.prototype.addData=function(t){if(s.nullOrUndefined(t.items)||(t=t.items),!(s.nullOrUndefined(t)||1>t.length))if(JSON.stringify(t).length>e.model.license.Limitations.MAX_JSON&&15649632e5<Date.now()||t.toString().length>e.model.license.Limitations.MAX_JSON)e.uialert(e.model.license.LicenseLabels.getLabel(e.model.license.LicenseLabels.betaversion),e.model.license.LicenseLabels.getLabel(e.model.license.LicenseLabels.tooLarge));else{this.setConnected();var n=!1,i=t[0]&&t[0]instanceof Array;i?this.parseHeader(t[0].toString(),t[1].toString()):n=this.cube_.structure_.addDataStructure(t[0]),this.data=t.slice(),this.factsCounter=0,(n||i)&&this.data.shift(),this.parseAllDataRows(),this.onParseComplete()}},n.prototype.updateData=function(t){if(!(s.nullOrUndefined(t)||1>t.length))if(JSON.stringify(t).length>e.model.license.Limitations.MAX_JSON&&15649632e5<Date.now()||t.toString().length>e.model.license.Limitations.MAX_JSON)e.uialert(e.model.license.LicenseLabels.getLabel(e.model.license.LicenseLabels.betaversion),e.model.license.LicenseLabels.getLabel(e.model.license.LicenseLabels.tooLarge));else{this.cube_.localDataStorage.clearUpdates();for(var n=t[1]&&t[1]instanceof Array,i=0;i<t.length;i++)n?this.cube_.localDataStorage.insertArray(t[i],!0):this.cube_.localDataStorage.insertObject(t[i],!0)}},n.prototype.onParseComplete=function(){e.preloader(!1),this.successHandler()},n.prototype.parseDataRow=function(t){var n=this.factsCounter;t=n+this.CHUNK_SIZE;for(var i=this.data[1]&&this.data[1]instanceof Array;n<t;n++){if(n==this.data.length)return!0;i?this.cube_.localDataStorage.insertArray(this.data[n]):this.cube_.localDataStorage.insertObject(this.data[n]),this.factsCounter++}return 100<(t=Math.round(this.factsCounter/this.data.length*100))&&(t=100),e.preloader(!0,e.model._labels.Labels.MESSAGE_ANALYZING_DATA,s.StringUtils.bind(e.model._labels.Labels.MESSAGE_ANALYZING_PROGRESS,s.NumberFormatter.formatThousands(this.factsCounter.toString()),s.NumberFormatter.formatThousands(this.data.length.toString()),t.toString())),!1},n.prototype.parseAllDataRows=function(){e.preloader(!0,e.model._labels.Labels.MESSAGE_ANALYZING_DATA,s.StringUtils.bind(e.model._labels.Labels.MESSAGE_ANALYZING_RECORDS,s.NumberFormatter.formatThousands(this.data.length.toFixed(0))));for(var t=this.data[1]&&this.data[1]instanceof Array;this.factsCounter<this.data.length;this.factsCounter++)t?this.cube_.localDataStorage.insertArray(this.data[this.factsCounter]):this.cube_.localDataStorage.insertObject(this.data[this.factsCounter])},n.prototype.invalidFormat=function(){e.preloader(!1),e.uialert(e.model._labels.Labels.MESSAGE_INVALID_JSON_DATA,e.model._labels.Labels.ERROR),this.errorHandler(),this.stopTimer()},n}(t.csv.CSVLoader),n.JSONLoader=i}(r||(r={})),function(e){!function(e){!function(e){var t=function(){function e(){}return e.valid=function(t){return t==e.JSON||t==e.CSV||t==e.EMPTY},e.CSV="csv",e.JSON="json",e.EMPTY="",e}();e.DataSourceType=t}(e.consts||(e.consts={}))}(e.data_||(e.data_={}))}(r||(r={})),function(e){!function(e){!function(e){var t=function(){function e(){}return e.TOP="top",e.BOTTOM="bottom",e.NONE="none",e}();e.FilterType=t}(e.consts||(e.consts={}))}(e.data_||(e.data_={}))}(r||(r={})),function(e){!function(e){!function(e){var t=function(){function e(){}return e.isValid=function(t){return t==e.UNSORTED||t==e.ASC||t==e.DESC},e.UNSORTED="unsorted",e.ASC="asc",e.DESC="desc",e.NUMERIC_RANGE="numericRange",e}();e.SortType=t}(e.consts||(e.consts={}))}(e.data_||(e.data_={}))}(r||(r={})),function(e){!function(e){!function(e){var t=function(){function e(){}return e.ROWS_AXIS="rows",e.COLUMNS_AXIS="columns",e.PAGES_AXIS="pages",e}();e.AxisName=t}(e.consts||(e.consts={}))}(e.data_||(e.data_={}))}(r||(r={})),function(e){!function(e){!function(e){var t=function(){function e(){}return e.MD_DIMTYPE_UNKNOWN=0,e.MD_DIMTYPE_TIME=1,e.MD_DIMTYPE_MEASURE=2,e.MD_DIMTYPE_OTHER=3,e}();e.DimensionType=t}(e.types||(e.types={}))}(e.data_||(e.data_={}))}(r||(r={})),function(e){!function(e){!function(e){var t=function(){function t(){}return t.fromDataFieldType=function(n){var i=t.DEFAULT;switch(n){case e.DataFieldType.NUMBER:i=t.MEASURE;break;case e.DataFieldType.DATE:i=t.DATE}return i},t.toDataFieldType=function(n){var i=e.DataFieldType.STRING;switch(n){case t.MEASURE:i=e.DataFieldType.NUMBER;break;case t.DATE:i=e.DataFieldType.DATE}return i},t.DEFAULT=0,t.DATE=1,t.MEASURE=2,t}();e.HierarchyType=t}(e.types||(e.types={}))}(e.data_||(e.data_={}))}(r||(r={})),function(e){!function(e){!function(e){var t=function(){function t(){}return t.fromColumnType=function(e){switch(e){case 13:return t.TIME;case 15:return t.DATETIME;case 3:return t.BOOLEAN;case 12:return t.NUMBER}return t.COUNT},t.fromDataType=function(e){var n=t.COUNT;switch(e){case"number":n=t.NUMBER;break;case"string":n=t.STRING;break;case"boolean":n=t.BOOLEAN;break;case"date":n=t.DATE;break;case"timestamp":n=t.TIME;break;case"count":n=t.COUNT}return n},t.toDataFieldType=function(n){switch(n){case t.STRING:return e.DataFieldType.STRING;case t.BOOLEAN:return e.DataFieldType.BOOLEAN;case t.DATE:return e.DataFieldType.DATE;case t.DATETIME:return e.DataFieldType.DATETIME;case t.TIME:return e.DataFieldType.TIME}return e.DataFieldType.NUMBER},t.NUMBER=1,t.STRING=2,t.BOOLEAN=3,t.DATE=4,t.TIME=5,t.DATETIME=6,t.COUNT=7,t}();e.MeasureType=t}(e.types||(e.types={}))}(e.data_||(e.data_={}))}(r||(r={})),function(e){!function(e){!function(e){var t=function(){function e(){}return e.ALL=0,e.STRING=1,e.NUMBER=2,e.BOOLEAN=3,e.DATE=4,e.TIME=5,e.YEAR=6,e.HALFYEAR=7,e.QUARTER=8,e.MONTH=9,e.WEEK=10,e.WEEKDAY=11,e.DAY=12,e.HOUR=13,e.MINUTE=14,e.SECOND=15,e.MILLISECOND=16,e.TIME_DATE=17,e}();e.LevelType=t}(e.types||(e.types={}))}(e.data_||(e.data_={}))}(r||(r={})),function(e){!function(e){!function(e){var t=function(){function e(){}return e.typeName=function(t){return e.allStrings[t]},e.typeNum=function(t){return e.allStrings.indexOf(t)},e.valid=function(t){return-1<e.allStrings.indexOf(t)},e.typeFromValue=function(t){return""===t?e.STRING:"number"!=typeof t&&isNaN(Number(t))?0<Date.parse(t)?s.detectBrowser().isChrome&&!t.match(/^([\+-]?\d{4}(?!\d{2}\b))((-?)((0[1-9]|1[0-2])(\3([12]\d|0[1-9]|3[01]))?|W([0-4]\d|5[0-2])(-?[1-7])?|(00[1-9]|0[1-9]\d|[12]\d{2}|3([0-5]\d|6[1-6])))([T\s]((([01]\d|2[0-3])((:?)[0-5]\d)?|24\:?00)([\.,]\d+(?!:))?)?(\17[0-5]\d([\.,]\d+)?)?([zZ]|([\+-])([01]\d|2[0-3]):?([0-5]\d)?)?)?)?$/i)?e.STRING:e.DATE:e.STRING:e.NUMBER},e.STRING="string",e.allStrings=[e.NUMBER="number",e.STRING,e.BOOLEAN="boolean",e.LEVEL="level",e.MONTH="month",e.WEEKDAY="weekday",e.DATE="date",e.DATE_STRING="date string",e.HIERARCHICAL_DATE="year/month/day",e.HIERARCHICAL_DATE_WITH_QUARTERS="year/quarter/month/day",e.TIME="time",e.DATETIME="datetime",e.ID="id",e.DELETE="delete",e.HIDDEN="hidden"],e}();e.DataFieldType=t}(e.types||(e.types={}))}(e.data_||(e.data_={}))}(r||(r={})),function(e){var t;!function(t){var n=function(){function t(){}return t.aggregationCaption=function(n){return n==t.SUM?e.model._labels.Labels.SUM_CAPTION:n==t.COUNT?e.model._labels.Labels.COUNT_CAPTION:n==t.DISTINCT_COUNT||n==t.DISTINCT_COUNT_DEPRECATED?e.model._labels.Labels.DISTINCT_COUNT_CAPTION:n==t.AVERAGE?e.model._labels.Labels.AVERAGE_CAPTION:n==t.PRODUCT?e.model._labels.Labels.PRODUCT_CAPTION:n==t.MIN?e.model._labels.Labels.MIN_CAPTION:n==t.MAX?e.model._labels.Labels.MAX_CAPTION:n==t.PERCENT?e.model._labels.Labels.PERCENT_CAPTION:n==t.PERCENT_COLUMN||n==t.PERCENT_COLUMN_DEPRECATED?e.model._labels.Labels.PERCENT_COLUMN_CAPTION:n==t.PERCENT_ROW?e.model._labels.Labels.PERCENT_ROW_CAPTION:n==t.INDEX?e.model._labels.Labels.INDEX_CAPTION:n==t.DIFFERENCE?e.model._labels.Labels.DIFFERENCE_CAPTION:n==t.PERCENT_DIFFERENCE?e.model._labels.Labels.PERCENT_DIFFERENCE_CAPTION:n==t.NONE?e.model._labels.Labels.NONE_CAPTION:n==t.MEDIAN?e.model._labels.Labels.MEDIAN_CAPTION:n==t.STDEVP?e.model._labels.Labels.STDEVP_CAPTION:n==t.STDEVS?e.model._labels.Labels.STDEVS_CAPTION:n==t.RUNNING_TOTALS?e.model._labels.Labels.RUNNING_TOTALS_CAPTION:n},t.aggregationCaptions=function(e){void 0===e&&(e=null);var n=[];e=e||t.ALL_AGGREGATIONS;for(var i=0;i<e.length;i++)n.push(t.aggregationCaption(e[i]));return n},t.aggregationTotalCaptions=function(n){void 0===n&&(n=null);var i=[];n=n||t.ALL_AGGREGATIONS;for(var r=0;r<n.length;r++)n[r]==t.SUM&&i.push(e.model._labels.Labels.SUM_TOTAL_CAPTION),n[r]==t.COUNT&&i.push(e.model._labels.Labels.COUNT_TOTAL_CAPTION),n[r]!=t.DISTINCT_COUNT&&n[r]!=t.DISTINCT_COUNT_DEPRECATED||i.push(e.model._labels.Labels.DISTINCT_COUNT_TOTAL_CAPTION),n[r]==t.AVERAGE&&i.push(e.model._labels.Labels.AVERAGE_TOTAL_CAPTION),n[r]==t.PRODUCT&&i.push(e.model._labels.Labels.PRODUCT_TOTAL_CAPTION),n[r]==t.MIN&&i.push(e.model._labels.Labels.MIN_TOTAL_CAPTION),n[r]==t.MAX&&i.push(e.model._labels.Labels.MAX_TOTAL_CAPTION),n[r]==t.PERCENT&&i.push(e.model._labels.Labels.PERCENT_TOTAL_CAPTION),n[r]!=t.PERCENT_COLUMN&&n[r]!=t.PERCENT_COLUMN_DEPRECATED||i.push(e.model._labels.Labels.PERCENT_COLUMN_TOTAL_CAPTION),n[r]==t.PERCENT_ROW&&i.push(e.model._labels.Labels.PERCENT_ROW_TOTAL_CAPTION),n[r]==t.INDEX&&i.push(e.model._labels.Labels.INDEX_TOTAL_CAPTION),n[r]==t.DIFFERENCE&&i.push(e.model._labels.Labels.DIFFERENCE_TOTAL_CAPTION),n[r]==t.PERCENT_DIFFERENCE&&i.push(e.model._labels.Labels.PERCENT_DIFFERENCE_TOTAL_CAPTION),n[r]==t.NONE&&i.push("{0}"),n[r]==t.MEDIAN&&i.push(e.model._labels.Labels.MEDIAN_TOTAL_CAPTION),n[r]==t.STDEVP&&i.push(e.model._labels.Labels.STDEVP_TOTAL_CAPTION),n[r]==t.STDEVS&&i.push(e.model._labels.Labels.STDEVS_TOTAL_CAPTION),n[r]==t.RUNNING_TOTALS&&i.push(e.model._labels.Labels.RUNNING_TOTALS_TOTAL_CAPTION);return i},t.validType=function(e){return-1!=t.ALL_AGGREGATIONS.indexOf(e)||e==t.NONE},t.validForDateTimeFormatting=function(e){return-1!=t.AGGREGATIONS_COMPATIBLE_WITH_DATETIME_FORMATTING.indexOf(e)||e==t.NONE},t.validForTimeFormatting=function(e){return-1!=t.AGGREGATIONS_COMPATIBLE_WITH_TIME_FORMATTING.indexOf(e)||e==t.NONE},t.isCount=function(e){return-1!=t.AGGREGATIONS_WITH_COUNT_FORMATTING.indexOf(e)},t.isPercent=function(e){return-1!=t.AGGREGATIONS_WITH_PERCENT_FORMATTING.indexOf(e)},t.deprecatedType=function(e){return e==t.DISTINCT_COUNT_DEPRECATED||e==t.PERCENT_COLUMN_DEPRECATED},t.fromDeprecatedToValid=function(e){switch(e){case t.DISTINCT_COUNT_DEPRECATED:return t.DISTINCT_COUNT;case t.PERCENT_COLUMN_DEPRECATED:return t.PERCENT_COLUMN;default:return""}},t.SUM="sum",t.COUNT="count",t.DISTINCT_COUNT="distinctcount",t.DISTINCT_COUNT_DEPRECATED="distinct count",t.AVERAGE="average",t.PERCENT="percent",t.PERCENT_COLUMN="percentofcolumn",t.PERCENT_ROW="percentofrow",t.PERCENT_COLUMN_DEPRECATED="percent of column",t.PRODUCT="product",t.INDEX="index",t.MIN="min",t.MAX="max",t.NONE="none",t.DIFFERENCE="difference",t.PERCENT_DIFFERENCE="%difference",t.ALL_AGGREGATIONS=[t.SUM,t.COUNT,t.DISTINCT_COUNT,t.AVERAGE,t.MEDIAN="median",t.PRODUCT,t.MIN,t.MAX,t.PERCENT,t.PERCENT_COLUMN,t.PERCENT_ROW,t.INDEX,t.DIFFERENCE,t.PERCENT_DIFFERENCE,t.STDEVP="stdevp",t.STDEVS="stdevs",t.RUNNING_TOTALS="runningtotals"],t.AGGREGATIONS_COMPATIBLE_WITH_DATETIME_FORMATTING=[t.SUM,t.AVERAGE,t.MEDIAN,t.PRODUCT,t.MIN,t.MAX],t.AGGREGATIONS_COMPATIBLE_WITH_TIME_FORMATTING=[t.SUM,t.AVERAGE,t.MEDIAN,t.PRODUCT,t.MIN,t.MAX,t.DIFFERENCE,t.STDEVP,t.STDEVS,t.RUNNING_TOTALS],t.AGGREGATIONS_WITH_COUNT_FORMATTING=[t.COUNT,t.DISTINCT_COUNT],t.AGGREGATIONS_WITH_PERCENT_FORMATTING=[t.PERCENT,t.PERCENT_COLUMN,t.PERCENT_ROW,t.PERCENT_DIFFERENCE],t}();t.AggregationName=n}((t=e.data_||(e.data_={})).consts||(t.consts={}))}(r||(r={})),function(e){!function(e){!function(e){var t=function(){function e(){}return e.ADD="+",e.SUBTRACT="-",e.MULTIPLY="*",e.DIVIDE="/",e.POWER="^",e.LESS="<",e.GREATER=">",e.EQUAL="=",e.EQUAL_2="==",e.NOT_EQUAL="!=",e.LESS_OR_EQUAL="<=",e.GREATER_OR_EQUAL=">=",e.OR="or",e.AND="and",e.IF="if",e.ABS="abs",e.MIN="min",e.MAX="max",e.BLANK="isnan",e.NOT_BLANK="!isnan",e.VALUE="value",e.UPDATE_DIFFERENCE="updatedifference",e.UPDATE_PERCENT="updatepercent",e}();e.FunctionName=t}(e.consts||(e.consts={}))}(e.data_||(e.data_={}))}(r||(r={})),function(e){!function(e){!function(e){var t=function(){function e(){}return e.SELECT="select",e.EXPAND="expand",e.COLLAPSE="collapse",e.DRILL_UP="drillUp",e.DRILL_DOWN="drillDown",e.DRILL_DOWN_TO="drillDownTo",e.DRILL_THROUGH="drillThrough",e.FILTER="filter",e.SEARCH="search",e}();e.QueryType=t}(e.consts||(e.consts={}))}(e.data_||(e.data_={}))}(r||(r={})),function(e){!function(e){!function(e){var t=function(){function e(){}return e.DIVIDE_BY_ZERO=.001122334400556678,e}();e.DataConsts=t}(e.consts||(e.consts={}))}(e.data_||(e.data_={}))}(r||(r={})),function(e){!function(e){var t,n;t=e.vo||(e.vo={}),n=function(){function n(){this._dataSourceType=e.consts.DataSourceType.EMPTY,this.isUpdateData=!1}return Object.defineProperty(n.prototype,"dataSourceType",{get:function(){return this._dataSourceType},set:function(e){this._dataSourceType=e.toLowerCase()},enumerable:!0,configurable:!0}),n.prototype.isEqual=function(e){return e&&this.dataSourceType==e.dataSourceType},Object.defineProperty(n.prototype,"isEmpty",{get:function(){return this._dataSourceType==e.consts.DataSourceType.EMPTY},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isDemo",{get:function(){return this._dataSourceType==e.consts.DataSourceType.CSV&&"this"==this.filename},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isInlineData",{get:function(){return!1},set:function(e){},enumerable:!0,configurable:!0}),n.fromObject=function(i){if(null==i)return new n;if(s.nullOrUndefined(i.connectionInfo)||(i=i.connectionInfo),i instanceof n||i instanceof t.CSVConnectionInfo||i instanceof t.JSONConnectionInfo||(i=n.toPlainObject(i)),s.nullOrUndefined(i.dataSourceType)||(i.dataSourceType=i.dataSourceType.toLowerCase()),!s.nullOrUndefined(i.filename)&&s.nullOrUndefined(i.dataSourceType)){var r=i.filename.split("?")[0].toLowerCase();i.dataSourceType=".csv"==r.substr(-4)?e.consts.DataSourceType.CSV:".json"==r.substr(-5)||".js"==r.substr(-3)?e.consts.DataSourceType.JSON:e.consts.DataSourceType.CSV}switch(!s.nullOrUndefined(i.data)&&i.data instanceof Array&&(i.dataSourceType=e.consts.DataSourceType.JSON,i.data=i.data.slice()),i.dataSourceType){case e.consts.DataSourceType.CSV:return t.CSVConnectionInfo.fromObject(i);case e.consts.DataSourceType.JSON:return t.JSONConnectionInfo.fromObject(i);default:return new n}},n.toPlainObject=function(e){var t={};return null!=e.dataSourceType&&(t.dataSourceType=e.dataSourceType),null!=e.filename&&(t.filename=e.filename),null!=e.requestHeader&&(t.requestHeader=e.requestHeader),null!=e.browseForFile&&(t.browseForFile=e.browseForFile),null!=e.fieldSeparator&&(t.fieldSeparator=e.fieldSeparator),null!=e.recordsetDelimiter&&(t.recordsetDelimiter=e.recordsetDelimiter),null!=e.ignoreQuotedLineBreaks&&(t.ignoreQuotedLineBreaks=e.ignoreQuotedLineBreaks),null!=e.embedded&&(t.embedded=e.embedded),null!=e.embeddedDataOffset&&(t.embeddedDataOffset=e.embeddedDataOffset),null!=e.embeddedDataToLoad&&(t.embeddedDataToLoad=e.embeddedDataToLoad),null!=e.data&&(t.data=e.data),null!=e.checkUpdates&&(t.checkUpdates=e.checkUpdates),null!=e.url&&(t.url=e.url),null!=e.hash&&(t.hash=e.hash),null!=e.username&&(t.username=e.username),null!=e.password&&(t.password=e.password),null!=e.dataSource&&(null!=(e=e.dataSource).dataSourceType&&(t.dataSourceType=e.dataSourceType),null!=e.filename&&(t.filename=e.filename),null!=e.browseForFile&&(t.browseForFile=e.browseForFile),null!=e.fieldSeparator&&(t.fieldSeparator=e.fieldSeparator),null!=e.recordsetDelimiter&&(t.recordsetDelimiter=e.recordsetDelimiter),null!=e.ignoreQuotedLineBreaks&&(t.ignoreQuotedLineBreaks=e.ignoreQuotedLineBreaks),null!=e.embedded&&(t.embedded=e.embedded),null!=e.embeddedDataOffset&&(t.embeddedDataOffset=e.embeddedDataOffset),null!=e.embeddedDataToLoad&&(t.embeddedDataToLoad=e.embeddedDataToLoad),null!=e.isOCSV2Data&&(t.isOCSV2Data=e.isOCSV2Data),null!=e.data&&(t.data=e.data),null!=e.url&&(t.url=e.url),null!=(e=e.credentials)&&(null!=e.hash&&(t.hash=e.hash),null!=e.username&&(t.username=e.username),null!=e.password&&(t.password=e.password))),t},n.prototype.toObject=function(t){return t={},this.dataSourceType!=e.consts.DataSourceType.EMPTY&&(t.dataSourceType=this.dataSourceType),t},n}(),t.ConnectionInfo=n}(e.data_||(e.data_={}))}(r||(r={})),function(e){!function(e){!function(e){var t=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.browseForFile=!1,t.requestHeader=null,t}return h(t,e),t.prototype.isEqual=function(t){return e.prototype.isEqual.call(this,t)&&this.filename==t.filename&&0==this.browseForFile&&0==t.browseForFile},t}(e.ConnectionInfo);e.FileConnectionInfo=t}(e.vo||(e.vo={}))}(e.data_||(e.data_={}))}(r||(r={})),function(e){!function(e){var t,n;n=function(t){function n(){var n=t.call(this)||this;return n.checkUpdates=!1,n.dataSourceType=e.consts.DataSourceType.JSON,n}return h(n,t),Object.defineProperty(n.prototype,"isEmpty",{get:function(){return s.nullOrEmpty(this.filename)&&(null==this.browseForFile||0==this.browseForFile)&&s.nullOrUndefined(this.data)},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isInlineData",{get:function(){return!s.nullOrUndefined(this.data)},set:function(e){},enumerable:!0,configurable:!0}),n.prototype.isEqual=function(e){return e==this||t.prototype.isEqual.call(this,e)&&s.nullOrUndefined(e.data)},n.fromObject=function(e){var t=new n;return void 0!==e.browseForFile&&(t.browseForFile=e.browseForFile),void 0!==e.filename&&""!=e.filename&&(t.filename=e.filename),void 0!==e.data&&(t.data=e.data),void 0!==e.checkUpdates&&(t.checkUpdates=e.checkUpdates),void 0!==e.requestHeader&&(t.requestHeader=e.requestHeader),t},n.prototype.toObject=function(e){void 0===e&&(e=!1);var t={};return t.dataSourceType=this.dataSourceType,(e||this.browseForFile)&&(t.browseForFile=this.browseForFile),this.filename&&(t.filename=this.filename),s.nullOrUndefined(this.data)||(t.data=this.data),t},n}((t=e.vo||(e.vo={})).FileConnectionInfo),t.JSONConnectionInfo=n}(e.data_||(e.data_={}))}(r||(r={})),function(e){!function(e){var t,n;n=function(t){function n(){var n=t.call(this)||this;return n.recordsetDelimiter="\n",n.ignoreQuotedLineBreaks=!0,n.embedded=!1,n.embeddedDataOffset=0,n.dataSourceType=e.consts.DataSourceType.CSV,n}return h(n,t),Object.defineProperty(n.prototype,"isEmpty",{get:function(){return s.nullOrEmpty(this.filename)&&(null==this.browseForFile||0==this.browseForFile)&&(null==this.embedded||0==this.embedded)},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isInlineData",{get:function(){return!s.nullOrUndefined(this.data)},set:function(e){},enumerable:!0,configurable:!0}),n.prototype.isEqual=function(e){return t.prototype.isEqual.call(this,e)&&0==this.embedded&&0==e.embedded},n.fromObject=function(e){var t=new n;return void 0!==e.browseForFile&&(t.browseForFile=e.browseForFile),void 0!==e.filename&&""!=e.filename&&(t.filename=e.filename),void 0!==e.fieldSeparator&&(t.fieldSeparator=e.fieldSeparator),void 0!==e.recordsetDelimiter&&(t.recordsetDelimiter=e.recordsetDelimiter),void 0!==e.ignoreQuotedLineBreaks&&(t.ignoreQuotedLineBreaks=e.ignoreQuotedLineBreaks),void 0!==e.embedded&&(t.embedded=e.embedded),void 0!==e.embeddedDataOffset&&(t.embeddedDataOffset=e.embeddedDataOffset),void 0!==e.embeddedDataToLoad&&(t.embeddedDataToLoad=e.embeddedDataToLoad),void 0!==e.requestHeader&&(t.requestHeader=e.requestHeader),t},n.prototype.toObject=function(e){void 0===e&&(e=!1);var t={};return t.dataSourceType=this.dataSourceType,(e||this.browseForFile&&!this.embedded)&&(t.browseForFile=this.browseForFile),this.filename&&(t.filename=this.filename),this.fieldSeparator&&(t.fieldSeparator=this.fieldSeparator),this.recordsetDelimiter&&"\n"!=this.recordsetDelimiter&&(t.recordsetDelimiter=this.recordsetDelimiter),(e||0==this.ignoreQuotedLineBreaks)&&(t.ignoreQuotedLineBreaks=this.ignoreQuotedLineBreaks),this.embedded&&(t.embedded=this.embedded),t},n}((t=e.vo||(e.vo={})).FileConnectionInfo),t.CSVConnectionInfo=n}(e.data_||(e.data_={}))}(r||(r={})),function(e){var n,r;n=e._view||(e._view={}),r=function(r){function o(t,i){var l=r.call(this)||this;l.isUIReady=!1,l.model_=e.model.PivotModel.getInstance(),l.width=0,l.height=0,l.lastWidth=0,l.lastHeight=0,l.delayedDraws=[],l.notReadyCount=0,l.drawn=!1,l.drillthroughClosedHandler=function(){return l.onDrillThroughClosed()},l.isFocused=!0,l.setId("wdr-pivot-view"),null!=l.parentContainer&&l.parentContainer.dispose(),t.empty(),l.parentContainer=t,o.stage=l;var u=i.width?"number"==typeof i.width?i.width+"px":-1<i.width.indexOf("px")||i.width.indexOf("%")==i.width.length-1?i.width:i.width+"px":"100%",c=i.height?"number"==typeof i.height?i.height+"px":-1<i.height.indexOf("px")||i.height.indexOf("%")==i.height.length-1?i.height:i.height+"px":"500px",h=/\d+(?=px|%)/;return u=u.match(h)?u:"100%",c=c.match(h)?c:"500px",l.parentContainer.css("width",u),l.parentContainer.css("height",c),l.container.css("width",u),l.container.css("height",c),l.parentContainer.append(l.container),l.container.requestAnimationFrame((function(){l.toolbar=i.toolbar?new a(l.parentContainer.element,e.Pivot.instance.api,"html5",u,e.model._labels.LabelsManager.getInstance().getCurrentLocalization().toolbar):null,e.model.JavaScriptHandlers.getInstance().dispatch(new e.model.APIEvent(e.model.JavaScriptHandlers.BEFORE_TOOLBAR_CREATED,l.toolbar)),l.toolbar&&null!=l.toolbar.create&&l.toolbar.create(),l.setControls(),l.draw()})),l.model_.state_.addEventListener(e.model._state.StateEvent.LOADING_REPORT_FILE,(function(){return l.onLoadingReportFile()})),l.model_.state_.addEventListener(e.model._state.StateEvent.EMPTY_SLICE,(function(){return l.onEmptySlice()})),l.model_.state_.addEventListener(e.model._state.StateEvent.LOADING_DATA,(function(){return l.onLoadingData()})),l.model_.state_.addEventListener(e.model._state.StateEvent.RUNNING_QUERY,(function(){return l.onBeforeDataQuery()})),l.model_.state_.addEventListener(e.model._state.StateEvent.QUERY_COMPLETE,(function(){return l.onDataQueryComplete()})),l.model_.state_.addEventListener(e.model._state.StateEvent.REPORT_COMPLETE,(function(){return l.onReportComplete()})),l.model_.state_.addEventListener(e.model._state.StateEvent.LOCALIZATION_LOADED,(function(){return l.onLocalizationLoaded()})),l.model_.addEventListener(e.PivotEvent.EXPORT,(function(e){return l.onExport(e)})),l.model_.addEventListener(e.PivotEvent.PRINT,(function(){return l.onPrint()})),l.model_.addEventListener(n.ViewEvent.CALCULATED_VIEW_OPEN,(function(e){return l.onOpenCalculatedView(e)})),l.model_.addEventListener(n.ViewEvent.CONTEXT_MENU_OPEN,(function(e){return l.onOpenContextMenu(e)})),l.addEventListener(n.ViewEvent.AFTER_GRID_DRAW,(function(){return l.onAfterGridDraw()})),s.fmdocument.addEventListener("fullscreenchange",(function(e){return l.onDocumentFullScreen(e)}),!1),s.fmdocument.addEventListener("mozfullscreenchange",(function(e){return l.onDocumentFullScreen(e)}),!1),s.fmdocument.addEventListener("webkitfullscreenchange",(function(e){return l.onDocumentFullScreen(e)}),!1),s.fmdocument.addEventListener("MSFullscreenChange",(function(e){return l.onDocumentFullScreen(e)}),!1),l.parentContainer.addEventListener("fullscreenchange",(function(e){return l.onFullScreen(e)}),!1),l.parentContainer.addEventListener("mozfullscreenchange",(function(e){return l.onFullScreen(e)}),!1),l.parentContainer.addEventListener("webkitfullscreenchange",(function(e){return l.onFullScreen(e)}),!1),l.parentContainer.addEventListener("MSFullscreenChange",(function(e){return l.onFullScreen(e)}),!1),l}return h(o,r),Object.defineProperty(o.prototype,"toolbarHeight",{get:function(){if(this.toolbar){var e=i.UIElement.convert(document.getElementById("wdr-toolbar-wrapper"));return null==e?0:e.height}return 0},enumerable:!0,configurable:!0}),Object.defineProperty(o,"stageWidth",{get:function(){var e=o.stage.container.borderWidth;return o.stage.parentContainer.getWidth(s.isFullscreen())-e.left-e.right},enumerable:!0,configurable:!0}),Object.defineProperty(o,"stageHeight",{get:function(){var e=o.stage.container.borderWidth;return o.stage.parentContainer.getHeight(s.isFullscreen())-e.top-e.bottom},enumerable:!0,configurable:!0}),Object.defineProperty(o,"gridWidth",{get:function(){return o.stageWidth},enumerable:!0,configurable:!0}),Object.defineProperty(o,"gridHeight",{get:function(){return o.stage.pivotHeight()},enumerable:!0,configurable:!0}),o.prototype.pivotHeight=function(){return o.stageHeight-o.stage.toolbarHeight},o.prototype.draw=function(e){var t=this;if(void 0===e&&(e=!1),this.clearDelays(),this.drawn||this.isUIReady){var n=this.container.requestAnimationFrame((function(n){t.clearDelays(),t._draw(e)}));this.delayedDraws.push(n)}else 1e3>this.notReadyCount++?this.notReadyTimeout=s.fmSetTimeout((function(){t.draw(e)}),10):this.parentContainer.visible&&(console.error("WebDataRocks:\nPivot cannot be drawn."),console.error("document.visibilityState:",document.visibilityState),"hidden"!=document.visibilityState&&alert("WebDataRocks:\nPivot cannot be drawn."))},o.prototype.clearDelays=function(){for(;0<this.delayedDraws.length;)this.container.cancelAnimationFrame(this.delayedDraws.pop());this.delayedDraws=[],s.fmClearTimeout(this.notReadyTimeout),s.fmClearTimeout(this.renderCompleteTimeout)},o.prototype.updateContainerSize=function(){if(!this.parentContainer)return!1;var e=s.isFullscreen(),t=this.parentContainer.getWidth();e&&(t=window.screen.width);var n=this.parentContainer.getHeight();return e&&(n=window.screen.height),n-=this.toolbarHeight,this.lastWidth===t&&this.lastHeight===n||(this.container.css("width",t+"px"),this.container.css("height",n+"px")),this.lastWidth!==t||this.lastHeight!==n},o.prototype.onWindowResize=function(e){this.toolbar&&null!=this.toolbar.applyToolbarLayoutClasses&&this.toolbar.applyToolbarLayoutClasses(),this.draw(!0)},o.prototype.onLoadingReportFile=function(){this.model_.state_.reportType==e.model._state.ReportType.INIT&&this.drawEmptyView()},o.prototype.onEmptySlice=function(){this.draw()},o.prototype.onLoadingData=function(){this.model_.state_.reportType!=e.model._state.ReportType.UPDATE_DATA&&this.model_.state_.reportType!=e.model._state.ReportType.CONNECT_TO&&this.drawEmptyView()},o.prototype.onBeforeDataQuery=function(){},o.prototype.onDataQueryComplete=function(){this.model_.state_.reportType!=e.model._state.ReportType.INIT&&this.model_.state_.reportType!=e.model._state.ReportType.LOAD&&this.draw()},o.prototype.onLocalizationLoaded=function(){null!=this.toolbar&&this.toolbar.updateLabels(e.model._labels.LabelsManager.getInstance().getCurrentLocalization().toolbar)},o.prototype.onReportComplete=function(){this.model_.state_.reportType==e.model._state.ReportType.CLEAR?this.drawEmptyView():this.parentContainer&&this.draw()},o.prototype.onDocumentFullScreen=function(e){this.handleFullScreen()},o.prototype.onFullScreen=function(e){e.stopPropagation(),this.handleFullScreen()},o.prototype.handleFullScreen=function(){var t=this,n=s.isFullscreen();null!=e.model.JavaScriptHandlers.jsFullScreenHandler&&e.model.JavaScriptHandlers.jsFullScreenHandler.call(null,n),n=this.container.requestAnimationFrame((function(){t.updateContainerSize()&&t.draw(!0)})),this.delayedDraws.push(n)},o.prototype.setControls=function(){var e=this;this.toolbar&&(this.container.height-=this.toolbarHeight),this.gridView=new n.grid.GridView,this.gridView.addEventListener(n.ViewEvent.FILTER_OPEN,(function(t){return e.onFilterOpenGrid(t)})),this.gridView.addEventListener(n.ViewEvent.DRILL_THROUGH_OPEN,(function(t){return e.onDrillThroughOpen(t)})),this.addChild(this.gridView),this.fieldsView=new n.config.FieldsView,this.fieldsView.addEventListener(t._Event.OPENED,(function(t){return e.onWindowOpenClose(t)})),this.fieldsView.addEventListener(t._Event.CLOSED,(function(t){return e.onWindowOpenClose(t)})),this.fieldsView.addEventListener(n.config.FieldsView.EVENT_OPEN,(function(t){return e.onFieldsViewOpen(t)})),this.fieldsView.addEventListener(n.config.FieldsView.EVENT_APPLY_SLICE,(function(t){return e.onFieldsViewApplySlice(t)})),this.addChild(this.fieldsView);var r=new i.UILabel;r.html('<a href="https://webdatarocks.com/?r=wdr" target="_blank">WebDataRocks.com</a>'),r.addClass("wdr-credits"),this.addChild(r),s.fmdocument.addEventListener("keydown",(function(t){return e.onKeyDown(t)})),this.container.attr("tabindex",0),this.container.addEventListener("focusin",(function(t){e.isFocused=!0})),this.container.addEventListener("focusout",(function(t){e.isFocused=!1})),this._resizeListener=new s.ResizeListener(this.parentContainer.parent),this._resizeListener.addEventListener(t._Event.RESIZE,(function(t){return e.onWindowResize(t)})),this.isUIReady=!0},o.prototype._draw=function(t){void 0===t&&(t=!1),null!=this.model_&&(this.drawn=!0,this.updateContainerSize(),null!=this.filterView&&this.filterView.draw(),s.nullOrUndefined(this.model_.state_.connectionInfo_)||this.model_.state_.connectionInfo_.isEmpty||!e.model._options.OptionsManager.configuratorButton?this.fieldsView.hide():this.fieldsView.show(),t||e.model._options.OptionsManager.configuratorActive||n.calculated.CalculatedView.addingMeasureFlag||(e.model._options.OptionsManager.configuratorOpened=!1),null!=this.model_.cube_.slice_&&this.model_.cube_.slice_.isEmpty&&(e.model._options.OptionsManager.configuratorOpened=!0),e.model._options.OptionsManager.configuratorOpened&&null!=this.model_.state_.connectionInfo_&&!this.model_.state_.connectionInfo_.isEmpty?this.fieldsView.open(this.model_.cube_.structure_,this.model_.cube_.slice_,this.model_.state_.connectionInfo_.dataSourceType):this.fieldsView.close(),this.drawGrid(t),null!=this.drillThroughView&&this.drillThroughView.isVisible()&&(e.model._options.OptionsManager.flatView?this.drillThroughView.close():this.drillThroughView.redraw()),this.lastWidth=this.getWidth(),this.lastHeight=this.getHeight())},o.prototype.drawEmptyView=function(){this.drawGrid(!1,!0),s.nullOrUndefined(this.fieldsView)||this.fieldsView.close()},o.prototype.drawGrid=function(t,n){void 0===t&&(t=!1),void 0===n&&(n=!1),null!=this.gridView&&(t||null==this.filterView||this.filterView.close(),this.gridView.dataProvider=n?null:this.model_.dataProvider_=e.data_.dataprovider_.DataProviderFactory.getDataProvider(),this.gridView.container.css("top","").css("left","").css("right","").css("bottom",""),this.gridView.container.css("position","absolute"),this.gridView.show(),this.gridView.container.css("height",o.gridHeight+"px"),this.gridView.container.css("width",o.stageWidth+"px"),t||this.model_.cube_.connectionInfo_&&this.model_.cube_.connectionInfo_.isUpdateData||this.gridView.clearSizes(),this.gridView.draw(),e.model._options.OptionsManager.flatView&&this.fieldsView.isOpen&&this.fieldsView.open(this.model_.cube_.structure_,this.model_.cube_.slice_,this.model_.state_.connectionInfo_.dataSourceType))},o.prototype.onDrillThroughOpen=function(e){null==this.drillThroughView&&this.addDrillThroughView(),this.drillThroughView.addEventListener(n.grid.GridEvent.DRILLTHROUGH_CLOSED,this.drillthroughClosedHandler);var t=this.model_.cube_.structure_.findMeasure(e.data.measure);this.drillThroughView.openView(this.model_.dataProvider_,this.model_.cube_.slice_,e.data.columnTuple,e.data.rowTuple,t)},o.prototype.onDrillThroughClosed=function(){this.drillThroughView.removeEventListener(n.grid.GridEvent.DRILLTHROUGH_CLOSED,this.drillthroughClosedHandler),this.model_.cube_.refresh()},o.prototype.openFieldsList=function(){null!=this.model_.state_.connectionInfo_&&this.fieldsView.open(this.model_.cube_.structure_,this.model_.cube_.slice_,this.model_.state_.connectionInfo_.dataSourceType)},o.prototype.onFieldsViewApplySlice=function(t){e.Pivot.instance.runQuery(t.data)},o.prototype.onFilterOpenGrid=function(e){null==this.filterView&&this.addFilterView(),this.onFilterOpen(e)},o.prototype.onFilterOpen=function(t){var n={hierarchy:e.data_._structure.GenericHierarchy.toObject(t.hierarchy)};e.model.JavaScriptHandlers.getInstance().dispatch(new e.model.APIEvent(e.model.JavaScriptHandlers.FILTER_OPEN,n)),this.openFilter(t.hierarchy)},o.prototype.openFilter=function(e){null==this.filterView&&this.addFilterView(),this.filterView.openView(e)},o.prototype.closeFieldsList=function(){this.fieldsView.close()},o.prototype.onFieldsViewOpen=function(e){this.openFieldsList()},o.prototype.onWindowOpenClose=function(e){},o.prototype.onKeyDown=function(e){this.isFocused&&(73===e.keyCode&&e.ctrlKey&&e.altKey&&this.showLicenseInfo(),27===e.keyCode&&(null!=this.filterView&&this.filterView.close(),null!=this.drillThroughView&&this.drillThroughView.close(),null!=this.calculatedView&&this.calculatedView.isVisible()?this.calculatedView.close():this.fieldsView.close()))},o.prototype.onExport=function(e){this.drillThroughView&&this.drillThroughView.isVisible()?this.drillThroughView.exportTo(e.exportType,e.exportOptions,e.callbackHandler):this.gridView.exportTo(e.exportType,e.exportOptions,e.callbackHandler)},o.prototype.onPrint=function(){this.gridView.print()},o.prototype.showLicenseInfo=function(){var t=new Date(parseFloat(e.Pivot.BUILD_DATE)/61);t=(t=e.Pivot.BUILD_VERSION+" (build "+s.StringUtils.toDateTime(t.getTime())+") <br/><br/>")+e.model.license.LicenseLabels.getLabel(e.model.license.LicenseLabels.info),e.uialert(t,e.model.license.LicenseLabels.getLabel(e.model.license.LicenseLabels.componentInfo),e.AlertType.INFO)},o.prototype.getCell=function(e,t){return this.gridView.getCell(e,t)},o.prototype.getSelectedCell=function(){return this.gridView.getSelectedCell()},o.prototype.setSelectedCell=function(e,t){this.gridView.setSelectedCell(e,t)},o.prototype.removeSelection=function(){this.gridView.removeSelection()},o.prototype.onOpenCalculatedView=function(e){null==this.calculatedView&&this.addCalculatedView(),this.calculatedView.openView(e.data?e.data.measureName:"")},o.prototype.onOpenContextMenu=function(e){null==this.contextMenu&&this.addContextMenu(),this.contextMenu.showWith(this.container,e.data.menuItems,e.data.coords)},o.prototype.onAfterGridDraw=function(){var e=this;0==this.delayedDraws.length&&(this.renderCompleteTimeout=s.fmSetTimeout((function(){e.dispatchWith(n.ViewEvent.RENDER_COMPLETE)}),1))},o.prototype.addCalculatedView=function(){this.calculatedView=new n.calculated.CalculatedView,this.addChild(this.calculatedView)},o.prototype.addDrillThroughView=function(){this.drillThroughView=new n.grid.DrillThroughView,this.addChild(this.drillThroughView)},o.prototype.addFilterView=function(){var e=this;this.filterView=new n.filter.FilterView,this.filterView.addEventListener(t._Event.OPENED,(function(t){return e.onWindowOpenClose(t)})),this.filterView.addEventListener(t._Event.CLOSED,(function(t){return e.onWindowOpenClose(t)})),this.addChild(this.filterView)},o.prototype.getToolbar=function(){return this.toolbar},o.prototype.addContextMenu=function(){this.contextMenu=new n.ContextMenuView,this.contextMenu.hide(),this.addChild(this.contextMenu)},o.prototype.dispose=function(){this.model_=null,this.gridView.dispose(),this.container.dispose(),this.parentContainer.dispose(),n.AlertView.dispose(),n.filter.FilterModel.dispose(),n.PreloaderView.dispose(),i.dragndrop.DragManager.dispose(),o.stage=null,this._resizeListener&&(this._resizeListener.dispose(),this._resizeListener=null)},o}(i.containers.UIContainer),n.PivotView=r}(r||(r={})),function(e){!function(e){var t=function(){function t(){this._timer=0,this._show=!1,this._details=this._message="",this._transparent=!1}return t.prototype.show=function(e,n,i,r,o){var a=this;void 0===r&&(r=!0),void 0===o&&(o=!1),e?(o&&this.showImmediately(e,n,i,r),0==this._show?(this._show=e,this._message=n,this._details=i,this._transparent=r,this._timer=s.fmSetTimeout((function(){return a.timerHandler()}),t.DELAY)):0==this._timer?this.showImmediately(e,n,i,r):(this._show=e,this._message=n,this._details=i,this._transparent=r)):(o&&this.showImmediately(e,n,i,r),1==this._show&&(this._show=e,this._timer=s.fmSetTimeout((function(){return a.timerHandler()}),t.DELAY)))},t.prototype.showImmediately=function(e,t,n,i){this.resetTimer(),this.preloaderFunction(e,t,n,i)},t.prototype.timerHandler=function(){this.resetTimer(),this.preloaderFunction(this._show,this._message,this._details,this._transparent)},t.prototype.resetTimer=function(){s.fmClearTimeout(this._timer),this._timer=0},t.prototype.preloaderFunction=function(t,n,i,r){e.PreloaderView.getInstance()&&e.PreloaderView.getInstance().openView(t,n,i,r)},t.getInstance=function(){return null==t._instance&&(t._instance=new t),t._instance},t.dispose=function(){t._instance=null},t.DELAY=250,t}();e.Preloader=t}(e._view||(e._view={}))}(r||(r={})),function(e){!function(e){var t=function(t){function n(){var i=this;if(null!=n._instance)throw Error("Singleton");return(i=t.call(this,e.PivotView.stage.container)||this).setId("wdr-preloader-view"),i.setControls(),i}return h(n,t),n.prototype.openView=function(e,t,n,i){void 0===e&&(e=!0),void 0===t&&(t=""),void 0===n&&(n=""),void 0===i&&(i=!0),this._message=t,this._details=n,this._transparent=i,e?this.open():this.close()},n.prototype.open=function(){t.prototype.open.call(this),this.draw()},n.prototype.setControls=function(){this.overlay.addClass("wdr-overlay-preloader"),this.overlay.removeEventListener("click",this._overlayClickHandler),this._imgSpinner=new i.UIComponentBase("div"),this._imgSpinner.setId("wdr-spinner"),this.addChild(this._imgSpinner),this._txtMessage=new i.UILabel,this._txtMessage.setId("wdr-message-label"),this.addChild(this._txtMessage),this._txtDetails=new i.UILabel,this._txtDetails.setId("wdr-details-label"),this.addChild(this._txtDetails),this.hide(),e.PivotView.stage.addChild(this)},n.prototype.draw=function(){this.overlay.setOpaque(!this._transparent),this.setMessage(this._message),this.setDetails(this._details),this.validate()},n.prototype.setMessage=function(e){this._txtMessage.setLabel(e)},n.prototype.setDetails=function(e){this._txtDetails.setLabel(e)},n.prototype.close=function(){t.prototype.close.call(this),this.clear()},n.prototype.clear=function(){this.setMessage(""),this.setMessage("")},n.getInstance=function(){return null==e.PivotView.stage?null:(null==n._instance&&(n._instance=new n),n._instance)},n.dispose=function(){n._instance=null},n}(i.containers.UIPopup);e.PreloaderView=t}(e._view||(e._view={}))}(r||(r={})),function(e){!function(e){var n=function(n){function r(){var e=n.call(this)||this;return e.setId("wdr-context-menu"),e.list=new i.lists.UIList,e.list.setItemRendererFactory(e.itemRendererFactory),e.list.setLabelField("caption"),e.list.addEventListener(t._Event.CHANGE,(function(t){return e.onListChange(t)})),e.addChild(e.list),e.container.disableSelection(),e}return h(r,n),r.prototype.showWith=function(t,n,i){var r=this;0!=n.length&&(this.setData(n),this.show(),t=t.getOffset(),i.top-=t.top+5,i.left-=t.left+5,this.container.offset(i),this.container.addEventListener("mouseleave",(function(){return r.hide()})),s.browserVersion().isMobile?e.PivotView.stage.container.addEventListener("touchstart",(function(e){return r.onStageMouseDown(e)})):e.PivotView.stage.container.addEventListener("mousedown",(function(e){return r.onStageMouseDown(e)})))},r.prototype.onStageMouseDown=function(e){null==i.UIElement.convert(e.target).closest("#wdr-context-menu")&&this.hide()},r.prototype.setData=function(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n]);this.list.setDataProvider(t)},r.prototype.onListChange=function(e){null!=e.data.selectedItem.handler&&e.data.selectedItem.handler(e.data.selectedItem.data),this.hide()},r.prototype.itemRendererFactory=function(e,t){var n=new i.renderers.SelectItemRenderer;return n.setData(e),n.setIndex(t),n},r}(i.containers.UIBorderContainer);e.ContextMenuView=n}(e._view||(e._view={}))}(r||(r={})),function(e){var t,n,r;t=e._view||(e._view={}),n=t.grid||(t.grid={}),r=function(r){function o(){var t=r.call(this)||this;return t.START_TABLE_ROW=0,t.START_HEADERS_ROW=0,t.START_HEADERS_COLUMN=0,t.FIRST_DATA_ROW=0,t.FIRST_DATA_COLUMN=0,t._model=e.model.PivotModel.getInstance(),t.conditions=[],t.setId("wdr-grid-view"),s.browserVersion().isMobile?new i._utils.LongPressListener(t.container).listen((function(e,n){return t.onLongPress(e,n)})):s.fmdocument.addEventListener("contextmenu",(function(e){return t.onContextMenu(e)})),t}return h(o,r),o.prototype.dispose=function(){this._model=this.dataProvider=null,this.gridLayout&&this.gridLayout.dispose(),this._gridLayout=null},o.prototype.createCompactLayout=function(){var e=this,t=new n.sheet.CompactGridLayout;return t.id="wdr-grid-layout",t.getDataFunction=function(t,n){return e.getData(t,n)},t.addEventListener(n.GridEvent.MOUSE_CLICK,(function(t){return e.onGridClick(t)})),t.addEventListener(n.GridEvent.MOUSE_SINGLE_DOUBLE_CLICK,(function(t){return e.onGridSingleDoubleClick(t)})),t.addEventListener(n.GridEvent.FILTER_CLICK,(function(t){return e.onFilterClick(t)})),t.addEventListener(n.GridEvent.RESIZE_COLUMN,(function(t){return e.onResizeColumn(t)})),t.addEventListener(n.GridEvent.RESIZE_ROW,(function(t){return e.onResizeRow(t)})),this.container.append(t),t},o.prototype.createClassicLayout=function(){var e=this,t=new n.sheet.classic.ClassicGridLayout;return t.id="wdr-grid-layout",t.getDataFunction=function(t,n){return e.getData(t,n)},t.addEventListener(n.GridEvent.MOUSE_CLICK,(function(t){return e.onGridClick(t)})),t.addEventListener(n.GridEvent.MOUSE_SINGLE_DOUBLE_CLICK,(function(t){return e.onGridSingleDoubleClick(t)})),t.addEventListener(n.GridEvent.FILTER_CLICK,(function(t){return e.onFilterClick(t)})),t.addEventListener(n.GridEvent.RESIZE_COLUMN,(function(t){return e.onResizeColumn(t)})),t.addEventListener(n.GridEvent.RESIZE_ROW,(function(t){return e.onResizeRow(t)})),this.container.append(t),t},o.prototype.createFlatLayout=function(){var e=this,t=new n.sheet.flat.FlatGridLayout;return t.id="wdr-grid-layout",t.getDataFunction=function(t,n){return e.getData(t,n)},t.addEventListener(n.GridEvent.MOUSE_CLICK,(function(t){return e.onGridClick(t)})),t.addEventListener(n.GridEvent.MOUSE_SINGLE_DOUBLE_CLICK,(function(t){return e.onGridSingleDoubleClick(t)})),t.addEventListener(n.GridEvent.FILTER_CLICK,(function(t){return e.onFilterClick(t)})),t.addEventListener(n.GridEvent.RESIZE_COLUMN,(function(t){return e.onResizeColumn(t)})),t.addEventListener(n.GridEvent.RESIZE_ROW,(function(t){return e.onResizeRow(t)})),this.container.append(t),t},o.prototype.getCurrentLayout=function(){return e.model._options.OptionsManager.classicView?this.gridLayout&&this.gridLayout.type==n.sheet.classic.ClassicGridLayout.TYPE?this.gridLayout:(null!=this.gridLayout&&this.gridLayout.removeFromParent(!0),this.createClassicLayout()):e.model._options.OptionsManager.flatView?this.gridLayout&&this.gridLayout.type==n.sheet.flat.FlatGridLayout.TYPE?this.gridLayout:(null!=this.gridLayout&&this.gridLayout.removeFromParent(!0),this.createFlatLayout()):this.gridLayout&&this.gridLayout.type==n.sheet.CompactGridLayout.TYPE?this.gridLayout:(null!=this.gridLayout&&this.gridLayout.removeFromParent(!0),this.createCompactLayout())},o.prototype.draw=function(){if(this._gridLayout=this.getCurrentLayout(),null!=this.gridLayout){if(this.gridLayout.smoothTimeout=this._model.state_.updateActive?100:1e3,this.dataProvider&&this.dataProvider.dataLoaded&&!this.dataProvider.isEmpty){this.gridLayout.clearData(),this.START_HEADERS_ROW=this.START_HEADERS_COLUMN=this.START_TABLE_ROW=0;var i,r,o,s,a=this.dataProvider.columnMaxDepth,l=e.model._options.OptionsManager.classicView?0<this.dataProvider.rowsOnly.length?1:0:this.dataProvider.rowCount;l>=a+1?(r=(i=0)+l,o=i+(l-a)-1):(o=0,i=0<this.dataProvider.columnCount?o+(a-l)+1:o,0==this.dataProvider.columnsOnly.length&&0==this.dataProvider.rowsOnly.length&&(i+=1),r=i+l),s=o,this.START_TABLE_ROW=Math.min(i,s),this.START_HEADERS_ROW=s,this.START_HEADERS_COLUMN=0,this.FIRST_DATA_ROW=r,this.FIRST_DATA_COLUMN=this.isFlatTable?0:e.model._options.OptionsManager.classicView?this.dataProvider.rowAxis.hasMeasures&&this.dataProvider.multiMeasures?this.dataProvider.rowLevels.length+1:this.dataProvider.rowLevels.length:0==this.dataProvider.rows.length?0:1,e.model._options.OptionsManager.showHierarchyCaptions||(this.START_HEADERS_ROW=1==l&&0==this.dataProvider.columnCount?0:-1,this.FIRST_DATA_ROW=a),this.isFlatTable&&"on"==e.model._options.OptionsManager.showGrandTotals&&"top"==e.model._options.OptionsManager.grandTotalsPosition&&this.FIRST_DATA_ROW++,this.gridLayout.setDataSize(this.dataProvider.extendedDataHeight+(this.isFlatTable&&"on"==e.model._options.OptionsManager.showGrandTotals&&"bottom"==e.model._options.OptionsManager.grandTotalsPosition?1:0),this.dataProvider.extendedDataWidth),this.gridLayout.freezeColumns(this.FIRST_DATA_COLUMN),this.gridLayout.freezeRows(this.FIRST_DATA_ROW),this.gridLayout instanceof n.sheet.CompactGridLayout&&(this.gridLayout.colsFilter.rowIndex=this.FIRST_DATA_ROW-this.dataProvider.columnMaxDepth-1,this.gridLayout.colsFilter.setHierarchies(this.dataProvider.columnsOnly),this.gridLayout.rowsFilter.setHierarchies(this.dataProvider.rowsOnly),this.gridLayout.pageFilter.setHierarchies(this.dataProvider.pages)),this.gridLayout instanceof n.sheet.classic.ClassicGridLayout&&(this.gridLayout.colsFilter.rowIndex=this.FIRST_DATA_ROW-this.dataProvider.columnMaxDepth-1,this.gridLayout.colsFilter.setHierarchies(this.dataProvider.columnsOnly),this.gridLayout.rowsFilter.setHierarchies(this.dataProvider.rowsOnly),this.gridLayout.pageFilter.setHierarchies(this.dataProvider.pages)),(1<this.dataProvider.columns.length||!this.dataProvider.columnAxis.hasMeasures)&&e.model._options.OptionsManager.showHierarchyCaptions&&this.addFilterCell(o,this.FIRST_DATA_COLUMN,e.data_.consts.AxisName.COLUMNS_AXIS),(1<this.dataProvider.rows.length||!this.dataProvider.rowAxis.hasMeasures)&&e.model._options.OptionsManager.showHierarchyCaptions&&(e.model._options.OptionsManager.classicView?this._addFilterCell(i,0):this.addFilterCell(i,0,e.data_.consts.AxisName.ROWS_AXIS)),this.resizeColumnsByIdx(),this.resizeHeaderColumns(),this.resizeColumns(),this.resizeRowsByIdx(),this.resizeHeaderRows(),this.resizeRows()}else this.gridLayout.clearAll();this.conditions=e.model.condition.ConditionManager.conditions.toArray(),this.gridLayout.resize(t.PivotView.gridWidth,t.PivotView.gridHeight),this.gridLayout.draw()}},o.prototype.clearSizes=function(){null!=this.gridLayout&&(this.gridLayout.clearColSizes(0),this.gridLayout.clearRowSizes(0))},o.prototype.getData=function(t,n,i){if(void 0===i&&(i=!1),null==this.dataProvider||!this.dataProvider.dataLoaded||t<this.START_HEADERS_ROW||n<this.START_HEADERS_COLUMN)return null;var r=t-this.FIRST_DATA_ROW,o=n-this.FIRST_DATA_COLUMN;if((r>this.dataProvider.extendedDataHeight-1||o>this.dataProvider.extendedDataWidth-1)&&!(this.isFlatTable&&"on"==e.model._options.OptionsManager.showGrandTotals&&"bottom"==e.model._options.OptionsManager.grandTotalsPosition&&r==this.dataProvider.extendedDataHeight&&o<=this.dataProvider.extendedDataWidth-1))return null;var s=this.dataProvider.getRowTuple(r,!0),a=this.dataProvider.getColumnTuple(o,!0);if(null==s&&null==a)return null;var l=this.dataProvider.getMeasure(r,o);return this.isFlatTable&&"on"==e.model._options.OptionsManager.showGrandTotals&&"top"==e.model._options.OptionsManager.grandTotalsPosition&&(e.model._options.OptionsManager.showHierarchyCaptions&&1==t||!e.model._options.OptionsManager.showHierarchyCaptions&&0==t)||this.isFlatTable&&"on"==e.model._options.OptionsManager.showGrandTotals&&"bottom"==e.model._options.OptionsManager.grandTotalsPosition&&(e.model._options.OptionsManager.showHierarchyCaptions&&t==this.dataProvider.extendedDataHeight+1||!e.model._options.OptionsManager.showHierarchyCaptions&&t==this.dataProvider.extendedDataHeight)?this.getFlatGrandTotal(s,a,l):null==s?(i=1==(e.model._options.OptionsManager.classicView?1:this.dataProvider.rowsOnly.length)&&0==this.dataProvider.columnCount?t-this.START_HEADERS_ROW:t-this.START_HEADERS_ROW-1,0==this.dataProvider.rowsOnly.length&&0==this.dataProvider.columnsOnly.length&&(i=t-this.START_HEADERS_ROW),t=this.dataProvider.getColumnDepth(o),this.getColumnCell(a,l,t,i,n)):(o=this.dataProvider.getRowDepth(r),r=this.dataProvider.getRowType(r),null==a?e.model._options.OptionsManager.classicView?this._getRowCell(s,l,o,n,r):this.getRowCell(s,l,o):this.getDataCell(s,a,l,t,n,i,o,r))},o.prototype.getDataCell=function(t,i,r,o,a,l,u,c){if(void 0===l&&(l=!1),void 0===u&&(u=NaN),void 0===c&&(c=-1),null==r)return null;var h=r.getFormat().clone();r.aggregation!=e.data_.consts.AggregationName.PERCENT&&r.aggregation!=e.data_.consts.AggregationName.PERCENT_COLUMN&&r.aggregation!=e.data_.consts.AggregationName.PERCENT_ROW&&r.aggregation!=e.data_.consts.AggregationName.PERCENT_DIFFERENCE||(h.currencySymbol="%",h.currencySymbolAlign="right");var d=new n.vo.GridCell;if(d.isValue=!0,d.columnTuple=i,d.measure=r,d.hierarchy=this._model.cube_.structure_.measureToHierarchy(r.uniqueName),d.rowTuple=t,e.model._options.OptionsManager.classicView?0==t.length?d.level=0:-1<(u=this.getLevelIdxByTuple(t))&&(d.level=u):e.model._options.OptionsManager.flatView||(d.level=u),u=this.dataProvider.getValue(t,i,r),d.value=u,this.isFlatTable){if(h=r.getFormat(!0).clone(),r.type==e.data_.types.MeasureType.COUNT){var A=this.dataProvider.getColumnHierarchy(i).members.getItemAt(u);null!=A&&(d.member=A,d.label=A.caption)}else r.type==e.data_.types.MeasureType.NUMBER?"string"==typeof u?d.label=u:(d.label=s.NumberFormatter.format(u,h),d.numeric=!0):r.type==e.data_.types.MeasureType.DATE?d.label=s.StringUtils.toDate(u,e.model._options.OptionsManager.datePattern):r.type==e.data_.types.MeasureType.TIME?isNaN(u)||(d.label=s.StringUtils.toTime(u)):r.type!=e.data_.types.MeasureType.DATETIME||isNaN(u)||(d.label=s.StringUtils.toDateTime(u,e.model._options.OptionsManager.dateTimePattern));d.recordId=this.dataProvider.getRecordId(t,i,r)}else r.type==e.data_.types.MeasureType.NUMBER||r.type==e.data_.types.MeasureType.COUNT?"string"==typeof u?d.label=u:(d.label=s.NumberFormatter.format(u,h),d.numeric=!0):r.type==e.data_.types.MeasureType.DATE?d.label=e.data_.consts.AggregationName.validForDateTimeFormatting(r.aggregation)?s.StringUtils.toDate(d.value,e.model._options.OptionsManager.datePattern):s.NumberFormatter.format(u,h):r.type==e.data_.types.MeasureType.TIME?isNaN(u)||(d.label=e.data_.consts.AggregationName.validForDateTimeFormatting(r.aggregation)?s.StringUtils.toTime(u):s.NumberFormatter.format(u,h)):r.type==e.data_.types.MeasureType.DATETIME?isNaN(d.value)||(d.label=e.data_.consts.AggregationName.validForDateTimeFormatting(r.aggregation)?s.StringUtils.toDateTime(u,e.model._options.OptionsManager.dateTimePattern):s.NumberFormatter.format(u,h)):d.label=u;if(l)return d;if(l=!1,this.dataProvider.rowCount>t.length||this.dataProvider.columnCount>i.length){if(l=!0,d.isTotalRow=this.dataProvider.rowCount>t.length,d.isTotalColumn=this.dataProvider.columnCount>i.length,"on"!=e.model._options.OptionsManager.showTotals){if(A=this.dataProvider.measureDepth,0!=t.length&&(this.dataProvider.isRowExpanded(t)||this.dataProvider.isRowExpanded(t,r))&&("off"==e.model._options.OptionsManager.showTotals||"columns"==e.model._options.OptionsManager.showTotals)||0!=i.length&&(this.dataProvider.isColumnExpanded(i)||this.dataProvider.isColumnExpanded(i,r))&&("off"==e.model._options.OptionsManager.showTotals||"rows"==e.model._options.OptionsManager.showTotals))return null;if(0==A&&1<this.dataProvider.measures.length)if(!this.dataProvider.rowAxis.hasMeasures||"off"!=e.model._options.OptionsManager.showTotals&&"columns"!=e.model._options.OptionsManager.showTotals){if(this.dataProvider.columnAxis.hasMeasures&&("off"==e.model._options.OptionsManager.showTotals||"rows"==e.model._options.OptionsManager.showTotals)&&a<("on"==e.model._options.OptionsManager.showGrandTotals||"rows"==e.model._options.OptionsManager.showGrandTotals?this.FIRST_DATA_COLUMN+this.dataProvider.extendedDataWidth-this.dataProvider.measures.length:this.FIRST_DATA_COLUMN+this.dataProvider.extendedDataWidth)&&this.dataProvider.isColumnExpanded(i,r))return null}else if(o<("on"==e.model._options.OptionsManager.showGrandTotals||"columns"==e.model._options.OptionsManager.showGrandTotals?this.FIRST_DATA_ROW+this.dataProvider.extendedDataHeight-this.dataProvider.measures.length:this.FIRST_DATA_ROW+this.dataProvider.extendedDataHeight)&&this.dataProvider.isRowExpanded(t,r))return null}d.isGrandTotalRow=0==t.length,d.isGrandTotalColumn=0==i.length,d.isClassicTotalRow=d.isTotalRow&&2==c&&!d.isGrandTotalRow}if(""!=h.textAlign&&d.customize({"text-align":h.textAlign}),0<this.conditions.length&&d.measure)for(c=0;c<this.conditions.length;c++)if(!((h=this.conditions[c]).row!=o&&-1!=h.row||h.column!=a&&-1!=h.column||h.measure!=r.uniqueName&&""!=h.measure&&h.measure!=r.uniqueName||h.isTotal!==l&&void 0!==h.isTotal||""!=h.hierarchy&&!this.checkHierarchyCondition(t,i,h.hierarchy,h.member)))if(A=h.params.slice(0),h.isUpdate){if(this._model.state_.updateActive){var p=this.dataProvider.getUpdatedValue(t,i,r);p&&(-1<h.formula.toLowerCase().indexOf(e.data_.consts.FunctionName.UPDATE_DIFFERENCE)?u=p.difference:-1<h.formula.toLowerCase().indexOf(e.data_.consts.FunctionName.UPDATE_PERCENT)&&(u=100*p.percent),null!=(A=this.dataProvider.calculate(t,i,A,u))&&d.customizeWithClass(A))}}else 1!=(A=this.dataProvider.calculate(t,i,A,u))&&"truestyle"!=A||null==h.format?null!=A&&0!=A&&d.customizeWithClass(A):(d.customize(h.format.toCSSObject()),d.conditions.push(h.id)),d.showTooltip=!0;return d},o.prototype.getFlatGrandTotal=function(t,i,r){if(null==r)return null;var o=new n.vo.GridCell;if(o.isValue=!0,o.columnTuple=i,o.measure=r,o.hierarchy=this._model.cube_.structure_.measureToHierarchy(r.uniqueName),o.rowTuple=t,r.type==e.data_.types.MeasureType.NUMBER||r.type==e.data_.types.MeasureType.TIME||r.type==e.data_.types.MeasureType.DATETIME){var a=r.getFormat().clone();if((r.aggregation==e.data_.consts.AggregationName.PERCENT||r.aggregation==e.data_.consts.AggregationName.PERCENT_COLUMN||r.aggregation==e.data_.consts.AggregationName.PERCENT_ROW||r.aggregation==e.data_.consts.AggregationName.PERCENT_DIFFERENCE||r.calculated&&-1<r.formula.indexOf("percent"))&&(a.currencySymbol="%",a.currencySymbolAlign="right"),o.value=this.dataProvider.getValue(null,null,r),r.type==e.data_.types.MeasureType.NUMBER?(o.label=s.NumberFormatter.format(o.value,a),o.numeric=!0):r.type==e.data_.types.MeasureType.TIME?isNaN(o.value)||(o.label=e.data_.consts.AggregationName.validForDateTimeFormatting(r.aggregation)?s.StringUtils.toTime(o.value):s.NumberFormatter.format(o.value,a)):r.type!=e.data_.types.MeasureType.DATETIME||isNaN(o.value)||(o.label=e.data_.consts.AggregationName.validForDateTimeFormatting(r.aggregation)?s.StringUtils.toDateTime(o.value,e.model._options.OptionsManager.dateTimePattern):s.NumberFormatter.format(o.value,a)),o.isGrandTotalRow=!0,""!=a.textAlign&&o.customize({"text-align":a.textAlign}),0<this.conditions.length)for(a=0;a<this.conditions.length;a++){var l=this.conditions[a],u=l.params.slice(0);if(l.measure==r.uniqueName&&l.isUpdate&&this._model.state_.updateActive){var c,h=this.dataProvider.getUpdatedValue(t,i,r);h&&(-1<l.formula.toLowerCase().indexOf(e.data_.consts.FunctionName.UPDATE_DIFFERENCE)?c=h.difference:-1<l.formula.toLowerCase().indexOf(e.data_.consts.FunctionName.UPDATE_PERCENT)&&(c=100*h.percent),null!=(l=this.dataProvider.calculate(t,i,u,c))&&o.customizeWithClass(l))}}}return o},o.prototype.checkHierarchyCondition=function(e,t,n,i){var r=this.dataProvider.columns.indexOf(n);if(-1<r){if(r<t.length)return e=this.dataProvider.columns.getItem(n),t[r]&&e.members.getItemAt(t[r]).uniqueName==i}else if(-1<(t=this.dataProvider.rows.indexOf(n))&&t<e.length)return n=this.dataProvider.rows.getItem(n),e[t]&&n.members.getItemAt(e[t]).uniqueName==i;return!1},o.prototype.getColumnCell=function(e,t,n,i,r){return this.isFlatTable?this._getFlatTableColumnCell(e,t,n,i):this._getColumnCell(e,t,n,i,r)},o.prototype._getColumnCell=function(t,i,r,o,s){if(0==t.length)return this.dataProvider.rowAxis.hasMeasures&&o==this.dataProvider.columnMaxDepth-1?this.getGrandTotalCell(i,e.data_.consts.AxisName.COLUMNS_AXIS):(t=this.dataProvider.extendedDataWidth-this.dataProvider.measures.length+1,this.dataProvider.columnAxis.hasMeasures&&o==this.dataProvider.columnMaxDepth-1&&s>=t&&1==this.dataProvider.measures.length?this.getGrandTotalCell(i,e.data_.consts.AxisName.COLUMNS_AXIS):(t="on"==e.model._options.OptionsManager.showGrandTotals||"rows"==e.model._options.OptionsManager.showGrandTotals?this.FIRST_DATA_COLUMN+this.dataProvider.extendedDataWidth-this.dataProvider.measures.length:this.FIRST_DATA_COLUMN+this.dataProvider.extendedDataWidth,this.dataProvider.columnAxis.hasMeasures&&0==o&&s>=t&&1<this.dataProvider.columnMaxDepth?s==t?((s=this.getHeaderCell()).label=e.model._labels.Labels.GRID_TOTALS,s):this.getEmptyHeaderCell():this.dataProvider.columnAxis.hasMeasures&&0==o&&1<this.dataProvider.columnMaxDepth?this.getGrandTotalCell(i,e.data_.consts.AxisName.COLUMNS_AXIS):this.dataProvider.columnAxis.hasMeasures&&o==this.dataProvider.columnMaxDepth-1?s>=t||1==this.dataProvider.columnAxis.hierarchies.length?this.getGrandTotalCell(i,e.data_.consts.AxisName.COLUMNS_AXIS):this.getHeaderCell():this.dataProvider.columnAxis.hasMeasures&&0<o&&s<=t?this.getHeaderCell():0<=o?this.getEmptyHeaderCell():null));var a=this.dataProvider.columnAxis.hasMeasures&&(t.length>this.dataProvider.measuresPosition||0==this.dataProvider.measuresPosition)?t.length:t.length-1,l=this.dataProvider.columns.getItemAt(a);if(this.dataProvider.columnAxis.hasMeasures&&a>this.dataProvider.measuresPosition&&(1==this.dataProvider.measures.length?a--:r++),r>o)return 0<=o?this.getEmptyHeaderCell():null;(s=new n.vo.GridCell).isColumnHeader=!0,s.measure=this.dataProvider.columnAxis.hasMeasures&&(1<this.dataProvider.measures.length||e.model._options.OptionsManager.showExtraTotalLabels)?i:null;var u=!1,c=l.members.getItemAt(t[t.length-1]),h=this.dataProvider.measureDepth;if(this.dataProvider.columnAxis.hasMeasures&&1<this.dataProvider.measures.length&&o==h-1||this.dataProvider.columnAxis.hasMeasures&&e.model._options.OptionsManager.showExtraTotalLabels&&o==h-1&&1!=h||this.dataProvider.columnAxis.hasMeasures&&e.model._options.OptionsManager.showExtraTotalLabels&&o==h&&1==h&&2>this.dataProvider.measures.length)s.label=i.caption,s.isMeasureHeader=!0,c=null;else{if(this.dataProvider.columnAxis.hasMeasures&&0<this.dataProvider.measures.indexOf(i.uniqueName)&&o<h)return this.getEmptyHeaderCell();r<o?a==o?(u=t.length-1!=this.dataProvider.columnCount-1&&!c.isAll,s.label=c.caption):(s.label=this.dataProvider.columnMaxDepth-1==o&&e.model._options.OptionsManager.showExtraTotalLabels?null!=i?i.caption:e.model._labels.Labels.GRID_TOTAL:"",c=null):(u=t.length-1!=this.dataProvider.columnCount-1&&!c.isAll,s.label=c.caption,this.dataProvider.columnAxis.hasMeasures&&o<h&&(s.measure=i=null))}return o=null!=c&&this.dataProvider.isColumnDrilledDown(t,c,i),c&&(1!=c.children.length||c.children.getItemAt(0).caption!=e.model._labels.Labels.MEMBER_BLANK&&c.children.getItemAt(0).caption!=e.model._labels.Labels.INVALID_DATE)&&!c.isAll&&c.hierarchy_.isHierarchy&&!c.level.isLast&&(u||e.model._options.OptionsManager.showHierarchies?o?s.drilledDown=!0:s.drilledUp=!0:o?s.expanded=!0:s.collapsed=!0),u&&!o&&(this.dataProvider.isColumnExpanded(t,i)?s.expanded=!0:s.collapsed=!0),"on"!=e.model._options.OptionsManager.sorting&&"columns"!=e.model._options.OptionsManager.sorting||""==s.label||(s.sortable=!0,!this.dataProvider.columnSortTuple||this.dataProvider.columnSortTuple.toString()!=t.toString()||null!=i&&this.dataProvider.columnSortMeasure.uniqueName!=i.uniqueName||(this.dataProvider.columnSortType==e.data_.consts.SortType.DESC?s.sortedDesc=!0:this.dataProvider.columnSortType==e.data_.consts.SortType.ASC&&(s.sortedAsc=!0))),s.isTotalColumn=this.dataProvider.columnCount>t.length,s.tuple=t,s.url=void 0,s.hierarchy=l,s.member=c,s},o.prototype._getFlatTableColumnCell=function(t,i,r,o){return null==(o=this.dataProvider.getColumnHierarchy(t))?null==i?null:((r=new n.vo.GridCell).isColumnHeader=!0,r.label=i.caption,r):((r=new n.vo.GridCell).isColumnHeader=!0,r.isFilterHeader=!0,r.hasHierarchyName=o.filterEnabled,r.filtered=o.hasFilter(),r.label=o.caption,r.tuple=t,r.hierarchy=o,r.member=null,r.measure=i,r.draggable=!0,"on"!=e.model._options.OptionsManager.sorting&&"columns"!=e.model._options.OptionsManager.sorting||(r.sortable=!0,!this.dataProvider.columnSortTuple||this.dataProvider.columnSortTuple.toString()!=t.toString()||this.dataProvider.columnSortMeasure!=i&&null!=i||((t=this.dataProvider.columnSortType)==e.data_.consts.SortType.DESC?r.sortedDesc=!0:t==e.data_.consts.SortType.ASC&&(r.sortedAsc=!0))),r)},o.prototype.getHeaderCell=function(){var e=new n.vo.GridCell;return e.isColumnHeader=!0,e},o.prototype.getEmptyHeaderCell=function(){var e=this.getHeaderCell();return e.isEmpty=!0,e},o.prototype.getGrandTotalCell=function(t,i){var r=new n.vo.GridCell;return r.label=null==t?e.model._labels.Labels.GRID_GRAND_TOTAL:t.grandTotalCaption,r.isMeasureHeader=null!=t,i==e.data_.consts.AxisName.COLUMNS_AXIS?(r.isColumnHeader=!0,r.isTotalColumn=r.isGrandTotalColumn=!0,"on"!=e.model._options.OptionsManager.sorting&&"columns"!=e.model._options.OptionsManager.sorting||(r.sortable=!0,!this.dataProvider.columnSortTuple||""!=this.dataProvider.columnSortTuple.toString()||this.dataProvider.columnSortMeasure!=t&&null!=t||(this.dataProvider.columnSortType==e.data_.consts.SortType.DESC?r.sortedDesc=!0:this.dataProvider.columnSortType==e.data_.consts.SortType.ASC&&(r.sortedAsc=!0))),this.dataProvider.columnAxis.hasMeasures?r.measure=t:r.label=e.model._labels.Labels.GRID_GRAND_TOTAL):(r.isRowHeader=!0,r.isTotalRow=r.isGrandTotalRow=!0,"on"!=e.model._options.OptionsManager.sorting&&"rows"!=e.model._options.OptionsManager.sorting||(r.sortable=!0,!this.dataProvider.rowSortTuple||""!=this.dataProvider.rowSortTuple.toString()||this.dataProvider.rowSortMeasure!=t&&null!=t||(this.dataProvider.rowSortType==e.data_.consts.SortType.DESC?r.sortedDesc=!0:this.dataProvider.rowSortType==e.data_.consts.SortType.ASC&&(r.sortedAsc=!0))),this.dataProvider.rowAxis.hasMeasures?r.measure=t:r.label=e.model._labels.Labels.GRID_GRAND_TOTAL,r.level=0),r.tuple=[],r},o.prototype.getRowCell=function(t,i,r){if(0==t.length)return this.getGrandTotalCell(i,e.data_.consts.AxisName.ROWS_AXIS);var o=this.dataProvider.rowAxis.hasMeasures&&t.length>this.dataProvider.measuresPosition?t.length:t.length-1,s=t[t.length-1],a=this.dataProvider.rows.getItemAt(o),l=new n.vo.GridCell;l.isRowHeader=!0;var u=!1;return s=a.members.getItemAt(s),l.level=r,null!=i&&this.dataProvider.rowAxis.hasMeasures&&this.dataProvider.multiMeasures&&o<=this.dataProvider.measuresPosition?(l.label=i.caption,s=null):s&&(l.label=s.caption,u=t.length!=this.dataProvider.rowCount&&!s.isAll),r=null!=s&&this.dataProvider.isRowDrilledDown(t,s,i),s&&!s.isAll&&s.hierarchy_.isHierarchy&&!s.isLeaf&&(1!=s.children.length||s.children.getItemAt(0).caption!=e.model._labels.Labels.MEMBER_BLANK&&s.children.getItemAt(0).caption!=e.model._labels.Labels.INVALID_DATE)&&(e.model._options.OptionsManager.showHierarchies?r?l.drilledDown=!0:l.drilledUp=!0:r?l.expanded=!0:l.collapsed=!0),u&&!r&&(this.dataProvider.isRowExpanded(t,i)?l.expanded=!0:l.collapsed=!0),"on"!=e.model._options.OptionsManager.sorting&&"rows"!=e.model._options.OptionsManager.sorting||(l.sortable=!0,this.dataProvider.rowSortTuple&&this.dataProvider.rowSortTuple.toString()==t.toString()&&this.dataProvider.rowSortMeasure==i&&(this.dataProvider.rowSortType==e.data_.consts.SortType.DESC?l.sortedDesc=!0:this.dataProvider.rowSortType==e.data_.consts.SortType.ASC&&(l.sortedAsc=!0))),l.isTotalRow=this.dataProvider.rowCount>t.length,l.tuple=t,l.url=void 0,l.hierarchy=a,l.member=s,l.measure=this.dataProvider.rowAxis.hasMeasures&&1<this.dataProvider.measures.length?i:null,l},o.prototype._getRowCell=function(t,i,r,o,a){if(0==t.length)return 0==o?this.getGrandTotalCell(i,e.data_.consts.AxisName.ROWS_AXIS):((d=new n.vo.GridCell).isRowHeader=!0,d.isTotalRow=d.isGrandTotalRow=!0,d.isEmpty=!0,d.level=r,d);for(var l,u,c,h=o,d=this.dataProvider.rowLevels[o],A=0;A<this.dataProvider.rowsOnly.length;A++)if(null!=(u=(f=this.dataProvider.rowsOnly.getItemAt(A)).findLevel(d))){l=f,h=A;break}A=null==t[h]?0:t[h],(d=new n.vo.GridCell).isRowHeader=!0,d.isTotalRow=this.dataProvider.rowCount>t.length,d.isClassicTotalRow=d.isTotalRow&&2==a,u=!1,r>o&&(u=!0),r>o&&2==a&&(u=!0),r+1<o&&2==a&&(u=!0),d.level=Math.min(t.length-1,o);var p=t.slice(0),f=!1;if(o==this.dataProvider.rowLevels.length)d.label=i.caption,f=!0;else{var g=!1,m=(p=null==i?0:this.dataProvider.measures.indexOf(i.uniqueName),l.members.getItemAt(A)),y=null!=m&&2!=a;if(0>(c=this.dataProvider.rowLevels.indexOf(m.level.uniqueName)-o)){if(!m.isAll)return d;f=!0}else if(0<c)for(A=0;A<c;A++)m=m.parent;if(m&&-1<(A=this.dataProvider.rowLevels.indexOf(m.level.uniqueName))&&(d.level=A),d.member=m,2==a)m&&r==o&&(d.label=this.dataProvider.rowAxis.hasMeasures&&1<this.dataProvider.measures.length?m.caption+" "+i.caption:m.caption+" "+e.model._labels.Labels.GRID_TOTAL,f=!0);else{if(0>c)return s.nullOrEmpty(d.label)&&(d.isEmpty=!0),-1<(A=this.getLevelIdxByTuple(t))&&(d.level=A),d;0<p&&(m=null),m&&0!=m.ordinal&&(d.label=m.caption),g=1==a&&h<this.dataProvider.rowsOnly.length-1&&0==p}if(p=t.slice(0,h+1),y&&m){p[h]=m.ordinal;var v=this.dataProvider.isRowDrilledDown(p,m,i);m.isAll||!m.hierarchy_.isHierarchy||m.isLeaf||2==a||1==m.children.length&&(m.children.getItemAt(0).caption==e.model._labels.Labels.MEMBER_BLANK||m.children.getItemAt(0).caption==e.model._labels.Labels.INVALID_DATE)||(e.model._options.OptionsManager.showHierarchies?v?d.drilledDown=!0:d.drilledUp=!0:v?d.expanded=!0:d.collapsed=!0)}g&&!v&&(this.dataProvider.isRowExpanded(p,i)?d.expanded=!0:d.collapsed=!0)}return u?(d.label="",d.sortedAsc=d.sortedDesc=d.collapsed=d.expanded=d.drilledDown=d.drilledUp=!1):(d.tuple=p,d.url=void 0,d.hierarchy=l,d.measure=i,("on"==e.model._options.OptionsManager.sorting||"rows"==e.model._options.OptionsManager.sorting)&&(d.sortable=!0,this.dataProvider.rowSortTuple&&this.dataProvider.rowSortTuple.toString()==p.toString()&&this.dataProvider.rowSortMeasure==i&&(this.dataProvider.rowSortType==e.data_.consts.SortType.DESC?d.sortedDesc=!0:this.dataProvider.rowSortType==e.data_.consts.SortType.ASC&&(d.sortedAsc=!0)))),f&&-1<(A=this.getLevelIdxByTuple(t))&&(d.level=A),s.nullOrEmpty(d.label)&&(d.isEmpty=!0,d.isExpandedArea=!(2==a&&m&&o-1>r)),d},o.prototype.getLevelIdxByTuple=function(e){return(e=this.dataProvider.getRowHierarchy(e).members.getItemAt(e[e.length-1]))?this.dataProvider.rowLevels.indexOf(e.level.uniqueName):-1},o.prototype.onGridClick=function(t){s.nullOrUndefined(t.cell)||!t.cell.isColumnHeader&&!t.cell.isRowHeader||(t.cell.activeElementType==n.vo.GridCellElementType.DRILL?this.drill(t.cell):t.cell.activeElementType==n.vo.GridCellElementType.LINK&&t.cell.isLink||(s.nullOrUndefined(t.cell.member)||t.cell.activeElementType==n.vo.GridCellElementType.RIGHT_ICON?t.cell.activeElementType==n.vo.GridCellElementType.RIGHT_ICON&&(t.cell.isColumnHeader&&this.sortColumn(t.cell),t.cell.isRowHeader&&this.sortRow(t.cell)):e.model._options.OptionsManager.showHierarchies||t.cell.member.isLeaf?this.expandCollapse(t.cell):this.drill(t.cell)))},o.prototype.onFilterClick=function(n){e.model._options.OptionsManager.showFilter&&this.dispatch(new t.FilterOpenEvent(n.hierarchy))},o.prototype.drill=function(t){if(t.drilledUp||t.drilledDown||t.expanded||t.collapsed){var n,i=t.tuple,r=e.model._options.OptionsManager.classicView?null:t.measure,o=t.member;null==o||o.isAll||o.isLeaf||(t.isRowHeader?(t=e.data_.consts.AxisName.ROWS_AXIS,n=this.dataProvider.isRowDrilledDown(i,o,r)):(t=e.data_.consts.AxisName.COLUMNS_AXIS,n=this.dataProvider.isColumnDrilledDown(i,o,r)),n?this.dataProvider.drillUp(i,o,t,r):this.dataProvider.drillDown(i,o,t,r))}},o.prototype.expandCollapse=function(t){if(t.expanded||t.collapsed){var n=t.tuple,i=t.isColumnHeader?e.data_.consts.AxisName.COLUMNS_AXIS:e.data_.consts.AxisName.ROWS_AXIS,r=e.model._options.OptionsManager.classicView&&i==e.data_.consts.AxisName.ROWS_AXIS?null:t.measure;t.expanded?(this.gridLayout.clearData(),this.dataProvider.collapse(n,i,r)):t.collapsed&&(this.gridLayout.clearData(),this.dataProvider.expand(n,i,r)),t.isColumnHeader?this.gridLayout.clearColSizes(t.colIdx+1):this.gridLayout.clearRowSizes(t.rowIdx+1)}},o.prototype.onGridSingleDoubleClick=function(t){t.isSingleClick?this.singleClick(t.cell):(this.isDrillThroughAvailable&&e.model._options.OptionsManager.drillThrough&&!this.isFlatTable&&this.drillThrough(t.cell),this.doubleClick(t.cell))},o.prototype.drillThrough=function(e){e.isValue&&!e.measure.calculated&&this.dispatchWith(t.ViewEvent.DRILL_THROUGH_OPEN,this,{measure:e.measure.uniqueName,columnTuple:e.columnTuple,rowTuple:e.rowTuple})},o.prototype.singleClick=function(t){var n=t.toObject();this.setCoordsToCell(n,t.colIdx,t.rowIdx),e.model.JavaScriptHandlers.getInstance().dispatch(new e.model.APIEvent(e.model.JavaScriptHandlers.CELL_CLICK,n))},o.prototype.doubleClick=function(t){var n=t.toObject();this.setCoordsToCell(n,t.colIdx,t.rowIdx),e.model.JavaScriptHandlers.getInstance().dispatch(new e.model.APIEvent(e.model.JavaScriptHandlers.CELL_DOUBLE_CLICK,n))},o.prototype.setCoordsToCell=function(e,t,n){e.x=this.gridLayout.coords.getRelativeColX(t,this.gridLayout.isSmooth),e.y=this.gridLayout.coords.getRelativeRowY(n,this.gridLayout.isSmooth),e.width=this.gridLayout.coords.getColWidth(t),e.height=this.gridLayout.coords.getRowHeight(n)},o.prototype.sortRow=function(t,n){void 0===n&&(n="");var i=t.tuple,r=t.measure;null==r&&(r=this.dataProvider.measures.getItemAt(0)),this.dataProvider.rowSortTuple&&this.dataProvider.rowSortTuple.toString()==i.toString()&&this.dataProvider.rowSortMeasure==r?this.dataProvider.rowSortType=this.dataProvider.rowSortType==e.data_.consts.SortType.DESC?e.data_.consts.SortType.ASC:e.data_.consts.SortType.DESC:(this.dataProvider.rowSortType=e.data_.consts.SortType.DESC,this.dataProvider.rowSortTuple=i,this.dataProvider.rowSortMeasure=r),""!=n&&(this.dataProvider.rowSortType=n),this.dataProvider.sort(),this.gridLayout.clearColSizes(0),this.draw()},o.prototype.sortColumn=function(t,n){void 0===n&&(n="");var i=t.tuple,r=t.measure;null==r&&(r=this.dataProvider.measures.getItemAt(0)),i&&this.dataProvider.columnSortTuple&&this.dataProvider.columnSortTuple.toString()==i.toString()&&this.dataProvider.columnSortMeasure==r?this.dataProvider.columnSortType=this.dataProvider.columnSortType==e.data_.consts.SortType.DESC?e.data_.consts.SortType.ASC:e.data_.consts.SortType.DESC:(this.dataProvider.columnSortType=r.type==e.data_.types.MeasureType.COUNT?e.data_.consts.SortType.ASC:e.data_.consts.SortType.DESC,this.dataProvider.columnSortTuple=i,this.dataProvider.columnSortMeasure=r),""!=n&&(this.dataProvider.columnSortType=n),this.dataProvider.sort(),this.gridLayout.clearRowSizes(0),this.draw()},o.prototype.clearColumnSorting=function(){this.dataProvider.columnSortType=e.data_.consts.SortType.UNSORTED,this.dataProvider.columnSortTuple=null,this.dataProvider.columnSortMeasure=null,this._model.cube_.clearSortValues(this.dataProvider.rowAxis),this.dataProvider.sort(),this.gridLayout.clearRowSizes(0),this.draw()},o.prototype.clearRowSorting=function(){this.dataProvider.rowSortType=e.data_.consts.SortType.UNSORTED,this.dataProvider.rowSortTuple=null,this.dataProvider.rowSortMeasure=null,this._model.cube_.clearSortValues(this.dataProvider.columnAxis),this.dataProvider.sort(),this.gridLayout.clearColSizes(0),this.draw()},o.prototype.onLongPress=function(e,t){var n=this.gridLayout.getCellByElement(e.target);null==n||s.nullOrEmpty(n.label)&&isNaN(n.value)||(this.showContextMenu(n,{left:t.clientX,top:t.clientY}),this.gridLayout.deselect())},o.prototype.onContextMenu=function(e){var t=this.gridLayout.selectedCells[0]||this.gridLayout.getCellByElement(e.target);null==t||s.nullOrEmpty(t.label)&&isNaN(t.value)||(e.preventDefault(),this.showContextMenu(t,{left:e.clientX,top:e.clientY}),this.gridLayout.deselect())},o.prototype.showContextMenu=function(n,i){var r=this;if(null!=n){var o=[];!n.isValue||isNaN(n.value)||this.isFlatTable||n.measure.calculated||!e.model._options.OptionsManager.drillThrough||o.push({caption:e.model._labels.Labels.CONTEXT_MENU_DRILL_THROUGH,handler:function(){r.drillThrough(n)}}),n.isFilterHeader&&e.model._options.OptionsManager.showFilter&&o.push({caption:e.model._labels.Labels.CONTEXT_MENU_OPEN_FILTER,handler:function(){r.dispatch(new t.FilterOpenEvent(n.hierarchy))}}),(n.isRowHeader||n.isColumnHeader)&&(n.expanded&&o.push({caption:e.model._labels.Labels.CONTEXT_MENU_COLLAPSE,handler:function(){r.expandCollapse(n)}}),n.collapsed&&o.push({caption:e.model._labels.Labels.CONTEXT_MENU_EXPAND,handler:function(){r.expandCollapse(n)}})),n.isRowHeader&&!n.isFilterHeader&&(n.sortedDesc||o.push({caption:e.model._labels.Labels.CONTEXT_MENU_SORT_ROW_DESC,handler:function(){r.sortRow(n,e.data_.consts.SortType.DESC)}}),n.sortedAsc||o.push({caption:e.model._labels.Labels.CONTEXT_MENU_SORT_ROW_ASC,handler:function(){r.sortRow(n,e.data_.consts.SortType.ASC)}}),(n.sortedAsc||n.sortedDesc)&&o.push({caption:e.model._labels.Labels.CONTEXT_MENU_CLEAR_SORTING,handler:function(){r.clearRowSorting()}})),n.isColumnHeader&&!n.isFilterHeader&&(n.sortedDesc||o.push({caption:e.model._labels.Labels.CONTEXT_MENU_SORT_COLUMN_DESC,handler:function(){r.sortColumn(n,e.data_.consts.SortType.DESC)}}),n.sortedAsc||o.push({caption:e.model._labels.Labels.CONTEXT_MENU_SORT_COLUMN_ASC,handler:function(){r.sortColumn(n,e.data_.consts.SortType.ASC)}}),(n.sortedAsc||n.sortedDesc)&&o.push({caption:e.model._labels.Labels.CONTEXT_MENU_CLEAR_SORTING,handler:function(){r.clearColumnSorting()}})),0<o.length&&this._model.dispatchWith(t.ViewEvent.CONTEXT_MENU_OPEN,this,{menuItems:o,coords:i})}},o.prototype.addFilterCell=function(t,i,r){for(var o,s=r==e.data_.consts.AxisName.COLUMNS_AXIS?this.dataProvider.columnsOnly:this.dataProvider.rowsOnly,a=0,l=0;l<s.length;l++){var u=s.getItemAt(l);u.isMeasures||((o=new n.vo.GridCell).label=u.caption,o.isFilterHeader=!0,o.draggable=!0,o.hasHierarchyName=!0,o.filtered=u.hasFilter(),o.level=a,o.hierarchy=u,r==e.data_.consts.AxisName.COLUMNS_AXIS?(o.isFrozen=!this.isFlatTable,this.gridLayout.dataProvider.setDataFrozen(t,i+l,o)):(o.isRowHeader=!0,this.gridLayout.dataProvider.setDataFrozen(t+a,i,o),a++))}},o.prototype._addFilterCell=function(e,t){for(var i,r=this.dataProvider.rowsOnly,o=0,s=this.dataProvider.rowAxis.hasMeasures&&1<this.dataProvider.measures.length?this.FIRST_DATA_COLUMN-1:this.FIRST_DATA_COLUMN,a=0;a<r.length;a++){var l,u=r.getItemAt(a);if((i=new n.vo.GridCell).label=u.caption,i.isFilterHeader=!0,i.draggable=!0,i.hasHierarchyName=!0,i.filtered=u.hasFilter(),i.hierarchy=u,this.gridLayout.dataProvider.setDataFrozen(e,t+o,i),o++,2<u.levels_.length)for(var c=2;c<u.levels_.length&&(l=u.levels_.getItemAt(c),-1!=this.dataProvider.rowLevels.indexOf(l.uniqueName)&&((i=new n.vo.GridCell).label=l.caption,i.isRowHeader=!0,i.hasHierarchyName=!0,this.gridLayout.dataProvider.setDataFrozen(e,t+o,i),o++),!(o>=s));c++);if(o>=s)break}},Object.defineProperty(o.prototype,"isFlatTable",{get:function(){return e.model._options.OptionsManager.flatView},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"isDrillThroughAvailable",{get:function(){return!e.model._options.OptionsManager.flatView},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"gridLayout",{get:function(){return this._gridLayout},enumerable:!0,configurable:!0}),o.prototype.exportTo=function(t,n,i){t==e.model._export.ExportType.HTML&&e.model._export.ExportHTML.run(this,n,this.dataProvider.extendedDataWidth,this.dataProvider.extendedDataHeight),t==e.model._export.ExportType.PDF&&e.model._export.ExportPDF.run(this,n,this.dataProvider.extendedDataWidth,this.dataProvider.extendedDataHeight),t==e.model._export.ExportType.EXCEL&&e.model._export.ExportXLS.run(this,n,this.dataProvider.extendedDataWidth,this.dataProvider.extendedDataHeight)},o.prototype.print=function(){e.model.printing.PrintingManager.getInstance().run(this,this.dataProvider)},o.prototype.getCell=function(e,t){var i=this.gridLayout.getCell(e,t,!0,!0);if(null==i){(i=new n.vo.GridCell).rowIdx=e,i.colIdx=t;var r=this.getData(e,t,!0);i.value=r?r.value:NaN,isNaN(i.value)||(i.label=s.NumberFormatter.format(i.value))}return-1==i.rowIdx&&(i.rowIdx=e),-1==i.colIdx&&(i.colIdx=t),r=i.toObject(),this.setCoordsToCell(r,i.colIdx,i.rowIdx),r},o.prototype.getSelectedCell=function(){if(s.nullOrUndefined(this.gridLayout))return null;var e=this.gridLayout.selectedCells.map((function(e){return e.toObject()}));return 0==e.length?null:(1<e.length||this.setCoordsToCell(e=e[0],e.columnIndex,e.rowIndex),e)},o.prototype.setSelectedCell=function(e,t){this.gridLayout.select(e,t,e,t)},o.prototype.removeSelection=function(){this.gridLayout.deselect()},Object.defineProperty(o.prototype,"gridRowCount",{get:function(){return this.dataProvider.dataLoaded?this.dataProvider.extendedDataHeight+this.FIRST_DATA_ROW:0},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"gridColumnCount",{get:function(){return this.dataProvider.dataLoaded?this.dataProvider.extendedDataWidth+this.FIRST_DATA_COLUMN:0},enumerable:!0,configurable:!0}),o.prototype.onResizeColumn=function(e){this._onResizeColumn(e.data.colIdx,e.data.width)},o.prototype.onResizeRow=function(e){this._onResizeRow(e.data.rowIdx,e.data.height)},o.prototype._onResizeColumn=function(t,n){if(t<this.FIRST_DATA_COLUMN)0<n?e.model.sizes.SizesManager.columnHeaderSizes[t]=n:delete e.model.sizes.SizesManager.columnHeaderSizes[t];else{var i=this.dataProvider.getColumnTuple(t-this.FIRST_DATA_COLUMN,!0);if(null!=i){var r=this.dataProvider.getColumnMeasureIndex(t-this.FIRST_DATA_COLUMN);this.dataProvider.columnAxis.hasMeasures&&i.push(r),0<n?e.model.sizes.SizesManager.columnSizes[i.join(",")]=n:delete e.model.sizes.SizesManager.columnSizes[i.join(",")]}}},o.prototype.resizeColumnsByIdx=function(){var t=e.model.sizes.SizesManager.columnSizesByIdx;e.model.sizes.SizesManager.columnSizesByIdx={};var n,i=[];for(n in t)t[n]&&(i[parseInt(n)]=t[n]);for(var r in i)this.gridLayout.resizeColumn(parseInt(r),i[r]),this._onResizeColumn(parseInt(r),i[r])},o.prototype.resizeHeaderColumns=function(){var t,n=e.model.sizes.SizesManager.columnHeaderSizes,i=[];for(t in n)n[t]&&(i[t]=n[t]);for(var r in i)(n=parseInt(r))<this.FIRST_DATA_COLUMN&&this.gridLayout.resizeColumn(n,i[n])},o.prototype.resizeColumns=function(){var t,n=e.model.sizes.SizesManager.columnSizes,i=[];for(t in n)if(n[t]){var r=""==t?[]:t.split(",");-1!=(r=this.dataProvider.getColumnTupleIndex(r))&&(i[r+=this.FIRST_DATA_COLUMN]=n[t])}for(var o in i)this.gridLayout.resizeColumn(parseInt(o),i[o])},o.prototype.resizeRowsByIdx=function(){var t=e.model.sizes.SizesManager.rowSizesByIdx;e.model.sizes.SizesManager.rowSizesByIdx={};var n,i=[];for(n in t)t[n]&&(i[parseInt(n)]=t[n]);for(var r in i)this.gridLayout.resizeRow(parseInt(r),i[r]),this._onResizeRow(parseInt(r),i[r])},o.prototype.resizeHeaderRows=function(){e.model.sizes.SizesManager.startTableRow=this.START_TABLE_ROW;var t,n=e.model.sizes.SizesManager.rowHeaderSizes,i=[];for(t in n)n[t]&&(i[parseInt(t)+this.START_TABLE_ROW]=n[t]);for(var r in i)parseInt(r)<this.FIRST_DATA_ROW&&this.gridLayout.resizeRow(parseInt(r),i[r])},o.prototype.resizeRows=function(){var t,n=e.model.sizes.SizesManager.rowSizes,i=[];for(t in n)if(n[t]){var r=""==t?[]:t.split(",");-1!=(r=this.dataProvider.getRowTupleIndex(r))&&(i[r+=this.FIRST_DATA_ROW]=n[t])}for(var o in i)this.gridLayout.resizeRow(parseInt(o),i[o])},o.prototype._onResizeRow=function(t,n){if(e.model.sizes.SizesManager.startTableRow=this.START_TABLE_ROW,t<this.START_TABLE_ROW)0<n?e.model.sizes.SizesManager.rowFilterSizes[t]=n:delete e.model.sizes.SizesManager.rowFilterSizes[t];else if(t<this.FIRST_DATA_ROW)0<n?e.model.sizes.SizesManager.rowHeaderSizes[t-this.START_TABLE_ROW]=n:delete e.model.sizes.SizesManager.rowHeaderSizes[t-this.START_TABLE_ROW];else{var i=this.dataProvider.getRowTuple(t-this.FIRST_DATA_ROW,!0);if(null!=i){var r=this.dataProvider.getRowMeasureIndex(t-this.FIRST_DATA_ROW);this.dataProvider.rowAxis.hasMeasures&&i.push(r),0<n?e.model.sizes.SizesManager.rowSizes[i.join(",")]=n:delete e.model.sizes.SizesManager.rowSizes[i.join(",")]}}},o}(i.containers.UIContainer),n.GridView=r}(r||(r={})),function(e){!function(e){!function(e){var n=function(){function e(){}return e.MOUSE_CLICK="mclick",e.MOUSE_DOUBLE_CLICK="dblclick",e.MOUSE_SINGLE_DOUBLE_CLICK="singledoubleclick",e.MOUSE_UP="mup",e.MOUSE_DOWN="mdown",e.MOUSE_MOVE="mmove",e.MOUSE_LEAVE="mleave",e.HEADER_RESIZED="hresized",e.HEADER_RESIZING="hresizing",e.SHRINK_TO_FIT="shrink",e.DRILLTHROUGH_CLOSED="dthclosed",e.LONG_PRESS="long",e.FILTER_CLICK="filter_click",e.RESIZE_COLUMN="resize_c",e.RESIZE_ROW="resize_r",e}();e.GridEvent=n;var i=function(e){function t(t,i){void 0===i&&(i=null);var r=e.call(this,n.MOUSE_CLICK)||this;return r.cell=t,r.element=i,r}return h(t,e),t}(t._Event);e.GridClickEvent=i,i=function(e){function t(t){var i=e.call(this,n.MOUSE_DOUBLE_CLICK)||this;return i.cell=t,i}return h(t,e),t}(t._Event),e.GridDoubleClickEvent=i,i=function(e){function t(t,i,r){void 0===r&&(r=null);var o=e.call(this,n.MOUSE_SINGLE_DOUBLE_CLICK)||this;return o.cell=t,o.isSingleClick=i,o.element=r,o}return h(t,e),t}(t._Event),e.GridSingleDoubleClickEvent=i,i=function(e){function t(t){var i=e.call(this,n.MOUSE_DOWN)||this;return i.cell=t,i}return h(t,e),t}(t._Event),e.GridMouseDownEvent=i,i=function(e){function t(t){var i=e.call(this,n.MOUSE_MOVE)||this;return i.cell=t,i}return h(t,e),t}(t._Event),e.GridMouseMoveEvent=i,i=function(e){function t(t){var i=e.call(this,n.MOUSE_UP)||this;return i.cell=t,i}return h(t,e),t}(t._Event),e.GridMouseUpEvent=i,i=function(e){function t(t,i){var r=e.call(this,n.LONG_PRESS)||this;return r.cell=t,r.coords=i,r}return h(t,e),t}(t._Event),e.GridLongPressEvent=i,i=function(e){function t(t,i,r){void 0===r&&(r=null);var o=e.call(this,n.FILTER_CLICK)||this;return o.hierarchy=t,o.cell=i,o.element=r,o}return h(t,e),t}(t._Event),e.FilterClickEvent=i}(e.grid||(e.grid={}))}(e._view||(e._view={}))}(r||(r={})),function(e){!function(e){!function(e){var t=function(){function e(){}return e.validate=function(t){return t==e.COMPACT||t==e.CLASSIC||t==e.FLAT?t:e.COMPACT},e.COMPACT="compact",e.CLASSIC="classic",e.FLAT="flat",e}();e.GridType=t}(e.grid||(e.grid={}))}(e._view||(e._view={}))}(r||(r={})),function(e){var t,n;t=e._view||(e._view={}),n=function(n){function r(){var e=this;if(null!=r._instance)throw Error("Singleton");return(e=n.call(this,t.PivotView.stage.container)||this).setId("wdr-alert-view"),e.setControls(),e}return h(r,n),r.getInstance=function(){return null==r._instance&&(r._instance=new r),r._instance},r.dispose=function(){r._instance=null},r.prototype.setControls=function(){this.overlay.addClass("wdr-overlay-alert"),this._buttons=[];var e=new i.UIComponentBase("div","wdr-content");this.addChild(e),this._txtTitle=new i.UILabel,this._txtTitle.addClass("wdr-popup-title"),e.addChild(this._txtTitle),this._txtMessage=new i.UILabel,e.addChild(this._txtMessage),this._toolbar=new i.UIComponentBase("div","wdr-ui-btns-row"),e.addChild(this._toolbar),this._icon=new i.UIComponentBase("div","wdr-alert-icon"),this.addChild(this._icon)},r.prototype.openView=function(n,i,r,o,s,a){void 0===n&&(n=""),void 0===i&&(i=""),void 0===r&&(r=e.AlertType.ALERT),void 0===o&&(o=null),void 0===s&&(s=null),void 0===a&&(a=!1),this.clear(),this.setTitle(i),this.setMessage(n),this.setIcon(r),this.setButtons(o,s),t.PivotView.stage.addChild(this),this.isOpaque=a,this.open(),this.centerPosition()},r.prototype.clear=function(){for(this.setTitle(""),this.setMessage("");0<this._buttons.length;)this._buttons.pop().removeFromParent();this.container.toggleClass("wdr-alert",!1),this.container.toggleClass("wdr-confirmation",!1),this.container.toggleClass("wdr-error",!1),this.container.toggleClass("wdr-info",!1),this.container.toggleClass("wdr-question",!1)},r.prototype.setTitle=function(e){this._txtTitle.setSelectable(!1),this._txtTitle.setLabel(e)},r.prototype.setMessage=function(e){this._txtMessage.setLabel(e,!0)},r.prototype.setButtons=function(t,n){var r=this;null==t&&(t=[e.model._labels.Labels.BUTTON_OK]),t.reverse(),null!=n&&n.reverse(),this._handlers=n;for(var o,a=0;a<t.length;a++)(o=new i.UIButton).setLabel(t[a]),o.addEventListener(i.UIButton.CLICK_EVENT,(function(e){return r.buttonClickHandler(e)})),this._buttons.push(o),this.isPrimary(t[a])&&o.addClass("wdr-ui-btn-dark"),this.isPrimary(t[a])&&(s.OSUtil.isMac||s.OSUtil.isIOS)?this._toolbar.addChild(o):this.isPrimary(t[a])?this._toolbar.container.prepend(o.container):this._toolbar.addChild(o)},r.prototype.isPrimary=function(t){switch(t){case e.model._labels.Labels.BUTTON_OK:case e.model._labels.Labels.BUTTON_SAVE:case e.model._labels.Labels.BUTTON_YES:return!0}return!1},r.prototype.buttonClickHandler=function(e){e=e.target;for(var t=-1,n=0;n<this._buttons.length;n++)if(this._buttons[n]==e){t=n;break}0>t||(this.close(),null==this._handlers||null==this._handlers[t])||this._handlers[t]()},r.prototype.setIcon=function(t){this._icon.container.removeAllChildren(),t==e.AlertType.ALERT?this._icon.container.addChild(this.createIconAlert()):t==e.AlertType.CONFIRMATION?this._icon.container.addChild(this.createIconConfirmation()):t==e.AlertType.ERROR?this._icon.container.addChild(this.createIconError()):t==e.AlertType.INFO&&this._icon.container.addChild(this.createIconInfo())},r.prototype.createIconConfirmation=function(){var e=new i.UIElement("span","wdr-circle");return e.addChild(new i.UIElement("span","wdr-ui-icon wdr-icon-notif_confirm")),e},r.prototype.createIconInfo=function(){var e=new i.UIElement("span","wdr-circle");return e.addChild(new i.UIElement("span","wdr-ui-icon wdr-icon-notif_info")),e},r.prototype.createIconAlert=function(){var e=new i.UIElement("span","wdr-triangle-wrap");return e.addChild(new i.UIElement("span","wdr-triangle")),e.addChild(new i.UIElement("span","wdr-ui-icon wdr-icon-notif_warning")),e},r.prototype.createIconError=function(){var e=new i.UIElement("span","wdr-hexagon");return e.addChild(new i.UIElement("span","wdr-ui-icon wdr-icon-notif_arrow")),e},r.prototype.close=function(){n.prototype.close.call(this),this.clear()},r.prototype.onOverlayClick=function(){this.isOpaque||n.prototype.onOverlayClick.call(this)},r}(i.containers.UIPopup),t.AlertView=n}(r||(r={})),function(e){var t,n,r;t=e._view||(e._view={}),n=t.grid||(t.grid={}),r=function(r){function o(){var e=r.call(this,t.PivotView.stage.container)||this;return e.slice=null,e.originalSlice=null,e.columnTuple=null,e.rowTuple=null,e.measure=null,e.START_TABLE_ROW=0,e.START_HEADERS_ROW=0,e.START_HEADERS_COLUMN=0,e.FIRST_DATA_ROW=0,e.FIRST_DATA_COLUMN=0,e.setId("wdr-drillthrough-view"),e.setControls(),e}return h(o,r),o.prototype.setControls=function(){var e=this;this.headerGroup=new i.containers.UIContainer("wdr-header-container"),this.addChild(this.headerGroup),this._txtTitle=new i.UILabel,this._txtTitle.addClass("wdr-popup-title"),this._txtTitle.setSelectable(!1),this.headerGroup.addChild(this._txtTitle),this._btnClose=new i.UIButton,this._btnClose.addClass("wdr-ui-btn-close"),this._btnClose.addEventListener(i.UIButton.CLICK_EVENT,(function(){return e.close()})),this.headerGroup.addChild(this._btnClose),this.detailsGroup=new i.containers.UIContainer("wdr-details-container"),this.addChild(this.detailsGroup),this._txtRowDetails=new i.UILabel,this._txtRowDetails.addClass("wdr-ui-label-light"),this.detailsGroup.addChild(this._txtRowDetails),this._txtColDetails=new i.UILabel,this._txtColDetails.addClass("wdr-ui-label-light"),this.detailsGroup.addChild(this._txtColDetails),this._txtMeasureDetails=new i.UILabel,this._txtMeasureDetails.addClass("wdr-ui-label-light"),this.detailsGroup.addChild(this._txtMeasureDetails),this.sheetGroup=new i.containers.UIContainer("wdr-grid-container"),this.addChild(this.sheetGroup),this.gridLayout=new n.sheet.flat.FlatGridLayout,this.gridLayout.isDrillThrough=!0,this.gridLayout.getDataFunction=function(t,n){return e.getData(t,n)},this.sheetGroup.container.addChild(this.gridLayout)},o.prototype.openView=function(n,i,r,o,s){var a=this;void 0===n&&(n=null),void 0===i&&(i=null),void 0===r&&(r=null),void 0===o&&(o=null),void 0===s&&(s=null),this.dataProvider=n,this.setSlice(i.clone()),this.originalSlice=i,this.rowTuple=o,this.columnTuple=r,this.measure=s,this.tmpShowHeaders=e.model._options.OptionsManager.showHeaders,e.model._options.OptionsManager.showHeaders=!0,this.data=this.dataProvider.drillThrough(this.rowTuple,this.columnTuple,this.measure),this.keys=this.data.shift(),e.model._options.OptionsManager.showDrillThroughConfigurator&&null==this._fieldsView&&(this._fieldsView=new t.config.FieldsView,this._fieldsView.modalParent=t.PivotView.stage.container,this._fieldsView.isForDillThrough=!0,this._fieldsView.containtment=this.gridLayout.element,this._fieldsView.addEventListener(t.config.FieldsView.EVENT_OPEN,(function(){return a.onFieldsViewOpen()})),this._fieldsView.addEventListener(t.config.FieldsView.EVENT_APPLY_SLICE,(function(e){return a.onFieldsViewApplySlice(e)})),this.sheetGroup.addChild(this._fieldsView)),this.gridLayout.addEventListener(t.config.FieldsView.EVENT_APPLY_SLICE,(function(e){return a.onFieldsViewApplySlice(e)})),this.open(),this.redraw()},o.prototype.onDataLoaded=function(t){this.data=t,e.preloader(!1),null!=this.data&&(this.open(),this.redraw())},o.prototype.setSlice=function(e){this.slice=e},o.prototype.redraw=function(){this._txtTitle.setLabel(e.model._labels.Labels.DRILL_THROUGH_TITLE),this._txtRowDetails.setLabel(this.getRowDetails(),!0),this._txtColDetails.setLabel(this.getColDetails(),!0),this._txtMeasureDetails.setLabel(this.getMeasureDetails(),!0),this.setWidth(t.PivotView.stageWidth-80);var n=t.PivotView.stage.container.getHeight(!0)-this.detailsGroup.container.getHeight(!0)-this.headerGroup.container.getHeight(!0)-30-this.container.padding.top-this.container.padding.bottom-40,i=this.getWidth()-2;this.gridLayout.clearAll(),this.gridLayout.resize(i,n),this.gridLayout.width=i,this.gridLayout.height=n,this.gridLayout.freezeRows(1),this.gridLayout.setDataSize(this.data.length,this.slice.flatten().length),this.gridLayout.draw(),this.centerPosition()},o.prototype.close=function(){r.prototype.close.call(this),0==s.nullOrUndefined(this.tmpShowHeaders)&&(e.model._options.OptionsManager.showHeaders=this.tmpShowHeaders),this.dispatchWith(n.GridEvent.DRILLTHROUGH_CLOSED)},o.prototype.getData=function(t,i){if(0==t)return this.getHeaderCell(i);var r,o=new n.vo.GridCell;if(o.isDrillThrough=!0,o.isValue=!0,null==this.data||null==this.data[t-1])return null;if(r=this.slice.flatten(),!(i<this.data[t-1].length))return null;var a=r.getItemAt(i);if(null==a)return null;r=this.keys.indexOf(a.uniqueName),2<a.levels_.length&&(r=this.keys.indexOf(a.levels_.getKeyAt(a.levels_.length-1)));var l=this.getNotNullMemberIdx(t,r);o.hierarchy=a,o.label=this.getMemberFullCaption(a.members.getItemAt(l));var u=this.slice.hierarchyToMeasure(a.uniqueName);return null==u?null:(r=u.getFormat(!0).clone(),this.originalSlice.measures_.keyExists(u.uniqueName)&&null!=(a=a.members.getItemAt(l))&&(o.value=a.levelOrdinal,o.label=u.type==e.data_.types.MeasureType.NUMBER?s.NumberFormatter.format(o.value,r):a.caption),""!=r.textAlign&&o.customize({"text-align":r.textAlign}),o.measure=u,o)},o.prototype.getNotNullMemberIdx=function(e,t){for(;null==this.data[e-1][t];)t--;return this.data[e-1][t]},o.prototype.getMemberFullCaption=function(e){for(var t=[];e&&e.parent;)t.unshift(e.caption),e=e.parent;return t.join(" / ")},o.prototype.getHeaderCell=function(e){var t=new n.vo.GridCell;return t.isDrillThrough=!0,t.isColumnHeader=!0,null==(e=this.slice.flatten().getItemAt(e))?null:(t.label=e.caption,t)},o.prototype.getRowDetails=function(){for(var t,n=[],i=0;i<this.rowTuple.length;i++){if(null==(t=this.originalSlice.rowsOnly.getItemAt(i)))return null;t=t.members.getItemAt(this.rowTuple[i]),n.push(t.caption)}return(n=0<n.length?s.StringUtils.bind(e.model._labels.Labels.DRILL_THROUGH_ROW,n.join(" - ")):"").replace(/<br\s*[\/]?>/gi," ")},o.prototype.getColDetails=function(){for(var t,n=[],i=0;i<this.columnTuple.length;i++){if(null==(t=this.originalSlice.columnsOnly.getItemAt(i)))return null;t=t.members.getItemAt(this.columnTuple[i]),n.push(t.caption)}return(n=0<n.length?s.StringUtils.bind(e.model._labels.Labels.DRILL_THROUGH_COLUMN,n.join(" - ")):"").replace(/<br\s*[\/]?>/gi," ")},o.prototype.getMeasureDetails=function(){var t=this.measure.getFormat().clone(),n=this.dataProvider.getValue(this.rowTuple,this.columnTuple,this.measure);return t=s.NumberFormatter.format(n,t),t=(t=s.StringUtils.bind(e.model._labels.Labels.DRILL_THROUGH_VALUE,this.measure.caption,t)).replace(/<br\s*[\/]?>/gi," "),this.value=n,t},o.prototype.onFieldsViewOpen=function(){this._fieldsView&&this._fieldsView.open(e.data_.Cube.getInstance().structure_,this.slice)},o.prototype.onFieldsViewApplySlice=function(t){t=t.data instanceof e.data_._structure.Slice?t.data:e.data_._structure.Slice.fromObject(e.model.report.SliceValueObject.fromObject(t.data),e.data_.Cube.getInstance().structure_),this.setSlice(t),this.redraw()},o.prototype.exportTo=function(t,n,i){i=this.slice?this.slice.flatten().length:this.data[0]?this.data[0].length:0;var r=this.data?this.data.length+1:0;t==e.model._export.ExportType.HTML&&e.model._export.ExportHTML.run(this,n,i,r),t==e.model._export.ExportType.PDF&&e.model._export.ExportPDF.run(this,n,i,r),t==e.model._export.ExportType.EXCEL&&e.model._export.ExportXLS.run(this,n,i,r)},o.prototype.saveData=function(e,t,n){var i=this;this.timer&&this.timer.running&&this.timer.stop(),null==this.timer&&(this.timer=new s.Timer(1e3,1)),this.timer.addEventListener(s.TimerEvent.TIMER_COMPLETE,(function(){return i.onTimeComplete()})),this.timer.start(),(t=this.getData(e,t))&&t.label!=n&&t.value!=n&&this.dataProvider.save(this.rowTuple,this.columnTuple,t.hierarchy,n,e-1),this.draw()},o.prototype.onTimeComplete=function(){this._txtRowDetails.setLabel(this.getRowDetails(),!0),this._txtColDetails.setLabel(this.getColDetails(),!0),this._txtMeasureDetails.setLabel(this.getMeasureDetails(),!0),this.timer.stop()},o}(i.containers.UIPopup),n.DrillThroughView=r}(r||(r={})),function(e){var t;!function(t){!function(t){var n=function(){function n(){this.value=NaN,this.label="",this.level=NaN,this.sortedDesc=this.sortedAsc=this.sortable=this.drilledDown=this.drilledUp=this.draggable=this.collapsed=this.expanded=this.filtered=this.hasHierarchyName=this.showTooltip=this.isLink=this.isValue=this.isClassicTotalRow=this.isGrandTotalColumn=this.isGrandTotalRow=this.isTotalColumn=this.isTotalRow=this.isMeasureHeader=this.isColumnHeader=this.isRowHeader=this.isFrozen=this.isFilterHeader=this.isCustomized=this.numeric=!1,this.colIdx=this.rowIdx=-1,this.recordId=null,this.isDrillThrough=this.isExpandedArea=this.isEmpty=!1,this.conditions=[],this.url="",this.isKPIStatus=this.isKPITrend=!1,this.activeElementType=t.GridCellElementType.BACKGROUND}return Object.defineProperty(n.prototype,"isTotal",{get:function(){return this.isTotalRow||this.isTotalColumn},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isGrandTotal",{get:function(){return this.isGrandTotalRow||this.isGrandTotalColumn},enumerable:!0,configurable:!0}),n.prototype.getDrillLabel=function(){return this.drilledDown||this.drilledUp?this.hierarchy.levels_.getItemAt(this.member.level.num+1).caption:""},n.prototype.getLabel=function(){if(null!=n.customizeCellFunction){var t=new g;t.clear(),t.tag="div",t.text+=this.label,n.customizeCellFunction(t.node,this.toObject());var i=e.model.XSSCheck.valid(i=t.text)?i:e.model.XSSCheck.validate(i);return t.clear(),(t=document.createElement("div")).innerHTML=i,t.textContent?t.textContent.trim():i}return this.label},n.prototype.customize=function(e){this.isCustomized=!0,null==this.style&&(this.style=new t.CellStyle),this.style.addCSS(e)},n.prototype.customizeWithClass=function(e){this.isCustomized=!0,null==this.style&&(this.style=new t.CellStyle),this.style.addStyle(e),this.style.addCustomStyle(e)},n.prototype.toObject=function(){if(this.obj)return this.obj;var t,n,i=e.model.PivotModel.getInstance(),r=[];if(!e.model._options.OptionsManager.flatView&&(n=this.isColumnHeader&&this.tuple?this.tuple:this.columnTuple))for(var o=i.cube_.slice_?i.cube_.slice_.columnsOnly:new s.AssociativeArray,a=0;a<n.length;a++)t=(t=o.getItemAt(a)).members.getItemAt(n[a]),r.push({caption:t.caption,uniqueName:t.uniqueName,hierarchyCaption:t.hierarchy_.caption,hierarchyUniqueName:t.hierarchy_.uniqueName});if(o=[],!e.model._options.OptionsManager.flatView&&(n=this.isRowHeader&&this.tuple?this.tuple:this.rowTuple))for(i=i.cube_.slice_?i.cube_.slice_.rowsOnly:new s.AssociativeArray,a=0;a<n.length;a++)t=(t=i.getItemAt(a)).members.getItemAt(n[a]),o.push({caption:t.caption,uniqueName:t.uniqueName,hierarchyCaption:t.hierarchy_.caption,hierarchyUniqueName:t.hierarchy_.uniqueName});return n={columnIndex:this.colIdx,columns:r,label:this.label,measure:this.measure?e.data_._structure.GenericMeasure.toObject(this.measure):null,hierarchy:this.hierarchy?e.data_._structure.GenericHierarchy.toObject(this.hierarchy):null,member:this.member?e.data_._structure.GenericMember.toObject(this.member):null,rowIndex:this.rowIdx,rows:o,type:this.isColumnHeader||this.isRowHeader||this.isFilterHeader?"header":"value",value:this.value,recordId:this.recordId,isTotal:this.isTotal,isTotalRow:this.isTotalRow,isTotalColumn:this.isTotalColumn,isClassicTotalRow:this.isClassicTotalRow,isGrandTotal:this.isGrandTotal,isGrandTotalRow:this.isGrandTotalRow,isGrandTotalColumn:this.isGrandTotalColumn,isDrillThrough:this.isDrillThrough},isNaN(this.level)||(n.level=this.level),0<this.conditions.length&&(n.conditions=this.conditions),this.obj=n},n.customizeCellFunction=null,n}();t.GridCell=n}(t.vo||(t.vo={}))}((t=e._view||(e._view={})).grid||(t.grid={}))}(r||(r={})),function(e){!function(e){!function(e){!function(e){var t=function(){function e(){this.styleNames=[],this.customStyleNames=[],this.css={}}return e.prototype.addStyle=function(e){-1==this.styleNames.indexOf(e)&&this.styleNames.push(e)},e.prototype.addCustomStyle=function(e){-1==this.customStyleNames.indexOf(e)&&this.customStyleNames.push(e)},e.prototype.addCSS=function(e){for(var t in e)this.css[t]=e[t]},e.prototype.getClassString=function(){return this.styleNames.join(" ")},e.prototype.getCustomClassString=function(){return this.customStyleNames.join(" ")},e.prototype.getStyleString=function(){var e,t="";for(e in this.css)t+=e+":"+this.css[e]+";";return t},e}();e.CellStyle=t}(e.vo||(e.vo={}))}(e.grid||(e.grid={}))}(e._view||(e._view={}))}(r||(r={})),function(e){!function(e){var t,n,r;n=(t=e.grid||(e.grid={})).vo||(t.vo={}),r=function(){function e(){}return e.getFontStyle=function(t){return 500<t?e.BOLD:e.NORMAL},e.NORMAL="",e.BOLD="Bold",e}(),n.FontStylePDFType=r,r=function(){function t(){}return t.prototype.merge=function(e){this.color=this.color||e.color,this.backgroundColor=this.backgroundColor||e.backgroundColor,this.backgroundImage=this.backgroundImage||e.backgroundImage,this.borderColor=this.borderColor||e.borderColor,this.fontSize=this.fontSize||e.fontSize,this.fontWeight=this.fontWeight||e.fontWeight,this.textAlign=this.textAlign||e.textAlign,this.fontFamily=this.fontFamily||e.fontFamily,this.width=this.width||e.width,this.maxWidth=this.maxWidth||e.maxWidth,this.height=this.height||e.height,this.maxHeight=this.maxHeight||e.maxHeight},t.prototype.clone=function(){var e=new t;return e.color=this.color,e.backgroundColor=this.backgroundColor,e.backgroundImage=this.backgroundImage,e.borderColor=this.borderColor,e.fontSize=this.fontSize,e.fontWeight=this.fontWeight,e.textAlign=this.textAlign,e.fontFamily=this.fontFamily,e.width=this.width,e.maxWidth=this.maxWidth,e.height=this.height,e.maxHeight=this.maxHeight,e},t.fromItem=function(e,n){void 0===n&&(n=null);var i=new t;return(null==n||null!=n&&n.css("color")!=e.css("color"))&&(i.color=e.css("color")),(null==n||null!=n&&n.css("background-color")!=e.css("background-color"))&&(i.backgroundColor=e.css("background-color")),(null==n||null!=n&&n.css("background-image")!=e.css("background-image"))&&(i.backgroundImage=e.css("background-image")),(null==n||null!=n&&n.css("border-color")!=e.css("border-color"))&&(i.borderColor=e.css("border-color")),(null==n||null!=n&&n.css("font-size")!=e.css("font-size"))&&(i.fontSize=parseInt(e.css("font-size"))),(null==n||null!=n&&n.css("font-weight")!=e.css("font-weight"))&&(i.fontWeight=e.css("font-weight")),(null==n||null!=n&&n.css("fill")!=e.css("fill"))&&(i.fill=e.css("fill")),(null==n||null!=n&&n.css("text-align")!=e.css("text-align"))&&(i.textAlign=e.css("text-align")),(null==n||null!=n&&n.css("font-family")!=e.css("font-family"))&&(i.fontFamily=e.css("font-family")),(null==n||null!=n&&n.css("width")!=e.css("width"))&&(i.width=parseInt(e.css("width"))),(null==n||null!=n&&n.css("max-width")!=e.css("max-width"))&&(i.maxWidth=parseInt(e.css("max-width"))),(null==n||null!=n&&n.css("height")!=e.css("height"))&&(i.height=parseInt(e.css("height"))),(null==n||null!=n&&n.css("max-height")!=e.css("max-height"))&&(i.maxHeight=parseInt(e.css("max-height"))),i},t.fromClass=function(n,r,o){void 0===r&&(r=null),void 0===o&&(o=!0);var s=new i.UIElement("div");return s.addClass(n).hide(),n=new i.UIElement("div"),null==r?e.PivotView.stage.container.append(s).append(n):r.append(s).append(n),r=t.fromItem(s,o?n:null),s.remove(),n.remove(),r},t.fromString=function(e){var n=new t,i=0;for(e=e.replace(/ /g,";");-1<(i=e.indexOf(";"));)this.defineStyle(e.substring(0,i),n),e=e.substring(i+1);return n},t.hexToRgb=function(e){return e=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(function(e,t,n,i){return t+t+n+n+i+i})),null==(e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e))?"":"rgb("+parseInt(e[1],16)+","+parseInt(e[2],16)+","+parseInt(e[3],16)+")"},t.defineStyle=function(e,t){-1<e.indexOf("background-color")?t.backgroundColor=this.hexToRgb(e.substring(17,e.length)):-1<e.indexOf("background-image")?t.backgroundImage=e.substring(17,e.length):-1<e.indexOf("border-color")?t.borderColor=this.hexToRgb(e.substring(13,e.length)):-1<e.indexOf("color")?t.color=this.hexToRgb(e.substring(6,e.length)):-1<e.indexOf("font-size")?t.fontSize=parseInt(e.substring(10,e.length)):-1<e.indexOf("fill")?t.fill=this.hexToRgb(e.substring(5,e.length)):-1<e.indexOf("text-align")?t.textAlign=e.substring(11,e.length):-1<e.indexOf("max-width")?t.maxWidth=parseInt(e.substring(10,e.length)):-1<e.indexOf("max-height")?t.maxHeight=parseInt(e.substring(11,e.length)):-1<e.indexOf("width")&&(t.width=parseInt(e.substring(6,e.length)))},t.fromItemToString=function(e,n,i){void 0===n&&(n=null),void 0===i&&(i=null);var r="";null==n&&(n=t.DEFAULT_CSS_PROPERIES);for(var o=0;o<n.length;o++)(null==i||null!=i&&e.css(n[o])!=i.css(n[o]))&&(r+=n[o]+":"+e.css(n[o])+";");return r},t.fromClassToString=function(n,r,o,s){void 0===r&&(r=null),void 0===o&&(o=null),void 0===s&&(s=void 0);var a=new i.UIElement("div");return a.addClass(n).hide(),void 0===s&&(s=new i.UIElement("div")).hide(),null==r?e.PivotView.stage.container.append(a).append(s):r.append(a).append(s),n=t.fromItemToString(a,o,s),a.remove(),null!=s&&s.remove(),n},t.parseRGB=function(e){var t=[],n=e.split("rgb");for(2<n.length&&(e=n[2]),e=(e=e.replace(/[^\d,]/g,"")).split(","),n=0;n<e.length;n++)t[n]=parseInt(e[n]);return null==t[3]&&(t[3]=1),t},t.DEFAULT_CSS_PROPERIES="background-color background-image color font-family font-size font-weight text-align padding-top padding-left padding-right padding-bottom border border-top-width border-top-color border-top-style border-bottom-width border-bottom-color border-bottom-style border-left-width border-left-color border-left-style border-right-width border-right-color border-right-style".split(" "),t}(),n.StyleValueObject=r}(e._view||(e._view={}))}(r||(r={})),function(e){!function(e){!function(e){!function(e){var t=function(){function e(){}return e.TITLE="wdr-pivot-title",e.CELL="wdr-cell",e.CELL_EMPTY="wdr-empty",e.SHEET_HEADER="wdr-sheet-header",e.HEADER="wdr-header",e.HEADER_COLUMN="wdr-header-c",e.HEADER_ROW="wdr-header-r",e.MEASURE_HEADER="wdr-measure-header",e.FILTER_HEADER="wdr-filter-header",e.PAGE_HEADER="wdr-page-header",e.PAGE_HEADER_ITEMS="wdr-page-header-items",e.FILTER_ICON="wdr-filter-icon",e.FILTERED="wdr-filtered",e.FILTERED_ICON="wdr-filtered-icon",e.HEADER_DRAGGABLE="wdr-draggable",e.HEADER_DROPPABLE="wdr-droppable",e.TOTAL="wdr-total",e.GRAND_TOTAL="wdr-grand-total",e.HIERARCHY="wdr-hierarchy-link",e.LINK="wdr-link",e.V_SORT="wdr-v-sort",e.V_SORT_ICON="wdr-v-sort-icon",e.V_SORT_ASC="wdr-v-sort-asc",e.V_SORT_DESC="wdr-v-sort-desc",e.H_SORT="wdr-h-sort",e.H_SORT_ICON="wdr-h-sort-icon",e.H_SORT_ASC="wdr-h-sort-asc",e.H_SORT_DESC="wdr-h-sort-desc",e.SORT_ICON="wdr-sort-icon",e.EXPANDED="wdr-expanded",e.EXPANDED_ICON="wdr-expanded-icon",e.COLLAPSED="wdr-collapsed",e.COLLAPSED_ICON="wdr-collapsed-icon",e.LEVEL="wdr-level-",e.DRILLED_UP="wdr-drilled-up",e.DRILLED_DOWN="wdr-drilled-down",e.ICON="wdr-icon",e}();e.GridStyleName=t}(e.vo||(e.vo={}))}(e.grid||(e.grid={}))}(e._view||(e._view={}))}(r||(r={})),function(e){!function(e){!function(e){!function(e){var t=function(){function e(){}return e.LEFT_ICON="left icon",e.MAIN_ICON="main icon",e.RIGHT_ICON="right icon",e.LABEL="label",e.DRILL="drill",e.LINK="link",e.BACKGROUND="backgroud",e}();e.GridCellElementType=t}(e.vo||(e.vo={}))}(e.grid||(e.grid={}))}(e._view||(e._view={}))}(r||(r={})),function(e){var t,n,i,r;i=(n=(t=e._view||(e._view={})).grid||(t.grid={})).sheet||(n.sheet={}),r=function(){function n(){this._cellMaxHeight=this._cellMaxWidth=this._dataContentHeight=this._dataContentWidth=-1,this.filtersHeight=this.titleHeight=this.scrollLeft=this.scrollTop=this.firstDataColIdx=this.firstDataRowIdx=this.frozenRowsCount=this.frozenColsCount=this.dataRowsCount=this.dataColsCount=this._sheetHeaderHeight=this._sheetHeaderWidth=0,this._scaleTreshold=15e5,this._scaleY=this._scaleX=1,this._colsWidth=[],this._rowsHeight=[],this._colsWidthPending=[],this._rowsHeightPending=[],this._colsWidthExplicit=[],this._rowsHeightExplicit=[],this._scrollBarSize=n.getScrollBarSize(),this._scaleTreshold=n.getScaleTreshold(),this._sheetHeaderWidth=n.SHEET_HEADER_WIDTH,this._sheetHeaderHeight=n.SHEET_HEADER_HEIGHT,this.setDefaults()}return Object.defineProperty(n.prototype,"gridStartY",{get:function(){return this.titleHeight+this.filtersHeight},enumerable:!0,configurable:!0}),n.getScrollBarSize=function(){return s.browserVersion().isMobile||s.OSUtil.isMac?0:s.browserVersion().isEdge?12:17},n.getScaleTreshold=function(){return s.detectBrowser().isChrome||s.detectBrowser().isFirefox?1e7:15e5},n.prototype.clearColSizes=function(e){this._colsWidth.length>e&&(this._colsWidth.length=e),this._colsWidthPending.length>e&&(this._colsWidthPending.length=e),this._colsWidthExplicit.length>e&&(this._colsWidthExplicit.length=e),this._dataContentWidth=-1},n.prototype.clearRowSizes=function(e){this._rowsHeight.length>e&&(this._rowsHeight.length=e),this._rowsHeightPending.length>e&&(this._rowsHeightPending.length=e),this._rowsHeightExplicit.length>e&&(this._rowsHeightExplicit.length=e),this._dataContentHeight=-1},n.prototype.reset=function(){this._colsWidth.length=0,this._rowsHeight.length=0,this._colsWidthPending.length=0,this._rowsHeightPending.length=0,this._colsWidthExplicit.length=0,this._rowsHeightExplicit.length=0,this._dataContentHeight=this._dataContentWidth=-1,this.filtersHeight=this.titleHeight=this.scrollLeft=this.scrollTop=this.firstDataColIdx=this.firstDataRowIdx=this.frozenRowsCount=this.frozenColsCount=this.dataRowsCount=this.dataColsCount=0,this._sheetHeaderWidth=n.SHEET_HEADER_WIDTH,this._sheetHeaderHeight=n.SHEET_HEADER_HEIGHT,this._scaleY=this._scaleX=1,this._cellMaxHeight=this._cellMaxWidth=-1,this.setDefaults()},n.prototype.setDefaults=function(){var e=t.grid.vo.StyleValueObject.fromClass(s.browserVersion().isMobile?"wdr-grid-column-mobile":"wdr-grid-column");n.CELL_WIDTH=isNaN(e.width)?100:Math.max(n.CELL_MIN_WIDTH,e.width),isNaN(e.maxWidth)||(this._cellMaxWidth=Math.max(n.CELL_MIN_WIDTH,e.maxWidth)),e=t.grid.vo.StyleValueObject.fromClass(s.browserVersion().isMobile?"wdr-grid-row-mobile":"wdr-grid-row"),n.CELL_HEIGHT=isNaN(e.height)?30:Math.max(n.CELL_MIN_HEIGHT,e.height),isNaN(e.maxHeight)||(this._cellMaxHeight=Math.max(n.CELL_MIN_HEIGHT,e.maxHeight))},Object.defineProperty(n.prototype,"cellMaxWidth",{get:function(){return this._cellMaxWidth},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"cellMaxHeight",{get:function(){return this._cellMaxHeight},enumerable:!0,configurable:!0}),n.prototype.setScale=function(){var e=this.calcRangeHeight(this.frozenRowsCount,this.frozenRowsCount+this.dataRowsCount);this._scaleY=e>this._scaleTreshold?this._scaleTreshold/e:1,e=this.calcRangeWidth(this.frozenColsCount,this.frozenColsCount+this.dataColsCount),this._scaleX=e>this._scaleTreshold?this._scaleTreshold/e:1},n.prototype.resize=function(e,t,n){void 0===n&&(n=!1),this._layoutWidth=e,this._layoutHeight=t,n&&(this._originalWidth=e,this._originalHeight=t)},Object.defineProperty(n.prototype,"scrollBarWidth",{get:function(){return this.hasVerticalScroll?this._scrollBarSize:0},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"scrollBarHeight",{get:function(){return this.hasHorizontalScroll?this._scrollBarSize:0},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"scrollBarSize",{get:function(){return this._scrollBarSize},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"originalWidth",{get:function(){return this._originalWidth},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"originalHeight",{get:function(){return this._originalHeight},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"layoutWidth",{get:function(){return this._layoutWidth},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"layoutHeight",{get:function(){return this._layoutHeight},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"availableHeight",{get:function(){return this._layoutHeight-this.scrollBarHeight-this.gridStartY},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"availableWidth",{get:function(){return this._layoutWidth-this.scrollBarWidth},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"dataWidth",{get:function(){return this._layoutWidth-this.rowHeadersWidth},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"dataHeight",{get:function(){return this._layoutHeight-this.colHeadersHeight-this.gridStartY},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"maxColsCount",{get:function(){return this.frozenColsCount+this.dataColsCount},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"maxRowsCount",{get:function(){return this.frozenRowsCount+this.dataRowsCount},enumerable:!0,configurable:!0}),n.prototype.getRowHeight=function(e){var t=isNaN(this._rowsHeight[e])?n.CELL_HEIGHT:this._rowsHeight[e];return 0<this.cellMaxHeight&&!this.isRowHeightExplicit(e)?Math.min(this.cellMaxHeight,t):t},n.prototype.setRowHeight=function(e,t,i,r){void 0===i&&(i=!1),void 0===r&&(r=!1),t=Math.max(t,n.CELL_MIN_HEIGHT),i?(isNaN(this._rowsHeightPending[e])||t>this._rowsHeightPending[e])&&(this._rowsHeightPending[e]=t):(this._rowsHeight[e]=t,this._dataContentHeight=-1),r&&(this._rowsHeightExplicit[e]=!0)},n.prototype.resetRowHeight=function(e){this.isRowHeightExplicit(e)&&(delete this._rowsHeight[e],delete this._rowsHeightPending[e],delete this._rowsHeightExplicit[e],this._dataContentHeight=-1)},n.prototype.getColWidth=function(e){if(-1==e)return this.getSheetHeaderWidth();if(e>=this.maxColsCount)return Math.max(100,n.CELL_WIDTH);var t=isNaN(this._colsWidth[e])?n.CELL_WIDTH:this._colsWidth[e];return 0<this.cellMaxWidth&&!this.isColWidthExplicit(e)?Math.min(this.cellMaxWidth,t):t},n.prototype.setColWidth=function(e,t,i,r){void 0===i&&(i=!1),void 0===r&&(r=!1),t=Math.max(t,n.CELL_MIN_WIDTH),i?(isNaN(this._colsWidthPending[e])||t>this._colsWidthPending[e])&&(this._colsWidthPending[e]=t):(-1==e?this._sheetHeaderWidth=t:this._colsWidth[e]=t,this._dataContentWidth=-1),r&&(this._colsWidthExplicit[e]=!0)},n.prototype.resetColWidth=function(e){this.isColWidthExplicit(e)&&(delete this._colsWidth[e],delete this._colsWidthPending[e],delete this._colsWidthExplicit[e],this._dataContentWidth=-1)},n.prototype.isColWidthExplicit=function(e){return!0===this._colsWidthExplicit[e]},n.prototype.isRowHeightExplicit=function(e){return!0===this._rowsHeightExplicit[e]},n.prototype.applyPendingSizes=function(){for(var e=0;e<this._rowsHeightPending.length;e++)if(!this.isRowHeightExplicit(e)){var t=this._rowsHeightPending[e];!isNaN(t)&&t>this.getRowHeight(e)&&this.setRowHeight(e,t)}for(this._rowsHeightPending.length=0,e=-1;e<this._colsWidthPending.length;e++)this.isColWidthExplicit(e)||(t=this._colsWidthPending[e],!isNaN(t)&&t>this.getColWidth(e)&&this.setColWidth(e,t));this._colsWidthPending.length=0},n.prototype.getRowIndexAtPosition=function(e,t){void 0===t&&(t=!1);var n=e/this.dataContentHeight*(this.layoutHeight/this._scaleY-this.layoutHeight)*this._scaleY;if(1!=this._scaleY&&e+n>=this.dataContentHeight-this.layoutHeight){var i=this.maxRowsCount;for(n=this.dataContentHeight;n>e;)n-=this.getRowHeight(i),i--;return i+1}i=t?0:this.frozenRowsCount;for(var r=0;r<e+n;)r+=this.getRowHeight(i)*this._scaleY,i++;return i},n.prototype.getColIndexAtPosition=function(e,t){void 0===t&&(t=!1);var n=e/this.dataContentWidth*(this.layoutWidth/this._scaleX-this.layoutWidth)*this._scaleX;if(1!=this._scaleX&&e+n>=this.dataContentWidth-this.layoutWidth){var i=this.maxColsCount;for(n=this.dataContentWidth;n>e;)n-=this.getColWidth(i),i--;return i+1}i=t?0:this.frozenColsCount;for(var r=0;r<e+n;)r+=this.getColWidth(i)*this._scaleX,i++;return i},n.prototype.getVisibleRowsCount=function(e){for(var t=0,n=0,i=this.dataHeight;n<i;)n+=this.getRowHeight(e+t),t++;return t},n.prototype.getVisibleColsCount=function(e){for(var t=0,n=0,i=this.dataWidth;n<i;)n+=this.getColWidth(e+t),t++;return t},Object.defineProperty(n.prototype,"dataContentWidth",{get:function(){return 0<=this._dataContentWidth?this._dataContentWidth:this._dataContentWidth=1>this._scaleX?this._scaleTreshold:this.calcRangeWidth(this.frozenColsCount,this.frozenColsCount+this.dataColsCount)},enumerable:!0,configurable:!0}),n.prototype.calcRangeWidth=function(e,t){if(e>=t)return 0;var i,r=0,o=0,s=0;for(i in this._colsWidth)s=parseInt(i),!isNaN(s)&&!isNaN(this._colsWidth[s])&&s>=e&&s<t&&(o++,r+=this.getColWidth(s));return r+=((s=Math.min(t,this.maxColsCount))-e-o)*(0<this.cellMaxWidth?Math.min(this.cellMaxWidth,n.CELL_WIDTH):n.CELL_WIDTH),t>=this.maxColsCount&&(r+=(t-this.maxColsCount)*this.getColWidth(t)),r},Object.defineProperty(n.prototype,"dataContentHeight",{get:function(){return 0<=this._dataContentHeight?this._dataContentHeight:this._dataContentHeight=1>this._scaleY?this._scaleTreshold:this.calcRangeHeight(this.frozenRowsCount,this.frozenRowsCount+this.dataRowsCount)},enumerable:!0,configurable:!0}),n.prototype.calcRangeHeight=function(e,t){if(e>=t)return 0;var i,r=0,o=0,s=0;for(i in this._rowsHeight)s=parseInt(i),!isNaN(s)&&!isNaN(this._rowsHeight[s])&&s>=e&&s<t&&(o++,r+=this.getRowHeight(s));return r+(t-e-o)*(0<this.cellMaxHeight?Math.min(this.cellMaxHeight,n.CELL_HEIGHT):n.CELL_HEIGHT)},n.prototype.clearCache=function(){this._dataContentWidth=this._dataContentHeight=-1},Object.defineProperty(n.prototype,"minDataWidth",{get:function(){for(var e=0,t=this.frozenColsCount+this.dataColsCount,i=this.frozenColsCount;i<t;i++)if((e+=this.getColWidth(i))>n.MIN_DATA_WIDTH)return n.MIN_DATA_WIDTH;return e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"rowHeadersWidth",{get:function(){for(var e=this.getSheetHeaderWidth(),t=0;t<this.frozenColsCount;t++)e+=this.getColWidth(t);return e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"colHeadersHeight",{get:function(){for(var e=this.getSheetHeaderHeight(),t=0;t<this.frozenRowsCount;t++)e+=this.getRowHeight(t);return e},enumerable:!0,configurable:!0}),n.prototype.getSheetHeaderWidth=function(){return e.model._options.OptionsManager.showHeaders?this._sheetHeaderWidth:0},n.prototype.getSheetHeaderHeight=function(){return e.model._options.OptionsManager.showHeaders?this._sheetHeaderHeight:0},n.prototype.getColIndexWithUndefinedWidth=function(){for(var e=this.frozenColsCount;e<this.dataColsCount;e++)if(!this.isColWidthDefined(e))return e;return null},n.prototype.getColIndicesWithUndefinedWidth=function(e){for(var t=[],n=this.frozenColsCount;n<this.dataColsCount&&(this.isColWidthDefined(n)||(t.push(n),!(t.length>=e)));n++);return t},n.prototype.isColWidthDefined=function(e,t){return void 0===t&&(t=!0),!isNaN(this._colsWidth[e])||!!t&&!isNaN(this._colsWidthPending[e])},Object.defineProperty(n.prototype,"hasHorizontalScroll",{get:function(){return this.dataContentWidth+(this.dataContentHeight>this.dataHeight?this.scrollBarSize:0)>this.dataWidth},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"hasVerticalScroll",{get:function(){return this.dataContentHeight+(this.dataContentWidth>this.dataWidth?this.scrollBarSize:0)>this.dataHeight},enumerable:!0,configurable:!0}),n.prototype.getRowY=function(t,n){return void 0===n&&(n=!1),(e.model._options.OptionsManager.showHeaders&&n?this.getSheetHeaderHeight():0)+this.calcRangeHeight(n?0:this.frozenRowsCount,t)},n.prototype.getColX=function(t,n){return void 0===n&&(n=!1),(e.model._options.OptionsManager.showHeaders&&n?this.getSheetHeaderWidth():0)+this.calcRangeWidth(n?0:this.frozenColsCount,t)},Object.defineProperty(n.prototype,"canDrawAll",{get:function(){return!s.browserVersion().isEdge&&!s.browserVersion().isMsie&&500>this.maxColsCount*this.maxRowsCount},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"canDrawSmooth",{get:function(){return!s.browserVersion().isEdge&&!s.browserVersion().isMsie&&(this.hasVerticalScroll||this.hasHorizontalScroll)&&1e5>this.maxColsCount*this.maxRowsCount},enumerable:!0,configurable:!0}),n.prototype.getBoundTop=function(e){return void 0===e&&(e=!1),this.canDrawAll?this.frozenRowsCount:e?Math.max(this.frozenRowsCount,this.firstDataRowIdx-n.ROWS_OFFSET):Math.max(this.frozenRowsCount,this.firstDataRowIdx)},n.prototype.getBoundLeft=function(e){return void 0===e&&(e=!1),this.canDrawAll?this.frozenColsCount:e?Math.max(this.frozenColsCount,this.firstDataColIdx-n.COLS_OFFSET):Math.max(this.frozenColsCount,this.firstDataColIdx)},n.prototype.getBoundBottom=function(e){void 0===e&&(e=!1);var t=this.getVisibleRowsCount(this.firstDataRowIdx);return this.canDrawAll?this.hasVerticalScroll?this.maxRowsCount:this.firstDataRowIdx+t:e?Math.min(this.firstDataRowIdx+t+(this.hasVerticalScroll?n.ROWS_OFFSET:0),this.hasVerticalScroll?this.maxRowsCount:Number.MAX_VALUE):this.firstDataRowIdx+t},n.prototype.getBoundRight=function(e){void 0===e&&(e=!1);var t=this.getVisibleColsCount(this.firstDataColIdx);return this.canDrawAll?this.hasHorizontalScroll?this.maxColsCount:this.firstDataColIdx+t:e?Math.min(this.firstDataColIdx+t+(this.hasHorizontalScroll?n.COLS_OFFSET:0),this.hasHorizontalScroll?this.maxColsCount:Number.MAX_VALUE):this.firstDataColIdx+t},n.prototype.isOnColEdge=function(e){return void 0===e&&(e=NaN),isNaN(e)&&(e=this.getBoundRight()),0<this.scrollLeft&&e>=this.maxColsCount},n.prototype.isOnRowEdge=function(e){return void 0===e&&(e=NaN),isNaN(e)&&(e=this.getBoundBottom()),0<this.scrollTop&&e>=this.maxRowsCount},n.prototype.getColEdgeOffset=function(e){return void 0===e&&(e=NaN),isNaN(e)&&(e=this.firstDataColIdx),this.isOnColEdge()?this.dataContentWidth-this.scrollLeft-this.calcRangeWidth(e,this.maxColsCount):0},n.prototype.getRowEdgeOffset=function(e){return void 0===e&&(e=NaN),isNaN(e)&&(e=this.firstDataRowIdx),this.isOnRowEdge()?this.dataContentHeight-this.scrollTop-this.calcRangeHeight(e,this.maxRowsCount):0},n.prototype.getRowIdxByRelativePosition=function(t,n){if(t<this.gridStartY)return NaN;if(e.model._options.OptionsManager.showHeaders&&t<this.gridStartY+this.getSheetHeaderHeight())return-1;var i=0,r=this.gridStartY+this.getSheetHeaderHeight();if(t>this.colHeadersHeight)if(i=this.firstDataRowIdx,r=this.gridStartY+this.colHeadersHeight,n&&i>this.frozenRowsCount){var o=this.scrollTop-this.getRowY(i-1);0<o&&(r-=o,i--)}else n||(t-=this.getRowEdgeOffset());for(;r<t;)r+=this.getRowHeight(i),i++;return i-1},n.prototype.getColIdxByRelativePosition=function(t,n){if(e.model._options.OptionsManager.showHeaders&&t<this.getSheetHeaderWidth())return-1;var i=0,r=this.getSheetHeaderWidth();if(t>this.rowHeadersWidth)if(i=this.firstDataColIdx,r=this.rowHeadersWidth,n&&i>this.frozenColsCount){var o=this.scrollLeft-this.getColX(i-1);0<o&&(r-=o,i--)}else n||(t-=this.getColEdgeOffset());for(;r<t;)r+=this.getColWidth(i),i++;return i-1},n.prototype.getRelativeRowY=function(e,t,n){void 0===n&&(n=!0);var i=0,r=(n?this.gridStartY:0)+this.getSheetHeaderHeight();return e>this.frozenRowsCount&&(r=(n?this.gridStartY:0)+this.colHeadersHeight,(i=this.firstDataRowIdx)<=e&&(r+=t?this.getRowY(this.firstDataRowIdx)-this.scrollTop:this.getRowEdgeOffset())),r+this.calcRangeHeight(i,e)},n.prototype.getRelativeColX=function(e,t){var n=0,i=this.getSheetHeaderWidth();return e>this.frozenColsCount&&(i=this.rowHeadersWidth,(n=this.firstDataColIdx)<=e&&(i+=t?this.getColX(this.firstDataColIdx)-this.scrollLeft:this.getColEdgeOffset())),i+this.calcRangeWidth(n,e)},n.prototype.isRowHeightDefault=function(e){return isNaN(this._rowsHeight[e])},Object.defineProperty(n.prototype,"freeSpaceRight",{get:function(){return this.scrollLeft+this.dataWidth-this.dataContentWidth-this.scrollBarWidth},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"freeSpaceTop",{get:function(){return this.scrollTop+this.dataHeight-this.dataContentHeight-this.scrollBarHeight},enumerable:!0,configurable:!0}),n.ROWS_OFFSET=5,n.COLS_OFFSET=5,n.CELL_WIDTH=100,n.CELL_HEIGHT=30,n.CELL_MIN_WIDTH=50,n.CELL_MIN_HEIGHT=30,n.SHEET_HEADER_HEIGHT=25,n.SHEET_HEADER_WIDTH=25,n.MIN_DATA_WIDTH=200,n}(),i.GridCoords=r}(r||(r={})),function(e){var t;!function(t){var n,r;n=t.sheet||(t.sheet={}),r=function(r){function o(e,t){var n=r.call(this,"div")||this;return n._isDirty=!1,n.cell=new g,n._coords=e,n._getDataFunc=t,n.element.addEventListener("click",(function(e){return n.onMouseEvent(e)})),n}return h(o,r),o.prototype.calculateSizes=function(e){void 0===e&&(e=!1);for(var t=!1,n=this.element.children,i=0;i<n.length;i++)for(var r=n.item(i),o=(t=this.updateRowHeight(r,!0)||t,r=r.children,0);o<r.length;o++)t=this.updateColWidth(r.item(o),e)||t;this._isDirty=t},Object.defineProperty(o.prototype,"isDirty",{get:function(){return this._isDirty},enumerable:!0,configurable:!0}),o.prototype.updateRowHeight=function(e,t){if(void 0===t&&(t=!1),null!=this._coords){var i=!1,r=parseInt(e.getAttribute("data-r"));if(isNaN(r)||this._coords.isRowHeightExplicit(r))return!1;var o=e.clientHeight;return this._coords.getRowHeight(r)<o?(this._coords.setRowHeight(r,Math.round(o+1),t),i=!0):o<=n.GridCoords.CELL_HEIGHT&&this._coords.setRowHeight(r,n.GridCoords.CELL_HEIGHT,t),i}},o.prototype.updateColWidth=function(e,i){if(void 0===i&&(i=!1),null!=this._coords){var r=!1,o=parseInt(e.getAttribute("data-c"));if(isNaN(o)||e.classList.contains(t.vo.GridStyleName.SHEET_HEADER)&&0<=o||this._coords.isColWidthExplicit(o))return!1;var s=e.clientWidth;return this._coords.getColWidth(o)<s?(this._coords.setColWidth(o,Math.round(s+2),i),r=!0):-1!=o&&s<=n.GridCoords.CELL_WIDTH&&this._coords.setColWidth(o,n.GridCoords.CELL_WIDTH,i),r}},o.prototype.createCell=function(n,i,r){void 0===r&&(r=!1);var o=this._getDataFunc?this._getDataFunc(n,i):null;this.cell.clear(),this.cell.tag="div",this.cell.addClass(t.vo.GridStyleName.CELL);var s=n>=this._coords.maxRowsCount||i>=this._coords.maxColsCount;if(!o&&s&&this.cell.addClass(t.vo.GridStyleName.CELL_EMPTY),o&&o.isRowHeader&&(this.cell.addClass(t.vo.GridStyleName.HEADER),this.cell.addClass(t.vo.GridStyleName.HEADER_ROW),this.cell.addClass(t.vo.GridStyleName.LEVEL+o.level)),o&&o.isColumnHeader&&(this.cell.addClass(t.vo.GridStyleName.HEADER),this.cell.addClass(t.vo.GridStyleName.HEADER_COLUMN)),o&&o.isMeasureHeader&&this.cell.addClass(t.vo.GridStyleName.MEASURE_HEADER),o&&o.isTotal&&this.cell.addClass(t.vo.GridStyleName.TOTAL),o&&o.isGrandTotal&&this.cell.addClass(t.vo.GridStyleName.GRAND_TOTAL),o&&o.expanded&&(this.cell.addClass(t.vo.GridStyleName.EXPANDED),this.cell.text+=this.createIcon(t.vo.GridStyleName.EXPANDED_ICON,e.model._labels.Labels.TOOLTIPS_COLLAPSE_ICON)),o&&o.collapsed&&(this.cell.addClass(t.vo.GridStyleName.COLLAPSED),this.cell.text+=this.createIcon(t.vo.GridStyleName.COLLAPSED_ICON,e.model._labels.Labels.TOOLTIPS_EXPAND_ICON)),this.cell.text+=o?o.label:"",o&&(o.drilledUp||o.drilledDown)&&(this.cell.text+='<span class="'+t.vo.GridStyleName.HIERARCHY+'" title="'+(o.drilledUp?e.model._labels.Labels.TOOLTIPS_DRILL_DOWN:e.model._labels.Labels.TOOLTIPS_DRILL_UP)+'">'+o.getDrillLabel()+"</span>",o.drilledUp&&this.cell.addClass(t.vo.GridStyleName.DRILLED_UP),o.drilledDown&&this.cell.addClass(t.vo.GridStyleName.DRILLED_DOWN)),o&&o.isColumnHeader&&(o.sortable&&!o.isEmpty&&(this.cell.text=o.sortedAsc?this.cell.text+this.createIcon([t.vo.GridStyleName.SORT_ICON,t.vo.GridStyleName.V_SORT_ASC],e.model._labels.Labels.TOOLTIPS_SORTED_ASC):o.sortedDesc?this.cell.text+this.createIcon([t.vo.GridStyleName.SORT_ICON,t.vo.GridStyleName.V_SORT_DESC],e.model._labels.Labels.TOOLTIPS_SORTED_DESC):this.cell.text+this.createIcon([t.vo.GridStyleName.SORT_ICON,t.vo.GridStyleName.V_SORT_ICON],e.model._labels.Labels.TOOLTIPS_SORT_ICON)),o.isEmpty&&this.cell.addClass(t.vo.GridStyleName.CELL_EMPTY),o.isEmpty||this.cell.addClass(t.vo.GridStyleName.V_SORT)),o&&o.isRowHeader&&(o.sortable&&!o.isEmpty&&(this.cell.text=o.sortedAsc?this.cell.text+this.createIcon([t.vo.GridStyleName.SORT_ICON,t.vo.GridStyleName.H_SORT_ASC],e.model._labels.Labels.TOOLTIPS_SORTED_ASC):o.sortedDesc?this.cell.text+this.createIcon([t.vo.GridStyleName.SORT_ICON,t.vo.GridStyleName.H_SORT_DESC],e.model._labels.Labels.TOOLTIPS_SORTED_DESC):this.cell.text+this.createIcon([t.vo.GridStyleName.SORT_ICON,t.vo.GridStyleName.H_SORT_ICON],e.model._labels.Labels.TOOLTIPS_SORT_ICON)),this.cell.addClass(t.vo.GridStyleName.H_SORT)),this.cell.attr["data-c"]=i,this.cell.attr["data-r"]=n,0!=i||e.model._options.OptionsManager.showHeaders||(this.cell.style.height=this._coords.getRowHeight(n)+"px"),o&&o.style){for(var a=0;a<o.style.styleNames.length;a++)this.cell.addClass(o.style.styleNames[a]);var l;for(l in a=o.style.css)this.cell.style[l]=a[l]}return this.setCellSize(this.cell,n,i,o&&o.isValue),r&&(this.cell.style.top=this._coords.getRowY(n,n<this._coords.frozenRowsCount)+"px",this.cell.style.left=this._coords.getColX(i,i<this._coords.frozenColsCount)+"px"),null==t.vo.GridCell.customizeCellFunction||s||(null==o&&((o=new t.vo.GridCell).rowIdx=n,o.colIdx=i),t.vo.GridCell.customizeCellFunction(this.cell.node,o.toObject())),this.cell},o.prototype.isCellEmpty=function(e,t){if(this._getDataFunc){var n=this._getDataFunc(e,t);return s.nullOrUndefined(n)||s.nullOrEmpty(n.label)}return!0},o.prototype.setCellSize=function(e,t,n,i){void 0===i&&(i=!1),this._coords.isColWidthExplicit(n)||this._coords.isRowHeightExplicit(t)?(e.style.width=this._coords.getColWidth(n)+"px",e.style.height=this._coords.getRowHeight(t)+"px"):(e.style["min-width"]=this._coords.getColWidth(n)+"px",e.style[i?"height":"min-height"]=this._coords.getRowHeight(t)+"px"),!this._coords.isColWidthExplicit(n)&&0<this._coords.cellMaxWidth&&(e.style["max-width"]=this._coords.cellMaxWidth+"px"),!this._coords.isRowHeightExplicit(t)&&0<this._coords.cellMaxHeight&&(e.style["max-height"]=this._coords.cellMaxHeight+"px")},o.prototype.createIcon=function(e,n){void 0===n&&(n=null),e instanceof Array&&(e=e.join(" "));var i='<i class="'+t.vo.GridStyleName.ICON+" "+e+'"';return n&&(i+='title="'+n+'"'),i+"></i>"},o.prototype.createSheetHeaderCell=function(){return this.cell.clear(),this.cell.tag="div",this.cell.addClass(t.vo.GridStyleName.CELL),this.cell.addClass(t.vo.GridStyleName.SHEET_HEADER),this.cell.style.width=this._coords.getSheetHeaderWidth()+"px",this.cell.style.height=this._coords.getSheetHeaderHeight()+"px",this.cell},o.prototype.createColumnSheetHeaderCell=function(e,n){return void 0===n&&(n=!1),this.cell.clear(),this.cell.tag="div",this.cell.addClass(t.vo.GridStyleName.CELL),this.cell.addClass(t.vo.GridStyleName.SHEET_HEADER),this.cell.text+=e+1,this.cell.style.width=this._coords.getColWidth(e)+"px",0<this._coords.cellMaxWidth&&!this._coords.isColWidthExplicit(e)&&(this.cell.style["max-width"]=this._coords.cellMaxWidth+"px"),this.cell.style.height=this._coords.getSheetHeaderHeight()+"px",this.cell.attr["data-r"]=-1,this.cell.attr["data-c"]=e,n&&(this.cell.style.left=this._coords.getColX(e,!1)+"px"),this.cell},o.prototype.createRowSheetHeaderCell=function(e,n){return void 0===n&&(n=!1),this.cell.clear(),this.cell.tag="div",this.cell.addClass(t.vo.GridStyleName.CELL),this.cell.addClass(t.vo.GridStyleName.SHEET_HEADER),this.cell.text+=e+1,this.cell.style["min-width"]=this._coords.getSheetHeaderWidth()+"px",this.cell.style.height=this._coords.getRowHeight(e)+"px",this.cell.style["line-height"]=this._coords.getRowHeight(e)-2+"px",0<this._coords.cellMaxHeight&&!this._coords.isRowHeightExplicit(e)&&(this.cell.style["max-height"]=this._coords.cellMaxHeight+"px"),this.cell.attr["data-r"]=e,this.cell.attr["data-c"]=-1,n&&(this.cell.style.top=this._coords.getRowY(e,!1)+"px"),this.cell},o.prototype.getCellByPosition=function(e,n){var i=this._coords.getColIndexAtPosition(e)-1,r=this._coords.getRowIndexAtPosition(n)-1,o=null;return null!=this._getDataFunc&&(o=this._getDataFunc(r,i)),null==o&&((o=new t.vo.GridCell).rowIdx=r,o.colIdx=i),o},o.prototype.getCellByElement=function(e){for(;!e.hasClass(t.vo.GridStyleName.CELL);)if(null==(e=e.parent))return null;var n=parseInt(e.attr("data-c"));e=parseInt(e.attr("data-r"));var i=null;return null!=this._getDataFunc&&(i=this._getDataFunc(e,n)),null==i&&((i=new t.vo.GridCell).rowIdx=e,i.colIdx=n),i},o.prototype.onMouseEvent=function(e){var n,r=i.UIElement.convert(e.target),o=this.getCellByElement(r)||this.getCellByPosition(e.offsetX,e.offsetY);switch(e.type){case"click":n=new t.GridClickEvent(o,r)}n&&this.dispatch(n)},o.prototype.dispose=function(){r.prototype.dispose.call(this),this._coords=this._getDataFunc=null},o}(i.UIElement),n.AbstractSheet=r}((t=e._view||(e._view={})).grid||(t.grid={}))}(r||(r={})),function(e){!function(e){!function(e){var t,n;n=function(n){function r(e,i){var r=n.call(this,e,i)||this;return r.SWITCH_TO_SMOOTH_DELAY=1e3,r._isSmooth=!1,r.addClass("wdr-sheet-canvas"),r._scrollPane=new d,r.addChild(r._scrollPane),r._bounds=new t.Bounds,r._boundsSmooth=new t.Bounds,r}return h(r,n),r.prototype.draw=function(){},r.prototype.drawSmooth=function(){},Object.defineProperty(r.prototype,"isSmooth",{get:function(){return this._isSmooth},set:function(e){this._isSmooth!=e&&(this._isSmooth=e,this.dispatchWith(this.isSmooth?r.EVENT_SWITCHED_TO_SMOOTH:r.EVENT_SWITCHED_TO_SIMPLE))},enumerable:!0,configurable:!0}),r.prototype.switchToSimple=function(){0!=this.isSmooth&&(this._bounds.reset(),this._boundsSmooth.reset(),this.draw())},r.prototype.clearBounds=function(){this._bounds.reset()},r.prototype.clearBoundsSmooth=function(){this._boundsSmooth.reset()},r.prototype.clearAllBounds=function(){this.clearBounds(),this.clearBoundsSmooth()},r.prototype.calculateSizes=function(e){void 0===e&&(e=!1);for(var t=!1,n=this._scrollPane.content.element.children,i=0;i<n.length;i++)for(var r=n.item(i),o=(t=this.updateRowHeight(r,e)||t,r=r.children,0);o<r.length;o++){var s=r.item(o);t=this.updateColWidth(s,e)||t}this._isDirty=t},r.prototype.calculateSizesSmooth=function(e){void 0===e&&(e=!1);for(var t=!1,n=this.scrollPane.placeholder.element.children,i=0;i<n.length;i++){var r=n.item(i);t=this.updateColWidth(r,e)||t,t=this.updateRowHeight(r,e)||t}this._isDirty=t},r.prototype.setContentSize=function(){this._scrollPane.content.width=this._width-this._coords.scrollBarWidth,this._scrollPane.content.height=this._height-this._coords.scrollBarHeight},Object.defineProperty(r.prototype,"scrollPane",{get:function(){return this._scrollPane},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"width",{get:function(){return this._width},set:function(e){this._width!=e&&(this.element.style.minWidth=e+"px",this._width=e,this._scrollPane.width=e)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"height",{get:function(){return this._height},set:function(e){this._height!=e&&(this.element.style.height=e+"px",this._height=e,this._scrollPane.height=e)},enumerable:!0,configurable:!0}),r.prototype.onMouseEvent=function(t){var n,r=null,o=null;if(t.target==this.scrollPane.placeholder.element?r=this.getCellByPosition(t.offsetX,t.offsetY):(o=i.UIElement.convert(t.target),r=this.getCellByElement(o)||this.getCellByPosition(t.offsetX,t.offsetY)),null!=r&&null!=o){var s=e.vo.GridCellElementType.BACKGROUND;o.hasClass(e.vo.GridStyleName.HIERARCHY)?s=e.vo.GridCellElementType.DRILL:o.hasClass(e.vo.GridStyleName.EXPANDED_ICON)||o.hasClass(e.vo.GridStyleName.COLLAPSED_ICON)?s=e.vo.GridCellElementType.LEFT_ICON:o.hasClass(e.vo.GridStyleName.SORT_ICON)?s=e.vo.GridCellElementType.RIGHT_ICON:o.hasClass(e.vo.GridStyleName.LINK)&&(s=e.vo.GridCellElementType.LINK),r.activeElementType=s}switch(t.type){case"click":n=new e.GridClickEvent(r,o);break;case"mousedown":n=new e.GridMouseDownEvent(r);break;case"mouseup":n=new e.GridMouseUpEvent(r);break;case"mousemove":n=new e.GridMouseMoveEvent(r)}n&&this.dispatch(n)},r.EVENT_SWITCHED_TO_SMOOTH="switched_to_smooth",r.EVENT_SWITCHED_TO_SIMPLE="switched_to_simple",r}((t=e.sheet||(e.sheet={})).AbstractSheet),t.BaseSheet=n}(e.grid||(e.grid={}))}(e._view||(e._view={}))}(r||(r={})),function(e){!function(e){!function(e){!function(e){var t=function(){function e(e,t,n,i){void 0===e&&(e=0),void 0===t&&(t=0),void 0===n&&(n=0),void 0===i&&(i=0),this.left=e,this.top=t,this.right=n,this.bottom=i}return e.prototype.set=function(e){this.left=e.left,this.top=e.top,this.right=e.right,this.bottom=e.bottom},e.prototype.reset=function(){this.bottom=this.right=this.top=this.left=0},e.prototype.contains=function(e){return this.left<=e.left&&this.top<=e.top&&this.right>=e.right&&this.bottom>=e.bottom},e.prototype.clone=function(){return new e(this.left,this.top,this.right,this.bottom)},e}();e.Bounds=t}(e.sheet||(e.sheet={}))}(e.grid||(e.grid={}))}(e._view||(e._view={}))}(r||(r={})),function(e){var t;!function(t){!function(t){var n=function(t){function n(e){void 0===e&&(e=null);var n=t.call(this,"div","wdr-auto-calculation-bar")||this;return n._listOfAggregations=["average","count","sum"],n.aggregationLables={},n._coordinates={right:-1e3,bottom:1e3},n._aggregationsElements=new s.AssociativeArray,n._listOfAggregations=null==e?n._listOfAggregations:e,n.initAggregationLabels(),n.setControls(),n}return h(n,t),n.prototype.initAggregationLabels=function(){this.aggregationLables.average=e.model._labels.Labels.AVERAGE_CAPTION,this.aggregationLables.sum=e.model._labels.Labels.SUM_CAPTION,this.aggregationLables.count=e.model._labels.Labels.COUNT_CAPTION},Object.defineProperty(n.prototype,"aggregationsElements",{get:function(){return this._aggregationsElements},enumerable:!0,configurable:!0}),n.prototype.setControls=function(){this._relativeContainer=new i.UIElement("div"),this._relativeContainer.css("position","relative"),this.addChild(this.relativeContainer),this._absoluteContainer=new i.UIElement("div","wdr-auto-calculation-bar-conainer"),this.absoluteContainer.css("position","absolute"),this._relativeContainer.addChild(this.absoluteContainer);for(var e=null,t=0;t<this.listOfAggregations.length;t++)(e=new r).setAggregationLabel(this.aggregationLables[this.listOfAggregations[t]]),this.absoluteContainer.addChild(e),this.aggregationsElements.addItem(this.listOfAggregations[t],e)},n.prototype.isCoordinationChanged=function(){return-1e3!=this._coordinates.right&&1e3!=this._coordinates.bottom},n.prototype.setValue=function(e,t){this.aggregationsElements.getItem(e).setAggregationResult(t)},n.prototype.hideAggregationElement=function(e){this.aggregationsElements.getItem(e).hide()},Object.defineProperty(n.prototype,"absoluteContainer",{get:function(){return this._absoluteContainer},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"relativeContainer",{get:function(){return this._relativeContainer},enumerable:!0,configurable:!0}),n.prototype.makeAggregationsVissible=function(){for(var e=null,t=0;t<this.aggregationsElements.length;t++)(e=this.aggregationsElements.getItemAt(t)).visible||e.show()},n.prototype.isAllAggregationsHidden=function(){for(var e=0;e<this.aggregationsElements.length;e++)if(this.aggregationsElements.getItemAt(e).visible)return!1;return!0},Object.defineProperty(n.prototype,"coordinates",{get:function(){return this._coordinates},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"listOfAggregations",{get:function(){return this._listOfAggregations},enumerable:!0,configurable:!0}),n.prototype.resetCoordinates=function(){this._coordinates={right:-1e3,bottom:1e3}},n.prototype.clear=function(){for(;0<this.aggregationsElements.length;)this.aggregationsElements.getItemAt(0).dispose(),this.aggregationsElements.removeItemAt(0);this.dispose()},n}(i.UIElement);t.AutoCalculationBar=n;var r=function(e){function t(){var t=e.call(this,"div","wdr-auto-calculation-bar-content")||this;return t.display="inline-block",t.setControls(),t}return h(t,e),t.prototype.setControls=function(){this.aggregationLabel=new i.UIElement("div","wdr-auto-calculation-bar-content-text"),this.addChild(this.aggregationLabel),this.aggregationResult=new i.UIElement("div","wdr-auto-calculation-bar-content-results"),this.addChild(this.aggregationResult)},t.prototype.show=function(){this.element.style.display=this.display},t.prototype.setAggregationLabel=function(e){this.aggregationLabel.text(e+":")},t.prototype.setAggregationResult=function(e){this.aggregationResult.text(e)},t}(i.UIElement);t.AutoCalculationBarContent=r}(t.sheet||(t.sheet={}))}((t=e._view||(e._view={})).grid||(t.grid={}))}(r||(r={})),function(e){var t;!function(t){!function(t){var n=function(){function t(){this._generalMeasure=null}return t.prototype.recalculateAutoCalculationBar=function(t,n){var i=0;this.generalMeasure=this.findGeneralMeasure(n);var r=null==this.generalMeasure?e.model.format.FormatManager.getFormat("").clone():this.generalMeasure.getFormat().clone();r.decimalPlaces=r.decimalPlaces==e.model.format.FormatManager.getDefaultFormat().decimalPlaces?2:r.decimalPlaces;for(var o=0;o<t.listOfAggregations.length;o++)0!=(i=this.calculateSelectedCells(t.listOfAggregations[o],n))?t.setValue(t.listOfAggregations[o],this.getFormatedValue(i,t.listOfAggregations[o],r.clone())):t.hideAggregationElement(t.listOfAggregations[o]);this.generalMeasure=null},t.prototype.getFormatedValue=function(t,n,i){var r="count"==n||null!=this.generalMeasure&&e.data_.consts.AggregationName.isCount(this.generalMeasure.aggregation),o="count"!=n&&null!=this.generalMeasure&&e.data_.consts.AggregationName.isPercent(this.generalMeasure.aggregation),a=null!=this.generalMeasure&&this.generalMeasure.type==e.data_.types.MeasureType.TIME&&e.data_.consts.AggregationName.validForTimeFormatting(this.generalMeasure.aggregation);return i.isPercent="count"!=n&&i.isPercent,i.currencySymbol=null!=this.generalMeasure&&this.generalMeasure.aggregation==e.data_.consts.AggregationName.INDEX?"":i.currencySymbol,a&&!isNaN(t)&&"count"!=n?s.StringUtils.toTime(t):s.NumberFormatter.format(t,i,r,o)},t.prototype.calculateSelectedCells=function(e,t){switch(e){case"sum":return this.calculateSelectedCellsSum(t);case"average":return this.calculateSelectedCellsAverage(t);case"count":return this.calculateSelectedCellsCount(t)}return 0},t.prototype.calculateSelectedCellsSum=function(e){for(var t=0,n=0;n<e.length;n++)t+=e[n].isValue&&!isNaN(e[n].value)&&this.isNumericType(e[n])?e[n].value:0;return t},t.prototype.calculateSelectedCellsAverage=function(e){for(var t=0,n=0,i=0;i<e.length;i++)e[i].isValue&&!isNaN(e[i].value)&&this.isNumericType(e[i])&&(t+=e[i].value,n++);return 0==n?0:t/n},t.prototype.calculateSelectedCellsCount=function(e){for(var t=0,n=0;n<e.length;n++)(e[n].isValue&&!isNaN(e[n].value)||e[n].isDrillThrough&&""!=e[n].label)&&t++;return t},t.prototype.findGeneralMeasure=function(e){for(var t=null,n=0;n<e.length;n++)if(this.isNumericType(e[n])&&null==t&&!s.nullOrUndefined(e[n].measure))t=e[n].measure;else if(this.isNumericType(e[n])&&null!=t&&t.uniqueName!=e[n].measure.uniqueName){t=null;break}return t},t.prototype.isNumericType=function(t){return t.isValue&&null!=t.measure&&(null==t.member||e.data_.types.MeasureType.COUNT!=t.measure.type)&&e.data_.types.MeasureType.DATE!=t.measure.type&&e.data_.types.MeasureType.DATETIME!=t.measure.type||!isNaN(t.value)},Object.defineProperty(t.prototype,"generalMeasure",{get:function(){return this._generalMeasure},set:function(e){this._generalMeasure=e},enumerable:!0,configurable:!0}),t}();t.AutoCalculationManager=n}(t.sheet||(t.sheet={}))}((t=e._view||(e._view={})).grid||(t.grid={}))}(r||(r={})),function(e){!function(e){!function(e){!function(e){var t=function(){function e(e){this.frozenCells=[],this.data=[],this.coords=e}return e.prototype.reset=function(){this.data=[],this.frozenCells=[]},e.prototype.setData=function(e,t,n,i){void 0===i&&(i=!1),n.rowIdx=e,n.colIdx=t,(t<this.coords.frozenColsCount||i)&&(null==this.data[e]&&(this.data[e]=[]),this.data[e][t]=n)},e.prototype.setDataFrozen=function(e,t,n){null==this.frozenCells[e]&&(this.frozenCells[e]=[]),this.frozenCells[e][t]=n},e.prototype.positionFrozenCells=function(e){if(null!=this.frozenCells[e]){for(var t=[],n=!1,i=0;i<this.frozenCells[e].length;i++){if(null!=this.frozenCells[e][i]||!n){var r=this.frozenCells[e][i];null!=r&&(r.colIdx=t.length),t.push(r)}null!=this.frozenCells[e][i]&&(n=!0)}this.frozenCells[e]=t}},e.prototype.cellExists=function(e,t){return void 0===this.data[e]&&(this.data[e]=[]),void 0!==this.data[e][t]},e.prototype.getData=function(e,t,n){if(void 0===n&&(n=!0),0==this.cellExists(e,t)){var i=this.getDataFunction(e,t);if(null!=i&&(i.rowIdx=e,i.colIdx=t),!n)return i;this.data[e][t]=i}return null===this.data[e][t]?void 0:this.data[e][t]},e.prototype.clearDataRow=function(e){if(e<this.coords.frozenRowsCount)for(var t=this.data[e]?this.data[e].length:0,n=1;n<t;n++)this.data[e]&&(this.data[e][n]=null);else this.data[e]&&(this.data[e]=null)},e.prototype.clearDataColumn=function(e){for(var t=this.data.length,n=0;n<t;n++)0==e&&n<this.coords.frozenRowsCount||this.data[n]&&(this.data[n][e]=null)},e.prototype.getDataFrozen=function(e,t){return this.frozenCells[e]&&this.frozenCells[e][t]?this.frozenCells[e][t]:null},e.prototype.clearCell=function(e,t){null!=this.data[e]&&(this.data[e][t]=this.getData(e,t))},e.prototype.dispose=function(){this.reset(),this.getDataFunction=null},e}();e.SheetDataProvider=t}(e.sheet||(e.sheet={}))}(e.grid||(e.grid={}))}(e._view||(e._view={}))}(r||(r={})),function(e){var t;!function(t){!function(t){var n=function(){function n(e){var n=this;this._to=this._from=null,this._isFocused=!1,this.listOfSelectedCells=new s.AssociativeArray,this._rowsSelectedSet={},this._columnsSelectedSet={},this.focusHandler=function(){n._isFocused=!0},this.blurHandler=function(){n._isFocused=!1},this.keydownHandler=function(e){return n.onKeyDown(e)},this.gridLayout=e,this.gridLayout.element.setAttribute("tabindex","0"),this.gridLayout.element.addEventListener("focus",this.focusHandler),this.gridLayout.element.addEventListener("focusin",this.focusHandler),this.gridLayout.element.addEventListener("blur",this.blurHandler),this.gridLayout.element.addEventListener("focusout",this.blurHandler),this.coords=this.gridLayout.coords,this.selectionCanvas=new t.SelectionCanvas(this,this.gridLayout),this.selectedCellsCalculator=new t.AutoCalculationManager,this.keyboardListener=s.KeyboardListener.getInstance(),this.keyboardListener.addEventListener(s.KeyboardEvent.KEY_DOWN,this.keydownHandler)}return n.prototype.dispose=function(){this.gridLayout.element&&this.gridLayout.element.removeEventListener("focus",this.focusHandler),this.gridLayout.element&&this.gridLayout.element.removeEventListener("blur",this.blurHandler),null!=this.listOfSelectedCells&&0<this.listOfSelectedCells.length&&this.clearMultySelect(),this.keyboardListener.removeEventListener(s.KeyboardEvent.KEY_DOWN,this.keydownHandler),this.keyboardListener=this.gridLayout=null,this.selectionCanvas.dispose()},n.prototype.draw=function(){this.selectionCanvas.redraw()},n.prototype.preDraw=function(e,t){this.runSelect(e,t),this.draw()},n.prototype.preDrawHeader=function(e,n){this.selectionCanvas.isCtrlPressed||(null==this.selectionCanvas.selectedHeader&&(this.selectionCanvas.selectedHeader=new t.SelectionCanvasElement(this.gridLayout)),this.selectionCanvas.selectedHeader.cellKey=e.toString()+"|"+n.toString(),this.draw())},n.prototype.select=function(e,t){this.deselect(),this._from=e,this._to=t,this.preDraw(e,t)},n.prototype.runSelect=function(e,n){if(null!=this.selectionCanvas.selectedHeader&&(this.selectionCanvas.selectedHeader.remove(),this.selectionCanvas.selectedHeader=null),!this.selectionCanvas.isCtrlPressed||this.isCoordinatesValid(e,n))if(this.listOfSelectedCells.keyExists(this.composeCellKey(e,n)))null!=(i=this.listOfSelectedCells.getItem(this.composeCellKey(e,n))).rowOverlay&&delete this._rowsSelectedSet[e.y.toString()],null!=i.colOverlay&&delete this._columnsSelectedSet[e.x.toString()],i.remove(),this.listOfSelectedCells.removeItem(this.composeCellKey(e,n));else if(null!=e&&null!=n){var i=new t.SelectionCanvasElement(this.gridLayout);i.cellKey=this.composeCellKey(e,n),this.listOfSelectedCells.addItem(i.cellKey,i)}},n.prototype.clearMultySelect=function(){for(;0<this.listOfSelectedCells.length;)this.listOfSelectedCells.getItemAt(0).remove(),this.listOfSelectedCells.removeItemAt(0);this._rowsSelectedSet={},this._columnsSelectedSet={}},n.prototype.composeCellKey=function(e,t){return e.x.toString()+"|"+e.y.toString()+"|"+t.x.toString()+"|"+t.y.toString()},n.prototype.decomposeCellKey=function(t){var n={};return 4==(t=t.split("|")).length?(n.from=new e._view.grid.sheet.Point(parseInt(t[0]),parseInt(t[1])),n.to=new e._view.grid.sheet.Point(parseInt(t[2]),parseInt(t[3]))):2==t.length&&(n.row=parseInt(t[0]),n.column=parseInt(t[1])),n},n.prototype.isArea=function(e){return!(e=this.decomposeCellKey(e.cellKey)).from.equals(e.to)},n.prototype.isPointInArea=function(e){return this._rowsSelectedSet.hasOwnProperty(e.y.toString())&&this._columnsSelectedSet.hasOwnProperty(e.x.toString())&&this._rowsSelectedSet[e.y.toString()]==t.CellType.AREA&&this._columnsSelectedSet[e.x.toString()]==t.CellType.AREA},n.prototype.isCoordinatesValid=function(e,t){return!(null==e||null==t||!e.equals(t)||this.isPointInArea(e)||this.isPointInArea(t)||0>e.x*e.y||0>t.x*t.y)},n.prototype.selectAll=function(){this.select(new i(0,0),new i(this.coords.getBoundRight(),this.coords.getBoundBottom()))},n.prototype.selectTo=function(e){if(null!=this._from&&!this._from.equals(e)){var t=this._from;this.deselect(),this._from=t,this._to=e,this.preDraw(t,e)}},n.prototype.selectRow=function(e){this.deselect(),this.preDrawHeader(e,-1)},n.prototype.selectColumn=function(e){this.deselect(),this.preDrawHeader(-1,e)},n.prototype.deselect=function(){!this.selectionCanvas.isCtrlPressed&&0<this.listOfSelectedCells.length&&this.clearMultySelect(),null!=this.selectionCanvas.selectedHeader&&(this.selectionCanvas.selectedHeader.remove(),this.selectionCanvas.selectedHeader=null),this._to=this._from=null},n.prototype.clear=function(){this.deselect(),this.draw()},n.prototype.isAutoCalculationBarAvailable=function(){return 1<this.selectedCells.length||null!=this.selectedCells.getItemAt(0)&&this.isArea(this.selectedCells.getItemAt(0))},Object.defineProperty(n.prototype,"selectedCells",{get:function(){return this.listOfSelectedCells},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"to",{get:function(){return this._to},set:function(e){this._to=e},enumerable:!0,configurable:!0}),n.prototype.fromCol=function(e,t){return e&&t?Math.min(e.x,t.x):-1},n.prototype.toCol=function(e,t){return e&&t?Math.max(e.x,t.x):-1},n.prototype.fromRow=function(e,t){return e&&t?Math.min(e.y,t.y):-1},n.prototype.toRow=function(e,t){return e&&t?Math.max(e.y,t.y):-1},n.prototype.move=function(e,t,n){switch(void 0===t&&(t=!1),void 0===n&&(n=!1),e){case 37:this.moveLeft(t,n);break;case 38:this.moveUp(t,n);break;case 39:this.moveRight(t,n);break;case 40:this.moveDown(t,n)}},Object.defineProperty(n.prototype,"rowsSelectedSet",{get:function(){return this._rowsSelectedSet},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"columnsSelectedSet",{get:function(){return this._columnsSelectedSet},enumerable:!0,configurable:!0}),n.prototype.moveLeft=function(e,t){void 0===t&&(t=!1),this.moveHorizontal(-1,t)},n.prototype.moveRight=function(e,t){void 0===t&&(t=!1),this.moveHorizontal(1,t)},n.prototype.moveUp=function(e,t){void 0===t&&(t=!1),this.moveVertical(-1,t)},n.prototype.moveDown=function(e,t){void 0===t&&(t=!1),this.moveVertical(1,t)},n.prototype.moveHorizontal=function(e,t){if(void 0===t&&(t=!1),1==this.listOfSelectedCells.length){var n=(o=this.decomposeCellKey(this.listOfSelectedCells.getItemAt(0).cellKey)).from,r=o.to,o=t?r.x:n.x,s=t?r.x:n.x,a=0;(o=Math.max(0,Math.min(o+e,this.coords.maxColsCount-1)))<this.coords.firstDataColIdx?(a=Math.max(o,this.coords.frozenColsCount),this.gridLayout.scrollToColumn(a)):o>=this.coords.getVisibleColsCount(this.coords.firstDataColIdx)+this.coords.firstDataColIdx-1&&this.gridLayout.scrollToColumn((a=this.coords.firstDataColIdx+(o-s))+1),r=t?r.y:n.y,s=o,this.select(new i(t?n.x:o,n.y),new i(s,r))}},n.prototype.moveVertical=function(e,t){if(void 0===t&&(t=!1),1==this.listOfSelectedCells.length){var n=(o=this.decomposeCellKey(this.listOfSelectedCells.getItemAt(0).cellKey)).from,r=o.to,o=t?r.y:n.y,s=t?r.y:n.y,a=0;(o=Math.max(0,Math.min(o+e,this.coords.maxRowsCount-1)))<this.coords.firstDataRowIdx?(a=Math.max(o,this.coords.frozenRowsCount),this.gridLayout.scrollToRow(a)):o>=this.coords.getVisibleRowsCount(this.coords.firstDataRowIdx)+this.coords.firstDataRowIdx-1&&this.gridLayout.scrollToRow((a=this.coords.firstDataRowIdx+(o-s))+1),s=o,r=t?r.x:n.x,this.select(new i(n.x,t?n.y:o),new i(r,s))}},Object.defineProperty(n.prototype,"autoCalculationManager",{get:function(){return this.selectedCellsCalculator},enumerable:!0,configurable:!0}),n.prototype.onKeyDown=function(e){if(null!=this.keyboardListener&&(this._isFocused||this.keyboardListener.isFocused)){var t=e.ctrlKey||e.metaKey;switch(e.keyCode){case 32:t||this.gridLayout.triggerCellAction(this.gridLayout.selectedCells[0]);break;case 65:t&&this.selectAll();break;case 37:case 38:case 39:case 40:this.move(e.keyCode,e.ctrlKey,e.shiftKey),e.originalEvent.preventDefault()}!t||e.altKey||e.shiftKey||this.keyboardListener.isFocused||this.copy()}},n.prototype.copy=function(){var e="";if(0<this.listOfSelectedCells.length)for(var t=null,n=(t=null,0);n<this.listOfSelectedCells.length;n++)null!=(t=this.listOfSelectedCells.getItemAt(n)).cellElement&&(t=this.decomposeCellKey(t.cellKey),e+=this.copyElement(t.from,t.to),n<this.listOfSelectedCells.length-1&&(e+="\n"));0<e.length&&this.keyboardListener.copy(e)},n.prototype.copyElement=function(e,t){var n="";if(null==e||null==t)return n;var i,r=Math.min(e.x,t.x),o=Math.max(e.x,t.x);i=Math.min(e.y,t.y);for(var s=Math.max(e.y,t.y),a=i;a<=s;a++){for(var l=r;l<=o;l++)l>r&&(n+="\t"),null==(i=this.gridLayout.getCell(a,l,!0,!0))&&null==(i=a<this.coords.firstDataRowIdx&&l>=this.coords.firstDataColIdx?this.gridLayout.getCell(a,l-this.coords.firstDataColIdx+this.coords.frozenColsCount,!0,!0):null)||(n+=null==i?"":i.label);a<s&&(n+="\n")}return n},n}();t.SelectionManager=n;var i=function(){function e(e,t){void 0===e&&(e=0),void 0===t&&(t=0),this.x=e,this.y=t}return e.prototype.equals=function(e){return e.x==this.x&&e.y==this.y},e}();t.Point=i}(t.sheet||(t.sheet={}))}((t=e._view||(e._view={})).grid||(t.grid={}))}(r||(r={})),function(e){var t;!function(t){!function(n){var r=function(){function r(e,t){var i=this;this._started=this.isCtrlPressed=!1,this._calculatedArea=this._selectedHeader=null,this.autoCalculationBarMargin=5,this.scrollbarSize=17,this.mouseEventHandler=function(e){return i.onMouseEvent(e)},this.mouseLeaveHandler=function(e){return i.onMouseLeave(e)},this.manager=e,this.gridLayout=t,this.coords=this.gridLayout.coords,this._calculatedArea=new n.AutoCalculationBar,this._calculatedArea.hide(),this.gridLayout.addChild(this._calculatedArea),this.gridLayout.element.addEventListener("mousedown",this.mouseEventHandler),this.gridLayout.element.addEventListener("mouseup",this.mouseEventHandler)}return Object.defineProperty(r.prototype,"started",{get:function(){return this._started},set:function(e){this._started=e,this.started||(this.gridLayout.element.removeEventListener("mousemove",this.mouseEventHandler),document.removeEventListener("mousemove",this.mouseLeaveHandler))},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"selectedHeader",{get:function(){return this._selectedHeader},set:function(e){this._selectedHeader=e},enumerable:!0,configurable:!0}),r.prototype.onMouseEvent=function(e){if(1==e.which){var n=i.UIElement.convert(e.target);if("mousedown"!=e.type||!(n.hasClass(t.vo.GridStyleName.FILTER_HEADER)||n.hasClass(t.vo.GridStyleName.FILTER_ICON)||n.hasClass(t.vo.GridStyleName.FILTERED_ICON)||null!=n.closest(".wdr-filters"))){var r=this.gridLayout.getOffset();if(n=e.clientX-r.left,r=e.clientY-r.top,!(n>this.coords.availableWidth||r>this.coords.gridStartY+this.coords.availableHeight||(r=this.coords.getRowIdxByRelativePosition(r,this.gridLayout.isSmooth),n=this.coords.getColIdxByRelativePosition(n,this.gridLayout.isSmooth),isNaN(r)||isNaN(n))))switch(this.isCtrlPressed=s.OSUtil.isWin&&e.ctrlKey||s.OSUtil.isMac&&e.metaKey,e.type){case"mousedown":this.onMouseDown(r,n);break;case"mousemove":this.onMouseMove(r,n);break;case"mouseup":this.onMouseUp(r,n)}}}},r.prototype.onMouseLeave=function(e){var t=i.UIElement.convert(this.gridLayout.element),n=e.clientX;e=e.clientY,(n<t.left||e<t.top||n>t.left+this.gridLayout.width||e>t.top+this.gridLayout.height)&&this.stopSelection()},r.prototype.select=function(e,t,i,r){this.started=!1,this.manager.select(new n.Point(t,e),new n.Point(r,i))},r.prototype.stopSelection=function(){this.started=!1},r.prototype.onMouseDown=function(e,t){this.started=!0,this.manager.select(new n.Point(t,e),new n.Point(t,e)),this.gridLayout.element.addEventListener("mousemove",this.mouseEventHandler),s.fmdocument.addEventListener("mousemove",this.mouseLeaveHandler)},r.prototype.onMouseUp=function(e,t){this.started&&(this.started=!1,-1==e?this.manager.selectColumn(t):-1==t?this.manager.selectRow(e):this.manager.selectTo(new n.Point(t,e)))},r.prototype.onMouseMove=function(e,t){this.started&&(!this.manager.to||this.manager.to.x==t&&this.manager.to.y==e||this.manager.selectTo(new n.Point(t,e)))},r.prototype.dispose=function(){this.gridLayout.element&&this.gridLayout.element.removeEventListener("mousedown",this.mouseEventHandler),this.gridLayout.element&&this.gridLayout.element.removeEventListener("mouseup",this.mouseEventHandler),this._calculatedArea.dispose(),this.coords=this.gridLayout=this.manager=null,null!=this.selectedHeader&&(this.selectedHeader.remove(),this.selectedHeader=null)},r.prototype.redraw=function(){var e=null,t=null;this._calculatedArea.resetCoordinates();for(var n=0;n<this.manager.selectedCells.length;n++)e=this.manager.selectedCells.getItemAt(n),t=this.manager.decomposeCellKey(this.manager.selectedCells.getKeyAt(n)),this._redraw(e,t.from,t.to);this._redrawAutoCalculationBar(this._calculatedArea),this.drawHeader(this.selectedHeader)},r.prototype.drawHeader=function(e){if(null!=e){e.hide();var t=this.manager.decomposeCellKey(e.cellKey);-1!=t.row&&this.drawSelectedRow(t.row,e),-1!=t.column&&this.drawSelectedColumn(t.column,e)}},r.prototype._redrawAutoCalculationBar=function(t){if(t.hide(),this.manager.isAutoCalculationBarAvailable()&&e.model._options.OptionsManager.showAutoCalculationBar&&t.isCoordinationChanged()&&null!=e.data_.Cube.getInstance()&&null!=e.data_.Cube.getInstance().structure_&&(t.makeAggregationsVissible(),this.updateAutoCalculationBar(t),!t.isAllAggregationsHidden())){t.show(),t.top=t.coordinates.bottom;for(var n=this.coords.getRelativeColX(this.coords.frozenColsCount,this.gridLayout.isSmooth),i=0,r=0;r<t.aggregationsElements.length;r++)i+=t.aggregationsElements.getItemAt(r).width;t.absoluteContainer.width=i=i+2*this.autoCalculationBarMargin+2*(t.aggregationsElements.length-1)*this.autoCalculationBarMargin,n-t.coordinates.right+i>this.coords.scrollLeft?t.coordinates.right=t.coordinates.left+i:n>t.coordinates.right-i?(t.absoluteContainer.css("left","auto"),t.absoluteContainer.right=0,i=t.coordinates.right-n):t.coordinates.rightRaw>=this.coords.availableWidth&&(t.absoluteContainer.css("left","right"),t.absoluteContainer.left=0,i=0>(i=i-(t.coordinates.rightRaw-this.coords.availableWidth)-1)?0:i),this.coords.gridStartY+this.coords.availableHeight<=t.coordinates.bottom+t.height&&(t.top=t.coordinates.bottom-this.scrollbarSize),t.left=t.coordinates.right-i,t.relativeContainer.width=i,t.width=i}},r.prototype.updateAutoCalculationBar=function(e){this.manager.isAutoCalculationBarAvailable()&&this.manager.autoCalculationManager.recalculateAutoCalculationBar(e,this.gridLayout.selectedCells)},r.prototype._redraw=function(t,n,i){t.hide();var r=Math.min(n.x,i.x),o=Math.min(n.y,i.y),s=Math.max(n.x,i.x);n=Math.max(n.y,i.y),e.model._options.OptionsManager.showHeaders&&this.drawHeaderSelection(r,s,o,n,t),i=this.coords.availableWidth;var a=this.coords.gridStartY+this.coords.availableHeight,l=Math.max(this.coords.gridStartY,this.coords.getRelativeRowY(o,this.gridLayout.isSmooth)-1),u=this.coords.getRelativeRowY(n+1,this.gridLayout.isSmooth),c=Math.min(a,u),h=Math.max(0,this.coords.getRelativeColX(r,this.gridLayout.isSmooth)-1),d=this.coords.getRelativeColX(s+1,this.gridLayout.isSmooth),A=Math.min(i,d),p=c-l,f=A-h;2>=f||2>=p?null!=t.cellElement&&t.cellElement.hide():h<i&&l<a?(null!=t.cellElement&&(t.cellElement.show(),t.cellElement.top=l,t.cellElement.left=h,t.cellElement.width=f,t.cellElement.height=p,this._calculatedArea.coordinates.bottom*this._calculatedArea.coordinates.right<=A*c&&(this._calculatedArea.coordinates.left=h,this._calculatedArea.coordinates.right=A,this._calculatedArea.coordinates.bottom=c,this._calculatedArea.coordinates.rightRaw=d)),o<this.coords.frozenRowsCount&&d>A&&(t.createColFix(),t.colFix.top=l,t.colFix.left=A,t.colFix.width=Math.min(d,this.coords.layoutWidth)-A,t.colFix.height=Math.min(c,this.coords.gridStartY+this.coords.colHeadersHeight)-l,t.colFix.toggleClass("wdr-clear-border-bottom",n>this.coords.frozenRowsCount),t.colFix.toggleClass("wdr-clear-border-right",d>this.coords.layoutWidth),t.colFix.removeClass("wdr-clear-border"),t.colFix.show()),r<this.coords.frozenColsCount&&u>c&&(t.createRowFix(),t.rowFix.top=c,t.rowFix.left=h,t.rowFix.width=Math.min(A,this.coords.rowHeadersWidth)-h,t.rowFix.height=Math.min(u,this.coords.layoutHeight)-c,t.rowFix.toggleClass("wdr-clear-border-bottom",u>this.coords.layoutHeight),t.rowFix.toggleClass("wdr-clear-border-right",s>this.coords.frozenColsCount),t.rowFix.removeClass("wdr-clear-border"),t.rowFix.show()),null!=t.cellElement&&(t.cellElement.toggleClass("wdr-clear-border-right",d>A),t.cellElement.toggleClass("wdr-clear-border-bottom",u>c))):null!=t.cellElement&&t.cellElement.hide()},r.prototype.drawSelectedRow=function(e,t){if(!isNaN(e)){null==t.rowOverlay&&t.createRowOverlay();var n=this.coords.getRelativeRowY(e,this.gridLayout.isSmooth),i=this.coords.getRelativeRowY(e+1,this.gridLayout.isSmooth),r=Math.min(this.coords.gridStartY+this.coords.availableHeight,i);n<this.coords.gridStartY+this.coords.availableHeight?(t.rowOverlay.left=0,t.rowOverlay.top=n,t.rowOverlay.width=this.coords.availableWidth,t.rowOverlay.height=r-n,t.rowOverlay.show(),i>r&&(t.createRowFix(),t.rowFix.top=r,t.rowFix.left=0,t.rowFix.width=this.coords.rowHeadersWidth,t.rowFix.height=Math.min(i,this.coords.layoutHeight)-r,t.rowFix.addClass("wdr-clear-border"),t.rowFix.show())):t.rowOverlay.hide()}},r.prototype.drawSelectedColumn=function(e,t){if(!isNaN(e)){null==t.colOverlay&&t.createColOverlay();var n=this.coords.getRelativeColX(e,this.gridLayout.isSmooth),i=this.coords.getRelativeColX(e+1,this.gridLayout.isSmooth),r=Math.min(this.coords.availableWidth,i);n<this.coords.availableWidth?(t.colOverlay.left=n,t.colOverlay.top=this.coords.gridStartY,t.colOverlay.width=r-n,t.colOverlay.height=this.coords.availableHeight,t.colOverlay.show(),i>r&&(t.createColFix(),t.colFix.top=this.coords.gridStartY,t.colFix.left=r,t.colFix.width=Math.min(i,this.coords.layoutWidth)-r,t.colFix.height=this.coords.colHeadersHeight,t.colFix.addClass("wdr-clear-border"),t.colFix.show())):t.colOverlay.hide()}},r.prototype.drawHeaderSelection=function(e,t,n,i,r){this.processHeaders(e,t,n,i,r),this.drawHeaderColumn(r.colOverlay,e,t),this.drawHeaderRow(r.rowOverlay,n,i)},r.prototype.processHeaders=function(e,t,n,i,r){if(!this.manager.rowsSelectedSet.hasOwnProperty(n.toString())){r.createRowOverlay();for(var s=n;s<=i;s++)this.manager.rowsSelectedSet[s.toString()]=n==i&&e==t?o.ONE_CELL:o.AREA}if(!this.manager.columnsSelectedSet.hasOwnProperty(e.toString()))for(r.createColOverlay(),s=e;s<=t;s++)this.manager.columnsSelectedSet[s.toString()]=n==i&&e==t?o.ONE_CELL:o.AREA},r.prototype.drawHeaderColumn=function(e,t,n){null!=e&&(t=this.coords.getRelativeColX(t,this.gridLayout.isSmooth),n=Math.min(this.coords.layoutWidth,this.coords.getRelativeColX(n+1,this.gridLayout.isSmooth)),t<this.coords.layoutWidth?(e.left=t,e.top=this.coords.gridStartY,e.width=n-t,e.height=this.coords.getSheetHeaderHeight(),e.show()):e.hide())},r.prototype.drawHeaderRow=function(e,t,n){null!=e&&(t=this.coords.getRelativeRowY(t,this.gridLayout.isSmooth),n=Math.min(this.coords.layoutHeight,this.coords.getRelativeRowY(n+1,this.gridLayout.isSmooth)),e.left=0,e.top=t,e.width=this.coords.getSheetHeaderWidth(),e.height=n-t,e.show())},r}();n.SelectionCanvas=r;var o=function(){function e(){}return e.ONE_CELL=1,e.AREA=2,e}();n.CellType=o,r=function(){function e(e){this.gridLayout=this._rowFix=this._colFix=this._rowOverlay=this._colOverlay=this._cellElement=null,this.gridLayout=e,this._cellElement=this.createUIElement()}return e.prototype.createUIElement=function(){var e=new i.UIElement("div","wdr-sheet-selection-canvas");return e.hide(),this.gridLayout.addChild(e),e},e.prototype.createCellElement=function(){null==this._cellElement&&(this._cellElement=this.createUIElement())},e.prototype.createColOverlay=function(){null==this._colOverlay&&(this._colOverlay=this.createUIElement(),this._colOverlay.addClass("wdr-sheet-selection-header"))},e.prototype.createRowOverlay=function(){null==this._rowOverlay&&(this._rowOverlay=this.createUIElement(),this._rowOverlay.addClass("wdr-sheet-selection-header"))},e.prototype.createRowFix=function(){null==this._rowFix&&(this._rowFix=this.createUIElement(),this._rowFix.addClass("wdr-clear-border-top"))},e.prototype.createColFix=function(){null==this._colFix&&(this._colFix=this.createUIElement(),this._colFix.addClass("wdr-clear-border-left"))},Object.defineProperty(e.prototype,"cellKey",{get:function(){return this._cellKey},set:function(e){this._cellKey=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rowFix",{get:function(){return this._rowFix},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"colFix",{get:function(){return this._colFix},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rowOverlay",{get:function(){return this._rowOverlay},set:function(e){this._rowOverlay=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"colOverlay",{get:function(){return this._colOverlay},set:function(e){this._colOverlay=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cellElement",{get:function(){return this._cellElement},set:function(e){this._cellElement=e},enumerable:!0,configurable:!0}),e.prototype.hide=function(){this.colOverlay&&this.colOverlay.hide(),this.rowOverlay&&this.rowOverlay.hide(),this.colFix&&this.colFix.hide(),this.rowFix&&this.rowFix.hide(),this.cellElement&&this.cellElement.hide()},e.prototype.remove=function(){null!=this.cellElement&&(this.cellElement.remove(),this._cellElement=null),null!=this.colOverlay&&(this.colOverlay.remove(),this._colOverlay=null),null!=this.rowOverlay&&(this.rowOverlay.remove(),this._rowOverlay=null),null!=this.colFix&&(this.colFix.remove(),this._colFix=null),null!=this.rowFix&&(this.rowFix.remove(),this._rowFix=null),this.gridLayout=null},e}(),n.SelectionCanvasElement=r}(t.sheet||(t.sheet={}))}((t=e._view||(e._view={})).grid||(t.grid={}))}(r||(r={}));var d=function(e){function t(){var t=e.call(this,"div","wdr-scroll-pane")||this;return t._placeholder=new i.UIElement("div","wdr-scroll-placeholder"),t._content=new i.UIElement("div","wdr-scroll-content"),t.addChild(t._content),t.addChild(t._placeholder),t}return h(t,e),Object.defineProperty(t.prototype,"contentWidth",{get:function(){return this._placeholder.width},set:function(e){this._placeholder.width=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"contentHeight",{get:function(){return this._placeholder.height},set:function(e){this._placeholder.height=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scrollLeft",{get:function(){return this.element.scrollLeft},set:function(e){this.element.scrollLeft=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scrollTop",{get:function(){return this.element.scrollTop},set:function(e){this.element.scrollTop=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"content",{get:function(){return this._content},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"placeholder",{get:function(){return this._placeholder},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"horizontalScroll",{set:function(e){this.element.style.overflowX=e?"scroll":"hidden"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"verticalScroll",{set:function(e){this.element.style.overflowY=e?"scroll":"hidden"},enumerable:!0,configurable:!0}),t}(i.UIElement);!function(e){var t;!function(t){!function(t){var n=function(t){function n(e){var n=t.call(this,e,null)||this;return n._coords=e,n}return h(n,t),n.prototype.draw=function(){var t=[],n=new g;if(e.model._options.OptionsManager.showHeaders){n.tag="div",n.addClass("wdr-row"),n.text+=this.createSheetHeaderCell().toHtml();for(var i=0;i<this._coords.frozenColsCount;i++)n.text+=this.createColumnSheetHeaderCell(i).toHtml();for(t.push(n.toHtml()),i=0;i<this._coords.frozenRowsCount;i++)n.text=this.createRowSheetHeaderCell(i).toHtml(),t.push(n.toHtml())}t=t.join(""),this.element.innerHTML!=t&&this.html(t)},n.prototype.clear=function(){},n}(t.AbstractSheet);t.SheetHeaders=n}(t.sheet||(t.sheet={}))}((t=e._view||(e._view={})).grid||(t.grid={}))}(r||(r={}));var p,f=function(){function e(e){void 0===e&&(e="div"),this.text=this.tag="",this.style={},this.attr={},this.classes=[],this.tag=e}return e.prototype.addClass=function(e){0>this.classes.indexOf(e)&&this.classes.push(e)},e.prototype.toHtml=function(){var e,t="<"+this.tag,n=[];for(e in this.style)n.push(e+":"+this.style[e]);for(var i in 0<n.length&&(t+=' style="'+n.join(";")+';"'),0<this.classes.length&&(t+=' class="'+this.classes.join(" ")+'"'),this.attr)t+=" "+i+'="'+this.attr[i]+'"';return t+">"+(this.text||"")+"</"+this.tag+">"},e}(),g=function(){function e(e){void 0===e&&(e="div"),this._node=new f,this.clear(),this.tag=e}return Object.defineProperty(e.prototype,"node",{get:function(){return this._node},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tag",{get:function(){return this.node.tag},set:function(e){this.node.tag=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this.node.text},set:function(e){this.node.text=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"style",{get:function(){return this.node.style},set:function(e){this.node.style=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"attr",{get:function(){return this.node.attr},set:function(e){this.node.attr=e},enumerable:!0,configurable:!0}),e.prototype.addClass=function(e){this.node.addClass(e)},e.prototype.clear=function(){this.tag="div",this.text="",this.style={},this.attr={},this.node.classes=[]},e.prototype.toHtml=function(e){void 0===e&&(e=!0);var t=this.node.toHtml();return e&&this.clear(),null!=r._view.grid.vo.GridCell.customizeCellFunction&&(t=r.model.XSSCheck.valid(t)?t:r.model.XSSCheck.validate(t)),t},e}();return function(e){!function(e){!function(e){!function(e){var t=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return h(n,t),n.prototype.draw=function(){this.setContentSize();var e=this.getBounds();if(this.isSmooth||this._coords.isOnRowEdge(e.bottom)||this._coords.isOnColEdge(e.right)||!this._bounds.contains(e)){var t=e.clone();if(0!=this._coords.maxColsCount&&(t.right=Math.min(t.right,this._coords.maxColsCount)),0!=this._coords.maxRowsCount&&(t.bottom=Math.min(t.bottom,this._coords.maxRowsCount)),!this.isSmooth||!this._boundsSmooth.contains(t)||!this._coords.canDrawAll&&(e.left>this._coords.frozenColsCount&&e.left<=this._boundsSmooth.left||e.top>this._coords.frozenRowsCount&&e.top<=this._boundsSmooth.top)){this._coords.isOnColEdge(e.right)&&(e.left=Math.max(e.left-1,this._coords.frozenColsCount)),this._coords.isOnRowEdge(e.bottom)&&(e.top=Math.max(e.top-1,this._coords.frozenRowsCount)),t=[];for(var n=new g,i=e.top;i<e.bottom;i++){n.tag="div",n.addClass("wdr-row"),n.attr["data-r"]=i;for(var r=e.left;r<e.right;++r)n.text+=this.createCell(i,r).toHtml();t.push(n.toHtml())}this.scrollPane.placeholder.html(""),this.scrollPane.placeholder.visible=this._coords.hasHorizontalScroll||this._coords.hasVerticalScroll,this.scrollPane.content.html(t.join("")),this.scrollPane.content.show(),t.length=0,this.isSmooth=!1,this._bounds.set(e)}}},n.prototype.adjustScrollPaneOffset=function(){this.scrollPane.content.left=this._coords.getColEdgeOffset(this._bounds.left),this.scrollPane.content.top=this._coords.getRowEdgeOffset(this._bounds.top)},n.prototype.drawSmooth=function(){var e=this.getBounds(!0);if(!(this.isSmooth&&this._coords.canDrawAll&&this._boundsSmooth.contains(e))){this._boundsSmooth=e,e=[];for(var t=this._boundsSmooth.top;t<this._boundsSmooth.bottom;t++){this._coords.getRowHeight(t);for(var n=this._boundsSmooth.left;n<this._boundsSmooth.right;++n)e.push(this.createCell(t,n,!0).toHtml())}this.scrollPane.placeholder.html(e.join("")),this.scrollPane.placeholder.show(),this.scrollPane.content.hide(),this.scrollPane.content.html(""),e=this.getBounds(),this.isSmooth||this._coords.isOnRowEdge(e.bottom)||(this.scrollPane.scrollTop=this._coords.getRowY(this._coords.firstDataRowIdx,!1)),this.isSmooth||this._coords.isOnColEdge(e.right)||(this.scrollPane.scrollLeft=this._coords.getColX(this._coords.firstDataColIdx,!1)),this.isSmooth=!0}},n.prototype.getBounds=function(t){void 0===t&&(t=!1);var n=new e.Bounds;return n.top=this._coords.getBoundTop(t),n.left=this._coords.getBoundLeft(t),n.bottom=this._coords.getBoundBottom(t),n.right=this._coords.getBoundRight(t),n},n.prototype.setContentSize=function(){this.scrollPane.contentWidth=Math.max(this._coords.dataContentWidth,this._coords.dataWidth-this._coords.scrollBarWidth),this.scrollPane.contentHeight=Math.max(this._coords.dataContentHeight,this._coords.dataHeight-this._coords.scrollBarHeight),this.scrollPane.content.right=this._coords.scrollBarWidth,this.scrollPane.content.bottom=this._coords.scrollBarHeight,this.scrollPane.horizontalScroll=this._coords.hasHorizontalScroll,this.scrollPane.verticalScroll=this._coords.hasVerticalScroll},n}(e.BaseSheet);e.DataSheet=t}(e.sheet||(e.sheet={}))}(e.grid||(e.grid={}))}(e._view||(e._view={}))}(r||(r={})),function(e){var t;!function(t){var n,i;i=function(i){function r(){return null!==i&&i.apply(this,arguments)||this}return h(r,i),r.prototype.draw=function(){this.setContentSize();var t=this.getBounds();if(this.isSmooth||this._coords.isOnRowEdge(t.bottom)||!this._bounds.contains(t)){var n=t.clone();if(0!=this._coords.maxRowsCount&&(n.bottom=Math.min(n.bottom,this._coords.maxRowsCount)),!this.isSmooth||!this._boundsSmooth.contains(n)){this._coords.isOnRowEdge(t.bottom)&&(t.top=Math.max(t.top-1,this._coords.frozenRowsCount)),n=[];for(var i=new g,r=t.top;r<t.bottom;r++){i.tag="div",i.addClass("wdr-row"),i.attr["data-r"]=r,e.model._options.OptionsManager.showHeaders&&(i.text+=this.createRowSheetHeaderCell(r).toHtml());for(var o=t.left;o<t.right;++o)i.text+=this.createCell(r,o).toHtml();n.push(i.toHtml())}this.scrollPane.placeholder.html(""),this.scrollPane.placeholder.hide(),this.scrollPane.content.html(n.join("")),this.scrollPane.content.show(),n.length=0,this._isSmooth=!1,this._bounds.set(t)}}},r.prototype.createRowSheetHeaderCell=function(e,t){return void 0===t&&(t=!1),this.cell=i.prototype.createRowSheetHeaderCell.call(this,e,t),t||(this.cell.style["min-height"]=this.cell.style.height,delete this.cell.style.height,delete this.cell.style["line-height"]),this.cell},r.prototype.adjustScrollPaneOffset=function(){this.scrollPane.content.top=this._coords.getRowEdgeOffset(this._bounds.top)},r.prototype.getBounds=function(e){void 0===e&&(e=!1);var t=new n.Bounds;return t.top=this._coords.getBoundTop(e),t.left=0,t.bottom=this._coords.getBoundBottom(e),t.right=this._coords.frozenColsCount,e&&t.bottom==this._coords.maxRowsCount&&t.bottom++,t},r.prototype.drawSmooth=function(){var t=this.getBounds(!0);if(!(this.isSmooth&&this._coords.canDrawAll&&this._boundsSmooth.contains(t))){this._boundsSmooth=t,t=[];for(var n=this._boundsSmooth.top;n<this._boundsSmooth.bottom;n++){e.model._options.OptionsManager.showHeaders&&t.push(this.createRowSheetHeaderCell(n,!0).toHtml());for(var i=this._boundsSmooth.left;i<this._boundsSmooth.right;++i)t.push(this.createCell(n,i,!0).toHtml())}this.scrollPane.placeholder.html(t.join("")),this.scrollPane.content.hide(),this.scrollPane.content.html(""),this.scrollPane.placeholder.show(),this.isSmooth||this._coords.isOnRowEdge(this._bounds.bottom)?this._scrollPane.scrollTop=this._coords.scrollTop:this.scrollPane.scrollTop=this._coords.getRowY(this._coords.firstDataRowIdx,!1),this.isSmooth=!0}},r.prototype.setContentSize=function(){this.scrollPane.contentHeight=this._coords.dataContentHeight+this._coords.scrollBarHeight,this.scrollPane.content.bottom=0,this.scrollPane.scrollTop=this._coords.scrollTop},r.prototype.getCellByPosition=function(e,n){var i=this._coords.getColIndexAtPosition(e,!0)-1,r=this._coords.getRowIndexAtPosition(n)-1,o=this._getDataFunc(r,i);return null==o&&((o=new t.vo.GridCell).rowIdx=r,o.colIdx=i),o},r}((n=t.sheet||(t.sheet={})).BaseSheet),n.RowHeadersSheet=i}((t=e._view||(e._view={})).grid||(t.grid={}))}(r||(r={})),function(e){var t;!function(t){var n,i;i=function(i){function r(){return null!==i&&i.apply(this,arguments)||this}return h(r,i),r.prototype.draw=function(){s.fmClearTimeout(this._bgTimeout),this.setContentSize();var t=this.getBounds();if(this.isSmooth||this._coords.isOnColEdge(t.right)||!this._bounds.contains(t)){var n=t.clone();if(0!=this._coords.maxColsCount&&(n.right=Math.min(n.right,this._coords.maxColsCount)),!this.isSmooth||!this._boundsSmooth.contains(n)){this._coords.isOnColEdge(t.right)&&(t.left=Math.max(t.left-1,this._coords.frozenColsCount)),n=[],e.model._options.OptionsManager.showHeaders&&n.push(this.createSheetHeaders(t));for(var i=new g,r=t.top;r<t.bottom;r++){i.tag="div",i.addClass("wdr-row"),i.attr["data-r"]=r;for(var o=t.left;o<t.right;++o)i.text+=this.createCell(r,o).toHtml();n.push(i.toHtml())}this.scrollPane.placeholder.html(""),this.scrollPane.placeholder.hide(),this.scrollPane.content.html(n.join("")),this.scrollPane.content.show(),n.length=0,this.isSmooth=!1,this._bounds.set(t)}}},r.prototype.adjustScrollPaneOffset=function(){this.scrollPane.content.left=this._coords.getColEdgeOffset(this._bounds.left)},r.prototype.getBounds=function(e){void 0===e&&(e=!1);var t=new n.Bounds;return t.top=0,t.left=this._coords.getBoundLeft(e),t.bottom=this._coords.frozenRowsCount,t.right=this._coords.getBoundRight(e),e&&t.right==this._coords.maxColsCount&&t.right++,t},r.prototype.drawSmooth=function(){var t=this.getBounds(!0);if(!(this.isSmooth&&this._coords.canDrawAll&&this._boundsSmooth.contains(t))){this._boundsSmooth=t,s.fmClearTimeout(this._bgTimeout),t=[];for(var n=this._boundsSmooth.top;n<this._boundsSmooth.bottom;n++)for(var i=this._boundsSmooth.left;i<this._boundsSmooth.right;++i)t.push(this.createCell(n,i,!0).toHtml());n="",e.model._options.OptionsManager.showHeaders&&(n+=this.createSheetHeaders(this._boundsSmooth,!0)),n+=t.join(""),this.scrollPane.placeholder.html(n),this.scrollPane.content.hide(),this.scrollPane.content.html(""),this.scrollPane.placeholder.show(),this.scrollPane.scrollLeft=this.isSmooth||this._coords.isOnColEdge(this._bounds.right)?this._coords.scrollLeft:this._coords.getColX(this._coords.firstDataColIdx,!1),this.isSmooth=!0}},r.prototype.setContentSize=function(){this.scrollPane.contentWidth=this._coords.dataContentWidth+this._coords.scrollBarWidth,this.scrollPane.content.right=0},r.prototype.backgroundProcess=function(){var e=this;s.fmClearTimeout(this._bgTimeout);for(var t=[],n=this._coords.getColIndicesWithUndefinedWidth(50),i=0;i<this._coords.frozenRowsCount;i++)for(var r=0;r<n.length;r++){var o=n[r];this.isCellEmpty(i,o)||t.push(this.createCell(i,o,!0).toHtml())}if(0<t.length){var a=this._scrollPane.placeholder.element,l=a.children.length,u=a.innerHTML;a.innerHTML=u+t.join(),this.requestAnimationFrame((function(){for(;l<a.children.length;l++)e.updateColWidth(a.children.item(l));a.innerHTML=u,e._bgTimeout=s.fmSetTimeout((function(){return e.backgroundProcess()}),500)}))}},r.prototype.createSheetHeaders=function(e,t){void 0===t&&(t=!1);for(var n="",i=e.left;i<e.right;++i)n+=this.createColumnSheetHeaderCell(i,t).toHtml();return t||((i=new g).tag="div",i.addClass("wdr-row"),i.text=n,n=i.toHtml()),n},r.prototype.getCellByPosition=function(e,n){var i=this._coords.getColIndexAtPosition(e)-1,r=this._coords.getRowIndexAtPosition(n,!0)-1,o=this._getDataFunc(r,i);return null==o&&((o=new t.vo.GridCell).rowIdx=r,o.colIdx=i),o},r.prototype.clearDrawings=function(){s.fmClearTimeout(this._bgTimeout)},r.prototype.dispose=function(){this.clearDrawings(),i.prototype.dispose.call(this)},r}((n=t.sheet||(t.sheet={})).BaseSheet),n.ColumnHeadersSheet=i}((t=e._view||(e._view={})).grid||(t.grid={}))}(r||(r={})),function(e){var t,n,r,o;t=e._view||(e._view={}),n=t.grid||(t.grid={}),r=n.sheet||(n.sheet={}),o=function(o){function a(){var e=o.call(this,"div","wdr-grid-layout")||this;return e.smoothTimeout=1e3,e.animationDraws=[],e._isHeadersDirty=!1,e.colsScrollHandler=function(t){return e.onColsScroll(t)},e.rowsScrollHandler=function(t){return e.onRowsScroll(t)},e.dataScrollHandler=function(){return e.onDataScroll()},e.sheetHeaderDbClickHandler=function(t){return e.onSheetHeaderDbClick(t)},e.clicks=0,e.disableSelection(),e._coords=new r.GridCoords,e._dataProvider=new r.SheetDataProvider(e._coords),e._selectionManager=new r.SelectionManager(e),e.setControls(),e}return h(a,o),a.prototype.setControls=function(){this.createTitle(),this.createSheetHeaders(),this.createColsSheet(),this.createRowsSheet(),this.createDataSheet(),this.createResizeHandles()},a.prototype.createTitle=function(){this._title=new i.UILabel,this._title.container.display="block",this._title.setId("wdr-grid-title"),this._title.addClass("wdr-pivot-title"),this._title.setSelectable(!0),this._title.container.css("position","relative"),this._title.hide(),this.addComponent(this._title)},a.prototype.createSheetHeaders=function(){this._sheetHeaders=new r.SheetHeaders(this._coords),this._sheetHeaders.id="wdr-sheet-headers",this.addChild(this._sheetHeaders)},a.prototype.createColsSheet=function(){var e=this;this._colsSheet=new r.ColumnHeadersSheet(this._coords,(function(t,n){return e.getCell(t,n)})),this._colsSheet.id="wdr-cols-sheet",this._colsSheet.scrollPane.element.addEventListener("wheel",this.colsScrollHandler),this._colsSheet.addEventListener(n.GridEvent.MOUSE_CLICK,(function(t){return e.onClick(t)})),this.addChild(this._colsSheet)},a.prototype.createRowsSheet=function(){var e=this;this._rowsSheet=new r.RowHeadersSheet(this._coords,(function(t,n){return e.getCell(t,n)})),this._rowsSheet.id="wdr-rows-sheet",this._rowsSheet.scrollPane.element.addEventListener("wheel",this.rowsScrollHandler),this._rowsSheet.addEventListener(n.GridEvent.MOUSE_CLICK,(function(t){return e.onClick(t)})),this.addChild(this._rowsSheet)},a.prototype.createDataSheet=function(){var e=this;this._dataSheet=new r.DataSheet(this._coords,(function(t,n){return e.getCell(t,n)})),this._dataSheet.id="wdr-data-sheet",this._dataSheet.scrollPane.element.addEventListener("scroll",this.dataScrollHandler,!0),this._dataSheet.addEventListener(r.BaseSheet.EVENT_SWITCHED_TO_SIMPLE,(function(t){return e.onModeSwitched(t)})),this._dataSheet.addEventListener(r.BaseSheet.EVENT_SWITCHED_TO_SMOOTH,(function(t){return e.onModeSwitched(t)})),this._dataSheet.addEventListener(n.GridEvent.MOUSE_CLICK,(function(t){return e.onClick(t)})),this.addChild(this._dataSheet)},a.prototype.createResizeHandles=function(){var e=this;this._colResizeHandles=new r.ColumnResizeHandles(this),this._colResizeHandles.id="wdr-cols-resize",this._colResizeHandles.addEventListener(n.GridEvent.RESIZE_COLUMN,(function(t){return e.onColResize(t)})),this.addChild(this._colResizeHandles),this._rowResizeHandles=new r.RowResizeHandles(this),this._rowResizeHandles.id="wdr-rows-resize",this._rowResizeHandles.addEventListener(n.GridEvent.RESIZE_ROW,(function(t){return e.onRowResize(t)})),this.addChild(this._rowResizeHandles),this.element.addEventListener("dblclick",this.sheetHeaderDbClickHandler)},a.prototype.draw=function(){var e=this;this._coords.clearCache(),this._dataSheet.width&&this._dataSheet.height||this.drawLayout(),this._coords.setScale(),this.adjustScrollPosition()||(s.fmClearTimeout(this._drawSmoothTimer),this.disposeAnimationDraws(),this.animationDraws.push(this.requestAnimationFrame((function(){return e._draw()}))))},a.prototype.disposeAnimationDraws=function(){for(;0<this.animationDraws.length;)this.cancelAnimationFrame(this.animationDraws.pop())},a.prototype._draw=function(){var n=this;t.PivotView.stage.dispatchWith(t.ViewEvent.BEFORE_GRID_DRAW,this,{smooth:!1}),this._coords.applyPendingSizes(),this.drawFirst(),this._isHeadersDirty&&(this.calculateSizesFirst()&&(this._coords.applyPendingSizes(),this._colsSheet.clearBounds(),this._rowsSheet.clearBounds(),this.drawFirst()),this._isHeadersDirty=!1),this.drawLast(),e.model.JavaScriptHandlers.getInstance().dispatch(new e.model.APIEvent(e.model.JavaScriptHandlers.AFTER_GRID_DRAW,{smooth:!1})),this.animationDraws.push(this.requestAnimationFrame((function(){n.drawLayout(),n._selectionManager.draw()}))),this.animationDraws.push(this.requestAnimationFrame((function(){var e=n.calculateSizesAll();e?(n._colsSheet.clearBounds(),n._rowsSheet.clearBounds(),n._dataSheet.clearBounds(),n.draw()):n._coords.canDrawSmooth&&(s.fmClearTimeout(n._drawSmoothTimer),n._drawSmoothTimer=s.fmSetTimeout((function(){return n.drawSmooth()}),n.smoothTimeout)),e||n.makeFieldsDraggable()}))),this.animationDraws.push(this.requestAnimationFrame((function(){t.PivotView.stage.dispatchWith(t.ViewEvent.AFTER_GRID_DRAW,n,{smooth:!1})})))},a.prototype.drawFirst=function(){this._coords.titleHeight=s.nullOrEmpty(e.model._options.OptionsManager.gridTitle)?0:this._title.getHeight(!0),this._colsSheet.draw(),this._colsSheet.adjustScrollPaneOffset(),this._rowsSheet.draw(),this._rowsSheet.adjustScrollPaneOffset()},a.prototype.drawLast=function(){this._sheetHeaders.draw(),this._selectionManager.draw(),this._colResizeHandles.draw(),this._rowResizeHandles.draw(),this._dataSheet.draw(),this._dataSheet.adjustScrollPaneOffset()},a.prototype.calculateSizesFirst=function(){return this._colsSheet.calculateSizes(!0),this._rowsSheet.calculateSizes(!0),this._colsSheet.isDirty||this._rowsSheet.isDirty},a.prototype.calculateSizesAll=function(){return this._dataSheet.calculateSizes(!0),this._colsSheet.calculateSizes(!0),this._rowsSheet.calculateSizes(!0),this._dataSheet.isDirty||this._colsSheet.isDirty||this._rowsSheet.isDirty},a.prototype.drawSmooth=function(){var e=this;this.disposeAnimationDraws(),this.animationDraws.push(this.requestAnimationFrame((function(){return e._drawSmooth()})))},a.prototype._drawSmooth=function(){var n=this;t.PivotView.stage.dispatchWith(t.ViewEvent.BEFORE_GRID_DRAW,this,{smooth:!0}),this._colsSheet.drawSmooth(),this._rowsSheet.drawSmooth(),this._dataSheet.drawSmooth(),e.model.JavaScriptHandlers.getInstance().dispatch(new e.model.APIEvent(e.model.JavaScriptHandlers.AFTER_GRID_DRAW,{smooth:!0})),this.type==r.flat.FlatGridLayout.TYPE&&this.makeFieldsDraggable(),this.animationDraws.push(this.requestAnimationFrame((function(){n._colsSheet.calculateSizesSmooth(!0),n._rowsSheet.calculateSizesSmooth(!0),n._dataSheet.calculateSizesSmooth(!0),(n._colsSheet.isDirty||n._rowsSheet.isDirty||n._dataSheet.isDirty)&&(n._colsSheet.clearBoundsSmooth(),n._rowsSheet.clearBoundsSmooth(),n._dataSheet.clearBoundsSmooth()),n._coords.canDrawAll||n._colsSheet.backgroundProcess()}))),this.animationDraws.push(this.requestAnimationFrame((function(){t.PivotView.stage.dispatchWith(t.ViewEvent.AFTER_GRID_DRAW,n,{smooth:!0})})))},a.prototype.onModeSwitched=function(e){var t=this;e.type==r.BaseSheet.EVENT_SWITCHED_TO_SIMPLE&&this.animationDraws.push(this.requestAnimationFrame((function(){t._colsSheet.switchToSimple(),t._rowsSheet.switchToSimple()})))},a.prototype.onDataScroll=function(){this.setScroll(this._dataSheet.scrollPane.scrollTop,this._dataSheet.scrollPane.scrollLeft)},a.prototype.onRowsScroll=function(e){this.coords.hasVerticalScroll&&(e=e.wheelDeltaY||e.deltaY||e.wheelDelta||0,s.browserVersion().isFirefox&&(e*=-40),s.browserVersion().isMsie&&(e*=-1),isNaN(e)||0==e||(this._dataSheet.scrollPane.scrollTop=this._coords.scrollTop-e))},a.prototype.onColsScroll=function(e){this.coords.hasHorizontalScroll&&(e=e.wheelDeltaX||e.deltaX||0,s.browserVersion().isFirefox&&(e*=-40),s.browserVersion().isMsie&&(e*=-1),0!=e&&(this._dataSheet.scrollPane.scrollLeft=this._coords.scrollLeft-e))},Object.defineProperty(a.prototype,"type",{get:function(){return this._type},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"coords",{get:function(){return this._coords},enumerable:!0,configurable:!0}),a.prototype.drawLayout=function(){this.width=this.coords.layoutWidth,this.height=this.coords.layoutHeight,s.nullOrEmpty(e.model._options.OptionsManager.gridTitle)?this._title.hide():(this._title.setLabel(e.model._options.OptionsManager.gridTitle),this._title.show()),this._colResizeHandles.left=0,this._colResizeHandles.top=this.coords.gridStartY,this._colResizeHandles.right=0,this._colResizeHandles.height=this.coords.getSheetHeaderHeight(),this._rowResizeHandles.left=0,this._rowResizeHandles.top=this.coords.gridStartY,this._rowResizeHandles.bottom=0,this._rowResizeHandles.width=this.coords.getSheetHeaderWidth()},a.prototype.triggerCellAction=function(e){null!=e&&this.dispatch(new n.GridClickEvent(e))},Object.defineProperty(a.prototype,"selectedCells",{get:function(){var e=[];if(0<this.selectionManager.selectedCells.length)for(var t=null,n=0;n<this._selectionManager.selectedCells.length;n++)null!=this._selectionManager.selectedCells.getItemAt(n).cellElement&&(t=this._selectionManager.decomposeCellKey(this._selectionManager.selectedCells.getItemAt(n).cellKey),this.getSelectedCells(e,t.from,t.to));return e},enumerable:!0,configurable:!0}),a.prototype.getSelectedCells=function(e,t,i){var r=null;if(t&&i)for(var o=this._selectionManager.fromRow(t,i);o<=this._selectionManager.toRow(t,i);o++)for(var s=this._selectionManager.fromCol(t,i);s<=this._selectionManager.toCol(t,i);s++)null==(r=this.getCell(o,s,!0,!0))&&((r=new n.vo.GridCell).rowIdx=o,r.colIdx=s),e.push(r)},a.prototype.getCell=function(e,t,n,i){return void 0===i&&(i=!1),n=this._dataProvider.getData(e,t,!i),i&&null==n?this._dataProvider.getDataFrozen(e,t):n},a.prototype.insertCell=function(e,t,n,i){void 0===i&&(i=!1),this._dataProvider.setData(e,t,n,i)},a.prototype.resize=function(e,t){this._coords.resize(e,t,!0)},Object.defineProperty(a.prototype,"getDataFunction",{set:function(e){this._dataProvider.getDataFunction=e},enumerable:!0,configurable:!0}),a.prototype.setDataSize=function(e,t){this._coords.dataRowsCount=e,this._coords.dataColsCount=t},a.prototype.freezeRows=function(e){e!=this._coords.frozenRowsCount&&(this._coords.firstDataRowIdx=e+(this._coords.firstDataRowIdx-this._coords.frozenRowsCount)),this._coords.frozenRowsCount=e},a.prototype.freezeColumns=function(e){e!=this._coords.frozenColsCount&&(this._coords.firstDataColIdx=e+(this._coords.firstDataColIdx-this._coords.frozenColsCount)),this._coords.firstDataColIdx<e&&(this._coords.firstDataColIdx=e),this._coords.frozenColsCount=e},a.prototype.clearAll=function(){this._isHeadersDirty=!0,this._dataProvider.reset(),this._coords.reset(),this._colsSheet.clearAllBounds(),this._rowsSheet.clearAllBounds(),this._dataSheet.clearAllBounds(),this._selectionManager.clear(),this._dataSheet.scrollPane.scrollTop=0,this._dataSheet.scrollPane.scrollLeft=0,this.clearDrawings()},a.prototype.clearData=function(){this._dataProvider.reset(),this._colsSheet.clearAllBounds(),this._rowsSheet.clearAllBounds(),this._dataSheet.clearAllBounds(),this._coords.clearCache()},a.prototype.clearColSizes=function(e){this._isHeadersDirty=!0,this._coords.clearColSizes(e)},a.prototype.clearRowSizes=function(e){this._isHeadersDirty=!0,this._coords.clearRowSizes(e)},a.prototype.select=function(e,t,n,i){this._selectionManager.select(new r.Point(t,e),new r.Point(i,n))},a.prototype.deselect=function(){this._selectionManager.clear()},a.prototype.clearDrawings=function(){this.disposeAnimationDraws(),s.fmClearTimeout(this._drawSmoothTimer),s.fmClearTimeout(this.clickTimeout),this._colsSheet.clearDrawings()},a.prototype.dispose=function(){this._dataProvider.dispose(),this._selectionManager.dispose(),this.clearDrawings(),this._colsSheet.removeAllEventListeners(),this._colsSheet.scrollPane.element&&this._colsSheet.scrollPane.element.removeEventListener("wheel",this.colsScrollHandler),this._colsSheet.dispose(),this._rowsSheet.removeAllEventListeners(),this._rowsSheet.scrollPane.element&&this._rowsSheet.scrollPane.element.removeEventListener("wheel",this.rowsScrollHandler),this._rowsSheet.dispose(),this._dataSheet.removeAllEventListeners(),this._dataSheet.scrollPane.element&&this._dataSheet.scrollPane.element.removeEventListener("scroll",this.dataScrollHandler),this._dataSheet.dispose(),this._colResizeHandles.removeAllEventListeners(),this._colResizeHandles.dispose(),this._rowResizeHandles.removeAllEventListeners(),this._rowResizeHandles.dispose(),this.element&&this.element.removeEventListener("dbclick",this.sheetHeaderDbClickHandler),o.prototype.dispose.call(this)},a.prototype.onClick=function(e){null!=e.cell&&this.dispatch(e),this.onClickForApi(e)},a.prototype.onFilterClick=function(e){this.dispatch(e)},a.prototype.onClickForApi=function(e){var t=this;this.clicks++,1==this.clicks&&(this.clickTimeout=s.fmSetTimeout((function(){if(1==t.clicks){if(e.cell){var i=new n.GridSingleDoubleClickEvent(e.cell,!0,e.element);t.dispatch(i)}}else e.cell&&(i=new n.GridSingleDoubleClickEvent(e.cell,!1,e.element),t.dispatch(i));t.clicks=0}),300))},a.prototype.setScroll=function(e,t){void 0===e&&(e=NaN),void 0===t&&(t=NaN);var n=!1;isNaN(e)||e==this.coords.scrollTop||(this.coords.scrollTop=e,this.coords.firstDataRowIdx=this.coords.getRowIndexAtPosition(e),this._rowsSheet.scrollPane.scrollTop=e,n=!0),isNaN(t)||t==this.coords.scrollLeft||(this.coords.scrollLeft=t,this.coords.firstDataColIdx=this.coords.getColIndexAtPosition(t),this._colsSheet.scrollPane.scrollLeft=t,n=!0),n&&this.draw()},a.prototype.onColResize=function(e){this.dispatch(e),this._coords.applyPendingSizes(),0<e.data.width?this._coords.setColWidth(e.data.colIdx,e.data.width,!1,!0):this._coords.resetColWidth(e.data.colIdx),this.drawAfterResize()},a.prototype.onRowResize=function(e){this.dispatch(e),this._coords.applyPendingSizes(),0<e.data.height?this._coords.setRowHeight(e.data.rowIdx,e.data.height,!1,!0):this._coords.resetRowHeight(e.data.rowIdx),this.drawAfterResize()},a.prototype.onSheetHeaderDbClick=function(t){if(0!=e.model._options.OptionsManager.showHeaders){var i=this.getOffset(),r=t.clientX-i.left;t=t.clientY-i.top,r>this.coords.getSheetHeaderWidth()&&t>this.coords.gridStartY+this.coords.getSheetHeaderHeight()||(t=this.coords.getRowIdxByRelativePosition(t,this.isSmooth),r=this.coords.getColIdxByRelativePosition(r,this.isSmooth),-1!=t||isNaN(r)||this._colResizeHandles.dispatchWith(n.GridEvent.RESIZE_COLUMN,this,{width:-1,colIdx:r}),-1!=r||isNaN(t)||this._rowResizeHandles.dispatchWith(n.GridEvent.RESIZE_ROW,this,{height:-1,rowIdx:t}))}},a.prototype.drawAfterResize=function(){this._colsSheet.clearAllBounds(),this._rowsSheet.clearAllBounds(),this._dataSheet.clearAllBounds(),this.adjustScrollPosition()||this.draw()},a.prototype.adjustScrollPosition=function(){var e=!1;return 0<this._coords.scrollLeft&&this._coords.freeSpaceRight>this._coords.scrollLeft&&(this._dataSheet.scrollPane.scrollLeft=0,e=!0),0<this._coords.scrollTop&&this._coords.freeSpaceTop>this._coords.scrollTop&&(this._dataSheet.scrollPane.scrollTop=0,e=!0),e},a.prototype.getCellByElement=function(e){var t=i.UIElement.convert(e).closest(".wdr-cell");return null!=t?(e=parseInt(t.attr("data-r")),t=parseInt(t.attr("data-c")),this.getCell(e,t,!0,!0)):null},Object.defineProperty(a.prototype,"isSmooth",{get:function(){return this._dataSheet.isSmooth},enumerable:!0,configurable:!0}),a.prototype.scrollToRow=function(e){this._dataSheet.scrollPane.scrollTop=this.coords.getRowY(e)},a.prototype.scrollToColumn=function(e){this._dataSheet.scrollPane.scrollLeft=this.coords.getColX(e)},Object.defineProperty(a.prototype,"dataProvider",{get:function(){return this._dataProvider},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"selectionManager",{get:function(){return this._selectionManager},enumerable:!0,configurable:!0}),a.prototype.resizeColumn=function(e,t){this.coords.setColWidth(e,t,!1,!0)},a.prototype.resizeRow=function(e,t){this.coords.setRowHeight(e,t,!1,!0)},a.prototype.makeFieldsDraggable=function(){var e=this;this.droppable({onDrop:function(t,n,i,r){return e.onDrop(t,n,i,r)},onDragOver:function(t,n,i,r){return e.onDragOver(t,n,i,r)},onDragLeave:function(t,n,i,r){return e.onDragLeave(t,n,i,r)}})},a.prototype.createHeaderDragHelper=function(e){var t=new i.UIElement("span");return t.addClass("wdr-helper"),t.addClass("wdr-draggable"),t.addClass("wdr-header-helper"),t.css("position","absolute"),t.css("z-index",100),t.text(e.element.firstChild.textContent),t},a.prototype.onDragOver=function(e,t,n,r){(e=i.UIElement.convert(r.target)).hasClass("wdr-header-drop-indicator")||this.showIndicator(e,e)},a.prototype.onDragLeave=function(e,t,n,i){this.removeDropIndicator()},a.prototype.onDrop=function(e,t,n,i){},a.prototype.showIndicator=function(e,t){},a.prototype.createDropIndicator=function(){return this._dropIndicator?this._dropIndicator:new i.UIElement("div","wdr-header-drop-indicator")},a.prototype.removeDropIndicator=function(){this._dropIndicator&&(this._dropIndicator.removeFromParent(!0),this._dropIndicator=null)},a}(i.UIElement),r.BaseGridLayout=o}(r||(r={})),function(e){var t;!function(t){var n,i;i=function(n){function i(e){var i=n.call(this,e,null)||this;return i._coords=e,i._hierarchies=[],i.addClass("wdr-filters"),i.addEventListener(t.GridEvent.MOUSE_CLICK,(function(e){return i.onClick(e)})),i}return h(i,n),i.prototype.draw=function(){for(var t=[],n=new g,i=0;i<this._coords.frozenRowsCount;i++){n.tag="div",n.addClass("wdr-row");for(var r=0;r<this._coords.frozenColsCount;r++)if(e.model._options.OptionsManager.showHierarchyCaptions){var o=i-this._coords.frozenRowsCount+this._hierarchies.length;n.text+=this.createFilterCell(i,r,0<=o?this._hierarchies[o]:null).toHtml()}else n.text+=this.createCell(i,r).toHtml();t.push(n.toHtml())}t=t.join(""),this.element.innerHTML!=t&&this.html(t)},i.prototype.createFilterCell=function(n,i,r){var o=this._hierarchies.indexOf(r);return this.cell.clear(),this.cell.tag="div",this.cell.addClass(t.vo.GridStyleName.CELL),this.cell.addClass(t.vo.GridStyleName.HEADER),this.cell.addClass(t.vo.GridStyleName.HEADER_ROW),r?(this.cell.addClass(t.vo.GridStyleName.LEVEL+o),this.cell.text=r.caption,e.model._options.OptionsManager.showFilter&&(this.cell.addClass(t.vo.GridStyleName.FILTER_HEADER),r.hasFilter()&&(this.cell.addClass(t.vo.GridStyleName.FILTERED),this.cell.text+=this.createIcon(t.vo.GridStyleName.FILTERED_ICON,e.model._labels.Labels.TOOLTIPS_FILTERED)),this.cell.attr.title=e.model._labels.Labels.TOOLTIPS_FILTER_ICON,this.cell.text+=this.createIcon(t.vo.GridStyleName.FILTER_ICON))):this.cell.addClass(t.vo.GridStyleName.CELL_EMPTY),this.setCellSize(this.cell,n,i),this.cell.attr["data-c"]=i,this.cell.attr["data-r"]=n,0<=o&&(this.cell.attr["data-h"]=o),this.cell},i.prototype.setHierarchies=function(e){for(var t=this._hierarchies.length=0;t<e.length;t++){var n=e.getItemAt(t);0==n.isMeasures&&this._hierarchies.push(n)}},i.prototype.onClick=function(e){var n=e.element;n.hasClass(t.vo.GridStyleName.FILTER_HEADER)&&(n=parseInt(n.attr("data-h")),isNaN(n)||this.dispatch(new t.FilterClickEvent(this._hierarchies[n],e.cell)))},i.prototype.clear=function(){this._hierarchies.length=0,this.draw()},i}((n=t.sheet||(t.sheet={})).AbstractSheet),n.RowsFilter=i}((t=e._view||(e._view={})).grid||(t.grid={}))}(r||(r={})),function(e){var t;!function(t){var n,i;i=function(n){function i(e){var i=n.call(this,e,null)||this;return i.rowIndex=0,i._coords=e,i._hierarchies=[],i.addClass("wdr-filters"),i.hide(),i.addEventListener(t.GridEvent.MOUSE_CLICK,(function(e){return i.onClick(e)})),i}return h(i,n),i.prototype.draw=function(){if(this.removeAllChildren(),e.model._options.OptionsManager.showHierarchyCaptions){var t=new g("div");t.addClass("wdr-row"),t.style.height=this._coords.getRowHeight(this.rowIndex)+"px";for(var n=0;n<this._hierarchies.length;n++)t.text+=this.createFilterCell(this.rowIndex,n,this._hierarchies[n]).toHtml();this.html(t.toHtml()),0==this._hierarchies.length?this.hide():this.show()}else this.hide()},i.prototype.createFilterCell=function(n,i,r){return this.cell.clear(),this.cell.tag="div",this.cell.addClass(t.vo.GridStyleName.CELL),this.cell.addClass(t.vo.GridStyleName.HEADER),r&&(this.cell.text=r.caption,e.model._options.OptionsManager.showFilter&&(this.cell.addClass(t.vo.GridStyleName.FILTER_HEADER),this.cell.attr.title=e.model._labels.Labels.TOOLTIPS_FILTER_ICON,r.hasFilter()&&(this.cell.addClass(t.vo.GridStyleName.FILTERED),this.cell.text+=this.createIcon(t.vo.GridStyleName.FILTERED_ICON,e.model._labels.Labels.TOOLTIPS_FILTERED)),this.cell.text+=this.createIcon(t.vo.GridStyleName.FILTER_ICON))),this.cell.style["min-height"]=this._coords.getRowHeight(n)+"px",this.cell.attr["data-r"]=n,this.cell.attr["data-h"]=i,this.cell},i.prototype.setHierarchies=function(e){for(var t=this._hierarchies.length=0;t<e.length;t++){var n=e.getItemAt(t);0==n.isMeasures&&this._hierarchies.push(n)}0==this._hierarchies.length?this.hide():this.show()},i.prototype.onClick=function(e){if((e=e.element).hasClass(t.vo.GridStyleName.FILTER_HEADER)){var n=parseInt(e.attr("data-h"));isNaN(n)||this.dispatch(new t.FilterClickEvent(this._hierarchies[n],null,e))}},i.prototype.clear=function(){this._hierarchies.length=0,this.draw()},i}((n=t.sheet||(t.sheet={})).AbstractSheet),n.ColumnsFilter=i}((t=e._view||(e._view={})).grid||(t.grid={}))}(r||(r={})),function(e){var t;!function(t){!function(n){var r=function(n){function r(){var e=n.call(this)||this;return e._hierarchies=[],e.addClass("wdr-ui-hgroup"),e.addClass("wdr-filters"),e.hide(),e}return h(r,n),r.prototype.draw=function(){var t=this;if(this.removeAllChildren(),e.model._options.OptionsManager.showFilter&&e.model._options.OptionsManager.showReportFiltersArea){for(var n=0;n<this._hierarchies.length;n++){var r=new o(this._hierarchies[n],!0);r.container.attr("data-h",n),r.addEventListener(i.UIButton.CLICK_EVENT,(function(e){return t.onClick(e)})),this.addChild(r.container)}0==this._hierarchies.length?this.hide():this.show()}else this.hide()},r.prototype.setHierarchies=function(e){for(var t=this._hierarchies.length=0;t<e.length;t++){var n=e.getItemAt(t);0==n.isMeasures&&this._hierarchies.push(n)}this.draw()},r.prototype.onClick=function(e){this.dispatch(new t.FilterClickEvent((e=e.target).hierarchy,null,e.container))},r.prototype.clear=function(){this._hierarchies.length=0,this.draw()},Object.defineProperty(r.prototype,"isEmpty",{get:function(){return 0==this._hierarchies.length},enumerable:!0,configurable:!0}),r}(i.UIElement);n.PagesFilter=r;var o=function(n){function r(e,r){void 0===r&&(r=!1);var o=n.call(this)||this;return o._isPage=!1,o._hierarchy=e,o._isPage=r,o.setLabel(o._hierarchy.caption),o.removeClass("wdr-ui-btn"),o.addClass(t.vo.GridStyleName.FILTER_HEADER),o.addClass(t.vo.GridStyleName.HEADER),o._filterIcon=new i.UIElement("i",t.vo.GridStyleName.ICON),o._filterIcon.addClass(t.vo.GridStyleName.FILTER_ICON),o.container.append(o._filterIcon),o._filteredIcon=new i.UIElement("i",t.vo.GridStyleName.ICON),o._filteredIcon.addClass(t.vo.GridStyleName.FILTERED_ICON),o.container.append(o._filteredIcon),o.isFiltered=o._hierarchy.hasFilter(),o._isPage&&(o._description=new i.UILabel,o._description.setLabel(o.getFilterDescription()),o._description.addClass("wdr-filter-desc"),o.addChild(o._description)),o}return h(r,n),Object.defineProperty(r.prototype,"hierarchy",{get:function(){return this._hierarchy},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"isFiltered",{get:function(){return this.container.hasClass("wdr-filtered")},set:function(e){this.container.toggleClass("wdr-filtered",e)},enumerable:!0,configurable:!0}),r.prototype.getFilterDescription=function(){var t=e.model._labels.Labels.FILTER_ALL;return this.hierarchy.hasFilter()&&(t=1==this.hierarchy.filter.length?this.hierarchy.filter.getItemAt(0).caption:e.model._labels.Labels.FILTER_MULTIPLE_ITEMS),t},r}(i.UIButton);n.FilterCell=o}(t.sheet||(t.sheet={}))}((t=e._view||(e._view={})).grid||(t.grid={}))}(r||(r={})),function(e){var t;!function(t){var n,i;i=function(i){function r(){var e=i.call(this)||this;return e._type=r.TYPE,e.addClass("wdr-compact-view"),e}return h(r,i),r.prototype.setControls=function(){i.prototype.setControls.call(this),this.createColsFilter(),this.createRowsFilter(),this.createPageFilter()},r.prototype.createColsFilter=function(){var e=this;this._colsFilter=new n.ColumnsFilter(this._coords),this._colsFilter.id="wdr-cols-filter",this._colsFilter.addEventListener(t.GridEvent.FILTER_CLICK,(function(t){return e.onFilterClick(t)})),this.addChild(this._colsFilter)},r.prototype.createRowsFilter=function(){var e=this;this._rowsFilter=new n.RowsFilter(this._coords),this._rowsFilter.id="wdr-rows-filter",this._rowsFilter.addEventListener(t.GridEvent.FILTER_CLICK,(function(t){return e.onFilterClick(t)})),this._rowsFilter.addEventListener(t.GridEvent.MOUSE_CLICK,(function(t){return e.onClick(t)})),this.addChild(this._rowsFilter)},r.prototype.createPageFilter=function(){var e=this;this._pageFilter=new n.PagesFilter,this._pageFilter.id="wdr-page-filter",this._pageFilter.addEventListener(t.GridEvent.FILTER_CLICK,(function(t){return e.onFilterClick(t)})),this.addChild(this._pageFilter)},r.prototype.drawFirst=function(){this._coords.filtersHeight=this._pageFilter.isEmpty?0:this._pageFilter.element.offsetHeight,i.prototype.drawFirst.call(this),this._rowsFilter.draw()},r.prototype.drawLast=function(){i.prototype.drawLast.call(this),this._colsFilter.draw()},r.prototype.calculateSizesFirst=function(){return this._rowsFilter.calculateSizes(!0),i.prototype.calculateSizesFirst.call(this)||this._rowsFilter.isDirty},r.prototype.calculateSizesAll=function(){return this._rowsFilter.calculateSizes(!0),i.prototype.calculateSizesAll.call(this)||this._rowsFilter.isDirty},r.prototype.drawLayout=function(){i.prototype.drawLayout.call(this),this._pageFilter.isEmpty||(this._pageFilter.top=this._coords.titleHeight,this._pageFilter.left=0,this._pageFilter.right=0),this._colResizeHandles.top=this._coords.gridStartY,this._rowResizeHandles.top=this._coords.gridStartY,this._sheetHeaders.top=this._coords.gridStartY,this._sheetHeaders.left=0,this._sheetHeaders.width=this._coords.rowHeadersWidth,this._sheetHeaders.height=this._coords.colHeadersHeight,this._rowsFilter.left=this._coords.getColX(0,!0),this._rowsFilter.top=this._coords.gridStartY+this._coords.getRowY(0,!0),this._colsFilter.top=this._coords.gridStartY+this._coords.getRowY(this._colsFilter.rowIndex,!0),this._colsFilter.left=this._coords.rowHeadersWidth,this._colsFilter.right=Math.max(0,this._coords.layoutWidth-this._coords.getRelativeColX(this._coords.maxColsCount,this.isSmooth)),this._colsSheet.left=this._coords.rowHeadersWidth,this._colsSheet.top=this._coords.gridStartY,this._colsSheet.width=this._coords.dataWidth,this._colsSheet.height=this._coords.layoutHeight-this._coords.gridStartY,this._rowsSheet.left=0,this._rowsSheet.top=this._coords.colHeadersHeight+this._coords.gridStartY,this._rowsSheet.width=this._coords.layoutWidth,this._rowsSheet.height=this._coords.dataHeight,this._dataSheet.left=this._coords.rowHeadersWidth-1,this._dataSheet.top=this._coords.colHeadersHeight+this._coords.gridStartY-1,this._dataSheet.width=this._coords.dataWidth,this._dataSheet.height=this._coords.dataHeight+1},r.prototype.drawAfterResize=function(){i.prototype.drawAfterResize.call(this),this._rowsFilter.draw(),this._colsFilter.draw()},r.prototype.makeFieldsDraggable=function(){var e=this;i.prototype.makeFieldsDraggable.call(this);for(var t={createHelper:function(t){return e.createHeaderDragHelper(t)}},n=this._colsFilter.find(".wdr-header:not(.wdr-empty)",!0),r=0;r<n.length;r++)n[r].draggable(t);for(n=this._rowsFilter.find(".wdr-header:not(.wdr-empty)",!0),r=0;r<n.length;r++)n[r].draggable(t);for(n=this._pageFilter.find(".wdr-header:not(.wdr-empty)",!0),r=0;r<n.length;r++)n[r].draggable(t)},r.prototype.onDrop=function(t,n,i,r){if(null==(i=this.getDropTargetFilter(i)))this.removeDropIndicator();else if(r=this.getDropPosition(i,this._dropIndicator),this.removeDropIndicator(),!isNaN(r)){var o,s=parseInt(t.attr("data-h")),a=t.closest(".wdr-filters");n=e.data_.Cube.getInstance().slice_.clone(),a==this._colsFilter?(o=n.columnsOnly.getItemAt(s),s=n.columns.indexOf(o.uniqueName)):a==this._rowsFilter?(o=n.rowsOnly.getItemAt(s),s=n.rows.indexOf(o.uniqueName)):a==this._pageFilter&&(o=n.pages.getItemAt(s),s=n.pages.indexOf(o.uniqueName)),null==o||i==a&&s==r||(t.hide(),i==a?i==this._colsFilter?n.columns.moveItemAt(s,r):i==this._rowsFilter?n.rows.moveItemAt(s,r):i==this._pageFilter&&n.pages.moveItemAt(s,r):(n.columns.removeItem(o.uniqueName),n.rows.removeItem(o.uniqueName),n.pages.removeItem(o.uniqueName),i==this._colsFilter?n.columns.addItemAt(o.uniqueName,o,r):i==this._rowsFilter?n.rows.addItemAt(o.uniqueName,o,r):i==this._pageFilter&&n.pages.addItemAt(o.uniqueName,o,r)),1<n.columns.length&&n.columns.getItemAt(0).isMeasures&&(t=n.columns.getItemAt(0),n.columns.splice(0,1),n.columns.addItemAt(t.uniqueName,t,n.columns.length)),e.model.PivotModel.getInstance().runQuery(n))}},r.prototype.getDropPosition=function(e,t){return e==this._colsFilter?this.getColumnDropPosition(t):e==this._rowsFilter?this.getRowDropPosition(t):e==this._pageFilter?this.getPageDropPosition(t):NaN},r.prototype.getColumnDropPosition=function(t){var n=e.data_.Cube.getInstance().slice_;return null!=t?(t=t.index())>n.columns.length?n.columns.length:(0<=(n=n.columns.indexOf("[Measures]"))&&n<=t&&0!=t&&t++,t):NaN},r.prototype.getRowDropPosition=function(t){var n=e.data_.Cube.getInstance().slice_;return null!=t?(t=t.parent.hasClass("wdr-filters")?n.rows.length:(t=t.parent.find(".wdr-header"))?parseInt(t.attr("data-h")):0)>n.rows.length?n.rows.length:(0<=(n=n.rows.indexOf("[Measures]"))&&n<=t&&0!=t&&t++,t):NaN},r.prototype.getPageDropPosition=function(t){var n=e.data_.Cube.getInstance().slice_;return null!=t?(t=t.index())>n.columns.length?n.columns.length:t:NaN},r.prototype.getDropTargetFilter=function(e){var t=e.closest(".wdr-filters");if(null==t){var n=e.closest(".wdr-cell");null!=n?(e=parseInt(n.attr("data-r")),n=parseInt(n.attr("data-c")),this.isOverColumns(e,n)?t=this._colsFilter:this.isOverRows(e,n)&&(t=this._rowsFilter)):null!=(n=e.closest(".wdr-resize-handles"))&&("wdr-cols-resize"==n.id?t=this._colsFilter:"wdr-rows-resize"==n.id&&(t=this._rowsFilter))}return t},r.prototype.isOverColumns=function(e,t){return t>=this.coords.frozenColsCount},r.prototype.isOverRows=function(e,t){return t<=this.coords.frozenColsCount},r.prototype.showIndicator=function(e,t){if(null==(e=this.getDropTargetFilter(e)))this.removeDropIndicator();else{var i=t.closest(".wdr-header:not(.wdr-empty)");null!=t.closest(".wdr-filters")&&null!=i?(this._dropIndicator=this.createDropIndicator(),e==this._pageFilter?i.before(this._dropIndicator):t.before(this._dropIndicator)):(this._dropIndicator=this.createDropIndicator(),e==this._colsFilter?this._colsFilter.find(".wdr-row").append(this._dropIndicator):e==this._rowsFilter?null!=t.closest(".wdr-filters")?this._rowsFilter.find(".wdr-header").before(this._dropIndicator):this._type==n.classic.ClassicGridLayout.TYPE?this._rowsFilter.find(".wdr-header").parent.append(this._dropIndicator):this._rowsFilter.append(this._dropIndicator):e==this._pageFilter&&this._pageFilter.append(this._dropIndicator))}},r.prototype.clearAll=function(){i.prototype.clearAll.call(this),this._colsFilter.clear(),this._pageFilter.clear(),this._rowsFilter.clear()},Object.defineProperty(r.prototype,"colsFilter",{get:function(){return this._colsFilter},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"rowsFilter",{get:function(){return this._rowsFilter},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"pageFilter",{get:function(){return this._pageFilter},enumerable:!0,configurable:!0}),r.prototype.dispose=function(){this._colsFilter.removeAllEventListeners(),this._colsFilter.dispose(),this._rowsFilter.removeAllEventListeners(),this._rowsFilter.dispose(),this._pageFilter.removeAllEventListeners(),i.prototype.dispose.call(this)},r.TYPE="compact",r}((n=t.sheet||(t.sheet={})).BaseGridLayout),n.CompactGridLayout=i}((t=e._view||(e._view={})).grid||(t.grid={}))}(r||(r={})),function(e){var t;!function(t){!function(t){var n=function(t){function n(n){var r=t.call(this,"div","wdr-resize-handles")||this;return r._mouseDownHandler=function(e){return r.onMouseDown(e)},r._mouseUpHandler=function(e){return r.onMouseUp(e)},r._mouseMoveHandler=function(e){return r.onMouseMove(e)},r._handle=new g,r._gridLayout=n,r._coords=n.coords,r.element.addEventListener("mousedown",r._mouseDownHandler),document.body.addEventListener("mouseup",r._mouseUpHandler),r._indicator=new i.UIElement("div","wdr-indicator"),r._indicator.hide(),r.addChild(r._indicator),r._wrapper=new i.UIElement("div","wdr-wrapper"),r._wrapper.attr("title",e.model._labels.Labels.TOOLTIPS_HEADER_FIT),r.addChild(r._wrapper),r}return h(n,t),n.prototype.draw=function(){this._wrapper.attr("title",e.model._labels.Labels.TOOLTIPS_HEADER_FIT)},n.prototype.createHandle=function(t){return this._handle.tag="div",this._handle.addClass("wdr-handle"),this._handle.attr["data-idx"]=t,this._handle.attr.title=e.model._labels.Labels.TOOLTIPS_HEADER_RESIZE,this._handle},n.prototype.onMouseDown=function(e){if(e.target.classList.contains("wdr-handle")){this._currentHandle=e.target,this._currentHandle.classList.add("wdr-active"),this._baseOffset=this.getOffset(),document.body.addEventListener("mousemove",this._mouseMoveHandler),e.stopImmediatePropagation();var t=parseInt(this._currentHandle.getAttribute("data-idx"));this.startResizing(this._currentHandle,t),e.preventDefault(),e.stopImmediatePropagation()}},n.prototype.startResizing=function(e,t){},n.prototype.onMouseUp=function(e){document.body.removeEventListener("mousemove",this._mouseMoveHandler),this._currentHandle&&(this._currentHandle.classList.remove("wdr-active"),e=parseInt(this._currentHandle.getAttribute("data-idx")),this.stopResizing(this._currentHandle,e),this._currentHandle=null,this._indicator.hide())},n.prototype.stopResizing=function(e,t){},n.prototype.onMouseMove=function(e){var t=e.clientX-this._baseOffset.left,n=e.clientY-this._baseOffset.top;0>t||0>n||t>this._coords.layoutWidth||n>this._coords.layoutHeight?this.onMouseUp(e):(this.positionHandle(this._currentHandle,t,n),this._indicator.show())},n.prototype.positionHandle=function(e,t,n){},n.prototype.dispose=function(){this.element&&this.element.removeEventListener("mousedown",this._mouseDownHandler),document.body.removeEventListener("mousemove",this._mouseMoveHandler),document.body.removeEventListener("mouseup",this._mouseUpHandler),t.prototype.dispose.call(this)},n}(i.UIElement);t.ResizeHandles=n}(t.sheet||(t.sheet={}))}((t=e._view||(e._view={})).grid||(t.grid={}))}(r||(r={})),function(e){!function(e){!function(e){var t,n;n=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return h(i,n),i.prototype.draw=function(){n.prototype.draw.call(this),this._wrapper.removeAllChildren();for(var e="",t=0;t<this._coords.frozenRowsCount;t++)e+=this.createHandle(t).toHtml(!0);t=this._coords.getBoundTop();for(var i=Math.min(this._coords.maxRowsCount,this._coords.getBoundBottom());t<i;t++)e+=this.createHandle(t).toHtml(!0);this._wrapper.html(e)},i.prototype.createHandle=function(e){return n.prototype.createHandle.call(this,e),this._handle.style.top=this._coords.getRelativeRowY(e,this._gridLayout.isSmooth,!1)+this._coords.getRowHeight(e)+"px",this._handle},i.prototype.startResizing=function(e,t){this._startY=this._coords.getRelativeRowY(t,this._gridLayout.isSmooth,!1)},i.prototype.stopResizing=function(n,i){var r=Math.round(n.offsetTop+n.clientHeight/2-this._startY);r=Math.max(t.GridCoords.CELL_MIN_HEIGHT,r),this.dispatchWith(e.GridEvent.RESIZE_ROW,this,{height:r,rowIdx:i})},i.prototype.positionHandle=function(e,n,i){i=Math.max(this._startY+t.GridCoords.CELL_MIN_HEIGHT,i),e.style.top=i+"px",this._indicator.top=i,this._indicator.width=this._coords.availableWidth},i}((t=e.sheet||(e.sheet={})).ResizeHandles),t.RowResizeHandles=n}(e.grid||(e.grid={}))}(e._view||(e._view={}))}(r||(r={})),function(e){!function(e){!function(e){var t,n;n=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return h(i,n),i.prototype.draw=function(){n.prototype.draw.call(this),this._wrapper.removeAllChildren();for(var e="",t=0;t<this._coords.frozenColsCount;t++)e+=this.createHandle(t).toHtml(!0);var i=Math.min(this._coords.maxColsCount,this._coords.getBoundRight());for(t=this._coords.getBoundLeft();t<i;t++)e+=this.createHandle(t).toHtml(!0);this._wrapper.html(e)},i.prototype.createHandle=function(e){return n.prototype.createHandle.call(this,e),this._handle.style.left=this._coords.getRelativeColX(e,this._gridLayout.isSmooth)+this._coords.getColWidth(e)+"px",this._handle},i.prototype.startResizing=function(e,t){this._startX=this._coords.getRelativeColX(t,this._gridLayout.isSmooth)},i.prototype.stopResizing=function(n,i){var r=Math.round(n.offsetLeft+n.clientWidth/2-this._startX);r=Math.max(t.GridCoords.CELL_MIN_WIDTH,r),this.dispatchWith(e.GridEvent.RESIZE_COLUMN,this,{width:r,colIdx:i})},i.prototype.positionHandle=function(e,n,i){n=Math.max(this._startX+t.GridCoords.CELL_MIN_WIDTH,n),e.style.left=n+"px",this._indicator.left=n,this._indicator.height=this._coords.availableHeight},i}((t=e.sheet||(e.sheet={})).ResizeHandles),t.ColumnResizeHandles=n}(e.grid||(e.grid={}))}(e._view||(e._view={}))}(r||(r={})),function(e){var t;!function(t){var n;!function(i){var r=function(n){function r(){var e=n.call(this)||this;return e._type=r.TYPE,e.removeClass("wdr-compact-view"),e.addClass("wdr-classic-view"),e}return h(r,n),r.prototype.createRowsFilter=function(){var e=this;this._rowsFilter=new i.ClassicRowsFilter(this._coords),this._rowsFilter.id="wdr-rows-filter",this._rowsFilter.addEventListener(t.GridEvent.FILTER_CLICK,(function(t){return e.onFilterClick(t)})),this._rowsFilter.addEventListener(t.GridEvent.MOUSE_CLICK,(function(t){return e.onClick(t)})),this.addChild(this._rowsFilter)},r.prototype.drawFirst=function(){this.isClassicViewOk?n.prototype.drawFirst.call(this):(e.uialert(e.model._labels.Labels.MESSAGE_TOO_MANY_COLUMNS_IN_CLASSIC_MODE,e.model._labels.Labels.CONFIRMATION,e.AlertType.CONFIRMATION),e.model.PivotModel.getInstance().setOptions({gridType:t.GridType.COMPACT}),e.model.PivotModel.getInstance().refresh())},Object.defineProperty(r.prototype,"isClassicViewOk",{get:function(){return this._coords.dataWidth>this._coords.minDataWidth},enumerable:!0,configurable:!0}),r.prototype.clearDrawings=function(){n.prototype.clearDrawings.call(this),this._rowsFilter.clearDrawings()},r.prototype.getRowDropPosition=function(t){var n=e.data_.Cube.getInstance().slice_;return null!=t?(t=t.index())>n.rows.length?n.rows.length:(0<=(n=n.rows.indexOf("[Measures]"))&&n<=t&&0!=t&&t++,t):NaN},r.TYPE="classic",r}(n.CompactGridLayout);i.ClassicGridLayout=r}((n=t.sheet||(t.sheet={})).classic||(n.classic={}))}((t=e._view||(e._view={})).grid||(t.grid={}))}(r||(r={})),function(e){var t;!function(t){!function(t){!function(n){var i=function(t){function n(e){return t.call(this,e)||this}return h(n,t),n.prototype.dispose=function(){s.fmClearTimeout(this._timeout),t.prototype.dispose.call(this)},n.prototype.draw=function(){for(var t=this,n=[],i=new g,r=0;r<this._coords.frozenRowsCount;r++){i.tag="div",i.addClass("wdr-row");for(var o=0;o<this._coords.frozenColsCount;o++)i.text=e.model._options.OptionsManager.showHierarchyCaptions?i.text+this.createFilterCell(r,o,r==this._coords.frozenRowsCount-1?this._hierarchies[o]:null).toHtml():i.text+this.createCell(r,o).toHtml();n.push(i.toHtml())}this.html(n.join("")),this._timeout=s.fmSetTimeout((function(){return t.calculateSizes(!0)}),0)},n.prototype.clearDrawings=function(){s.fmClearTimeout(this._timeout)},n}(t.RowsFilter);n.ClassicRowsFilter=i}(t.classic||(t.classic={}))}(t.sheet||(t.sheet={}))}((t=e._view||(e._view={})).grid||(t.grid={}))}(r||(r={})),function(e){var t,n,i;t=e._view||(e._view={}),n=t.grid||(t.grid={}),function(r){var o=function(i){function o(){var e=i.call(this)||this;return e._isDrillThrough=!1,e._hierachiesList=null,e.colsScrollHander=function(t){return e.onColsScroll(t)},e._type=o.TYPE,e.addClass("wdr-flat-view"),e}return h(o,i),o.prototype.createColsSheet=function(){var e=this;this._colsSheet=new r.FlatColumnsSheet(this._coords,(function(t,n){return e.getCell(t,n)})),this._colsSheet.id="wdr-cols-sheet",this._colsSheet.scrollPane.element.addEventListener("wheel",this.colsScrollHander),this._colsSheet.addEventListener(n.GridEvent.MOUSE_CLICK,(function(t){return e.onClick(t)})),this._colsSheet.addEventListener(n.GridEvent.MOUSE_CLICK,(function(t){return e.onClickForApi(t)})),this._colsSheet.addEventListener(n.GridEvent.FILTER_CLICK,(function(t){return e.onFilterClick(t)})),this.addChild(this._colsSheet)},o.prototype.drawLayout=function(){i.prototype.drawLayout.call(this),this._sheetHeaders.top=this._coords.gridStartY,this._sheetHeaders.left=0,this._sheetHeaders.width=this._coords.rowHeadersWidth,this._sheetHeaders.height=this._coords.colHeadersHeight,this._colsSheet.left=this._coords.rowHeadersWidth,this._colsSheet.top=this._coords.gridStartY,this._colsSheet.width=this._coords.dataWidth,this._colsSheet.height=this._coords.layoutHeight-this._coords.gridStartY,this._rowsSheet.left=0,this._rowsSheet.top=this._coords.colHeadersHeight+this._coords.gridStartY,this._rowsSheet.width=this._coords.layoutWidth,this._rowsSheet.height=this._coords.dataHeight,this._dataSheet.left=this._coords.rowHeadersWidth-1,this._dataSheet.top=this._coords.colHeadersHeight+this._coords.gridStartY-1,this._dataSheet.width=this._coords.dataWidth,this._dataSheet.height=this._coords.dataHeight+1},o.prototype.drawLast=function(){i.prototype.drawLast.call(this)},Object.defineProperty(o.prototype,"isDrillThrough",{get:function(){return this._isDrillThrough},set:function(e){this._isDrillThrough=e},enumerable:!0,configurable:!0}),o.prototype.makeFieldsDraggable=function(){var e=this;i.prototype.makeFieldsDraggable.call(this);for(var t={createHelper:function(t){return e.createHeaderDragHelper(t)}},n=this._colsSheet.find(".wdr-header",!0),r=0;r<n.length;r++)n[r].draggable(t)},o.prototype.showIndicator=function(e,t){var n=t.closest(".wdr-cell");null!=n?(n=parseInt(n.attr("data-c")),n=Math.min(n,this.coords.dataColsCount),this._dropIndicator=this.createDropIndicator(),this._dropIndicator.left=this.coords.getRelativeColX(n,this.isSmooth)-(n==this.coords.dataColsCount?0:this._dropIndicator.width),this._dropIndicator.top=this._coords.gridStartY+this.coords.getRelativeRowY(0,this.isSmooth)-1,this._dropIndicator.height=this.coords.getRowHeight(0)+1,this.append(this._dropIndicator)):this.removeDropIndicator()},o.prototype.onDrop=function(n,i,r,o){this.removeDropIndicator(),null!=(o=r.closest(".wdr-cell"))&&(i=e.data_.Cube.getInstance().slice_.clone(),r=this.isDrillThrough&&null!=this._hierachiesList?this._hierachiesList:i.flatten(),o=parseInt(o.attr("data-c")),(n=parseInt(n.attr("data-c")))!=(o=Math.max(0,Math.min(o,r.length-1)))&&(r.moveItemAt(n,o),0<i.flatOrder.length&&(i.flatOrder=r.toKeyArray()),this.isDrillThrough?(this._hierachiesList=r,i.flatOrder=r.toKeyArray(),this.dispatchWith(t.config.FieldsView.EVENT_APPLY_SLICE,this,i)):(i.rows=r,e.model.PivotModel.getInstance().runQuery(i))))},o.TYPE="flat",o}(i.BaseGridLayout);r.FlatGridLayout=o}((i=n.sheet||(n.sheet={})).flat||(i.flat={}))}(r||(r={})),function(e){var t;!function(t){var n;!function(i){var r=function(n){function i(e,i){var r=n.call(this,e,i)||this;return r.addEventListener(t.GridEvent.MOUSE_CLICK,(function(e){return r.onFilterClick(e)})),r}return h(i,n),i.prototype.onFilterClick=function(e){null!=e.cell&&e.cell.isFilterHeader&&null!=e.cell.hierarchy&&e.cell.activeElementType!=t.vo.GridCellElementType.RIGHT_ICON&&this.dispatch(new t.FilterClickEvent(e.cell.hierarchy,e.cell))},i.prototype.createCell=function(i,r,o){return void 0===o&&(o=!1),this.cell=n.prototype.createCell.call(this,i,r,o),(i=this._getDataFunc?this._getDataFunc(i,r):null)&&i.isFilterHeader&&(this.cell.addClass(t.vo.GridStyleName.FILTER_HEADER),i.filtered&&(this.cell.addClass(t.vo.GridStyleName.FILTERED),this.cell.text+=this.createIcon(t.vo.GridStyleName.FILTERED_ICON,e.model._labels.Labels.TOOLTIPS_FILTERED)),this.cell.attr.title=e.model._labels.Labels.TOOLTIPS_FILTER_ICON,this.cell.text+=this.createIcon(t.vo.GridStyleName.FILTER_ICON)),this.cell},i}(n.ColumnHeadersSheet);i.FlatColumnsSheet=r}((n=t.sheet||(t.sheet={})).flat||(n.flat={}))}((t=e._view||(e._view={})).grid||(t.grid={}))}(r||(r={})),function(e){!function(e){!function(e){var n=function(e){function n(){var n=e.call(this,"div")||this;n.leaveHandler=function(e){return n.onMouseLeave(e)},n.list=new i.lists.UIList,n.list.markSelected=!0,n.list.setItemRendererFactory(n.itemRendererFactory),n.list.setLabelField("caption"),n.list.addEventListener(t._Event.CHANGE,(function(e){return n.onListChange(e)})),n.addChild(n.list),n.container.disableSelection();var r=new i.UIElement("div","wdr-arrow");return n.container.addChild(r),n}return h(n,e),n.prototype.showWith=function(e,t){this.origin=t,this.fieldData=e,this.setData(e),this.show(),this.container.addEventListener("mouseleave",this.leaveHandler),document.body.addEventListener("mousedown",this.leaveHandler);var n=t.getOffset(this.container.element.offsetParent);this.container.css("right",this.container.element.offsetParent.clientWidth-n.left+"px"),this.container.css("top",n.top-this.getHeight()/2+t.getHeight()/2+"px")},n.prototype.onMouseLeave=function(e){"mousedown"==e.type&&null!=i.UIElement.convert(event.target).closest("#wdr-aggregations-view")||(this.container.removeEventListener("mouseleave",this.leaveHandler),document.body.removeEventListener("mousedown",this.leaveHandler),this.hide())},n.prototype.onStageMouseDown=function(e){null==i.UIElement.convert(e.target).closest("#wdr-aggregations-view")&&this.hide()},n.prototype.setData=function(e){for(var t,n=0,i=[],r=0;r<e.availableAggregations.length;r++)t={caption:e.availableAggregationsCaptions[r],aggregation:e.availableAggregations[r]},null!=e.availableAggregationsTotalCaptions&&(t.totalCaption=e.availableAggregationsTotalCaptions[r]),i.push(t),e.availableAggregations[r]==e.aggregation&&(n=r);this.list.setDataProvider(i),this.list.setSelectedIndex(n),this.list.container.setScrollTop(0)},n.prototype.onListChange=function(e){this.dispatchWith(t._Event.CHANGE,this,{fieldData:this.fieldData,aggrData:e.data.selectedItem,origin:this.origin}),this.hide()},n.prototype.itemRendererFactory=function(e,t){var n=new i.renderers.SelectItemRenderer;return n.setData(e),n.setIndex(t),n},n}(i.UIComponentBase);e.AggregationsView=n}(e.config||(e.config={}))}(e._view||(e._view={}))}(r||(r={})),function(e){var t;!function(t){!function(t){var n=function(){function t(){}return t.prototype.update=function(e,t,n){this._structure=e,this._slice=t,this._dataSourceType=n,this.clearSearch(),this.updateSlice(),this.updateStructure()},t.prototype.updateSlice=function(){this.pages=this.getPages(),this.rows=this.getRows(),this.markValues(this.rows),this.columns=this.getColumns(),this.markValues(this.columns),this.measures=this.getMeasures(),this.markMeasures(this.measures)},t.prototype.updateStructure=function(){if(this._hierarchies=[],this.allHierarchies=[],this.addHierarchies(this._hierarchies,this.getAllHierarchies()),this.removeSingleDimensions(this._hierarchies),this.addMeasures(this._hierarchies,this.getAllMeasures()),this.sortHierarchies(this._hierarchies),t.expandFormulas){t.expandFormulas=!1;var n=s.ArrayUtils.find(this._hierarchies,"/"+e.model._labels.Labels.FIELDS_LIST_FORMULAS_GROUP_NAME,"uniqueName");null!=n&&this.expandField(n)}this.markSelected(this.pages),this.markSelected(this.columns),this.markSelected(this.rows),this.markSelected(this.measures)},t.prototype.onCalculatedValueAdded=function(e){if(null!=this._structure){var t=s.ArrayUtils.find(this.getAllMeasures(),e,"uniqueName");null!=t&&(t.isMeasure=!0,t.showAggregations=this.isMeasuresAsHierarchies,0<=(e=s.ArrayUtils.findIndex(this.measures,e,"uniqueName"))?(t.isChanged=!0,this.measures[e]=t):this.measures.push(t)),this.updateStructure()}},t.prototype.onCalculatedValueRemoved=function(e){null!=this._slice&&null!=this._structure&&(this.updateSlice(),this.updateStructure())},t.prototype.removeItemByName=function(e,t){for(var n=0;n<e.length;n++)if(e[n].uniqueName==t){e.splice(n,1);break}},t.prototype.markValues=function(t){null!=(t=s.ArrayUtils.find(t,e.data_.Cube.MEASURES_NAME,"uniqueName"))&&(t.caption=e.model._labels.Labels.FIELDS_LIST_VALUES,t.isValues=!0)},t.prototype.markMeasures=function(t){for(var n=0;n<t.length;n++)t[n].isMeasure=!0,t[n].showAggregations=e.model._options.OptionsManager.showAggregations},t.prototype.markSelected=function(e){for(var t,n=0;n<e.length;n++)e[n].isSelected=!0,t=this.findItem(e[n].uniqueName,e[n].isMeasure),this._slice.allHierarchies().getItem(e[n].uniqueName),null!=t&&this.selectField(t,!0)},t.prototype.selectField=function(e,t){if(e.isSelected=t,null!=e.parent&&e.parent.isSelected!=t&&(1==t||0==this.hasSelected(e.parent.children))&&this.selectField(e.parent,t),e.isLevelFolder&&0==t)for(var n=0;n<e.children.length;n++)this.selectField(e.children[n],t)},t.prototype.hasSelected=function(e){for(var t=0;t<e.length;t++)if(!0===e[t].isSelected)return!0;return!1},t.prototype.addHierarchies=function(t,n){for(var i,r,o=0;o<n.length;o++)null!=(i=this._structure.hierarchyToMeasure(n[o].uniqueName))&&i.type!=e.data_.types.MeasureType.COUNT&&""!=n[o].folder?(null==(r=s.ArrayUtils.find(this.allHierarchies,"Folder."+n[o].folder,"uniqueName"))&&((r={isFolder:!0}).uniqueName="Folder."+n[o].folder,r.caption=n[o].folder,r.children=[],t.push(r),this.allHierarchies.push(r)),n[o].level=1,n[o].parent=r,r.children.push(n[o])):(null==(i=s.ArrayUtils.find(t,n[o].dimensionUniqueName,"uniqueName"))&&((i={isFolder:!0}).uniqueName=n[o].dimensionUniqueName,i.caption=n[o].dimensionCaption,i.children=[],i.level=0,t.push(i),this.allHierarchies.push(i)),n[o].isLevel?(i=s.ArrayUtils.find((i=""==n[o].folder?i:r).children,n[o].hierarchyName,"uniqueName"),n[o].level=i.level+1,n[o].parent=i,null==i.children&&(i.children=[]),i.children.push(n[o]),i.isLevelFolder=!0):""!=n[o].folder?(null==(r=s.ArrayUtils.find(i.children,i.uniqueName+n[o].folder,"uniqueName"))&&((r={isFolder:!0}).uniqueName=i.uniqueName+n[o].folder,r.caption=n[o].folder,r.children=[],r.level=1,r.parent=i,i.children.push(r),this.allHierarchies.push(r)),n[o].level=2,n[o].parent=r,r.children.push(n[o])):(n[o].level=1,n[o].parent=i,i.children.push(n[o]))),this.allHierarchies.push(n[o])},t.prototype.addMeasures=function(t,n){for(var i,r={},o=0;o<n.length;o++){if(n[o].isMeasure=!0,n[o].showAggregations=e.model._options.OptionsManager.showAggregations,n[o].calculated&&(n[o].groupName=e.model._labels.Labels.FIELDS_LIST_FORMULAS_GROUP_NAME),this.isMeasuresAsHierarchies&&(i=this.toHierarchyUniqueName(n[o].uniqueName),i=s.ArrayUtils.find(this.allHierarchies,i,"uniqueName")),this.isMeasuresAsHierarchies&&null!=i)i.measureItem=n[o],i.measureItem.hierarchyItem=i,n[o].parent=i.parent;else if(""!=n[o].groupName){var a=this.addMeasureFolders(r,n[o].groupName,n[o].folder.split("\\"),n[o].calculated),l=a.folder;null!=l&&0>l.children.indexOf(n[o])&&l.children.push(n[o]),null!=a.root&&0>t.indexOf(a.root)&&t.push(a.root),n[o].level=a.folder.level+1,n[o].parent=l}else n[o].level=0,t.push(n[o]);this.allHierarchies.push(n[o])}},t.prototype.addMeasureFolders=function(e,t,n,i){void 0===i&&(i=!1),n.unshift(t),t="";for(var r,o,a,l=0,u=0;u<n.length;u++){var c=t+"/"+n[u];s.nullOrEmpty(n[u])||(null==(o=e[c])&&((o={}).caption=n[u],o.uniqueName=c,o.folder=t,o.children=[],o.level=l,o.isFolder=!0,o.isMeasuresFolder=!0,o.isCalculatedMeasuresFolder=i,this.allHierarchies.push(o),e[o.uniqueName]=o),(o.parent=r)&&r.children&&0>r.children.indexOf(o)&&r.children.push(o),null==a&&(a=o),e=e[t+="/"+n[u]],r=o,l++)}return{folder:o,root:a}},t.prototype.removeSingleDimensions=function(e){for(var t,n=0;n<e.length;n++)if(!0===e[n].isFolder&&1==e[n].children.length&&!0!==e[n].children[0].isFolder&&!e[n].children[0].calculated&&((t=e[n].children[0]).level=0,t.parent=null,e.splice(n,1,t),t.children))for(var i=0;i<t.children.length;i++)t.children[i].level-=1},t.prototype.sortHierarchies=function(e){var t=this;e.sort((function(e,n){var i=t.getFieldRank(e),r=t.getFieldRank(n);return i==r?e.caption.localeCompare(n.caption):r-i}))},t.prototype.getFieldRank=function(e){return!0===e.isLevel?0:!0===e.isFolder&&!0!==e.isMeasuresFolder?3:!0!==e.isFolder&&!0!==e.isMeasure?2:!0===e.isFolder&&!0===e.isMeasuresFolder?1:0},t.prototype.collapseField=function(e){if(!this.isSearch){for(var t=this._hierarchies.indexOf(e)+1,n=0;n<e.children.length;n++)!0===e.children[n].isExpanded&&this.collapseField(e.children[n]);this._hierarchies.splice(t,e.children.length),e.isExpanded=!1}},t.prototype.expandField=function(e){if(!this.isSearch){var t=this._hierarchies.indexOf(e)+1;e.isLevelFolder||this.sortHierarchies(e.children),s.ArrayUtils.insert(this._hierarchies,e.children,t),e.isExpanded=!0}},t.prototype.toHierarchyUniqueName=function(e){return null!=(e=this._structure.measureToHierarchy(e))?e.uniqueName:""},t.prototype.toMeasureUniqueName=function(e){return null!=(e=this._structure.hierarchyToMeasure(e))?e.uniqueName:""},t.prototype.findHierarchy=function(e){for(var t=0;t<this.allHierarchies.length;t++)if(!this.allHierarchies[t].isMeasure&&!this.allHierarchies[t].isFolder&&this.allHierarchies[t].uniqueName==e)return this.allHierarchies[t]},t.prototype.findMeasure=function(e){for(var t=0;t<this.allHierarchies.length;t++)if(this.allHierarchies[t].isMeasure&&!this.allHierarchies[t].isFolder&&this.allHierarchies[t].uniqueName==e)return this.allHierarchies[t]},t.prototype.findItem=function(e,t){return void 0===t&&(t=!1),t?this.findMeasure(e):this.findHierarchy(e)},t.prototype.isValidSlice=function(){return 0<this.measures.length},t.prototype.getSlice=function(){return{pages:this.toPlainArray(this.pages),rows:this.toPlainArray(this.rows),columns:this.toPlainArray(this.columns),measures:this.toPlainArray(this.measures),flatOrder:this._slice?this._slice.flatOrder:[]}},t.prototype.isSliceDifferent=function(e){return null==this._slice||this.isDifferent(e.pages,this._slice.pages.toArray())||this.isDifferent(e.rows,this._slice.rows.toArray())||this.isDifferent(e.columns,this._slice.columns.toArray())||this.isDifferent(e.measures,this._slice.measures_.toArray())},t.prototype.toPlainArray=function(e){for(var t,n=[],i=0;i<e.length;i++)t={uniqueName:e[i].uniqueName},e[i].isMeasure&&(t.aggregation=e[i].aggregation,t.isChanged=e[i].isChanged),e[i].isLevel&&(t.activeLevelName=e[i].uniqueName,t.uniqueName=e[i].hierarchyName),n.push(t);return n},t.prototype.isDifferent=function(e,t){if(e.length!=t.length)return!0;for(var n=0;n<t.length;n++)if(e[n].uniqueName!=t[n].uniqueName||e[n].aggregation!=t[n].aggregation||e[n].activeLevelName!=t[n].activeLevelName||e[n].isChanged)return!0;return!1},Object.defineProperty(t.prototype,"isMeasuresAsHierarchies",{get:function(){var t=this._dataSourceType;return t==e.data_.consts.DataSourceType.CSV||t==e.data_.consts.DataSourceType.JSON},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isExpandAll",{get:function(){for(var e=0;e<this._hierarchies.length;e++)if((this._hierarchies[e].isFolder||this._hierarchies[e].isMeasuresFolder||this._hierarchies[e].isLevelFolder)&&!this._hierarchies[e].isExpanded)return!0;return!1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hasFolders",{get:function(){for(var e=0;e<this._hierarchies.length;e++)if(this._hierarchies[e].isFolder||this._hierarchies[e].isMeasuresFolder||this._hierarchies[e].isLevelFolder)return!0;return!1},enumerable:!0,configurable:!0}),t.prototype.collapseAll=function(){if(!this.isSearch){for(var e=0;e<this._hierarchies.length;e++)(this._hierarchies[e].isFolder||this._hierarchies[e].isMeasuresFolder||this._hierarchies[e].isLevelFolder)&&(this._hierarchies[e].isExpanded=!1);var t=[];for(e=0;e<this._hierarchies.length;e++)0==this._hierarchies[e].level&&t.push(this._hierarchies[e]);this._hierarchies.splice(0,this._hierarchies.length),s.ArrayUtils.insert(this._hierarchies,t,0)}},t.prototype.expandAll=function(){if(!this.isSearch){this.collapseAll();for(var e=0;e<this._hierarchies.length;e++)(this._hierarchies[e].isFolder||this._hierarchies[e].isLevelFolder)&&this._expandField(this._hierarchies[e],e+1)}},t.prototype._expandField=function(e,t){e.isExpanded=!0,null!=e.children&&0<e.children.length&&(this.sortHierarchies(e.children),s.ArrayUtils.insert(this._hierarchies,e.children,t))},t.prototype.getPages=function(){return null!=this._slice?this.convertHierarchies(this._slice.pages):[]},t.prototype.getRows=function(){return null!=this._slice?this.convertHierarchies(this._slice.rows):[]},t.prototype.getColumns=function(){return null!=this._slice?this.convertHierarchies(this._slice.columns):[]},t.prototype.getMeasures=function(){return null!=this._slice?this.convertMeasures(this._slice.measures_):[]},t.prototype.getAllHierarchies=function(){return null!=this._structure?this.convertHierarchies(this._structure.allHierarchies(!1),!0):[]},t.prototype.getAllMeasures=function(){return null!=this._structure?this.convertMeasures(this._structure.measures_):[]},t.prototype.convertHierarchies=function(e,t){void 0===t&&(t=!1);for(var n=[],i=0;i<e.length;i++){var r=e.getItemAt(i);if(n.push({caption:r.caption,uniqueName:r.uniqueName,dimensionUniqueName:r.dimension.uniqueName,dimensionCaption:r.dimension.caption,folder:r.folder,isLevel:!1,isLevelFolder:r.isHierarchy&&t}),r.isHierarchy&&t)for(var o=0;o<r.levels_.length;o++)if(0!=o){var s=r.levels_.getItemAt(o);n.push({caption:s.caption,uniqueName:s.uniqueName,dimensionUniqueName:r.dimension.uniqueName,dimensionCaption:r.dimension.caption,folder:r.folder,hierarchyName:r.uniqueName,hierarchyCaption:r.caption,isLevel:!0,isLevelFolder:!1})}}return n},t.prototype.convertMeasures=function(t){for(var n=[],i=0;i<t.length;i++){var r=t.getItemAt(i),o=e.data_._structure.GenericMeasure.toObject(r),s=r.availableAggregations;0!=r.availableAggregations.length||r.calculated||(s=e.data_.consts.AggregationName.ALL_AGGREGATIONS),o.availableAggregations=s,o.availableAggregationsCaptions=e.data_.consts.AggregationName.aggregationCaptions(s),o.availableAggregationsTotalCaptions=e.data_.consts.AggregationName.aggregationTotalCaptions(s),n.push(o)}return n},t.prototype.search=function(e){if(e=e.toLowerCase(),this.searchPhrase!=e){this.searchPhrase=e,this.searchedHierarchies=[];for(var t=this.allHierarchies.length,n=0;n<t;n++){var i=this.allHierarchies[n];i.isFolder||i.isMeasure&&this.isMeasuresAsHierarchies||!s.StringUtils.contains(i.caption,e)||(this.addParents(i,this.searchedHierarchies),this.searchedHierarchies.push(i))}}},t.prototype.addParents=function(e,t){if(e.parent&&0>t.indexOf(e.parent)){for(var n=[];null!=e.parent;)n.push(e.parent),e=e.parent;n=n.reverse();for(var i=0;i<n.length;i++)0>t.indexOf(n[i])&&t.push(n[i])}},t.prototype.clearSearch=function(){this.searchPhrase="",this.searchedHierarchies=null},Object.defineProperty(t.prototype,"isSearch",{get:function(){return!s.nullOrEmpty(this.searchPhrase)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isSearchNeeded",{get:function(){return this.allHierarchies&&50<this.allHierarchies.length},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isCalculatedAvailable",{get:function(){return e.model._options.OptionsManager.showCalculatedValuesButton},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hierarchies",{get:function(){return this.isSearch?this.searchedHierarchies:this._hierarchies},enumerable:!0,configurable:!0}),t.expandFormulas=!1,t}();t.PivotFieldsModel=n}(t._pivot||(t._pivot={}))}((t=e._view||(e._view={})).config||(t.config={}))}(r||(r={})),function(e){var n,r,o,a;n=e._view||(e._view={}),r=n.config||(n.config={}),o=r._pivot||(r._pivot={}),a=function(a){function l(e){var n=a.call(this)||this;return n.type="pivot",n.calculatedValueAddedHandler=function(e){return n.onCalculatedValueAdded(e)},n.calculatedValueRemovedHandler=function(e){return n.onCalculatedValueRemoved(e)},n.model=new o.PivotFieldsModel,n.view=new o.PivotFieldsView(n,e),n.view.addEventListener(t._Event.CLOSED,(function(e){return n.dispatch(e)})),n.lists=[n.view.lstPages,n.view.lstRows,n.view.lstColumns,n.view.lstMeasures],n.view.btnOk&&n.view.btnOk.addEventListener(i.UIButton.CLICK_EVENT,(function(){return n.onOkClick()})),n.view.btnCancel&&n.view.btnCancel.addEventListener(i.UIButton.CLICK_EVENT,(function(){return n.onCancelClick()})),null!=n.view.aggrView&&n.view.aggrView.addEventListener(t._Event.CHANGE,(function(e){return n.onAggregationChange(e)})),n.view.lstHierarchies&&(n.view.lstHierarchies.container.addEventListener("click",(function(e){return n.onHierarchyFieldClick(e)})),n.view.lstHierarchies.droppable({onDrop:function(e,t,i,r){return n.onHierarchiesDrop(e,t,i,r)},onDragEnter:function(e,t,i,r){return n.onHierarchiesDragEnterOrOver(e,t,i,r)},onDragOver:function(e,t,i,r){return n.onHierarchiesDragEnterOrOver(e,t,i,r)},onDragLeave:function(e,t,i,r){return n.onDragLeave(e,t,i,r)},itemSelector:"li"}),n.view.lstHierarchies.container.disableSelection()),e={onDrop:function(e,t,i,r){return n.onDrop(e,t,i,r)},onDragEnter:function(e,t,i,r){return n.onDragEnterOrOver(e,t,i,r)},onDragOver:function(e,t,i,r){return n.onDragEnterOrOver(e,t,i,r)},onDragLeave:function(e,t,i,r){return n.onDragLeave(e,t,i,r)},itemSelector:"li"},n.view.lstPages&&(n.view.lstPages.droppable(e),n.view.lstPages.container.addEventListener("dblclick",(function(e){return n.onFieldDoubleClick(e)})),n.view.lstPages.container.disableSelection()),n.view.lstRows&&(n.view.lstRows.droppable(e),n.view.lstRows.container.addEventListener("dblclick",(function(e){return n.onFieldDoubleClick(e)})),n.view.lstRows.container.disableSelection()),n.view.lstColumns&&(n.view.lstColumns.droppable(e),n.view.lstColumns.container.addEventListener("dblclick",(function(e){return n.onFieldDoubleClick(e)})),n.view.lstColumns.container.disableSelection()),n.view.lstMeasures&&(n.view.lstMeasures.container.addEventListener("click",(function(e){return n.onMeasureFieldClick(e)})),n.view.lstMeasures.container.addEventListener("dblclick",(function(e){return n.onFieldDoubleClick(e)})),n.view.lstMeasures.droppable(e),n.view.lstMeasures.container.disableSelection()),n.view.btnAddMeasure&&n.view.btnAddMeasure.addEventListener(i.UIButton.CLICK_EVENT,(function(){return n.onAddMeasureClick()})),n.view.btnCollapseExpand&&n.view.btnCollapseExpand.addEventListener(i.UIButton.CLICK_EVENT,(function(){return n.onCollapseExpandClick()})),n.view.inpSearch&&(n.view.inpSearch.setChangeDelay(500),n.view.inpSearch.addEventListener(i.UITextInput.CHANGE_EVENT,(function(){return n.onSearchChange()}))),n}return h(l,a),l.prototype.onCancelClick=function(){this.view.close()},l.prototype.onOkClick=function(){this.applySlice(),this.view.close()},l.prototype.onSearchChange=function(){this.model.search(this.view.inpSearch.getText()),this.view.lstHierarchies.container.toggleClass("wdr-searched",this.model.isSearch),this.view.lstHierarchies.setDataProvider(this.model.hierarchies),this.validateList(this.view.lstHierarchies),this.view.btnCollapseExpand&&this.view.btnCollapseExpand.isVisible(this.model.hasFolders&&!this.model.isSearch)},l.prototype.applySlice=function(){var e=this.model.getSlice();this.model.isSliceDifferent(e)&&this.dispatchWith(r.FieldsView.EVENT_APPLY_SLICE,this,e)},l.prototype.onCalculatedValueAdded=function(t){e.model.PivotModel.getInstance().removeEventListener(n.calculated.CalculatedView.EVENT_CALCULATED_VALUE_ADDED,this.calculatedValueAddedHandler),this.model.onCalculatedValueAdded(t.data.measureUniqueName),this.updateView()},l.prototype.onCalculatedValueRemoved=function(t){e.model.PivotModel.getInstance().removeEventListener(n.calculated.CalculatedView.EVENT_CALCULATED_VALUE_REMOVED,this.calculatedValueRemovedHandler),this.model.onCalculatedValueRemoved(t.data),this.updateView()},l.prototype.onAddMeasureClick=function(){e.model.PivotModel.getInstance().dispatchWith(n.ViewEvent.CALCULATED_VIEW_OPEN),e.model.PivotModel.getInstance().addEventListener(n.calculated.CalculatedView.EVENT_CALCULATED_VALUE_ADDED,this.calculatedValueAddedHandler)},l.prototype.onCollapseExpandClick=function(){this.model.isExpandAll?this.model.expandAll():this.model.collapseAll(),this.validateList(this.view.lstHierarchies),this.view.setLabels()},l.prototype.onFieldDoubleClick=function(e){var t=i.UIElement.convert(e.target).closest("ul");null!=t&&(t=this.getListById(t.attr("id")),null!=(e=i.UIElement.convert(e.target).closest("li"))&&(e=parseInt(e.attr("data-index")),this.removeField(t,e)))},l.prototype.onMeasureFieldClick=function(e){var t=i.UIElement.convert(e.target).closest("li");null!=t&&(t=parseInt(t.attr("data-index")),t=this.model.measures[t],"wdr-aggr-display"==i.UIElement.convert(e.target).attr("id")&&this.view.aggrView.showWith(t,i.UIElement.convert(e.target)))},l.prototype.onAggregationChange=function(t){var n=t.data.fieldData,r=t.data.aggrData;i.UIElement.convert(t.data.origin),n.aggregation=r.aggregation,n.caption=e.model._options.OptionsManager.showAggregationLabels?s.StringUtils.bind(r.totalCaption,n.name):n.name,this.view.lstMeasures.validateItem(n),null!=(t=s.ArrayUtils.find(this.model.hierarchies,n.uniqueName,"uniqueName"))&&(this.model.isMeasuresAsHierarchies&&null!=t.measureItem&&(t=t.measureItem),t.aggregation=n.aggregation,t.caption=n.caption,this.view.lstHierarchies.validateItem(t))},l.prototype.onHierarchyFieldClick=function(t){if(null!=(r=i.UIElement.convert(t.target).closest("li"))){var r=parseInt(r.attr("data-index")),o=this.model.hierarchies[r];if("wdr-aggr-display"==i.UIElement.convert(t.target).attr("id"))this.view.aggrView.showWith(o,i.UIElement.convert(t.target));else if("wdr-calc-display"==i.UIElement.convert(t.target).attr("id"))e.model.PivotModel.getInstance().dispatchWith(n.ViewEvent.CALCULATED_VIEW_OPEN,null,{measureName:o.uniqueName}),e.model.PivotModel.getInstance().addEventListener(n.calculated.CalculatedView.EVENT_CALCULATED_VALUE_ADDED,this.calculatedValueAddedHandler),e.model.PivotModel.getInstance().addEventListener(n.calculated.CalculatedView.EVENT_CALCULATED_VALUE_REMOVED,this.calculatedValueRemovedHandler);else if(o.isFolder||o.isLevelFolder&&"wdr-moreicon-display"!=i.UIElement.convert(t.target).attr("id"))!0===o.isExpanded?this.model.collapseField(o):this.model.expandField(o),this.validateList(this.view.lstHierarchies),this.view.setLabels();else{if(1==o.isSelected||null!=o.measureItem&&1==o.measureItem.isSelected)1==o.isSelected&&(this.model.selectField(o,!1),this.findAndRemoveField(o)),null!=o.measureItem&&1==o.measureItem.isSelected&&(this.model.selectField(o.measureItem,!1),this.findAndRemoveField(o.measureItem));else if(o.isMeasure)this.model.selectField(o,!0),this.model.measures.push(o),this.validateList(this.view.lstMeasures);else if(o.measureItem&&o.measureItem.type!=e.data_.types.MeasureType.COUNT&&o.measureItem.type!=e.data_.types.MeasureType.DATE)this.model.selectField(o.measureItem,!0),this.model.measures.push(o.measureItem),this.validateList(this.view.lstMeasures);else{if(o.isLevel)for(o.parent.isSelected&&this.findAndRemoveField(o.parent),t=0;t<o.parent.children.length;t++){var s=o.parent.children[t];s.uniqueName!=o.uniqueName&&(s.isSelected&&this.findAndRemoveField(s),s.isSelected=!1)}this.model.selectField(o,!0),this.model.rows.push(o),this.validateList(this.view.lstRows)}this.validateItemRecursivelyAt(this.view.lstHierarchies,r),this.validateSlice()}}},l.prototype.validateItemRecursivelyAt=function(e,t){e.validateItemAt(t);var n=e.getDataProvider()[t];if(null!=n.parent&&this.validateItemRecursively(e,n.parent),n.isLevelFolder)for(var i=0;i<n.children.length;i++)e.validateItem(n.children[i]);if(n.isLevel)for(i=0;i<n.parent.children.length;i++)e.validateItem(n.parent.children[i])},l.prototype.validateItemRecursively=function(e,t){if(e.validateItem(t),t.parent&&this.validateItemRecursively(e,t.parent),t.isLevelFolder)for(var n=0;n<t.children.length;n++)e.validateItem(t.children[n]);if(t.isLevel)for(n=0;n<t.parent.children.length;n++)e.validateItem(t.parent.children[n])},l.prototype.onDragStart=function(e){return!0},l.prototype.onHierarchiesDrop=function(e,t,n,i){e&&e.closest("ul")&&(t=parseInt(e.attr("data-index")),(e=this.getListById(e.closest("ul").attr("id")))!=this.view.lstHierarchies&&this.removeField(e,t))},l.prototype.onHierarchiesDragEnterOrOver=function(e,t,n,i){e&&e.closest("ul")&&(e=this.getListById(e.closest("ul").attr("id")))!=this.view.lstHierarchies&&(e.container.hasClass("wdr-droppable")?t&&t.addClass("wdr-droppable-valid"):t&&t.addClass("wdr-droppable-invalid"))},l.prototype.onDragEnterOrOver=function(e,t,n,r){this.removeDropIndicator(),e&&e.closest("ul")&&(n instanceof i.lists.UIList||(n=this.getListById(n.attr("id"))),(t=this.getListById(e.closest("ul").attr("id"))).container.hasClass("wdr-droppable")&&this.isDropAllowed(this.getDataByElement(e,t),t,n)&&(r instanceof MouseEvent?this.showIndicator(i.UIElement.convert(r.target)):(e=r.changedTouches[0],this.showIndicator(i.UIElement.convert(document.elementFromPoint(e.clientX,e.clientY))))))},l.prototype.isDropAllowed=function(e,t,n){return!(e.isValues&&n!=this.view.lstColumns&&n!=this.view.lstRows||0==this.model.isMeasuresAsHierarchies&&(n!=this.view.lstMeasures&&e.isMeasure||n==this.view.lstMeasures&&!e.isMeasure)||e.calculated&&n!=this.view.lstMeasures||t==this.view.lstHierarchies&&null!=s.ArrayUtils.find(n.getDataProvider(),e.uniqueName,"uniqueName"))},l.prototype.getDataByElement=function(e,t){var n=parseInt(e.attr("data-index"));return t.getDataProvider()[n]},l.prototype.onDragLeave=function(e,t,n,i){this.removeDropIndicator(),e&&e.closest("ul")&&t&&(t.removeClass("wdr-droppable-valid"),t.removeClass("wdr-droppable-invalid"))},l.prototype.onDrop=function(e,t,n,r){this.removeDropIndicator(),e&&e.closest("ul")&&(t instanceof i.lists.UIList||(t=this.getListById(t.attr("id"))),r=this.getListById(e.closest("ul").attr("id")),0!=this.isDropAllowed(this.getDataByElement(e,r),r,t)&&(n=n?parseFloat(n.attr("data-index")):t.getDataProvider().length,e=parseInt(e.attr("data-index")),r!=t||e!=n))&&(r==this.view.lstHierarchies&&t!=this.view.lstHierarchies?this.addField(r,t,e,n):this.moveField(r,t,e,n),this.validateView())},l.prototype.showIndicator=function(e){var t=e.closest("li");null!=t?(this._dropIndicator=this.createDropIndicator(),t.before(this._dropIndicator)):null!=(e=e.closest("ul"))&&(this._dropIndicator=this.createDropIndicator(),0<e.element.children.length?e.append(this._dropIndicator):e.prepend(this._dropIndicator))},l.prototype.createDropIndicator=function(){return new i.UIElement("div","wdr-drop-indicator")},l.prototype.removeDropIndicator=function(){this._dropIndicator&&(this._dropIndicator.removeFromParent(!0),this._dropIndicator=null)},l.prototype.moveField=function(e,t,n,i){var r=e.getDataProvider()[n];e==t?(n<i&&(i-=1),(e=t.getDataProvider()).splice(i,0,e.splice(n,1)[0])):(r=e.getDataProvider()[n],e.getDataProvider().splice(n,1),e.validateNow(),t==this.view.lstMeasures&&(this.model.selectField(r,!1),r=this.model.findMeasure(this.model.toMeasureUniqueName(r.uniqueName))),e==this.view.lstMeasures&&(this.model.selectField(r,!1),r=this.model.findHierarchy(this.model.toHierarchyUniqueName(r.uniqueName))),null!=r&&(this.model.selectField(r,!0),this.findAndRemoveField(r),t.getDataProvider().splice(i,0,r))),this.validateList(t),this.validateSlice()},l.prototype.addField=function(e,t,n,i){if((n=e.getDataProvider()[n]).isLevel){n.parent.isSelected&&this.findAndRemoveField(n.parent);for(var r=0;r<n.parent.children.length;r++){var o=n.parent.children[r];o.uniqueName!=n.uniqueName&&(o.isSelected&&this.findAndRemoveField(o),o.isSelected=!1)}this.validateItemRecursively(this.view.lstHierarchies,n)}this.model.isMeasuresAsHierarchies&&t==this.view.lstMeasures&&null!=n.measureItem&&(n=n.measureItem),n.isSelected?(this.model.selectField(n,!1),this.findAndRemoveField(n,e,!0),this.model.selectField(n,!0)):(this.model.selectField(n,!0),e=s.ArrayUtils.findIndex(this.view.lstHierarchies.getDataProvider(),n.uniqueName,"uniqueName"),this.validateItemRecursivelyAt(this.view.lstHierarchies,e),this.view.lstHierarchies.validateItemAt(e)),t.getDataProvider().splice(i,0,n),this.validateList(t),this.validateSlice()},l.prototype.removeField=function(e,t){if(!(e.getDataProvider().length<=t)){var n=e.getDataProvider()[t];n.isValues||(e.getDataProvider().splice(t,1),this.validateList(e),null!=(n=this.model.findItem(n.uniqueName,n.isMeasure))&&(this.model.selectField(n,!1),this.validateItemRecursively(this.view.lstHierarchies,null!=n.hierarchyItem?n.hierarchyItem:n),n.isLevel&&(this.model.selectField(n.parent,!1),this.validateItemRecursively(this.view.lstHierarchies,n.parent))),this.validateSlice())}},l.prototype.findAndRemoveField=function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);for(var i=-1,r=0;r<this.lists.length;r++)this.lists[r]==t||this.lists[r]==this.view.lstMeasures&&n||(-1==(i=s.ArrayUtils.findIndex(this.lists[r].getDataProvider(),e.uniqueName,"uniqueName"))&&(i=s.ArrayUtils.findIndex(this.lists[r].getDataProvider(),e.uniqueName,"hierarchyName")),-1<i&&(this.lists[r].getDataProvider().splice(i,1),this.validateList(this.lists[r])))},l.prototype.getListById=function(e){switch(e){case this.view.lstHierarchies.getId():return this.view.lstHierarchies;case this.view.lstPages.getId():return this.view.lstPages;case this.view.lstRows.getId():return this.view.lstRows;case this.view.lstColumns.getId():return this.view.lstColumns;case this.view.lstMeasures.getId():return this.view.lstMeasures}return null},l.prototype.update=function(e,t,n,i){void 0===n&&(n=""),void 0===i&&(i=!0),i&&this.model.update(e,t,n),this.updateView()},l.prototype.validateSlice=function(){this.view.btnOk&&this.view.btnOk.setEnabled(this.model.isValidSlice())},Object.defineProperty(l.prototype,"isExpandAll",{get:function(){return this.model.isExpandAll},enumerable:!0,configurable:!0}),l.prototype.updateView=function(){var e=this;this.view.reset&&this.view.reset(),this.view.btnAddMeasure&&this.view.btnAddMeasure.isVisible(this.model.isCalculatedAvailable),this.view.lstHierarchies&&this.view.lstHierarchies.setDataProvider(this.model.hierarchies,!1),this.view.lstPages&&this.view.lstPages.setDataProvider(this.model.pages,!1),this.view.lstRows&&this.view.lstRows.setDataProvider(this.model.rows,!1),this.view.lstColumns&&this.view.lstColumns.setDataProvider(this.model.columns,!1),this.view.lstMeasures&&this.view.lstMeasures.setDataProvider(this.model.measures,!1),this.view.btnCollapseExpand&&this.view.btnCollapseExpand.isVisible(this.model.hasFolders),this.view.searchWrap&&this.view.searchWrap.isVisible(this.model.isSearchNeeded),this.view.inpSearch&&(this.view.inpSearch.clear(!1),this.model.clearSearch()),this.view.setLabels(),this.view.container.requestAnimationFrame((function(){e.validateView()}))},l.prototype.validateList=function(e){var t=this;e.validateNow();var n={onDragStart:function(e){return t.onDragStart(e)},createHelper:function(e){return t.view.createHelper(e)}};s.browserVersion().isMobile&&(n.handle="#wdr-drag-handle");var i=e.container.find("li",!0);if(e==this.view.lstHierarchies)for(e=0;e<i.length;e++)i[e].hasClass("wdr-folder")&&!i[e].hasClass("wdr-level-folder")||i[e].draggable(n);else for(e.droppable({onDrop:function(e,n,i,r){return t.onDrop(e,n,i,r)},onDragEnter:function(e,n,i,r){return t.onDragEnterOrOver(e,n,i,r)},onDragOver:function(e,n,i,r){return t.onDragEnterOrOver(e,n,i,r)},onDragLeave:function(e,n,i,r){return t.onDragLeave(e,n,i,r)},itemSelector:"li"}),e=0;e<i.length;e++)i[e].draggable(n)},l.prototype.validateView=function(){try{this.validateSlice(),this.validateList(this.view.lstHierarchies),this.validateList(this.view.lstPages),this.validateList(this.view.lstRows),this.validateList(this.view.lstColumns),this.validateList(this.view.lstMeasures)}catch(a){}},l}(t.EventDispatcher),o.PivotFieldsController=a}(r||(r={})),function(e){var t;!function(t){var n,r;n=t._pivot||(t._pivot={}),r=function(n){function r(e,t){var i=n.call(this,t)||this;return i.toolbarHeight=0,i.controller=e,i.addClass("wdr-pivot-fields"),i.setControls(),i.container.disableSelection(),i.container.resizable({sides:["left","right"],resize:function(e){return i.onViewResize(e)}}),i}return h(r,n),r.prototype.onViewResize=function(e){this.setWidth(e.size.width+(e.size.width-e.originalSize.width)),this.addLayoutClasses(),this.centerPosition()},r.prototype.setControls=function(){var n=this,r=new i.UIComponentBase("div","wdr-popup-header wdr-ui-row");this.addChild(r);var o=new i.UIComponentBase("div","wdr-ui-col wdr-vam");r.addChild(o),this.lblTitle=new i.UILabel(e.model._labels.Labels.FIELDS_LIST_TITLE),this.lblTitle.addClass("wdr-popup-title"),o.addChild(this.lblTitle),this.lblSubtitle=new i.UILabel(e.model._labels.Labels.FIELDS_LIST_SUBTITLE),this.lblSubtitle.addClass("wdr-popup-subtitle"),o.addChild(this.lblSubtitle),o=new i.UIComponentBase("div","wdr-ui-col wdr-vam wdr-tar wdr-ui-btns-row"),r.addChild(o),this.btnAddMeasure=new i.UIButton("wdr-ui-btn-light wdr-icon-act_calc"),this.btnAddMeasure.setId("wdr-btn-add-measure"),this.btnAddMeasure.setLabel(e.model._labels.Labels.FIELDS_LIST_ADD_CALCULATED_MEASURE),o.addChild(this.btnAddMeasure),this.btnCancel=new i.UIButton,this.btnCancel.setLabel(e.model._labels.Labels.BUTTON_CANCEL),this.btnOk=new i.UIButton("wdr-ui-btn-dark"),this.btnOk.setLabel(e.model._labels.Labels.BUTTON_APPLY),s.OSUtil.isIOS||s.OSUtil.isMac?(o.addChild(this.btnCancel),o.addChild(this.btnOk)):(o.addChild(this.btnOk),o.addChild(this.btnCancel)),r=new i.UIComponentBase("div","wdr-popup-content"),this.addChild(r);var a=new i.UIComponentBase("div","wdr-ui-row");r.addChild(a),o=new i.UIComponentBase("div","wdr-ui-col-3"),a.addChild(o);var l=new i.UIComponentBase("div","wdr-list-wrap wdr-list-wrap-all");o.addChild(l);var u=new i.UIComponentBase("div","wdr-list-header wdr-list-header-wide");l.addChild(u),o=new i.UIComponentBase("div","wdr-list-header-label-wrap"),u.addChild(o),this.lblHierarchies=new i.UILabel(e.model._labels.Labels.FIELDS_LIST_ALL_FIELDS),o.addChild(this.lblHierarchies),this.btnCollapseExpand=new i.UIButton("wdr-ui-link-btn"),this.btnCollapseExpand.removeClass("wdr-ui-btn"),this.btnCollapseExpand.setId("wdr-btn-collapse-expand-all"),this.btnCollapseExpand.setLabel(e.model._labels.Labels.FIELDS_LIST_COLLAPSE_ALL),o.addChild(this.btnCollapseExpand),this.searchWrap=new i.UIComponentBase("div","wdr-search-wrap"),u.addChild(this.searchWrap),(o=new i.UIComponentBase("button","wdr-search-btn")).addEventListener("click",(function(){return n.onSearchClick()})),this.searchWrap.addChild(o),u=new i.UIComponentBase("span","wdr-ui-icon wdr-icon-act_search"),o.addChild(u),this.inpSearch=new i.UITextInput,this.inpSearch.addClass("wdr-search-inp"),this.searchWrap.addChild(this.inpSearch),(o=new i.UIComponentBase("span","wdr-close-search wdr-ui-icon wdr-icon-act_close")).addEventListener("click",(function(){return n.onSearchCloseClick()})),this.searchWrap.addChild(o),u=new i.UIComponentBase("div","wdr-list-content"),l.addChild(u),this.lstHierarchies=new i.lists.UIList,this.lstHierarchies.setId("wdr-lst-hierarchies"),this.lstHierarchies.setItemRendererFactory((function(e,t){return n.selectableItemRendererFactory(e,t)})),this.lstHierarchies.setLabelField("caption"),u.addChild(this.lstHierarchies),o=new i.UIComponentBase("div","wdr-ui-col-3"),a.addChild(o),(l=new i.UIComponentBase("div","wdr-list-wrap wdr-list-wrap-pages")).setId("wdr-wrap-pages"),o.addChild(l),u=new i.UIComponentBase("div","wdr-list-header"),l.addChild(u),this.lblPages=new i.UILabel(e.model._labels.Labels.FIELDS_LIST_FILTERS),u.addChild(this.lblPages),u=new i.UIComponentBase("div","wdr-list-content"),l.addChild(u),this.lstPages=new i.lists.UIList,this.lstPages.setId("wdr-lst-pages"),this.lstPages.setItemRendererFactory((function(e,t){return n.fieldItemRendererFactory(e,t)})),this.lstPages.setLabelField("caption"),u.addChild(this.lstPages),this.lblPagesPrompt=new i.UILabel(e.model._labels.Labels.FIELDS_LIST_DROP_FIELD),this.lblPagesPrompt.addClass("wdr-prompt"),l.addChild(this.lblPagesPrompt),(l=new i.UIComponentBase("div","wdr-list-wrap wdr-list-wrap-rows")).setId("wdr-wrap-rows"),o.addChild(l),u=new i.UIComponentBase("div","wdr-list-header"),l.addChild(u),this.lblRows=new i.UILabel(e.model._labels.Labels.FIELDS_LIST_ROWS),u.addChild(this.lblRows),u=new i.UIComponentBase("div","wdr-list-content"),l.addChild(u),this.lstRows=new i.lists.UIList,this.lstRows.setId("wdr-lst-rows"),this.lstRows.setItemRendererFactory((function(e,t){return n.fieldItemRendererFactory(e,t)})),this.lstRows.setLabelField("caption"),u.addChild(this.lstRows),this.lblRowsPrompt=new i.UILabel(e.model._labels.Labels.FIELDS_LIST_DROP_FIELD),this.lblRowsPrompt.addClass("wdr-prompt"),l.addChild(this.lblRowsPrompt),o=new i.UIComponentBase("div","wdr-ui-col-3"),a.addChild(o),(l=new i.UIComponentBase("div","wdr-list-wrap wdr-list-wrap-cols")).setId("wdr-wrap-columns"),o.addChild(l),u=new i.UIComponentBase("div","wdr-list-header"),l.addChild(u),this.lblColumns=new i.UILabel(e.model._labels.Labels.FIELDS_LIST_COLUMNS),u.addChild(this.lblColumns),u=new i.UIComponentBase("div","wdr-list-content"),l.addChild(u),this.lstColumns=new i.lists.UIList,this.lstColumns.setId("wdr-lst-columns"),this.lstColumns.setItemRendererFactory((function(e,t){return n.fieldItemRendererFactory(e,t)})),this.lstColumns.setLabelField("caption"),u.addChild(this.lstColumns),this.lblColumnsPrompt=new i.UILabel(e.model._labels.Labels.FIELDS_LIST_DROP_FIELD),this.lblColumnsPrompt.addClass("wdr-prompt"),l.addChild(this.lblColumnsPrompt),(l=new i.UIComponentBase("div","wdr-list-wrap wdr-list-wrap-measures")).setId("wdr-wrap-measures"),o.addChild(l),u=new i.UIComponentBase("div","wdr-list-header"),l.addChild(u),this.lblMeasures=new i.UILabel(e.model._labels.Labels.FIELDS_LIST_VALUES),u.addChild(this.lblMeasures),u=new i.UIComponentBase("div","wdr-list-content"),l.addChild(u),this.lstMeasures=new i.lists.UIList,this.lstMeasures.setId("wdr-lst-measures"),this.lstMeasures.setItemRendererFactory((function(e,t){return n.fieldItemRendererFactory(e,t)})),this.lstMeasures.setLabelField("caption"),u.addChild(this.lstMeasures),this.lblMeasuresPrompt=new i.UILabel(e.model._labels.Labels.FIELDS_LIST_DROP_FIELD),this.lblMeasuresPrompt.addClass("wdr-prompt"),l.addChild(this.lblMeasuresPrompt),this.aggrView=new t.AggregationsView,this.aggrView.setId("wdr-aggregations-view"),this.aggrView.hide(),r.addChild(this.aggrView)},r.prototype.setLabels=function(){this.lblTitle.setLabel(e.model._labels.Labels.FIELDS_LIST_TITLE),this.lblSubtitle.setLabel(e.model._labels.Labels.FIELDS_LIST_SUBTITLE),this.btnCancel.setLabel(e.model._labels.Labels.BUTTON_CANCEL),this.btnOk.setLabel(e.model._labels.Labels.BUTTON_APPLY),this.lblHierarchies.setLabel(e.model._labels.Labels.FIELDS_LIST_ALL_FIELDS),this.lblPages.setLabel(e.model._labels.Labels.FIELDS_LIST_FILTERS),this.lblRows.setLabel(e.model._labels.Labels.FIELDS_LIST_ROWS),this.lblColumns.setLabel(e.model._labels.Labels.FIELDS_LIST_COLUMNS),this.lblMeasures.setLabel(e.model._labels.Labels.FIELDS_LIST_VALUES),this.btnAddMeasure.setLabel(e.model._labels.Labels.FIELDS_LIST_ADD_CALCULATED_MEASURE),this.lblPagesPrompt.setLabel(e.model._labels.Labels.FIELDS_LIST_DROP_FIELD),this.lblRowsPrompt.setLabel(e.model._labels.Labels.FIELDS_LIST_DROP_FIELD),this.lblColumnsPrompt.setLabel(e.model._labels.Labels.FIELDS_LIST_DROP_FIELD),this.lblMeasuresPrompt.setLabel(e.model._labels.Labels.FIELDS_LIST_DROP_FIELD),this.btnCollapseExpand.setLabel(this.controller.isExpandAll?e.model._labels.Labels.FIELDS_LIST_EXPAND_ALL:e.model._labels.Labels.FIELDS_LIST_COLLAPSE_ALL)},r.prototype.fieldItemRendererFactory=function(e,n){var i=new t.renderers.FieldItemRenderer;return i.setData(e),i.setIndex(n),i},r.prototype.selectableItemRendererFactory=function(e,n){var i=new t.renderers.SelectableItemRenderer(e,n);return i.setIndex(n),i},r.prototype.onSearchClick=function(){this.searchWrap.addClass("wdr-search-opened"),this.inpSearch.container.focus()},r.prototype.onSearchCloseClick=function(){this.searchWrap.removeClass("wdr-search-opened"),this.inpSearch.clear()},r.prototype.reset=function(){this.searchWrap.removeClass("wdr-search-opened"),this.inpSearch.clear(!1)},r.prototype.createHelper=function(e){var t=new i.UIElement("span");return t.attr("id","wdr-drag-handle"),t.addClass("wdr-helper"),t.addClass("wdr-draggable"),t.toggleClass("wdr-values",e.hasClass("wdr-values")),t.css("width",e.css("width")),t.css("position","absolute"),t.css("z-index",100),t.attr("data-index",e.attr("data-index")),t.text(e.text()),t},r.prototype.addLayoutClasses=function(e){n.prototype.addLayoutClasses.call(this,!0)},r}(i.containers.UIPopup),n.PivotFieldsView=r}((t=e._view||(e._view={})).config||(t.config={}))}(r||(r={})),function(e){var n,r,o;n=e._view||(e._view={}),r=n.config||(n.config={}),o=function(o){function s(){var e=o.call(this)||this;return e.addClass("wdr-fields-view-wrap"),e.setControls(),e}return h(s,o),s.prototype.setControls=function(){var e=this;this.openBtn=new i.UIButton,this.openBtn.setId("wdr-btn-open-fields"),this.openBtn.addEventListener(i.UIButton.CLICK_EVENT,(function(t){return e.onOpenClick()})),this.addChild(this.openBtn)},s.prototype.open=function(t,n,i){void 0===i&&(i=""),this.container.toggleClass("wdr-fields-opened",!0),this.isForDillThrough||(e.model.JavaScriptHandlers.getInstance().dispatch(new e.model.APIEvent(e.model.JavaScriptHandlers.FILDS_LIST_OPEN)),e.model._options.OptionsManager.configuratorOpened=!0),this._isFlat=e.model._options.OptionsManager.flatView,this.controller=this.getController(),this.controller.update(t,n,i,this.hasChanged),this.controller.view.setId("wdr-fields-view"),this.controller.view.container.toggleClass("wdr-dt-fields",this.isForDillThrough),this.controller.view.overlay.container.toggleClass("wdr-dt-fields-overlay",this.isForDillThrough),this._modalParent?this._modalParent.addChild(this.controller.view.container):this.addChild(this.controller.view),this.isVisible()||this.show(),this.controller.view.open(),this._isActive=!0,this._prevSlice=e.data_.Cube.getInstance().slice_?e.data_.Cube.getInstance().slice_.clone():null,this._connectionInfo=e.data_.Cube.getInstance().connectionInfo_},Object.defineProperty(s.prototype,"isFlatChange",{get:function(){return this._isFlat!=e.model._options.OptionsManager.flatView},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"isActiveChange",{get:function(){return this._isActive!=e.model._options.OptionsManager.configuratorOpened},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"isDataSourceChange",{get:function(){return null==this._connectionInfo||null==e.data_.Cube.getInstance().structure_||!this._connectionInfo.isEqual(e.data_.Cube.getInstance().connectionInfo_)},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"isSliceChange",{get:function(){return null==e.data_.Cube.getInstance().slice_&&null!=this._prevSlice||null!=e.data_.Cube.getInstance().slice_&&null==this._prevSlice||e.data_.Cube.getInstance().slice_&&this._prevSlice&&!e.data_.Cube.getInstance().slice_.isEqual(this._prevSlice)},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"hasChanged",{get:function(){return this.isActiveChange||this.isDataSourceChange||this.isSliceChange||this.isFlatChange},enumerable:!0,configurable:!0}),s.prototype.getController=function(){var e=this,i=null,o=this._isFlat||this._isForDillThrough,a=this._modalParent||n.PivotView.stage.container;return null==this.controller?i=o?new r.flat.FlatFieldsController(a):new r._pivot.PivotFieldsController(a):o&&"flat"!=this.controller.type?i=new r.flat.FlatFieldsController(a):o||"pivot"==this.controller.type||(i=new r._pivot.PivotFieldsController(a)),null==i?this.controller:(this.controller&&this.controller.removeAllEventListeners(),i.addEventListener(t._Event.CLOSED,(function(){return e.onViewClosed()})),i.addEventListener(s.EVENT_APPLY_SLICE,(function(t){return e.onApplySlice(t)})),i)},s.prototype.onApplySlice=function(e){this.dispatch(e)},s.prototype.onViewClosed=function(){this._isActive=void 0,this._connectionInfo=null,this._isFlat=void 0,this.isForDillThrough||(e.model.JavaScriptHandlers.getInstance().dispatch(new e.model.APIEvent(e.model.JavaScriptHandlers.FILDS_LIST_CLOSE)),e.model._options.OptionsManager.getInstance(),e.model._options.OptionsManager.configuratorButton?this.show():this.hide(),e.model._options.OptionsManager.configuratorOpened=!1,this.dispatchWith(t._Event.CLOSED)),this.container.toggleClass("wdr-fields-opened",!1)},s.prototype.close=function(){this.controller&&this.controller.view.close()},s.prototype.onOpenClick=function(){this.dispatchWith(s.EVENT_OPEN)},Object.defineProperty(s.prototype,"isForDillThrough",{get:function(){return this._isForDillThrough},set:function(e){this._isForDillThrough=e},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"modalParent",{set:function(e){this._modalParent=e},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"containtment",{set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"isOpen",{get:function(){return this._isActive},enumerable:!0,configurable:!0}),s.EVENT_APPLY_SLICE="EVENT_APPLY_SLICE",s.EVENT_OPEN="EVENT_OPEN",s}(i.UIComponentBase),r.FieldsView=o}(r||(r={})),function(e){var t;!function(t){!function(t){var n=function(t){function n(){var e=t.call(this)||this;return e.createTextDisplay(),e}return h(n,t),n.prototype.createTextDisplay=function(){null==this.textDisplay&&(this.textDisplay=new i.UIElement("span"),this.textDisplay.attr("id","wdr-text-display"))},n.prototype.createArrgDisplay=function(){null==this.aggrDisplay&&(this.aggrDisplay=new i.UIElement("span"),this.aggrDisplay.attr("id","wdr-aggr-display"))},n.prototype.createDragHandle=function(){null==this.dragHandle&&(this.dragHandle=new i.UIElement("span"),this.dragHandle.attr("id","wdr-drag-handle"))},n.prototype.draw=function(){var t=this.getData();this.container.empty();var n=null!=this.getLabelFunction()?this.getLabelFunction()(t):t.isLevel?t.hierarchyCaption+" / "+t[this.getLabelField()]:t[this.getLabelField()];this.textDisplay.text(n),this.textDisplay.attr("title",n),this.container.append(this.textDisplay),1==t.isMeasure&&1==t.showAggregations&&1<t.availableAggregations.length&&e.model._options.OptionsManager.showAggregations&&(this.createArrgDisplay(),this.container.append(this.aggrDisplay)),this.createDragHandle(),this.container.append(this.dragHandle),this.container.toggleClass("wdr-measure",!0===t.isMeasure),this.container.toggleClass("wdr-values",!0===t.isValues),this.container.toggleClass("wdr-selected",!0===t.isSelected),this.container.toggleClass("wdr-level",!0===t.isLevel)},n}(i.renderers.UIItemRenderer);t.FieldItemRenderer=n}(t.renderers||(t.renderers={}))}((t=e._view||(e._view={})).config||(t.config={}))}(r||(r={})),function(e){!function(e){var t,n,r;n=(t=e.config||(e.config={})).renderers||(t.renderers={}),r=function(t){function n(e,n){void 0===e&&(e=null);var i=t.call(this)||this;return i.data=e,i.createIconDisplay(),i.createTextDisplay(),i}return h(n,t),n.prototype.createIconDisplay=function(){null==this.iconDisplay&&(this.iconDisplay=new i.UIElement("span"),this.iconDisplay.attr("id","wdr-icon-display"))},n.prototype.createMoreIconDisplay=function(){null==this.moreIconDisplay&&(this.moreIconDisplay=new i.UIElement("span"),this.moreIconDisplay.attr("id","wdr-moreicon-display"))},n.prototype.createTextDisplay=function(){null==this.textDisplay&&(this.textDisplay=new i.UIElement("span"),this.textDisplay.attr("id","wdr-text-display"))},n.prototype.createArrgDisplay=function(){null==this.aggrDisplay&&(this.aggrDisplay=new i.UIElement("span"),this.aggrDisplay.attr("id","wdr-aggr-display"))},n.prototype.createCalcDisplay=function(){null==this.calcDisplay&&(this.calcDisplay=new i.UIElement("span"),this.calcDisplay.attr("id","wdr-calc-display"))},n.prototype.createDragHandle=function(){null==this.dragHandle&&(this.dragHandle=new i.UIElement("span"),this.dragHandle.attr("id","wdr-drag-handle"))},n.prototype.draw=function(){var t=this.getData();this.container.empty(),this.container.append(this.iconDisplay),t.isLevelFolder&&(this.createMoreIconDisplay(),this.container.append(this.moreIconDisplay)),this.textDisplay.text(t[this.getLabelField()]),this.textDisplay.attr("title",t[this.getLabelField()]),this.container.append(this.textDisplay),!0===t.isMeasure&&!0===t.calculated&&!0===t.showAggregations&&(this.createCalcDisplay(),this.container.append(this.calcDisplay)),t.isFolder||t.isMeasuresFolder?null!=this.dragHandle&&this.dragHandle.remove():(this.createDragHandle(),this.container.append(this.dragHandle));for(var n=!0===t.isSelected||null!=t.measureItem&&!0===t.measureItem.isSelected,i=1;10>i;i++)this.container.toggleClass("wdr-level-"+i,t.level===i);this.container.toggleClass("wdr-selected",!0===n),this.container.toggleClass("wdr-checked",!0!==t.isFolder&&!0!==t.isLevel&&!0===n),this.container.toggleClass("wdr-unchecked",!0!==t.isFolder&&!0!==t.isLevel&&!0!==n),this.container.toggleClass("wdr-measure",!0===t.isMeasure),this.container.toggleClass("wdr-folder",!0===t.isFolder||!0===t.isLevelFolder),this.container.toggleClass("wdr-level-folder",!0===t.isLevelFolder),this.container.toggleClass("wdr-level",!0===t.isLevel),this.container.toggleClass("wdr-measures-folder",!0===t.isMeasuresFolder),this.container.toggleClass("wdr-measures-calculated-folder",!0===t.isMeasuresFolder&&!0===t.isCalculatedMeasuresFolder),this.container.toggleClass("wdr-calculated",!0===t.calculated),this.container.toggleClass(e.grid.vo.GridStyleName.COLLAPSED,(!0===t.isFolder||!0===t.isLevelFolder)&&!0!==t.isExpanded),this.container.toggleClass(e.grid.vo.GridStyleName.EXPANDED,(!0===t.isFolder||!0===t.isLevelFolder)&&!0===t.isExpanded)},n}(i.renderers.UIItemRenderer),n.SelectableItemRenderer=r}(e._view||(e._view={}))}(r||(r={})),function(e){var t;!function(t){!function(t){var n=function(){function t(){this.newCalculated=[]}return t.prototype.update=function(t,n){this._structure=t,this._slice=n,this.hierarchies=[];var i,r=null,o=this._structure.calculatedMeasures;if(null!=this._slice){r=this._slice.flatten(!0);for(var s=0;s<r.length;s++)i=r.getItemAt(s),o.keyExists(i.uniqueName)&&((i=o.getItem(i.uniqueName)).showAggregations=e.model._options.OptionsManager.showAggregations,i.isMeasure=!0),i.isSelected=!0,this.hierarchies.push(i)}var a=[],l=this._structure.allHierarchies(!1);for(s=0;s<l.length;s++)i=l.getItemAt(s),null==r||r.keyExists(i.uniqueName)||(i.isSelected=!1,a.push(i));for(s=0;s<o.length;s++)i=o.getItemAt(s),null==r||r.keyExists(i.uniqueName)||(i.isSelected=n.measures_.keyExists(i.uniqueName)||-1<this.newCalculated.indexOf(i.uniqueName),i.showAggregations=e.model._options.OptionsManager.showAggregations,i.isMeasure=!0,a.push(i));for(a.sort((function(e,t){return e.caption<t.caption?-1:e.caption>t.caption?1:0})),s=0;s<a.length;s++)this.hierarchies.push(i=a[s])},t.prototype.isValidSlice=function(){return!0},t.prototype.toPlainArray=function(e,t){for(var n=[],i=0;i<t.length;i++){var r=e[t[i]];r.isSelected&&n.push(r.uniqueName)}return n},t.prototype.getSlice=function(e){var t=this._slice.clone();e=this.toPlainArray(this.hierarchies,e),t.flatOrder=e;for(var n,i=t.flatten(!0),r=t.measures_,o=0;o<e.length;o++){var s=e[o];i.keyExists(s)||((n=this._structure.allHierarchies().getItem(s))?t.rows.addItem(s,n):this._structure.calculatedMeasures.keyExists(s)&&(r.addItem(s,this._structure.calculatedMeasures.getItem(s)),t.measures_=r))}for(o=0;o<i.length;o++)n=i.getItemAt(o),-1==e.indexOf(n.uniqueName)&&(t.columns.keyExists(n.uniqueName)&&t.columns.removeItem(n.uniqueName),t.rows.keyExists(n.uniqueName)&&t.rows.removeItem(n.uniqueName),null==(s=this._structure.hierarchyToMeasure(n.uniqueName))&&(s=this._structure.calculatedMeasures.getItem(n.uniqueName)),r.keyExists(s.uniqueName)&&r.removeItem(s.uniqueName));return t.measures_=r,this.newCalculated=[],t},t.prototype.onCalculatedValueAdded=function(e){if(null!=this._slice&&null!=this._structure){this.update(this._structure,this._slice);var t=s.ArrayUtils.find(this.hierarchies,e,"uniqueName");null!=t&&(t.isSelected=!0),this.newCalculated.push(e)}},t.prototype.onCalculatedValueRemoved=function(e){null!=this._slice&&null!=this._structure&&this.update(this._structure,this._slice)},t.prototype.isSliceDifferent=function(e){e=e.flatten(!0);var t=this._slice.flatten(!0);if(e.length!=t.length)return!0;for(var n=0;n<e.length;n++)if(e.getKeyAt(n)!=t.getKeyAt(n))return!0;return!1},t.prototype.getSelectAllSelection=function(){for(var e=0,t=0;t<this.hierarchies.length;t++)this.hierarchies[t].isSelected&&e++;return 0==e?i.UICheckBox.UNSELECTED:e==this.hierarchies.length?i.UICheckBox.SELECTED:i.UICheckBox.SEMI_SELECTED},t}();t.FlatFieldsModel=n}(t.flat||(t.flat={}))}((t=e._view||(e._view={})).config||(t.config={}))}(r||(r={})),function(e){var n,r,o,a;n=e._view||(e._view={}),r=n.config||(n.config={}),o=r.flat||(r.flat={}),a=function(a){function l(e){var n=a.call(this)||this;return n.type="flat",n.calculatedValueAddedHandler=function(e){return n.onCalculatedValueAdded(e)},n.calculatedValueRemovedHandler=function(e){return n.onCalculatedValueRemoved(e)},n.model_=new o.FlatFieldsModel,n.view=new o.FlatFieldsView(n,e),n.view.addEventListener(t._Event.CLOSED,(function(e){return n.dispatch(e)})),n.view.btnOk&&n.view.btnOk.addEventListener(i.UIButton.CLICK_EVENT,(function(){return n.onOkClick()})),n.view.btnCancel&&n.view.btnCancel.addEventListener(i.UIButton.CLICK_EVENT,(function(){return n.onCancelClick()})),n.view.lstHierarchies&&(n.view.lstHierarchies.container.addEventListener("click",(function(e){return n.onHierarchyFieldClick(e)})),n.view.lstHierarchies.container.droppable({onDrop:function(e,t,i,r){return n.onDrop(e,t,i,r)},onDragEnter:function(e,t,i,r){return n.onDragEnterOrOver(e,t,i,r)},onDragOver:function(e,t,i,r){return n.onDragEnterOrOver(e,t,i,r)},onDragLeave:function(e,t,i,r){return n.onDragLeave(e,t,i,r)},itemSelector:"li"})),n.view.selectAllCbx&&n.view.selectAllCbx.addEventListener(t._Event.CHANGE,(function(){return n.onSelectAllChange()})),n.view.btnAddMeasure&&n.view.btnAddMeasure.addEventListener(i.UIButton.CLICK_EVENT,(function(){return n.onAddMeasureClick()})),n}return h(l,a),l.prototype.onDragEnterOrOver=function(e,t,n,r){this.removeDropIndicator(),e&&e.closest("ul")&&(t&&t.addClass("wdr-droppable-valid"),e.addClass("wdr-drag-over"),this.showIndicator(i.UIElement.convert(r.target)))},l.prototype.onDragLeave=function(e,t,n,i){this.removeDropIndicator(),e&&e.closest("ul")&&(t&&t.removeClass("wdr-droppable-valid"),t&&t.removeClass("wdr-droppable-invalid"),e.removeClass("wdr-drag-over"))},l.prototype.onDrop=function(e,t,n,i){this.removeDropIndicator(),e&&e.closest("ul")&&(e=parseInt(e.attr("data-index")))!=(n=n?parseFloat(n.attr("data-index")):this.view.lstHierarchies.getDataProvider().length)&&(e<n&&(n-=1),(t=this.view.lstHierarchies.getDataProvider()).splice(n,0,t.splice(e,1)[0]),this.updateView())},l.prototype.onCancelClick=function(){this.view.close()},l.prototype.onOkClick=function(){this.applySlice(),this.view.close()},l.prototype.onSelectAllChange=function(){for(var e=this.view.selectAllCbx.checked,t=this.model_.hierarchies,n=0;n<t.length;n++)t[n].isSelected=e;this.view.lstHierarchies.validateNow()},l.prototype.onHierarchyFieldClick=function(t){if(null!=(r=i.UIElement.convert(t.target).closest("li"))){var r=parseInt(r.attr("data-index")),o=this.model_.hierarchies[r];"wdr-calc-display"==i.UIElement.convert(t.target).attr("id")?e.model.PivotModel.getInstance().dispatchWith(n.ViewEvent.CALCULATED_VIEW_OPEN,null,{measureName:o.uniqueName}):(o.isSelected=!o.isSelected,this.view.lstHierarchies&&this.view.lstHierarchies.validateItemAt(r),this.view.selectAllCbx&&this.view.selectAllCbx.setSelection(this.model_.getSelectAllSelection()))}},l.prototype.onAddMeasureClick=function(){e.model.PivotModel.getInstance().dispatchWith(n.ViewEvent.CALCULATED_VIEW_OPEN),e.model.PivotModel.getInstance().addEventListener(n.calculated.CalculatedView.EVENT_CALCULATED_VALUE_ADDED,this.calculatedValueAddedHandler),e.model.PivotModel.getInstance().addEventListener(n.calculated.CalculatedView.EVENT_CALCULATED_VALUE_REMOVED,this.calculatedValueRemovedHandler)},l.prototype.onCalculatedValueAdded=function(t){e.model.PivotModel.getInstance().removeEventListener(n.calculated.CalculatedView.EVENT_CALCULATED_VALUE_ADDED,this.calculatedValueAddedHandler),this.model_.onCalculatedValueAdded(t.data.measureUniqueName),this.updateView()},l.prototype.onCalculatedValueRemoved=function(t){e.model.PivotModel.getInstance().removeEventListener(n.calculated.CalculatedView.EVENT_CALCULATED_VALUE_REMOVED,this.calculatedValueRemovedHandler),this.model_.onCalculatedValueRemoved(t.data),this.updateView()},l.prototype.updateView=function(){var e=this;if(this.view.lstHierarchies){this.view.lstHierarchies.setDataProvider(this.model_.hierarchies),this.validateSlice(),this.view.lstHierarchies.validateNow();var t={createHelper:function(t){return e.view.createHelper(t)}};s.browserVersion().isMobile&&(t.handle="#wdr-drag-handle");for(var n=this.view.lstHierarchies.container.find("li",!0),i=0;i<n.length;i++)n[i].draggable(t)}},l.prototype.update=function(e,t){this.model_.update(e,t),this.updateView(),this.view.selectAllCbx&&this.view.selectAllCbx.setSelection(this.model_.getSelectAllSelection()),this.view.setLabels()},l.prototype.validateSlice=function(){this.view.btnOk&&this.view.btnOk.setEnabled(this.model_.isValidSlice())},l.prototype.applySlice=function(){for(var e=[],t=this.view.lstHierarchies.container.find("li",!0),n=0;n<t.length;n++){var i=parseInt(t[n].attr("data-index"));e.push(i)}e=this.model_.getSlice(e),this.model_.isSliceDifferent(e)&&this.dispatchWith(r.FieldsView.EVENT_APPLY_SLICE,this,e)},l.prototype.showIndicator=function(e){var t=e.closest("li");null!=t?(this._dropIndicator=this.createDropIndicator(),t.before(this._dropIndicator)):null!=(e=e.closest("ul"))&&(this._dropIndicator=this.createDropIndicator(),0<e.element.children.length?e.append(this._dropIndicator):e.prepend(this._dropIndicator))},l.prototype.createDropIndicator=function(){return new i.UIElement("div","wdr-drop-indicator")},l.prototype.removeDropIndicator=function(){this._dropIndicator&&(this._dropIndicator.removeFromParent(!0),this._dropIndicator=null)},l}(t.EventDispatcher),o.FlatFieldsController=a}(r||(r={})),function(e){var t;!function(t){var n,r;n=t.flat||(t.flat={}),r=function(n){function r(e,t){var i=n.call(this,t)||this;return i.addClass("wdr-flat-fields"),i.controller=e,i.setControls(),i}return h(r,n),r.prototype.setControls=function(){var t=new i.UIComponentBase("div","wdr-popup-header wdr-ui-row");this.addChild(t);var n=new i.UIComponentBase("div","wdr-ui-col wdr-vam");t.addChild(n),this.lblTitle=new i.UILabel(e.model._labels.Labels.FIELDS_LIST_TITLE),this.lblTitle.addClass("wdr-popup-title"),n.addChild(this.lblTitle),this.lblSubtitle=new i.UILabel(e.model._labels.Labels.FIELDS_LIST_FLAT_HIERARCHY_BOX),this.lblSubtitle.addClass("wdr-popup-subtitle"),n.addChild(this.lblSubtitle),n=new i.UIComponentBase("div","wdr-ui-col wdr-vam wdr-tar wdr-ui-btns-row"),t.addChild(n),this.btnAddMeasure=new i.UIButton("wdr-ui-btn-light wdr-icon-act_calc"),this.btnAddMeasure.setId("wdr-btn-add-measure"),n.addChild(this.btnAddMeasure),this.btnCancel=new i.UIButton,this.btnCancel.setLabel(e.model._labels.Labels.BUTTON_CANCEL),this.btnOk=new i.UIButton("wdr-ui-btn-dark"),this.btnOk.setLabel(e.model._labels.Labels.BUTTON_APPLY),s.OSUtil.isIOS||s.OSUtil.isMac?(n.addChild(this.btnCancel),n.addChild(this.btnOk)):(n.addChild(this.btnOk),n.addChild(this.btnCancel)),n=new i.UIComponentBase("div","wdr-popup-content"),this.addChild(n),t=new i.UIComponentBase("div","wdr-list-wrap"),n.addChild(t),n=new i.UIComponentBase("div","wdr-list-header"),t.addChild(n),this.selectAllCbx=new i.UICheckBox,this.selectAllCbx.setId("wdr-select-all-cbx"),this.selectAllCbx.setLabel(e.model._labels.Labels.FILTER_SELECT_ALL),n.addChild(this.selectAllCbx),n=new i.UIComponentBase("div","wdr-list-content"),t.addChild(n),this.lstHierarchies=new i.lists.UIList,this.lstHierarchies.setId("wdr-lst-hierarchies"),this.lstHierarchies.setItemRendererFactory(this.selectableItemRendererFactory),this.lstHierarchies.setLabelField("caption"),n.addChild(this.lstHierarchies)},r.prototype.selectableItemRendererFactory=function(e,n){var i=new t.renderers.SelectableItemRenderer(e,n);return i.setData(e),i.setIndex(n),i},r.prototype.setLabels=function(){this.lblTitle.setLabel(e.model._labels.Labels.FIELDS_LIST_TITLE),this.lblSubtitle.setLabel(e.model._labels.Labels.FIELDS_LIST_FLAT_HIERARCHY_BOX),this.btnCancel.setLabel(e.model._labels.Labels.BUTTON_CANCEL),this.btnOk.setLabel(e.model._labels.Labels.BUTTON_APPLY),this.selectAllCbx.setLabel(e.model._labels.Labels.FILTER_SELECT_ALL)},r.prototype.createHelper=function(e){var t=new i.UIElement("span");return t.attr("id","wdr-drag-handle"),t.addClass("wdr-helper"),t.addClass("wdr-draggable"),t.toggleClass("wdr-values",e.hasClass("wdr-values")),t.css("width",e.css("width")),t.css("position","absolute"),t.css("z-index",100),t.attr("data-index",e.attr("data-index")),t.text(e.text()),t},r}(i.containers.UIPopup),n.FlatFieldsView=r}((t=e._view||(e._view={})).config||(t.config={}))}(r||(r={})),function(e){!function(e){var n,r;n=e.calculated||(e.calculated={}),r=function(i){function r(){var r=i.call(this,e.PivotView.stage.container)||this;return r.setId("wdr-calculated-view"),r.container.disableSelection(),r.overlay.addClass("wdr-calculated-view-overlay"),r.controller=new n.CalculatedController,r.controller.addEventListener(t._Event.CLOSE,(function(){return r.close()})),r.addChild(r.controller.view),r}return h(r,i),r.prototype.openView=function(e){this.controller.update(e),this.open()},r.prototype.close=function(){i.prototype.close.call(this),this.controller.clear()},r.EVENT_CALCULATED_VALUE_ADDED="EVENT_CALCULATED_VALUE_ADDED",r.EVENT_CALCULATED_VALUE_REMOVED="EVENT_CALCULATED_VALUE_REMOVED",r.addingMeasureFlag=!1,r}(i.containers.UIPopup),n.CalculatedView=r}(e._view||(e._view={}))}(r||(r={})),function(e){var t,n,i;t=e._view||(e._view={}),n=t.calculated||(t.calculated={}),i=function(){function i(){this.model_=e.model.PivotModel.getInstance(),this.funcButtonsDataProvider=[{name:"_addBtn",label:"+",func:e.data_.consts.FunctionName.ADD},{name:"_subtractBtn",label:"-",func:e.data_.consts.FunctionName.SUBTRACT},{name:"_multiplyBtn",label:"\xd7",func:e.data_.consts.FunctionName.MULTIPLY},{name:"_divideBtn",label:"\xf7",func:e.data_.consts.FunctionName.DIVIDE},{name:"_powerBtn",label:"^",func:e.data_.consts.FunctionName.POWER},{name:"_equalBtn",label:"=",func:e.data_.consts.FunctionName.EQUAL},{name:"_lessBtn",label:"<",func:e.data_.consts.FunctionName.LESS},{name:"_greaterBtn",label:">",func:e.data_.consts.FunctionName.GREATER},{name:"_lessOrEqualBtn",label:"\u2264",func:e.data_.consts.FunctionName.LESS_OR_EQUAL},{name:"_greaterOrEqualBtn",label:"\u2265",func:e.data_.consts.FunctionName.GREATER_OR_EQUAL},{name:"_equalBtn2",label:"==",func:e.data_.consts.FunctionName.EQUAL_2},{name:"_notEqualBtn",label:"!=",func:e.data_.consts.FunctionName.NOT_EQUAL},{name:"_orBtn",label:"OR",func:e.data_.consts.FunctionName.OR},{name:"_andBtn",label:"AND",func:e.data_.consts.FunctionName.AND},{name:"_ifBtn",label:"IF",func:e.data_.consts.FunctionName.IF},{name:"_absBtn",label:"ABS",func:e.data_.consts.FunctionName.ABS},{name:"_minBtn",label:"MIN",func:e.data_.consts.FunctionName.MIN},{name:"_maxBtn",label:"MAX",func:e.data_.consts.FunctionName.MAX}]}return i.prototype.update=function(e){s.nullOrEmpty(e)||(this.currentMeasure=this.model_.cube_.structure_.findMeasure(e))},Object.defineProperty(i.prototype,"showAggregations",{get:function(){return!0},enumerable:!0,configurable:!0}),i.prototype.getAllMeasures=function(){return this.model_.getAllMeasures()},i.prototype.removeMeasure=function(e){n.CalculatedView.addingMeasureFlag=!0,this.model_.removeCalculatedMeasure(e.uniqueName),this.model_.dispatchWith(n.CalculatedView.EVENT_CALCULATED_VALUE_REMOVED,null,e.uniqueName),s.fmSetTimeout((function(){n.CalculatedView.addingMeasureFlag=!1}),1e3)},i.prototype.addMeasure=function(i,r,o){var a;void 0===r&&(r=""),void 0===o&&(o=!1),r=0<r.length?r:this.generateMeasureName(),null!=this.currentMeasure?this.currentMeasure.caption==r&&this.currentMeasure.formula==i&&this.currentMeasure.individual==o||((a=new e.data_._structure.GenericMeasure(this.currentMeasure.uniqueName,r)).formula=i,a.individual=o):((a=new e.data_._structure.GenericMeasure(r,r)).formula=i,a.individual=o),null!=a&&(n.CalculatedView.addingMeasureFlag=!0,t.config._pivot.PivotFieldsModel.expandFormulas=!0,this.model_.addCalculatedMeasure(a),this.model_.dispatchWith(n.CalculatedView.EVENT_CALCULATED_VALUE_ADDED,null,{measureUniqueName:a.uniqueName}),s.fmSetTimeout((function(){n.CalculatedView.addingMeasureFlag=!1}),1e3))},i.prototype.isValidFormula=function(e){return null!=(e=(new s.Lexer).parse(e))&&null!=e.length},i.prototype.generateMeasureName=function(){for(var t=e.model._labels.Labels.CALCULATED_VIEW_FORMULA+" #",n=0,i=this.model_.cube_.structure_.calculatedMeasures,r=RegExp(e.model._labels.Labels.CALCULATED_VIEW_FORMULA+" #"),o=0;o<i.length;o++){var s=i.getItemAt(o).caption;r.test(s)&&(n=Math.max(n,parseInt(s.substr(e.model._labels.Labels.CALCULATED_VIEW_FORMULA.length+2))))}return t+(n+1)},i}(),n.CalculatedModel=i}(r||(r={})),function(e){var n,r,o;n=e._view||(e._view={}),r=n.calculated||(n.calculated={}),o=function(o){function a(){var e=o.call(this)||this;if(e.model_=new r.CalculatedModel,e.view=new r.CalculatedViewContent(e),e.view.removeButton&&e.view.removeButton.addEventListener(i.UIButton.CLICK_EVENT,(function(t){return e.onRemoveBtnClick(t)})),e.view.measuresDragList&&e.view.measuresDragList.setItemRendererFactory((function(t,n){return e.fieldItemRendererFactory(t,n)})),e.view.formulaInput&&e.view.formulaInput.container.droppable({onDrop:function(t){return e.onMeasureDrop(t)},onDragEnter:function(){return e.onFormulaDragEnterOrOver()},onDragOver:function(){return e.onFormulaDragEnterOrOver()},onDragLeave:function(){return e.onFormulaDragLeave()},itemSelector:"li"}),e.view.btnOk&&e.view.btnOk.addEventListener(i.UIButton.CLICK_EVENT,(function(){return e.onOkClick()})),e.view.btnCancel&&e.view.btnCancel.addEventListener(i.UIButton.CLICK_EVENT,(function(){return e.onCancelClick()})),e.view.aggrView&&e.view.aggrView.addEventListener(t._Event.CHANGE,(function(t){return e.onAggrChange(t)})),e.view.funcBtns)for(var n=0;n<e.view.funcBtns.length;n++)e.view.funcBtns[n].addEventListener(i.UIButton.CLICK_EVENT,(function(t){return e.onFuncBtnClick(t)}));return e}return h(a,o),a.prototype.onFormulaDragEnterOrOver=function(){this.view.formulaInput.addClass("wdr-droppable-over")},a.prototype.onFormulaDragLeave=function(){this.view.formulaInput.removeClass("wdr-droppable-over")},a.prototype.onMeasureDrop=function(e){this.view.formulaInput.removeClass("wdr-droppable-over"),e=parseInt(e.attr("data-index")),e=this.view.measuresDragList.getDataProvider()[e],this.addNewFieldToFormula(e)},a.prototype.fieldItemRendererFactory=function(t,i){var r=this,o=new n.config.renderers.FieldItemRenderer;return o.setData(t),o.setIndex(i),o.setLabelFunction((function(t){return t.name+" ("+e.data_.consts.AggregationName.aggregationCaption(t.aggregation)+")"})),o.addEventListener("click",(function(e){return r.onAggrClick(e)})),o.addEventListener("dblclick",(function(e){return r.onItemDblClick(e)})),o},Object.defineProperty(a.prototype,"funcButtonsDataProvider",{get:function(){return this.model_.funcButtonsDataProvider},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"isFormulaEmpty",{get:function(){return 0==this.view.formulaInput.getText().length},enumerable:!0,configurable:!0}),a.prototype.update=function(e){this.model_.update(e),null!=this.model_.currentMeasure?(this.view.nameInput&&(this.view.nameInput.setText(this.model_.currentMeasure.caption),this.view.nameInput.container.toggleClass("wdr-compact",!0)),this.view.formulaInput&&this.view.formulaInput.setText(this.model_.currentMeasure.formula),this.view.removeButton&&this.view.removeButton.isVisible(!0)):(this.view.nameInput&&this.view.nameInput.container.toggleClass("wdr-compact",!1),this.view.cbxIndiValues&&(this.view.cbxIndiValues.checked=!1),this.view.removeButton&&this.view.removeButton.isVisible(!1)),this.view.cbxIndiValues&&(this.view.cbxIndiValues.checked=!!this.model_.currentMeasure&&this.model_.currentMeasure.individual),this.view.setLabels(),this.updateMeasuresList()},a.prototype.updateMeasuresList=function(){for(var t=this,n=this.model_.getAllMeasures(),i=[],r=0;r<n.length;r++)null!=this.model_.currentMeasure&&this.model_.currentMeasure.uniqueName==n[r].uniqueName||(n[r].isMeasure=!0,n[r].showAggregations=this.model_.showAggregations&&!n[r].calculated&&n[r].type!=e.data_.types.MeasureType.COUNT,i.push(n[r]));if(i.sort(this.compareFunction),this.view.measuresDragList)for(this.view.measuresDragList.setDataProvider(i),n={createHelper:function(e){return t.view.createHelper(e)}},s.browserVersion().isMobile&&(n.handle="#wdr-drag-handle"),i=this.view.measuresDragList.container.find("li",!0),r=0;r<i.length;r++)i[r].draggable(n)},a.prototype.clear=function(){this.view.nameInput&&this.view.nameInput.setText(""),this.view.formulaInput&&this.view.formulaInput.setText(""),this.model_.currentMeasure=null},a.prototype.compareFunction=function(e,t){return e.name>t.name?1:-1},a.prototype.onRemoveBtnClick=function(e){s.browserVersion().isMobile?this.onRemoveMeasure():this.showRemoveAlert()},a.prototype.showRemoveAlert=function(){var t,n,i=this;s.OSUtil.isIOS||s.OSUtil.isMac?(t=[e.model._labels.Labels.BUTTON_NO,e.model._labels.Labels.BUTTON_YES],n=[null,function(){return i.onRemoveMeasure()}]):(t=[e.model._labels.Labels.BUTTON_YES,e.model._labels.Labels.BUTTON_NO],n=[function(){return i.onRemoveMeasure()},null]);var r=e.model.XSSCheck.valid(this.model_.currentMeasure.caption)?this.model_.currentMeasure.caption:e.model.XSSCheck.validate(this.model_.currentMeasure.caption);e.uialert(e.model._labels.Labels.CALCULATED_VIEW_REMOVE_VALUE_MESSAGE,s.StringUtils.bind(e.model._labels.Labels.CALCULATED_VIEW_REMOVE_VALUE_TITLE,r),e.AlertType.ALERT,t,n)},a.prototype.onRemoveMeasure=function(){this.model_.removeMeasure(this.model_.currentMeasure),this.close()},a.prototype.onAggrClick=function(e){if("wdr-aggr-display"==e.target.id){var t=parseInt(i.UIElement.convert(e.target).closest("li").attr("data-index"));t=this.view.measuresDragList.getDataProvider()[t],this.view.aggrView.showWith(t,i.UIElement.convert(e.target))}},a.prototype.onItemDblClick=function(e){e=parseInt(i.UIElement.convert(e.target).closest("li").attr("data-index")),e=this.view.measuresDragList.getDataProvider()[e],this.addNewFieldToFormula(e)},a.prototype.addNewFieldToFormula=function(t){null!=t&&this.insertText(t.aggregation==e.data_.consts.AggregationName.NONE?s.StringUtils.bind('"{0}"',t.uniqueName):s.StringUtils.bind('{0}("{1}")',t.aggregation,t.uniqueName))},a.prototype.onAggrChange=function(e){var t=e.data.fieldData;t.aggregation=(e=e.data.aggrData).aggregation,t.caption=e.caption+" of "+t.name,this.view.measuresDragList.validateItem(t)},a.prototype.onFuncBtnClick=function(t){t=parseInt(t.target.container.attr("data-index")),(t=this.funcButtonsDataProvider[t].func)==e.data_.consts.FunctionName.IF||t==e.data_.consts.FunctionName.ABS||t==e.data_.consts.FunctionName.MIN||t==e.data_.consts.FunctionName.MAX||t==e.data_.consts.FunctionName.VALUE?this.addSpecialOperation(t):this.addOperation(t)},a.prototype.onCancelClick=function(){this.close()},a.prototype.onOkClick=function(){var t=this.view.formulaInput.getText();0==t.length?this.close():0==this.model_.isValidFormula(t)?e.uialert(e.model._labels.Labels.MESSAGE_WRONG_FORMULA_FORMAT):(this.model_.addMeasure(t,this.view.nameInput.getText(),this.view.cbxIndiValues.checked),this.close())},a.prototype.close=function(){this.dispatchWith(t._Event.CLOSE)},a.prototype.insertText=function(e,t){void 0===t&&(t=0);var n=this.view.formulaInput.getSelectionBeginIndex();this.view.formulaInput.getSelectionEndIndex();var i=this.view.formulaInput.getText();-1==n&&(n=this.lastPosition),0==n||" "==i.charAt(n-1)?(this.view.formulaInput.insertText(e+" "),this.lastPosition=n+e.length+1):(this.view.formulaInput.insertText(" "+e+" "),this.lastPosition=n+e.length+2),this.lastPosition-=t,this.view.formulaInput.setSelection(this.lastPosition)},a.prototype.addOperation=function(e){this.insertText(e)},a.prototype.addSpecialOperation=function(e){var t=this.view.formulaInput.getSelectionBeginIndex(),n=this.view.formulaInput.getSelectionEndIndex(),i=this.view.formulaInput.getText();"if"==e?this.insertText(e+"("+i.slice(t,n)+", , )",6):this.insertText(e+"("+i.slice(t,n)+")",2)},a}(t.EventDispatcher),r.CalculatedController=o}(r||(r={})),function(e){var t,n,r;n=(t=e._view||(e._view={})).calculated||(t.calculated={}),r=function(n){function r(e){var t=n.call(this)||this;return t.controller=e,t.setControls(),t}return h(r,n),r.prototype.setControls=function(){var n=this,r=new i.UIComponentBase("div","wdr-popup-header wdr-ui-row");this.addChild(r);var o=new i.UIComponentBase("div","wdr-ui-col wdr-vam");r.addChild(o),this.titleLabel=new i.UILabel(e.model._labels.Labels.CALCULATED_VIEW_TITLE),this.titleLabel.addClass("wdr-popup-title"),o.addChild(this.titleLabel),this.subtitleLabel=new i.UILabel(e.model._labels.Labels.CALCULATED_VIEW_MEASURE_BOX),this.subtitleLabel.addClass("wdr-popup-subtitle"),o.addChild(this.subtitleLabel),o=new i.UIComponentBase("div","wdr-ui-col wdr-vam wdr-tar wdr-ui-btns-row"),r.addChild(o),this.removeButton=new i.UIButton("wdr-ui-btn-light wdr-icon-act_trash"),this.removeButton.setId("wdr-remove-btn"),this.removeButton.container.attr("title",e.model._labels.Labels.CALCULATED_VIEW_REMOVE_VALUE),o.addChild(this.removeButton),this.btnCancel=new i.UIButton("wdr-ui-btn"),this.btnCancel.setLabel(e.model._labels.Labels.BUTTON_CANCEL),this.btnOk=new i.UIButton("wdr-ui-btn-dark"),this.btnOk.setLabel(e.model._labels.Labels.BUTTON_APPLY),s.OSUtil.isIOS||s.OSUtil.isMac?(o.addChild(this.btnCancel),o.addChild(this.btnOk)):(o.addChild(this.btnOk),o.addChild(this.btnCancel)),r=new i.UIComponentBase("div","wdr-popup-content"),this.addChild(r),this.nameInput=new i.UITextInput,this.nameInput.setId("wdr-name-input"),this.nameInput.setPrompt(e.model._labels.Labels.CALCULATED_VIEW_MEASURE_NAME),r.addChild(this.nameInput),this.measuresDragList=new i.lists.UIList,this.measuresDragList.setId("wdr-lst-measures"),this.measuresDragList.useCache=!1,this.measuresDragList.setLabelField("caption"),r.addChild(this.measuresDragList),this.cbxIndiValues=new i.UICheckBox,this.cbxIndiValues.setLabel(e.model._labels.Labels.CALCULATED_VIEW_CALCULATE_INDI_VALUES),r.addChild(this.cbxIndiValues),this.funcBtnsContainer=new i.UIComponentBase("div","wdr-ui-row"),this.funcBtnsContainer.setId("wdr-func-btn-group"),r.addChild(this.funcBtnsContainer),this.funcBtns=[],o=this.controller.funcButtonsDataProvider;for(var a=0;a<o.length;a++){var l=new i.UIButton("wdr-ui-col-9 wdr-calc-action");l.removeClass("wdr-ui-btn"),l.setName(o[a].name),l.setLabel(o[a].label),l.container.attr("data-index",a),this.funcBtnsContainer.addChild(l),this.funcBtns.push(l)}o=new i.UIComponentBase("div","wdr-formula-wrap"),r.addChild(o),this.formulaInput=new i.UITextArea,this.formulaInput.setId("wdr-formula-input"),this.formulaInput.addEventListener(i.UITextInput.CHANGE_EVENT,(function(){return n.onFormulaChange()})),o.addChild(this.formulaInput),this.lblFormulaPrompt=new i.UILabel(e.model._labels.Labels.CALCULATED_VIEW_FORMULA_PROMPT),this.lblFormulaPrompt.addClass("wdr-prompt"),o.addChild(this.lblFormulaPrompt),this.aggrView=new t.config.AggregationsView,this.aggrView.setId("wdr-aggregations-view"),this.aggrView.hide(),r.addChild(this.aggrView)},r.prototype.setLabels=function(){this.titleLabel.setLabel(e.model._labels.Labels.CALCULATED_VIEW_TITLE),this.subtitleLabel.setLabel(e.model._labels.Labels.CALCULATED_VIEW_MEASURE_BOX),this.btnOk.setLabel(e.model._labels.Labels.BUTTON_APPLY),this.btnCancel.setLabel(e.model._labels.Labels.BUTTON_CANCEL),this.nameInput.setPrompt(e.model._labels.Labels.CALCULATED_VIEW_MEASURE_NAME),this.cbxIndiValues.setLabel(e.model._labels.Labels.CALCULATED_VIEW_CALCULATE_INDI_VALUES),this.lblFormulaPrompt.setLabel(e.model._labels.Labels.CALCULATED_VIEW_FORMULA_PROMPT),this.removeButton.container.attr("title",e.model._labels.Labels.CALCULATED_VIEW_REMOVE_VALUE)},r.prototype.createHelper=function(e){var t=new i.UIElement("span");return t.attr("id","wdr-drag-handle"),t.addClass("wdr-helper"),t.addClass("wdr-draggable"),t.css("width",e.css("width")),t.css("position","absolute"),t.css("z-index",100),t.attr("data-index",e.attr("data-index")),t.text(e.text()),t},r.prototype.onFormulaChange=function(){this.lblFormulaPrompt.isVisible(0==this.formulaInput.getText().length)},r}(i.UIComponentBase),n.CalculatedViewContent=r}(r||(r={})),function(e){!function(e){var n=function(){function e(){}return e.FILTER_OPEN="FILTER_OPEN",e.FILTER_CLOSE="FILTER_CLOSE",e.FILTER_SELECTION_CHANGE="FILTER_SELECTION_CHANGE",e.FILTER_COLLAPSE_EXPAND="FILTER_COLLAPSE_EXPAND",e.CALCULATED_VIEW_OPEN="CALCULATED_VIEW_OPEN",e.CALCULATED_VIEW_CLOSE="CALCULATED_VIEW_CLOSE",e.DRILL_THROUGH_OPEN="DRILL_THROUGH_OPEN",e.DRILL_THROUGH_CLOSE="DRILL_THROUGH_CLOSE",e.CONTEXT_MENU_OPEN="CONTEXT_MENU_OPEN",e.CLASSIC_TO_COMPACT="CLASSIC_TO_COMPACT",e.RENDER_COMPLETE="RENDER_COMPLETE",e.BEFORE_GRID_DRAW="beforegriddraw",e.AFTER_GRID_DRAW="aftergriddraw",e}();e.ViewEvent=n;var i=function(e){function t(t){var i=e.call(this,n.FILTER_OPEN)||this;return i.hierarchy=t,i}return h(t,e),t}(t._Event);e.FilterOpenEvent=i}(e._view||(e._view={}))}(r||(r={})),function(e){!function(e){!function(e){var t=function(){function e(){this.allMembers=[],this.selectedMembers=[],this.searchedMembers=[],this.searchPhrase="",this.isAllSelected=!0}return e.prototype.setHierarchy=function(e){this.currentHierarchy=e},e.prototype.getHierarchy=function(){return this.currentHierarchy},e.prototype.setSortType=function(e){this.sortType=e,this.allMembers=this.currentHierarchy.sortChildren(this.currentHierarchy.allMember,!1,this.sortType).toArray()},e.prototype.getSortType=function(){return this.sortType},e.prototype.select=function(e,t){if(this.isAllSelected!=t)this.selectedMembers.push(e);else{var n=this.selectedMembers.indexOf(e);-1<n&&this.selectedMembers.splice(n,1)}this.selectedMembers.length==this.allMembers.length&&this.selectAll(!this.isAllSelected)},e.prototype.search=function(e,t){if(e=e.toLowerCase(),this.searchPhrase===e)t();else if(this.searchPhrase=e,0==this.searchPhrase.length)t();else{this.searchedMembers.length=0;var n=this.allMembers.length,i=0;for(i=0;i<n;i++)s.StringUtils.contains(this.allMembers[i].caption,e)&&this.searchedMembers.push(this.allMembers[i]);t(this.searchedMembers)}},e.prototype.setSearchedMembers=function(e){null!=e?this.searchedMembers=e:this.searchedMembers.length=0},e.prototype.selectAll=function(e){if(this.isSearched())for(var t=this.searchedMembers.length,n=0;n<t;n++)s.StringUtils.contains(this.searchedMembers[n].caption,this.searchPhrase)&&this.select(this.searchedMembers[n],e);else this.isAllSelected=e,this.selectedMembers.length=0},e.prototype.selectDescendants=function(e){},e.prototype.getTotalSelectedLength=function(){var e;return 0<(e=this.isAllSelected||this.isSearched()?this.isAllSelected&&this.isSearched()?this.searchedMembers.length+this.countTheDifference()-this.selectedMembers.length:this.isAllSelected||0!=this.selectedMembers.length?this.allMembers.length-this.selectedMembers.length:this.selectedMembers.length:this.selectedMembers.length)?e:0},e.prototype.countTheDifference=function(){for(var e=0,t=0,n=0;t<this.selectedMembers.length;){for(;n<this.searchedMembers.length&&this.searchedMembers[n].uniqueName!=this.selectedMembers[t].uniqueName;)n++;this.searchedMembers.length==n&&e++,n=0,t++}return e},e.prototype.getSelectedLength=function(){if(this.isSearched()){for(var e=0,t=0;t<this.searchedMembers.length;t++)0>s.ArrayUtils.findIndex(this.selectedMembers,this.searchedMembers[t].uniqueName,"uniqueName")==this.isAllSelected&&e++;return e}return this.getTotalSelectedLength()},e.prototype.setFilterItems=function(e){this.selectedMembers.length=0;var t=e.length;if(this.isAllSelected=0==t,!this.isAllSelected)for(var n=0;n<t;n++)this.selectedMembers.push(e[n])},e.prototype.getFilterItems=function(){var e=0,t=[],n=[],i=(n=this.isSearched()&&this.isAllSelected?this.searchedMembers:this.selectedMembers).length;if(this.isSearched()&&this.isAllSelected)for(n=e=0;e<this.searchedMembers.length;){for(;n<this.selectedMembers.length&&this.searchedMembers[e].uniqueName!=this.selectedMembers[n].uniqueName;)n++;n==this.selectedMembers.length&&t.push(this.searchedMembers[e]),n=0,e++}else for(;e<i;e++)t[e]=n[e];return{items:t,negation:e=(!this.isSearched()||!this.isAllSelected)&&0!=t.length&&this.isAllSelected}},e.prototype.setItems=function(e){this.allMembers=e,this.searchPhrase="",this.searchedMembers.length=0},e.prototype.getItems=function(e,t){for(var n,i=[],r=e,o=RegExp("("+this.searchPhrase+")","i"),s=this.isSearched()?this.searchedMembers:this.allMembers;r<t&&!(r>s.length-1);r++)n={member:n=s[r],label:this.isSearched()?n.caption.replace(o,"<b>$1</b>"):n.caption,isSelected:(-1==this.selectedMembers.indexOf(n)?this.isAllSelected:!this.isAllSelected)?1:0,levelNum:0,rightMargin:t-e<s.length-1?15:0},i.push(n);return i},e.prototype.getLength=function(){return this.isSearched()?this.searchedMembers.length:this.allMembers.length},e.prototype.getTotalLength=function(){return this.getLength()},e.prototype.isSearched=function(){return 0<this.searchPhrase.length},e.prototype.expand=function(e){},e.prototype.collapse=function(e){},e}();e.MembersFilterDataProvider=t}(e.filter||(e.filter={}))}(e._view||(e._view={}))}(r||(r={})),function(e){var t;!function(t){var n=function(){function t(){this.numParentsInSearch=0,this.members=[],this.selectedMembers=[],this.searchedMembers=[],this.partlySelectedMembers=[],this.expandedMembers=[],this.searchPhrase="",this.isAllSelected=!0,this.sortType=e.data_.consts.SortType.UNSORTED}return t.prototype.setHierarchy=function(e){this.currentHierarchy=e,this.members.length=0},t.prototype.getHierarchy=function(){return this.currentHierarchy},t.prototype.setSortType=function(e){this.sortType=e,this.members.length=0,this.insertDescendants(this.currentHierarchy.allMember,-1)},t.prototype.getSortType=function(){return this.sortType},t.prototype.setItems=function(t){for(var n,i=0,r=t.length;i<r;i++)(n=t[i]).isAll||(this.members.push(n),n.isDrilledDown&&n.children&&0<n.children.length&&(this.expandedMembers.push(n),this.setItems(this.sortType===e.data_.consts.SortType.UNSORTED?n.children.toArray():this.currentHierarchy.sortChildren(n,!1,this.sortType).toArray())))},t.prototype.getItems=function(e,t){for(var n,i=e,r=[],o=RegExp("("+this.searchPhrase+")","i"),s=this.isSearched()?this.searchedMembers:this.members;i<t&&!(i>s.length-1);i++)n={member:n=s[i],levelNum:n.level.num,label:this.isSearched()?n.caption.replace(o,"<b>$1</b>"):n.caption,isSelected:this.isSelected(n),isSearched:this.isSearched(),isExpanded:this.isExpanded(n),rightMargin:t-e<s.length-1?17:0},r.push(n);return r},t.prototype.isSelected=function(e){var t=(-1==this.selectedMembers.indexOf(e)?this.isAllSelected:!this.isAllSelected)?1:0;return 0<this.selectedMembers.length&&-1!=this.partlySelectedMembers.indexOf(e)&&(t=-1),t},t.prototype.isExpanded=function(e){return this.isSearched()||e.isLeaf?-1:-1!=this.expandedMembers.indexOf(e)?1:0},t.prototype.getLength=function(){return this.isSearched()?this.searchedMembers.length:this.members.length},t.prototype.getTotalLength=function(){return this.isSearched()?this.searchedMembers.length-this.numParentsInSearch:this.currentHierarchy?this.currentHierarchy.members.length-1:0},t.prototype.select=function(e,t){var n=-1;n=this.selectedMembers.indexOf(e),this.isAllSelected!==t?(-1==n&&this.selectedMembers.push(e),0<e.children.length&&this.pushDescendantsToSelected(e)):(-1!=n&&this.selectedMembers.splice(n,1),0<e.children.length&&this.removeDescendantsFromSelected(e)),-1!=(n=s.ArrayUtils.findIndex(this.partlySelectedMembers,e.uniqueName,"uniqueName"))&&this.partlySelectedMembers.splice(n,1),this.selectParents(e),this.selectedMembers.length===this.currentHierarchy.members.length-1&&(this.selectedMembers.length=0,this.partlySelectedMembers.length=0,this.isAllSelected=!this.isAllSelected)},t.prototype.selectDescendants=function(e){-1==this.partlySelectedMembers.indexOf(e)&&(-1==this.selectedMembers.indexOf(e)?this.removeDescendantsFromSelected(e):this.pushDescendantsToSelected(e))},t.prototype.selectParents=function(e){var t,n=e.parent;if(n&&!n.isAll){e=s.ArrayUtils.findIndex(this.selectedMembers,n.uniqueName,"uniqueName"),t=s.ArrayUtils.findIndex(this.partlySelectedMembers,n.uniqueName,"uniqueName");var i=-1!=e;this.hasSelectedChildren(n,!1)?(this.hasSelectedChildren(n)?(-1==t&&this.partlySelectedMembers.push(n),this.isAllSelected&&i&&this.selectedMembers.splice(e,1)):(-1!=t&&this.partlySelectedMembers.splice(t,1),this.isAllSelected&&!i&&this.selectedMembers.push(n)),!this.isAllSelected&&i&&this.selectedMembers.splice(e,1)):(-1!=t&&this.partlySelectedMembers.splice(t,1),this.isAllSelected&&i?this.selectedMembers.splice(e,1):this.isAllSelected||i||this.selectedMembers.push(n)),this.selectParents(n)}},t.prototype.hasSelectedChildren=function(e,t){void 0===t&&(t=!0);for(var n,i=0,r=e.children.toArray(),o=r.length;i<o;i++)if(-1==s.ArrayUtils.findIndex(this.selectedMembers,(n=r[i]).uniqueName,"uniqueName")==this.isAllSelected==t||-1!=s.ArrayUtils.findIndex(this.partlySelectedMembers,n.uniqueName,"uniqueName"))return!0;return!1},t.prototype.pushDescendantsToSelected=function(e){for(var t,n,i=0,r=e.children.toArray(),o=r.length;i<o;i++)e=s.ArrayUtils.findIndex(this.selectedMembers,(n=r[i]).uniqueName,"uniqueName"),t=s.ArrayUtils.findIndex(this.partlySelectedMembers,n.uniqueName,"uniqueName"),-1==e&&this.selectedMembers.push(n),-1!=t&&this.partlySelectedMembers.splice(t,1),0<n.children.length&&this.pushDescendantsToSelected(n)},t.prototype.removeDescendantsFromSelected=function(e){for(var t,n,i=0,r=e.children.toArray(),o=r.length;i<o;i++)e=s.ArrayUtils.findIndex(this.selectedMembers,(n=r[i]).uniqueName,"uniqueName"),t=s.ArrayUtils.findIndex(this.partlySelectedMembers,n.uniqueName,"uniqueName"),-1!=e&&this.selectedMembers.splice(e,1),-1!=t&&this.partlySelectedMembers.splice(t,1),0<n.children.length&&this.removeDescendantsFromSelected(n)},t.prototype.selectAll=function(e){if(this.isSearched())for(var t=this.searchedMembers.length,n=0;n<t;n++)s.StringUtils.contains(this.searchedMembers[n].caption,this.searchPhrase)&&this.select(this.searchedMembers[n],e);else this.isAllSelected=e,this.selectedMembers.length=0,this.partlySelectedMembers.length=0},t.prototype.getSelectedLength=function(){if(this.isSearched()){for(var e=0,t=this.searchedMembers.length,n=0;n<t;n++)s.StringUtils.contains(this.searchedMembers[n].caption,this.searchPhrase)&&0>s.ArrayUtils.findIndex(this.selectedMembers,this.searchedMembers[n].uniqueName,"uniqueName")==this.isAllSelected&&e++;return e}return this.getTotalSelectedLength()},t.prototype.getTotalSelectedLength=function(){var e=this.isAllSelected?this.currentHierarchy.members.length-this.selectedMembers.length-this.partlySelectedMembers.length-1:this.selectedMembers.length;return 0>e?0:e},t.prototype.setFilterItems=function(e){var t=e.length;if(this.selectedMembers.length=0,this.partlySelectedMembers.length=0,0==t)this.isAllSelected=!0;else{this.isAllSelected=!1;for(var n,i,r=0;r<t;r++)for(i=(i=(n=e[r]).children.toArray()).length,this.selectedMembers.push(n),0<i&&this.pushDescendantsToSelected(n);n.parent&&!n.parent.isAll;)-1==s.ArrayUtils.findIndex(this.partlySelectedMembers,(n=n.parent).uniqueName,"uniqueName")&&this.partlySelectedMembers.push(n)}},t.prototype.getFilterItems=function(){for(var e,t,n,i,r=0,o=[],a=(i=this.isSearched()&&this.isAllSelected?this.searchedMembers:this.selectedMembers).length;r<a;r++)n=-1,s.nullOrUndefined(t=(e=i[r]).parent)||(n=s.ArrayUtils.findIndex(i,t.uniqueName,"uniqueName")),-1===n&&o.push(e);return{items:o,negation:r=(!this.isSearched()||!this.isAllSelected)&&0!=o.length&&this.isAllSelected}},t.prototype.search=function(e,t){if(e=e.toLowerCase(),this.searchPhrase===e)t();else if(this.searchPhrase=e,0==this.searchPhrase.length)t();else{this.numParentsInSearch=this.searchedMembers.length=0,this.fillSearchTree(this.currentHierarchy.allMember,e);var n=0,i=0;for(i=0;i<this.searchedMembers.length;i++)n=this.insertParentsToSearch(this.searchedMembers[i],i),this.numParentsInSearch+=n,i+=n;t(this.searchedMembers)}},t.prototype.setSearchedMembers=function(e){null!=e?this.searchedMembers=e:this.searchedMembers.length=0},t.prototype.insertParentsToSearch=function(e,t){var n=e.parent,i=0;return s.nullOrUndefined(n)||n.isAll||(-1==s.ArrayUtils.findIndex(this.searchedMembers,n.uniqueName,"uniqueName")&&(i++,this.searchedMembers.splice(t,0,n)),i+=this.insertParentsToSearch(n,t)),i},t.prototype.fillSearchTree=function(e,t){for(var n,i=e.children,r=i.length,o=0;o<r;o++)n=i.getItemAt(o),s.StringUtils.contains(n.caption,t)&&this.searchedMembers.push(n),this.fillSearchTree(n,t)},t.prototype.isSearched=function(){return 0<this.searchPhrase.length},t.prototype.expand=function(e){-1==this.expandedMembers.indexOf(e)&&this.expandedMembers.push(e),this.showDescendants(e,!0)},t.prototype.collapse=function(e){var t=this.expandedMembers.indexOf(e);-1!=t&&this.expandedMembers.splice(t,1),this.showDescendants(e,!1)},t.prototype.showDescendants=function(e,t){var n=s.ArrayUtils.findIndex(this.members,e.uniqueName,"uniqueName");t?this.insertDescendants(e,n):this.members.splice(n+1,this.getNumDescendants(e))},t.prototype.insertDescendants=function(t,n){for(var i,r=this.sortType===e.data_.consts.SortType.UNSORTED?t.children.toArray():this.currentHierarchy.sortChildren(t,!1,this.sortType).toArray(),o=r.length-1,s=n+1;-1<o;o--)this.members.splice(s,0,i=r[o]),-1<this.expandedMembers.indexOf(i)&&this.insertDescendants(i,s)},t.prototype.getNumDescendants=function(e){for(var t,n=(e=e.children.toArray()).length,i=n,r=0;r<n;r++)-1<this.expandedMembers.indexOf(t=e[r])&&(i+=this.getNumDescendants(t));return i},t}();t.MembersTreeDataProvider=n}((t=e._view||(e._view={})).filter||(t.filter={}))}(r||(r={})),function(e){var t;!function(t){var n=function(n){function r(e){var t=n.call(this)||this;return t.controller=e,t.setControls(),t}return h(r,n),r.prototype.setControls=function(){var n=new i.UIComponentBase("div","wdr-popup-header wdr-ui-row");this.addChild(n);var r=new i.UIComponentBase("div","wdr-ui-col-2 wdr-vam");n.addChild(r),this.titleLabel=new i.UILabel,this.titleLabel.addClass("wdr-popup-title"),r.addChild(this.titleLabel),r=new i.UIComponentBase("div","wdr-ui-col wdr-vam wdr-ui-btns-row"),n.addChild(r),this.cancelBtn=new i.UIButton("wdr-ui-btn"),this.cancelBtn.setLabel(e.model._labels.Labels.BUTTON_CANCEL),this.okBtn=new i.UIButton("wdr-ui-btn-dark"),this.okBtn.setLabel(e.model._labels.Labels.BUTTON_APPLY),s.OSUtil.isIOS||s.OSUtil.isMac?(r.addChild(this.cancelBtn),r.addChild(this.okBtn)):(r.addChild(this.okBtn),r.addChild(this.cancelBtn)),n=new i.UIComponentBase("div","wdr-ui-row"),this.addChild(n),this.sortContainer=new i.UIComponentBase("div","wdr-ui-col-2"),this.sortContainer.container.display="inline-block",n.addChild(this.sortContainer),this.sortLabel=new i.UILabel,this.sortLabel.setId("wdr-sort-label"),this.sortLabel.addClass("wdr-ui-label-light"),this.sortLabel.setLabel(e.model._labels.Labels.FILTER_SORT),this.sortContainer.addChild(this.sortLabel),r=new i.UIComponentBase("div","wdr-sort-btns"),this.sortContainer.addChild(r),this.azBtn=new i.UIToggleButton,this.azBtn.container.addClass("wdr-sort-btn"),this.azBtn.setLabel(e.model._labels.Labels.FILTER_ASC_SORT),r.addChild(this.azBtn),this.zaBtn=new i.UIToggleButton,this.zaBtn.container.addClass("wdr-sort-btn"),this.zaBtn.setLabel(e.model._labels.Labels.FILTER_DESC_SORT),r.addChild(this.zaBtn),(r=new i.UIComponentBase("div","wdr-ui-col-2 wdr-tar wdr-topx-col")).container.display="inline-block",n.addChild(r),this.top10Btn=new i.UIToggleButton,this.top10Btn.setId("wdr-top10-btn"),this.top10Btn.addClass("wdr-ui-toggle-btn-dark"),this.top10Btn.setLabel(e.model._labels.Labels.FILTER_TOP_X),r.addChild(this.top10Btn),this.clearTopBtn=new i.UIComponentBase("span","wdr-btn-canceltopx"),this.clearTopBtn.setId("wdr-clear-top-btn"),this.clearTopBtn.container.attr("title",e.model._labels.Labels.FILTER_TOP_X_CLEAR),this.top10Btn.addChild(this.clearTopBtn),this.topBottomView=new t.TopBottomView,this.topBottomView.setId("wdr-filters-topx-view"),this.topBottomView.hide(),this.addChild(this.topBottomView),this.membersView=new t.MembersView,this.membersView.addClass("wdr-ft-contentheight-220"),this.addChild(this.membersView)},Object.defineProperty(r.prototype,"selectAllCbx",{get:function(){return this.membersView.selectAllCbx},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"membersFilterList",{get:function(){return this.membersView.membersFilterList},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"selectedAmountLabel",{get:function(){return this.membersView.selectedAmountLabel},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"searchInput",{get:function(){return this.membersView.searchInput},enumerable:!0,configurable:!0}),r.prototype.setLabels=function(){this.top10Btn.setLabel(e.model._labels.Labels.FILTER_TOP_X),this.clearTopBtn.container.attr("title",e.model._labels.Labels.FILTER_TOP_X_CLEAR),this.azBtn.setLabel(e.model._labels.Labels.FILTER_ASC_SORT),this.zaBtn.setLabel(e.model._labels.Labels.FILTER_DESC_SORT),this.searchInput.setPrompt(e.model._labels.Labels.FILTER_SEARCH),this.selectAllCbx.setLabel(e.model._labels.Labels.FILTER_SELECT_ALL),this.okBtn.setLabel(e.model._labels.Labels.BUTTON_APPLY),this.cancelBtn.setLabel(e.model._labels.Labels.BUTTON_CANCEL),this.sortLabel.setLabel(e.model._labels.Labels.FILTER_SORT),this.topBottomView.setLabels()},r}(i.containers.UIContainer);t.FilterViewContent=n}((t=e._view||(e._view={})).filter||(t.filter={}))}(r||(r={})),function(e){var t;!function(t){var n=function(n){function r(){var r=n.call(this,"div","wdr-filters-table")||this,o=new i.UIComponentBase("div","wdr-filters-table-header wdr-fth-withsearch");r.addChild(o),r.selectAllCbx=new i.UICheckBox,r.selectAllCbx.setLabel(e.model._labels.Labels.FILTER_SELECT_ALL),o.addChild(r.selectAllCbx),r.selectedAmountLabel=new i.UILabel,r.selectedAmountLabel.setId("wdr-select-counter"),o.addChild(r.selectedAmountLabel),r.searchWrap=new i.UIComponentBase("div","wdr-search-wrap"),o.addChild(r.searchWrap),(o=new i.UIComponentBase("a","wdr-search-btn")).container.text(e.model._labels.Labels.FILTER_SEARCH),o.addEventListener("click",(function(){return r.onSearchClick()})),r.searchWrap.addChild(o);var s=new i.UIComponentBase("span","wdr-ui-icon wdr-icon-act_search");return o.addChild(s),r.searchInput=new i.UITextInput,r.searchInput.addClass("wdr-search-inp"),r.searchWrap.addChild(r.searchInput),(o=new i.UIComponentBase("span","wdr-close-search wdr-ui-icon wdr-icon-act_close")).addEventListener("click",(function(){return r.onSearchCloseClick()})),r.searchWrap.addChild(o),o=new i.UIComponentBase("div","wdr-filters-table-content"),r.addChild(o),r.membersFilterList=new t.FilterList,r.membersFilterList.setSmartDataProvider(new t.MembersFilterDataProvider),r.membersFilterList.setId("wdr-members-filter-list"),o.addChild(r.membersFilterList),r}return h(r,n),r.prototype.onSearchClick=function(){this.searchWrap.addClass("wdr-search-opened"),this.searchInput.container.focus(),this.selectedAmountLabel.hide()},r.prototype.onSearchCloseClick=function(){this.searchWrap.removeClass("wdr-search-opened"),this.searchInput.clear(),this.selectedAmountLabel.show()},r.prototype.reset=function(){this.onSearchCloseClick()},r}(i.UIComponentBase);t.MembersView=n}((t=e._view||(e._view={})).filter||(t.filter={}))}(r||(r={})),function(e){!function(e){!function(e){var n=function(n){function r(){var e=n.call(this)||this;return e.levelMargin=20,e.expandBtn=new i.UIToggleButton,e.expandBtn.removeClass("wdr-ui-toggle-btn"),e.expandBtn.addClass("wdr-expand-toggle-btn"),e.expandBtn.addEventListener(t._Event.CHANGE,(function(){return e.onCollapseExpand()})),e.container.append(e.expandBtn.container),e.selectedCheckBox=new i.UICheckBox,e.selectedCheckBox.addEventListener(t._Event.CHANGE,(function(){return e.onSelect()})),e.container.append(e.selectedCheckBox.container),e.container.addEventListener("click",(function(t){return e.onClick(t)})),e.invalidate("all"),e}return h(r,n),r.prototype.onCollapseExpand=function(){var t=this.getData();t.isExpanded=this.expandBtn.getSelection(),this.container.dispatchWith(e.FilterList.EXPAND_EVENT,this,t)},r.prototype.onClick=function(e){e.target==this.container.element&&(this.selectedCheckBox.toggle(),this.onSelect())},r.prototype.onSelect=function(){var t=this.getData();t.isSelected=this.selectedCheckBox.getSelection(),this.container.dispatchWith(e.FilterList.SELECT_EVENT,this,t)},r.prototype.draw=function(){if(this.isInvalid("data")){var e=this.getData();if(this.expandBtn&&this.selectedCheckBox&&e){this.container.css("padding-left","");var t=this.levelMargin*(e.levelNum-1);e.isSearched||-1!==e.isExpanded||(t+=30),0<t&&this.container.css("padding-left",t+"px"),isNaN(e.isExpanded)||-1===e.isExpanded||e.isSearched?this.expandBtn.hide():(this.expandBtn.show(),this.expandBtn.setSelection(e.isExpanded)),t=(t=e[this.getLabelField()]).replace(/<(?:.|\n)*?>/gi,""),this.selectedCheckBox.setLabel(t,!0),this.selectedCheckBox.setSelection(e.isSelected)}}},r}(i.renderers.UIItemRenderer);e.FilterListItemRenderer=n}(e.filter||(e.filter={}))}(e._view||(e._view={}))}(r||(r={})),function(e){var n;!function(n){var r=function(i){function r(){var e=i.call(this)||this;return e.setItemRendererFactory((function(t,n){return e.getItemRendererFactory(t,n)})),e}return h(r,i),r.prototype.getItemRendererFactory=function(e,t){var i=this,o=new n.FilterListItemRenderer;return o.setData(e),o.setIndex(t),o.addEventListener(r.SELECT_EVENT,(function(e){return i.onSelect(e)})),o.addEventListener(r.EXPAND_EVENT,(function(e){return i.onExpand(e)})),o},r.prototype.onSelect=function(e){this.setSelected(e=e.data,1===e.isSelected),this.dispatch(new t._Event(r.SELECT_EVENT,this))},r.prototype.onExpand=function(n){var i=this,o=n.data;1===o.isExpanded?0===o.member.children.length?e.model.PivotModel.getInstance().cube_.loadMemberChildren(o.member.hierarchy_,o.member,(function(e){return i.onChildrenLoaded(o.member)})):this.onChildrenLoaded(o.member):(this.getSmartDataProvider().collapse(o.member),this.invalidate("data"),this.dispatch(new t._Event(r.EXPAND_EVENT,this)))},r.prototype.onChildrenLoaded=function(n){e.preloader(!1),this.getSmartDataProvider().selectDescendants(n),this.getSmartDataProvider().expand(n),this.invalidate("data"),this.dispatch(new t._Event(r.EXPAND_EVENT,this))},r.prototype.getSmartDataProvider=function(){return this.filterDataProvider},r.prototype.setSmartDataProvider=function(e){this.filterDataProvider=e},r.prototype.getFilterItems=function(){return this.getSmartDataProvider().getFilterItems()},r.prototype.setFilterItems=function(e){this.getSmartDataProvider().setFilterItems(e),this.invalidate("data")},r.prototype.getSelectedLength=function(){return this.getSmartDataProvider().getSelectedLength()},r.prototype.getTotalSelectedLength=function(){return this.getSmartDataProvider().getTotalSelectedLength()},r.prototype.getTotalLength=function(){return this.getSmartDataProvider().getLength()},r.prototype.getTotalItemsCount=function(){return this.getSmartDataProvider().getTotalLength()},r.prototype.setSelected=function(e,t){this.getSmartDataProvider().select(e.member,t),this.invalidate("data")},r.prototype.selectAll=function(e){this.getSmartDataProvider().selectAll(e),this.invalidate("data")},r.prototype.search=function(e,t){var n=this;this.getSmartDataProvider().search(e,(function(e){n.getSmartDataProvider().setSearchedMembers(e),n.invalidate("data"),t()}))},r.prototype.isSearched=function(){return this.getSmartDataProvider().isSearched()},r.prototype.setHierarchy=function(e){this.getSmartDataProvider().setHierarchy(e)},r.prototype.sort=function(e){e!==this.getSmartDataProvider().getSortType()&&(this.getSmartDataProvider().setSortType(e),this.invalidate("data"))},r.SELECT_EVENT="_",r.EXPAND_EVENT="__",r}(i.lists.UIVirtualList);n.FilterList=r}((n=e._view||(e._view={})).filter||(n.filter={}))}(r||(r={})),function(e){var n;!function(n){var r=function(n){function r(){var r=n.call(this,"div")||this;r._isEmpty=!0,r.addClass("wdr-filters-subview"),r.quantityInput=new i.UITextInput,r.quantityInput.setId("wdr-top-amount-input"),r.quantityInput.setRestriction(/^\d+$/),r.quantityInput.setType("number"),r.quantityInput.addEventListener(i.UITextInput.CHANGE_EVENT,(function(){return r.onQuantityChange()})),r.addChild(r.quantityInput);var o=new i.UIComponentBase("div");return o.setId("wdr-topx-btns"),r.addChild(o),r.btnTop=new i.UIToggleButton,r.btnTop.setId("wdr-btn-top"),r.btnTop.addClass("wdr-topx-btn"),r.btnTop.setLabel(e.model._labels.Labels.FILTER_TOP),r.btnTop.addEventListener(t._Event.CHANGE,(function(){return r.onBtnTopChange()})),o.addChild(r.btnTop),r.btnBottom=new i.UIToggleButton,r.btnBottom.setId("wdr-btn-bottom"),r.btnBottom.addClass("wdr-topx-btn"),r.btnBottom.setLabel(e.model._labels.Labels.FILTER_BOTTOM),r.btnBottom.addEventListener(t._Event.CHANGE,(function(){return r.onBtnBottomChange()})),o.addChild(r.btnBottom),r.measuresDropDown=new i.lists.UIDropDownList,r.measuresDropDown.setId("wdr-top-measures-dropdown"),r.measuresDropDown.setLabelField("caption"),r.measuresDropDown.setPrompt(""),r.measuresDropDown.addEventListener(t._Event.CHANGE,(function(e){return r.onMeasuresChange(e)})),r.addChild(r.measuresDropDown),r}return h(r,n),r.prototype.onBtnTopChange=function(){this._isEmpty=!1,this.btnBottom.setSelection(1-this.btnTop.getSelection()),this.dispatch(new t._Event(r.CHANGE_EVENT,this))},r.prototype.onBtnBottomChange=function(){this._isEmpty=!1,this.btnTop.setSelection(1-this.btnBottom.getSelection()),this.dispatch(new t._Event(r.CHANGE_EVENT,this))},r.prototype.onMeasuresChange=function(e){this._isEmpty=!1,this.dispatch(new t._Event(r.CHANGE_EVENT,this))},r.prototype.onQuantityChange=function(){this._isEmpty=!1,""==this.getFilterType()&&this.setFilterType(e.data_.consts.FilterType.TOP),this.dispatch(new t._Event(r.CHANGE_EVENT,this))},r.prototype.setMeasures=function(e){this.measuresDropDown.setDataProvider(e),this.measuresDropDown.setSelectedIndex(0)},r.prototype.getSelectedMeasure=function(){return this.measuresDropDown.getSelectedItem()},r.prototype.setSelectedMeasure=function(e){this._isEmpty=!1,this.measuresDropDown.setSelectedItem(e,"uniqueName")},r.prototype.reset=function(){this._isEmpty=!0;var t=e.model._options.OptionsManager.flatView;this.btnTop.setSelection(t?0:1),this.btnBottom.setSelection(0),this.measuresDropDown.setSelectedIndex(0),this.measuresDropDown.isVisible(!t),this.quantityInput.setText("10")},r.prototype.setLabels=function(){this.btnTop.setLabel(e.model._labels.Labels.FILTER_TOP),this.btnBottom.setLabel(e.model._labels.Labels.FILTER_BOTTOM),this.measuresDropDown.setPrompt("")},r.prototype.getFilterType=function(){return 1===this.btnTop.getSelection()?e.data_.consts.FilterType.TOP:1===this.btnBottom.getSelection()?e.data_.consts.FilterType.BOTTOM:""},r.prototype.setFilterType=function(t){t==e.data_.consts.FilterType.TOP?(this._isEmpty=!1,this.btnTop.setSelection(1),this.btnBottom.setSelection(0)):t==e.data_.consts.FilterType.BOTTOM&&(this._isEmpty=!1,this.btnTop.setSelection(0),this.btnBottom.setSelection(1))},r.prototype.getFilterQuantity=function(){return parseInt(this.quantityInput.getText())},r.prototype.setFilterQuantity=function(e){this._isEmpty=!1,this.quantityInput.setText(e.toString())},Object.defineProperty(r.prototype,"isEmpty",{get:function(){return this._isEmpty},enumerable:!0,configurable:!0}),r.CHANGE_EVENT="_",r}(i.UIComponentBase);n.TopBottomView=r}((n=e._view||(e._view={})).filter||(n.filter={}))}(r||(r={})),function(e){var t,n,i;n=(t=e._view||(e._view={})).filter||(t.filter={}),i=function(){function n(){if(this.sortTypeChanged=!1,null!=n.instance)throw"FilterModel is singleton!";this.pivotInstance=e.Pivot.instance,this.modelLocator=e.model.PivotModel.getInstance(),this.zeroCoord=t.PivotView.stage.position()}return n.getInstance=function(){return null==n.instance&&(n.instance=new n),n.instance},n.dispose=function(){n.instance=null},n.prototype.getHierarchies=function(){return this.hierarchies},n.prototype.setHierarchies=function(e){this.hierarchies=e},n.prototype.update=function(e){this.currentCoord={top:this.zeroCoord.top,left:this.zeroCoord.left};var t=this.modelLocator.cube_.slice_.allHierarchies(!1,!0,this.isFlatTable).toArray();this.setHierarchies(t),this.setCurrentHierarchy(e),this.measures=this.modelLocator.cube_.slice_.measures_.toArray()},n.prototype.clearValuesFilter=function(){this.filterType=e.data_.consts.FilterType.NONE,this.filterQuantity=-1,this.filterMeasureName=""},n.prototype.setCurrentHierarchy=function(t){(this.currentHierarchy=t)&&(this.sortType=this.currentHierarchy.sortName,this.sortTypeChanged=!1,this.filterMeasureName=this.currentHierarchy.filterMeasureName,this.filterQuantity=this.currentHierarchy.filterQuantity,this.filterType=this.currentHierarchy.filterType,this.members=this.sortType!==e.data_.consts.SortType.UNSORTED?this.currentHierarchy.sortChildren(this.currentHierarchy.allMember,!1,this.sortType).toArray():this.currentHierarchy.allMember.children.toArray())},n.prototype.getTopBottomMeasures=function(){return this.isFlatTable?[this.modelLocator.cube_.structure_.hierarchyToMeasure(this.currentHierarchy.uniqueName)]:this.measures},n.prototype.getSortType=function(){return this.sortType},n.prototype.setSortType=function(e){this.sortType=e,this.sortTypeChanged=!0},n.prototype.applyChanges=function(){this.currentHierarchy.hasValuesFilter()&&this.isValuesFilterEmpty&&this.modelLocator.clearFilter(this.currentHierarchy.uniqueName),this.applyMembersFilter(),this.applyValuesFilter(),this.applySort()},Object.defineProperty(n.prototype,"isValuesFilterEmpty",{get:function(){return!this.filterMeasureName||0===this.filterMeasureName.length||isNaN(this.filterQuantity)||1>this.filterQuantity||!this.filterType||0===this.filterType.length||this.filterType===e.data_.consts.FilterType.NONE},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isValuesFilterChanged",{get:function(){return this.currentHierarchy.filterMeasureName!==this.filterMeasureName||this.currentHierarchy.filterQuantity!==this.filterQuantity||this.currentHierarchy.filterType!==this.filterType},enumerable:!0,configurable:!0}),n.prototype.applyValuesFilter=function(){!this.isValuesFilterEmpty&&this.isValuesFilterChanged&&("top"===this.filterType?this.modelLocator.setTopX(this.currentHierarchy.uniqueName,this.filterQuantity,this.filterMeasureName):"bottom"===this.filterType&&this.modelLocator.setBottomX(this.currentHierarchy.uniqueName,this.filterQuantity,this.filterMeasureName))},n.prototype.isMembersFilterChanged=function(){if(this.filteredMembers.length!==this.currentHierarchy.filterMembers.length&&!this.filterNegation)return!0;for(var e=0,t=this.filteredMembers.length;e<t;e++)if(this.filterNegation===this.currentHierarchy.filterMembers.keyExists(this.filteredMembers[e].uniqueName))return!0;return!(!this.filterNegation||!this.currentHierarchy||this.currentHierarchy.filterMembers.length+this.filteredMembers.length===this.currentHierarchy.members.length-1)},n.prototype.applyMembersFilter=function(){this.isMembersFilterChanged()&&this.modelLocator.setFilter(this.currentHierarchy.uniqueName,this.filteredMembers,this.filterNegation)},n.prototype.isSortTypeChanged=function(){return this.sortTypeChanged},n.prototype.applySort=function(){this.isSortTypeChanged()&&this.modelLocator.setSort(this.currentHierarchy.uniqueName,this.sortType)},Object.defineProperty(n.prototype,"isPages",{get:function(){return!this.isFlatTable&&this.modelLocator.cube_.slice_.pages.keyExists(this.currentHierarchy.uniqueName)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isFlatTable",{get:function(){return e.model._options.OptionsManager.flatView},enumerable:!0,configurable:!0}),n}(),n.FilterModel=i}(r||(r={})),function(e){var n,r,o;n=e._view||(e._view={}),r=n.filter||(n.filter={}),o=function(o){function a(){var e=o.call(this)||this;return e.model=r.FilterModel.getInstance(),e.view=new r.FilterViewContent(e),null!=e.view.hierarchiesList&&e.view.hierarchiesList.addEventListener(t._Event.CHANGE,(function(t){return e.onHierarchiesListChange(t)})),null!=e.view.searchInput&&e.view.searchInput.addEventListener(i.UITextInput.CHANGE_EVENT,(function(t){return e.onSearchInputChange(t.data)})),null!=e.view.membersFilterList&&(e.view.membersFilterList.addEventListener(r.FilterList.SELECT_EVENT,(function(){return e.onMembersFilterSelect()})),e.view.membersFilterList.addEventListener(r.FilterList.EXPAND_EVENT,(function(){return e.onMembersFilterExpand()}))),null!=e.view.selectAllCbx&&e.view.selectAllCbx.addEventListener(t._Event.CHANGE,(function(){return e.onSelectAllChange()})),null!=e.view.azBtn&&e.view.azBtn.addEventListener(t._Event.CHANGE,(function(){return e.onAzBtnChange()})),null!=e.view.zaBtn&&e.view.zaBtn.addEventListener(t._Event.CHANGE,(function(){return e.onZaBtnChange()})),null!=e.view.top10Btn&&e.view.top10Btn.addEventListener(t._Event.CHANGE,(function(){return e.onTop10Change()})),null!=e.view.clearTopBtn&&e.view.clearTopBtn.container.addEventListener("click",(function(t){return e.onClearTop(t)})),null!=e.view.topBottomView&&e.view.topBottomView.addEventListener(r.TopBottomView.CHANGE_EVENT,(function(){return e.onTopBottomChange()})),null!=e.view.okBtn&&e.view.okBtn.addEventListener(i.UIButton.CLICK_EVENT,(function(t){return e.onOkClick(t)})),null!=e.view.cancelBtn&&e.view.cancelBtn.addEventListener(i.UIButton.CLICK_EVENT,(function(t){return e.onCancelClick(t)})),e}return h(a,o),a.prototype.onDataUpdated=function(){this.update(this.model.currentHierarchy)},a.prototype.onClearTop=function(e){e.stopImmediatePropagation(),this.model.clearValuesFilter(),this.view.topBottomView&&(this.view.topBottomView.reset(),this.view.topBottomView.hide()),this.view.top10Btn&&(this.view.top10Btn.container.removeClass("wdr-not-empty"),this.view.top10Btn.setSelection(0))},a.prototype.onTopBottomChange=function(){if(this.view.topBottomView){this.model.filterType=this.view.topBottomView.getFilterType(),this.model.filterQuantity=this.view.topBottomView.getFilterQuantity();var e=this.view.topBottomView.getSelectedMeasure();this.model.filterMeasureName=e?e.uniqueName:""}this.view.top10Btn&&this.view.top10Btn.container.addClass("wdr-not-empty")},a.prototype.onTop10Change=function(){this.view.topBottomView&&this.view.topBottomView.isVisible(1===this.view.top10Btn.getSelection())},a.prototype.onOkClick=function(e){this.dispatchWith("close"),e=this.view.membersFilterList.getFilterItems(),this.model.filteredMembers=e.items,this.model.filterNegation=e.negation,this.model.applyChanges()},a.prototype.onCancelClick=function(e){this.dispatchWith("close")},a.prototype.onAzBtnChange=function(){1===this.view.azBtn.getSelection()&&(this.view.zaBtn.setSelection(0),this.model.setSortType(e.data_.consts.SortType.ASC),this.view.membersFilterList&&this.view.membersFilterList.sort(this.model.getSortType())),0===this.view.azBtn.getSelection()&&0===this.view.zaBtn.getSelection()&&(this.model.setSortType(e.data_.consts.SortType.UNSORTED),this.view.membersFilterList&&this.view.membersFilterList.sort(this.model.getSortType()))},a.prototype.onZaBtnChange=function(){1===this.view.zaBtn.getSelection()&&(this.view.azBtn.setSelection(0),this.model.setSortType(e.data_.consts.SortType.DESC),this.view.membersFilterList&&this.view.membersFilterList.sort(this.model.getSortType())),0===this.view.azBtn.getSelection()&&0===this.view.zaBtn.getSelection()&&(this.model.setSortType(e.data_.consts.SortType.UNSORTED),this.view.membersFilterList&&this.view.membersFilterList.sort(this.model.getSortType()))},a.prototype.onSelectAllChange=function(){this.view.membersFilterList&&(this.view.membersFilterList.selectAll(1==this.view.selectAllCbx.getSelection()),this.view.membersFilterList.getTotalSelectedLength(),this.view.okBtn.setEnabled(0<this.view.membersFilterList.getTotalSelectedLength())),this.updateSelectedLabel()},a.prototype.onMembersFilterSelect=function(){this.view.okBtn.setEnabled(0<this.view.membersFilterList.getTotalSelectedLength()),this.updateAllSelectedCbx(),this.updateSelectedLabel()},a.prototype.onMembersFilterExpand=function(){this.updateLayout(),this.updateSelectedLabel()},a.prototype.updateAllSelectedCbx=function(){0==this.view.membersFilterList.getSelectedLength()?this.view.selectAllCbx.setSelection(0):this.view.membersFilterList.getTotalItemsCount()>this.view.membersFilterList.getSelectedLength()?this.view.selectAllCbx.setSelection(-1):this.view.membersFilterList.getTotalItemsCount()==this.view.membersFilterList.getSelectedLength()&&this.view.selectAllCbx.setSelection(1)},a.prototype.update=function(t){var n=this;0!=this.view.isVisible()&&(1e4<t.members.length?(e.preloader(!0,"Please, wait","Sorting members...",!0,!0),setTimeout((function(){n.model.update(t),n.updateView(),e.preloader(!1)}),50)):(this.model.update(t),this.updateView()))},a.prototype.onSearchInputChange=function(e){var t=this;e.trim()==e&&this.view.membersFilterList&&this.view.membersFilterList.search(e,(function(){return t.onSearchComplete()}))},a.prototype.onSearchComplete=function(){this.updateLayout(),this.updateSelectedLabel(),this.updateAllSelectedCbx()},a.prototype.updateView=function(){this.view.setLabels(),this.view.container.toggleClass("wdr-filter-pages-layout",this.model.isPages),this.view.membersView&&this.view.membersView.reset(),this.view.searchInput&&(this.view.searchInput.clear(),this.view.searchInput.setChangeDelay(0)),this.view.top10Btn&&(e.data_.types.MeasureType.STRING==e.data_.types.MeasureType.fromDataType(this.model.currentHierarchy.dimension.type+"")&&e.model._options.OptionsManager.flatView?this.view.top10Btn.hide():this.view.top10Btn.show()),this.updateSortType(),this.updateHierarchy(),this.updateMembers(),this.updateTopBottom(),this.updateLayout(),this.updateSelectedLabel();var t=!this.model.isPages;this.view.azBtn&&(t?this.view.azBtn.show():this.view.azBtn.hide()),this.view.zaBtn&&(t?this.view.zaBtn.show():this.view.zaBtn.hide()),this.view.top10Btn&&(this.isAvailableTopX?this.view.top10Btn.show():this.view.top10Btn.hide()),this.view.sortContainer&&(t?this.view.sortContainer.show():this.view.sortContainer.hide())},Object.defineProperty(a.prototype,"isAvailableTopX",{get:function(){if(this.model.isFlatTable){var t=this.model.modelLocator.cube_.structure_.hierarchyToMeasure(this.model.currentHierarchy.uniqueName);return t&&t.type==e.data_.types.MeasureType.NUMBER}return!this.model.isPages},enumerable:!0,configurable:!0}),a.prototype.updateMembers=function(){var e,t=this.model.currentHierarchy;this.view.selectAllCbx&&this.view.selectAllCbx.setSelection(0<t.filterMembers.length?-1:1),e=2<t.levels_.length?new r.MembersTreeDataProvider:new r.MembersFilterDataProvider,this.view.membersFilterList&&(this.view.membersFilterList.setSmartDataProvider(e),this.view.membersFilterList.setHierarchy(t),this.view.membersFilterList.setDataProvider(this.model.members),this.view.membersFilterList.setFilterItems(t.filterMembers.toArray()),this.view.membersFilterList.sort(this.model.getSortType()))},a.prototype.updateHierarchy=function(){this.view.titleLabel&&this.view.titleLabel.setLabel(this.model.currentHierarchy.caption),this.view.toolbar&&this.view.toolbar.setHeader(this.model.currentHierarchy.caption)},a.prototype.updateLayout=function(){if(this.view.membersFilterList&&0<this.view.membersFilterList.getTotalLength())if(this.view.selectAllCbx&&this.view.selectAllCbx.show(),0==this.view.explicitListHeight||isNaN(this.view.explicitListHeight)){var e=s.browserVersion().isMobile?s.viewportHeight()-50:n.PivotView.stage.getY()+n.PivotView.stageHeight-window.document.documentElement.scrollTop;e=Math.min(e,parseFloat(window.document.documentElement.style.height))-this.view.membersFilterList.container.offset().top+window.document.documentElement.scrollTop-n.PivotView.stage.toolbarHeight,e=Math.max(e,84),this.setOptimalListHeight(e,!0)}else this.setOptimalListHeight(this.view.explicitListHeight,!1);else this.view.selectAllCbx&&this.view.selectAllCbx.hide()},a.prototype.updateSortType=function(){this.view.azBtn&&this.view.azBtn.setSelection("asc"===this.model.getSortType()?1:0),this.view.zaBtn&&this.view.zaBtn.setSelection("desc"===this.model.getSortType()?1:0)},a.prototype.updateTopBottom=function(){this.view.topBottomView&&(this.view.topBottomView.reset(),this.view.topBottomView.setMeasures(this.model.getTopBottomMeasures())),"top"===this.model.filterType||"bottom"===this.model.filterType?(this.view.topBottomView&&(this.view.topBottomView.setFilterType(this.model.filterType),this.view.topBottomView.setFilterQuantity(this.model.filterQuantity),this.view.topBottomView.setSelectedMeasure(s.ArrayUtils.find(this.model.measures,this.model.filterMeasureName,"uniqueName")),this.view.topBottomView.show()),this.view.top10Btn&&this.view.top10Btn.setSelection(1)):(this.view.topBottomView&&this.view.topBottomView.hide(),this.view.top10Btn&&this.view.top10Btn.setSelection(0)),this.view.top10Btn&&this.view.top10Btn.container.toggleClass("wdr-not-empty",!(!this.view.topBottomView||this.view.topBottomView.isEmpty))},a.prototype.setOptimalListHeight=function(e,t){var n=Math.max(Math.min(e,this.view.membersFilterList.getMaxHeight()),this.view.membersFilterList.getMinHeight());t&&(n-=n%this.view.membersFilterList.getRowHeight()),this.view.membersFilterList.setHeight(n),this.view.table&&this.view.contentPanel.setHeight(this.view.table.getHeight())},a.prototype.updateSelectedLabel=function(){var t="";this.view.membersFilterList&&(t=this.view.membersFilterList.isSearched()?s.StringUtils.bind(e.model._labels.Labels.FILTER_AMOUNT_FOUND,this.view.membersFilterList.getSelectedLength(),this.view.membersFilterList.getTotalItemsCount()):s.StringUtils.bind(e.model._labels.Labels.FILTER_AMOUNT_SELECTED,this.view.membersFilterList.getSelectedLength(),this.view.membersFilterList.getTotalItemsCount())),this.view.selectedAmountLabel&&this.view.selectedAmountLabel.setLabel(t),this.view.selectAllCbx&&this.view.selectAllCbx.setLabel(this.view.membersFilterList&&this.view.membersFilterList.isSearched()?e.model._labels.Labels.FILTER_SELECT_ALL_RESULTS:e.model._labels.Labels.FILTER_SELECT_ALL)},a.prototype.onHierarchiesListChange=function(e){-1<e.data.selectedIndex&&(this.model.setCurrentHierarchy(e.data.selectedItem),this.updateView())},a}(t.EventDispatcher),r.FilterController=o}(r||(r={})),function(e){!function(e){var n,r;n=e.filter||(e.filter={}),r=function(i){function r(){var t=i.call(this,e.PivotView.stage.container)||this;return t.setId("wdr-filter-view"),t.addClass("wdr-noselect"),t.controller=new n.FilterController,t.controller.addEventListener("close",(function(){return t.close()})),t.addChild(t.controller.view),t.controller.view.show(),t}return h(r,i),r.prototype.openView=function(e){this.open(),this.controller.update(e),this.centerPosition(),this.dispatchWith(t._Event.OPENED)},r.prototype.close=function(){i.prototype.close.call(this),this.dispatchWith(t._Event.CLOSED)},r}(i.containers.UIPopup),n.FilterView=r}(e._view||(e._view={}))}(r||(r={})),function(e){var t=function(){function t(){this.styleSheet=new e.styles.XLSStyleSheet,this.sheets=[],e.styles.format.XLSStyleFormat.lastNumFmtId=e.styles.format.XLSStyleFormat.defaultNumFmtId}return t.prototype.toUint8Array=function(){s.getTimer();var t=new A;t.file("[Content_Types].xml",e.XLSTemplates.XML_HEADER+this.composeContentTypeXMLString()),t.file("_rels/.rels",e.XLSTemplates.XML_HEADER+e.XLSTemplates._RELS),t.file("xl/_rels/workbook.xml.rels",e.XLSTemplates.XML_HEADER+this.composeWorkbookRelsXMLString()),t.file("xl/workbook.xml",e.XLSTemplates.XML_HEADER+this.composeWorkbookXMLString()),t.file("xl/theme/theme1.xml",e.XLSTemplates.XML_HEADER+e.XLSTemplates.THEME);for(var n=0;n<this.sheets.length;n++){var i=this.sheets[n].toXMLString();t.file("xl/worksheets/sheet"+(n+1)+".xml",e.XLSTemplates.XML_HEADER+i)}return t.file("xl/sharedStrings.xml",e.XLSTemplates.XML_HEADER+this.composeSharedStrings()),t.file("xl/styles.xml",e.XLSTemplates.XML_HEADER+this.styleSheet.toXMLString()),t.file("docProps/app.xml",e.XLSTemplates.XML_HEADER+e.XLSTemplates.APP_XML),t.file("docProps/core.xml",e.XLSTemplates.XML_HEADER+e.XLSTemplates.CORE_XML),t.generate({compression:"STORE",type:"uint8array"})},t.prototype.composeSharedStrings=function(){var t="";o.XML.create("<axis/>").attr("name","rows");for(var n=0;n<e.XLSSharedStrings.strings.length;n++)t=t+"<si><t>"+s.StringUtils.escapeHtml(e.XLSSharedStrings.strings[n])+"</t></si>";return s.StringUtils.bind(e.XLSTemplates.SHARED_STRING_XML,t)},t.prototype.composeWorkbookXMLString=function(){for(var t="",n=0;n<this.sheets.length;n++)t+=s.StringUtils.bind('<sheet name="{0}" sheetId="{1}" r:id="{2}"/>',this.sheets[n].name,n+1,"rId"+(n+4));return s.StringUtils.bind(e.XLSTemplates.WORKBOOK_XML,t)},t.prototype.composeWorkbookRelsXMLString=function(){for(var t="",n=0;n<this.sheets.length;n++)t+=s.StringUtils.bind(e.XLSTemplates.WORKBOOK_XML_RELS_SHEET,"rId"+(n+4),"worksheets/sheet"+(n+1)+".xml");return s.StringUtils.bind(e.XLSTemplates.WORKBOOK_XML_RELS,t)},t.prototype.composeContentTypeXMLString=function(){for(var t="",n=0;n<this.sheets.length;n++)t+=s.StringUtils.bind(e.XLSTemplates.CONTENT_TYPES_XML_SHEET,"/xl/worksheets/sheet"+(n+1)+".xml");return s.StringUtils.bind(e.XLSTemplates.CONTENT_TYPES_XML,t)},t}();e.XLS=t}(p||(p={})),function(e){var t=function(){function t(e,t,n,i){void 0===e&&(e=0),void 0===t&&(t=0),void 0===n&&(n=""),void 0===i&&(i=0),this.row=e,this.column=t,this.value=n,this.styleIndex=i}return Object.defineProperty(t.prototype,"type",{get:function(){return this._type},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){return this._value},set:function(t){if("number"==typeof t&&isNaN(t)&&(t=""),"string"==typeof t){t=(t=(t=t.replace(RegExp("<br/?>","gmi"),"\n")).replace("/&/gmi","")).replace(RegExp("<[^<]+?>","gmi"),"");var n=e.XLSSharedStrings.strings.indexOf(t);-1==n?(this._value=e.XLSSharedStrings.strings.length,e.XLSSharedStrings.strings.push(t)):this._value=n,this._type=e.XLSType.STRING}else this._value=t,this._type="number"==typeof t?e.XLSType.NUMBER:null===t?e.XLSType.NULL:!1===t?e.XLSType.MERGED:e.XLSType.UNKNOWN},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){for(var e="",t=this.column+1,n=0;26<t;){var i=0<t%26?t%26:26;if(t/=26,26==i&&t--,e=String.fromCharCode(i+64)+e,3==n++)break}return(e=String.fromCharCode(t+64)+e)+(this.row+1)},set:function(e){},enumerable:!0,configurable:!0}),t.prototype.toString=function(){return"XLSCell {row: "+this.row+", column: "+this.column+", type: "+this.type+", id: "+this.id+", value: "+this.value+"}"},t}();e.XLSCell=t}(p||(p={})),function(e){var t=function(){function e(){}return e.strings=[],e}();e.XLSSharedStrings=t}(p||(p={})),function(e){var t=function(){function t(e){this.cells=[],this.maxColumn=this.maxRow=0,this.columns=[],this.rows=[],this.mergedCells=[],this.name=e}return Object.defineProperty(t.prototype,"maxCell",{get:function(){return this.getCell(this.maxRow,this.maxColumn)},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"columnsCount",{get:function(){return this.maxColumn+1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rowsCount",{get:function(){return this.maxRow+1},enumerable:!0,configurable:!0}),t.prototype.setColumnWidth=function(e,t){this.columns[e]=t},t.prototype.getColumnWidth=function(e){return this.columns[e]?this.columns[e]:0},t.prototype.setRowHeight=function(e,t){this.rows[e]=t},t.prototype.getRowHeight=function(e){return this.rows[e]?this.rows[e]:0},t.prototype.setCell=function(t,n,i,r){void 0===r&&(r=null),null==this.cells[t]&&(this.cells[t]=[]),this.cells[t][n]=i instanceof e.XLSCell?i:new e.XLSCell(t,n,i,null==r?0:r.index),this.maxRow<t&&(this.maxRow=t),this.maxColumn<n&&(this.maxColumn=n)},t.prototype.getCell=function(t,n){var i;return null!=this.cells[t]&&(i=this.cells[t][n]),null==i&&(i=new e.XLSCell(t,n,null)),i},t.prototype.mergeCells=function(t,n,i){var r=this.getCell(t,n);if(null!=r){for(var o,s=r.id,a=n+1;a<n+i;a++)o=new e.XLSCell(t,a,!1,r.styleIndex),this.cells[t][a]=o;this.mergedCells.push(s+=":"+(o?o.id:r.id))}},t.prototype.toXMLString=function(){s.getTimer();for(var t="",n=0;n<this.cells.length;n++){var i=this.cells[n];if(null!=i&&0!=i.length){for(var r="",o=0;o<i.length;o++){var a=i[o];null!=a&&a.type!=e.XLSType.NULL&&(r=a.type==e.XLSType.MERGED?r+'<c r="'+a.id+'" s="'+a.styleIndex.toString()+'" />':r+'<c r="'+a.id+'" s="'+a.styleIndex.toString()+'"'+(a.type==e.XLSType.STRING?' t="s"':"")+"><v>"+a.value+"</v></c>")}t=isNaN(this.rows[n])?t+s.StringUtils.bind('<row spans="1:3" r="{0}"  >{1}</row>',n+1,r):t+s.StringUtils.bind('<row spans="1:3" r="{0}" x14ac:dyDescent="0.25" ht="{1}" customHeight="1">{2}</row>',n+1,this.rows[n],r)}}for(n="",i=0;i<this.columns.length;i++)isNaN(this.columns[i])||(n+=s.StringUtils.bind('<col min="{0}" max="{1}" width="{2}" customWidth="1" />',i+1,i+1,this.columns[i]));for(r="",i=0;i<this.mergedCells.length;i++)r+=s.StringUtils.bind('<mergeCell ref="{0}"/>',this.mergedCells[i]);return i=0<this.mergedCells.length?s.StringUtils.bind('<mergeCells count="{0}">{1}</mergeCells>',this.mergeCells.length,r):"",s.StringUtils.bind(e.XLSTemplates.SHEET_XML,this.getCell(0,0).id+":"+this.maxCell.id,n,t,i)},t}();e.XLSSheet=t}(p||(p={})),function(e){var t=function(){function e(){}return e.NULL=0,e.NUMBER=1,e.STRING=2,e.MERGED=98,e.UNKNOWN=99,e}();e.XLSType=t}(p||(p={})),function(e){!function(e){var t=function(){function t(t,n,i,r){void 0===i&&(i=null),void 0===r&&(r=null),this.index=0,this.fill=n instanceof e.fills.XLSStyleFill?n:!isNaN(n)&&-1<n?new e.fills.XLSStyleFill(n):new e.fills.XLSStyleFill,this.font=t instanceof e.fonts.XLSStyleFont?t:new e.fonts.XLSStyleFont(t),this.format=i&&i instanceof e.format.XLSStyleFormat?i:new e.format.XLSStyleFormat(0,""),null!=r&&(this.textAlign=r)}return Object.defineProperty(t.prototype,"id",{get:function(){return this.fill.id+":"+this.font.id+":"+this.textIndent+":"+this.textAlign+":"+this.format.id},set:function(e){},enumerable:!0,configurable:!0}),t.prototype.toXMLString=function(){var e=this.textIndent||this.textAlign?s.StringUtils.bind('<alignment vertical="center" horizontal="{0}" wrapText="1"{1}/>',s.nullOrUndefined(this.textAlign)?"left":this.textAlign,s.nullOrUndefined(this.textIndent)?"":' indent="'+this.textIndent+'"'):'<alignment vertical="center" wrapText="1"/>';return s.StringUtils.bind('<xf numFmtId="{0}"{1} fontId="{2}" fillId="{3}" borderId="1" xfId="0" applyFont="1" applyFill="1"{4}>{5}</xf>',this.format.numFmtId,0<this.format.numFmtId?' applyNumberFormat = "1"':"",this.font.fontIndex,this.fill.fillIndex,0<e.length?' applyAlignment="1"':"",e)},t}();e.XLSStyle=t}(e.styles||(e.styles={}))}(p||(p={})),function(e){var t,n;t=e.styles||(e.styles={}),n=function(){function n(){this.styles=new s.AssociativeArray,this.fills=new s.AssociativeArray,this.fonts=new s.AssociativeArray,this.formats=new s.AssociativeArray,this.addFill(new t.fills.XLSStyleFill);var e=new t.fills.XLSStyleFill;e.patternFill.patternType="solid",e.fillIndex=1,this.fills.addItem("solid",e)}return n.prototype.addStyle=function(e){this.styles.keyExists(e.id)?e.index=this.styles.getItem(e.id).index:(this.addFill(e.fill),this.addFont(e.font),this.styles.addItem(e.id,e),e.index=this.styles.length)},n.prototype.addFill=function(e){this.fills.keyExists(e.id)?e.fillIndex=this.fills.getItem(e.id).fillIndex:(e.fillIndex=this.fills.length,this.fills.addItem(e.id,e))},n.prototype.addFont=function(e){this.fonts.keyExists(e.id)?e.fontIndex=this.fonts.getItem(e.id).fontIndex:(this.fonts.addItem(e.id,e),e.fontIndex=this.fonts.length)},n.prototype.addFormat=function(e){this.formats.keyExists(e.id)?e.numFmtId=this.formats.getItem(e.id).numFmtId:(-1==e.numFmtId&&(e.numFmtId=t.format.XLSStyleFormat.getNextAvailableCustomNumFmtId()),this.formats.addItem(e.id,e))},n.prototype.toXMLString=function(){var t,n="",i="",r="",o="";if(0<this.formats.length){var a=0,l="";for(t=0;t<this.formats.length;t++){var u=this.formats.getItemAt(t);""!=u.formatCode&&(l+=u=u.toXMLString(),a++)}0<a&&(n='<numFmts count="'+a+'">'+l+"</numFmts>")}for(t=0;t<this.fills.length;t++)i+=(a=this.fills.getItemAt(t)).toXMLString();for(t=0;t<this.fonts.length;t++)r+=(a=this.fonts.getItemAt(t)).toXMLString();for(t=0;t<this.styles.length;t++)o+=(a=this.styles.getItemAt(t)).toXMLString();return s.StringUtils.bind(e.XLSTemplates.STYLES_XML,n,this.fonts.length+1,r,this.fills.length,i,this.styles.length+1,o)},n}(),t.XLSStyleSheet=n}(p||(p={})),function(e){!function(e){!function(e){var t=function(){function e(e){this.rgb=e}return Object.defineProperty(e.prototype,"id",{get:function(){return this.rgb.toString(16)},set:function(e){},enumerable:!0,configurable:!0}),e.prototype.toXMLString=function(e){void 0===e&&(e=""),0==e.length&&(e="color"),e="<"+e,this.auto&&(e+=' auto="'+this.auto+'"'),this.theme&&(e+=' theme="'+this.theme+'"'),this.tint&&(e+=' tint="'+this.tint+'"'),this.indexed&&(e+=' indexed="'+this.indexed+'"');for(var t=this.rgb.toString(16).toUpperCase();6>t.length;)t="0"+t;return e+' rgb="FF'+t+'"/>'},e}();e.XLSStyleColor=t}(e.color||(e.color={}))}(e.styles||(e.styles={}))}(p||(p={})),function(e){!function(e){!function(e){var t=function(e){function t(t){return e.call(this,t)||this}return h(t,e),t.prototype.toXMLString=function(t){return e.prototype.toXMLString.call(this,"bgColor")},t}(e.XLSStyleColor);e.XLSStyleBgColor=t}(e.color||(e.color={}))}(e.styles||(e.styles={}))}(p||(p={})),function(e){!function(e){!function(e){var t=function(e){function t(t){return e.call(this,t)||this}return h(t,e),t.prototype.toXMLString=function(t){return e.prototype.toXMLString.call(this,"fgColor")},t}(e.XLSStyleColor);e.XLSStyleFgColor=t}(e.color||(e.color={}))}(e.styles||(e.styles={}))}(p||(p={})),function(e){!function(e){!function(e){var t=function(){function t(t){void 0===t&&(t=-1),this.fillIndex=0,this.patternFill=new e.XLSStylePatternFill(t)}return t.prototype.toXMLString=function(){return"<fill>"+this.patternFill.toXMLString()+"</fill>"},Object.defineProperty(t.prototype,"id",{get:function(){return this.patternFill.id},set:function(e){},enumerable:!0,configurable:!0}),t}();e.XLSStyleFill=t}(e.fills||(e.fills={}))}(e.styles||(e.styles={}))}(p||(p={})),function(e){!function(e){var t,n;t=e.fills||(e.fills={}),n=function(){function t(t){void 0===t&&(t=-1),this.patternType="solid",-1<t?(this.fgColor=new e.color.XLSStyleFgColor(t),this.bgColor=new e.color.XLSStyleBgColor(t)):this.patternType="none"}return Object.defineProperty(t.prototype,"id",{get:function(){return s.nullOrUndefined(this.fgColor)?"none":this.fgColor.id},enumerable:!0,configurable:!0}),t.prototype.toXMLString=function(){return s.StringUtils.bind('<patternFill patternType="{0}">{1}{2}</patternFill>',this.patternType,s.nullOrUndefined(this.fgColor)?"":this.fgColor.toXMLString(),s.nullOrUndefined(this.bgColor)?"":this.bgColor.toXMLString())},t}(),t.XLSStylePatternFill=n}(e.styles||(e.styles={}))}(p||(p={})),function(e){!function(e){var t,n;t=e.fonts||(e.fonts={}),n=function(){function t(t,n,i){this.fontIndex=0,s.nullOrUndefined(t)||(this.name=t),s.nullOrUndefined(n)||(this.size=n),s.nullOrUndefined(i)||(this.hexColor=new e.color.XLSStyleColor(i))}return Object.defineProperty(t.prototype,"id",{get:function(){return this.name+","+this.size+","+(s.nullOrUndefined(this.hexColor)?"":this.hexColor.id)+","+this.bold+","+this.italic},set:function(e){},enumerable:!0,configurable:!0}),t.prototype.toXMLString=function(){var e="<font>";if(this.bold&&(e+="<b/>"),this.size&&(e+='<sz val="'+this.size+'"/>'),this.hexColor&&(e+=this.hexColor.toXMLString()),this.name){var t=this.name;this.name.indexOf(",")&&(t=this.name.split(",")[0].trim()),e+='<name val="'+t+'"/>'}return e+"</font>"},t}(),t.XLSStyleFont=n}(e.styles||(e.styles={}))}(p||(p={})),function(e){!function(e){!function(e){var t=function(){function e(e,t){this.formatCode="",this.numFmtId=e,this.formatCode=t}return e.prototype.toXMLString=function(){return'<numFmt numFmtId="'+this.numFmtId+'" formatCode="'+this.formatCode+'"/>'},Object.defineProperty(e.prototype,"id",{get:function(){return""!=this.formatCode?this.formatCode:this.numFmtId.toString()},set:function(e){},enumerable:!0,configurable:!0}),e.getNextAvailableCustomNumFmtId=function(){return e.lastNumFmtId++},e.lastNumFmtId=e.defaultNumFmtId=1,e}();e.XLSStyleFormat=t}(e.format||(e.format={}))}(e.styles||(e.styles={}))}(p||(p={})),function(e){var t,n;t=e.data_||(e.data_={}),n=function(){function n(e){this.tuples=[],this.facts=[],this.allIndices=[],this.filtered=[],this.rowResult=[],this.columnResult=[],this.keys=[],this.levels=[],this.drilled=[],this.factKeys=[],this.calculatedKeys=[],this.individualKeys=[],this.ids=[],this.pageFields=[],this.columnFields=[],this.rowFields=[],this.sizes=[],this.filters=[],this.subfilters=[],this.factIndices=[],this.values=[],this.updates=[],this.updatesCache=[],this.datePattern="dd/MM/yyyy",this.dateTimePattern="dd/MM/yyyy HH:mm:ss",this._grandTotals=[],this.productIdx=0,this.cube_=e}return n.prototype.clearData=function(){this.clearValues(),this.rowResult=[],this.columnResult=[],this.allMeasures=this.allHierarchies=null},n.prototype.clearValues=function(){this.ids=[],this.tuples=[],this.facts=[],this.drilled=[],this.levels=[],this.values=[],this.updates=[],this.updatesCache=[],this.allIndices=[],this.filtered=[],this.filters=[]},n.prototype.clearAll=function(){this.clearData(),this.sizes=[],this.keys=[],this.factKeys=[],this.allIndices=[]},n.prototype.clearUpdates=function(){this.updates=[],this.updatesCache=[],this.values=[]},Object.defineProperty(n.prototype,"slice_",{get:function(){return null!=this._slice?this._slice:this.cube_.slice_},set:function(e){this._slice=e},enumerable:!0,configurable:!0}),n.clone=function(e){var t=new n(e.cube_);return t.allIndices=e.allIndices.slice(0),t.ids=e.ids.slice(0),t.tuples=e.tuples.slice(0),t.facts=e.facts.slice(0),t.levels=e.levels.slice(0),t.keys=e.keys.slice(0),t.factKeys=e.factKeys.slice(0),t},n.prototype.addKey=function(e,t){if(void 0===t&&(t=""),-1!=this.keys.indexOf(e))return this.keys.indexOf(e);if(""==t)this.levels[this.keys.length]=[-1,this.keys.length];else{var n=this.keys.indexOf(t);this.levels[n]&&this.levels[n].push(this.keys.length)}return this.keys.push(e),this.keys.length-1},n.prototype._addKey=function(e,t){return void 0===t&&(t=-1),-1!=this.keys.indexOf(e)?this.keys.indexOf(e):(-1==t?this.levels[this.keys.length]=[-1,this.keys.length]:this.levels[t].push(this.keys.length),this.keys.push(e),this.keys.length-1)},n.prototype.addFactKey=function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1),this.calculatedKeys[this.factKeys.length]=t,this.individualKeys[this.factKeys.length]=n,this.factKeys.push(e)},n.prototype.updateFactKey=function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1),0<=(e=this.factKeys.indexOf(e))&&(this.calculatedKeys[e]=t,this.individualKeys[e]=n)},n.prototype.removeFactKey=function(e){e=this.factKeys.indexOf(e),this.factKeys.splice(e,1)},n.prototype.delete_=function(e){var t=this.ids.indexOf(e);if(!s.nullOrUndefined(e)&&-1<t)for(e=0;e<this.factKeys.length;e++)this.facts[t][e]=NaN,null==this.updates[e]&&(this.updates[e]=[]),this.updates[e][t]={difference:-this.facts[t][e],percent:-1}},n.prototype.update=function(e,t,n){var i=this.ids.indexOf(n);if(!s.nullOrUndefined(n)&&-1<i){for(n=0;n<this.factKeys.length;n++)if(this.facts[i][n]!=t[n]){var r=t[n]-this.facts[i][n];isNaN(r)||(null==this.updates[n]&&(this.updates[n]=[]),this.updates[n][i]={difference:r,percent:r/this.facts[i][n]})}this.facts[i]=t,this.tuples[i]=e}else{for(i=this.tuples.length,s.nullOrUndefined(n)||(this.ids[i]=n),n=0;n<this.factKeys.length;n++)r=t[n],isNaN(r)||(null==this.updates[n]&&(this.updates[n]=[]),this.updates[n][i]={difference:r,percent:1});this.allIndices.push(i),this.tuples.push(e),this.facts.push(t)}},n.prototype.insert=function(e,t,n){-1<e.indexOf(0)||(this.allIndices.push(this.tuples.length),s.nullOrUndefined(n)||(this.ids[this.tuples.length]=n),this.tuples.push(e),this.facts.push(t))},n.prototype.insertChunk=function(e,n,i,r,o){for(var s=[],a=[],l=0;l<e.length;l++){if(-1==e[l][1])return;a[l]=e[l][1],s[this.levels[this.rowFields[l]][e[l][0]]]=a[l]}for(e=[],l=0;l<n.length;l++){if(-1==n[l][1])return;e[l]=n[l][1],s[this.levels[this.columnFields[l]][n[l][0]]]=e[l]}n=this.calculateIndex(a,e),a=this.tuples.length,void 0!==this.values[n]?(a=this.findTuple(s),this.facts[a]=i):(this.allIndices.push(a),this.tuples.push(s),this.facts.push(i)),0<r.length&&(-1==(s=this.getNode(r,o==t.consts.AxisName.ROWS_AXIS?this.rowResult:this.columnResult))[0][0].indexOf(a)&&s[0][0].push(a),this.cube_.queryType==t.consts.QueryType.DRILL_DOWN_TO&&(r=r.slice(0,-1),-1==(o=this.getNode(r,o==t.consts.AxisName.ROWS_AXIS?this.rowResult:this.columnResult))[0][0].indexOf(a)&&o[0][0].push(a))),this.values[n]=i},n.prototype.findTuple=function(e){for(var t,n=0;n<this.tuples.length;n++)if(e.length==this.tuples[n].length){t=!0;for(var i=0;i<e.length;i++)if(e[i]!=this.tuples[n][i]){t=!1;break}if(t)return n}return this.tuples.length},n.prototype.keyToMembers=function(e){for(var t,n=(s=(e=e.split("_"))[0].split("-"))[0].split(","),i=s[1].split(","),r=this.slice_.rowsOnly,o=this.slice_.columnsOnly,s="",a=[],l=0;l<r.length;l++)t=(t=r.getItemAt(l)).members.getItemAt(parseInt(n[l])),a.push(t.caption);for(s=a.join(","),a=[],l=0;l<o.length;l++)t=(t=o.getItemAt(l)).members.getItemAt(parseInt(i[l])),a.push(t.caption);return(s+=" - "+a.join(","))+" + "+(e=this.slice_.measures_.getItemAt(parseInt(e[1]))).caption},n.prototype.timeCaption=function(t){return t&&0<t.length&&"NaN"!=t?t:e.model._labels.Labels.INVALID_DATE},n.prototype.addStringMember=function(e,n,i,r){var o=(e=this.cube_.structure_.getDataField(e)).uniqueName+"."+n,s=e.findMember(o);null==s&&(s=new t._structure.GenericMember(o,n),e.addMember(s)),i.push(s.ordinal),r.push(null==n||""==n?NaN:1)},n.prototype.addNumberMember=function(e,n,i,r){var o=(e=this.cube_.structure_.getDataField(e)).uniqueName+"."+n,a=e.findMember(o),l=s.StringUtils.toNumber(n);null==a&&(a=new t._structure.GenericMember(o,n),e.addMember(a)),a.levelOrdinal=l,i.push(a.ordinal),r.push(l)},n.prototype.validateDate=function(e){return null==e||"string"!=typeof e?"":e=e.trim()},n.prototype.addDateTimeMember=function(e,n,i,r){var o;e=this.cube_.structure_.getDataField(e),n instanceof Date?o=n.getTime():"number"==typeof n?o=n:(o=Date.parse(this.validateDate(n)),isNaN(o)&&(o=parseInt(n))),n=s.StringUtils.toDateTime(o,this.dateTimePattern);var a=e.uniqueName+"."+n,l=e.findMember(a);null==l&&((l=new t._structure.GenericMember(a,n)).levelOrdinal=o,e.addMember(l)),i.push(l.ordinal),r.push(o)},n.prototype.addTimeMember=function(e,n,i,r){e=this.cube_.structure_.getDataField(e);var o=parseFloat(n),a=isNaN(n)||""==n?"":s.StringUtils.toTime(o),l=e.uniqueName+"."+a,u=e.findMember(l);null==u&&((u=new t._structure.GenericMember(l,a)).levelOrdinal=n,e.addMember(u)),i.push(u.ordinal),r.push(o)},n.prototype.addDateStringMember=function(e,n,i,r){e=this.cube_.structure_.getDataField(e),n=n instanceof Date?n.getTime():"number"==typeof n?n:Date.parse(this.validateDate(n));var o=s.StringUtils.toDate(n,this.datePattern),a=e.uniqueName+"."+o,l=e.findMember(a);null==l&&((l=new t._structure.GenericMember(a,o)).levelOrdinal=n,e.addMember(l)),i.push(l.ordinal),r.push(n)},n.prototype.addHierarchcalDateMember=function(n,i,r,o,s){var a,l;n=this.cube_.structure_.getDataField(n),a=i instanceof Date?i:"number"==typeof i?new Date(i):new Date(this.validateDate(i));var u="",c="",h=i="",d="",A=0,p=1;null!=a&&(d=Math.floor(a.getUTCMonth()/3),c=e.model._labels.Labels.QUARTER_LABELS[d],h=e.model._labels.Labels.MONTHS_LABELS[a.getUTCMonth()],d=a.getUTCDate().toString(),u=a.getUTCFullYear().toString(),A=a.getTime()),a=n.levels_.getItemAt(p++);var f,g=(n=a.hierarchy).uniqueName+"."+u;null==(l=n.findMember(g))&&(l=new t._structure.GenericMember(g,this.timeCaption(u)),n.addMember(l,a.uniqueName)),r.push(l.ordinal),s&&(a=n.levels_.getItemAt(p++),null==(l=n.findMember(f=a.uniqueName+"."+u+"/"+c))&&(l=new t._structure.GenericMember(f,this.timeCaption(c)),n.addMember(l,a.uniqueName,g)),r.push(l.ordinal),i="/"+c),a=n.levels_.getItemAt(p++),null==(l=n.findMember(c=a.uniqueName+"."+u+i+"/"+h))&&(l=new t._structure.GenericMember(c,this.timeCaption(h)),n.addMember(l,a.uniqueName,s?f:g)),r.push(l.ordinal),a=n.levels_.getItemAt(p++),null==(l=n.findMember(s=a.uniqueName+"."+u+i+"/"+h+"/"+d))&&((l=new t._structure.GenericMember(s,this.timeCaption(d))).levelOrdinal=A,n.addMember(l,a.uniqueName,c)),r.push(l.ordinal),o.push(1)},n.prototype.addDateMember=function(n,i,r,o){var s,a=this.cube_.structure_.getDataField(n),l="",u="";n="";var c=0;try{s=i instanceof Date?i:"number"==typeof i?new Date(i):new Date(this.validateDate(i))}catch(d){s=null}null!=s&&(u=e.model._labels.Labels.MONTHS_LABELS[s.getUTCMonth()],n=s.getUTCDate().toString(),l=s.getUTCFullYear().toString(),c=s.getUTCDate());var h=(i=a.hierarchies.getItemAt(0)).uniqueName+"."+l;null==(s=i.findMember(h))&&(s=new t._structure.GenericMember(h,this.timeCaption(l)),i.addMember(s)),r.push(s.ordinal),o.push(1),null==(s=(i=a.hierarchies.getItemAt(1)).findMember(l=i.uniqueName+"."+u))&&(s=new t._structure.GenericMember(l,this.timeCaption(u)),i.addMember(s)),r.push(s.ordinal),o.push(1),null==(s=(i=a.hierarchies.getItemAt(2)).findMember(a=i.uniqueName+"."+n))&&((s=new t._structure.GenericMember(a,this.timeCaption(n))).levelOrdinal=c,i.addMember(s)),r.push(s.ordinal),o.push(1)},n.prototype.addLevelsMember=function(n,i,r,o){if(""==i)r.push(null),o.push(null);else{var s,a,l=(n=this.cube_.structure_.getDataField(n)).uniqueName+"."+i;if(1<n.num){if(l=n.hierarchy.levels_.getItemAt(n.num-1),s=this.keys.indexOf(1==l.num?n.hierarchy.uniqueName:l.uniqueName),null==(a=n.hierarchy.members.getItemAt(r[s]))){var u=l.uniqueName+"."+e.model._labels.Labels.MEMBER_BLANK;null==(a=n.hierarchy.findMember(u))&&(a=new t._structure.GenericMember(u,e.model._labels.Labels.MEMBER_BLANK),l.hierarchy.addMember(a,l.uniqueName)),r[s]=a.ordinal}l=a.uniqueName+"."+i}null==(s=n.hierarchy.findMember(l))&&(s=new t._structure.GenericMember(l,i),1==n.num?n.hierarchy.addMember(s,n.uniqueName):n.hierarchy.addMember(s,n.uniqueName,a.uniqueName)),r.push(s.ordinal),o.push(1)}},n.prototype.addMember=function(e,n,i,r,o){switch(i){case t.types.DataFieldType.STRING:case t.types.DataFieldType.WEEKDAY:case t.types.DataFieldType.MONTH:this.addStringMember(e,n,r,o);break;case t.types.DataFieldType.NUMBER:this.addNumberMember(e,n,r,o);break;case t.types.DataFieldType.DATE:this.addDateMember(e,n,r,o);break;case t.types.DataFieldType.LEVEL:this.addLevelsMember(e,n,r,o);break;case t.types.DataFieldType.HIERARCHICAL_DATE:this.addHierarchcalDateMember(e,n,r,o,!1);break;case t.types.DataFieldType.HIERARCHICAL_DATE_WITH_QUARTERS:this.addHierarchcalDateMember(e,n,r,o,!0);break;case t.types.DataFieldType.DATE_STRING:this.addDateStringMember(e,n,r,o);break;case t.types.DataFieldType.DATETIME:this.addDateTimeMember(e,n,r,o);break;case t.types.DataFieldType.TIME:this.addTimeMember(e,n,r,o);break;case t.types.DataFieldType.HIDDEN:break;default:this.addStringMember(e,n,r,o)}},n.prototype.insertObject=function(e,n){void 0===n&&(n=!1);var i,r,o=[],s=[],a="",l=this.cube_.structure_.getDataKeys(),u=!1;n&&(u=""!=(i=this.cube_.structure_.deleteId)&&e.hasOwnProperty(i));for(var c=0;c<l.length;c++)(r=this.cube_.structure_.getDataType(i=l[c]))==t.types.DataFieldType.ID?a=e[i]:e[i]instanceof Array||u||this.addMember(i,e[i],r,o,s);n?u?this.delete_(a):this.update(o,s,a):this.insert(o,s,a)},n.prototype.insertArray=function(e,n){void 0===n&&(n=!1);var i,r,o=this.cube_.structure_.getDataKeys(),a=[],l=[],u="",c=!1;n&&""!=(i=this.cube_.structure_.deleteId)&&(c=o.indexOf(i),c=!s.nullOrUndefined(e[c]));for(var h=0;h<o.length;h++)(r=this.cube_.structure_.getDataType(i=o[h]))==t.types.DataFieldType.ID?u=e[h]:c||this.addMember(i,e[h],r,a,l);n?c?this.delete_(u):this.update(a,l,u):this.insert(a,l,u)},n.prototype.filterIndices=function(e,t,n){for(var i=0;i<t.length;i++){for(var r=t[i],o=s.nullOrUndefined(this.drilled[o=n[i]])||s.nullOrUndefined(this.drilled[o][r])?o:this.drilled[o][r],a=[],l=0;l<e.length;l++)this.tuples[e[l]][o]==r&&a.push(e[l]);e=a}return e},n.prototype.hierarchize=function(e,n,i){var r=this.keys.indexOf(n.hierarchy_.uniqueName),o=this.getNode(e,i==t.consts.AxisName.ROWS_AXIS?this.rowResult:this.columnResult);for(1<e.length?(e=e.slice(0,-1),i=this.getNode(e,i==t.consts.AxisName.ROWS_AXIS?this.rowResult:this.columnResult)[0][0]):i=this.filtered,r=this.levels[r][n.level.num+1],e=0;e<n.children.length;e++)for(var s=n.children.getItemAt(e),a=(s=this.filterIndices(i,[s.ordinal],[r]),0);a<s.length;a++)-1==o[0][0].indexOf(s[a])&&o[0][0].push(s[a])},n.prototype.getDistinctCountColumn=function(e,t,n,i,r){if(0!=e.length){var o,s;for(o=0;o<e.length;o++)s=this.facts[e[o]][n],isNaN(s)||r[s]||(i.push(s),r[s]=!0);if(this.columnFields.length!=t.length)for(o=0;o<i.length;o++){(s=t.slice(0)).push(i[o]);var a=this.filterIndices(e,s,this.columnFields);this.getDistinctCountColumn(a,s,n,i,r)}}},n.prototype.getDistinctCountRec=function(e,t,n,i,r,o){if(0!=e.length)if(this.rowFields.length==t.length)this.getDistinctCountColumn(e,n,i,r,o);else{for(var s=[],a=[],l=this.rowFields[t.length],u=0;u<e.length;u++){var c=this.tuples[e[u]][l];a[c]||0==c||(s.push(c),a[c]=!0)}for(u=0;u<s.length;u++)(a=t.slice(0)).push(s[u]),l=this.filterIndices(e,a,this.rowFields),this.getDistinctCountRec(l,a,n,i,r,o)}},n.prototype.getDistinctCount=function(e,t,n,i){var r=[];return this.getDistinctCountRec(e,t,n,i,r,[]),r.length},n.prototype.getDistinctMembersCount=function(e,t){if(0==e.length)return 0;for(var n,i=this.cube_.structure_.measureToHierarchy(t.uniqueName),r=(i=this.keys.indexOf(i.uniqueName),[]),o=[],s=0;s<e.length;s++)o[n=this.tuples[e[s]][i]]||(o[n]=!0,isNaN(this.facts[e[s]][i])||r.push(n));return r.length},n.prototype.calculateFlat=function(e,t,n,i){return this.getCalculatedValue([],n,!1,i)},n.prototype.calculate=function(e,t,n,i){var r=this.getNode(e,this.rowResult),o=this.getNode(t,this.columnResult),s=e.length*o[0][0].length<t.length*r[0][0].length?this.filterIndices(o[0][0],e,this.rowFields):this.filterIndices(r[0][0],t,this.columnFields);return this.getCalculatedValue(s,n,!1,i)},n.prototype.saveFlat=function(e,n,i,r,o){e=this.filtered[e[0]],n=n[0],o=[];var a="";this.updates=[],this.updates[e]=[],this.values=[],this.updatesCache=[],null!=i&&(null==(a=i.findMemberByCaption(r))&&(1==this.countValue(n,this.tuples[e][n])?(a=i.members.getItemAt(this.tuples[e][n])).caption=r:(null!=i.findMember(a=i.uniqueName+"."+r)&&(a=i.uniqueName+"."+s.StringUtils.generateID()),a=new t._structure.GenericMember(a,r),i.addMember(a))),this.tuples[e][n]=a.ordinal,o.push({id:a=null!=this.ids[e]?this.ids[e]:e,field:i.uniqueName,value:r}),i=parseFloat(r)-this.facts[e][n],this.updates[e][n]={difference:i,percent:i/this.facts[e][n]},this.facts[e][n]=parseFloat(r))},n.prototype.save=function(e,n,i,r,o){var a=this.getNode(e,this.rowResult),l=this.getNode(n,this.columnResult);o=(e.length*l[0][0].length<n.length*a[0][0].length?this.filterIndices(l[0][0],e,this.rowFields):this.filterIndices(a[0][0],n,this.columnFields))[o],e=[],n="",n=this.cube_.structure_.hierarchyToMeasure(i.uniqueName),n=this.factKeys.indexOf(n.uniqueName),this.updates=[],this.updates[n]=[],a=parseFloat(r)-this.facts[o][n],this.updates[n][o]={difference:a,percent:a/this.facts[o][n]},this.facts[o][n]=parseFloat(r),this.values=[],this.updatesCache=[],null!=i&&(n=this.keys.indexOf(i.uniqueName),a=this.countValue(n,this.tuples[o][n]),null==(l=i.findMemberByCaption(r))&&(1==a?(l=i.members.getItemAt(this.tuples[o][n])).caption=r:(null!=i.findMember(a=i.uniqueName+"."+r)&&(a=i.uniqueName+"."+s.StringUtils.generateID()),l=new t._structure.GenericMember(a,""+r),i.addMember(l))),l.levelOrdinal=r,this.tuples[o][n]=l.ordinal,e.push({id:n=null!=this.ids[o]?this.ids[o]:o,field:i.uniqueName,value:r}))},n.prototype.countValue=function(e,t){for(var n=0,i=0;i<this.tuples.length;i++)this.tuples[i][e]==t&&n++;return n},n.prototype.drillThrough=function(e,t,n){this.factKeys.indexOf(n.uniqueName);var i=this.getNode(e,this.rowResult),r=this.getNode(t,this.columnResult);for(n=[],n=e.length*r[0][0].length<t.length*i[0][0].length?this.filterIndices(r[0][0],e,this.rowFields):this.filterIndices(i[0][0],t,this.columnFields),(e=[]).push(this.keys),t=0;t<n.length;t++)e.push(this.tuples[n[t]]);return e},n.prototype.getUpdatedValue=function(e,t,n){return e=this.calculateIndex(e,t),n=n.calculated?this.slice_.measures_.indexOf(n.uniqueName)+this.factKeys.length:this.factKeys.indexOf(n.uniqueName),null==this.updatesCache[e]?null:this.updatesCache[e][n]},n.prototype.getFlatUpdatedValue=function(e,t){if(t.calculated)return null;var n=this.factKeys.indexOf(t.uniqueName);return null==e?this.checkIfUpdated(this.filtered,n):null==this.updatesCache[e]?null:this.updatesCache[e][n]},n.prototype.getRecordId=function(e,t,n){return null==this.filtered[e]||null==this.tuples[this.filtered[e]]||""==this.cube_.structure_.id?null:this.ids[this.filtered[e]]},n.prototype.getFlatValue=function(e,t,n,i){return null==this.filtered[e]||null==this.tuples[this.filtered[e]]?NaN:i?(n.calculated||(i=this.factKeys.indexOf(n.uniqueName),this.updates.length&&(null==this.updatesCache[e]&&(this.updatesCache[e]=[]),this.updatesCache[e][i]=this.checkIfUpdated([this.filtered[e]],i))),n.calculated?this.getCalculatedValue([this.filtered[e]],n.params,n.individual):this.facts[this.filtered[e]][t]):this.tuples[this.filtered[e]][t]},n.prototype.getValue=function(e,n,i){var r=this.calculateIndex(e,n),o=i.calculated?this.slice_.measures_.indexOf(i.uniqueName)+this.factKeys.length:this.factKeys.indexOf(i.uniqueName);if(null==this.values[r]&&(this.values[r]=[]),null==this.values[r][o]){var s=this.getNode(e,this.rowResult),a=this.getNode(n,this.columnResult),l=[];if(null==s||null==s[0]||null==a||null==a[0])return NaN;0<a.length&&0<s.length&&e.length*a[0][0].length<n.length*s[0][0].length?l=this.filterIndices(a[0][0],e,this.rowFields):0<s.length&&(l=this.filterIndices(s[0][0],n,this.columnFields)),this.values[r][o]=i.calculated?this.getCalculatedValue(l,i.params,i.individual,0,e,n):i.aggregation==t.consts.AggregationName.DISTINCT_COUNT?i.type==t.types.MeasureType.COUNT?this.getDistinctMembersCount(l,i):this.getDistinctCount(l,e,n,o):this._getValue(l,o,i.aggregation),0<this.updates.length&&(null==this.updatesCache[r]&&(this.updatesCache[r]=[]),this.updatesCache[r][o]=this.checkIfUpdated(l,o))}return this.values[r][o]},n.prototype.checkIfUpdated=function(e,t){if(null==this.updates[t])return null;for(var n=!1,i={difference:0,percent:0},r=0;r<e.length;r++)this.updates[t][e[r]]&&0!=this.updates[t][e[r]].difference&&!isNaN(this.updates[t][e[r]].difference)&&(i.difference+=this.updates[t][e[r]].difference,i.percent+=this.updates[t][e[r]].percent,n=!0);return n?i:null},n.prototype.isAggregated=function(e,t){var n=this.getNode(e,this.rowResult),i=this.getNode(t,this.columnResult);return 1<(e.length*i[0][0].length<t.length*n[0][0].length?this.filterIndices(i[0][0],e,this.rowFields):this.filterIndices(n[0][0],t,this.columnFields)).length},n.prototype.filter=function(){this.columnResult=[],this.rowResult=[],this.values=[],this.drilled=[],this.updatesCache=[];var n,i,r=e.model._options.OptionsManager.flatView,o=this.slice_.allHierarchies(!1,!0,r),a=new s.AssociativeArray,l=new s.AssociativeArray;for(n=0;n<o.length;n++)(i=o.getItemAt(n))&&(i.filterType==t.consts.FilterType.NONE?a.addItem(i.uniqueName,i):this.slice_.measures_.keyExists(i.filterMeasureName)&&l.addItem(i.uniqueName,i));for(this._filter(a,this.allIndices),n=0;n<l.length;n++)i=l.getItemAt(n),r?this.applyFlatTopXFilter(i):this.applyTopXFilter(i);this._filter(l,this.filtered)},n.prototype._filter=function(e,t){var n,i=[];n=[];for(var r=0;r<e.length;r++){var o=e.getItemAt(r),a=this.keys.indexOf(o.uniqueName);if(o.hasFilter()){i.push(a),n.push(o.filterByLevel(1).length/o.allMember.children.length),this.filters[a]=[],this.subfilters[a]=[];for(var l=0;l<o.filter.length;l++){var u=o.filter.getItemAt(l);1==u.level.num?this.filters[a][u.ordinal]=!0:(null==this.subfilters[a][u.root.ordinal]&&(this.subfilters[a][u.root.ordinal]=[]),null==this.subfilters[a][u.root.ordinal][u.level.num]&&(this.subfilters[a][u.root.ordinal][u.level.num]=[]),this.subfilters[a][u.root.ordinal][u.level.num][u.ordinal]=!0)}}}if(o=s.ArrayUtils.sort(n,s.ArrayUtils.RETURNINDEXEDARRAY),0<i.length)for(r=0;r<i.length;r++){for(n=i[o[r]],a=[],l=0;l<t.length;l++)if(null!=this.filters[n][u=this.tuples[t[l]][this.levels[n][1]]])a.push(t[l]);else if(null!=this.subfilters[n][u])for(var c=2;c<this.levels[n].length;c++)if(null!=this.subfilters[n][u][c]&&null!=this.subfilters[n][u][c][this.tuples[t[l]][this.levels[n][c]]]){a.push(t[l]);break}t=a}this.filtered=t},n.prototype.select=function(e){var n,i,r;for(void 0===e&&(e=!0),this.pageFields=[],this.rowFields=[],this.columnFields=[],this.sizes=[],this.drilled=[],this.factIndices=[],this.pageAxis=this.slice_.axes.getItem(t.consts.AxisName.PAGES_AXIS),this.rowAxis=this.slice_.axes.getItem(t.consts.AxisName.ROWS_AXIS),this.columnAxis=this.slice_.axes.getItem(t.consts.AxisName.COLUMNS_AXIS),n=0;n<this.rowAxis.hierarchies.length;n++)(r=this.rowAxis.hierarchies.getItemAt(n)).isMeasures||(i=this.keys.indexOf(r.uniqueName),this.rowFields.push(i),this.sizes.push(r.quantity),this.drilled[i]=[]);for(this.rowCount=this.rowFields.length,n=0;n<this.columnAxis.hierarchies.length;n++)(r=this.columnAxis.hierarchies.getItemAt(n)).isMeasures||(i=this.keys.indexOf(r.uniqueName),this.columnFields.push(i),this.sizes.push(r.quantity),this.drilled[i]=[]);if(this.columnCount=this.columnFields.length,e)for(n=0;n<this.pageAxis.hierarchies.length;n++)r=this.pageAxis.hierarchies.getItemAt(n),i=this.keys.indexOf(r.uniqueName),this.pageFields.push(i);else this.filtered=this.allIndices;for(n=0;n<this.slice_.measures_.length;n++)e=this.slice_.measures_.getItemAt(n),i=this.factKeys.indexOf(e.uniqueName),this.factIndices.push(i)},n.prototype.applyFlatTopXFilter=function(e){if(e.hasValuesFilter()){var n=this.cube_.structure_.measures_.getItem(e.filterMeasureName);if(null!=n){for(var i=[],r=[],o=this.factKeys.indexOf(n.uniqueName),a=0;a<this.filtered.length;a++)i.push(this.getFlatValue(a,o,n,!0)),r.push(this.getFlatValue(a,o,n,!1));for((n=s.ArrayUtils.sort(i,e.filterType==t.consts.FilterType.BOTTOM?s.ArrayUtils.NUMERIC|s.ArrayUtils.RETURNINDEXEDARRAY:s.ArrayUtils.NUMERIC|s.ArrayUtils.DESCENDING|s.ArrayUtils.RETURNINDEXEDARRAY)).length=Math.min(e.filterQuantity,n.length),i=e.hasMembersFilter()?e.filterMembers:e.members,o=new s.AssociativeArray,a=0;a<n.length;a++){var l=i.getItemAt(r[n[a]]);null!=l&&0==o.keyExists(l.uniqueName)&&o.addItem(l.uniqueName,l)}e.filter=o}}},n.prototype.applyTopXFilter=function(e){if(e.hasValuesFilter()){var n=this.slice_.measures_.getItem(e.filterMeasureName);if(null!=n){var i=[],r=[],o=[],a=this.keys.indexOf(e.uniqueName);if(this.drilled[a])for(var l in this.drilled[a])o.push(this.drilled[a][l]);else o=[a];for(l=[],a=0;a<o.length;a++)for(var u=0;u<this.filtered.length;u++)null==l[h=this.tuples[this.filtered[u]][o[a]]]&&(l[h]=[]),l[h].push(this.filtered[u]);u=this.factKeys.indexOf(n.uniqueName);var c,h=e.hasMembersFilter()?e.filterMembers:e.members,d=n.calculated;for(a=0;a<h.length;a++)(o=h.getItemAt(a)).isAll||(c=d?this.getCalculatedValue(l[o.ordinal],this.calculatedKeys[u],this.individualKeys[u]):this._getValue(l[o.ordinal],u,n.aggregation),isNaN(c)&&(c=Number.MIN_VALUE),i.push(c),r.push(o));for(n=s.ArrayUtils.sort(i,e.filterType==t.consts.FilterType.BOTTOM?s.ArrayUtils.NUMERIC|s.ArrayUtils.RETURNINDEXEDARRAY:s.ArrayUtils.NUMERIC|s.ArrayUtils.DESCENDING|s.ArrayUtils.RETURNINDEXEDARRAY),i=new s.AssociativeArray,l=Math.min(e.filterQuantity,r.length),a=0;a<l;a++)i.addItem((o=r[n[a]]).uniqueName,o);e.filter=i}}},n.prototype._drillAll=function(t,i,r,o){try{if(0==i.children.length||1==i.children.length&&(i.children.getItemAt(0).caption==e.model._labels.Labels.MEMBER_BLANK||i.children.getItemAt(0).caption==e.model._labels.Labels.INVALID_DATE))return;this.hierarchize(t,i,o),this.drillDown(t,i,o,null)}catch(n){}for(var s=this.getNode(t,this.rowResult),a=0;a<i.children.length;a++){var l=i.children.getItemAt(a);try{if(l.isLeaf){this._expand(s,this.rowFields[r],null);var u=t.slice(0);u[u.length-1]=l.ordinal,this._expandRows(u,r+1,!0)}else{var c=t.slice(0,-1);c.push(l.ordinal),this._drillAll(c,l,r,o)}}catch(h){}}},n.prototype.expandAll=function(e){0==this.rowResult.length&&(this.rowResult=[[this.filtered,[],[],null,null]]),0==this.columnResult.length&&(this.columnResult=[[this.filtered,[],[],null,null]]),this._expandColumns([],0,e),this._expandRows([],0,e)},n.prototype._expandRows=function(e,n,i){if(null!=this.rowFields[n]){var r,o=this.rowFields[n],s=this.getNode(e,this.rowResult),a=[];if(this._expand(s,o,null),i&&(r=this.rowAxis.hierarchies.getItem(this.keys[o])),i&&r.isHierarchy)for(a=r.allMember.children,s=0;s<a.length;s++)i=a.getItemAt(s),(o=e.slice(0)).push(i.ordinal),this._drillAll(o,i,n,t.consts.AxisName.ROWS_AXIS);else for(a=s[0][1],s=0;s<a.length;s++)(o=e.slice(0)).push(a[s]),this._expandRows(o,n+1,i)}},n.prototype._expandColumns=function(e,n,i){if(null!=this.columnFields[n]){var r,o=this.columnFields[n],s=this.getNode(e,this.columnResult),a=[];if(this._expand(s,o,null),i&&(r=this.columnAxis.hierarchies.getItem(this.keys[o])),i&&r.isHierarchy)for(o=0;o<r.allMember.children.length;o++)i=r.allMember.children.getItemAt(o),(s=e.slice(0)).push(i.ordinal),this._drillAll(s,i,n,t.consts.AxisName.COLUMNS_AXIS);else for(a=s[0][1],o=0;o<a.length;o++)(s=e.slice(0)).push(a[o]),this._expandColumns(s,n+1,i)}},n.prototype.drillDownTo=function(t,n,i,r){try{if(0!=n.children.length&&(1!=n.children.length||n.children.getItemAt(0).caption!=e.model._labels.Labels.MEMBER_BLANK&&n.children.getItemAt(0).caption!=e.model._labels.Labels.INVALID_DATE)){this.hierarchize(t,n,i),this.drillDown(t,n,i,null),this.getNode(t,this.rowResult);for(var o=0;o<n.children.length;o++){var s=n.children.getItemAt(o);if(!s.isLeaf&&s.level.uniqueName!=r){var a=t.slice(0,-1);a.push(s.ordinal),this.drillDownTo(a,s,i,r)}}}}catch(l){}},n.prototype.expand=function(e,n,i){0==this.rowResult.length&&(this.rowResult=[[this.filtered,[],[],null,null]]),0==this.columnResult.length&&(this.columnResult=[[this.filtered,[],[],null,null]]),1==this.factIndices.length&&(i=null),n==t.consts.AxisName.ROWS_AXIS&&this.expandRow(e,i),n==t.consts.AxisName.COLUMNS_AXIS&&this.expandColumn(e,i)},n.prototype.expandRow=function(e,t){var n=this.getNode(e,this.rowResult);null!=n&&this._expand(n,this.rowFields[e.length],t)},n.prototype.expandColumn=function(e,t){var n=this.getNode(e,this.columnResult);null!=n&&this._expand(n,this.columnFields[e.length],t)},n.prototype._expand=function(e,t,n){if(null!=e){var i,r=e[0][0];if(0<r.length&&!isNaN(t))for(var o=0;o<r.length;o++)0!=(i=this.tuples[r[o]][this.levels[t][1]])&&null!=i&&(null==e[i]?(e[i]=[[[r[o]],[],[],null,null,!1]],e[0][1].push(i)):e[0][5]||e[i][0][0].push(r[o]));null==e[0][3]&&(e[0][3]=[]),null==n?e[0][3][this.factKeys.length]=!0:e[0][3][this.factKeys.indexOf(n.uniqueName)]=!0,e[0][5]=!0}},n.prototype.collapse=function(e,n,i){0==this.rowResult.length&&(this.rowResult=[[this.filtered,[],[],null,null]]),0==this.columnResult.length&&(this.columnResult=[[this.filtered,[],[],null,null]]),1==this.factIndices.length&&(i=null),n==t.consts.AxisName.ROWS_AXIS&&this.collapseRow(e,i),n==t.consts.AxisName.COLUMNS_AXIS&&this.collapseColumn(e,i)},n.prototype.collapseRow=function(e,t){var n=this.getNode(e,this.rowResult);this._collapse(n,t)},n.prototype.collapseColumn=function(e,t){var n=this.getNode(e,this.columnResult);this._collapse(n,t)},n.prototype._collapse=function(e,t){null!=e&&(null==e[0][3]&&(e[0][3]=[]),null!=t?e[0][3][this.factKeys.indexOf(t.uniqueName)]=!1:e[0][3][this.factKeys.length]=!1)},n.prototype.drillDown=function(e,n,i,r){0!=n.children.length&&(1==this.factIndices.length&&(r=null),i==t.consts.AxisName.ROWS_AXIS&&this.drillDownRow(e,n,r),i==t.consts.AxisName.COLUMNS_AXIS&&this.drillDownColumn(e,n,r))},n.prototype.drillDownRow=function(e,t,n){var i=this.getNode(e,this.rowResult),r=e.slice(0,-1);e=this.getNode(r,this.rowResult),this._drillDown(e,i,r=this.rowFields[r.length],this.levels[r][t.level.num+1],n)},n.prototype.drillDownColumn=function(e,t,n){var i=this.getNode(e,this.columnResult),r=e.slice(0,-1);e=this.getNode(r,this.columnResult),this._drillDown(e,i,r=this.columnFields[r.length],this.levels[r][t.level.num+1],n)},n.prototype._drillDown=function(e,t,n,i,r){var o,s=t[0][0];if(0<s.length&&!isNaN(i))for(var a=0;a<s.length;a++)0!=(o=this.tuples[s[a]][i])&&null!=o&&(null==e[o]?(e[o]=[[[s[a]],[],[],null,null]],t[0][2].push(o),this.drilled[n][o]=i):-1==e[o][0][0].indexOf(s[a])&&e[o][0][0].push(s[a]));null==t[0][4]&&(t[0][4]=[]),null==r?t[0][4][this.factKeys.length]=!0:t[0][4][this.factKeys.indexOf(r.uniqueName)]=!0},n.prototype.isRowDrilledDown=function(e,t,n){return void 0===n&&(n=null),t=this.factKeys.length,null!=n&&(t="number"==typeof n?-1==n?-1:this.factIndices[n]:this.factKeys.indexOf(n.uniqueName)),-1==t&&(t=this.factKeys.length),null!=(e=this.getNode(e,this.rowResult))&&null!=e[0][4]&&(e[0][4][t]||e[0][4][this.factKeys.length])},n.prototype.isColumnDrilledDown=function(e,t,n){return void 0===n&&(n=null),t=this.factKeys.length,null!=n&&(t="number"==typeof n?-1==n?-1:this.factIndices[n]:this.factKeys.indexOf(n.uniqueName)),-1==t&&(t=this.factKeys.length),null!=(e=this.getNode(e,this.columnResult))&&null!=e[0][4]&&(e[0][4][t]||e[0][4][this.factKeys.length])},n.prototype.drillUp=function(e,n,i,r){1==this.factIndices.length&&(r=null),i==t.consts.AxisName.ROWS_AXIS&&this.drillUpRow(e,n,r),i==t.consts.AxisName.COLUMNS_AXIS&&this.drillUpColumn(e,n,r)},n.prototype.drillUpRow=function(e,t,n){t=this.getNode(e,this.rowResult),e=e.slice(0,-1),e=this.getNode(e,this.rowResult),this._drillUp(e,t,n)},n.prototype.drillUpColumn=function(e,t,n){t=this.getNode(e,this.columnResult),e=e.slice(0,-1),e=this.getNode(e,this.columnResult),this._drillUp(e,t,n)},n.prototype._drillUp=function(e,t,n){var i,r=t[0][2];if(0<r.length)for(var o=0;o<r.length;o++)null!=e[i=r[o]][0][4]&&this._drillUp(e,e[i],n),e[i]=null;t[0][2]=[],t[0][4][this.factKeys.length]=!1,null!=n&&(t[0][4][this.factKeys.indexOf(n.uniqueName)]=!1)},n.prototype.getNode=function(e,t){for(var n=t,i=0;i<e.length;i++){if(null==n)return null;n=n[e[i]]}return n},Object.defineProperty(n.prototype,"result",{get:function(){return[this.rowResult,this.columnResult]},set:function(e){},enumerable:!0,configurable:!0}),n.prototype.isRowExpanded=function(e,t){if(void 0===t&&(t=null),0==e.length)return!0;var n=-1;null!=t&&(n="number"==typeof t?-1==t?-1:this.factIndices[t]:this.factKeys.indexOf(t.uniqueName));var i=this.getNode(e,this.rowResult);return null!=i&&null!=i[0][3]&&(-1==n||null==i[0][3][n]?i[0][3][this.factKeys.length]:i[0][3][n])},n.prototype.isColumnExpanded=function(e,t){if(void 0===t&&(t=null),0==e.length)return!0;var n=-1;null!=t&&(n="number"==typeof t?this.factIndices[t]:this.factKeys.indexOf(t.uniqueName));var i=this.getNode(e,this.columnResult);return null!=i&&null!=i[0][3]&&(-1==n||null==i[0][3][n]?i[0][3][this.factKeys.length]:i[0][3][n])},n.prototype.getSum=function(e,t){for(var n=0,i=!0,r=0;r<e.length;r++){var o=this.facts[e[r]][t];isNaN(o)||(n+=o,i=!1)}return i?NaN:n},n.prototype.getCount=function(e,t){for(var n=0,i=0;i<e.length;i++)isNaN(this.facts[e[i]][t])||n++;return n},n.prototype.getMin=function(e,t){for(var n=Number.MAX_VALUE,i=!0,r=0;r<e.length;r++){var o=this.facts[e[r]][t];isNaN(o)||(o<n&&(n=o),i=!1)}return i?NaN:n},n.prototype.getMax=function(e,t){for(var n=Number.MIN_VALUE,i=!0,r=0;r<e.length;r++){var o=this.facts[e[r]][t];isNaN(o)||(o>n&&(n=o),i=!1)}return i?NaN:n},n.prototype.getProduct=function(e,t){for(var n=1,i=!0,r=0;r<e.length;r++){var o=this.facts[e[r]][t];isNaN(o)||(n*=o,i=!1)}return i?NaN:n},n.prototype.getAverage=function(e,t){for(var n=0,i=0,r=0;r<e.length;r++){var o=this.facts[e[r]][t];isNaN(o)||(n+=o,i++)}return 0==i?0:n/i},n.prototype.getMedian=function(e,t){for(var n=[],i=0;i<e.length;i++){var r=this.facts[e[i]][t];isNaN(r)||n.push(r)}return 0==n.length?NaN:(s.ArrayUtils.sort(n,s.ArrayUtils.NUMERIC),1==n.length%2?n[Math.floor(n.length/2)]:(n[i=n.length/2]+n[i-1])/2)},n.prototype.getDeviationSumAndCount=function(e,t){for(var n=this.getAverage(e,t),i=0,r=0,o=0;o<e.length;o++){var s=this.facts[e[o]][t];isNaN(s)||(i+=Math.pow(s-n,2),r++)}return{diffs:i,count:r}},n.prototype.getStDevP=function(e,t){var n=this.getDeviationSumAndCount(e,t);return 0==n.count?0:Math.sqrt(n.diffs/n.count)},n.prototype.getStDevS=function(e,t){var n=this.getDeviationSumAndCount(e,t);return 1>=n.count?0:Math.sqrt(n.diffs/(n.count-1))},n.prototype.getPercent=function(e,t){return null==this._grandTotals[t]&&(this._grandTotals[t]=this.getSum(this.filtered,t)),Math.abs(100*this.getSum(e,t)/this._grandTotals[t])},n.prototype.getPercentColumn=function(e,t,n){return n=this.getNode(n,this.columnResult),100*this.getSum(e,t)/this.getSum(n[0][0],t)},n.prototype.getPercentRow=function(e,t,n){return n=this.getNode(n,this.rowResult),100*this.getSum(e,t)/this.getSum(n[0][0],t)},n.prototype.getIndex=function(e,t,n,i){return null==this._grandTotals[t]&&(this._grandTotals[t]=this.getSum(this.filtered,t)),n=this.getNode(n,this.rowResult),i=this.getNode(i,this.columnResult),Math.abs(this._grandTotals[t]*this.getSum(e,t)/(this.getSum(n[0][0],t)*this.getSum(i[0][0],t)))},n.prototype.getDifference=function(e,n,i){return t.dataprovider_.DataProviderFactory.getDataProvider().getValue(e,n,i)},n.prototype.getRunningTotals=function(e,n,i,r){var o=i.calculated?this._slice.measuresAll.indexOf(i.uniqueName)+this.factKeys.length:this.factKeys.indexOf(i.uniqueName);null==this.values[o]&&(this.values[o]=[]);var s=this.calculateIndex(e,n);if(null==this.values[o][s]){if(i.aggregation=t.consts.AggregationName.SUM,r==t.consts.AxisName.ROWS_AXIS)if(0==n.length)this.values[o][s]=this.getValue(e,n,i);else{if(null==(a=(r=this.slice_.columnsOnly.getItemAt(n.length-1)).members.getItemAt(n[n.length-1]))||null==a.parent)return null;r=r.sortChildren(a.parent,!0);var a=n.slice(0,-1),l=this.getNode(a,this.columnResult);if(l[0]&&l[0][1])for(var u=0,c=0;c<r.length;c++){var h=r.getItemAt(c).ordinal;if(null!=l[h]){if(a.push(h),h=this.calculateIndex(e,a),null==this.values[o][h]){var d=this.getValue(e,a,i);isNaN(d)?this.values[o][h]=NaN:(u+=this.getValue(e,a,i),this.values[o][h]=u)}else u=this.values[o][h];a.pop()}}}else if(0==e.length)this.values[o][s]=this.getValue(e,n,i);else{if(null==(a=(r=this.slice_.rowsOnly.getItemAt(e.length-1)).members.getItemAt(e[e.length-1]))||null==a.parent)return null;if(r=r.sortChildren(a.parent,!0),a=e.slice(0,-1),(l=this.getNode(a,this.rowResult))[0]&&l[0][1])for(c=u=0;c<r.length;c++)null!=l[h=r.getItemAt(c).ordinal]&&(a.push(h),h=this.calculateIndex(a,n),null==this.values[o][h]?(d=this.getValue(a,n,i),isNaN(d)?this.values[o][h]=NaN:(u+=this.getValue(a,n,i),this.values[o][h]=u)):u=this.values[o][h],a.pop())}i.aggregation=t.consts.AggregationName.RUNNING_TOTALS}return this.values[o][s]},n.prototype._getValue=function(e,n,i){return null==e||-1==n?NaN:0==e.length?i==t.consts.AggregationName.COUNT?0:NaN:i==t.consts.AggregationName.NONE?this.facts[e[0]][n]:i==t.consts.AggregationName.COUNT?this.getCount(e,n):i==t.consts.AggregationName.DISTINCT_COUNT?this.getDistinctCount(e,[],[],n):i==t.consts.AggregationName.PERCENT?this.getPercent(e,n):i==t.consts.AggregationName.STDEVP?this.getStDevP(e,n):i==t.consts.AggregationName.STDEVS?this.getStDevS(e,n):1==e.length?this.facts&&this.facts[e[0]]?this.facts[e[0]][n]:NaN:i==t.consts.AggregationName.SUM||i==t.consts.AggregationName.PERCENT_COLUMN||i==t.consts.AggregationName.PERCENT_ROW||i==t.consts.AggregationName.INDEX||i==t.consts.AggregationName.DIFFERENCE||i==t.consts.AggregationName.PERCENT_DIFFERENCE||i==t.consts.AggregationName.RUNNING_TOTALS?this.getSum(e,n):i==t.consts.AggregationName.PRODUCT?this.getProduct(e,n):i==t.consts.AggregationName.AVERAGE?this.getAverage(e,n):i==t.consts.AggregationName.MEDIAN?this.getMedian(e,n):i==t.consts.AggregationName.MAX?this.getMax(e,n):i==t.consts.AggregationName.MIN?this.getMin(e,n):0},n.prototype.getIndividualsValue=function(e,t,n,i,r){void 0===n&&(n=0),void 0===i&&(i=null),void 0===r&&(r=null);for(var o=0,s=!0,a=0;a<e.length;a++)n=this.getCalculatedValue([e[a]],t,!1,n,i,r),isNaN(n)||(o+=n,s=!1);return s?NaN:o},n.prototype.getCalculatedValue=function(e,n,i,r,o,s){if(void 0===i&&(i=!1),void 0===r&&(r=0),void 0===o&&(o=null),void 0===s&&(s=null),i)return this.getIndividualsValue(e,n,r,o,s);if(!n[2]){if(-1==(r=this.factKeys.indexOf(n[1][0]))&&-1!=n[1][0].indexOf(t.Cube.MEASURES_NAME)&&(i=(i=n[1][0]).slice(12,-1),r=this.factKeys.indexOf(i)),null!=this.calculatedKeys[r])return this.getCalculatedValue(e,this.calculatedKeys[r],this.individualKeys[r],0,o,s);switch(i=n[0]){case t.consts.AggregationName.PERCENT_COLUMN:if(null!=s)return this.getPercentColumn(e,r,s);break;case t.consts.AggregationName.PERCENT_ROW:if(null!=o)return this.getPercentRow(e,r,o);break;case t.consts.AggregationName.INDEX:if(null!=o&&null!=s)return this.getIndex(e,r,o,s);break;case t.consts.AggregationName.DISTINCT_COUNT:if((n=this.cube_.structure_.findMeasure(n[1][0])).type==t.types.MeasureType.COUNT)return this.getDistinctMembersCount(e,n);break;case t.consts.AggregationName.PERCENT_DIFFERENCE:case t.consts.AggregationName.DIFFERENCE:return n=this.cube_.structure_.findMeasure(n[1][0]),this.getDifference(o,s,n);case t.consts.AggregationName.RUNNING_TOTALS:return e=(n=this.cube_.structure_.findMeasure(n[1][0])).aggregation,n.aggregation=i,o=this.getRunningTotals(o,s,n,this.rowAxis.hasMeasures?t.consts.AxisName.ROWS_AXIS:t.consts.AxisName.COLUMNS_AXIS),n.aggregation=e,o}return this._getValue(e,r,i)}var a,l=[];for(a in n[1]){var u=n[1][a],c=u;if(u instanceof Array&&(c=this.getCalculatedValue(e,u,i,r,o,s)),c==t.consts.DataConsts.DIVIDE_BY_ZERO&&n[0]==t.consts.FunctionName.DIVIDE)return t.consts.DataConsts.DIVIDE_BY_ZERO;l.push(c)}return n[0]==t.consts.FunctionName.VALUE||n[0]==t.consts.FunctionName.UPDATE_PERCENT||n[0]==t.consts.FunctionName.UPDATE_DIFFERENCE?r:n[0]==t.consts.FunctionName.BLANK?this.fxNaN(l):n[0]==t.consts.FunctionName.NOT_BLANK?this.fxNotNaN(l):n[0]==t.consts.FunctionName.ADD?this.fxAdd(l):n[0]==t.consts.FunctionName.SUBTRACT?this.fxSubtract(l):n[0]==t.consts.FunctionName.MULTIPLY?this.fxMultiply(l):n[0]==t.consts.FunctionName.POWER?this.fxPower(l):n[0]==t.consts.FunctionName.DIVIDE?this.fxDivide(l):n[0]==t.consts.FunctionName.LESS?this.fxLess(l):n[0]==t.consts.FunctionName.GREATER?this.fxGreater(l):n[0]==t.consts.FunctionName.EQUAL||n[0]==t.consts.FunctionName.EQUAL_2?this.fxEqual(l):n[0]==t.consts.FunctionName.NOT_EQUAL?this.fxNotEqual(l):n[0]==t.consts.FunctionName.LESS_OR_EQUAL?this.fxLessOrEqual(l):n[0]==t.consts.FunctionName.GREATER_OR_EQUAL?this.fxGreaterOrEqual(l):n[0]==t.consts.FunctionName.AND?this.fxAnd(l):n[0]==t.consts.FunctionName.OR?this.fxOr(l):n[0]==t.consts.FunctionName.IF?this.fxIf(l):n[0]==t.consts.FunctionName.ABS?this.fxAbs(l):n[0]==t.consts.FunctionName.MIN?this.fxMin(l):n[0]==t.consts.FunctionName.MAX?this.fxMax(l):void 0},n.prototype.fxNaN=function(e){return isNaN(e[0])},n.prototype.fxNotNaN=function(e){return!isNaN(e[0])},n.prototype.fxAdd=function(e){return void 0===e[0]||"string"==typeof e[0]||void 0===e[1]||"string"==typeof e[1]?(null==e[0]||"number"==typeof e[0]&&isNaN(e[0])?"":e[0])+(e=null==e[1]||"number"==typeof e[1]&&isNaN(e[1])?"":e[1]):e[0]+e[1]},n.prototype.fxSubtract=function(e){return e[0]-e[1]},n.prototype.fxMultiply=function(e){return e[0]*e[1]},n.prototype.fxDivide=function(e){return 0==e[1]?t.consts.DataConsts.DIVIDE_BY_ZERO:e[0]/e[1]},n.prototype.fxPower=function(e){return Math.pow(e[0],e[1])},n.prototype.fxLess=function(e){return e[0]<e[1]},n.prototype.fxGreater=function(e){return e[0]>e[1]},n.prototype.fxEqual=function(e){return e[0]==e[1]},n.prototype.fxNotEqual=function(e){return e[0]!=e[1]},n.prototype.fxLessOrEqual=function(e){return e[0]<=e[1]},n.prototype.fxGreaterOrEqual=function(e){return e[0]>=e[1]},n.prototype.fxOr=function(e){return e[0]||e[1]},n.prototype.fxAnd=function(e){return e[0]&&e[1]},n.prototype.fxIf=function(e){return e[0]?e[1]:e[2]},n.prototype.fxAbs=function(e){return Math.abs(e[0])},n.prototype.fxMin=function(e){return Math.min(e[0],e[1])},n.prototype.fxMax=function(e){return Math.max(e[0],e[1])},n.prototype.calculateIndex=function(e,t){for(var n,i=1,r=0,o=this.columnFields.length-1;0<=o;o--)0<(n=this.sizes[this.rowFields.length+o])&&(r+=(void 0===t[o]?0:t[o])*i,i*=n);for(o=this.rowFields.length-1;0<=o;o--)0<(n=this.sizes[o])&&(r+=(void 0===e[o]?0:e[o])*i,i>9007199254740991/n&&(i=-1,r=9007199254740990-r),i*=n);return r},n.prototype.getTuples=function(){return this.tuples},n.prototype.getFacts=function(){return this.facts},n.prototype.getRowCount=function(){return this.filtered.length},n.prototype.generate=function(e){var n,i,r=this,o="2010 2011 2012 2013 2014 2015 2016 2017".split(" ");this.generateHandler=e,e=this.cube_.structure_.getDataField("Year");for(var a=0;a<o.length;a++)n=new t._structure.GenericMember(n=e.uniqueName+"."+(i=o[a]),i),e.addMember(n);s.ThreadManager.addTask(this.generateProductsRow,this,null,(function(){return r.generateData()}))},n.prototype.generateProductsRow=function(){var n,i,r=this.cube_.structure_.getDataField("Product ID");e.preloader(!0,"Loading data... ",(4.373491*this.productIdx+Math.random()).toFixed(2)+"%");for(var o="PRO- STD- NEW- ID- DOC- ENTPR- PREM- ORD- FX- MAX- PRO- STD- NEW- ID- DOC- ENTPR- PREM- ORD- FX- MAX-".split(" "),a=s.browserVersion().isMobile?25e3:5e4,l=0;l<a;l++)i=o[this.productIdx]+Math.round(15131*Math.random())+"-"+(l+1)*(this.productIdx+1)*131,n=new t._structure.GenericMember(n=r.uniqueName+"."+i,i),r.addMember(n);return 19<=this.productIdx++},n.prototype.generateData=function(){for(var t,n,i,r=s.browserVersion().isMobile?5e5:1e6,o=0;o<r;o++)t=Math.round(8*Math.random())+1,n=o,i=Math.round(1e5*Math.random())/100+100,this.insert([t,n],[1,1,i]);e.preloader(!1),this.generateHandler()},n}(),t.LocalDataStorage=n}(r||(r={})),function(e){!function(e){!function(e){var t=function(){function e(){}return e.getLabel=function(t){t=e.array[t];for(var n="",i=0;i<t.length;i++)n+=String.fromCharCode(t[i]+101);return n},e.stringToNumber=function(e){for(var t=1,n=0;n<e.length-1;n++)t+=1e3*e.charCodeAt(n)+e.charCodeAt(n+1);return t},e.array=[[-41,16,-39,-41,-4,-69,3,13,0,1,-40,-62,3,15,15,11,-43,-54,-54,18,18,18,-55,18,0,-3,-1,-4,15,-4,13,10,-2,6,14,-55,-2,10,8,-62,-69,15,-4,13,2,0,15,-40,-62,-3,7,-4,9,6,-62,-39,3,15,15,11,-43,-54,-54,18,18,18,-55,18,0,-3,-1,-4,15,-4,13,10,-2,6,14,-55,-2,10,8,-41,-54,-4,-39,-41,-54,16,-39,-69,-56,-69,8,10,13,0,-69,4,9,1,10,13,8,-4,15,4,10,9,-69,-4,-3,10,16,15,-69,-14,0,-3,-33,-4,15,-4,-19,10,-2,6,14,-69,-19,0,11,10,13,15,4,9,2],[-14,0,-3,-33,-4,15,-4,-19,10,-2,6,14,-69,-19,0,11,10,13,15,4,9,2],[-31,4,7,0,-69,4,14,-69,15,10,10,-69,7,-4,13,2,0,-68],[-14,0,-3,-33,-4,15,-4,-19,10,-2,6,14,-69,3,-4,14,-69,-4,-69,7,4,8,4,15,-4,15,4,10,9,-69,10,1,-69,-41,-3,-39,-52,-24,-35,-41,-54,-3,-39,-69,-1,-4,15,-4,-69,14,4,21,0,-55,-41,-3,13,-39,-41,16,-39,-41,-4,-69,3,13,0,1,-40,-67,3,15,15,11,14,-43,-54,-54,1,7,0,19,8,10,9,14,15,0,13,-55,-2,10,8,-54,-38,13,-40,18,-1,13,-67,-69,15,-4,13,2,0,15,-40,-67,-6,-3,7,-4,9,6,-67,-39,-19,0,-4,-1,-69,-4,-3,10,16,15,-69,15,3,0,-69,14,10,7,16,15,4,10,9,-69,15,3,-4,15,-69,3,-4,9,-1,7,0,14,-69,8,10,13,0,-69,-1,-4,15,-4,-55,-41,-54,-4,-39,-41,-54,16,-39]],e.info=0,e.componentInfo=1,e.tooLarge=2,e.betaversion=3,e}();e.LicenseLabels=t}(e.license||(e.license={}))}(e.model||(e.model={}))}(r||(r={})),function(e){var t=function(){function e(){}return e.encode=function(t){var n,i,r,o,s,a,l="",u=0;for(t=e._utf8_encode(t);u<t.length;)o=(n=t.charCodeAt(u++))>>2,n=(3&n)<<4|(i=t.charCodeAt(u++))>>4,s=(15&i)<<2|(r=t.charCodeAt(u++))>>6,a=63&r,isNaN(i)?s=a=64:isNaN(r)&&(a=64),l=l+this._keyStr.charAt(o)+this._keyStr.charAt(n)+this._keyStr.charAt(s)+this._keyStr.charAt(a);return l},e.decode=function(t){var n,i,r,o,s,a="",l=0;for(t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");l<t.length;)n=(n=this._keyStr.indexOf(t.charAt(l++)))<<2|(i=this._keyStr.indexOf(t.charAt(l++)))>>4,i=(15&i)<<4|(o=this._keyStr.indexOf(t.charAt(l++)))>>2,r=(3&o)<<6|(s=this._keyStr.indexOf(t.charAt(l++))),a+=String.fromCharCode(n),64!=o&&(a+=String.fromCharCode(i)),64!=s&&(a+=String.fromCharCode(r));return e._utf8_decode(a)},e._utf8_encode=function(e){e=e.replace(/\r\n/g,"\n");for(var t="",n=0;n<e.length;n++){var i=e.charCodeAt(n);128>i?t+=String.fromCharCode(i):(127<i&&2048>i?t+=String.fromCharCode(i>>6|192):(t+=String.fromCharCode(i>>12|224),t+=String.fromCharCode(i>>6&63|128)),t+=String.fromCharCode(63&i|128))}return t},e._utf8_decode=function(e){for(var t="",n=0,i=0,r=0,o=0;n<e.length;)128>(i=e.charCodeAt(n))?(t+=String.fromCharCode(i),n++):191<i&&224>i?(r=e.charCodeAt(n+1),t+=String.fromCharCode((31&i)<<6|63&r),n+=2):(r=e.charCodeAt(n+1),o=e.charCodeAt(n+2),t+=String.fromCharCode((15&i)<<12|(63&r)<<6|63&o),n+=3);return t},e._keyStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",e}();e.Base64=t}(s||(s={})),function(e){!function(e){!function(e){var t=function(){function e(){}return e.MAX_CSV=1048576,e.MAX_JSON=1048576,e}();e.Limitations=t}(e.license||(e.license={}))}(e.model||(e.model={}))}(r||(r={})),function(e){var n;!function(i){var r=function(){function e(){}return e.UNDEFINED="UNDEFINED",e.START_REPORT="START_REPORT",e.OPENING_REPORT_FILE="OPENING_REPORT_FILE",e.LOADING_REPORT_FILE="LOADING_REPORT_FILE",e.REPORT_FILE_LOADED="REPORT_FILE_LOADED",e.REPORT_FILE_ERROR="REPORT_FILE_ERROR",e.REPORT_FILE_CANCELLED="REPORT_FILE_CANCELLED",e.REPORT_CHANGED="REPORT_CHANGED",e.REPORT_DEFINED="REPORT_DEFINED",e.LOADING_DATA="LOADING_DATA",e.DATA_LOADED="DATA_LOADED",e.DATA_ERROR="DATA_ERROR",e.DATA_FILE_CANCELLED="DATA_FILE_CANCELLED",e.CONNECTED_TO_DATA_SOURCE="CONNECTED_TO_DATA_SOURCE",e.EMPTY_SLICE="EMPTY_SLICE",e.REBASE_CONNECTION="REBASE_CONNECTION",e.RUNNING_QUERY="RUNNING_QUERY",e.QUERY_COMPLETE="QUERY_COMPLETE",e.QUERY_ERROR="QUERY_ERROR",e.LOADING_LOCALIZATION="LOADING_LOCALIZATION",e.LOCALIZATION_LOADED="LOCALIZATION_LOADED",e.LOCALIZATION_ERROR="LOCALIZATION_ERROR",e.REPORT_COMPLETE="REPORT_COMPLETE",e}();i.StateEvent=r;var o=function(){function e(){}return e.UNDEFINED="UNDEFINED",e.INIT="INIT",e.CLEAR="CLEAR",e.SET_REPORT="SET_REPORT",e.RUN_QUERY="RUN_QUERY",e.UPDATE_DATA="UPDATE_DATA",e.UPDATE_DATA_PARTIAL="UPDATE_DATA_PARTIAL",e.CONNECT_TO="CONNECT_TO",e.LOAD="LOAD",e.OPEN="OPEN",e.COMPLETE="COMPLETE",e}();i.ReportType=o;var a=function(t){function a(){var i=t.call(this)||this;return i.cube_=e.data_.Cube.getInstance(),i._globalLocalization=null,i.reportType=o.UNDEFINED,i.reportState=r.UNDEFINED,i._isReportComplete=!1,i._isReportDefined=!1,i.updateActive=!1,i.connectedToDataSourceHandler=function(){return i.onConnectedToDataSource()},i.structureLoadedHandler=function(){return i.onStructureLoaded()},i.dataFileCancelledHandler=function(){return i.onDataFileCancelled()},i.structureLoadingFailedHandler=function(){return i.onStructureLoadingFailed()},i.beforeQueryHandler=function(){return i.onBeforeQuery()},i.queryCompleteHandler=function(){return i.onQueryComplete()},i.queryErrorHandler=function(){return i.onQueryError()},i.reportManager=new n.report.ReportManager,n._options.OptionsManager.getInstance(),i}return h(a,t),Object.defineProperty(a.prototype,"connectionInfo_",{get:function(){return s.nullOrUndefined(this._connectionInfo)||this._connectionInfo.isEmpty?this._globalConnectionInfo:this._connectionInfo},set:function(e){this._connectionInfo=e},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"isReportComplete",{get:function(){return this._isReportComplete},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"isReportDefined",{get:function(){return this._isReportDefined},enumerable:!0,configurable:!0}),a.prototype.init=function(t){var i=this;if(s.nullOrUndefined(t)&&(t={}),this.reportType=o.INIT,this.globalReport=s.nullOrUndefined(t.global)?{}:s.ObjectUtils.deepCopy(t.global),this.setReportState(r.START_REPORT),n._options.OptionsManager.getInstance().addEventListener(r.REPORT_CHANGED,(function(){return i.dispatchReportChange()})),n.sizes.SizesManager.getInstance().addEventListener(r.REPORT_CHANGED,(function(){return i.dispatchReportChange()})),n.condition.ConditionManager.getInstance().addEventListener(r.REPORT_CHANGED,(function(){return i.dispatchReportChange()})),null!=e._view.PivotView.stage.getToolbar()&&s.fmSetTimeout((function(){e._view.PivotView.stage.getToolbar().updateDataSourceType()}),1),this.globalReportVO=n.report.ReportValueObject.fromObject(this.globalReport),this.spreadGlobal(this.globalReportVO),this.applyEmptyState(),"string"==typeof t.report)this._load(t.report);else{var a=t.report||{};n._options.OptionsManager.setOptions(n._options.vo.OptionsValueObject.fromObject(null!=a.options?a.options:a)),s.fmSetTimeout((function(){i.reportType==o.INIT&&i._setReport(t.report||{})}),1)}},a.prototype.setReportState=function(e){this.reportState=e,e!=r.START_REPORT&&e!=r.OPENING_REPORT_FILE&&e!=r.LOADING_REPORT_FILE||(this._isReportDefined=this._isReportComplete=!1),e==r.REPORT_COMPLETE&&(this._isReportDefined=this._isReportComplete=!0),e==r.REPORT_DEFINED&&(this._isReportDefined=!0),this.dispatchWith(e)},a.prototype.setReport=function(e){s.nullOrUndefined(e)&&(e={}),this.reportType=o.SET_REPORT,this.cancel(),this.setReportState(r.START_REPORT),this._setReport(e.report||{})},a.prototype.runQuery=function(t){this.reportType=o.RUN_QUERY,t=t instanceof e.data_._structure.Slice?t:e.data_._structure.Slice.fromObject(n.report.SliceValueObject.fromObject(t),this.cube_.structure_);var i=e.data_._structure.Slice.areRowsDiffer(t,this.cube_.slice_,!1),s=e.data_._structure.Slice.areColumnsDiffer(t,this.cube_.slice_,!1);!e.data_._structure.Slice.areMeasuresDiffer(t,this.cube_.slice_)||i||s||n.sizes.SizesManager.applySizes(n.sizes.SizesManager.rowSizesNamed,n.sizes.SizesManager.columnSizesNamed,n.sizes.SizesManager.rowSizesByIdx,n.sizes.SizesManager.columnSizesByIdx,n.sizes.SizesManager.rowHeaderSizes,n.sizes.SizesManager.columnHeaderSizes,n.sizes.SizesManager.rowFilterSizes),i&&(n.sizes.SizesManager.rowSizes={}),s&&(n.sizes.SizesManager.columnSizes={}),t.mergeExpandsAndDrills(this.cube_.slice_),n.JavaScriptHandlers.getInstance().dispatch(new n.APIEvent(n.JavaScriptHandlers.REPORT_CHANGE)),this.setReportState(r.RUNNING_QUERY),this.cube_.setSlice(t),this.cube_.filter()},a.prototype.updateData=function(t,i){this.reportType=o.UPDATE_DATA,this.cancel(),this.setReportState(r.START_REPORT);var s=this.getReport();if(i.ignoreSorting&&(s.slice.columnSorting={},s.slice.rowSorting={}),i.ignoreScroll){var a=this.cube_.slice_;this.cube_.setSlice(e.data_._structure.Slice.fromObject(n.report.SliceValueObject.fromObject({}),this.cube_.structure_)),this.cube_.setSlice(a)}s.connectionInfo=e.data_.vo.ConnectionInfo.fromObject(t),this._setReport(s,!0)},a.prototype.updateDataPartial=function(t,i){var a=this;if(this.reportType=o.UPDATE_DATA_PARTIAL,this.cancel(),this.setReportState(r.START_REPORT),i.ignoreSorting&&(this.reportVO.slice.columnSorting={},this.reportVO.slice.rowSorting={}),i.ignoreScroll){var l=this.cube_.slice_;this.cube_.setSlice(e.data_._structure.Slice.fromObject(n.report.SliceValueObject.fromObject({}),this.cube_.structure_)),this.cube_.setSlice(l)}this.reportVO.connectionInfo.data=t,this.cube_.updateData(t),this.addDataListeners(),e.data_.dataprovider_.DataProviderFactory.getDataProvider().reset(!1),this.updateActive=!0,s.fmSetTimeout((function(){a.updateActive=!1}),500),this.cube_.filter()},a.prototype.connectTo=function(e){this.reportType=o.CONNECT_TO,this.cancel(),this.setReportState(r.START_REPORT),this._setReport(e)},a.prototype.load=function(e){this.reportType=o.LOAD,this.cancel(),this._load(e)},a.prototype._load=function(e){var t=this;this.setReportState(r.LOADING_REPORT_FILE),this.reportManager.addEventListener(n.report.ReportEvent.REPORT_FILE_LOADED,(function(e){return t.onReportFileLoaded(e)})),this.reportManager.addEventListener(n.report.ReportEvent.REPORT_FILE_FAILED,(function(){return t.onReportFileFailed()})),this.reportManager.load(e)},a.prototype.open=function(){var e=this;this.reportType=o.OPEN,this.setReportState(r.OPENING_REPORT_FILE),this.reportManager.addEventListener(n.report.ReportEvent.REPORT_FILE_LOADED,(function(t){return e.onReportFileLoaded(t)})),this.reportManager.addEventListener(n.report.ReportEvent.REPORT_FILE_FAILED,(function(){return e.onReportFileFailed()})),this.reportManager.addEventListener(n.report.ReportEvent.REPORT_FILE_CANCELLED,(function(){return e.onReportFileCancelled()})),this.reportManager.open()},a.prototype.onReportFileLoaded=function(t){e.preloader(!1),this.setReportState(r.REPORT_FILE_LOADED),this._setReport(t.report)},a.prototype.onReportFileFailed=function(){e.preloader(!1),this.setReportState(r.REPORT_FILE_ERROR),this.setReportState(r.REPORT_DEFINED),this.setReportState(r.REPORT_COMPLETE)},a.prototype.onReportFileCancelled=function(){this.setReportState(r.REPORT_FILE_CANCELLED),this.setReportState(r.REPORT_DEFINED),this.setReportState(r.REPORT_COMPLETE)},a.prototype.dispatchReportChange=function(){this.reportState!=r.REPORT_COMPLETE&&this.reportState!=r.QUERY_COMPLETE||n.JavaScriptHandlers.getInstance().dispatch(new n.APIEvent(n.JavaScriptHandlers.REPORT_CHANGE))},a.prototype._setReport=function(e,t){void 0===t&&(t=!1),this.reportVO=n.report.ReportValueObject.fromObject(e),this.reportVO.connectionInfo.isUpdateData=t,this.loadLocalization()},a.prototype.onReportComplete=function(){this.reportType=o.COMPLETE},a.prototype.getReport=function(e){return void 0===e&&(e={}),i.vo.StateValueObject.toReport(this.getCurrentState(e))},a.prototype.clear=function(){this.cancel(),this.reportType=o.CLEAR,this.applyEmptyState(),this.cube_.cancel(),this.setReportState(r.REPORT_COMPLETE)},a.prototype.cancel=function(){this.reportManager.cancel(),this.removeDataListeners(),this.updateActive=!1,e.preloader(!1)},a.prototype.loadLocalization=function(){var e=this;null!=this.globalReport.localization&&""!=this.globalReport.localization?(this.setReportState(r.LOADING_LOCALIZATION),n._labels.LabelsManager.getInstance().load(this.globalReport.localization,(function(t){return e.onGlobalLocalizationLoaded(t)}),!0),this.globalReport.localization=null):this.onGlobalLocalizationLoaded(!0)},a.prototype.onGlobalLocalizationLoaded=function(e){var t=this;null==this.reportVO.localization||""==this.reportVO.localization?(n._labels.LabelsManager.getInstance().reset(),this.onLocalizationLoaded(e)):(this.setReportState(r.LOADING_LOCALIZATION),n._labels.LabelsManager.getInstance().load(this.reportVO.localization,(function(e){return t.onLocalizationLoaded(e)})))},a.prototype.onLocalizationLoaded=function(e){this.setReportState(e?r.LOCALIZATION_LOADED:r.LOCALIZATION_ERROR),this.loadStructureAndData()},a.prototype.loadStructureAndData=function(){this.reportType!=o.CONNECT_TO&&this.reportType!=o.OPEN&&(this.applyEmptyState(),n._options.OptionsManager.setOptions(this.reportVO.options),n._options.OptionsManager.configuratorOpened=n._options.OptionsManager.configuratorActive);var t=this.reportType;this.setReportState(r.REPORT_DEFINED),t==this.reportType&&(t=this.reportVO.connectionInfo,!s.nullOrUndefined(this.connectionInfo_)&&!this.connectionInfo_.isEmpty&&this.connectionInfo_.isEqual(t)&&this.cube_.connectionInfo_&&this.cube_.structure_&&this.cube_.structure_.isComplete?(e.data_.dataprovider_.DataProviderFactory.getDataProvider(),this.addDataListeners(),this.cube_.rebaseConnection()):(t.isEmpty&&this._globalConnectionInfo&&!this._globalConnectionInfo.isEmpty&&(t=this._globalConnectionInfo),t.isEmpty?(this.connectionInfo_=t,this.cube_.cancel(),this.setReportState(r.REPORT_COMPLETE),e.preloader(!1)):(t.isInlineData||this.setReportState(r.LOADING_DATA),e.data_.dataprovider_.DataProviderFactory.getDataProvider(),this.addDataListeners(),this.cube_.connect(t))))},a.prototype.onConnectedToDataSource=function(e){this.reportType==o.CONNECT_TO&&(this.applyEmptyState(),this.cube_.slice_&&this.cube_.slice_.clear(),this.cube_.structure_&&this.cube_.structure_.clear()),this.setReportState(r.CONNECTED_TO_DATA_SOURCE),this.connectionInfo_=this.reportVO.connectionInfo},a.prototype.onStructureLoaded=function(t){t=e.data_._structure.Slice.fromObject(this.reportVO.slice,this.cube_.structure_),this.applyReport(),this.cube_.setSlice(t),this.setReportState(r.DATA_LOADED),this.cube_.filter()},a.prototype.onDataFileCancelled=function(){this.setReportState(r.DATA_FILE_CANCELLED),this.setReportState(r.REPORT_COMPLETE)},a.prototype.onStructureLoadingFailed=function(){n._options.OptionsManager.setOptions(this.reportVO.options),this.cube_.cancel(),e.preloader(!1),this.setReportState(r.DATA_ERROR),this.setReportState(r.REPORT_COMPLETE)},a.prototype.onBeforeQuery=function(){this.setReportState(r.RUNNING_QUERY)},a.prototype.onQueryComplete=function(){this.setReportState(r.QUERY_COMPLETE),this.reportState!=r.REPORT_COMPLETE&&this.setReportState(r.REPORT_COMPLETE)},a.prototype.onQueryError=function(){this.setReportState(r.QUERY_ERROR),this.reportState!=r.REPORT_COMPLETE&&this.setReportState(r.REPORT_COMPLETE)},a.prototype.addDataListeners=function(){var t=this;this.cube_.addEventListener(e.data_.DataEvent.STRUCTURE_CONNECTED,this.connectedToDataSourceHandler),this.cube_.addEventListener(e.data_.DataEvent.STRUCTURE_LOADED,this.structureLoadedHandler),this.cube_.addEventListener(e.data_.DataEvent.STRUCTURE_CANCELLED,this.dataFileCancelledHandler),this.cube_.addEventListener(e.data_.DataEvent.STRUCTURE_LOADING_FAILED,this.structureLoadingFailedHandler),this.cube_.addEventListener(e.data_.DataEvent.BEFORE_QUERY,this.beforeQueryHandler),this.cube_.addEventListener(e.data_.DataEvent.QUERY_COMPLETE,this.queryCompleteHandler),this.cube_.addEventListener(e.data_.DataEvent.QUERY_ERROR,this.queryErrorHandler),this.cube_.addEventListener(r.REPORT_CHANGED,(function(){return t.dispatchReportChange()}))},a.prototype.removeDataListeners=function(){this.cube_.removeEventListener(e.data_.DataEvent.STRUCTURE_CONNECTED,this.connectedToDataSourceHandler),this.cube_.removeEventListener(e.data_.DataEvent.STRUCTURE_LOADED,this.structureLoadedHandler),this.cube_.removeEventListener(e.data_.DataEvent.STRUCTURE_CANCELLED,this.dataFileCancelledHandler),this.cube_.removeEventListener(e.data_.DataEvent.STRUCTURE_LOADING_FAILED,this.structureLoadingFailedHandler),this.cube_.removeEventListener(e.data_.DataEvent.BEFORE_QUERY,this.beforeQueryHandler),this.cube_.removeEventListener(e.data_.DataEvent.QUERY_COMPLETE,this.queryCompleteHandler),this.cube_.removeEventListener(e.data_.DataEvent.QUERY_ERROR,this.queryErrorHandler)},a.prototype.save=function(e,t,n,i,r){return void 0===r&&(r=!1),this.reportManager.save(e,t,n,i,r,this.getReport(e instanceof Object?e:{}))},a.prototype.getCurrentState=function(t){var r=!!t.hasOwnProperty("withDefaults")&&1==t.withDefaults;t=!!t.hasOwnProperty("withGlobals")&&1==t.withGlobals;var o=new i.vo.StateValueObject;return o.withDefaults=r,o.withGlobals=t,o._connectionInfo=t&&this._connectionInfo.isEmpty&&!this._globalConnectionInfo.isEmpty?this._globalConnectionInfo:this._connectionInfo,o._structure=this.cube_.structure_,o._slice=this.cube_.slice_,o._options=n._options.OptionsManager.getOptions(r,t),o.formats=n.format.FormatManager.getAllFormats(),o.conditions=n.condition.ConditionManager.conditions,o.customFields=n.report.CustomFieldsManager.customFields,o.rowSizes=n.sizes.SizesManager.rowSizesNamed,o.columnSizes=n.sizes.SizesManager.columnSizesNamed,o.startTableRow=n.sizes.SizesManager.startTableRow,o.rowHeaderSizes=n.sizes.SizesManager.rowHeaderSizes,o.columnHeaderSizes=n.sizes.SizesManager.columnHeaderSizes,o.rowFilterSizes=n.sizes.SizesManager.rowFilterSizes,o.expandedRows=this.cube_.slice_?this.cube_.slice_.axes.getItem(e.data_.consts.AxisName.ROWS_AXIS).expandedTuplesBasedOnUniqueNames:[],o.expandedColumns=this.cube_.slice_?this.cube_.slice_.axes.getItem(e.data_.consts.AxisName.COLUMNS_AXIS).expandedTuplesBasedOnUniqueNames:[],o.drilledRows=this.cube_.slice_?this.cube_.slice_.axes.getItem(e.data_.consts.AxisName.ROWS_AXIS).drilledTuplesBasedOnUniqueNames:[],o.drilledColumns=this.cube_.slice_?this.cube_.slice_.axes.getItem(e.data_.consts.AxisName.COLUMNS_AXIS).drilledTuplesBasedOnUniqueNames:[],this.reportVO&&(o.localization=t&&null==this.reportVO.localization&&null!=this._globalLocalization?this._globalLocalization:this.reportVO.localization),o},a.prototype.spreadGlobal=function(e){this._globalConnectionInfo=e.connectionInfo,n._options.OptionsManager.setGlobalOptions(e.options),this._globalLocalization=e.localization},a.prototype.applyEmptyState=function(){e.data_.dataprovider_.DataProviderFactory.dispose(),n.sizes.SizesManager.clear(),n.condition.ConditionManager.removeAll(),n.format.FormatManager.clear(),n.report.CustomFieldsManager.customFields=[],n._options.OptionsManager.clear()},a.prototype.applyReport=function(){var e;for(n._options.OptionsManager.setOptions(this.reportVO.options),n.sizes.SizesManager.clear(),n.sizes.SizesManager.applySizes(this.reportVO.rowSizes,this.reportVO.columnSizes,this.reportVO.rowSizesByIdx,this.reportVO.columnSizesByIdx,this.reportVO.rowHeaderSizes,this.reportVO.columnHeaderSizes,this.reportVO.rowFilterSizes),n.condition.ConditionManager.removeAll(),e=0;e<this.reportVO.conditions.length;e++){var t=n.condition.vo.ConditionValueObject.fromObject(this.reportVO.conditions[e]);n.condition.ConditionManager.add(t)}for(n.format.FormatManager.clear(),e=0;e<this.reportVO.formats.length;e++)n.format.FormatManager.setFormat(this.reportVO.formats[e]);n.report.CustomFieldsManager.customFields=this.reportVO.customFields},a.prototype.dispose=function(){this.cancel(),n.condition.ConditionManager.dispose(),n._options.OptionsManager.dispose(),n.printing.PrintingManager.dispose(),n.integration.IntegrationDataManager.dispose(),n._labels.LabelsManager.dispose(),n.sizes.SizesManager.dispose(),n.format.FormatManager.dispose(),n.report.CustomFieldsManager.customFields=[],this._connectionInfo=this.reportManager=null,this.globalReport={},this.cube_=this.reportVO=this.globalReportVO=null},a}(t.EventDispatcher);i.StateManager=a}((n=e.model||(e.model={}))._state||(n._state={}))}(r||(r={})),function(e){var t=function(){function e(){}return e.CONTENT_TYPES_XML='<Types xmlns="http://schemas.openxmlformats.org/package/2006/content-types"><Default Extension="rels" ContentType="application/vnd.openxmlformats-package.relationships+xml"/><Default Extension="xml" ContentType="application/xml"/><Override PartName="/xl/workbook.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml"/><Override PartName="/xl/theme/theme1.xml" ContentType="application/vnd.openxmlformats-officedocument.theme+xml"/><Override PartName="/xl/styles.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml"/><Override PartName="/xl/sharedStrings.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml"/><Override PartName="/docProps/core.xml" ContentType="application/vnd.openxmlformats-package.core-properties+xml"/><Override PartName="/docProps/app.xml" ContentType="application/vnd.openxmlformats-officedocument.extended-properties+xml"/>{0}</Types>',e.CONTENT_TYPES_XML_SHEET='<Override PartName="{0}" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml"/>',e._RELS='<Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships"><Relationship Id="rId3" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties" Target="docProps/app.xml"/><Relationship Id="rId2" Type="http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties" Target="docProps/core.xml"/><Relationship Id="rId1" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument" Target="xl/workbook.xml"/></Relationships>',e.APP_XML='<Properties xmlns="http://schemas.openxmlformats.org/officeDocument/2006/extended-properties" xmlns:vt="http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes"><Application>Microsoft Excel</Application><DocSecurity>0</DocSecurity><ScaleCrop>false</ScaleCrop><HeadingPairs><vt:vector size="2" baseType="variant"><vt:variant><vt:lpstr>Worksheets</vt:lpstr></vt:variant><vt:variant><vt:i4>3</vt:i4></vt:variant></vt:vector></HeadingPairs><TitlesOfParts><vt:vector size="3" baseType="lpstr"><vt:lpstr>Sheet1</vt:lpstr><vt:lpstr>Sheet2</vt:lpstr><vt:lpstr>Sheet3</vt:lpstr></vt:vector></TitlesOfParts><Company>Amazon.com</Company><LinksUpToDate>false</LinksUpToDate><SharedDoc>false</SharedDoc><HyperlinksChanged>false</HyperlinksChanged><AppVersion>14.0300</AppVersion></Properties>',e.CORE_XML='<cp:coreProperties xmlns:cp="http://schemas.openxmlformats.org/package/2006/metadata/core-properties" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:dcterms="http://purl.org/dc/terms/" xmlns:dcmitype="http://purl.org/dc/dcmitype/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><dc:creator>EC2</dc:creator><cp:lastModifiedBy>EC2</cp:lastModifiedBy><dcterms:created xsi:type="dcterms:W3CDTF">2010-12-22T15:19:38Z</dcterms:created><dcterms:modified xsi:type="dcterms:W3CDTF">2010-12-22T15:20:08Z</dcterms:modified></cp:coreProperties>',e.WORKBOOK_XML='<workbook xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships"><fileVersion appName="xl" lastEdited="5" lowestEdited="5" rupBuild="9302"/><workbookPr defaultThemeVersion="124226"/><bookViews><workbookView xWindow="360" yWindow="210" windowWidth="16860" windowHeight="9150"/></bookViews><sheets>{0}</sheets><calcPr calcId="144525"/></workbook>',e.WORKBOOK_XML_RELS='<Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships"><Relationship Id="rId1" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings" Target="sharedStrings.xml"/><Relationship Id="rId2" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles" Target="styles.xml"/><Relationship Id="rId3" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme" Target="theme/theme1.xml"/>{0}</Relationships>',e.WORKBOOK_XML_RELS_SHEET='<Relationship Id="{0}" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet" Target="{1}"/>',e.THEME='<a:theme name="Office Theme" xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main"><a:themeElements><a:clrScheme name="Office"><a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1><a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1><a:dk2><a:srgbClr val="1F497D"/></a:dk2><a:lt2><a:srgbClr val="EEECE1"/></a:lt2><a:accent1><a:srgbClr val="4F81BD"/></a:accent1><a:accent2><a:srgbClr val="C0504D"/></a:accent2><a:accent3><a:srgbClr val="9BBB59"/></a:accent3><a:accent4><a:srgbClr val="8064A2"/></a:accent4><a:accent5><a:srgbClr val="4BACC6"/></a:accent5><a:accent6><a:srgbClr val="F79646"/></a:accent6><a:hlink><a:srgbClr val="0000FF"/></a:hlink><a:folHlink><a:srgbClr val="800080"/></a:folHlink></a:clrScheme><a:fontScheme name="Office"><a:majorFont><a:latin typeface="Cambria"/><a:ea typeface=""/><a:cs typeface=""/><a:font script="Jpan" typeface="\uff2d\uff33 \uff30\u30b4\u30b7\u30c3\u30af"/><a:font script="Hang" typeface="\ub9d1\uc740 \uace0\ub515"/><a:font script="Hans" typeface="\u5b8b\u4f53"/><a:font script="Hant" typeface="\u65b0\u7d30\u660e\u9ad4"/><a:font script="Arab" typeface="Times New Roman"/><a:font script="Hebr" typeface="Times New Roman"/><a:font script="Thai" typeface="Tahoma"/><a:font script="Ethi" typeface="Nyala"/><a:font script="Beng" typeface="Vrinda"/><a:font script="Gujr" typeface="Shruti"/><a:font script="Khmr" typeface="MoolBoran"/><a:font script="Knda" typeface="Tunga"/><a:font script="Guru" typeface="Raavi"/><a:font script="Cans" typeface="Euphemia"/><a:font script="Cher" typeface="Plantagenet Cherokee"/><a:font script="Yiii" typeface="Microsoft Yi Baiti"/><a:font script="Tibt" typeface="Microsoft Himalaya"/><a:font script="Thaa" typeface="MV Boli"/><a:font script="Deva" typeface="Mangal"/><a:font script="Telu" typeface="Gautami"/><a:font script="Taml" typeface="Latha"/><a:font script="Syrc" typeface="Estrangelo Edessa"/><a:font script="Orya" typeface="Kalinga"/><a:font script="Mlym" typeface="Kartika"/><a:font script="Laoo" typeface ="DokChampa"/><a:font script="Sinh" typeface="Iskoola Pota"/><a:font script="Mong" typeface="Mongolian Baiti"/><a:font script="Viet" typeface="Times New Roman"/><a:font script="Uigh" typeface="Microsoft Uighur"/></a:majorFont><a:minorFont><a:latin typeface="Calibri"/><a:ea typeface=""/><a:cs typeface=""/><a:font script="Jpan" typeface="\uff2d\uff33 \uff30\u30b4\u30b7\u30c3\u30af"/><a:font script="Hang" typeface="\ub9d1\uc740 \uace0\ub515"/><a:font script="Hans" typeface="\u5b8b\u4f53"/><a:font script="Hant" typeface="\u65b0\u7d30\u660e\u9ad4"/><a:font script="Arab" typeface="Arial"/><a:font script="Hebr" typeface="Arial"/><a:font script="Thai" typeface="Tahoma"/><a:font script="Ethi" typeface="Nyala"/><a:font script="Beng" typeface="Vrinda"/><a:font script="Gujr" typeface="Shruti"/><a:font script="Khmr" typeface="DaunPenh"/><a:font script="Knda" typeface="Tunga"/><a:font script="Guru" typeface="Raavi"/><a:font script="Cans" typeface="Euphemia"/><a:font script="Cher" typeface="Plantagenet Cherokee"/><a:font script="Yiii" typeface="Microsoft Yi Baiti"/><a:font script="Tibt" typeface="Microsoft Himalaya"/><a:font script="Thaa" typeface="MV Boli"/><a:font script="Deva" typeface="Mangal"/><a:font script="Telu" typeface="Gautami"/><a:font script="Taml" typeface="Latha"/><a:font script="Syrc" typeface="Estrangelo Edessa"/><a:font script="Orya" typeface="Kalinga"/><a:font script="Mlym" typeface="Kartika"/><a:font script="Laoo" typeface ="DokChampa"/><a:font script="Sinh" typeface="Iskoola Pota"/><a:font script="Mong" typeface="Mongolian Baiti"/><a:font script="Viet" typeface="Arial"/><a:font script="Uigh" typeface="Microsoft Uighur"/></a:minorFont></a:fontScheme><a:fmtScheme name="Office"><a:fillStyleLst><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:gradFill rotWithShape="1"><a:gsLst><a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs><a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs><a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs></a:gsLst><a:lin ang="16200000" scaled="1"/></a:gradFill><a:gradFill rotWithShape="1"><a:gsLst><a:gs pos="0"><a:schemeClr val="phClr"><a:shade val="51000"/><a:satMod val="130000"/></a:schemeClr></a:gs><a:gs pos="80000"><a:schemeClr val="phClr"><a:shade val="93000"/><a:satMod val="130000"/></a:schemeClr></a:gs><a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="94000"/><a:satMod val="135000"/></a:schemeClr></a:gs></a:gsLst><a:lin ang="16200000" scaled="0"/></a:gradFill></a:fillStyleLst><a:lnStyleLst><a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln><a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln><a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln></a:lnStyleLst><a:effectStyleLst><a:effectStyle><a:effectLst><a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw></a:effectLst></a:effectStyle><a:effectStyle><a:effectLst><a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw></a:effectLst></a:effectStyle><a:effectStyle><a:effectLst><a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw></a:effectLst><a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d><a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d></a:effectStyle></a:effectStyleLst><a:bgFillStyleLst><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:gradFill rotWithShape="1"><a:gsLst><a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs><a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs><a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs></a:gsLst><a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path></a:gradFill><a:gradFill rotWithShape="1"><a:gsLst><a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs><a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs></a:gsLst><a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path></a:gradFill></a:bgFillStyleLst></a:fmtScheme></a:themeElements><a:objectDefaults><a:spDef><a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style></a:spDef><a:lnDef><a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style></a:lnDef></a:objectDefaults><a:extraClrSchemeLst/></a:theme>',e.STYLES_XML='<styleSheet xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" mc:Ignorable="x14ac" xmlns:x14ac="http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac">{0}<fonts count="{1}" x14ac:knownFonts="1"><font><sz val="11"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font>{2}</fonts><fills count="{3}">{4}</fills><borders count="2"><border><left/><right/><top/><bottom/><diagonal/></border><border><left style="thin"><color theme="0" tint="-0.14996795556505021"/></left><right style="thin"><color theme="0" tint="-0.14996795556505021"/></right><top style="thin"><color theme="0" tint="-0.14996795556505021"/></top><bottom style="thin"><color theme="0" tint="-0.14996795556505021"/></bottom><diagonal/></border></borders><cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs><cellXfs count="{5}"><xf numFmtId="0" fontId="0" fillId="0" borderId="0" xfId="0"/>{6}</cellXfs><cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles><dxfs count="0"/><tableStyles count="0" defaultTableStyle="TableStyleMedium2" defaultPivotStyle="PivotStyleLight16"/><extLst><ext uri="{EB79DEF2-80B8-43e5-95BD-54CBDDF9020C}" xmlns:x14="http://schemas.microsoft.com/office/spreadsheetml/2009/9/main"><x14:slicerStyles defaultSlicerStyle="SlicerStyleLight1"/></ext></extLst></styleSheet>',e.SHARED_STRING_XML='<sst xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" count="5" uniqueCount="5">{0}</sst>',e.SHEET_XML='<worksheet xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" mc:Ignorable="x14ac" xmlns:x14ac="http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac"><dimension ref="{0}"/><sheetViews><sheetView tabSelected="1" workbookViewId="0"><selection activeCell="A1" sqref="A1"/></sheetView></sheetViews><sheetFormatPr defaultRowHeight="15" defaultColWidth="15" x14ac:dyDescent="0.25"/><cols>{1}</cols><sheetData>{2}</sheetData>{3}<pageMargins left="0.7" right="0.7" top="0.75" bottom="0.75" header="0.3" footer="0.3"/></worksheet>',e.XML_HEADER='<?xml version="1.0" encoding="UTF-8" standalone="yes"?>',e}();e.XLSTemplates=t}(p||(p={})),function(n){var i,r;i=n.data_||(n.data_={}),r=function(t){function r(){var e=t.call(this)||this;if(e.queryType=i.consts.QueryType.SELECT,null!=r.instance)throw Error("Singleton");return e}return h(r,t),r.getInstance=function(){return null==r.instance&&(r.instance=new r),r.instance},r.prototype.setSlice=function(e){e.isEmpty&&n.model._options.OptionsManager.showDefaultSlice&&e.makeDefault(),e&&!e.isEqual(this.slice_)&&this.dispatchWith("slice_changed"),this.slice_=e},r.prototype.rebaseConnection=function(){this.structure_&&(this.structure_.isComplete=!1,this.removeAllCalculatedMeasures());for(var e=this.structure_.allHierarchies(!1),t=0;t<e.length;t++){var i=e.getItemAt(t);i.clearFilter(),i.clearSort(n.model._options.OptionsManager.flatView)}this.slice_&&this.slice_.clear(),this.dispatchStructureLoaded()},r.prototype.connect=function(e){var t=this;s.nullOrUndefined(this.__structureLoader)||this.__structureLoader.cancel(),this.__structureLoader=i.StructureLoaderFactory.getStructureLoader(e),this.__structureLoader.load(e,(function(){return t.dispatchStructureLoaded()}),(function(){t.dispatchWith(i.DataEvent.STRUCTURE_LOADING_FAILED)}),(function(){t.cancel(!1),t.connectionInfo_=e,t.structureLoader=t.__structureLoader,t.localDataStorage=new i.LocalDataStorage(t),t.__structureLoader=null,t.localDataStorage.datePattern=n.model._options.OptionsManager.datePattern,t.localDataStorage.dateTimePattern=n.model._options.OptionsManager.dateTimePattern,null!=t.structure_&&t.structure_.clear(),t.structure_=new i._structure.GenericStructure,t.structure_.localDataStorage=t.localDataStorage,t.dispatchWith(i.DataEvent.STRUCTURE_CONNECTED)}),(function(){t.dispatchWith(i.DataEvent.STRUCTURE_CANCELLED)}))},r.prototype.dispatchStructureLoaded=function(){this.structure_.isComplete=!0,this.dispatchWith(i.DataEvent.STRUCTURE_LOADED)},r.prototype.cancel=function(e){void 0===e&&(e=!0),s.ThreadManager.isRunning()&&s.ThreadManager.cancel(),this.structureLoader&&(this.structureLoader.cancel(),this.structureLoader=null),e&&this.structure_&&(this.structure_.clear(),this.structure_=null),e&&this.slice_&&(this.slice_.clear(),this.slice_=null),e&&this.localDataStorage&&(this.localDataStorage.clearAll(),this.localDataStorage=null)},r.prototype.dispatchQueryComplete=function(){var e=new i.QueryCompleteEvent(this.queryType);this.dispatch(e)},r.prototype.dispatchQueryError=function(){this.dispatchWith(i.DataEvent.QUERY_ERROR)},r.prototype.filter=function(){this.queryType=i.consts.QueryType.FILTER,this.select()},r.prototype.clearSortValues=function(e){e.sortMeasure=null,e.sortTuple=null,e.sortType=i.consts.SortType.UNSORTED,e.totalSortType=i.consts.SortType.UNSORTED,e.totalSortMeasure=null},r.prototype.sort=function(){this.dispatchQueryComplete()},r.prototype.expand=function(e,t,n,r){void 0===n&&(n=null),void 0===r&&(r=!0),this._tuple=e,this._axisName=t,this._measure=n,this.queryType=i.consts.QueryType.EXPAND;var o=new i.BeforeQueryEvent(i.consts.QueryType.EXPAND);this.dispatch(o),this.localDataStorage.expand(e,t,n),r&&this.dispatchQueryComplete()},r.prototype.collapse=function(e,t,n,r){void 0===n&&(n=null),void 0===r&&(r=!0),this.localDataStorage.collapse(e,t,n),this.query=new i.Query,this.queryType=this.query.type=i.consts.QueryType.COLLAPSE,r&&this.dispatchQueryComplete()},r.prototype.drillDown=function(e,t,n,r){void 0===r&&(r=null),this._tuple=e,this._axisName=n,this._measure=r,this._member=t,this._levelName=void 0,t.hierarchy_.drillDownMember(t),this.queryType=i.consts.QueryType.DRILL_DOWN;var o=new i.BeforeQueryEvent(i.consts.QueryType.DRILL_DOWN);this.dispatch(o),this.localDataStorage.drillDown(e,t,n,r),this.dispatchQueryComplete()},r.prototype.drillUp=function(e,t,n,r){void 0===r&&(r=null),t.hierarchy_.drillUpMember(t),this.localDataStorage.drillUp(e,t,n,r),this.query=new i.Query,this.queryType=this.query.type=i.consts.QueryType.DRILL_UP,e=new i.BeforeQueryEvent(i.consts.QueryType.DRILL_UP),this.dispatch(e),this.dispatchQueryComplete()},r.prototype.select=function(){var e=new i.BeforeQueryEvent(this.queryType==i.consts.QueryType.FILTER?this.queryType:i.consts.QueryType.SELECT);for(this.dispatch(e),e=0;e<this.slice_.pages.length;e++)this.slice_.pages.getItemAt(e).clearValuesFilter();this.structure_.measures_.length>this.localDataStorage.factKeys.length&&this.addCalculatedMeasuresToDataStorage(),this.localDataStorage.filter(),this.localDataStorage.select(),this.dispatchQueryComplete()},r.prototype.addCalculatedMeasuresToDataStorage=function(){for(var e=0;e<this.structure_.measures_.length;e++){var t=this.structure_.measures_.getItemAt(e);if(t.calculated){for(var n=!0,i=0;i<this.localDataStorage.factKeys.length;i++)this.localDataStorage.factKeys[i].toString()==t.uniqueName&&(n=!1);n&&this.localDataStorage.addFactKey(t.uniqueName,t.params,t.individual)}}this.slice_.axisWithMeasures.sortToSet&&(t=this.structure_.findMeasure((e=this.slice_.axisWithMeasures.sortToSet).measure))&&this.slice_.axisWithMeasures.setSort(t,e.tuple,e.type)},r.prototype.addCalculatedMeasure=function(e){if(null==this.structure_.findMeasure(e.uniqueName)){if(e.calculated){var t=new s.Lexer;e.params=t.parse(e.formula)}e.calculated&&null==e.params||(this.structure_.measuresHierarchy&&this.structure_.addMeasure(e),e.calculated?this.localDataStorage.addFactKey(e.uniqueName,e.params,e.individual):this.localDataStorage.addFactKey(e.uniqueName),this.structure_.isComplete&&this.refresh())}else t=new s.Lexer,e.params=t.parse(e.formula),e.calculated&&null==e.params||(this.localDataStorage.updateFactKey(e.uniqueName,e.params,e.individual),(t=this.structure_.findMeasure(e.uniqueName)).caption=e.caption,t.formula=e.formula,t.individual=e.individual,t.params=e.params,this.structure_.isComplete&&this.refresh())},r.prototype.removeCalculatedMeasure=function(e,t){void 0===t&&(t=!0);var n=this.structure_.findMeasure(e);n&&n.calculated&&(this.structure_.removeMeasure(e),this.localDataStorage.removeFactKey(e),this.slice_.removeMeasure(e),t&&this.structure_.isComplete&&this.refresh())},r.prototype.removeAllCalculatedMeasures=function(){for(var e=0;e<this.structure_.measures_.length;){var t=this.structure_.measures_.getItemAt(e);t.calculated?this.removeCalculatedMeasure(t.uniqueName,!1):e++}this.structure_.isComplete&&this.refresh()},r.prototype.refresh=function(){this.structure_.isComplete?(this.connectionInfo_.dataSourceType==i.consts.DataSourceType.EMPTY&&s.nullOrUndefined(this.slice_)&&this.dispatchStructureLoaded(),this.filter()):this.connectionInfo_.dataSourceType==i.consts.DataSourceType.EMPTY&&this.dispatchStructureLoaded()},r.prototype.loadMemberChildren=function(e,t,n){var i=this;this.structureLoader.loadMemberChildren(e,t,n,(function(){return i.dispatchQueryError()}))},r.prototype.updateData=function(e){this.structureLoader.updateData(e),this.dispatchStructureLoaded()},r.prototype.dispose=function(){s.ThreadManager.dispose();try{this.structure_.clear()}catch(e){}this.slice_=this.structure_=null;try{this.localDataStorage.clearAll()}catch(t){}this.localDataStorage=null;try{this.structureLoader.cancel()}catch(n){}this.structureLoader=null;try{this.__structureLoader.cancel()}catch(i){}this.__structureLoader=null,r.instance=null},r.MEASURES_NAME="Measures",r}(t.EventDispatcher),i.Cube=r}(r||(r={})),function(t){var n=function(){function n(e,o){var a,l=this;this.isCreationComplete=!1,this.api=null,this.delayedApiCallsOnReportDefined=[],this.delayedApiCallsOnReportReady=[],null!=n.instance&&n.instance.dispose(),n.instance=this,this.api=o,s.nullOrUndefined(e)&&(e={}),(0!=s.isHTML5Supported()||0!=confirm("WebDataRocks Reporting Component is not completely supported by this version of browser. Please update your browser. Continue anyway?"))&&(e.container instanceof HTMLElement?a=e.container:s.nullOrUndefined(e.container)||(a="#"==e.container.substr(0,1)?e.container.substring(1):e.container,a=document.getElementById(a)),null==a?(a=0==s.nullOrEmpty(e.container)?"WebDataRocks Reporting Component:\nUnable to create the component. DOM element with id '"+e.container+"' is not found.":"WebDataRocks Reporting Component:\nUnable to create the component. DOM element is null.",console.error(a),alert(a)):(this.model_=t.model.PivotModel.getInstance(),this.model_.state_.addEventListener(t.model._state.StateEvent.OPENING_REPORT_FILE,(function(){return l.onOpeningReportFile()})),this.model_.state_.addEventListener(t.model._state.StateEvent.LOADING_REPORT_FILE,(function(){return l.onLoadingReportFile()})),this.model_.state_.addEventListener(t.model._state.StateEvent.REPORT_FILE_LOADED,(function(){return l.onReportFileLoaded()})),this.model_.state_.addEventListener(t.model._state.StateEvent.REPORT_FILE_ERROR,(function(){return l.onReportFileError()})),this.model_.state_.addEventListener(t.model._state.StateEvent.REPORT_FILE_CANCELLED,(function(){return l.onReportFileCancelled()})),this.model_.state_.addEventListener(t.model._state.StateEvent.REPORT_DEFINED,(function(){return l.onReportDefined()})),this.model_.state_.addEventListener(t.model._state.StateEvent.LOADING_DATA,(function(){return l.onLoadingData()})),this.model_.state_.addEventListener(t.model._state.StateEvent.DATA_LOADED,(function(){return l.onDataLoaded()})),this.model_.state_.addEventListener(t.model._state.StateEvent.DATA_ERROR,(function(){return l.onDataError()})),this.model_.state_.addEventListener(t.model._state.StateEvent.DATA_FILE_CANCELLED,(function(){return l.onDataFileCancelled()})),this.model_.state_.addEventListener(t.model._state.StateEvent.LOADING_LOCALIZATION,(function(){return l.onLoadingLocalization()})),this.model_.state_.addEventListener(t.model._state.StateEvent.LOCALIZATION_LOADED,(function(){return l.onLocalizationLoaded()})),this.model_.state_.addEventListener(t.model._state.StateEvent.LOCALIZATION_ERROR,(function(){return l.onLocalizationError()})),this.model_.state_.addEventListener(t.model._state.StateEvent.EMPTY_SLICE,(function(){return l.onEmptySlice()})),this.model_.state_.addEventListener(t.model._state.StateEvent.RUNNING_QUERY,(function(){return l.onRunningQuery()})),this.model_.state_.addEventListener(t.model._state.StateEvent.QUERY_COMPLETE,(function(){return l.onQueryComplete()})),this.model_.state_.addEventListener(t.model._state.StateEvent.QUERY_ERROR,(function(){return l.onQueryError()})),this.model_.state_.addEventListener(t.model._state.StateEvent.REPORT_COMPLETE,(function(){return l.onReportComplete()})),this.model_.addEventListener(r.EXPORT,(function(){return l.onExportStart()})),this.model_.addEventListener(r.EXPORT_COMPLETE,(function(){return l.onExportComplete()})),this.model_.addEventListener(r.PRINT,(function(){return l.onPrintStart()})),this.model_.addEventListener(r.PRINT_COMPLETE,(function(){return l.onPrintComplete()})),this.view_=new t._view.PivotView(i.UIElement.convert(a),e),this.view_.addEventListener(t._view.ViewEvent.BEFORE_GRID_DRAW,(function(e){return l.onBeforeGridDraw(e)})),this.view_.addEventListener(t._view.ViewEvent.RENDER_COMPLETE,(function(){return l.onRenderComplete()})),this.model_.init(e),this.isCreationComplete=!0))}return Object.defineProperty(n.prototype,"isReportComplete",{get:function(){return this.model_&&this.model_.state_&&this.model_.state_.isReportComplete},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isReportDefined",{get:function(){return this.model_&&this.model_.state_&&this.model_.state_.isReportDefined},enumerable:!0,configurable:!0}),n.prototype.runDelayedCalls=function(){var e=this;s.fmSetTimeout((function(){for(;0<e.delayedApiCallsOnReportReady.length;)e.delayedApiCallsOnReportReady.shift().call(e)}),1)},n.prototype.delayApiCall=function(e,t){void 0===t&&(t=1),0==t?this.delayedApiCallsOnReportDefined.push(e):this.delayedApiCallsOnReportReady.push(e)},n.prototype.onOpeningReportFile=function(){t.model.JavaScriptHandlers.getInstance().dispatch(new t.model.APIEvent(t.model.JavaScriptHandlers.OPENING_REPORT_FILE))},n.prototype.onLoadingReportFile=function(){t.model.JavaScriptHandlers.getInstance().dispatch(new t.model.APIEvent(t.model.JavaScriptHandlers.LOADING_REPORT_FILE))},n.prototype.onReportFileLoaded=function(){t.model.JavaScriptHandlers.getInstance().dispatch(new t.model.APIEvent(t.model.JavaScriptHandlers.REPORT_FILE_LOADED))},n.prototype.onReportFileError=function(){t.model.JavaScriptHandlers.getInstance().dispatch(new t.model.APIEvent(t.model.JavaScriptHandlers.REPORT_FILE_ERROR))},n.prototype.onReportFileCancelled=function(){t.model.JavaScriptHandlers.getInstance().dispatch(new t.model.APIEvent(t.model.JavaScriptHandlers.REPORT_FILE_CANCELLED))},n.prototype.onReportDefined=function(){for(this.model_.state_.reportType==t.model._state.ReportType.INIT&&s.fmSetTimeout((function(){t.model.JavaScriptHandlers.getInstance().dispatch(new t.model.APIEvent(t.model.JavaScriptHandlers.READY))}),1);0<this.delayedApiCallsOnReportDefined.length;)this.delayedApiCallsOnReportDefined.shift().call(this)},n.prototype.onLoadingLocalization=function(){t.model.JavaScriptHandlers.getInstance().dispatch(new t.model.APIEvent(t.model.JavaScriptHandlers.LOADING_LOCALIZATION))},n.prototype.onLocalizationLoaded=function(){t.model.JavaScriptHandlers.getInstance().dispatch(new t.model.APIEvent(t.model.JavaScriptHandlers.LOCALIZATION_LOADED))},n.prototype.onLocalizationError=function(){t.model.JavaScriptHandlers.getInstance().dispatch(new t.model.APIEvent(t.model.JavaScriptHandlers.LOCALIZATION_ERROR))},n.prototype.onLoadingData=function(){t.model.JavaScriptHandlers.getInstance().dispatch(new t.model.APIEvent(t.model.JavaScriptHandlers.LOADING_DATA))},n.prototype.onDataLoaded=function(){t.model.JavaScriptHandlers.getInstance().dispatch(new t.model.APIEvent(t.model.JavaScriptHandlers.DATA_LOADED))},n.prototype.onDataFileCancelled=function(){t.model.JavaScriptHandlers.getInstance().dispatch(new t.model.APIEvent(t.model.JavaScriptHandlers.DATA_FILE_CANCELLED))},n.prototype.onDataError=function(){t.model.JavaScriptHandlers.getInstance().dispatch(new t.model.APIEvent(t.model.JavaScriptHandlers.DATA_ERROR))},n.prototype.onEmptySlice=function(){},n.prototype.onRunningQuery=function(){t.model.JavaScriptHandlers.getInstance().dispatch(new t.model.APIEvent(t.model.JavaScriptHandlers.RUNNING_QUERY))},n.prototype.onQueryComplete=function(){t.model.JavaScriptHandlers.getInstance().dispatch(new t.model.APIEvent(t.model.JavaScriptHandlers.QUERY_COMPLETE)),t.model.JavaScriptHandlers.getInstance().dispatch(new t.model.APIEvent(t.model.JavaScriptHandlers.UPDATE))},n.prototype.onQueryError=function(){t.model.JavaScriptHandlers.getInstance().dispatch(new t.model.APIEvent(t.model.JavaScriptHandlers.QUERY_ERROR))},n.prototype.onReportComplete=function(){},n.prototype.onBeforeGridDraw=function(e){t.model.JavaScriptHandlers.getInstance().dispatch(new t.model.APIEvent(t.model.JavaScriptHandlers.BEFORE_GRID_DRAW,e.data))},n.prototype.onRenderComplete=function(){var e=this;this.isReportComplete&&this.model_.state_.reportType!=t.model._state.ReportType.COMPLETE&&s.fmSetTimeout((function(){e.runDelayedCalls(),e.model_.state_.reportType=t.model._state.ReportType.COMPLETE,t.model.JavaScriptHandlers.getInstance().dispatch(new t.model.APIEvent(t.model.JavaScriptHandlers.REPORT_COMPLETE))}),1)},n.prototype.onExportStart=function(){t.model.JavaScriptHandlers.getInstance().dispatch(new t.model.APIEvent(t.model.JavaScriptHandlers.EXPORT_START))},n.prototype.onExportComplete=function(){s.fmSetTimeout((function(){t.model.JavaScriptHandlers.getInstance().dispatch(new t.model.APIEvent(t.model.JavaScriptHandlers.EXPORT_COMPLETE))}),1)},n.prototype.onPrintStart=function(){t.model.JavaScriptHandlers.getInstance().dispatch(new t.model.APIEvent(t.model.JavaScriptHandlers.PRINT_START))},n.prototype.onPrintComplete=function(){s.fmSetTimeout((function(){t.model.JavaScriptHandlers.getInstance().dispatch(new t.model.APIEvent(t.model.JavaScriptHandlers.PRINT_COMPLETE))}),1)},n.prototype.getAllConditions=function(){return this.isReportComplete?this.model_.getAllConditions():null},n.prototype.getCondition=function(e){return this.isReportComplete?this.model_.getCondition(e):null},n.prototype.addCondition=function(e){var t=this;this.isReportComplete?null!=e&&this.model_.addCondition(e):this.delayApiCall((function(){return t.addCondition(e)}))},n.prototype.removeCondition=function(e){var t=this;this.isReportComplete?this.model_.removeCondition(e):this.delayApiCall((function(){return t.removeCondition(e)}))},n.prototype.removeAllConditions=function(){var e=this;this.isReportComplete?this.model_.removeAllConditions():this.delayApiCall((function(){return e.removeAllConditions()}))},n.prototype.open=function(){this.model_.open()},n.prototype.load=function(e){this.model_.load(e)},n.prototype.getReport=function(e){return this.model_.getReport(e).toObject()},n.prototype.setReport=function(n){if("string"==typeof n)try{n=JSON.parse(n)}catch(e){return void t.uialert(t.model._labels.Labels.MESSAGE_INVALID_REPORT_FORMAT,t.model._labels.Labels.ERROR,t.AlertType.ERROR)}this.model_.setReport({report:n})},n.prototype.getData=function(e,t,n){var i=this;this.isReportComplete?this.model_.getData(e,t,n):this.delayApiCall((function(){return i.getData(e,t,n)}))},n.prototype.save=function(e,n,i,r,o){var s=this;void 0===e&&(e={filename:"report.json"}),void 0===n&&(n=null),void 0===i&&(i=null),void 0===r&&(r=null),void 0===o&&(o=!1);var a=i;this.isReportComplete?(e instanceof Object&&e.hasOwnProperty("callbackHandler")&&(a=e.callbackHandler),null!=a&&"string"==typeof a&&(a=t.model.JavaScriptHandlers.getFunctionByName(a)),this.model_.save(e,n,null!=a?function(e){return a(e)}:null,r,o)):this.delayApiCall((function(){return s.save(e,n,i,r,o)}))},n.prototype.updateData=function(e,t){var n=this;null!=e&&(s.nullOrUndefined(t)?t={partial:!1}:"boolean"==typeof t&&(t={partial:t}),this.isReportDefined?this.model_.updateData(e,t):this.delayApiCall((function(){return n.updateData(e,t)}),0))},n.prototype.connectTo=function(e){var t=this;null!=e&&(this.isReportDefined?this.model_.connectTo(e):this.delayApiCall((function(){return t.connectTo(e)}),0))},n.prototype.addCalculatedMeasure=function(e){var n=this;this.isReportComplete?null!=e&&this.model_.addCalculatedMeasure(t.data_._structure.GenericMeasure.fromObject(e)):this.delayApiCall((function(){return n.addCalculatedMeasure(e)}))},n.prototype.removeCalculatedMeasure=function(e){var t=this;this.isReportComplete?this.model_.removeCalculatedMeasure(e):this.delayApiCall((function(){return t.removeCalculatedMeasure(e)}))},n.prototype.removeAllCalculatedMeasures=function(){var e=this;this.isReportComplete?this.model_.removeAllCalculatedMeasures():this.delayApiCall((function(){return e.removeAllCalculatedMeasures()}))},n.prototype.clear=function(){var e=this;this.isReportComplete?this.model_.clear():this.delayApiCall((function(){return e.clear()}))},n.prototype.dispose=function(){s.fmdocument.dispose(),s.fmwindow.dispose(),s.Timers.dispose(),this.model_.dispose(),this.view_.dispose(),this.model_=this.view_=null,n.instance=null,t.model.JavaScriptHandlers.dispose()},n.prototype.refresh=function(){var e=this;this.isReportComplete?this.view_.draw():this.delayApiCall((function(){return e.refresh()}))},n.prototype.expandAllData=function(e){var t=this;void 0===e&&(e=!0),this.isReportComplete?this.model_.expandAllData(e):this.delayApiCall((function(){return t.expandAllData(e)}))},n.prototype.expandData=function(e){var t=this;this.isReportComplete?this.model_.expandData(e):this.delayApiCall((function(){return t.expandData(e)}))},n.prototype.collapseAllData=function(){var e=this;this.isReportComplete?this.model_.collapseAllData():this.delayApiCall((function(){return e.collapseAllData()}))},n.prototype.collapseData=function(e){var t=this;this.isReportComplete?this.model_.collapseData(e):this.delayApiCall((function(){return t.collapseData(e)}))},n.prototype.print=function(e){var n=this;void 0===e&&(e=null),this.isReportComplete?this.model_.print(t.model.printing.PrintOptions.fromObject(e)):this.delayApiCall((function(){return n.print(e)}))},n.prototype.exportTo=function(e,n,i){var r=this;if(void 0===n&&(n=null),void 0===i&&(i=null),this.isReportComplete){if(null!=e){null!=i&&"string"==typeof i&&(i=t.model.JavaScriptHandlers.getFunctionByName(i));var o=null!=i?function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return i.apply(null,e)}:null;this.model_.exportTo(e,t.model._export.ExportOptions.fromObject(n),o)}}else this.delayApiCall((function(){return r.exportTo(e,n,i)}))},n.prototype.getFilter=function(e){return this.isReportComplete?this.model_.getFilter(e):null},n.prototype.getFilterProperties=function(e){return this.isReportComplete?this.model_.getFilterProperties(e):null},n.prototype.setFilter=function(e,t,n){var i=this;void 0===n&&(n=!1),this.isReportComplete?this.model_.setFilter(e,t,n):this.delayApiCall((function(){return i.setFilter(e,t,n)}))},n.prototype.clearFilter=function(e){var t=this;this.isReportComplete?this.model_.clearFilter(e):this.delayApiCall((function(){return t.clearFilter(e)}))},n.prototype.on=function(e,n){"string"==typeof n&&(n=t.model.JavaScriptHandlers.getFunctionByName(n)),t.model.JavaScriptHandlers.getInstance().addEventListener(e,n)},n.prototype.off=function(e,n){"string"==typeof n&&(n=t.model.JavaScriptHandlers.getFunctionByName(n)),null==n?t.model.JavaScriptHandlers.getInstance().removeAllEventListeners(e):t.model.JavaScriptHandlers.getInstance().removeEventListener(e,n)},n.prototype.getRows=function(){return this.isReportComplete?this.model_.getRows():null},n.prototype.getColumns=function(){return this.isReportComplete?this.model_.getColumns():null},n.prototype.getPages=function(){return this.isReportComplete?this.model_.getPages():null},n.prototype.getMeasures=function(){return this.isReportComplete?this.model_.getMeasures():null},n.prototype.getAllMeasures=function(){return this.isReportComplete?this.model_.getAllMeasures():null},n.prototype.sortValues=function(e,t,n,i){var r=this;this.isReportComplete?this.model_.sortValues(e,t,n,i):this.delayApiCall((function(){return r.sortValues(e,t,n,i)}))},n.prototype.setSort=function(e,t){var n=this;this.isReportComplete?this.model_.setSort(e,t):this.delayApiCall((function(){return n.setSort(e,t)}))},n.prototype.getSort=function(e){return this.isReportComplete?this.model_.getSort(e):null},n.prototype.setTopX=function(e,t,n){var i=this;this.isReportComplete?this.model_.setTopX(e,t,n):this.delayApiCall((function(){return i.setTopX(e,t,n)}))},n.prototype.setBottomX=function(e,t,n){var i=this;this.isReportComplete?this.model_.setBottomX(e,t,n):this.delayApiCall((function(){return i.setBottomX(e,t,n)}))},n.prototype.getOptions=function(){return this.isReportComplete?this.model_.getOptions():null},n.prototype.setOptions=function(e){var t=this;this.isReportComplete?this.model_.setOptions(e):this.delayApiCall((function(){return t.setOptions(e)}))},n.prototype.getMembers=function(e,n,i){var r=this;if(this.isReportComplete)return"string"==typeof i&&(i=t.model.JavaScriptHandlers.getFunctionByName(i)),this.model_.getMembers(e,n,i);this.delayApiCall((function(){return r.getMembers(e,n,i)}))},n.prototype.runQuery=function(e){var t=this;this.isReportComplete?null!=e&&this.model_.runQuery(e):this.delayApiCall((function(){return t.runQuery(e)}))},n.prototype.getAllHierarchies=function(){return this.isReportComplete?this.model_.getAllHierarchies():null},n.prototype.replaceHierarchyCaption=function(e){var t=this;this.isReportComplete?this.model_.replaceHierarchyCaption(e):this.delayApiCall((function(){return t.replaceHierarchyCaption(e)}))},n.prototype.getFormat=function(e){return this.isReportComplete?this.model_.getFormat(e):null},n.prototype.setFormat=function(e,t){var n=this;this.isReportComplete?null!=e&&this.model_.setFormat(e,t):this.delayApiCall((function(){return n.setFormat(e,t)}))},n.prototype.getCell=function(e,t){return this.isReportComplete?this.view_.getCell(e,t):null},n.prototype.getSelectedCell=function(){return this.isReportComplete?this.view_.getSelectedCell():null},n.prototype.setSelectedCell=function(e,t){var n=this;this.isReportComplete?this.view_.setSelectedCell(e,t):this.delayApiCall((function(){return n.setSelectedCell(e,t)}))},n.prototype.removeSelection=function(){var e=this;this.isReportComplete?this.view_.removeSelection():this.delayApiCall((function(){return e.removeSelection()}))},n.prototype.openFieldsList=function(){var e=this;this.isCreationComplete?this.view_.openFieldsList():this.delayApiCall((function(){return e.openFieldsList()}))},n.prototype.closeFieldsList=function(){var e=this;this.isCreationComplete?this.view_.closeFieldsList():this.delayApiCall((function(){return e.closeFieldsList()}))},n.prototype.customizeCell=function(e){t._view.grid.vo.GridCell.customizeCellFunction=e,this.isCreationComplete&&this.refresh()},n.BUILD_VERSION="Version 1.3.2",n.BUILD_DATE="97315539787203",n}();t.Pivot=n;var r=function(){function e(){}return e.PRINT="print",e.PRINT_COMPLETE="printcomplete",e.EXPORT="export",e.EXPORT_COMPLETE="exportcomplete",e}();t.PivotEvent=r}(r||(r={})),this.PivotApi=function(e){var t={version:r.Pivot.BUILD_VERSION},n=new r.Pivot(e,t);if(t.getAllConditions=function(){return n.getAllConditions()},t.getCondition=function(e){return n.getCondition(e)},t.addCondition=function(e){return n.addCondition(e)},t.removeCondition=function(e){return n.removeCondition(e)},t.removeAllConditions=function(){return n.removeAllConditions()},t.open=function(){return n.open()},t.load=function(e){return n.load(e)},t.getReport=function(e){return n.getReport(e)},t.setReport=function(e){return n.setReport(e)},t.getData=function(e,t,i){return n.getData(e,t,i)},t.save=function(e,t,i,r,o){return void 0===e&&(e={filename:"report.json"}),void 0===t&&(t=null),void 0===i&&(i=null),void 0===r&&(r=null),void 0===o&&(o=!1),n.save(e,t,i,r,o)},t.updateData=function(e,t){return n.updateData(e,t)},t.connectTo=function(e){return n.connectTo(e)},t.addCalculatedMeasure=function(e){return n.addCalculatedMeasure(e)},t.removeCalculatedMeasure=function(e){return n.removeCalculatedMeasure(e)},t.removeAllCalculatedMeasures=function(){return n.removeAllCalculatedMeasures()},t.clear=function(){return n.clear()},t.dispose=function(){n.dispose()},t.refresh=function(){return n.refresh()},t.expandAllData=function(e){return void 0===e&&(e=!0),n.expandAllData(e)},t.expandData=function(e){return n.expandData(e)},t.collapseAllData=function(){return n.collapseAllData()},t.collapseData=function(e){return n.collapseData(e)},t.print=function(e){return void 0===e&&(e=null),n.print(e)},t.exportTo=function(e,t,i){return void 0===t&&(t=null),void 0===i&&(i=null),n.exportTo(e,t,i)},t.getFilter=function(e){return n.getFilter(e)},t.getFilterProperties=function(e){return n.getFilterProperties(e)},t.setFilter=function(e,t,i){return void 0===i&&(i=!1),n.setFilter(e,t,i)},t.clearFilter=function(e){return n.clearFilter(e)},t.runQuery=function(e){return n.runQuery(e)},t.on=function(e,t){return n.on(e,t)},t.off=function(e,t){return n.off(e,t)},t.getRows=function(){return n.getRows()},t.getColumns=function(){return n.getColumns()},t.getReportFilters=function(){return n.getPages()},t.getMeasures=function(){return n.getMeasures()},t.getAllMeasures=function(){return n.getAllMeasures()},t.sortValues=function(e,t,i,r){return n.sortValues(e,t,i,r)},t.setSort=function(e,t){return n.setSort(e,t)},t.getSort=function(e){return n.getSort(e)},t.setTopX=function(e,t,i){return n.setTopX(e,t,i)},t.setBottomX=function(e,t,i){return n.setBottomX(e,t,i)},t.getOptions=function(){return n.getOptions()},t.setOptions=function(e){return n.setOptions(e)},t.getMembers=function(e,t,i){return n.getMembers(e,t,i)},t.getAllHierarchies=function(){return n.getAllHierarchies()},t.replaceHierarchyCaption=function(e){return n.replaceHierarchyCaption(e)},t.getFormat=function(e){return n.getFormat(e)},t.setFormat=function(e,t){return n.setFormat(e,t)},t.getCell=function(e,t){return n.getCell(e,t)},t.getSelectedCell=function(){return n.getSelectedCell()},t.setSelectedCell=function(e,t){return n.setSelectedCell(e,t)},t.removeSelection=function(){return n.removeSelection()},t.openFieldsList=function(){return n.openFieldsList()},t.closeFieldsList=function(){return n.closeFieldsList()},t.customizeCell=function(e){return n.customizeCell(e)},void 0!==window.WebDataRocksHighcharts)for(var i in t.highcharts={instance:t},window.WebDataRocksHighcharts)t.highcharts[i]=window.WebDataRocksHighcharts[i];if(void 0!==window.WebDataRocksFusioncharts)for(i in t.fusioncharts={instance:t},window.WebDataRocksFusioncharts)t.fusioncharts[i]=window.WebDataRocksFusioncharts[i];if(void 0!==window.WebDataRocksGooglecharts)for(i in t.googlecharts={instance:t},window.WebDataRocksGooglecharts)t.googlecharts[i]=window.WebDataRocksGooglecharts[i];if(void 0!==window.WebDataRocksAmcharts)for(i in t.amcharts={instance:t},window.WebDataRocksAmcharts)t.amcharts[i]=window.WebDataRocksAmcharts[i];return window.webdatarocks=t},this.PivotApi(e)}})?i.apply(t,[]):i)||(e.exports=r),o.WebDataRocks=s();var a=function(e,t,n,i,r){this.pivot=t,this.pivotContainer=e,this.width="number"==typeof i||0>i.indexOf("px")&&0>i.indexOf("%")?i+"px":i,this.Labels=r};a.prototype.getTabs=function(){var e=[],t=this.Labels;return e.push({title:t.connect,id:"wdr-tab-connect",icon:this.icons.connect,menu:[{title:t.connect_local_csv,id:"wdr-tab-connect-local-csv",handler:this.connectLocalCSVHandler,mobile:!1,icon:this.icons.connect_csv},{title:t.connect_local_json,id:"wdr-tab-connect-local-json",handler:this.connectLocalJSONHandler,mobile:!1,icon:this.icons.connect_json},{title:this.osUtils.isMobile?t.connect_remote_csv_mobile:t.connect_remote_csv,id:"wdr-tab-connect-remote-csv",handler:this.connectRemoteCSV,icon:this.icons.connect_csv},{title:this.osUtils.isMobile?t.connect_remote_json_mobile:t.connect_remote_json,id:"wdr-tab-connect-remote-json",handler:this.connectRemoteJSON,icon:this.icons.connect_json}]}),e.push({title:t.open,id:"wdr-tab-open",icon:this.icons.open,menu:[{title:t.local_report,id:"wdr-tab-open-local-report",handler:this.openLocalReport,mobile:!1,icon:this.icons.open_local},{title:this.osUtils.isMobile?t.remote_report_mobile:t.remote_report,id:"wdr-tab-open-remote-report",handler:this.openRemoteReport,icon:this.icons.open_remote}]}),e.push({title:t.save,id:"wdr-tab-save",handler:this.saveHandler,mobile:!1,icon:this.icons.save}),e.push({title:t.export,id:"wdr-tab-export",mobile:!1,icon:this.icons.export,menu:[{title:t.export_print,id:"wdr-tab-export-print",handler:this.printHandler,icon:this.icons.export_print},{title:t.export_html,id:"wdr-tab-export-html",handler:this.exportHandler,args:"html",icon:this.icons.export_html},{title:t.export_excel,id:"wdr-tab-export-excel",handler:this.exportHandler,args:"excel",icon:this.icons.export_excel},{title:t.export_pdf,id:"wdr-tab-export-pdf",handler:this.exportHandler,args:"pdf",icon:this.icons.export_pdf}]}),e.push({title:t.format,id:"wdr-tab-format",icon:this.icons.format,rightGroup:!0,menu:[{title:this.osUtils.isMobile?t.format_cells_mobile:t.format_cells,id:"wdr-tab-format-cells",handler:this.formatCellsHandler,icon:this.icons.format_number},{title:this.osUtils.isMobile?t.conditional_formatting_mobile:t.conditional_formatting,id:"wdr-tab-format-conditional",handler:this.conditionalFormattingHandler,icon:this.icons.format_conditional}]}),e.push({title:t.options,id:"wdr-tab-options",handler:this.optionsHandler,icon:this.icons.options,rightGroup:!0}),e.push({title:t.fields,id:"wdr-tab-fields",handler:this.fieldsHandler,icon:this.icons.fields,rightGroup:!0}),null!=document.addEventListener&&e.push({title:t.fullscreen,id:"wdr-tab-fullscreen",handler:this.fullscreenHandler,mobile:!1,icon:this.icons.fullscreen,rightGroup:!0}),e},a.prototype.create=function(){this.popupManager=new a.PopupManager(this),this.dataProvider=this.getTabs(),this.init()},a.prototype.applyToolbarLayoutClasses=function(){if(!this.osUtils.isMobile){var e=this,t=function(){if(e.toolbarWrapper){var t=e.toolbarWrapper.getBoundingClientRect().width;e.toolbarWrapper.classList.remove("wdr-layout-500"),e.toolbarWrapper.classList.remove("wdr-layout-360"),e.toolbarWrapper.classList.remove("wdr-layout-300"),500>t&&e.toolbarWrapper.classList.add("wdr-layout-500"),360>t&&e.toolbarWrapper.classList.add("wdr-layout-360"),300>t&&e.toolbarWrapper.classList.add("wdr-layout-300")}};t(),window.addEventListener("resize",t)}},a.prototype.init=function(){this.container=this.pivotContainer,this.container.style.position=""==this.container.style.position?"relative":this.container.style.position,this.toolbarWrapper=document.createElement("div"),this.toolbarWrapper.id="wdr-toolbar-wrapper",this.toolbarWrapper.style.width=this.width,this.osUtils.isMobile&&this.addClass(this.toolbarWrapper,"wdr-mobile"),this.addClass(this.toolbarWrapper,"wdr-toolbar-ui"),this.toolbarWrapper.style.width=this.width;var e=document.createElement("ul");e.id="wdr-toolbar";var t=document.createElement("div");t.classList.add("wdr-toolbar-group-right"),e.appendChild(t);for(var n=0;n<this.dataProvider.length;n++)if(!this.isDisabled(this.dataProvider[n]))if(this.osUtils.isMobile&&null!=this.dataProvider[n].menu&&1!=this.dataProvider[n].collapse)for(var i=0;i<this.dataProvider[n].menu.length;i++)this.isDisabled(this.dataProvider[n].menu[i])||e.appendChild(this.createTab(this.dataProvider[n].menu[i]));else i=this.dataProvider[n].divider?this.createDivider(this.dataProvider[n]):this.createTab(this.dataProvider[n]),t&&this.dataProvider[n].rightGroup?t.appendChild(i):e.appendChild(i);this.toolbarWrapper.appendChild(e),this.container.insertBefore(this.toolbarWrapper,this.container.firstChild),this.updateLabels(this.Labels),this.applyToolbarLayoutClasses()},a.prototype.updateLabels=function(e){e=this.Labels=e,this.setText(document.querySelector("#wdr-tab-connect > a > span"),e.connect),this.setText(document.querySelector("#wdr-tab-connect-local-csv > a > span"),e.connect_local_csv),this.setText(document.querySelector("#wdr-tab-connect-local-json > a > span"),e.connect_local_json),this.setText(document.querySelector("#wdr-tab-connect-remote-csv > a > span"),this.osUtils.isMobile?e.connect_remote_csv_mobile:e.connect_remote_csv),this.setText(document.querySelector("#wdr-tab-open > a > span"),e.open),this.setText(document.querySelector("#wdr-tab-open-local-report > a > span"),e.local_report),this.setText(document.querySelector("#wdr-tab-open-remote-report > a > span"),this.osUtils.isMobile?e.remote_report_mobile:e.remote_report),this.setText(document.querySelector("#wdr-tab-save > a > span"),e.save),this.setText(document.querySelector("#wdr-tab-format > a > span"),e.format),this.setText(document.querySelector("#wdr-tab-format-cells > a > span"),this.osUtils.isMobile?e.format_cells_mobile:e.format_cells),this.setText(document.querySelector("#wdr-tab-format-conditional > a > span"),this.osUtils.isMobile?e.conditional_formatting_mobile:e.conditional_formatting),this.setText(document.querySelector("#wdr-tab-options > a > span"),e.options),this.setText(document.querySelector("#wdr-tab-fullscreen > a > span"),e.fullscreen),this.setText(document.querySelector("#wdr-tab-export > a > span"),e.export),this.setText(document.querySelector("#wdr-tab-export-print > a > span"),e.export_print),this.setText(document.querySelector("#wdr-tab-export-html > a > span"),e.export_html),this.setText(document.querySelector("#wdr-tab-export-excel > a > span"),e.export_excel),this.setText(document.querySelector("#wdr-tab-export-pdf > a > span"),e.export_pdf),this.setText(document.querySelector("#wdr-tab-fields > a > span"),e.fields)},a.prototype.icons={connect:'<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="-305.5 396.5 36 36"><title>menu_connect</title><path fill="#555" d="M-274.5 425.409s-.988.277-1.422.761l-3.536-1.783c.189-.509.258-1.066.07-1.572l3.719-1.76a2.36 2.36 0 0 0 3.317.147 2.341 2.341 0 0 0 .157-3.3 2.335 2.335 0 0 0-4.055 1.582c-.009.122-.008.237.001.358l-3.896 1.884a2.281 2.281 0 0 0-1.359-.451 2.338 2.338 0 0 0-2.177 2.481 2.33 2.33 0 0 0 2.177 2.179c.491 0 .967-.156 1.359-.451l3.921 1.892a2.317 2.317 0 0 0 1.981 2.604 2.316 2.316 0 0 0 2.604-1.981c.171-1.269-1-2.432-2.262-2.603a8.794 8.794 0 0 0-.6-.026v.039zM-301.592 413.883c-.008.105-.908.222.092.326v6.836c0 2.587 5.827 5.455 13.177 5.455h1.081c-1.146-3 .303-6.854 3.299-8.155-1.448.172-2.868.069-4.334.069-7.056.009-12.775-2.093-13.315-4.531z"/><path fill="#555" d="M-288.5 416.217c7.377 0 13-2.097 13-4.683v-6.853c0-2.586-5.647-4.682-13-4.682-7.352 0-13 2.104-13 4.69v6.853c0 2.586 5.648 4.675 13 4.675zm.177-15.268c5.903 0 10.691 1.661 10.691 3.741s-4.796 3.741-10.691 3.741c-5.894 0-10.683-1.67-10.683-3.741 0-2.072 4.79-3.741 10.683-3.741z"/></svg>',connect_csv:'<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36"><path d="M11 24l6 0V27h-6V24z"/><path d="M12.8 22L12.8 22l1.2-2.5L15.1 22h1.9l-2-3.9L16.9 14h-1.8l-1 2.5L12.9 14h-1.8l1.9 3.9L11 22H12.8z"/><path d="M19 19h6v3h-6V19z"/><path d="M19 14h6v3L19 17V14z"/><path d="M19 24h6v3h-6V24z"/><path d="M23 4H7v28h22V11L23 4zM8 31V5h14v7h6v19H8L8 31z"/></svg>',connect_json:'<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36"><path d="M23 4H7v28h22V11L23 4zM8 31V5h14v7h6v19H8L8 31z"/><path d="M19 24c0 0.6-0.4 1-1 1 -0.6 0-1-0.4-1-1v-2c0-0.6 0.4-1 1-1 0.6 0 1 0.4 1 1V24zM21 18v-2c0-0.6-0.4 0-1 0 -0.6 0-1-0.4-1-1 0-0.6 0.4-1 1-1 1.7 0 3 0.3 3 2v2c0 1.1 0.9 2 2 2 0.6 0 1 0.4 1 1 0 0.6-0.4 1-1 1 -1.1 0-2 0.9-2 2v2c0 1.7-1.3 2-3 2 -0.6 0-1-0.4-1-1s0.4-1 1-1c0.6 0 1 0.6 1 0v-2c0-1.2 0.5-2.3 1.4-3C21.5 20.3 21 19.2 21 18zM11 20c1.1 0 2-0.9 2-2v-2c0-1.7 1.3-2 3-2 0.6 0 1 0.4 1 1 0 0.6-0.4 1-1 1 -0.6 0-1-0.6-1 0v2c0 1.2-0.5 2.3-1.4 3 0.8 0.7 1.4 1.8 1.4 3v2c0 0.6 0.4 0 1 0 0.6 0 1 0.4 1 1s-0.4 1-1 1c-1.7 0-3-0.3-3-2v-2c0-1.1-0.9-2-2-2 -0.6 0-1-0.4-1-1C10 20.4 10.4 20 11 20z"/><path d="M18 17c0.6 0 1 0.4 1 1s-0.4 1-1 1 -1-0.4-1-1S17.4 17 18 17z"/></svg>',open:'<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="-305.5 396.5 36 36"><title>menu_open</title><path fill="#555" d="M-279.351 408.5h8.976c.064 0 .126-.067.167-.025.021.052.021.055 0 .107l-2.053 20.701c-.01.117-.104.217-.219.217h-30.102c-.116 0-.21-.104-.221-.22l-1.989-16.009c-.022-.041-.022.124 0 .083.042-.054.115.146.178.146h21.198c.87 0 1.665-.726 2.053-1.499l1.812-3.446a.414.414 0 0 1 .2-.055zm-4.052 2.473c.084-.011.162-.052.194-.126l1.813-3.288c.408-.754 1.196-1.059 2.054-1.059h7.842v-2.637c0-1.102-.83-2.166-1.929-2.25-.053 0-.183-.113-.235-.113h-18.328c-.104 0-.188.006-.241-.09.01-1.1-.858-1.91-1.958-1.91h-6.902c-1.226 0-2.406.864-2.406 2.089v9.426l20.096-.042z"/></svg>',open_local:'<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36"><style>.a{fill:none;}</style><path d="M30.9 10.6C30.8 10.4 30.2 10 30 10h-1V8c0-0.4-0.6-1-1-1H15l-1-2H8C7.6 5 7 5.6 7 6v4H6c-0.2 0-0.8 0.4-0.9 0.6 -0.1 0.1-0.2 0.3-0.1 0.5l2.1 19.5C7.2 30.8 7.7 31 8 31h20c0.3 0 0.8-0.2 0.9-0.5l2.1-19.5C31 10.9 31 10.7 30.9 10.6zM28 30H8L6 11h24L28 30z"/><line x1="11" y1="23" x2="11" y2="23" class="a"/><line x1="25" y1="23" x2="25" y2="23" class="a"/><polygon points="11 15 11 23 17 23 17 25 14 25 14 26 22 26 22 25 19 25 19 23 25 23 25 15 "/></svg>',open_remote:'<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36"><path d="M30.9 10.6C30.8 10.4 30.2 10 30 10h-1V8c0-0.4-0.6-1-1-1H15l-1-2H8C7.6 5 7 5.6 7 6v4H6c-0.2 0-0.8 0.4-0.9 0.6 -0.1 0.1-0.2 0.3-0.1 0.5l2.1 19.5C7.2 30.8 7.7 31 8 31h20c0.3 0 0.8-0.2 0.9-0.5l2.1-19.5C31 10.9 31 10.7 30.9 10.6zM28 30H8L6 11h24L28 30z"/><path d="M24.8 18.1l-0.8 1.5c-0.2 0.2-0.5 0.2-0.8 0 -1.3-1.2-3.2-1.9-5.3-1.9 -2.1 0-4 0.7-5.3 1.9 -0.2 0.2-0.5 0.2-0.8 0l-0.8-1.5c-0.1-0.1-0.2-0.2-0.2-0.3 0-0.1 0.1-0.2 0.2-0.3 1.7-1.5 4.1-2.5 6.8-2.5 2.7 0 5.1 0.9 6.8 2.5 0.1 0 0.2 0.2 0.2 0.3C25 17.9 24.9 18 24.8 18.1zM18 19.6c1.5 0 2.8 0.5 3.8 1.4 0.2 0.2 0.2 0.5 0 0.7l-0.8 1.5c-0.2 0.2-0.5 0.2-0.8 0 -0.6-0.5-1.4-0.8-2.3-0.8 -0.9 0-1.7 0.3-2.3 0.8 -0.2 0.2-0.5 0.2-0.8 0l-0.8-1.5c-0.2-0.2-0.2-0.5 0-0.7C15.2 20.1 16.5 19.6 18 19.6zM18 23.4c0.8 0 1.4 0.6 1.4 1.3 0 0.7-0.6 1.3-1.4 1.3 -0.8 0-1.4-0.6-1.4-1.3C16.6 24 17.2 23.4 18 23.4z"/></svg>',save:'<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="-17.5 774.5 36 36"><title>menu_save</title><g fill="#555"><path d="M15.191 783.284l-5.457-5.467a1.101 1.101 0 0 0-.781-.317h-.835c-.2 0-.618.163-.618.363v8.889c0 .618-.245.748-.853.748H-5.638c-.617 0-.862-.14-.862-.748v-8.889c0-.2-.409-.363-.609-.363h-6.283c-.618 0-1.108.499-1.108 1.107v27.785c0 .617.5 1.107 1.108 1.107h27.784c.618 0 1.108-.499 1.108-1.107v-22.337c0-.29-.109-.562-.309-.771zM8.98 801.463c0 .618-.499 1.037-1.107 1.037H-6.873c-.617 0-.627-.357-.627-.966v-8.626c0-.617.019-1.408.627-1.408H7.882c.618 0 1.108.613 1.108 1.223l-.01 8.74z"/><path d="M-4.167 784.5h9.361c.2 0 .306.228.306.028v-6.665c0-.2-.106-.363-.306-.363h-9.361c-.2 0-.333.163-.333.363v6.665c0 .191.124-.028.333-.028zm5.667-4.294c0-.618.392-1.108 1-1.108.618 0 1 .5 1 1.108v1.97c0 .618-.392 1.108-1 1.108-.618 0-1-.5-1-1.108v-1.97zM4.168 796.5h-7.31c-.617 0-1.108.393-1.108 1s.5 1 1.108 1h7.31c.617 0 1.107-.393 1.107-1s-.498-1-1.107-1z"/></g></svg>',export:'<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="-17.5 774.5 36 36"><title>menu_export</title><g fill="#555"><path d="M15.446 795.615l-4.289-6.461c-.346-.515-.803-.654-1.428-.654H7.788c-.186 0-.346-.029-.363.156-.008.076.017.07.059.137l4.76 7.108c.042.06.034.337-.017.38-.025.025-.067.219-.102.219H6.699c-.194 0-.354-.063-.363.125-.305 3.23-3.174 5.495-6.407 5.192-2.81-.263-5.039-2.329-5.3-5.14-.009-.195-.168-.178-.363-.178h-5.401c-.076 0-.144-.281-.144-.357 0-.025.008-.157.017-.175l4.76-7.203c.102-.16.05-.245-.109-.347-.06-.035-.118.082-.187.082h-1.94c-.616 0-1.199.145-1.553.658l-4.664 6.547c-.203.304-.545.586-.545.95v9.216c1 .911 1.267 1.646 2.187 1.629h27.625c.903.009 1.188-.709 1.188-1.611v-9.233c1-.373.157-.735-.054-1.04z"/><path d="M-3.674 783.5H-2.5v10.2c1 1.4 1.764 2.464 3.165 2.371 1.274-.083 1.835-1.097 2.835-2.371v-10.2h1.207c.346 0 .641-.04.65-.387.008-.151-.042-.193-.144-.311l-4.186-5.11c-.228-.287-.642-.302-.929-.073-.042.034-.076.081-.101.115l-4.135 5.172c-.22.271-.187.447.084.668.11.085.244-.074.38-.074z"/></g></svg>',export_print:'<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="-17.5 774.5 36 36"><title>dd_save_print</title><path fill="#555" d="M-5.5 798.685v3.815h11v-7h-11v3.185zm2-1.185h7v1h-7v-1zm0 2h7v1h-7v-1zM5.5 786.308V782.5h-11v7h11z"/><path fill="#555" d="M8.94 786.5H7.5v4h-14v-4h-1.44c-1.493 0-2.56 1.064-2.56 2.558v6.87c0 1.493 1.067 2.572 2.56 2.572h1.44v-4h14v4h1.44c1.493 0 2.56-1.064 2.56-2.557v-6.878c0-1.501-1.074-2.565-2.56-2.565z"/></svg>',export_excel:'<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36"><path d="M24.4 15h-3.8L18 18.6 15.3 15h-3.8l4.5 5.2L11 27h7.3L18 25h-2l2-3L21.1 27H25l-5.1-6.8L24.4 15z"/><path d="M23 4H7v28h22V11L23 4zM8 31V5h14v7h6v19H8L8 31z"/></svg>',export_html:'<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36"><path d="M25.7 20.8l-2.3-2.5c-0.2-0.2-0.4-0.3-0.6-0.3 -0.2 0-0.4 0.1-0.6 0.3 -0.3 0.4-0.3 1 0 1.4l1.7 1.9 -1.7 1.9c-0.2 0.2-0.3 0.4-0.3 0.7 0 0.3 0.1 0.5 0.3 0.7 0.2 0.2 0.4 0.3 0.6 0.3 0.2 0 0.4-0.1 0.6-0.3l2.3-2.5C26.1 21.8 26.1 21.2 25.7 20.8z"/><path d="M14 24c0-0.3-0.1-0.5-0.3-0.7l-1.7-1.9 1.7-1.9c0.3-0.4 0.3-1 0-1.4 -0.2-0.2-0.4-0.3-0.6-0.3 -0.2 0-0.4 0.1-0.6 0.3l-2.3 2.5c-0.3 0.4-0.3 1 0 1.4l2.3 2.5c0.2 0.2 0.4 0.3 0.6 0.3 0.2 0 0.4-0.1 0.6-0.3C13.9 24.5 14 24.3 14 24z"/><path d="M20.4 15.1c-0.1 0-0.2-0.1-0.3-0.1 -0.4 0-0.8 0.3-0.9 0.6l-4.1 11.1c-0.1 0.2-0.1 0.5 0 0.7 0.1 0.2 0.3 0.4 0.5 0.5C15.7 28 15.8 28 16 28c0.4 0 0.8-0.3 0.9-0.6l4.1-11.1C21.1 15.8 20.9 15.2 20.4 15.1z"/><path d="M23 4H7v28h22V11L23 4zM8 31V5h14v7h6v19H8L8 31z"/></svg>',export_pdf:'<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36"><path d="M17.2 17.1L17.2 17.1C17.3 17.1 17.3 17.1 17.2 17.1c0.1-0.5 0.2-0.7 0.2-1V15.8c0.1-0.6 0.1-1 0-1.1 0 0 0 0 0-0.1l-0.1-0.1 0 0 0 0c0 0 0 0.1-0.1 0.1C16.9 15.2 16.9 16 17.2 17.1L17.2 17.1zM13.8 24.8c-0.2 0.1-0.4 0.2-0.6 0.3 -0.8 0.7-1.3 1.5-1.5 1.8l0 0 0 0 0 0C12.5 26.9 13.1 26.2 13.8 24.8 13.9 24.8 13.9 24.8 13.8 24.8 13.9 24.8 13.8 24.8 13.8 24.8zM24.1 23.1c-0.1-0.1-0.6-0.5-2.1-0.5 -0.1 0-0.1 0-0.2 0l0 0c0 0 0 0 0 0.1 0.8 0.3 1.6 0.6 2.1 0.6 0.1 0 0.1 0 0.2 0l0 0h0.1c0 0 0 0 0-0.1l0 0C24.2 23.3 24.1 23.3 24.1 23.1zM24.6 24c-0.2 0.1-0.6 0.2-1 0.2 -0.9 0-2.2-0.2-3.4-0.8 -1.9 0.2-3.4 0.5-4.5 0.9 -0.1 0-0.1 0-0.2 0.1 -1.3 2.4-2.5 3.5-3.4 3.5 -0.2 0-0.3 0-0.4-0.1l-0.6-0.3v-0.1c-0.1-0.2-0.1-0.3-0.1-0.6 0.1-0.6 0.8-1.6 2.1-2.4 0.2-0.1 0.6-0.3 1-0.6 0.3-0.6 0.7-1.2 1.1-2 0.6-1.1 0.9-2.3 1.2-3.3l0 0c-0.4-1.4-0.7-2.1-0.2-3.7 0.1-0.5 0.4-0.9 0.9-0.9h0.2c0.2 0 0.4 0.1 0.7 0.2 0.8 0.8 0.4 2.6 0 4.1 0 0.1 0 0.1 0 0.1 0.4 1.2 1.1 2.3 1.8 2.9 0.3 0.2 0.6 0.5 1 0.7 0.6 0 1-0.1 1.5-0.1 1.3 0 2.2 0.2 2.6 0.8 0.1 0.2 0.1 0.5 0.1 0.7C24.9 23.5 24.8 23.8 24.6 24zM17.3 19.6c-0.2 0.8-0.7 1.7-1.1 2.7 -0.2 0.5-0.4 0.8-0.7 1.2h0.1 0.1l0 0c1.5-0.6 2.8-0.9 3.7-1 -0.2-0.1-0.3-0.2-0.4-0.3C18.4 21.6 17.7 20.7 17.3 19.6z"/><path d="M23 4H7v28h22V11L23 4zM8 31V5h14v7h6v19H8L8 31z"/></svg>',format:'<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="-17.5 774.5 36 36"><title>menu_format</title><g fill="#555"><path d="M15.144 781.92a7.62 7.62 0 0 0-4.238-4.157 4.634 4.634 0 0 0-1.201-.254.99.99 0 0 0-.906.36l-10.797 10.829c-1.462 1.462-2.916 2.908-4.37 4.378a1.347 1.347 0 0 0-.326.596c-.481 2.197-.939 4.402-1.413 6.607a.639.639 0 0 0 .792.793l6.551-1.381c.253-.049.49-.171.67-.359 5.063-5.08 10.127-10.144 15.19-15.207.237-.229.384-.548.4-.882a8.491 8.491 0 0 0-.352-1.323zm-16.825 16.652l-2.54.531a2.367 2.367 0 0 0-1.911-1.87c.18-.906.384-1.813.571-2.729a2.05 2.05 0 0 1 1.078.229 6.007 6.007 0 0 1 2.671 2.605c.139.318.245.653.311.996 0 .157 0 .157-.18.238z"/><path d="M6.568 804.5H-11.5v-18h7.761l1.83-2.118 1.593-1.882h-12.455c-.947 0-1.729 1.241-1.729 2.18v21.097c0 .947.77 1.724 1.726 1.724H8.283c.947 0 2.217-.769 2.217-1.724v-12.488l-4 3.438v7.773h.068z"/></g></svg>',format_number:'<svg xmlns="http://www.w3.org/2000/svg" width="52" height="36" viewBox="0 0 52 36"><path d="M31 19.2v-3.4l2.5-0.4c0.2-0.7 0.5-1.4 0.9-2.1l-1.4-2 2.4-2.4 2 1.4c0.7-0.4 1.4-0.7 2.1-0.9l0.4-2.5h3.4l0.4 2.5c0.7 0.2 1.4 0.5 2.1 0.9l2-1.4 2.4 2.4 -1.4 2c0.4 0.7 0.7 1.4 0.9 2.1L52 15.8v3.4l-2.5 0.4c-0.2 0.7-0.5 1.4-0.9 2.1l1.4 2 -2.4 2.4 -2-1.5c-0.7 0.4-1.4 0.7-2.1 0.9l-0.4 2.5h-3.4l-0.4-2.5c-0.7-0.2-1.4-0.5-2.1-0.9l-2 1.5 -2.4-2.4 1.4-2c-0.4-0.7-0.7-1.4-0.9-2.1L31 19.2zM41.5 21c1.9 0 3.5-1.6 3.5-3.5 0-1.9-1.6-3.5-3.5-3.5 -1.9 0-3.5 1.6-3.5 3.5C38 19.4 39.6 21 41.5 21z"/><path d="M38 30H1V6h36V5H0v26h38V30L38 30z"/><path d="M9.4 21.1c-0.3 0.3-0.7 0.4-1.2 0.4 -0.5 0-0.9-0.2-1.2-0.5s-0.4-0.8-0.4-1.4H5c0 0.9 0.2 1.7 0.7 2.2 0.5 0.6 1.2 0.9 2 1v1.3h1.1v-1.4c0.8-0.1 1.5-0.4 1.9-0.9 0.5-0.5 0.7-1.1 0.7-1.9 0-0.4-0.1-0.8-0.2-1.1 -0.1-0.3-0.3-0.6-0.5-0.8 -0.2-0.2-0.5-0.4-0.8-0.6 -0.3-0.2-0.8-0.4-1.4-0.6 -0.6-0.2-1-0.4-1.2-0.7s-0.4-0.6-0.4-1c0-0.4 0.1-0.8 0.4-1 0.2-0.2 0.6-0.4 1-0.4 0.4 0 0.8 0.2 1 0.5 0.3 0.3 0.4 0.8 0.4 1.4h1.6c0-0.9-0.2-1.6-0.6-2.2 -0.4-0.6-1-0.9-1.8-1v-1.5H7.9v1.5C7.1 12.6 6.5 12.9 6 13.4s-0.7 1.1-0.7 1.9c0 1.1 0.5 2 1.6 2.6 0.3 0.2 0.8 0.4 1.3 0.6 0.6 0.2 1 0.4 1.2 0.7s0.4 0.6 0.4 1C9.8 20.5 9.7 20.8 9.4 21.1z"/><path d="M16.3 12.6h-0.2l-3.8 1.5v1.4l2.4-0.8v8.1h1.6V12.6z"/><path d="M19.9 23.8c0.2-0.5 0.4-1 0.4-1.5l0-1.2h-1.5v1.3c0 0.3-0.1 0.6-0.2 1 -0.1 0.3-0.3 0.7-0.5 1.1l0.9 0.5C19.3 24.7 19.6 24.3 19.9 23.8z"/><path d="M27 16.7c0-1.4-0.3-2.5-0.8-3.2s-1.3-1.1-2.4-1.1c-1.1 0-1.9 0.4-2.4 1.1 -0.5 0.7-0.8 1.8-0.8 3.3v1.8c0 1.4 0.3 2.5 0.8 3.2s1.3 1.1 2.4 1.1c1.1 0 1.9-0.4 2.4-1.1 0.5-0.7 0.8-1.8 0.8-3.3V16.7zM25.4 18.9c0 0.9-0.1 1.6-0.4 2 -0.2 0.4-0.6 0.6-1.2 0.6 -0.5 0-0.9-0.2-1.2-0.7 -0.3-0.5-0.4-1.2-0.4-2.1v-2.3c0-0.9 0.1-1.5 0.4-2 0.3-0.4 0.6-0.6 1.2-0.6 0.5 0 0.9 0.2 1.2 0.7 0.3 0.4 0.4 1.1 0.4 2.1V18.9z"/></svg>',format_conditional:'<svg xmlns="http://www.w3.org/2000/svg" width="52" height="36" viewBox="0 0 52 36"><polygon points="38 5 0 5 0 31 26 31 26 30 1 30 1 6 37 6 37 10 38 10 "/><path d="M9 13H8.6L5 14.4v1.4l2-0.8V23h2V13z"/><path d="M17 22h-4l2.4-2.9c0.6-0.7 1-1.3 1.3-1.8 0.3-0.5 0.4-1.1 0.4-1.5 0-0.8-0.3-1.5-0.8-2 -0.5-0.5-1.2-0.7-2.2-0.7 -0.6 0-1.2 0.1-1.7 0.4s-0.9 0.6-1.1 1C11.1 14.9 11 16 11 16h1.6c0 0 0.1-0.9 0.4-1.3s0.7-0.4 1.2-0.4c0.4 0 0.8 0.2 1 0.5 0.3 0.3 0.4 0.7 0.4 1.1 0 0.4-0.1 0.7-0.3 1.1 -0.2 0.4-0.6 0.8-1.1 1.3L11 21.9V23h6V22z"/><path d="M21 19h0.8c0.6 0 1-0.1 1.3 0.2 0.3 0.3 0.4 0.6 0.4 1.1 0 0.5-0.1 0.8-0.4 1.1 -0.3 0.3-0.6 0.4-1.1 0.4 -0.5 0-0.8-0.3-1.1-0.5C20.6 20.9 20.5 21 20.5 20h-1.5c0 1 0.3 1.6 0.8 2.1s1.3 0.8 2.1 0.8c0.9 0 1.6-0.2 2.2-0.7 0.6-0.5 0.8-1.2 0.8-2.1 0-0.5-0.1-1-0.4-1.4 -0.3-0.4-0.6-0.7-1.1-0.9 0.4-0.2 0.7-0.5 1-0.9 0.3-0.4 0.4-0.8 0.4-1.2 0-0.9-0.3-1.5-0.8-2 -0.5-0.5-1.2-0.7-2.1-0.7 -0.5 0-1 0.1-1.5 0.3 -0.4 0.2-0.8 0.7-1 1.1S19.1 15 19.1 16h1.5c0-1 0.1-0.9 0.4-1.1 0.3-0.3 0.6-0.5 1-0.5 0.5 0 0.8 0.1 1 0.3s0.3 0.6 0.3 1.1c0 0.5-0.1 0.7-0.4 1C22.7 17 22.3 17 21.9 17H21V19z"/><path d="M47.8 7C50.1 7 52 8.9 52 11.2c0 1-0.3 1.8-0.8 2.5l-1.7 1.7L43.6 9.5l1.7-1.7C46 7.3 46.8 7 47.8 7zM30.7 22.4L29 30l7.6-1.7 11.6-11.6 -5.9-5.9L30.7 22.4zM42 17.9l-5.1 5.1 -0.9-0.9 5.1-5L42 17.9z"/></svg>',options:'<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="-17.5 774.5 36 36"><title>menu_options</title><path fill="#555" d="M11.363 789.058l-.76-1.838a33.692 33.692 0 0 0 1.601-4.223l-2.327-2.328a31.444 31.444 0 0 0-4.142 1.691l-1.829-.76a32.88 32.88 0 0 0-1.83-4.101h-3.291a32.106 32.106 0 0 0-1.731 4.133l-1.83.76a33.556 33.556 0 0 0-4.206-1.609l-2.328 2.32a31.563 31.563 0 0 0 1.69 4.141l-.759 1.838a34.366 34.366 0 0 0-4.117 1.838v3.3a32.519 32.519 0 0 0 4.117 1.731l.759 1.829a33.633 33.633 0 0 0-1.608 4.223l2.327 2.328a32.986 32.986 0 0 0 4.133-1.699l1.83.76a31.481 31.481 0 0 0 1.862 4.108h3.291a32.194 32.194 0 0 0 1.732-4.133l1.837-.76a33.57 33.57 0 0 0 4.207 1.609l2.327-2.328a31.481 31.481 0 0 0-1.69-4.141l.76-1.838a32.532 32.532 0 0 0 4.108-1.829v-3.3a30.142 30.142 0 0 0-4.133-1.722zM.5 799.202a6.706 6.706 0 1 1 6.706-6.706A6.71 6.71 0 0 1 .5 799.202z"/></svg>',fields:'<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="-17.5 774.5 36 36"><title>menu_fields</title><g fill="#555"><path d="M11.351 787.279c1.112.367 2.027 1.221 2.55 2.221H13.5v-10.627c0-.744-.089-1.357-.825-1.373h-26.339c-.736.008-.836.612-.836 1.349v21.656c0 .735.093.995.836.995h10.836c-.008 0 .205-1.314.629-2.025-.073-.098-.123.025-.18.025H-12.5v-6h10.563l.83-1.699c.4-.76 1.606-1.258 1.606-1.667V785.5h10.843l.009 1.779zM-1.5 791.5h-11v-6h11v6z"/><path d="M15.805 801.444l-1.602-1.308c0-.237.082-.49.082-.817a2.483 2.483 0 0 0-.082-.817l1.602-1.389a.399.399 0 0 0 .082-.49l-1.528-2.86a.364.364 0 0 0-.278-.123.678.678 0 0 0-.18 0l-1.912.866a6.95 6.95 0 0 0-1.299-.817l-.311-1.989c-.017-.195-.188-.199-.384-.199H6.93c-.147 0-.384.037-.384.199l-.311 2.053c-.458.229-.899.468-1.299.786l-1.912-.834c-.041-.008-.09-.016-.131-.008a.356.356 0 0 0-.319.192l-1.528 2.817c-.082.164-.082.408.082.489l1.749 1.308c0 .237-.082.489-.082.816a2.48 2.48 0 0 0 .082.817l-1.602 1.356a.399.399 0 0 0-.082.49l1.528 2.86a.364.364 0 0 0 .278.123.678.678 0 0 0 .18 0l1.912-.817c.4.318.842.597 1.299.817l.311 2.116a.322.322 0 0 0 .221.4c.033.008.065.017.09.017h3.065c.147 0 .384-.164.384-.327l.311-2.215c.466-.212.907-.49 1.299-.817l1.831.817a.441.441 0 0 0 .54-.163l1.528-2.86c.056-.08-.018-.326-.165-.489zm-7.306.744a2.865 2.865 0 0 1-3.064-2.664c-.114-1.585 1.079-2.95 2.664-3.064a2.867 2.867 0 0 1 3.072 2.868 2.804 2.804 0 0 1-2.672 2.86z"/></g></svg>',fullscreen:'<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="-17.5 774.5 36 36"><title>menu_fullscreen_open</title><g fill="#555"><path d="M-7.5 779.976V777.5h-7v7h3v-2.752l3.758 4.067 1.74-1.846-4.342-4.003 2.844.01zM-7.742 799.096l-3.758 4.101V800.5h-3v7h7v-2h-2.618l-.049-.371 4.124-4.054-1.699-1.979zM8.746 785.913l3.754-4.092v2.679h3v-7h-7v2h2.602l.082.381-4.126 4.041 1.688 1.991zM13.5 800.5v2.598l-.382.074-4.058-4.003-1.882 1.575 4.006 3.756H8.5v3h7v-7h-2zM-4 786.5h9c1.104 0 2.5.908 2.5 2.011v7.996c0 1.103-1.396 1.993-2.5 1.993h-9c-1.104 0-2.5-.891-2.5-1.993v-8.005c0-1.103 1.396-2.002 2.5-2.002z"/></g></svg>'},a.prototype.connectLocalCSVHandler=function(){this.pivot.connectTo({dataSourceType:"csv",browseForFile:!0})},a.prototype.connectLocalJSONHandler=function(){this.pivot.connectTo({dataSourceType:"json",browseForFile:!0})},a.prototype.connectRemoteCSV=function(){this.showConnectToRemoteCSVDialog()},a.prototype.connectRemoteJSON=function(){this.showConnectToRemoteJSONDialog()},a.prototype.openLocalReport=function(){this.pivot.open()},a.prototype.openRemoteReport=function(){this.showOpenRemoteReportDialog()},a.prototype.saveHandler=function(){this.pivot.save("report.json","file")},a.prototype.formatCellsHandler=function(){this.showFormatCellsDialog()},a.prototype.conditionalFormattingHandler=function(){this.showConditionalFormattingDialog()},a.prototype.optionsHandler=function(){this.showOptionsDialog()},a.prototype.fieldsHandler=function(){this.pivot.openFieldsList()},a.prototype.printHandler=function(){this.pivot.print()},a.prototype.exportHandler=function(e){"pdf"==e?this.showExportPdfDialog():this.pivot.exportTo(e)},a.prototype.fullscreenHandler=function(){this.toggleFullscreen()},a.prototype.defaults={},a.prototype.showConnectToRemoteCSVDialog=function(){var e=this,t=this.Labels,n=this.popupManager.createPopup();n.content.classList.add("wdr-popup-w500"),n.setTitle(t.open_remote_csv),n.setToolbar([{id:"wdr-btn-open",label:t.open,handler:function(){0<i.value.length&&e.pivot.connectTo({filename:i.value,dataSourceType:"csv"})},isPositive:!0},{id:"wdr-btn-cancel",label:t.cancel}]),t=document.createElement("div");var i=document.createElement("input");i.id="wdr-inp-file-url",i.type="text",i.value="https://cdn.webdatarocks.com/data/data.csv",t.appendChild(i),n.setContent(t),this.popupManager.addPopup(n.content)},a.prototype.showConnectToRemoteJSONDialog=function(){var e=this,t=this.Labels,n=this.popupManager.createPopup();n.content.classList.add("wdr-popup-w500"),n.setTitle(t.open_remote_json),n.setToolbar([{id:"wdr-btn-open",label:t.open,handler:function(){0<i.value.length&&e.pivot.connectTo({filename:i.value,dataSourceType:"json"})},isPositive:!0},{id:"wdr-btn-cancel",label:t.cancel}]),t=document.createElement("div");var i=document.createElement("input");i.id="wdr-inp-file-url",i.type="text",i.value="https://cdn.webdatarocks.com/data/data.json",t.appendChild(i),n.setContent(t),this.popupManager.addPopup(n.content)},a.prototype.showOpenRemoteReportDialog=function(){var e=this,t=this.Labels,n=this.popupManager.createPopup();n.content.classList.add("wdr-popup-w500"),n.setTitle(t.open_remote_report),n.setToolbar([{id:"wdr-btn-open",label:t.open,handler:function(){0<i.value.length&&e.pivot.load(i.value)},isPositive:!0},{id:"wdr-btn-cancel",label:t.cancel}]),t=document.createElement("div");var i=document.createElement("input");i.type="text";var r=e.pivot.getOptions()||{};i.value=r.grid&&"flat"==r.grid.type?"https://cdn.webdatarocks.com/reports/report-flat.json":"https://cdn.webdatarocks.com/reports/report.json",t.appendChild(i),n.setContent(t),this.popupManager.addPopup(n.content)},a.prototype.showFormatCellsDialog=function(){var e=this,t=this.Labels,n=function(){l.disabled=u.disabled=c.disabled=h.disabled=A.disabled=p.disabled=f.disabled=m.disabled="empty"==a.value;var t=e.pivot.getFormat(a.value);l.value="left"==t.textAlign||"right"==t.textAlign?t.textAlign:"right",u.value=t.thousandsSeparator,c.value=t.decimalSeparator,h.value=t.decimalPlaces,A.value=t.currencySymbol,p.value=t.currencySymbolAlign,f.value=t.nullValue,m.value=1==t.isPercent},i=this.popupManager.createPopup();i.content.id="wdr-popup-format-cells",i.setTitle(this.osUtils.isMobile?t.format:t.format_cells),i.setToolbar([{id:"wdr-btn-apply",label:t.apply,handler:function(){var t={};""==a.value&&(t.name=""),t.textAlign=l.value,t.thousandsSeparator=u.value,t.decimalSeparator=c.value,t.decimalPlaces=h.value,t.currencySymbol=A.value,t.currencySymbolAlign=p.value,t.nullValue=f.value,t.isPercent="true"==m.value,e.pivot.setFormat(t,""==a.value?null:a.value),e.pivot.refresh()},isPositive:!0},{id:"wdr-btn-cancel",label:t.cancel}],!0);var r=document.createElement("div"),o=document.createElement("div");o.classList.add("wdr-inp-group"),r.appendChild(o);var s=document.createElement("div");s.classList.add("wdr-inp-row"),s.classList.add("wdr-ir-horizontal"),o.appendChild(s),(d=document.createElement("label")).classList.add("wdr-uc"),e.setText(d,t.choose_value),s.appendChild(d);var a=(g=e.createSelect()).select;a.onchange=n,a.options[0]=new Option(t.choose_value,"empty"),a.options[0].disabled=!0,a.options[1]=new Option(t.all_values,""),s.appendChild(g),(s=document.createElement("div")).classList.add("wdr-inp-row"),s.classList.add("wdr-ir-horizontal"),o.appendChild(s),(o=document.createElement("div")).classList.add("wdr-inp-group"),r.appendChild(o),(s=document.createElement("div")).classList.add("wdr-inp-row"),s.classList.add("wdr-ir-horizontal"),o.appendChild(s),d=document.createElement("label"),e.setText(d,t.text_align),s.appendChild(d);var l=(g=e.createSelect()).select;l.options[0]=new Option(t.align_left,"left"),l.options[1]=new Option(t.align_right,"right"),s.appendChild(g),(s=document.createElement("div")).classList.add("wdr-inp-row"),s.classList.add("wdr-ir-horizontal"),o.appendChild(s),d=document.createElement("label"),e.setText(d,t.thousand_separator),s.appendChild(d);var u=(g=e.createSelect()).select;u.options[0]=new Option(t.none,""),u.options[1]=new Option(t.space," "),u.options[2]=new Option(",",","),u.options[3]=new Option(".","."),s.appendChild(g),(s=document.createElement("div")).classList.add("wdr-inp-row"),s.classList.add("wdr-ir-horizontal"),o.appendChild(s),d=document.createElement("label"),e.setText(d,t.decimal_separator),s.appendChild(d);var c=(g=e.createSelect()).select;c.options[0]=new Option(".","."),c.options[1]=new Option(",",","),s.appendChild(g),(s=document.createElement("div")).classList.add("wdr-inp-row"),s.classList.add("wdr-ir-horizontal"),o.appendChild(s),d=document.createElement("label"),e.setText(d,t.decimal_places),s.appendChild(d);for(var h=(g=e.createSelect()).select,d=0;11>d;d++)h.options[d]=new Option(0===d?t.none:d-1,d-1);s.appendChild(g),(s=document.createElement("div")).classList.add("wdr-inp-row"),s.classList.add("wdr-ir-horizontal"),o.appendChild(s),d=document.createElement("label"),e.setText(d,t.currency_symbol),s.appendChild(d);var A=document.createElement("input");A.classList.add("wdr-inp"),A.type="text",s.appendChild(A),(s=document.createElement("div")).classList.add("wdr-inp-row"),s.classList.add("wdr-ir-horizontal"),o.appendChild(s),d=document.createElement("label"),e.setText(d,t.currency_align),s.appendChild(d);var p=(g=e.createSelect()).select;p.options[0]=new Option(t.align_left,"left"),p.options[1]=new Option(t.align_right,"right"),s.appendChild(g),(s=document.createElement("div")).classList.add("wdr-inp-row"),s.classList.add("wdr-ir-horizontal"),o.appendChild(s),d=document.createElement("label"),e.setText(d,t.null_value),s.appendChild(d);var f=document.createElement("input");f.classList.add("wdr-inp"),f.type="text",s.appendChild(f),(s=document.createElement("div")).classList.add("wdr-inp-row"),s.classList.add("wdr-ir-horizontal"),o.appendChild(s),d=document.createElement("label"),e.setText(d,t.is_percent),s.appendChild(d);var g,m=(g=e.createSelect()).select;for(m.options[0]=new Option(t.true_value,!0),m.options[1]=new Option(t.false_value,!1),s.appendChild(g),i.setContent(r),this.popupManager.addPopup(i.content),t=e.pivot.getMeasures(),d=0;d<t.length;d++)a.options[d+2]=new Option(t[d].caption,t[d].uniqueName);n()},a.prototype.showConditionalFormattingDialog=function(){var e=this,t=this.Labels,n=this.pivot.getAllConditions(),i=function(e){for(var t=e.match(/\W\d+\.*\d*/g),n=[],i=!1,r="",o=0;o<e.length;o++)'"'==e[o]||"'"==e[o]?(i?n.push(r):r="",i=!i):i&&(r+=e[o]);return e=e.match(/<=|>=|<|>|=|=|!=|isNaN/g),null==t&&null==n?{}:{value1:null!=t?t[0].replace(/\s/,""):n[0],value2:null!=t&&1<t.length?t[1].replace(/\s/,""):"",sign:e?e.join(""):""}},r=this.popupManager.createPopup();r.content.id="wdr-popup-conditional",r.setTitle(this.osUtils.isMobile?t.conditional:t.conditional_formatting),r.setToolbar([{id:"wdr-btn-apply",label:t.apply,handler:function(){e.pivot.removeAllConditions();for(var t=0;t<n.length;t++){var i,r=n[t].value1,o=n[t].value2,s="",a=null==o||0==o.length,l="><"===(i=n[t].sign),u="isNaN"===i;if((null==r||0==r.length)&&!u||l&&a||(l&&!a?s="AND(#value > "+r+", #value < "+o+")":u?s="isNaN(#value)":(isNaN(parseFloat(r))&&(r="'"+r+"'"),s="#value "+i+" "+r)),null==(i=s))return;n[t].formula=i,e.pivot.addCondition(n[t])}e.pivot.refresh()},isPositive:!0},{id:"wdr-btn-cancel",label:t.cancel}],!0);var o=document.createElement("a");o.id="wdr-add-btn",o.setAttribute("href","javascript:void(0)"),o.classList.add("wdr-ui-btn"),o.classList.add("wdr-ui-btn-light"),o.classList.add("wdr-button-add"),o.onclick=function(){var t={sign:"<",value1:"0",measures:e.pivot.getMeasures(),format:{fontFamily:"Arial",fontSize:"12px",color:"#000000",backgroundColor:"#FFFFFF"}};n.push(t),s.appendChild(e.createConditionalFormattingItem(t,n)),e.popupManager.centerPopup(r.content)},o.setAttribute("title",t.add_condition),(t=document.createElement("span")).classList.add("wdr-icon"),t.classList.add("wdr-icon-act_add"),o.appendChild(t),r.toolbar.insertBefore(o,r.toolbar.firstChild);var s=document.createElement("div");for(s.classList.add("wdr-popup-content"),s.onclick=function(t){t.target.classList.contains("wdr-cr-delete")&&e.popupManager.centerPopup(r.content)},o=0;o<n.length;o++)t=i(n[o].formula),n[o].value1=t.value1,n[o].value2=t.value2,n[o].sign=t.sign,n[o].measures=e.pivot.getMeasures(),s.appendChild(e.createConditionalFormattingItem(n[o],n));r.setContent(s),this.popupManager.addPopup(r.content)},a.prototype.defaults.fontSizes="8px 9px 10px 11px 12px 13px 14px".split(" "),a.prototype.defaults.fonts="Arial;Lucida Sans Unicode;Verdana;Courier New;Palatino Linotype;Tahoma;Impact;Trebuchet MS;Georgia;Times New Roman".split(";"),a.prototype.defaults.conditions=[{label:"less_than",sign:"<"},{label:"less_than_or_equal",sign:"<="},{label:"greater_than",sign:">"},{label:"greater_than_or_equal",sign:">="},{label:"equal_to",sign:"="},{label:"not_equal_to",sign:"!="},{label:"between",sign:"><"},{label:"is_empty",sign:"isNaN"}],a.prototype.createConditionalFormattingItem=function(e,t){var n=this,i=this.Labels,r=function(){"sign"in e&&"><"===e.sign?(A.classList.remove("wdr-width120"),A.classList.add("wdr-width50"),A.style.display="inline-block",f.value="value2"in e?e.value2:"0",f.style.display="inline-block",p.style.display="inline-block"):("sign"in e&&"isNaN"===e.sign?A.style.display="none":(A.classList.add("wdr-width120"),A.classList.remove("wdr-width50"),A.style.display="inline-block"),f.style.display="none",p.style.display="none")},o=function(){var t=e.format;null!=t&&(v.style.backgroundColor=t.backgroundColor||"#fff",v.style.color=t.color||"#000",v.style.fontFamily=t.fontFamily||"Arial",v.style.fontSize=t.fontSize||"12px")},s=document.createElement("div");s.classList.add("wdr-condition-row");var l=document.createElement("div");l.classList.add("wdr-wrap-relative"),s.appendChild(l);var u=document.createElement("span");u.classList.add("wdr-cr-delete"),u.classList.add("wdr-icon"),u.classList.add("wdr-icon-act_trash"),u.onclick=function(){var n=t.indexOf(e);-1<n&&t.splice(n,1),s.parentNode.removeChild(s)},l.appendChild(u),(u=document.createElement("div")).classList.add("wdr-cr-inner"),l.appendChild(u);var c=document.createElement("div");c.classList.add("wdr-cr-lbl"),c.classList.add("wdr-width50"),n.setText(c,i.value+":"),u.appendChild(c),(c=n.createSelect()).id="wdr-values";var h=c.select;"measures"in e?(function(e,t){h[0]=new Option(i.all_values,"");for(var r=(r=n.pivot.getOptions()||{}).grid&&"flat"==r.grid.type,o=0;o<e.length;o++)r&&7==e[o].type||(h[h.options.length]=new Option(e[o].caption,e[o].uniqueName));null!=t?h.value=t:h.selectedIndex=0}(e.measures,e.measure),h.disabled=0===e.measures.length):h.disabled=!0,h.onchange=function(){e.measure=h.value},u.appendChild(c),(c=n.createSelect()).id="wdr-conditions";var d=c.select;!function(e){for(var t=0;t<n.defaults.conditions.length;t++)d[t]=new Option(i[n.defaults.conditions[t].label],n.defaults.conditions[t].sign);null!=e?d.value=e:d.selectedIndex=0}("sign"in e?e.sign:null),d.onchange=function(){e.sign=d.value,"sign"in e&&"><"===e.sign?e.value2=0:("sign"in e&&"isNaN"===e.sign&&delete e.value1,delete e.value2),r()},u.appendChild(c);var A=document.createElement("input");A.classList.add("wdr-number-inp"),A.classList.add("wdr-width50"),A.type="number",A.value="value1"in e?e.value1:"0",A.onchange=function(){e.value1=0==A.value.length?"0":A.value},u.appendChild(A);var p=document.createElement("span");p.id="wdr-and-label",p.classList.add("wdr-width20"),n.setText(p,i.and_symbole),u.appendChild(p);var f=document.createElement("input");f.classList.add("wdr-number-inp"),f.classList.add("wdr-width50"),f.type="number",f.value="value2"in e?e.value2:"0",f.onchange=function(){e.value2=0==f.value.length?"0":f.value},u.appendChild(f),r(),(u=document.createElement("div")).classList.add("wdr-cr-inner"),l.appendChild(u),(c=document.createElement("div")).classList.add("wdr-cr-lbl"),c.classList.add("wdr-width50"),n.setText(c,i.format+":"),u.appendChild(c),(c=n.createSelect()).id="wdr-font-family";var g=c.select;!function(e){for(var t=0;t<n.defaults.fonts.length;t++)g[t]=new Option(n.defaults.fonts[t],n.defaults.fonts[t]);g.value=null==e?"Arial":e}(e.hasOwnProperty("format")&&e.format.hasOwnProperty("fontFamily")?e.format.fontFamily:null),g.onchange=function(){null!=e.format&&(e.format.fontFamily=g.value,o())},u.appendChild(c),(c=n.createSelect()).id="wdr-font-size";var m=c.select;!function(e){for(var t=0;t<n.defaults.fontSizes.length;t++)m[t]=new Option(n.defaults.fontSizes[t],n.defaults.fontSizes[t]);m.value=null==e?"12px":e}(e.hasOwnProperty("format")&&e.format.hasOwnProperty("fontSize")?e.format.fontSize:null),m.onchange=function(){null!=e.format&&(e.format.fontSize=m.value,o())},u.appendChild(c);var y=new a.ColorPicker(this,s);y.setColor(e.hasOwnProperty("format")&&e.format.hasOwnProperty("backgroundColor")?e.format.backgroundColor:"0xFFFFFF","bg"),y.setColor(e.hasOwnProperty("format")&&e.format.hasOwnProperty("color")?e.format.color:"0x000000","font"),y.changeHandler=function(){null!=e.format&&(v.style.color=y.fontColor||"#000",v.style.backgroundColor=y.backgroundColor||"#fff")},y.applyHandler=function(){null!=e.format&&(e.format.color=y.fontColor,e.format.backgroundColor=y.backgroundColor,o())},y.cancelHandler=function(){null!=e.format&&(y.setColor(e.format.hasOwnProperty("backgroundColor")?e.format.backgroundColor:"0xFFFFFF","bg"),y.setColor(e.format.hasOwnProperty("color")?e.format.color:"0x000000","font")),o()},u.appendChild(y.element);var v=document.createElement("input");return v.id="wdr-sample",v.classList.add("wdr-inp"),v.type="number",v.value="73.93",v.style.pointerEvents="none",u.appendChild(v),o(),s},a.prototype.showOptionsDialog=function(){var e=this,t=this.Labels,n=this.popupManager.createPopup();n.content.id="wdr-popup-options",n.setTitle(this.osUtils.isMobile?t.options:t.layout_options),n.setToolbar([{id:"wdr-btn-apply",label:t.apply,handler:function(){var t,n;u.checked?t="off":h.checked?t="on":d.checked?t="rows":A.checked&&(t="columns"),y.checked?n="off":v.checked?n="on":w.checked?n="rows":_.checked&&(n="columns");var i="compact";g&&g.checked?i="classic":m&&m.checked&&(i="flat"),e.pivot.getOptions(),e.pivot.setOptions({grid:{showGrandTotals:t,showTotals:n,type:i}}),e.pivot.refresh()},isPositive:!0},{id:"wdr-btn-cancel",label:t.cancel}],!0);var i=document.createElement("div");i.classList.add("wdr-popup-content");var r=document.createElement("div");r.classList.add("wdr-ui-row"),i.appendChild(r);var o=document.createElement("div");o.classList.add("wdr-ui-col-2"),r.appendChild(o),(p=document.createElement("div")).classList.add("wdr-title-2"),e.setText(p,t.grand_totals),o.appendChild(p);var s="wdr-grand-totals-"+Date.now();(p=document.createElement("ul")).classList.add("wdr-radiobtn-list"),o.appendChild(p);var a=document.createElement("li"),l=document.createElement("div");l.classList.add("wdr-radio-wrap");var u=document.createElement("input");u.type="radio",u.name=s,u.id="wdr-gt-1",u.value="off",l.appendChild(u);var c=document.createElement("label");c.setAttribute("for","wdr-gt-1"),e.setText(c,t.grand_totals_off),l.appendChild(c),a.appendChild(l),p.appendChild(a),a=document.createElement("li"),(l=document.createElement("div")).classList.add("wdr-radio-wrap");var h=document.createElement("input");h.type="radio",h.name=s,h.id="wdr-gt-2",h.value="on",l.appendChild(h),(c=document.createElement("label")).setAttribute("for","wdr-gt-2"),e.setText(c,t.grand_totals_on),l.appendChild(c),a.appendChild(l),p.appendChild(a),a=document.createElement("li"),(l=document.createElement("div")).classList.add("wdr-radio-wrap");var d=document.createElement("input");d.type="radio",d.name=s,d.id="wdr-gt-3",d.value="rows",l.appendChild(d),(c=document.createElement("label")).setAttribute("for","wdr-gt-3"),e.setText(c,t.grand_totals_on_rows),l.appendChild(c),a.appendChild(l),p.appendChild(a),a=document.createElement("li"),(l=document.createElement("div")).classList.add("wdr-radio-wrap");var A=document.createElement("input");A.type="radio",A.name=s,A.id="wdr-gt-4",A.value="rows",l.appendChild(A),(c=document.createElement("label")).setAttribute("for","wdr-gt-4"),e.setText(c,t.grand_totals_on_columns),l.appendChild(c),a.appendChild(l),p.appendChild(a),(p=document.createElement("div")).classList.add("wdr-title-2"),e.setText(p,t.layout),o.appendChild(p);var p,f="wdr-layout-"+Date.now();(p=document.createElement("ul")).classList.add("wdr-radiobtn-list"),o.appendChild(p),a=document.createElement("li"),(l=document.createElement("div")).classList.add("wdr-radio-wrap"),(s=document.createElement("input")).type="radio",s.name=f,s.id="wdr-lt-1",s.value="compact",l.appendChild(s),(c=document.createElement("label")).setAttribute("for","wdr-lt-1"),e.setText(c,t.compact_view),l.appendChild(c),a.appendChild(l),p.appendChild(a),a=document.createElement("li"),(l=document.createElement("div")).classList.add("wdr-radio-wrap");var g=document.createElement("input");g.type="radio",g.name=f,g.id="wdr-lt-2",g.value="classic",l.appendChild(g),(c=document.createElement("label")).setAttribute("for","wdr-lt-2"),e.setText(c,t.classic_view),l.appendChild(c),a.appendChild(l),p.appendChild(a),o=e.pivot.getReport({withDefaults:!0,withGlobals:!0}),a=document.createElement("li"),(l=document.createElement("div")).classList.add("wdr-radio-wrap");var m=document.createElement("input");m.type="radio",m.name=f,m.id="wdr-lt-3",m.value="flat",l.appendChild(m),(c=document.createElement("label")).setAttribute("for","wdr-lt-3"),e.setText(c,t.flat_view),l.appendChild(c),a.appendChild(l),p.appendChild(a),(o=document.createElement("div")).classList.add("wdr-ui-col-2"),r.appendChild(o),(p=document.createElement("div")).classList.add("wdr-title-2"),e.setText(p,t.subtotals),o.appendChild(p),r="wdr-subtotals-"+Date.now(),(p=document.createElement("ul")).classList.add("wdr-radiobtn-list"),o.appendChild(p),a=document.createElement("li"),(l=document.createElement("div")).classList.add("wdr-radio-wrap");var y=document.createElement("input");y.type="radio",y.name=r,y.id="wdr-st-1",y.value="off",l.appendChild(y),(c=document.createElement("label")).setAttribute("for","wdr-st-1"),e.setText(c,t.subtotals_off),l.appendChild(c),a.appendChild(l),p.appendChild(a),a=document.createElement("li"),(l=document.createElement("div")).classList.add("wdr-radio-wrap");var v=document.createElement("input");v.type="radio",v.name=r,v.id="wdr-st-2",v.value="on",l.appendChild(v),(c=document.createElement("label")).setAttribute("for","wdr-st-2"),e.setText(c,t.subtotals_on),l.appendChild(c),a.appendChild(l),p.appendChild(a),a=document.createElement("li"),(l=document.createElement("div")).classList.add("wdr-radio-wrap");var w=document.createElement("input");w.type="radio",w.name=r,w.id="wdr-st-3",w.value="rows",l.appendChild(w),(c=document.createElement("label")).setAttribute("for","wdr-st-3"),e.setText(c,t.subtotals_on_rows),l.appendChild(c),a.appendChild(l),p.appendChild(a),a=document.createElement("li"),(l=document.createElement("div")).classList.add("wdr-radio-wrap");var _=document.createElement("input");_.type="radio",_.name=r,_.id="wdr-st-4",_.value="columns",l.appendChild(_),(c=document.createElement("label")).setAttribute("for","wdr-st-4"),e.setText(c,t.subtotals_on_columns),l.appendChild(c),a.appendChild(l),p.appendChild(a),n.setContent(i),this.popupManager.addPopup(n.content),"off"==(t=(o=e.pivot.getOptions()||{}).grid||{}).showGrandTotals||0==t.showGrandTotals?u.checked=!0:"on"==t.showGrandTotals||1==t.showGrandTotals?h.checked=!0:"rows"==t.showGrandTotals?d.checked=!0:"columns"==t.showGrandTotals&&(A.checked=!0),"off"==t.showTotals?y.checked=!0:"on"==t.showTotals?v.checked=!0:"rows"==t.showTotals?w.checked=!0:"columns"==t.showTotals&&(_.checked=!0),"flat"==t.type&&m?m.checked=!0:"classic"==t.type&&g?g.checked=!0:s&&(s.checked=!0)},a.prototype.showExportPdfDialog=function(){var e=this,t=this.Labels,n=this.popupManager.createPopup();n.setTitle(t.choose_page_orientation),n.setToolbar([{id:"wdr-btn-apply",label:t.apply,handler:function(){var t="portrait";a.checked&&(t="landscape"),e.pivot.exportTo("pdf",{pageOrientation:t})},isPositive:!0},{id:"wdr-btn-cancel",label:t.cancel}]);var i=document.createElement("div"),r=document.createElement("ul");r.classList.add("wdr-radiobtn-list"),i.appendChild(r);var o=document.createElement("li");r.appendChild(o);var s=document.createElement("div");s.classList.add("wdr-radio-wrap"),o.appendChild(s),(o=document.createElement("input")).id="wdr-portrait-radio",o.type="radio",o.name="wdr-pdf-orientation",o.checked=!0,s.appendChild(o),(o=document.createElement("label")).setAttribute("for","wdr-portrait-radio"),e.setText(o,t.portrait),s.appendChild(o),o=document.createElement("li"),r.appendChild(o),(s=document.createElement("div")).classList.add("wdr-radio-wrap"),o.appendChild(s);var a=document.createElement("input");a.id="wdr-landscape-radio",a.type="radio",a.name="wdr-pdf-orientation",s.appendChild(a),(o=document.createElement("label")).setAttribute("for","wdr-landscape-radio"),e.setText(o,t.landscape),s.appendChild(o),n.setContent(i),this.popupManager.addPopup(n.content)},a.prototype.toggleFullscreen=function(){this.isFullscreen()?this.exitFullscreen():this.enterFullscreen(this.container)},a.prototype.isFullscreen=function(){return document.fullScreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement},a.prototype.enterFullscreen=function(e){if(e.requestFullscreen||e.webkitRequestFullScreen||e.mozRequestFullScreen||e.msRequestFullscreen&&window==top){if(this.containerStyle={width:this.container.style.width,height:this.container.style.height,position:this.container.style.position,top:this.container.style.top,bottom:this.container.style.bottom,left:this.container.style.left,right:this.container.style.right,marginTop:this.container.style.marginTop,marginLeft:this.container.style.left,toolbarWidth:this.toolbarWrapper.style.width},this.container.style.width="100%",this.container.style.height="100%",this.container.style.position="fixed",this.container.style.top="0px",this.container.style.left="0px",this.toolbarWrapper.style.width="100%",e.requestFullscreen)e.requestFullscreen();else if(e.webkitRequestFullScreen){var t=navigator.userAgent;-1<t.indexOf("Safari")&&-1==t.indexOf("Chrome")?e.webkitRequestFullScreen():e.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT)}else e.mozRequestFullScreen?e.mozRequestFullScreen():e.msRequestFullscreen&&(window==top?e.msRequestFullscreen():alert("Fullscreen mode in IE 11 is not currently supported while Pivot embeded in iframe."));e.addEventListener("fullscreenchange",(function(){window.screenTop||window.screenY||this.isFullscreen()||this.exitFullscreen()}).bind(this),!1),e.addEventListener("webkitfullscreenchange",(function(){window.screenTop||window.screenY||this.isFullscreen()||this.exitFullscreen()}).bind(this),!1),e.addEventListener("mozfullscreenchange",(function(){window.fullScreen||window.innerWidth==screen.width&&window.innerHeight==screen.height||this.exitFullscreen()}).bind(this),!1)}},a.prototype.exitFullscreen=function(){this.container.style.width=this.containerStyle.width,this.container.style.height=this.containerStyle.height,this.container.style.position=this.containerStyle.position,this.container.style.top=this.containerStyle.top,this.container.style.left=this.containerStyle.left,this.container.style.marginTop=this.containerStyle.marginTop,this.container.style.marginLeft=this.containerStyle.marginLeft,this.toolbarWrapper.style.width=this.containerStyle.toolbarWidth,document.exitFullscreen?document.exitFullscreen():document.cancelFullscreen?document.cancelFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullScreen?document.webkitExitFullScreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen()},a.prototype.nullOrUndefined=function(e){return null==e},a.prototype.hasClass=function(e,t){return e.className.match(RegExp("(\\s|^)"+t+"(\\s|$)"))},a.prototype.addClass=function(e,t){this.hasClass(e,t)||(e.className+=" "+t)},a.prototype.removeClass=function(e,t){this.hasClass(e,t)&&(e.className=e.className.replace(RegExp("(\\s|^)"+t+"(\\s|$)")," "))},a.prototype.setText=function(e,t){e&&(void 0!==e.innerText&&(e.innerText=t),void 0!==e.textContent&&(e.textContent=t))},a.prototype.createSelect=function(){var e=document.createElement("div");e.classList.add("wdr-select");var t=document.createElement("select");return e.appendChild(t),e.select=t,e},a.prototype.createDivider=function(e){return(e=document.createElement("li")).className="wdr-divider",e},a.prototype.createTab=function(e){var t=document.createElement("li");t.id=e.id;var n=document.createElement("a");e.hasOwnProperty("class_attr")&&n.setAttribute("class",e.class_attr),n.setAttribute("href","javascript:void(0)"),e.icon&&((i=document.createElement("div")).classList.add("wdr-svg-icon"),i.innerHTML=e.icon,n.appendChild(i)),i=document.createElement("span"),this.setText(i,e.title),n.appendChild(i);var i,r=this;return this.nullOrUndefined(i="function"==typeof e.handler?e.handler:this[e.handler])||(n.onclick=function(e,t){return function(){e.call(r,t)}}(i,e.args)),this.nullOrUndefined(this[e.onShowHandler])||(n.onmouseover=function(e){return function(){e.call(r)}}(this[e.onShowHandler])),t.onmouseover=function(){r.showDropdown(this)},t.onmouseout=function(){r.hideDropdown(this)},t.appendChild(n),null==e.menu||this.osUtils.isMobile&&1!=e.collapse||t.appendChild(this.createTabMenu(e.menu)),t},a.prototype.showDropdown=function(e){var t=e.querySelectorAll(".wdr-dropdown")[0];t&&(t.style.display="block",t.getBoundingClientRect().right>this.toolbarWrapper.getBoundingClientRect().right&&(t.style.right=0,this.addClass(e,"wdr-align-rigth")))},a.prototype.hideDropdown=function(e){var t=e.querySelectorAll(".wdr-dropdown")[0];t&&(t.style.display="none",t.style.right=null,this.removeClass(e,"wdr-align-rigth"))},a.prototype.createTabMenu=function(e){var t=document.createElement("div");t.className="wdr-dropdown wdr-shadow-container";var n=document.createElement("ul");n.className="wdr-dropdown-content";for(var i=0;i<e.length;i++)this.isDisabled(e[i])||n.appendChild(e[i].divider?this.createMenuDivider():this.createTab(e[i]));return t.appendChild(n),t},a.prototype.createMenuDivider=function(){var e=document.createElement("li");return e.className="wdr-v-divider",e},a.prototype.isDisabled=function(e){return!!this.nullOrUndefined(e)||!1===e.ios&&this.osUtils.isIOS||!1===e.android&&this.osUtils.isAndroid||!1===e.mobile&&this.osUtils.isMobile},a.prototype.getElementById=function(e,t){return function e(t,n){for(var i=0;i<t.childNodes.length;i++){var r=t.childNodes[i];if(r.id==n)return r;if(null!=(r=e(r,n)))return r}return null}(t||this.toolbarWrapper,e)},a.prototype.osUtils={isIOS:!(!navigator.userAgent.match(/iPhone|iPad|iPod/i)&&!navigator.platform.match(/iPhone|iPad|iPod/i)),isMac:/Mac/i.test(navigator.platform),isAndroid:!!navigator.userAgent.match(/Android/i),isBlackBerry:/BlackBerry/i.test(navigator.platform),isMobile:navigator.userAgent.match(/iPhone|iPad|iPod/i)||navigator.platform.match(/iPhone|iPad|iPod/i)||navigator.userAgent.match(/Android/i)||/BlackBerry/i.test(navigator.platform)},a.PopupManager=function(e){this.toolbar=e,this.activePopup=null},a.PopupManager.prototype.createPopup=function(){return new a.PopupManager.PopupWindow(this)},a.PopupManager.prototype.addPopup=function(e){if(null!=e){this.removePopup(),this.modalOverlay=this.createModalOverlay(),this.activePopup=e,this.toolbar.toolbarWrapper.appendChild(e),this.toolbar.toolbarWrapper.appendChild(this.modalOverlay),this.addLayoutClasses(e),this.centerPopup(e);var t=this;e.resizeHandler=function(){e&&(t.addLayoutClasses(e),t.centerPopup(e))},window.addEventListener("resize",e.resizeHandler)}},a.PopupManager.prototype.addLayoutClasses=function(e){e.classList.remove("wdr-layout-tablet"),e.classList.remove("wdr-layout-mobile"),e.classList.remove("wdr-layout-mobile-small");var t=this.getBoundingRect(this.toolbar.container);768>t.width&&e.classList.add("wdr-layout-tablet"),580>t.width&&e.classList.add("wdr-layout-mobile"),460>t.width&&e.classList.add("wdr-layout-mobile-small")},a.PopupManager.prototype.centerPopup=function(e){var t=this.getBoundingRect(this.toolbar.container),n=this.getBoundingRect(e),i=this.getBoundingRect(this.toolbar.toolbarWrapper);e.style.zIndex=parseInt(this.modalOverlay.style.zIndex)+1,this.modalOverlay.style.height=t.height+"px",e.style.left=Math.max(0,(i.width-n.width)/2)+"px",e.style.top=Math.max(0,(t.height-n.height)/2)+"px"},a.PopupManager.prototype.removePopup=function(e){e=e||this.activePopup,null!=this.modalOverlay&&(this.toolbar.toolbarWrapper.removeChild(this.modalOverlay),this.modalOverlay=null),null!=e&&(this.toolbar.toolbarWrapper.removeChild(e),this.activePopup=null,window.removeEventListener("resize",e.resizeHandler))},a.PopupManager.prototype.getBoundingRect=function(e){var t=e.getBoundingClientRect();return{left:t.left,right:t.right,top:t.top,bottom:t.bottom,width:t.width||e.clientWidth,height:t.height||e.clientHeight}},a.PopupManager.prototype.createModalOverlay=function(){var e=document.createElement("div");e.className="wdr-modal-overlay",e.id="wdr-popUp-modal-overlay";var t=this;return e.addEventListener("click",(function(e){t.removePopup(t.activePopup)})),e},a.PopupManager.PopupWindow=function(e){this.popupManager=e;var t=document.createElement("div");t.className="wdr-panel-content";var n=document.createElement("div");n.className="wdr-title-bar";var i=document.createElement("div");i.className="wdr-title-text";var r=document.createElement("div");r.className="wdr-toolbox",r.style.clear="both",this.content=document.createElement("div"),this.content.className="wdr-popup wdr-panel wdr-toolbar-ui wdr-ui",this.content.appendChild(t),t.appendChild(n),n.appendChild(i),this.setTitle=function(e){a.prototype.setText(i,e)},this.setContent=function(e){t.insertBefore(e,n.nextSibling)};var o=this;return this.setToolbar=function(e,s){r.innerHTML="";for(var l=e.length-1;0<=l;l--){var u=document.createElement("a");u.setAttribute("href","javascript:void(0)"),u.className="wdr-ui-btn"+(e[l].isPositive?" wdr-ui-btn-dark":""),e[l].id&&(u.id=e[l].id),a.prototype.setText(u,e[l].label),u.onclick=function(e){return function(){null!=e&&e.call(),o.popupManager.removePopup()}}(e[l].handler),!0===e[l].disabled?a.prototype.addClass(u,"wdr-ui-disabled"):a.prototype.removeClass(u,"wdr-ui-disabled"),e[l].isPositive&&(a.prototype.osUtils.isMac||a.prototype.osUtils.isIOS)?r.appendChild(u):r.insertBefore(u,r.firstChild)}s?(r.classList.add("wdr-ui-col"),n.appendChild(r),n.classList.add("wdr-ui-row"),i.classList.add("wdr-ui-col")):t.appendChild(r)},this.toolbar=r,this.titleBar=n,this.title=i,this},a.ColorPicker=function(e,t){function n(e){e=e.target.getAttribute("data-c"),d.drawShades(d.colors[e]),d.setColor(e,d.currentType,!0)}function i(e){e=e.target.getAttribute("data-c"),d.setColor(e,d.currentType,!0)}function r(e){d.currentType=e,l.classList.remove("wdr-current"),u.classList.remove("wdr-current"),"bg"==e?(u.classList.add("wdr-current"),d.setColor(d.backgroundColor,e,!1)):(l.classList.add("wdr-current"),d.setColor(d.fontColor,e,!1))}function o(){d.closePopup(),d.cancelHandler&&d.cancelHandler()}this.toolbar=e,this.element=document.createElement("div"),this.element.classList.add("wdr-colorpick-wrap"),this.element.classList.add("wdr-width40"),this.colorPickerButton=document.createElement("div"),this.colorPickerButton.classList.add("wdr-colorpick-btn"),this.element.appendChild(this.colorPickerButton),this.colorPickerIcon=document.createElement("span"),this.colorPickerIcon.classList.add("wdr-icon"),this.colorPickerIcon.classList.add("wdr-icon-act_font"),this.colorPickerButton.appendChild(this.colorPickerIcon),this.popup=document.createElement("div"),this.popup.classList.add("wdr-colorpick-popup"),this.popup.onclick=function(e){e.stopPropagation()},t.appendChild(this.popup);var s=document.createElement("div");s.classList.add("wdr-color-targ-switch"),this.popup.appendChild(s);var l=document.createElement("a");l.classList.add("wdr-cts-item"),l.classList.add("wdr-current"),l.href="javascript:void(0);",l.innerHTML=e.Labels.cp_text,l.onclick=function(){r("font")},s.appendChild(l);var u=document.createElement("a");for(var c in u.classList.add("wdr-cts-item"),u.innerHTML=e.Labels.cp_highlight,u.href="javascript:void(0);",u.onclick=function(){r("bg")},s.appendChild(u),(s=document.createElement("div")).classList.add("wdr-cp-sett-row"),this.popup.appendChild(s),this.colorInput=document.createElement("input"),this.colorInput.type="text",this.colorInput.classList.add("wdr-inp"),this.colorInput.classList.add("wdr-width140"),this.colorInput.classList.add("wdr-tac"),this.colorInput.onchange=function(){var e=d.colorInput.value;d.isColor(e)&&d.setColor(e,d.currentType,!0)},s.appendChild(this.colorInput),this.colorPreview=document.createElement("div"),this.colorPreview.classList.add("wdr-cp-curr-color"),this.colorPreview.classList.add("wdr-width140"),s.appendChild(this.colorPreview),this.mainColors=document.createElement("div"),this.mainColors.classList.add("wdr-row-9colors"),this.popup.appendChild(this.mainColors),this.colors){(s=document.createElement("div")).classList.add("wdr-r9c-item"),s.style.backgroundColor=c,s.setAttribute("data-c",c),s.addEventListener("click",n),this.mainColors.appendChild(s);var h=document.createElement("span");h.classList.add("wdr-cp-currentmark"),h.classList.add("wdr-icon"),h.classList.add("wdr-icon-act_check"),s.appendChild(h),(h=document.createElement("span")).classList.add("wdr-r9c-arrow"),h.style.borderTopColor=c,s.appendChild(h)}for(this.shadeColors=document.createElement("div"),this.shadeColors.classList.add("wdr-row-4colors"),this.popup.appendChild(this.shadeColors),c=0;8>c;c++)(s=document.createElement("div")).classList.add("wdr-r4c-item"),s.addEventListener("click",i),this.shadeColors.appendChild(s),(h=document.createElement("span")).classList.add("wdr-cp-currentmark"),h.classList.add("wdr-icon"),h.classList.add("wdr-icon-act_check"),s.appendChild(h);this.drawShades(this.colors["#000000"]),(s=document.createElement("div")).classList.add("wdr-cp-btns-row"),this.popup.appendChild(s),(c=document.createElement("a")).innerHTML=e.Labels.apply,c.classList.add("wdr-ui-btn"),c.classList.add("wdr-ui-btn-dark"),c.addEventListener("click",(function(){d.closePopup(),d.applyHandler&&d.applyHandler()})),(h=document.createElement("a")).innerHTML=e.Labels.cancel,h.classList.add("wdr-ui-btn"),h.addEventListener("click",o),a.prototype.osUtils.isMac||a.prototype.osUtils.isIOS?(s.appendChild(h),s.appendChild(c)):(s.appendChild(c),s.appendChild(h)),this.currentType="font",this.colorPickerButton.addEventListener("click",(function(e){e.stopPropagation(),d.isOpened()?d.closePopup():d.openPopup()})),document.body.addEventListener("click",(function(e){o()}));var d=this},a.ColorPicker.prototype.colors={"#000000":"#000000 #212121 #424242 #616161 #757575 #9E9E9E #BDBDBD #FFFFFF".split(" "),"#F44336":"#D32F2F #E53935 #F44336 #EF5350 #E57373 #EF9A9A #FFCDD2 #FFEBEE".split(" "),"#FF9800":"#F57C00 #FB8C00 #FF9800 #FFA726 #FFB74D #FFCC80 #FFE0B2 #FFF3E0".split(" "),"#FFEB3B":"#FBC02D #FDD835 #FFEB3B #FFEE58 #FFF176 #FFF59D #FFF9C4 #FFFDE7".split(" "),"#8BC34A":"#689F38 #7CB342 #8BC34A #9CCC65 #AED581 #C5E1A5 #DCEDC8 #F1F8E9".split(" "),"#009688":"#00796B #00897B #009688 #26A69A #4DB6AC #80CBC4 #B2DFDB #E0F2F1".split(" "),"#03A9F4":"#0288D1 #039BE5 #03A9F4 #29B6F6 #4FC3F7 #81D4FA #B3E5FC #E1F5FE".split(" "),"#3F51B5":"#303F9F #3949AB #3F51B5 #5C6BC0 #7986CB #9FA8DA #C5CAE9 #E8EAF6".split(" "),"#9C27B0":"#7B1FA2 #8E24AA #9C27B0 #AB47BC #BA68C8 #CE93D8 #E1BEE7 #F3E5F5".split(" ")},a.ColorPicker.prototype.isOpened=function(){return this.popup.parentElement&&this.popup.parentElement.classList.contains("wdr-popup-opened")},a.ColorPicker.prototype.drawShades=function(e){if(e)for(var t=this.shadeColors.children,n=0;n<t.length;n++){var i=t[n];i.setAttribute("data-c",e[n]),i.style.backgroundColor=e[n],i.style.borderRight="#FFFFFF"==e[n]?"1px solid #d5d5d5":"none",i.style.borderBottom="#FFFFFF"==e[n]?"1px solid #d5d5d5":"none"}},a.ColorPicker.prototype.setColor=function(e,t,n){"string"==typeof e&&0==e.indexOf("0x")&&(e="#"+e.substr(2)),"bg"==t?(this.backgroundColor=e,this.colorPickerButton.style.backgroundColor=e):(this.fontColor=e,this.colorPickerIcon.style.color=e),this.colorInput.value=e,this.colorPreview.style.backgroundColor=e,this.drawSelected(),n&&this.changeHandler&&this.changeHandler()},a.ColorPicker.prototype.drawSelected=function(){var e="bg"==this.currentType?this.backgroundColor:this.fontColor,t=this.findMain(e);this.drawShades(this.colors[t]);for(var n=this.mainColors.children,i=0;i<n.length;i++)n[i].classList.remove("wdr-current");for((t=this.mainColors.querySelector("[data-c='"+t+"']"))&&t.classList.add("wdr-current"),n=this.shadeColors.children,i=0;i<n.length;i++)n[i].classList.remove("wdr-current");(e=this.shadeColors.querySelector("[data-c='"+e+"']"))&&e.classList.add("wdr-current")},a.ColorPicker.prototype.findMain=function(e){for(var t in"string"==typeof e&&0==e.indexOf("0x")&&(e="#"+e.substr(2)),this.colors)if(0<=this.colors[t].indexOf(e))return t},a.ColorPicker.prototype.isColor=function(e){return e.match(/^#?[0-9A-Fa-f]{6}$/g)},a.ColorPicker.prototype.closePopup=function(){this.popup.parentElement&&this.popup.parentElement.classList.remove("wdr-popup-opened")},a.ColorPicker.prototype.openPopup=function(){for(var e=this.toolbar.toolbarWrapper.querySelectorAll(".wdr-colorpick-popup"),t=0;t<e.length;t++)e[t].parentElement.classList.remove("wdr-popup-opened");this.popup.parentElement&&(e=this.toolbar.toolbarWrapper.querySelector("#wdr-popup-conditional .wdr-panel-content"),t=this.getWhere(this.colorPickerButton,e),0>this.getWhere(this.colorPickerButton,document.body).top-this.popup.clientHeight?(this.popup.classList.remove("wdr-arrow-down"),this.popup.classList.add("wdr-arrow-up"),this.popup.style.top=this.colorPickerButton.clientHeight+t.top+11+"px",this.popup.style.bottom=""):(this.popup.classList.add("wdr-arrow-down"),this.popup.classList.remove("wdr-arrow-up"),this.popup.style.bottom=e.clientHeight-t.top+5+"px",this.popup.style.top=""),this.popup.style.left=t.left+this.colorPickerButton.clientWidth/2+2+"px",this.popup.parentElement.classList.add("wdr-popup-opened"))},a.ColorPicker.prototype.getWhere=function(e,t){var n=0,i=0;if(e.offsetParent){n=e.offsetLeft,i=e.offsetTop;for(var r=e;(r=r.parentNode)&&r!=t;)n-=0,i-=r.scrollTop?r.scrollTop:0;for(;(e=e.offsetParent)&&e!=t;)n+=e.offsetLeft,i+=e.offsetTop}return{top:i+0,left:n+0}};var l,u=u||"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob&&navigator.msSaveOrOpenBlob.bind(navigator)||function(e){"use strict";if("undefined"==typeof navigator||!/MSIE [1-9]\./.test(navigator.userAgent)){var t=e.document,n=t.createElementNS("http://www.w3.org/1999/xhtml","a"),i="download"in n,r=function(n){var i=t.createEvent("MouseEvents");i.initMouseEvent("click",!0,!1,e,0,0,0,0,0,!1,!1,!1,!1,0,null),n.dispatchEvent(i)},o=e.webkitRequestFileSystem,s=e.requestFileSystem||o||e.mozRequestFileSystem,a=function(t){(e.setImmediate||e.setTimeout)((function(){throw t}),0)},l=0,u=function(t){var n=function(){"string"==typeof t?(e.URL||e.webkitURL||e).revokeObjectURL(t):t.remove()};e.chrome?n():setTimeout(n,500)},c=function(e,t,n){for(var i=(t=[].concat(t)).length;i--;){var r=e["on"+t[i]];if("function"==typeof r)try{r.call(e,n||e)}catch(o){a(o)}}},h=function(t,a){var h,d,A=this,p=t.type,f=!1,g=function(){c(A,["writestart","progress","write","writeend"])},m=function(){!f&&h||(h=(e.URL||e.webkitURL||e).createObjectURL(t)),d?d.location.href=h:null==e.open(h,"_blank")&&"undefined"!=typeof safari&&(e.location.href=h),A.readyState=A.DONE,g(),u(h)},y=function(e){return function(){if(A.readyState!==A.DONE)return e.apply(this,arguments)}},v={create:!0,exclusive:!1};A.readyState=A.INIT,a||(a="download"),i?(h=(e.URL||e.webkitURL||e).createObjectURL(t),n.href=h,n.download=a,r(n),A.readyState=A.DONE,g(),u(h)):(e.chrome&&p&&"application/octet-stream"!==p&&(t=(t.slice||t.webkitSlice).call(t,0,t.size,"application/octet-stream"),f=!0),o&&"download"!==a&&(a+=".download"),("application/octet-stream"===p||o)&&(d=e),s?s(e.TEMPORARY,l+=t.size,y((function(e){e.root.getDirectory("saved",v,y((function(e){var n=function(){e.getFile(a,v,y((function(e){e.createWriter(y((function(n){n.onwriteend=function(t){d.location.href=e.toURL(),A.readyState=A.DONE,c(A,"writeend",t),u(e)},n.onerror=function(){var e=n.error;e.code!==e.ABORT_ERR&&m()},["writestart","progress","write","abort"].forEach((function(e){n["on"+e]=A["on"+e]})),n.write(t),A.abort=function(){n.abort(),A.readyState=A.DONE},A.readyState=A.WRITING})),m)})),m)};e.getFile(a,{create:!1},y((function(e){e.remove(),n()})),y((function(e){e.code===e.NOT_FOUND_ERR?n():m()})))})),m)})),m):m())},d=h.prototype;return d.abort=function(){this.readyState=this.DONE,c(this,"abort")},d.readyState=d.INIT=0,d.WRITING=1,d.DONE=2,d.error=d.onwritestart=d.onprogress=d.onwrite=d.onabort=d.onerror=d.onwriteend=null,function(e,t){return new h(e,t)}}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);null!==e?e.exports=u:null!==n("B9Yq")&&null!=n("PDX0")&&(void 0===(r=(function(){return u}).call(t,n,t,e))||(e.exports=r)),function(){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(e){if("object"!==i(e.console)){e.console={};for(var t,n,r=e.console,o=function(){},s=["memory"],a="assert,clear,count,debug,dir,dirxml,error,exception,group,groupCollapsed,groupEnd,info,log,markTimeline,profile,profiles,profileEnd,show,table,time,timeEnd,timeline,timelineEnd,timeStamp,trace,warn".split(",");t=s.pop();)r[t]||(r[t]={});for(;n=a.pop();)r[n]||(r[n]=o)}var l,u,c,h,d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";void 0===e.btoa&&(e.btoa=function(e){var t,n,i,r,o,s=0,a=0,l="",u=[];if(!e)return e;for(;t=(o=e.charCodeAt(s++)<<16|e.charCodeAt(s++)<<8|e.charCodeAt(s++))>>18&63,n=o>>12&63,i=o>>6&63,r=63&o,u[a++]=d.charAt(t)+d.charAt(n)+d.charAt(i)+d.charAt(r),s<e.length;);l=u.join("");var c=e.length%3;return(c?l.slice(0,c-3):l)+"===".slice(c||3)}),void 0===e.atob&&(e.atob=function(e){var t,n,i,r,o,s,a=0,l=0,u=[];if(!e)return e;for(e+="";t=(s=d.indexOf(e.charAt(a++))<<18|d.indexOf(e.charAt(a++))<<12|(r=d.indexOf(e.charAt(a++)))<<6|(o=d.indexOf(e.charAt(a++))))>>16&255,n=s>>8&255,i=255&s,u[l++]=64==r?String.fromCharCode(t):64==o?String.fromCharCode(t,n):String.fromCharCode(t,n,i),a<e.length;);return u.join("")}),Array.prototype.map||(Array.prototype.map=function(e){if(null==this||"function"!=typeof e)throw new TypeError;for(var t=Object(this),n=t.length>>>0,i=new Array(n),r=1<arguments.length?arguments[1]:void 0,o=0;o<n;o++)o in t&&(i[o]=e.call(r,t[o],o,t));return i}),Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),Array.prototype.forEach||(Array.prototype.forEach=function(e,t){if(null==this||"function"!=typeof e)throw new TypeError;for(var n=Object(this),i=n.length>>>0,r=0;r<i;r++)r in n&&e.call(t,n[r],r,n)}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(e){if(null==this)throw new TypeError('"this" is null or not defined');var t=Object(this),n=t.length>>>0;if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var i=arguments[1],r=0;r<n;){var o=t[r];if(e.call(i,o,r,t))return o;r++}},configurable:!0,writable:!0}),Object.keys||(Object.keys=(l=Object.prototype.hasOwnProperty,u=!{toString:null}.propertyIsEnumerable("toString"),h=(c=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"]).length,function(e){if("object"!==i(e)&&("function"!=typeof e||null===e))throw new TypeError;var t,n,r=[];for(t in e)l.call(e,t)&&r.push(t);if(u)for(n=0;n<h;n++)l.call(e,c[n])&&r.push(c[n]);return r})),"function"!=typeof Object.assign&&(Object.assign=function(e){if(null==e)throw new TypeError("Cannot convert undefined or null to object");e=Object(e);for(var t=1;t<arguments.length;t++){var n=arguments[t];if(null!=n)for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),String.prototype.trimLeft||(String.prototype.trimLeft=function(){return this.replace(/^\s+/g,"")}),String.prototype.trimRight||(String.prototype.trimRight=function(){return this.replace(/\s+$/g,"")}),Number.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||"undefined"!=typeof global&&global||Function('return typeof this === "object" && this.content')()||Function("return this")());var o,s,a,l,u,c,h,d,A,p,f,g,m,y,v,w,_,b,C,E,S,L,T,B,N,I,O,F,x,D,R,U,M,H,P,Q,k,z,V,j,G,q,W,K,X,Y,J,Z,$,ee,te,ne,ie,re,oe,se,ae,le,ue,ce,he,de=function(o){function s(e){if("object"!==i(e))throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(e,n,i){if(i=i||!1,"string"!=typeof e||"function"!=typeof n||"boolean"!=typeof i)throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(e)||(t[e]={});var r=Math.random().toString(35);return t[e][r]=[n,!!i],r},this.unsubscribe=function(e){for(var n in t)if(t[n][e])return delete t[n][e],0===Object.keys(t[n]).length&&delete t[n],!0;return!1},this.publish=function(n){if(t.hasOwnProperty(n)){var i=Array.prototype.slice.call(arguments,1),r=[];for(var s in t[n]){var a=t[n][s];try{a[0].apply(e,i)}catch(n){o.console&&console.error("jsPDF PubSub Error",n.message,n)}a[1]&&r.push(s)}r.length&&r.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function a(e,t,n,r){var l={},u=[],c=1;"object"===i(e)&&(e=(l=e).orientation,t=l.unit||t,n=l.format||n,r=l.compress||l.compressPdf||r,u=l.filters||(!0===r?["FlateEncode"]:u),c="number"==typeof l.userUnit?Math.abs(l.userUnit):1),t=t||"mm",e=(""+(e||"P")).toLowerCase();var h=l.putOnlyUsedFonts||!0,d={},A={internal:{},__private__:{}};A.__private__.PubSub=s;var p="1.3",f=A.__private__.getPdfVersion=function(){return p},g=(A.__private__.setPdfVersion=function(e){p=e},{a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]}),m=(A.__private__.getPageFormats=function(){return g},A.__private__.getPageFormat=function(e){return g[e]});"string"==typeof n&&(n=m(n)),n=n||m("a4");var y,v=A.f2=A.__private__.f2=function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.f2");return e.toFixed(2)},w=A.__private__.f3=function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.f3");return e.toFixed(3)},_="00000000000000000000000000000000",b=A.__private__.getFileId=function(){return _},C=A.__private__.setFileId=function(e){return e=e||"12345678901234567890123456789012".split("").map((function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))})).join(""),_=e};A.setFileId=function(e){return C(e),this},A.getFileId=function(){return b()};var E=A.__private__.convertDateToPDFDate=function(e){var t=e.getTimezoneOffset(),n=t<0?"+":"-",i=Math.floor(Math.abs(t/60)),r=Math.abs(t%60),o=[n,U(i),"'",U(r),"'"].join("");return["D:",e.getFullYear(),U(e.getMonth()+1),U(e.getDate()),U(e.getHours()),U(e.getMinutes()),U(e.getSeconds()),o].join("")},S=A.__private__.convertPDFDateToDate=function(e){var t=parseInt(e.substr(2,4),10),n=parseInt(e.substr(6,2),10)-1,i=parseInt(e.substr(8,2),10),r=parseInt(e.substr(10,2),10),o=parseInt(e.substr(12,2),10),s=parseInt(e.substr(14,2),10);return parseInt(e.substr(16,2),10),parseInt(e.substr(20,2),10),new Date(t,n,i,r,o,s,0)},L=A.__private__.setCreationDate=function(e){var t;if(void 0===e&&(e=new Date),"object"===i(e)&&"[object Date]"===Object.prototype.toString.call(e))t=E(e);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|\-0[0-9]|\-1[0-1])\'(0[0-9]|[1-5][0-9])\'?$/.test(e))throw new Error("Invalid argument passed to jsPDF.setCreationDate");t=e}return y=t},T=A.__private__.getCreationDate=function(e){var t=y;return"jsDate"===e&&(t=S(y)),t};A.setCreationDate=function(e){return L(e),this},A.getCreationDate=function(e){return T(e)};var B,N,I,O,F,x,D,R,U=A.__private__.padd2=function(e){return("0"+parseInt(e)).slice(-2)},M=!1,H=[],P=[],Q=0,k=(A.__private__.setCustomOutputDestination=function(e){N=e},A.__private__.resetCustomOutputDestination=function(e){N=void 0},A.__private__.out=function(e){var t;return e="string"==typeof e?e:e.toString(),(t=void 0===N?M?H[B]:P:N).push(e),M||(Q+=e.length+1),t}),z=A.__private__.write=function(e){return k(1===arguments.length?e.toString():Array.prototype.join.call(arguments," "))},V=A.__private__.getArrayBuffer=function(e){for(var t=e.length,n=new ArrayBuffer(t),i=new Uint8Array(n);t--;)i[t]=e.charCodeAt(t);return n},j=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]],G=(A.__private__.getStandardFonts=function(e){return j},l.fontSize||16),q=(A.__private__.setFontSize=A.setFontSize=function(e){return G=e,this},A.__private__.getFontSize=A.getFontSize=function(){return G}),W=l.R2L||!1,K=(A.__private__.setR2L=A.setR2L=function(e){return W=e,this},A.__private__.getR2L=A.getR2L=function(e){return W},A.__private__.setZoomMode=function(e){if(/^\d*\.?\d*\%$/.test(e))I=e;else if(isNaN(e)){if(-1===[void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(e))throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+e+'" is not recognized.');I=e}else I=parseInt(e,10)}),X=(A.__private__.getZoomMode=function(){return I},A.__private__.setPageMode=function(e){if(-1==[void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(e))throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+e+'" is not recognized.');O=e}),Y=(A.__private__.getPageMode=function(){return O},A.__private__.setLayoutMode=function(e){if(-1==[void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(e))throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+e+'" is not recognized.');F=e}),J=(A.__private__.getLayoutMode=function(){return F},A.__private__.setDisplayMode=A.setDisplayMode=function(e,t,n){return K(e),Y(t),X(n),this},{title:"",subject:"",author:"",keywords:"",creator:""}),Z=(A.__private__.getDocumentProperty=function(e){if(-1===Object.keys(J).indexOf(e))throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return J[e]},A.__private__.getDocumentProperties=function(e){return J},A.__private__.setDocumentProperties=A.setProperties=A.setDocumentProperties=function(e){for(var t in J)J.hasOwnProperty(t)&&e[t]&&(J[t]=e[t]);return this},A.__private__.setDocumentProperty=function(e,t){if(-1===Object.keys(J).indexOf(e))throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return J[e]=t},0),$=[],ee={},te={},ne=0,ie=[],re=[],oe=new s(A),se=l.hotfixes||[],ae=A.__private__.newObject=function(){var e=le();return ue(e,!0),e},le=A.__private__.newObjectDeferred=function(){return $[++Z]=function(){return Q},Z},ue=function(e,t){return t="boolean"==typeof t&&t,$[e]=Q,t&&k(e+" 0 obj"),e},ce=A.__private__.newAdditionalObject=function(){var e={objId:le(),content:""};return re.push(e),e},he=le(),de=le(),Ae=A.__private__.decodeColorString=function(e){var t=e.split(" ");if(2===t.length&&("g"===t[1]||"G"===t[1])){var n=parseFloat(t[0]);t=[n,n,n,"r"]}for(var i="#",r=0;r<3;r++)i+=("0"+Math.floor(255*parseFloat(t[r])).toString(16)).slice(-2);return i},pe=A.__private__.encodeColorString=function(e){var t;"string"==typeof e&&(e={ch1:e});var n=e.ch1,r=e.ch2,o=e.ch3,s=e.ch4,a="draw"===e.pdfColorType?["G","RG","K"]:["g","rg","k"];if("string"==typeof n&&"#"!==n.charAt(0)){var l=new RGBColor(n);if(l.ok)n=l.toHex();else if(!/^\d*\.?\d*$/.test(n))throw new Error('Invalid color "'+n+'" passed to jsPDF.encodeColorString.')}if("string"==typeof n&&/^#[0-9A-Fa-f]{3}$/.test(n)&&(n="#"+n[1]+n[1]+n[2]+n[2]+n[3]+n[3]),"string"==typeof n&&/^#[0-9A-Fa-f]{6}$/.test(n)){var u=parseInt(n.substr(1),16);n=u>>16&255,r=u>>8&255,o=255&u}if(void 0===r||void 0===s&&n===r&&r===o)if("string"==typeof n)t=n+" "+a[0];else switch(e.precision){case 2:t=v(n/255)+" "+a[0];break;case 3:default:t=w(n/255)+" "+a[0]}else if(void 0===s||"object"===i(s)){if(s&&!isNaN(s.a)&&0===s.a)return["1.000","1.000","1.000",a[1]].join(" ");if("string"==typeof n)t=[n,r,o,a[1]].join(" ");else switch(e.precision){case 2:t=[v(n/255),v(r/255),v(o/255),a[1]].join(" ");break;default:case 3:t=[w(n/255),w(r/255),w(o/255),a[1]].join(" ")}}else if("string"==typeof n)t=[n,r,o,s,a[2]].join(" ");else switch(e.precision){case 2:t=[v(n/255),v(r/255),v(o/255),v(s/255),a[2]].join(" ");break;case 3:default:t=[w(n/255),w(r/255),w(o/255),w(s/255),a[2]].join(" ")}return t},fe=A.__private__.getFilters=function(){return u},ge=A.__private__.putStream=function(e){var t,n=(e=e||{}).data||"",i=e.filters||fe(),r=e.alreadyAppliedFilters||[],o=e.addLength1||!1,s=n.length;!0===i&&(i=["FlateEncode"]);var l=e.additionalKeyValues||[],u=(t=void 0!==a.API.processDataByFilters?a.API.processDataByFilters(n,i):{data:n,reverseChain:[]}).reverseChain+(Array.isArray(r)?r.join(" "):r.toString());0!==t.data.length&&(l.push({key:"Length",value:t.data.length}),!0===o&&l.push({key:"Length1",value:s})),0!=u.length&&(u.split("/").length-1==1?l.push({key:"Filter",value:u}):l.push({key:"Filter",value:"["+u+"]"})),k("<<");for(var c=0;c<l.length;c++)k("/"+l[c].key+" "+l[c].value);k(">>"),0!==t.data.length&&(k("stream"),k(t.data),k("endstream"))},me=A.__private__.putPage=function(e){var t=e.number,n=e.data,i=e.objId,r=e.contentsObjId;ue(i,!0),k("<</Type /Page"),k("/Parent "+e.rootDictionaryObjId+" 0 R"),k("/Resources "+e.resourceDictionaryObjId+" 0 R"),k("/MediaBox ["+parseFloat(v(e.mediaBox.bottomLeftX))+" "+parseFloat(v(e.mediaBox.bottomLeftY))+" "+v(e.mediaBox.topRightX)+" "+v(e.mediaBox.topRightY)+"]"),null!==e.cropBox&&k("/CropBox ["+v(e.cropBox.bottomLeftX)+" "+v(e.cropBox.bottomLeftY)+" "+v(e.cropBox.topRightX)+" "+v(e.cropBox.topRightY)+"]"),null!==e.bleedBox&&k("/BleedBox ["+v(e.bleedBox.bottomLeftX)+" "+v(e.bleedBox.bottomLeftY)+" "+v(e.bleedBox.topRightX)+" "+v(e.bleedBox.topRightY)+"]"),null!==e.trimBox&&k("/TrimBox ["+v(e.trimBox.bottomLeftX)+" "+v(e.trimBox.bottomLeftY)+" "+v(e.trimBox.topRightX)+" "+v(e.trimBox.topRightY)+"]"),null!==e.artBox&&k("/ArtBox ["+v(e.artBox.bottomLeftX)+" "+v(e.artBox.bottomLeftY)+" "+v(e.artBox.topRightX)+" "+v(e.artBox.topRightY)+"]"),"number"==typeof e.userUnit&&1!==e.userUnit&&k("/UserUnit "+e.userUnit),oe.publish("putPage",{objId:i,pageContext:ie[t],pageNumber:t,page:n}),k("/Contents "+r+" 0 R"),k(">>"),k("endobj");var o=n.join("\n");return ue(r,!0),ge({data:o,filters:fe()}),k("endobj"),i},ye=A.__private__.putPages=function(){var e,t,n=[];for(e=1;e<=ne;e++)ie[e].objId=le(),ie[e].contentsObjId=le();for(e=1;e<=ne;e++)n.push(me({number:e,data:H[e],objId:ie[e].objId,contentsObjId:ie[e].contentsObjId,mediaBox:ie[e].mediaBox,cropBox:ie[e].cropBox,bleedBox:ie[e].bleedBox,trimBox:ie[e].trimBox,artBox:ie[e].artBox,userUnit:ie[e].userUnit,rootDictionaryObjId:he,resourceDictionaryObjId:de}));ue(he,!0),k("<</Type /Pages");var i="/Kids [";for(t=0;t<ne;t++)i+=n[t]+" 0 R ";k(i+"]"),k("/Count "+ne),k(">>"),k("endobj"),oe.publish("postPutPages")},ve=function(e,t,n){te.hasOwnProperty(t)||(te[t]={}),te[t][n]=e},we=function(e,t,n,i,r){r=r||!1;var o="F"+(Object.keys(ee).length+1).toString(10),s={id:o,postScriptName:e,fontName:t,fontStyle:n,encoding:i,isStandardFont:r,metadata:{}};return oe.publish("addFont",{font:s,instance:this}),void 0!==o&&(ee[o]=s,ve(o,t,n)),o},_e=A.__private__.pdfEscape=A.pdfEscape=function(e,t){return function(e,t){var n,i,r,o,s,a,l,u,c;if(r=(t=t||{}).sourceEncoding||"Unicode",s=t.outputEncoding,(t.autoencode||s)&&ee[x].metadata&&ee[x].metadata[r]&&ee[x].metadata[r].encoding&&(o=ee[x].metadata[r].encoding,!s&&ee[x].encoding&&(s=ee[x].encoding),!s&&o.codePages&&(s=o.codePages[0]),"string"==typeof s&&(s=o[s]),s)){for(l=!1,a=[],n=0,i=e.length;n<i;n++)(u=s[e.charCodeAt(n)])?a.push(String.fromCharCode(u)):a.push(e[n]),a[n].charCodeAt(0)>>8&&(l=!0);e=a.join("")}for(n=e.length;void 0===l&&0!==n;)e.charCodeAt(n-1)>>8&&(l=!0),n--;if(!l)return e;for(a=t.noBOM?[]:[254,255],n=0,i=e.length;n<i;n++){if((c=(u=e.charCodeAt(n))>>8)>>8)throw new Error("Character at position "+n+" of string '"+e+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");a.push(c),a.push(u-(c<<8))}return String.fromCharCode.apply(void 0,a)}(e,t).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},be=A.__private__.beginPage=function(e,t){var i,r="string"==typeof t&&t.toLowerCase();if("string"==typeof e&&(i=m(e.toLowerCase()))&&(e=i[0],t=i[1]),Array.isArray(e)&&(t=e[1],e=e[0]),(isNaN(e)||isNaN(t))&&(e=n[0],t=n[1]),r){switch(r.substr(0,1)){case"l":e<t&&(r="s");break;case"p":t<e&&(r="s")}"s"===r&&(i=e,e=t,t=i)}(14400<e||14400<t)&&(console.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),e=Math.min(14400,e),t=Math.min(14400,t)),n=[e,t],M=!0,H[++ne]=[],ie[ne]={objId:0,contentsObjId:0,userUnit:Number(c),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(e),topRightY:Number(t)}},Ee(ne)},Ce=function(){be.apply(this,arguments),je(Ve),k(Ze),0!==rt&&k(rt+" J"),0!==st&&k(st+" j"),oe.publish("addPage",{pageNumber:ne})},Ee=function(e){0<e&&e<=ne&&(B=e)},Se=A.__private__.getNumberOfPages=A.getNumberOfPages=function(){return H.length-1},Le=function(e,t,n){var i,r=void 0;return n=n||{},t=void 0!==t?t:ee[x].fontStyle,i=(e=void 0!==e?e:ee[x].fontName).toLowerCase(),void 0!==te[i]&&void 0!==te[i][t]?r=te[i][t]:void 0!==te[e]&&void 0!==te[e][t]?r=te[e][t]:!1===n.disableWarning&&console.warn("Unable to look up font label for font '"+e+"', '"+t+"'. Refer to getFontList() for available fonts."),r||n.noFallback||null==(r=te.times[t])&&(r=te.times.normal),r},Te=A.__private__.putInfo=function(){for(var e in ae(),k("<<"),k("/Producer (jsPDF "+a.version+")"),J)J.hasOwnProperty(e)&&J[e]&&k("/"+e.substr(0,1).toUpperCase()+e.substr(1)+" ("+_e(J[e])+")");k("/CreationDate ("+y+")"),k(">>"),k("endobj")},Ne=A.__private__.putCatalog=function(e){var t=(e=e||{}).rootDictionaryObjId||he;switch(ae(),k("<<"),k("/Type /Catalog"),k("/Pages "+t+" 0 R"),I||(I="fullwidth"),I){case"fullwidth":k("/OpenAction [3 0 R /FitH null]");break;case"fullheight":k("/OpenAction [3 0 R /FitV null]");break;case"fullpage":k("/OpenAction [3 0 R /Fit]");break;case"original":k("/OpenAction [3 0 R /XYZ null null 1]");break;default:var n=""+I;"%"===n.substr(n.length-1)&&(I=parseInt(I)/100),"number"==typeof I&&k("/OpenAction [3 0 R /XYZ null null "+v(I)+"]")}switch(F||(F="continuous"),F){case"continuous":k("/PageLayout /OneColumn");break;case"single":k("/PageLayout /SinglePage");break;case"two":case"twoleft":k("/PageLayout /TwoColumnLeft");break;case"tworight":k("/PageLayout /TwoColumnRight")}O&&k("/PageMode /"+O),oe.publish("putCatalog"),k(">>"),k("endobj")},Ie=A.__private__.putTrailer=function(){k("trailer"),k("<<"),k("/Size "+(Z+1)),k("/Root "+Z+" 0 R"),k("/Info "+(Z-1)+" 0 R"),k("/ID [ <"+_+"> <"+_+"> ]"),k(">>")},Oe=A.__private__.putHeader=function(){k("%PDF-"+p),k("%\xba\xdf\xac\xe0")},Fe=A.__private__.putXRef=function(){var e=1,t="0000000000";for(k("xref"),k("0 "+(Z+1)),k("0000000000 65535 f "),e=1;e<=Z;e++)k("function"==typeof $[e]?(t+$[e]()).slice(-10)+" 00000 n ":void 0!==$[e]?(t+$[e]).slice(-10)+" 00000 n ":"0000000000 00000 n ")},xe=A.__private__.buildDocument=function(){M=!1,Q=Z=0,P=[],$=[],re=[],he=le(),de=le(),oe.publish("buildDocument"),Oe(),ye(),function(){oe.publish("putAdditionalObjects");for(var e=0;e<re.length;e++){var t=re[e];ue(t.objId,!0),k(t.content),k("endobj")}oe.publish("postPutAdditionalObjects")}(),function(){for(var e in ee)ee.hasOwnProperty(e)&&(!1===h||!0===h&&d.hasOwnProperty(e))&&(oe.publish("putFont",{font:t=ee[e],out:k,newObject:ae,putStream:ge}),!0!==t.isAlreadyPutted&&(t.objectNumber=ae(),k("<<"),k("/Type /Font"),k("/BaseFont /"+t.postScriptName),k("/Subtype /Type1"),"string"==typeof t.encoding&&k("/Encoding /"+t.encoding),k("/FirstChar 32"),k("/LastChar 255"),k(">>"),k("endobj")));var t}(),oe.publish("putResources"),ue(de,!0),k("<<"),function(){for(var e in k("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),k("/Font <<"),ee)ee.hasOwnProperty(e)&&(!1===h||!0===h&&d.hasOwnProperty(e))&&k("/"+e+" "+ee[e].objectNumber+" 0 R");k(">>"),k("/XObject <<"),oe.publish("putXobjectDict"),k(">>")}(),k(">>"),k("endobj"),oe.publish("postPutResources"),Te(),Ne();var e=Q;return Fe(),Ie(),k("startxref"),k(""+e),k("%%EOF"),M=!0,P.join("\n")},De=A.__private__.getBlob=function(e){return new Blob([V(e)],{type:"application/pdf"})},Re=A.output=A.__private__.output=((R=function(e,t){t=t||{};var n=xe();switch("string"==typeof t?t={filename:t}:t.filename=t.filename||"generated.pdf",e){case void 0:return n;case"save":A.save(t.filename);break;case"arraybuffer":return V(n);case"blob":return De(n);case"bloburi":case"bloburl":if(void 0!==o.URL&&"function"==typeof o.URL.createObjectURL)return o.URL&&o.URL.createObjectURL(De(n))||void 0;console.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":return"data:application/pdf;filename="+t.filename+";base64,"+btoa(n);case"dataurlnewwindow":var i='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring")+'"></iframe></body></html>',r=o.open();if(null!==r&&r.document.write(i),r||"undefined"==typeof safari)return r;case"datauri":case"dataurl":return o.document.location.href="data:application/pdf;filename="+t.filename+";base64,"+btoa(n);default:return null}}).foo=function(){try{return R.apply(this,arguments)}catch(e){var t=e.stack||"";~t.indexOf(" at ")&&(t=t.split(" at ")[1]);var n="Error in function "+t.split("\n")[0].split("<")[0]+": "+e.message;if(!o.console)throw new Error(n);o.console.error(n,e),o.alert&&alert(n)}},(R.foo.bar=R).foo),Ue=function(e){return!0===Array.isArray(se)&&-1<se.indexOf(e)};switch(t){case"pt":D=1;break;case"mm":D=72/25.4;break;case"cm":D=72/2.54;break;case"in":D=72;break;case"px":D=1==Ue("px_scaling")?.75:96/72;break;case"pc":case"em":D=12;break;case"ex":D=6;break;default:throw new Error("Invalid unit: "+t)}L(),C();var Me=A.__private__.getPageInfo=function(e){if(isNaN(e)||e%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:ie[e].objId,pageNumber:e,pageContext:ie[e]}},He=A.__private__.getPageInfoByObjId=function(e){for(var t in ie)if(ie[t].objId===e)break;if(isNaN(e)||e%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");return Me(t)},Pe=A.__private__.getCurrentPageInfo=function(){return{objId:ie[B].objId,pageNumber:B,pageContext:ie[B]}};A.addPage=function(){return Ce.apply(this,arguments),this},A.setPage=function(){return Ee.apply(this,arguments),this},A.insertPage=function(e){return this.addPage(),this.movePage(B,e),this},A.movePage=function(e,t){if(t<e){for(var n=H[e],i=ie[e],r=e;t<r;r--)H[r]=H[r-1],ie[r]=ie[r-1];H[t]=n,ie[t]=i,this.setPage(t)}else if(e<t){for(n=H[e],i=ie[e],r=e;r<t;r++)H[r]=H[r+1],ie[r]=ie[r+1];H[t]=n,ie[t]=i,this.setPage(t)}return this},A.deletePage=function(){return(function(e){0<e&&e<=ne&&(H.splice(e,1),--ne<B&&(B=ne),this.setPage(B))}).apply(this,arguments),this},A.__private__.text=A.text=function(e,t,n,r){var o;"number"!=typeof e||"number"!=typeof t||"string"!=typeof n&&!Array.isArray(n)||(o=n,n=t,t=e,e=o);var s=arguments[3],a=arguments[4],l=arguments[5];if("object"===i(s)&&null!==s||("string"==typeof a&&(l=a,a=null),"string"==typeof s&&(l=s,s=null),"number"==typeof s&&(a=s,s=null),r={flags:s,angle:a,align:l}),(s=s||{}).noBOM=s.noBOM||!0,s.autoencode=s.autoencode||!0,isNaN(t)||isNaN(n)||null==e)throw new Error("Invalid arguments passed to jsPDF.text");if(0===e.length)return A;var u,c="",h="number"==typeof r.lineHeightFactor?r.lineHeightFactor:ze,A=r.scope||this;function p(e){for(var t,n=e.concat(),i=[],r=n.length;r--;)"string"==typeof(t=n.shift())?i.push(t):Array.isArray(e)&&1===t.length?i.push(t[0]):i.push([t[0],t[1],t[2]]);return i}function f(e,t){var n;if("string"==typeof e)n=t(e)[0];else if(Array.isArray(e)){for(var i,r,o=e.concat(),s=[],a=o.length;a--;)"string"==typeof(i=o.shift())?s.push(t(i)[0]):Array.isArray(i)&&"string"===i[0]&&(r=t(i[0],i[1],i[2]),s.push([r[0],r[1],r[2]]));n=s}return n}var g=!1,m=!0;if("string"==typeof e)g=!0;else if(Array.isArray(e)){for(var y,_=e.concat(),b=[],C=_.length;C--;)("string"!=typeof(y=_.shift())||Array.isArray(y)&&"string"!=typeof y[0])&&(m=!1);g=m}if(!1===g)throw new Error('Type of text must be string or Array. "'+e+'" is not recognized.');var E=ee[x].encoding;"WinAnsiEncoding"!==E&&"StandardEncoding"!==E||(e=f(e,(function(e,t,n){return[(i=e,i=i.split("\t").join(Array(r.TabLen||9).join(" ")),_e(i,s)),t,n];var i}))),"string"==typeof e&&(e=e.match(/[\r?\n]/)?e.split(/\r\n|\r|\n/g):[e]);var S=G/A.internal.scaleFactor,L=S*(ze-1);switch(r.baseline){case"bottom":n-=L;break;case"top":n+=S-L;break;case"hanging":n+=S-2*L;break;case"middle":n+=S/2-L}0<(z=r.maxWidth||0)&&("string"==typeof e?e=A.splitTextToSize(e,z):"[object Array]"===Object.prototype.toString.call(e)&&(e=A.splitTextToSize(e.join(" "),z)));var T={text:e,x:t,y:n,options:r,mutex:{pdfEscape:_e,activeFontKey:x,fonts:ee,activeFontSize:G}};oe.publish("preProcessText",T),e=T.text,a=(r=T.options).angle;var B=A.internal.scaleFactor,N=[];if(a){a*=Math.PI/180;var I=Math.cos(a),O=Math.sin(a);N=[v(I),v(O),v(-1*O),v(I)]}void 0!==(Q=r.charSpace)&&(c+=w(Q*B)+" Tc\n");var F=-1,D=void 0!==r.renderingMode?r.renderingMode:r.stroke,R=A.internal.getCurrentPageInfo().pageContext;switch(D){case 0:case!1:case"fill":F=0;break;case 1:case!0:case"stroke":F=1;break;case 2:case"fillThenStroke":F=2;break;case 3:case"invisible":F=3;break;case 4:case"fillAndAddForClipping":F=4;break;case 5:case"strokeAndAddPathForClipping":F=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":F=6;break;case 7:case"addToPathForClipping":F=7}var U=void 0!==R.usedRenderingMode?R.usedRenderingMode:-1;-1!==F?c+=F+" Tr\n":-1!==U&&(c+="0 Tr\n"),-1!==F&&(R.usedRenderingMode=F),l=r.align||"left";var M=G*h,H=A.internal.pageSize.getWidth(),P=(B=A.internal.scaleFactor,ee[x]),Q=r.charSpace||nt,z=r.maxWidth||0,V=(s={},[]);if("[object Array]"===Object.prototype.toString.call(e)){var j,q;b=p(e),"left"!==l&&(q=b.map((function(e){return A.getStringUnitWidth(e,{font:P,charSpace:Q,fontSize:G})*G/B}))),Math.max.apply(Math,q);var K,X=0;if("right"===l){t-=q[0],e=[];var Y=0;for(C=b.length;Y<C;Y++)j=0===Y?(K=Ke(t),Xe(n)):(K=(X-q[Y])*B,-M),e.push([b[Y],K,j]),X=q[Y]}else if("center"===l)for(t-=q[0]/2,e=[],Y=0,C=b.length;Y<C;Y++)j=0===Y?(K=Ke(t),Xe(n)):(K=(X-q[Y])/2*B,-M),e.push([b[Y],K,j]),X=q[Y];else if("left"===l)for(e=[],Y=0,C=b.length;Y<C;Y++)j=0===Y?Xe(n):-M,K=0===Y?Ke(t):0,e.push(b[Y]);else{if("justify"!==l)throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(e=[],z=0!==z?z:H,Y=0,C=b.length;Y<C;Y++)j=0===Y?Xe(n):-M,K=0===Y?Ke(t):0,Y<C-1&&V.push(((z-q[Y])/(b[Y].split(" ").length-1)*B).toFixed(2)),e.push([b[Y],K,j])}}!0===("boolean"==typeof r.R2L?r.R2L:W)&&(e=f(e,(function(e,t,n){return[e.split("").reverse().join(""),t,n]}))),oe.publish("postProcessText",T={text:e,x:t,y:n,options:r,mutex:{pdfEscape:_e,activeFontKey:x,fonts:ee,activeFontSize:G}}),u=T.mutex.isHex,b=p(e=T.text),e=[];var J,Z,$,te=0,ne=(C=b.length,"");for(Y=0;Y<C;Y++)ne="",Array.isArray(b[Y])?(J=parseFloat(b[Y][1]),Z=parseFloat(b[Y][2]),$=(u?"<":"(")+b[Y][0]+(u?">":")"),te=1):(J=Ke(t),Z=Xe(n),$=(u?"<":"(")+b[Y]+(u?">":")")),void 0!==V&&void 0!==V[Y]&&(ne=V[Y]+" Tw\n"),e.push(0!==N.length&&0===Y?ne+N.join(" ")+" "+J.toFixed(2)+" "+Z.toFixed(2)+" Tm\n"+$:1===te||0===te&&0===Y?ne+J.toFixed(2)+" "+Z.toFixed(2)+" Td\n"+$:ne+$);e=e.join(0===te?" Tj\nT* ":" Tj\n"),e+=" Tj\n";var ie="BT\n/"+x+" "+G+" Tf\n"+(G*h).toFixed(2)+" TL\n"+et+"\n";return ie+=c,ie+=e,k(ie+="ET"),d[x]=!0,A},A.__private__.lstext=A.lstext=function(e,t,n,i){return console.warn("jsPDF.lstext is deprecated"),this.text(e,t,n,{charSpace:i})},A.__private__.clip=A.clip=function(e){k("evenodd"===e?"W*":"W"),k("n")},A.__private__.clip_fixed=A.clip_fixed=function(e){console.log("clip_fixed is deprecated"),A.clip(e)};var Qe=A.__private__.isValidStyle=function(e){var t=!1;return-1!==[void 0,null,"S","F","DF","FD","f","f*","B","B*"].indexOf(e)&&(t=!0),t},ke=A.__private__.getStyle=function(e){var t="S";return"F"===e?t="f":"FD"===e||"DF"===e?t="B":"f"!==e&&"f*"!==e&&"B"!==e&&"B*"!==e||(t=e),t};A.__private__.line=A.line=function(e,t,n,i){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(i))throw new Error("Invalid arguments passed to jsPDF.line");return this.lines([[n-e,i-t]],e,t)},A.__private__.lines=A.lines=function(e,t,n,i,r,o){var s,a,l,u,c,h,d,A,p,f,g,m;if("number"==typeof e&&(m=n,n=t,t=e,e=m),i=i||[1,1],o=o||!1,isNaN(t)||isNaN(n)||!Array.isArray(e)||!Array.isArray(i)||!Qe(r)||"boolean"!=typeof o)throw new Error("Invalid arguments passed to jsPDF.lines");for(k(w(Ke(t))+" "+w(Xe(n))+" m "),s=i[0],a=i[1],u=e.length,f=t,g=n,l=0;l<u;l++)2===(c=e[l]).length?(g=c[1]*a+g,k(w(Ke(f=c[0]*s+f))+" "+w(Xe(g))+" l")):(h=c[0]*s+f,d=c[1]*a+g,A=c[2]*s+f,p=c[3]*a+g,f=c[4]*s+f,g=c[5]*a+g,k(w(Ke(h))+" "+w(Xe(d))+" "+w(Ke(A))+" "+w(Xe(p))+" "+w(Ke(f))+" "+w(Xe(g))+" c"));return o&&k(" h"),null!==r&&k(ke(r)),this},A.__private__.rect=A.rect=function(e,t,n,i,r){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(i)||!Qe(r))throw new Error("Invalid arguments passed to jsPDF.rect");return k([v(Ke(e)),v(Xe(t)),v(n*D),v(-i*D),"re"].join(" ")),null!==r&&k(ke(r)),this},A.__private__.triangle=A.triangle=function(e,t,n,i,r,o,s){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(i)||isNaN(r)||isNaN(o)||!Qe(s))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[n-e,i-t],[r-n,o-i],[e-r,t-o]],e,t,[1,1],s,!0),this},A.__private__.roundedRect=A.roundedRect=function(e,t,n,i,r,o,s){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(i)||isNaN(r)||isNaN(o)||!Qe(s))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var a=4/3*(Math.SQRT2-1);return this.lines([[n-2*r,0],[r*a,0,r,o-o*a,r,o],[0,i-2*o],[0,o*a,-r*a,o,-r,o],[2*r-n,0],[-r*a,0,-r,-o*a,-r,-o],[0,2*o-i],[0,-o*a,r*a,-o,r,-o]],e+r,t,[1,1],s),this},A.__private__.ellipse=A.ellipse=function(e,t,n,i,r){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(i)||!Qe(r))throw new Error("Invalid arguments passed to jsPDF.ellipse");var o=4/3*(Math.SQRT2-1)*n,s=4/3*(Math.SQRT2-1)*i;return k([v(Ke(e+n)),v(Xe(t)),"m",v(Ke(e+n)),v(Xe(t-s)),v(Ke(e+o)),v(Xe(t-i)),v(Ke(e)),v(Xe(t-i)),"c"].join(" ")),k([v(Ke(e-o)),v(Xe(t-i)),v(Ke(e-n)),v(Xe(t-s)),v(Ke(e-n)),v(Xe(t)),"c"].join(" ")),k([v(Ke(e-n)),v(Xe(t+s)),v(Ke(e-o)),v(Xe(t+i)),v(Ke(e)),v(Xe(t+i)),"c"].join(" ")),k([v(Ke(e+o)),v(Xe(t+i)),v(Ke(e+n)),v(Xe(t+s)),v(Ke(e+n)),v(Xe(t)),"c"].join(" ")),null!==r&&k(ke(r)),this},A.__private__.circle=A.circle=function(e,t,n,i){if(isNaN(e)||isNaN(t)||isNaN(n)||!Qe(i))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(e,t,n,n,i)},A.setFont=function(e,t){return x=Le(e,t,{disableWarning:!1}),this},A.setFontStyle=A.setFontType=function(e){return x=Le(void 0,e),this},A.__private__.getFontList=A.getFontList=function(){var e,t,n,i={};for(e in te)if(te.hasOwnProperty(e))for(t in i[e]=n=[],te[e])te[e].hasOwnProperty(t)&&n.push(t);return i},A.addFont=function(e,t,n,i){we.call(this,e,t,n,i=i||"Identity-H")};var ze,Ve=l.lineWidth||.200025,je=A.__private__.setLineWidth=A.setLineWidth=function(e){return k((e*D).toFixed(2)+" w"),this},Ge=(A.__private__.setLineDash=a.API.setLineDash=function(e,t){if(e=e||[],t=t||0,isNaN(t)||!Array.isArray(e))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return e=e.map((function(e){return(e*D).toFixed(3)})).join(" "),t=parseFloat((t*D).toFixed(3)),k("["+e+"] "+t+" d"),this},A.__private__.getLineHeight=A.getLineHeight=function(){return G*ze}),qe=(Ge=A.__private__.getLineHeight=A.getLineHeight=function(){return G*ze},A.__private__.setLineHeightFactor=A.setLineHeightFactor=function(e){return"number"==typeof(e=e||1.15)&&(ze=e),this}),We=A.__private__.getLineHeightFactor=A.getLineHeightFactor=function(){return ze};qe(l.lineHeight);var Ke=A.__private__.getHorizontalCoordinate=function(e){return e*D},Xe=A.__private__.getVerticalCoordinate=function(e){return ie[B].mediaBox.topRightY-ie[B].mediaBox.bottomLeftY-e*D},Ye=A.__private__.getHorizontalCoordinateString=function(e){return v(e*D)},Je=A.__private__.getVerticalCoordinateString=function(e){return v(ie[B].mediaBox.topRightY-ie[B].mediaBox.bottomLeftY-e*D)},Ze=l.strokeColor||"0 G",$e=(A.__private__.getStrokeColor=A.getDrawColor=function(){return Ae(Ze)},A.__private__.setStrokeColor=A.setDrawColor=function(e,t,n,i){return Ze=pe({ch1:e,ch2:t,ch3:n,ch4:i,pdfColorType:"draw",precision:2}),k(Ze),this},l.fillColor||"0 g"),et=(A.__private__.getFillColor=A.getFillColor=function(){return Ae($e)},A.__private__.setFillColor=A.setFillColor=function(e,t,n,i){return $e=pe({ch1:e,ch2:t,ch3:n,ch4:i,pdfColorType:"fill",precision:2}),k($e),this},l.textColor||"0 g"),tt=A.__private__.getTextColor=A.getTextColor=function(){return Ae(et)},nt=(A.__private__.setTextColor=A.setTextColor=function(e,t,n,i){return et=pe({ch1:e,ch2:t,ch3:n,ch4:i,pdfColorType:"text",precision:3}),this},l.charSpace||0),it=A.__private__.getCharSpace=A.getCharSpace=function(){return nt},rt=(A.__private__.setCharSpace=A.setCharSpace=function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return nt=e,this},0);A.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},A.__private__.setLineCap=A.setLineCap=function(e){var t=A.CapJoinStyles[e];if(void 0===t)throw new Error("Line cap style of '"+e+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return k((rt=t)+" J"),this};var ot,st=0;for(var at in A.__private__.setLineJoin=A.setLineJoin=function(e){var t=A.CapJoinStyles[e];if(void 0===t)throw new Error("Line join style of '"+e+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return k((st=t)+" j"),this},A.__private__.setMiterLimit=A.setMiterLimit=function(e){if(e=e||0,isNaN(e))throw new Error("Invalid argument passed to jsPDF.setMiterLimit");return ot=parseFloat(v(e*D)),k(ot+" M"),this},A.save=function(e,t){if(e=e||"generated.pdf",(t=t||{}).returnPromise=t.returnPromise||!1,!1!==t.returnPromise)return new Promise((function(t,n){try{var i=Be(De(xe()),e);"function"==typeof Be.unload&&o.setTimeout&&setTimeout(Be.unload,911),t(i)}catch(t){n(t.message)}}));Be(De(xe()),e),"function"==typeof Be.unload&&o.setTimeout&&setTimeout(Be.unload,911)},a.API)a.API.hasOwnProperty(at)&&("events"===at&&a.API.events.length?function(e,t){var n,i;for(i=t.length-1;-1!==i;i--)e.subscribe.apply(e,[t[i][0]].concat("function"==typeof(n=t[i][1])?[n]:n))}(oe,a.API.events):A[at]=a.API[at]);return A.internal={pdfEscape:_e,getStyle:ke,getFont:function(){return ee[Le.apply(A,arguments)]},getFontSize:q,getCharSpace:it,getTextColor:tt,getLineHeight:Ge,getLineHeightFactor:We,write:z,getHorizontalCoordinate:Ke,getVerticalCoordinate:Xe,getCoordinateString:Ye,getVerticalCoordinateString:Je,collections:{},newObject:ae,newAdditionalObject:ce,newObjectDeferred:le,newObjectDeferredBegin:ue,getFilters:fe,putStream:ge,events:oe,scaleFactor:D,pageSize:{getWidth:function(){return(ie[B].mediaBox.topRightX-ie[B].mediaBox.bottomLeftX)/D},setWidth:function(e){ie[B].mediaBox.topRightX=e*D+ie[B].mediaBox.bottomLeftX},getHeight:function(){return(ie[B].mediaBox.topRightY-ie[B].mediaBox.bottomLeftY)/D},setHeight:function(e){ie[B].mediaBox.topRightY=e*D+ie[B].mediaBox.bottomLeftY}},output:Re,getNumberOfPages:Se,pages:H,out:k,f2:v,f3:w,getPageInfo:Me,getPageInfoByObjId:He,getCurrentPageInfo:Pe,getPDFVersion:f,hasHotfix:Ue},Object.defineProperty(A.internal.pageSize,"width",{get:function(){return(ie[B].mediaBox.topRightX-ie[B].mediaBox.bottomLeftX)/D},set:function(e){ie[B].mediaBox.topRightX=e*D+ie[B].mediaBox.bottomLeftX},enumerable:!0,configurable:!0}),Object.defineProperty(A.internal.pageSize,"height",{get:function(){return(ie[B].mediaBox.topRightY-ie[B].mediaBox.bottomLeftY)/D},set:function(e){ie[B].mediaBox.topRightY=e*D+ie[B].mediaBox.bottomLeftY},enumerable:!0,configurable:!0}),function(e){for(var t=0,n=j.length;t<n;t++){var i=we(e[t][0],e[t][1],e[t][2],j[t][3],!0);d[i]=!0;var r=e[t][0].split("-");ve(i,r[0],r[1]||"")}oe.publish("addFonts",{fonts:ee,dictionary:te})}(j),x="F1",Ce(n,e),oe.publish("initialized"),A}return a.API={events:[]},a.version="1.5.3",o.jsPDF=a,void 0!==(r=(function(){return a}).call(t,n,t,e))&&(e.exports=r),a}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||"undefined"!=typeof global&&global||Function('return typeof this === "object" && this.content')()||Function("return this")());(function(e,t){var n,r=1,o=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},s=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},a=function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.f2");return e.toFixed(2)},l=function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.f2");return e.toFixed(5)};e.__acroform__={};var u=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},c=function(e){return e*r},h=function(e){return e/r},d=function(e){var t=new D,n=K.internal.getHeight(e)||0,i=K.internal.getWidth(e)||0;return t.BBox=[0,0,Number(a(i)),Number(a(n))],t},A=e.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|1<<t},p=e.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&~(1<<t)},f=e.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return 0==(e&1<<t)?0:1},g=e.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return f(e,t-1)},m=e.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return A(e,t-1)},y=e.__acroform__.clearBitForPdf=function(e,t,n){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return p(e,t-1)},v=e.__acroform__.calculateCoordinates=function(e){var t=this.internal.getHorizontalCoordinate,n=this.internal.getVerticalCoordinate,i=e[0],r=e[1],o=e[2],s=e[3],l={};return l.lowerLeft_X=t(i)||0,l.lowerLeft_Y=n(r+s)||0,l.upperRight_X=t(i+o)||0,l.upperRight_Y=n(r)||0,[Number(a(l.lowerLeft_X)),Number(a(l.lowerLeft_Y)),Number(a(l.upperRight_X)),Number(a(l.upperRight_Y))]},w=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],i=_(e,e.V||e.DV),r=n.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(n.__private__.encodeColorString(e.color)),t.push("/"+r+" "+a(i.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(i.text),t.push("ET"),t.push("Q"),t.push("EMC");var o=new d(e);return o.stream=t.join("\n"),o}},_=function(e,t){var i=e.maxFontSize||12,r={text:"",fontSize:""},s=(t=")"==(t="("==t.substr(0,1)?t.substr(1):t).substr(t.length-1)?t.substr(0,t.length-1):t).split(" "),l=(n.__private__.encodeColorString(e.color),i),u=K.internal.getHeight(e)||0;u=u<0?-u:u;var c=K.internal.getWidth(e)||0;c=c<0?-c:c;var h=function(t,n,i){return t+1<s.length&&b(n+" "+s[t+1],e,i).width<=c-4};l++;e:for(;;){t="";var d=b("3",e,--l).height,A=e.multiline?u-l:(u-d)/2,p=-2,f=A+=2,g=0,m=0,y=0;if(l<=0){t="(...) Tj\n",t+="% Width of Text: "+b(t,e,l=12).width+", FieldWidth:"+c+"\n";break}y=b(s[0]+" ",e,l).width;var v="",w=0;for(var _ in s)if(s.hasOwnProperty(_)){v=" "==(v+=s[_]+" ").substr(v.length-1)?v.substr(0,v.length-1):v;var C=parseInt(_);y=b(v+" ",e,l).width;var E=h(C,v,l),S=_>=s.length-1;if(E&&!S){v+=" ";continue}if(E||S){if(S)m=C;else if(e.multiline&&u<(d+2)*(w+2)+2)continue e}else{if(!e.multiline)continue e;if(u<(d+2)*(w+2)+2)continue e;m=C}for(var L="",T=g;T<=m;T++)L+=s[T]+" ";switch(L=" "==L.substr(L.length-1)?L.substr(0,L.length-1):L,y=b(L,e,l).width,e.textAlign){case"right":p=c-y-2;break;case"center":p=(c-y)/2;break;case"left":default:p=2}t+=a(p)+" "+a(f)+" Td\n",t+="("+o(L)+") Tj\n",t+=-a(p)+" 0 Td\n",f=-(l+2),y=0,g=m+1,w++,v=""}break}return r.text=t,r.fontSize=l,r},b=function(e,t,i){var r=n.internal.getFont(t.fontName,t.fontStyle),o=n.getStringUnitWidth(e,{font:r,fontSize:parseFloat(i),charSpace:0})*parseFloat(i);return{height:n.getStringUnitWidth("3",{font:r,fontSize:parseFloat(i),charSpace:0})*parseFloat(i)*1.5,width:o}},C={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},E=function(){n.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var e=n.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var t in e)if(e.hasOwnProperty(t)){var i=e[t];i.objId=void 0,i.hasAnnotation&&S.call(n,i)}},S=function(e){var t={type:"reference",object:e};void 0===n.internal.getPageInfo(e.page).pageContext.annotations.find((function(e){return e.type===t.type&&e.object===t.object}))&&n.internal.getPageInfo(e.page).pageContext.annotations.push(t)},L=function(){if(void 0===n.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("putCatalogCallback: Root missing.");n.internal.write("/AcroForm "+n.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")},T=function(){n.internal.events.unsubscribe(n.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete n.internal.acroformPlugin.acroFormDictionaryRoot._eventID,n.internal.acroformPlugin.printedOut=!0},B=function(e){var t=!e;for(var r in e||(n.internal.newObjectDeferredBegin(n.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),n.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),e=e||n.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(e.hasOwnProperty(r)){var o=e[r],s=[],a=o.Rect;if(o.Rect&&(o.Rect=v.call(this,o.Rect)),n.internal.newObjectDeferredBegin(o.objId,!0),o.DA=K.createDefaultAppearanceStream(o),"object"===i(o)&&"function"==typeof o.getKeyValueListForStream&&(s=o.getKeyValueListForStream()),o.Rect=a,o.hasAppearanceStream&&!o.appearanceStreamContent){var l=w.call(this,o);s.push({key:"AP",value:"<</N "+l+">>"}),n.internal.acroformPlugin.xForms.push(l)}if(o.appearanceStreamContent){var u="";for(var c in o.appearanceStreamContent)if(o.appearanceStreamContent.hasOwnProperty(c)){var h=o.appearanceStreamContent[c];if(u+="/"+c+" ",u+="<<",1<=Object.keys(h).length||Array.isArray(h))for(var r in h){var d;h.hasOwnProperty(r)&&("function"==typeof(d=h[r])&&(d=d.call(this,o)),u+="/"+r+" "+d+" ",0<=n.internal.acroformPlugin.xForms.indexOf(d)||n.internal.acroformPlugin.xForms.push(d))}else"function"==typeof(d=h)&&(d=d.call(this,o)),u+="/"+r+" "+d,0<=n.internal.acroformPlugin.xForms.indexOf(d)||n.internal.acroformPlugin.xForms.push(d);u+=">>"}s.push({key:"AP",value:"<<\n"+u+">>"})}n.internal.putStream({additionalKeyValues:s}),n.internal.out("endobj")}t&&N.call(this,n.internal.acroformPlugin.xForms)},N=function(e){for(var t in e)if(e.hasOwnProperty(t)){var r=t,o=e[t];n.internal.newObjectDeferredBegin(o&&o.objId,!0),"object"===i(o)&&"function"==typeof o.putStream&&o.putStream(),delete e[r]}},I=function(){if(void 0!==this.internal&&(void 0===this.internal.acroformPlugin||!1===this.internal.acroformPlugin.isInitialized)){if(n=this,U.FieldNum=0,this.internal.acroformPlugin=JSON.parse(JSON.stringify(C)),this.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");r=n.internal.scaleFactor,n.internal.acroformPlugin.acroFormDictionaryRoot=new R,n.internal.acroformPlugin.acroFormDictionaryRoot._eventID=n.internal.events.subscribe("postPutResources",T),n.internal.events.subscribe("buildDocument",E),n.internal.events.subscribe("putCatalog",L),n.internal.events.subscribe("postPutPages",B),n.internal.acroformPlugin.isInitialized=!0}},O=e.__acroform__.arrayToPdfArray=function(e){if(Array.isArray(e)){for(var t="[",n=0;n<e.length;n++)switch(0!==n&&(t+=" "),i(e[n])){case"boolean":case"number":case"object":t+=e[n].toString();break;case"string":"/"!==e[n].substr(0,1)?t+="("+o(e[n].toString())+")":t+=e[n].toString()}return t+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},F=function(e){return(e=e||"").toString(),"("+o(e)+")"},x=function(){var e;Object.defineProperty(this,"objId",{configurable:!0,get:function(){if(e||(e=n.internal.newObjectDeferred()),!e)throw new Error("AcroFormPDFObject: Couldn't create Object ID");return e},set:function(t){e=t}})};x.prototype.toString=function(){return this.objId+" 0 R"},x.prototype.putStream=function(){var e=this.getKeyValueListForStream();n.internal.putStream({data:this.stream,additionalKeyValues:e}),n.internal.out("endobj")},x.prototype.getKeyValueListForStream=function(){return function(e){var t=[],n=Object.getOwnPropertyNames(e).filter((function(e){return"content"!=e&&"appearanceStreamContent"!=e&&"_"!=e.substring(0,1)}));for(var i in n)if(!1===Object.getOwnPropertyDescriptor(e,n[i]).configurable){var r=n[i],o=e[r];o&&(Array.isArray(o)?t.push({key:r,value:O(o)}):o instanceof x?t.push({key:r,value:o.objId+" 0 R"}):"function"!=typeof o&&t.push({key:r,value:o}))}return t}(this)};var D=function(){x.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writeable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writeable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writeable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,writeable:!0,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writeable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){e=t.trim()},get:function(){return e||null}})};u(D,x);var R=function(){x.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return 0<t.length?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e)return"("+e+")"},set:function(t){e=t}})};u(R,x);var U=function e(){x.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(e){if(isNaN(e))throw new Error('Invalid value "'+e+'" for attribute F supplied.');t=e}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return Boolean(g(t,3))},set:function(e){this.F=!0===Boolean(e)?m(t,3):y(t,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(e){if(isNaN(e))throw new Error('Invalid value "'+e+'" for attribute Ff supplied.');n=e}});var i=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(0!==i.length)return i},set:function(e){i=void 0!==e?e:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[0])?0:h(i[0])},set:function(e){i[0]=c(e)}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[1])?0:h(i[1])},set:function(e){i[1]=c(e)}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[2])?0:h(i[2])},set:function(e){i[2]=c(e)}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[3])?0:h(i[3])},set:function(e){i[3]=c(e)}});var r="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return r},set:function(e){switch(e){case"/Btn":case"/Tx":case"/Ch":case"/Sig":r=e;break;default:throw new Error('Invalid value "'+e+'" for attribute FT supplied.')}}});var a=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!a||a.length<1){if(this instanceof j)return;a="FieldObject"+e.FieldNum++}return"("+o(a)+")"},set:function(e){a=e.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return a},set:function(e){a=e}});var l="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return l},set:function(e){l=e}});var u="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return u},set:function(e){u=e}});var d=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return h(d)},set:function(e){d=c(e)}});var A=50;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return h(A)},set:function(e){A=c(e)}});var p="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return p},set:function(e){p=e}});var f="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!f||this instanceof j||this instanceof q))return F(f)},set:function(e){e=e.toString(),f=e}});var v=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(v)return this instanceof k==0?F(v):v},set:function(e){e=e.toString(),v=this instanceof k==0?"("===e.substr(0,1)?s(e.substr(1,e.length-2)):s(e):e}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof k==1?s(v.substr(1,v.length-1)):v},set:function(e){e=e.toString(),v=this instanceof k==1?"/"+e:e}});var w=null;Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(w)return this instanceof k==0?F(w):w},set:function(e){e=e.toString(),w=this instanceof k==0?"("===e.substr(0,1)?s(e.substr(1,e.length-2)):s(e):e}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof k==1?s(w.substr(1,w.length-1)):w},set:function(e){e=e.toString(),w=this instanceof k==1?"/"+e:e}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var _,b=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,writeable:!0,get:function(){return b},set:function(e){e=Boolean(e),b=e}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,writeable:!0,get:function(){if(_)return _},set:function(e){_=e}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return Boolean(g(this.Ff,1))},set:function(e){this.Ff=!0===Boolean(e)?m(this.Ff,1):y(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return Boolean(g(this.Ff,2))},set:function(e){this.Ff=!0===Boolean(e)?m(this.Ff,2):y(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return Boolean(g(this.Ff,3))},set:function(e){this.Ff=!0===Boolean(e)?m(this.Ff,3):y(this.Ff,3)}});var C=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(null!==C)return C},set:function(e){if(-1===[0,1,2].indexOf(e))throw new Error('Invalid value "'+e+'" for attribute Q supplied.');C=e}}),Object.defineProperty(this,"textAlign",{get:function(){var e="left";switch(C){case 0:default:e="left";break;case 1:e="center";break;case 2:e="right"}return e},configurable:!0,enumerable:!0,set:function(e){switch(e){case"right":case 2:C=2;break;case"center":case 1:C=1;break;case"left":case 0:default:C=0}}})};u(U,x);var M=function(){U.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){e=t}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return O(t)},set:function(e){var n,i;i=[],"string"==typeof(n=e)&&(i=function(e,t,n){n||(n=1);for(var i,r=[];i=t.exec(e);)r.push(i[n]);return r}(n,/\((.*?)\)/g)),t=i}}),this.getOptions=function(){return t},this.setOptions=function(e){t=e,this.sort&&t.sort()},this.addOption=function(e){e=(e=e||"").toString(),t.push(e),this.sort&&t.sort()},this.removeOption=function(e,n){for(n=n||!1,e=(e=e||"").toString();-1!==t.indexOf(e)&&(t.splice(t.indexOf(e),1),!1!==n););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return Boolean(g(this.Ff,18))},set:function(e){this.Ff=!0===Boolean(e)?m(this.Ff,18):y(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return Boolean(g(this.Ff,19))},set:function(e){!0===this.combo&&(this.Ff=!0===Boolean(e)?m(this.Ff,19):y(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return Boolean(g(this.Ff,20))},set:function(e){!0===Boolean(e)?(this.Ff=m(this.Ff,20),t.sort()):this.Ff=y(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return Boolean(g(this.Ff,22))},set:function(e){this.Ff=!0===Boolean(e)?m(this.Ff,22):y(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return Boolean(g(this.Ff,23))},set:function(e){this.Ff=!0===Boolean(e)?m(this.Ff,23):y(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return Boolean(g(this.Ff,27))},set:function(e){this.Ff=!0===Boolean(e)?m(this.Ff,27):y(this.Ff,27)}}),this.hasAppearanceStream=!1};u(M,U);var H=function(){M.call(this),this.fontName="helvetica",this.combo=!1};u(H,M);var P=function(){H.call(this),this.combo=!0};u(P,H);var Q=function(){P.call(this),this.edit=!0};u(Q,P);var k=function(){U.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return Boolean(g(this.Ff,15))},set:function(e){this.Ff=!0===Boolean(e)?m(this.Ff,15):y(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return Boolean(g(this.Ff,16))},set:function(e){this.Ff=!0===Boolean(e)?m(this.Ff,16):y(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return Boolean(g(this.Ff,17))},set:function(e){this.Ff=!0===Boolean(e)?m(this.Ff,17):y(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return Boolean(g(this.Ff,26))},set:function(e){this.Ff=!0===Boolean(e)?m(this.Ff,26):y(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){if(0!==Object.keys(t).length){var e,n=[];for(e in n.push("<<"),t)n.push("/"+e+" ("+t[e]+")");return n.push(">>"),n.join("\n")}},set:function(e){"object"===i(e)&&(t=e)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(e){"string"==typeof e&&(t.CA=e)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(t){e="/"+t}})};u(k,U);var z=function(){k.call(this),this.pushButton=!0};u(z,k);var V=function(){k.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=void 0!==t?t:[]}})};u(V,k);var j=function(){var e,t;U.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(e){t=e}});var n,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var e,t=[];for(e in t.push("<<"),r)t.push("/"+e+" ("+r[e]+")");return t.push(">>"),t.join("\n")},set:function(e){"object"===i(e)&&(r=e)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(e){"string"==typeof e&&(r.CA=e)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(e){n=e}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(e){n="/"+e}}),this.optionName=name,this.caption="l",this.appearanceState="Off",this._AppearanceType=K.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(name)};u(j,U),V.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var n=this.Kids[t];n.appearanceStreamContent=e.createAppearanceStream(n.optionName),n.caption=e.getCA()}},V.prototype.createOption=function(e){var t=new j;return t.Parent=this,t.optionName=e,this.Kids.push(t),X.call(this,t),t};var G=function(){k.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=K.CheckBox.createAppearanceStream()};u(G,k);var q=function(){U.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return Boolean(g(this.Ff,13))},set:function(e){this.Ff=!0===Boolean(e)?m(this.Ff,13):y(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return Boolean(g(this.Ff,21))},set:function(e){this.Ff=!0===Boolean(e)?m(this.Ff,21):y(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return Boolean(g(this.Ff,23))},set:function(e){this.Ff=!0===Boolean(e)?m(this.Ff,23):y(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return Boolean(g(this.Ff,24))},set:function(e){this.Ff=!0===Boolean(e)?m(this.Ff,24):y(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return Boolean(g(this.Ff,25))},set:function(e){this.Ff=!0===Boolean(e)?m(this.Ff,25):y(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return Boolean(g(this.Ff,26))},set:function(e){this.Ff=!0===Boolean(e)?m(this.Ff,26):y(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};u(q,U);var W=function(){q.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return Boolean(g(this.Ff,14))},set:function(e){this.Ff=!0===Boolean(e)?m(this.Ff,14):y(this.Ff,14)}}),this.password=!0};u(W,q);var K={CheckBox:{createAppearanceStream:function(){return{N:{On:K.CheckBox.YesNormal},D:{On:K.CheckBox.YesPushDown,Off:K.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=d(e),i=[],r=n.internal.getFont(e.fontName,e.fontStyle).id,o=n.__private__.encodeColorString(e.color),s=_(e,e.caption);return i.push("0.749023 g"),i.push("0 0 "+a(K.internal.getWidth(e))+" "+a(K.internal.getHeight(e))+" re"),i.push("f"),i.push("BMC"),i.push("q"),i.push("0 0 1 rg"),i.push("/"+r+" "+a(s.fontSize)+" Tf "+o),i.push("BT"),i.push(s.text),i.push("ET"),i.push("Q"),i.push("EMC"),t.stream=i.join("\n"),t},YesNormal:function(e){var t=d(e),i=n.internal.getFont(e.fontName,e.fontStyle).id,r=n.__private__.encodeColorString(e.color),o=[],s=K.internal.getHeight(e),l=K.internal.getWidth(e),u=_(e,e.caption);return o.push("1 g"),o.push("0 0 "+a(l)+" "+a(s)+" re"),o.push("f"),o.push("q"),o.push("0 0 1 rg"),o.push("0 0 "+a(l-1)+" "+a(s-1)+" re"),o.push("W"),o.push("n"),o.push("0 g"),o.push("BT"),o.push("/"+i+" "+a(u.fontSize)+" Tf "+r),o.push(u.text),o.push("ET"),o.push("Q"),t.stream=o.join("\n"),t},OffPushDown:function(e){var t=d(e),n=[];return n.push("0.749023 g"),n.push("0 0 "+a(K.internal.getWidth(e))+" "+a(K.internal.getHeight(e))+" re"),n.push("f"),t.stream=n.join("\n"),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:K.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=K.RadioButton.Circle.YesNormal,t.D[e]=K.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=d(e),n=[],i=K.internal.getWidth(e)<=K.internal.getHeight(e)?K.internal.getWidth(e)/4:K.internal.getHeight(e)/4;i=Number((.9*i).toFixed(5));var r=Number((i*K.internal.Bezier_C).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+l(K.internal.getWidth(e)/2)+" "+l(K.internal.getHeight(e)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+r+" "+r+" "+i+" 0 "+i+" c"),n.push("-"+r+" "+i+" -"+i+" "+r+" -"+i+" 0 c"),n.push("-"+i+" -"+r+" -"+r+" -"+i+" 0 -"+i+" c"),n.push(r+" -"+i+" "+i+" -"+r+" "+i+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join("\n"),t},YesPushDown:function(e){var t=d(e),n=[],i=K.internal.getWidth(e)<=K.internal.getHeight(e)?K.internal.getWidth(e)/4:K.internal.getHeight(e)/4,r=(i=Number((.9*i).toFixed(5)),Number((2*i).toFixed(5))),o=Number((r*K.internal.Bezier_C).toFixed(5)),s=Number((i*K.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+l(K.internal.getWidth(e)/2)+" "+l(K.internal.getHeight(e)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+o+" "+o+" "+r+" 0 "+r+" c"),n.push("-"+o+" "+r+" -"+r+" "+o+" -"+r+" 0 c"),n.push("-"+r+" -"+o+" -"+o+" -"+r+" 0 -"+r+" c"),n.push(o+" -"+r+" "+r+" -"+o+" "+r+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+l(K.internal.getWidth(e)/2)+" "+l(K.internal.getHeight(e)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),n.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),n.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),n.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join("\n"),t},OffPushDown:function(e){var t=d(e),n=[],i=K.internal.getWidth(e)<=K.internal.getHeight(e)?K.internal.getWidth(e)/4:K.internal.getHeight(e)/4,r=(i=Number((.9*i).toFixed(5)),Number((2*i).toFixed(5))),o=Number((r*K.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+l(K.internal.getWidth(e)/2)+" "+l(K.internal.getHeight(e)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+o+" "+o+" "+r+" 0 "+r+" c"),n.push("-"+o+" "+r+" -"+r+" "+o+" -"+r+" 0 c"),n.push("-"+r+" -"+o+" -"+o+" -"+r+" 0 -"+r+" c"),n.push(o+" -"+r+" "+r+" -"+o+" "+r+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join("\n"),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:K.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=K.RadioButton.Cross.YesNormal,t.D[e]=K.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=d(e),n=[],i=K.internal.calculateCross(e);return n.push("q"),n.push("1 1 "+a(K.internal.getWidth(e)-2)+" "+a(K.internal.getHeight(e)-2)+" re"),n.push("W"),n.push("n"),n.push(a(i.x1.x)+" "+a(i.x1.y)+" m"),n.push(a(i.x2.x)+" "+a(i.x2.y)+" l"),n.push(a(i.x4.x)+" "+a(i.x4.y)+" m"),n.push(a(i.x3.x)+" "+a(i.x3.y)+" l"),n.push("s"),n.push("Q"),t.stream=n.join("\n"),t},YesPushDown:function(e){var t=d(e),n=K.internal.calculateCross(e),i=[];return i.push("0.749023 g"),i.push("0 0 "+a(K.internal.getWidth(e))+" "+a(K.internal.getHeight(e))+" re"),i.push("f"),i.push("q"),i.push("1 1 "+a(K.internal.getWidth(e)-2)+" "+a(K.internal.getHeight(e)-2)+" re"),i.push("W"),i.push("n"),i.push(a(n.x1.x)+" "+a(n.x1.y)+" m"),i.push(a(n.x2.x)+" "+a(n.x2.y)+" l"),i.push(a(n.x4.x)+" "+a(n.x4.y)+" m"),i.push(a(n.x3.x)+" "+a(n.x3.y)+" l"),i.push("s"),i.push("Q"),t.stream=i.join("\n"),t},OffPushDown:function(e){var t=d(e),n=[];return n.push("0.749023 g"),n.push("0 0 "+a(K.internal.getWidth(e))+" "+a(K.internal.getHeight(e))+" re"),n.push("f"),t.stream=n.join("\n"),t}}},createDefaultAppearanceStream:function(e){var t=n.internal.getFont(e.fontName,e.fontStyle).id,i=n.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+i}};K.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=K.internal.getWidth(e),n=K.internal.getHeight(e),i=Math.min(t,n);return{x1:{x:(t-i)/2,y:(n-i)/2+i},x2:{x:(t-i)/2+i,y:(n-i)/2},x3:{x:(t-i)/2,y:(n-i)/2},x4:{x:(t-i)/2+i,y:(n-i)/2+i}}}},K.internal.getWidth=function(e){var t=0;return"object"===i(e)&&(t=c(e.Rect[2])),t},K.internal.getHeight=function(e){var t=0;return"object"===i(e)&&(t=c(e.Rect[3])),t};var X=e.addField=function(e){if(I.call(this),!(e instanceof U))throw new Error("Invalid argument passed to jsPDF.addField.");return(function(e){n.internal.acroformPlugin.printedOut&&(n.internal.acroformPlugin.printedOut=!1,n.internal.acroformPlugin.acroFormDictionaryRoot=null),n.internal.acroformPlugin.acroFormDictionaryRoot||I.call(n),n.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e)}).call(this,e),e.page=n.internal.getCurrentPageInfo().pageNumber,this};e.addButton=function(e){if(e instanceof k==0)throw new Error("Invalid argument passed to jsPDF.addButton.");return X.call(this,e)},e.addTextField=function(e){if(e instanceof q==0)throw new Error("Invalid argument passed to jsPDF.addTextField.");return X.call(this,e)},e.addChoiceField=function(e){if(e instanceof M==0)throw new Error("Invalid argument passed to jsPDF.addChoiceField.");return X.call(this,e)},"object"==i(t)&&void 0===t.ChoiceField&&void 0===t.ListBox&&void 0===t.ComboBox&&void 0===t.EditBox&&void 0===t.Button&&void 0===t.PushButton&&void 0===t.RadioButton&&void 0===t.CheckBox&&void 0===t.TextField&&void 0===t.PasswordField?(t.ChoiceField=M,t.ListBox=H,t.ComboBox=P,t.EditBox=Q,t.Button=k,t.PushButton=z,t.RadioButton=V,t.CheckBox=G,t.TextField=q,t.PasswordField=W,t.AcroForm={Appearance:K}):console.warn("AcroForm-Classes are not populated into global-namespace, because the class-Names exist already."),e.AcroFormChoiceField=M,e.AcroFormListBox=H,e.AcroFormComboBox=P,e.AcroFormEditBox=Q,e.AcroFormButton=k,e.AcroFormPushButton=z,e.AcroFormRadioButton=V,e.AcroFormCheckBox=G,e.AcroFormTextField=q,e.AcroFormPasswordField=W,e.AcroFormAppearance=K,e.AcroForm={ChoiceField:M,ListBox:H,ComboBox:P,EditBox:Q,Button:k,PushButton:z,RadioButton:V,CheckBox:G,TextField:q,PasswordField:W,Appearance:K}})((window.tmp=de).API,"undefined"!=typeof window&&window||"undefined"!=typeof global&&global),function(e){var t="addImage_",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=e.getImageFileTypeByImageData=function(t,i){var r,o;i=i||"UNKNOWN";var s,a,l,u="UNKNOWN";for(l in e.isArrayBufferView(t)&&(t=e.arrayBufferToBinaryString(t)),n)for(s=n[l],r=0;r<s.length;r+=1){for(a=!0,o=0;o<s[r].length;o+=1)if(void 0!==s[r][o]&&s[r][o]!==t.charCodeAt(o)){a=!1;break}if(!0===a){u=l;break}}return"UNKNOWN"===u&&"UNKNOWN"!==i&&(console.warn('FileType of Image not recognized. Processing image as "'+i+'".'),u=i),u},o=function e(t){for(var n=this.internal.newObject(),i=this.internal.write,r=this.internal.putStream,o=(0,this.internal.getFilters)();-1!==o.indexOf("FlateEncode");)o.splice(o.indexOf("FlateEncode"),1);t.n=n;var s=[];if(s.push({key:"Type",value:"/XObject"}),s.push({key:"Subtype",value:"/Image"}),s.push({key:"Width",value:t.w}),s.push({key:"Height",value:t.h}),t.cs===this.color_spaces.INDEXED?s.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(t.pal.length/3-1)+" "+("smask"in t?n+2:n+1)+" 0 R]"}):(s.push({key:"ColorSpace",value:"/"+t.cs}),t.cs===this.color_spaces.DEVICE_CMYK&&s.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),s.push({key:"BitsPerComponent",value:t.bpc}),"dp"in t&&s.push({key:"DecodeParms",value:"<<"+t.dp+">>"}),"trns"in t&&t.trns.constructor==Array){for(var a="",l=0,u=t.trns.length;l<u;l++)a+=t.trns[l]+" "+t.trns[l]+" ";s.push({key:"Mask",value:"["+a+"]"})}if("smask"in t&&s.push({key:"SMask",value:n+1+" 0 R"}),r({data:t.data,additionalKeyValues:s,alreadyAppliedFilters:void 0!==t.f?["/"+t.f]:void 0}),i("endobj"),"smask"in t){var c={w:t.w,h:t.h,cs:"DeviceGray",bpc:t.bpc,dp:"/Predictor "+t.p+" /Colors 1 /BitsPerComponent "+t.bpc+" /Columns "+t.w,data:t.smask};"f"in t&&(c.f=t.f),e.call(this,c)}t.cs===this.color_spaces.INDEXED&&(this.internal.newObject(),r({data:this.arrayBufferToBinaryString(new Uint8Array(t.pal))}),i("endobj"))},s=function(){var e=this.internal.collections[t+"images"];for(var n in e)o.call(this,e[n])},a=function(){var e,n=this.internal.collections[t+"images"],i=this.internal.write;for(var r in n)i("/I"+(e=n[r]).i,e.n,"0","R")},l=function(t){return"function"==typeof e["process"+t.toUpperCase()]},u=function(e){return"object"===i(e)&&1===e.nodeType},c=function(t,n){if("IMG"===t.nodeName&&t.hasAttribute("src")){var i=""+t.getAttribute("src");if(0===i.indexOf("data:image/"))return unescape(i);var r=e.loadFile(i);if(void 0!==r)return btoa(r)}if("CANVAS"===t.nodeName){var o=t;return t.toDataURL("image/jpeg",1)}(o=document.createElement("canvas")).width=t.clientWidth||t.width,o.height=t.clientHeight||t.height;var s=o.getContext("2d");if(!s)throw"addImage requires canvas to be supported by browser.";return s.drawImage(t,0,0,o.width,o.height),o.toDataURL("png"==(""+n).toLowerCase()?"image/png":"image/jpeg")},h=function(e,t){var n;if(t)for(var i in t)if(e===t[i].alias){n=t[i];break}return n};e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"},e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"},e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},e.sHashCode=function(e){var t,n=0;if(0===(e=e||"").length)return n;for(t=0;t<e.length;t++)n=(n<<5)-n+e.charCodeAt(t),n|=0;return n},e.isString=function(e){return"string"==typeof e},e.validateStringAsBase64=function(e){(e=e||"").toString().trim();var t=!0;return 0===e.length&&(t=!1),e.length%4!=0&&(t=!1),!1===/^[A-Za-z0-9+\/]+$/.test(e.substr(0,e.length-2))&&(t=!1),!1===/^[A-Za-z0-9\/][A-Za-z0-9+\/]|[A-Za-z0-9+\/]=|==$/.test(e.substr(-2))&&(t=!1),t},e.extractInfoFromBase64DataURI=function(e){return/^data:([\w]+?\/([\w]+?));\S*;*base64,(.+)$/g.exec(e)},e.extractImageFromDataUrl=function(e){var t=(e=e||"").split("base64,"),n=null;if(2===t.length){var i=/^data:(\w*\/\w*);*(charset=[\w=-]*)*;*$/.exec(t[0]);Array.isArray(i)&&(n={mimeType:i[1],charset:i[2],data:t[1]})}return n},e.supportsArrayBuffer=function(){return"undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array},e.isArrayBuffer=function(e){return!!this.supportsArrayBuffer()&&e instanceof ArrayBuffer},e.isArrayBufferView=function(e){return!!this.supportsArrayBuffer()&&"undefined"!=typeof Uint32Array&&(e instanceof Int8Array||e instanceof Uint8Array||"undefined"!=typeof Uint8ClampedArray&&e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array)},e.binaryStringToUint8Array=function(e){for(var t=e.length,n=new Uint8Array(t),i=0;i<t;i++)n[i]=e.charCodeAt(i);return n},e.arrayBufferToBinaryString=function(e){if("function"==typeof atob)return atob(this.arrayBufferToBase64(e))},e.arrayBufferToBase64=function(e){for(var t,n="",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=new Uint8Array(e),o=r.byteLength,s=o%3,a=o-s,l=0;l<a;l+=3)n+=i[(16515072&(t=r[l]<<16|r[l+1]<<8|r[l+2]))>>18]+i[(258048&t)>>12]+i[(4032&t)>>6]+i[63&t];return 1==s?n+=i[(252&(t=r[a]))>>2]+i[(3&t)<<4]+"==":2==s&&(n+=i[(64512&(t=r[a]<<8|r[a+1]))>>10]+i[(1008&t)>>4]+i[(15&t)<<2]+"="),n},e.createImageInfo=function(e,t,n,i,r,o,s,a,l,u,c,h,d){var A={alias:a,w:t,h:n,cs:i,bpc:r,i:s,data:e};return o&&(A.f=o),l&&(A.dp=l),u&&(A.trns=u),c&&(A.pal=c),h&&(A.smask=h),d&&(A.p=d),A},e.addImage=function(n,r,o,d,A,p,f,g,m){var y="";if("string"!=typeof r){var v=p;p=A,A=d,d=o,o=r,r=v}if("object"===i(n)&&!u(n)&&"imageData"in n){var w=n;n=w.imageData,r=w.format||r||"UNKNOWN",o=w.x||o||0,d=w.y||d||0,A=w.w||A,p=w.h||p,f=w.alias||f,g=w.compression||g,m=w.rotation||w.angle||m}var _=this.internal.getFilters();if(void 0===g&&-1!==_.indexOf("FlateEncode")&&(g="SLOW"),"string"==typeof n&&(n=unescape(n)),isNaN(o)||isNaN(d))throw console.error("jsPDF.addImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addImage");var b,C,E,S,L,T,B,N=(function(){var e=this.internal.collections[t+"images"];return e||(this.internal.collections[t+"images"]=e={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",a)),e}).call(this);if(!((b=h(n,N))||(u(n)&&(n=c(n,r)),(null==(B=f)||0===B.length)&&(f="string"==typeof(T=n)?e.sHashCode(T):e.isArrayBufferView(T)?e.sHashCode(e.arrayBufferToBinaryString(T)):null),b=h(f,N)))){if(this.isString(n)&&(""!==(y=this.convertStringToImageData(n))||void 0!==(y=e.loadFile(n)))&&(n=y),r=this.getImageFileTypeByImageData(n,r),!l(r))throw new Error("addImage does not support files of type '"+r+"', please ensure that a plugin for '"+r+"' support is added.");if(this.supportsArrayBuffer()&&(n instanceof Uint8Array||(C=n,n=this.binaryStringToUint8Array(n))),!(b=this["process"+r.toUpperCase()](n,(L=0,(S=N)&&(L=Object.keys?Object.keys(S).length:function(e){var t=0;for(var n in e)e.hasOwnProperty(n)&&t++;return t}(S)),L),f,((E=g)&&"string"==typeof E&&(E=E.toUpperCase()),E in e.image_compression?E:e.image_compression.NONE),C)))throw new Error("An unknown error occurred whilst processing the image")}return(function(e,t,n,i,r,o,s,a){var l=(function(e,t,n){return e||t||(t=e=-96),e<0&&(e=-1*n.w*72/e/this.internal.scaleFactor),t<0&&(t=-1*n.h*72/t/this.internal.scaleFactor),0===e&&(e=t*n.w/n.h),0===t&&(t=e*n.h/n.w),[e,t]}).call(this,n,i,r),u=this.internal.getCoordinateString,c=this.internal.getVerticalCoordinateString;if(n=l[0],i=l[1],s[o]=r,a){a*=Math.PI/180;var h=Math.cos(a),d=Math.sin(a),A=function(e){return e.toFixed(4)},p=[A(h),A(d),A(-1*d),A(h),0,0,"cm"]}this.internal.write("q"),a?(this.internal.write([1,"0","0",1,u(e),c(t+i),"cm"].join(" ")),this.internal.write(p.join(" ")),this.internal.write([u(n),"0","0",u(i),"0","0","cm"].join(" "))):this.internal.write([u(n),"0","0",u(i),u(e),c(t+i),"cm"].join(" ")),this.internal.write("/I"+r.i+" Do"),this.internal.write("Q")}).call(this,o,d,A,p,b,b.i,N,m),this},e.convertStringToImageData=function(t){var n,i="";if(this.isString(t)){var r;n=null!==(r=this.extractImageFromDataUrl(t))?r.data:t;try{i=atob(n)}catch(t){throw e.validateStringAsBase64(n)?new Error("atob-Error in jsPDF.convertStringToImageData "+t.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertStringToImageData ")}}return i};var d=function(e,t){return e.subarray(t,t+5)};e.processJPEG=function(e,t,n,i,o,s){var a,l=this.decode.DCT_DECODE;if(!this.isString(e)&&!this.isArrayBuffer(e)&&!this.isArrayBufferView(e))return null;if(this.isString(e)&&(a=function(e){var t;if("JPEG"!==r(e))throw new Error("getJpegSize requires a binary string jpeg file");for(var n=256*e.charCodeAt(4)+e.charCodeAt(5),i=4,o=e.length;i<o;){if(255!==e.charCodeAt(i+=n))throw new Error("getJpegSize could not find the size of the image");if(192===e.charCodeAt(i+1)||193===e.charCodeAt(i+1)||194===e.charCodeAt(i+1)||195===e.charCodeAt(i+1)||196===e.charCodeAt(i+1)||197===e.charCodeAt(i+1)||198===e.charCodeAt(i+1)||199===e.charCodeAt(i+1))return t=256*e.charCodeAt(i+5)+e.charCodeAt(i+6),[256*e.charCodeAt(i+7)+e.charCodeAt(i+8),t,e.charCodeAt(i+9)];n=256*e.charCodeAt(i+=2)+e.charCodeAt(i+1)}}(e)),this.isArrayBuffer(e)&&(e=new Uint8Array(e)),this.isArrayBufferView(e)&&(a=function(e){if(65496!=(e[0]<<8|e[1]))throw new Error("Supplied data is not a JPEG");for(var t,n=e.length,i=(e[4]<<8)+e[5],r=4;r<n;){if(i=((t=d(e,r+=i))[2]<<8)+t[3],(192===t[1]||194===t[1])&&255===t[0]&&7<i)return{width:((t=d(e,r+5))[2]<<8)+t[3],height:(t[0]<<8)+t[1],numcomponents:t[4]};r+=2}throw new Error("getJpegSizeFromBytes could not find the size of the image")}(e),e=o||this.arrayBufferToBinaryString(e)),void 0===s)switch(a.numcomponents){case 1:s=this.color_spaces.DEVICE_GRAY;break;case 4:s=this.color_spaces.DEVICE_CMYK;break;default:case 3:s=this.color_spaces.DEVICE_RGB}return this.createImageInfo(e,a.width,a.height,s,8,l,t,n)},e.processJPG=function(){return this.processJPEG.apply(this,arguments)},e.getImageProperties=function(t){var n,i,r="";if(u(t)&&(t=c(t)),this.isString(t)&&(""!==(r=this.convertStringToImageData(t))||void 0!==(r=e.loadFile(t)))&&(t=r),i=this.getImageFileTypeByImageData(t),!l(i))throw new Error("addImage does not support files of type '"+i+"', please ensure that a plugin for '"+i+"' support is added.");if(this.supportsArrayBuffer()&&(t instanceof Uint8Array||(t=this.binaryStringToUint8Array(t))),!(n=this["process"+i.toUpperCase()](t)))throw new Error("An unknown error occurred whilst processing the image");return{fileType:i,width:n.w,height:n.h,colorSpace:n.cs,compressionMode:n.f,bitsPerComponent:n.bpc}}}(de.API),o=de.API,de.API.events.push(["addPage",function(e){this.internal.getPageInfo(e.pageNumber).pageContext.annotations=[]}]),o.events.push(["putPage",function(e){for(var t=this.internal.getPageInfoByObjId(e.objId),n=e.pageContext.annotations,i=function(e){if(void 0!==e&&""!=e)return!0},r=!1,o=0;o<n.length&&!r;o++)switch((l=n[o]).type){case"link":if(i(l.options.url)||i(l.options.pageNumber)){r=!0;break}case"reference":case"text":case"freetext":r=!0}if(0!=r){this.internal.write("/Annots [");var s=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString;for(o=0;o<n.length;o++){var l;switch((l=n[o]).type){case"reference":this.internal.write(" "+l.object.objId+" 0 R ");break;case"text":var u=this.internal.newAdditionalObject(),c=this.internal.newAdditionalObject(),h=l.title||"Note";f="<</Type /Annot /Subtype /Text "+(A="/Rect ["+s(l.bounds.x)+" "+a(l.bounds.y+l.bounds.h)+" "+s(l.bounds.x+l.bounds.w)+" "+a(l.bounds.y)+"] ")+"/Contents ("+l.contents+")",f+=" /Popup "+c.objId+" 0 R",f+=" /P "+t.objId+" 0 R",u.content=f+=" /T ("+h+") >>";var d=u.objId+" 0 R";f="<</Type /Annot /Subtype /Popup "+(A="/Rect ["+s(l.bounds.x+30)+" "+a(l.bounds.y+l.bounds.h)+" "+s(l.bounds.x+l.bounds.w+30)+" "+a(l.bounds.y)+"] ")+" /Parent "+d,l.open&&(f+=" /Open true"),c.content=f+=" >>",this.internal.write(u.objId,"0 R",c.objId,"0 R");break;case"freetext":var A="/Rect ["+s(l.bounds.x)+" "+a(l.bounds.y)+" "+s(l.bounds.x+l.bounds.w)+" "+a(l.bounds.y+l.bounds.h)+"] ";f="<</Type /Annot /Subtype /FreeText "+A+"/Contents ("+l.contents+")",f+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+(l.color||"#000000")+")",f+=" /Border [0 0 0]",this.internal.write(f+=" >>");break;case"link":if(l.options.name){var p=this.annotations._nameMap[l.options.name];l.options.pageNumber=p.page,l.options.top=p.y}else l.options.top||(l.options.top=0);A="/Rect ["+s(l.x)+" "+a(l.y)+" "+s(l.x+l.w)+" "+a(l.y+l.h)+"] ";var f="";if(l.options.url)f="<</Type /Annot /Subtype /Link "+A+"/Border [0 0 0] /A <</S /URI /URI ("+l.options.url+") >>";else if(l.options.pageNumber)switch(f="<</Type /Annot /Subtype /Link "+A+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(l.options.pageNumber).objId+" 0 R",l.options.magFactor=l.options.magFactor||"XYZ",l.options.magFactor){case"Fit":f+=" /Fit]";break;case"FitH":f+=" /FitH "+l.options.top+"]";break;case"FitV":l.options.left=l.options.left||0,f+=" /FitV "+l.options.left+"]";break;case"XYZ":default:var g=a(l.options.top);l.options.left=l.options.left||0,void 0===l.options.zoom&&(l.options.zoom=0),f+=" /XYZ "+l.options.left+" "+g+" "+l.options.zoom+"]"}""!=f&&this.internal.write(f+=" >>")}}this.internal.write("]")}}]),o.createAnnotation=function(e){var t=this.internal.getCurrentPageInfo();switch(e.type){case"link":this.link(e.bounds.x,e.bounds.y,e.bounds.w,e.bounds.h,e);break;case"text":case"freetext":t.pageContext.annotations.push(e)}},o.link=function(e,t,n,i,r){this.internal.getCurrentPageInfo().pageContext.annotations.push({x:e,y:t,w:n,h:i,options:r,type:"link"})},o.textWithLink=function(e,t,n,i){var r=this.getTextWidth(e),o=this.internal.getLineHeight()/this.internal.scaleFactor;return this.text(e,t,n),this.link(t,(n+=.2*o)-o,r,o,i),r},o.getTextWidth=function(e){var t=this.internal.getFontSize();return this.getStringUnitWidth(e)*t/this.internal.scaleFactor},function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},i={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},r=[1570,1571,1573,1575];e.__arabicParser__={};var o=e.__arabicParser__.isInArabicSubstitutionA=function(e){return void 0!==t[e.charCodeAt(0)]},s=e.__arabicParser__.isArabicLetter=function(e){return"string"==typeof e&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(e)},a=e.__arabicParser__.isArabicEndLetter=function(e){return s(e)&&o(e)&&t[e.charCodeAt(0)].length<=2},l=e.__arabicParser__.isArabicAlfLetter=function(e){return s(e)&&0<=r.indexOf(e.charCodeAt(0))},u=(e.__arabicParser__.arabicLetterHasIsolatedForm=function(e){return s(e)&&o(e)&&1<=t[e.charCodeAt(0)].length},e.__arabicParser__.arabicLetterHasFinalForm=function(e){return s(e)&&o(e)&&2<=t[e.charCodeAt(0)].length}),c=(e.__arabicParser__.arabicLetterHasInitialForm=function(e){return s(e)&&o(e)&&3<=t[e.charCodeAt(0)].length},e.__arabicParser__.arabicLetterHasMedialForm=function(e){return s(e)&&o(e)&&4==t[e.charCodeAt(0)].length}),h=e.__arabicParser__.resolveLigatures=function(e){var t=0,i=n,r=0,o="",s=0;for(t=0;t<e.length;t+=1)void 0!==i[e.charCodeAt(t)]?(s++,"number"==typeof(i=i[e.charCodeAt(t)])&&(r=-1!==(r=d(e.charAt(t),e.charAt(t-s),e.charAt(t+1)))?r:0,o+=String.fromCharCode(i),i=n,s=0),t===e.length-1&&(i=n,o+=e.charAt(t-(s-1)),t-=s-1,s=0)):(i=n,o+=e.charAt(t-s),t-=s,s=0);return o},d=(e.__arabicParser__.isArabicDiacritic=function(e){return void 0!==e&&void 0!==i[e.charCodeAt(0)]},e.__arabicParser__.getCorrectForm=function(e,t,n){return s(e)?!1===o(e)?-1:!u(e)||!s(t)&&!s(n)||!s(n)&&a(t)||a(e)&&!s(t)||a(e)&&l(t)||a(e)&&a(t)?0:c(e)&&s(t)&&!a(t)&&s(n)&&u(n)?3:a(e)||!s(n)?1:2:-1}),A=e.__arabicParser__.processArabic=e.processArabic=function(e){var n=0,i=0,r=0,o="",a="",l="",u=(e=e||"").split("\\s+"),c=[];for(n=0;n<u.length;n+=1){for(c.push(""),i=0;i<u[n].length;i+=1)a=u[n][i-1],l=u[n][i+1],s(o=u[n][i])?(r=d(o,a,l),c[n]+=-1!==r?String.fromCharCode(t[o.charCodeAt(0)][r]):o):c[n]+=o;c[n]=h(c[n])}return c.join(" ")};e.events.push(["preProcessText",function(e){var t=e.text,n=[];if("[object Array]"===Object.prototype.toString.call(t)){var i=0;for(n=[],i=0;i<t.length;i+=1)"[object Array]"===Object.prototype.toString.call(t[i])?n.push([A(t[i][0]),t[i][1],t[i][2]]):n.push([A(t[i])]);e.text=n}else e.text=A(t)}])}(de.API),de.API.autoPrint=function(e){var t;switch((e=e||{}).variant=e.variant||"non-conform",e.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",(function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")})),this.internal.events.subscribe("putCatalog",(function(){this.internal.out("/OpenAction "+t+" 0 R")}))}return this},s=de.API,(a=function(){var e=void 0;Object.defineProperty(this,"pdf",{get:function(){return e},set:function(t){e=t}});var t=150;Object.defineProperty(this,"width",{get:function(){return t},set:function(e){t=isNaN(e)||!1===Number.isInteger(e)||e<0?150:e,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=t+1)}});var n=300;Object.defineProperty(this,"height",{get:function(){return n},set:function(e){n=isNaN(e)||!1===Number.isInteger(e)||e<0?300:e,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=n+1)}});var i=[];Object.defineProperty(this,"childNodes",{get:function(){return i},set:function(e){i=e}});var r={};Object.defineProperty(this,"style",{get:function(){return r},set:function(e){r=e}}),Object.defineProperty(this,"parentNode",{get:function(){return!1}})}).prototype.getContext=function(e,t){var n;if("2d"!==(e=e||"2d"))return null;for(n in t)this.pdf.context2d.hasOwnProperty(n)&&(this.pdf.context2d[n]=t[n]);return(this.pdf.context2d._canvas=this).pdf.context2d},a.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},s.events.push(["initialized",function(){this.canvas=new a,this.canvas.pdf=this}]),c={x:void 0,y:void 0,w:void 0,h:void 0,ln:void 0},h=1,d=function(e,t,n,i,r){c={x:e,y:t,w:n,h:i,ln:r}},A=function(){return c},p={left:0,top:0,bottom:0},(l=de.API).setHeaderFunction=function(e){u=e},l.getTextDimensions=function(e,t){var n=this.table_font_size||this.internal.getFontSize(),i=(this.internal.getFont(),(t=t||{}).scaleFactor||this.internal.scaleFactor),r=0,o=0,s=0;if("string"==typeof e)0!=(r=this.getStringUnitWidth(e)*n)&&(o=1);else{if("[object Array]"!==Object.prototype.toString.call(e))throw new Error("getTextDimensions expects text-parameter to be of type String or an Array of Strings.");for(var a=0;a<e.length;a++)r<(s=this.getStringUnitWidth(e[a])*n)&&(r=s);0!==r&&(o=e.length)}return{w:r/=i,h:Math.max((o*n*this.getLineHeightFactor()-n*(this.getLineHeightFactor()-1))/i,0)}},l.cellAddPage=function(){var e=this.margins||p;this.addPage(),d(e.left,e.top,void 0,void 0),h+=1},l.cellInitialize=function(){c={x:void 0,y:void 0,w:void 0,h:void 0,ln:void 0},h=1},l.cell=function(e,t,n,i,r,o,s){var a=A(),l=!1;if(void 0!==a.ln)if(a.ln===o)e=a.x+a.w,t=a.y;else{var u=this.margins||p;a.y+a.h+i+13>=this.internal.pageSize.getHeight()-u.bottom&&(this.cellAddPage(),l=!0,this.printHeaders&&this.tableHeaderRow&&this.printHeaderRow(o,!0)),t=A().y+A().h,l&&(t=23)}if(void 0!==r[0])if(this.printingHeaderRow?this.rect(e,t,n,i,"FD"):this.rect(e,t,n,i),"right"===s){r instanceof Array||(r=[r]);for(var c=0;c<r.length;c++){var h=r[c],f=this.getStringUnitWidth(h)*this.internal.getFontSize()/this.internal.scaleFactor;this.text(h,e+n-f-3,t+this.internal.getLineHeight()*(c+1))}}else this.text(r,e+3,t+this.internal.getLineHeight());return d(e,t,n,i,o),this},l.arrayMax=function(e,t){var n,i,r,o=e[0];for(n=0,i=e.length;n<i;n+=1)r=e[n],t?-1===t(o,r)&&(o=r):o<r&&(o=r);return o},l.table=function(e,t,n,i,r){if(!n)throw"No data for PDF table";var o,s,a,u,d,A,f,g,m,y=[],v=[],w={},_={},b=[],C=[],E=!1,S=!0,L=12,T=p;if(T.width=this.internal.pageSize.getWidth(),r&&(!0===r.autoSize&&(E=!0),!1===r.printHeaders&&(S=!1),r.fontSize&&(L=r.fontSize),r.css&&void 0!==r.css["font-size"]&&(L=16*r.css["font-size"]),r.margins&&(T=r.margins)),this.lnMod=0,c={x:void 0,y:void 0,w:void 0,h:void 0,ln:void 0},h=1,this.printHeaders=S,this.margins=T,this.setFontSize(L),this.table_font_size=L,null==i)y=Object.keys(n[0]);else if(i[0]&&"string"!=typeof i[0])for(s=0,a=i.length;s<a;s+=1)y.push((o=i[s]).name),v.push(o.prompt),_[o.name]=o.width*(19.049976/25.4);else y=i;if(E)for(m=function(e){return e[o]},s=0,a=y.length;s<a;s+=1){for(w[o=y[s]]=n.map(m),b.push(this.getTextDimensions(v[s]||o,{scaleFactor:1}).w),A=0,u=(d=w[o]).length;A<u;A+=1)b.push(this.getTextDimensions(d[A],{scaleFactor:1}).w);_[o]=l.arrayMax(b),b=[]}if(S){var B=this.calculateLineHeight(y,_,v.length?v:y);for(s=0,a=y.length;s<a;s+=1)C.push([e,t,_[o=y[s]],B,String(v.length?v[s]:o)]);this.setTableHeaderRow(C),this.printHeaderRow(1,!1)}for(s=0,a=n.length;s<a;s+=1)for(B=this.calculateLineHeight(y,_,f=n[s]),A=0,g=y.length;A<g;A+=1)this.cell(e,t,_[o=y[A]],B,f[o],s+2,o.align);return this.lastCellPos=c,this.table_x=e,this.table_y=t,this},l.calculateLineHeight=function(e,t,n){for(var i,r=0,o=0;o<e.length;o++){n[i=e[o]]=this.splitTextToSize(String(n[i]),t[i]-3);var s=this.internal.getLineHeight()*n[i].length+3;r<s&&(r=s)}return r},l.setTableHeaderRow=function(e){this.tableHeaderRow=e},l.printHeaderRow=function(e,t){if(!this.tableHeaderRow)throw"Property tableHeaderRow does not exist.";var n,i,r,o;if(this.printingHeaderRow=!0,void 0!==u){var s=u(this,h);d(s[0],s[1],s[2],s[3],-1)}this.setFontStyle("bold");var a=[];for(r=0,o=this.tableHeaderRow.length;r<o;r+=1)this.setFillColor(200,200,200),n=this.tableHeaderRow[r],t&&(this.margins.top=13,n[1]=this.margins&&this.margins.top||0,a.push(n)),i=[].concat(n),this.cell.apply(this,i.concat(e));0<a.length&&this.setTableHeaderRow(a),this.setFontStyle("normal"),this.printingHeaderRow=!1},function(e,t){var n,r,o,s,a,l=function(e){return this.isStrokeTransparent=(e=e||{}).isStrokeTransparent||!1,this.strokeOpacity=e.strokeOpacity||1,this.strokeStyle=e.strokeStyle||"#000000",this.fillStyle=e.fillStyle||"#000000",this.isFillTransparent=e.isFillTransparent||!1,this.fillOpacity=e.fillOpacity||1,this.font=e.font||"10px sans-serif",this.textBaseline=e.textBaseline||"alphabetic",this.textAlign=e.textAlign||"left",this.lineWidth=e.lineWidth||1,this.lineJoin=e.lineJoin||"miter",this.lineCap=e.lineCap||"butt",this.path=e.path||[],this.transform=void 0!==e.transform?e.transform.clone():new R,this.globalCompositeOperation=e.globalCompositeOperation||"normal",this.globalAlpha=e.globalAlpha||1,this.clip_path=e.clip_path||[],this.currentPoint=e.currentPoint||new x,this.miterLimit=e.miterLimit||10,this.lastPoint=e.lastPoint||new x,this.ignoreClearRect="boolean"!=typeof e.ignoreClearRect||e.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new u(this),n=this.internal.f2,r=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString,s=this.internal.getHorizontalCoordinate,a=this.internal.getVerticalCoordinate}]);var u=function(e){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}}),Object.defineProperty(this,"pdf",{get:function(){return e}});var t=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return t},set:function(e){t=Boolean(e)}});var n=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return n},set:function(e){n=Boolean(e)}});var i=0;Object.defineProperty(this,"posX",{get:function(){return i},set:function(e){isNaN(e)||(i=e)}});var r=0;Object.defineProperty(this,"posY",{get:function(){return r},set:function(e){isNaN(e)||(r=e)}});var o=!1;Object.defineProperty(this,"autoPaging",{get:function(){return o},set:function(e){o=Boolean(e)}});var s=0;Object.defineProperty(this,"lastBreak",{get:function(){return s},set:function(e){s=e}});var a=[];Object.defineProperty(this,"pageBreaks",{get:function(){return a},set:function(e){a=e}});var u=new l;Object.defineProperty(this,"ctx",{get:function(){return u},set:function(e){e instanceof l&&(u=e)}}),Object.defineProperty(this,"path",{get:function(){return u.path},set:function(e){u.path=e}});var h=[];Object.defineProperty(this,"ctxStack",{get:function(){return h},set:function(e){h=e}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(e){var t;t=c(e),this.ctx.fillStyle=t.style,this.ctx.isFillTransparent=0===t.a,this.ctx.fillOpacity=t.a,this.pdf.setFillColor(t.r,t.g,t.b,{a:t.a}),this.pdf.setTextColor(t.r,t.g,t.b,{a:t.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(e){var t=c(e);this.ctx.strokeStyle=t.style,this.ctx.isStrokeTransparent=0===t.a,this.ctx.strokeOpacity=t.a,0===t.a?this.pdf.setDrawColor(255,255,255):this.pdf.setDrawColor(t.r,t.g,t.b)}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(e){-1!==["butt","round","square"].indexOf(e)&&(this.ctx.lineCap=e,this.pdf.setLineCap(e))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(e){isNaN(e)||(this.ctx.lineWidth=e,this.pdf.setLineWidth(e))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(e){-1!==["bevel","round","miter"].indexOf(e)&&(this.ctx.lineJoin=e,this.pdf.setLineJoin(e))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(e){isNaN(e)||(this.ctx.miterLimit=e,this.pdf.setMiterLimit(e))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(e){this.ctx.textBaseline=e}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(e){-1!==["right","end","center","left","start"].indexOf(e)&&(this.ctx.textAlign=e)}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(e){var t;if(this.ctx.font=e,null!==(t=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(e))){var n=t[1],i=t[3],r=t[4],o=t[5],s=t[6];r="px"===o?Math.floor(parseFloat(r)):"em"===o?Math.floor(parseFloat(r)*this.pdf.getFontSize()):Math.floor(parseFloat(r)),this.pdf.setFontSize(r);var a="";("bold"===i||700<=parseInt(i,10)||"bold"===n)&&(a="bold"),"italic"===n&&(a+="italic"),0===a.length&&(a="normal");for(var l="",u=s.toLowerCase().replace(/"|'/g,"").split(/\s*,\s*/),c={arial:"Helvetica",verdana:"Helvetica",helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",courier:"Courier",times:"Times",cursive:"Times",fantasy:"Times",serif:"Times"},h=0;h<u.length;h++){if(void 0!==this.pdf.internal.getFont(u[h],a,{noFallback:!0,disableWarning:!0})){l=u[h];break}if("bolditalic"===a&&void 0!==this.pdf.internal.getFont(u[h],"bold",{noFallback:!0,disableWarning:!0}))l=u[h],a="bold";else if(void 0!==this.pdf.internal.getFont(u[h],"normal",{noFallback:!0,disableWarning:!0})){l=u[h],a="normal";break}}if(""===l)for(h=0;h<u.length;h++)if(c[u[h]]){l=c[u[h]];break}this.pdf.setFont(l=""===l?"Times":l,a)}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(e){this.ctx.globalCompositeOperation=e}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(e){this.ctx.globalAlpha=e}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(e){this.ctx.ignoreClearRect=Boolean(e)}})};u.prototype.fill=function(){g.call(this,"fill",!1)},u.prototype.stroke=function(){g.call(this,"stroke",!1)},u.prototype.beginPath=function(){this.path=[{type:"begin"}]},u.prototype.moveTo=function(e,t){if(isNaN(e)||isNaN(t))throw console.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var n=this.ctx.transform.applyToPoint(new x(e,t));this.path.push({type:"mt",x:n.x,y:n.y}),this.ctx.lastPoint=new x(e,t)},u.prototype.closePath=function(){var e=new x(0,0),t=0;for(t=this.path.length-1;-1!==t;t--)if("begin"===this.path[t].type&&"object"===i(this.path[t+1])&&"number"==typeof this.path[t+1].x){e=new x(this.path[t+1].x,this.path[t+1].y),this.path.push({type:"lt",x:e.x,y:e.y});break}"object"===i(this.path[t+2])&&"number"==typeof this.path[t+2].x&&this.path.push(JSON.parse(JSON.stringify(this.path[t+2]))),this.path.push({type:"close"}),this.ctx.lastPoint=new x(e.x,e.y)},u.prototype.lineTo=function(e,t){if(isNaN(e)||isNaN(t))throw console.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var n=this.ctx.transform.applyToPoint(new x(e,t));this.path.push({type:"lt",x:n.x,y:n.y}),this.ctx.lastPoint=new x(n.x,n.y)},u.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),g.call(this,null,!0)},u.prototype.quadraticCurveTo=function(e,t,n,i){if(isNaN(n)||isNaN(i)||isNaN(e)||isNaN(t))throw console.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var r=this.ctx.transform.applyToPoint(new x(n,i)),o=this.ctx.transform.applyToPoint(new x(e,t));this.path.push({type:"qct",x1:o.x,y1:o.y,x:r.x,y:r.y}),this.ctx.lastPoint=new x(r.x,r.y)},u.prototype.bezierCurveTo=function(e,t,n,i,r,o){if(isNaN(r)||isNaN(o)||isNaN(e)||isNaN(t)||isNaN(n)||isNaN(i))throw console.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var s=this.ctx.transform.applyToPoint(new x(r,o)),a=this.ctx.transform.applyToPoint(new x(e,t)),l=this.ctx.transform.applyToPoint(new x(n,i));this.path.push({type:"bct",x1:a.x,y1:a.y,x2:l.x,y2:l.y,x:s.x,y:s.y}),this.ctx.lastPoint=new x(s.x,s.y)},u.prototype.arc=function(e,t,n,i,r,o){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(i)||isNaN(r))throw console.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(o=Boolean(o),!this.ctx.transform.isIdentity){var s=this.ctx.transform.applyToPoint(new x(e,t));e=s.x,t=s.y;var a=this.ctx.transform.applyToPoint(new x(0,n)),l=this.ctx.transform.applyToPoint(new x(0,0));n=Math.sqrt(Math.pow(a.x-l.x,2)+Math.pow(a.y-l.y,2))}Math.abs(r-i)>=2*Math.PI&&(i=0,r=2*Math.PI),this.path.push({type:"arc",x:e,y:t,radius:n,startAngle:i,endAngle:r,counterclockwise:o})},u.prototype.arcTo=function(e,t,n,i,r){throw new Error("arcTo not implemented.")},u.prototype.rect=function(e,t,n,i){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(i))throw console.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(e,t),this.lineTo(e+n,t),this.lineTo(e+n,t+i),this.lineTo(e,t+i),this.lineTo(e,t),this.lineTo(e+n,t),this.lineTo(e,t)},u.prototype.fillRect=function(e,t,n,i){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(i))throw console.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!h.call(this)){var r={};"butt"!==this.lineCap&&(r.lineCap=this.lineCap,this.lineCap="butt"),"miter"!==this.lineJoin&&(r.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(e,t,n,i),this.fill(),r.hasOwnProperty("lineCap")&&(this.lineCap=r.lineCap),r.hasOwnProperty("lineJoin")&&(this.lineJoin=r.lineJoin)}},u.prototype.strokeRect=function(e,t,n,i){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(i))throw console.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");d.call(this)||(this.beginPath(),this.rect(e,t,n,i),this.stroke())},u.prototype.clearRect=function(e,t,n,i){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(i))throw console.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(e,t,n,i))},u.prototype.save=function(e){e="boolean"!=typeof e||e;for(var t=this.pdf.internal.getCurrentPageInfo().pageNumber,n=0;n<this.pdf.internal.getNumberOfPages();n++)this.pdf.setPage(n+1),this.pdf.internal.out("q");if(this.pdf.setPage(t),e){this.ctx.fontSize=this.pdf.internal.getFontSize();var i=new l(this.ctx);this.ctxStack.push(this.ctx),this.ctx=i}},u.prototype.restore=function(e){e="boolean"!=typeof e||e;for(var t=this.pdf.internal.getCurrentPageInfo().pageNumber,n=0;n<this.pdf.internal.getNumberOfPages();n++)this.pdf.setPage(n+1),this.pdf.internal.out("Q");this.pdf.setPage(t),e&&0!==this.ctxStack.length&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin)},u.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var c=function(e){var t,n,i,r;if(!0===e.isCanvasGradient&&(e=e.getColor()),!e)return{r:0,g:0,b:0,a:0,style:e};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(e))r=i=n=t=0;else{var o=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(e);if(null!==o)t=parseInt(o[1]),n=parseInt(o[2]),i=parseInt(o[3]),r=1;else if(null!==(o=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d\.]+)\s*\)/.exec(e)))t=parseInt(o[1]),n=parseInt(o[2]),i=parseInt(o[3]),r=parseFloat(o[4]);else{if(r=1,"string"==typeof e&&"#"!==e.charAt(0)){var s=new RGBColor(e);e=s.ok?s.toHex():"#000000"}4===e.length?(t=e.substring(1,2),t+=t,n=e.substring(2,3),n+=n,i=e.substring(3,4),i+=i):(t=e.substring(1,3),n=e.substring(3,5),i=e.substring(5,7)),t=parseInt(t,16),n=parseInt(n,16),i=parseInt(i,16)}}return{r:t,g:n,b:i,a:r,style:e}},h=function(){return this.ctx.isFillTransparent||0==this.globalAlpha},d=function(){return Boolean(this.ctx.isStrokeTransparent||0==this.globalAlpha)};u.prototype.fillText=function(e,t,n,i){if(isNaN(t)||isNaN(n)||"string"!=typeof e)throw console.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(i=isNaN(i)?void 0:i,!h.call(this)){n=y.call(this,n);var r=N(this.ctx.transform.rotation),o=this.ctx.transform.scaleX;C.call(this,{text:e,x:t,y:n,scale:o,angle:r,align:this.textAlign,maxWidth:i})}},u.prototype.strokeText=function(e,t,n,i){if(isNaN(t)||isNaN(n)||"string"!=typeof e)throw console.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!d.call(this)){i=isNaN(i)?void 0:i,n=y.call(this,n);var r=N(this.ctx.transform.rotation),o=this.ctx.transform.scaleX;C.call(this,{text:e,x:t,y:n,scale:o,renderingMode:"stroke",angle:r,align:this.textAlign,maxWidth:i})}},u.prototype.measureText=function(e){if("string"!=typeof e)throw console.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var t=this.pdf,n=this.pdf.internal.scaleFactor,i=t.internal.getFontSize(),r=t.getStringUnitWidth(e)*i/t.internal.scaleFactor;return new function(e){var t=(e=e||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return t}}),this}({width:r*=Math.round(96*n/72*1e4)/1e4})},u.prototype.scale=function(e,t){if(isNaN(e)||isNaN(t))throw console.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var n=new R(e,0,0,t,0,0);this.ctx.transform=this.ctx.transform.multiply(n)},u.prototype.rotate=function(e){if(isNaN(e))throw console.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var t=new R(Math.cos(e),Math.sin(e),-Math.sin(e),Math.cos(e),0,0);this.ctx.transform=this.ctx.transform.multiply(t)},u.prototype.translate=function(e,t){if(isNaN(e)||isNaN(t))throw console.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var n=new R(1,0,0,1,e,t);this.ctx.transform=this.ctx.transform.multiply(n)},u.prototype.transform=function(e,t,n,i,r,o){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(i)||isNaN(r)||isNaN(o))throw console.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var s=new R(e,t,n,i,r,o);this.ctx.transform=this.ctx.transform.multiply(s)},u.prototype.setTransform=function(e,t,n,i,r,o){e=isNaN(e)?1:e,t=isNaN(t)?0:t,n=isNaN(n)?0:n,i=isNaN(i)?1:i,r=isNaN(r)?0:r,o=isNaN(o)?0:o,this.ctx.transform=new R(e,t,n,i,r,o)},u.prototype.drawImage=function(e,t,n,i,r,o,s,a,l){var u=this.pdf.getImageProperties(e),c=1,h=1,d=1,p=1;void 0!==i&&void 0!==a&&(d=a/i,p=l/r,c=u.width/i*a/i,h=u.height/r*l/r),void 0===o&&(o=t,s=n,n=t=0),void 0!==i&&void 0===a&&(a=i,l=r),void 0===i&&void 0===a&&(a=u.width,l=u.height);for(var g,y=this.ctx.transform.decompose(),v=N(y.rotate.shx),w=new R,_=((w=(w=(w=w.multiply(y.translate)).multiply(y.skew)).multiply(y.scale)).applyToPoint(new x(a,l)),w.applyToRectangle(new D(o-t*d,s-n*p,i*c,r*h))),b=A.call(this,_),C=[],E=0;E<b.length;E+=1)-1===C.indexOf(b[E])&&C.push(b[E]);if(C.sort(),this.autoPaging)for(var S=C[C.length-1],L=C[0];L<S+1;L++){if(this.pdf.setPage(L),0!==this.ctx.clip_path.length){var T=this.path;g=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=f(g,this.posX,-1*this.pdf.internal.pageSize.height*(L-1)+this.posY),m.call(this,"fill",!0),this.path=T}var B=JSON.parse(JSON.stringify(_));B=f([B],this.posX,-1*this.pdf.internal.pageSize.height*(L-1)+this.posY)[0],this.pdf.addImage(e,"jpg",B.x,B.y,B.w,B.h,null,null,v)}else this.pdf.addImage(e,"jpg",_.x,_.y,_.w,_.h,null,null,v)};var A=function(e,t,n){var i=[];switch(t=t||this.pdf.internal.pageSize.width,n=n||this.pdf.internal.pageSize.height,e.type){default:case"mt":case"lt":i.push(Math.floor((e.y+this.posY)/n)+1);break;case"arc":i.push(Math.floor((e.y+this.posY-e.radius)/n)+1),i.push(Math.floor((e.y+this.posY+e.radius)/n)+1);break;case"qct":var r=O(this.ctx.lastPoint.x,this.ctx.lastPoint.y,e.x1,e.y1,e.x,e.y);i.push(Math.floor(r.y/n)+1),i.push(Math.floor((r.y+r.h)/n)+1);break;case"bct":var o=F(this.ctx.lastPoint.x,this.ctx.lastPoint.y,e.x1,e.y1,e.x2,e.y2,e.x,e.y);i.push(Math.floor(o.y/n)+1),i.push(Math.floor((o.y+o.h)/n)+1);break;case"rect":i.push(Math.floor((e.y+this.posY)/n)+1),i.push(Math.floor((e.y+e.h+this.posY)/n)+1)}for(var s=0;s<i.length;s+=1)for(;this.pdf.internal.getNumberOfPages()<i[s];)p.call(this);return i},p=function(){var e=this.fillStyle,t=this.strokeStyle,n=this.font,i=this.lineCap,r=this.lineWidth,o=this.lineJoin;this.pdf.addPage(),this.fillStyle=e,this.strokeStyle=t,this.font=n,this.lineCap=i,this.lineWidth=r,this.lineJoin=o},f=function(e,t,n){for(var i=0;i<e.length;i++)switch(e[i].type){case"bct":e[i].x2+=t,e[i].y2+=n;case"qct":e[i].x1+=t,e[i].y1+=n;case"mt":case"lt":case"arc":default:e[i].x+=t,e[i].y+=n}return e},g=function(e,t){for(var n,i,r=this.fillStyle,o=this.strokeStyle,s=this.lineCap,a=this.lineWidth,l=this.lineJoin,u=JSON.parse(JSON.stringify(this.path)),c=JSON.parse(JSON.stringify(this.path)),h=[],d=0;d<c.length;d++)if(void 0!==c[d].x)for(var g=A.call(this,c[d]),y=0;y<g.length;y+=1)-1===h.indexOf(g[y])&&h.push(g[y]);for(d=0;d<h.length;d++)for(;this.pdf.internal.getNumberOfPages()<h[d];)p.call(this);if(h.sort(),this.autoPaging){var v=h[h.length-1];for(d=h[0];d<v+1;d++){if(this.pdf.setPage(d),this.fillStyle=r,this.strokeStyle=o,this.lineCap=s,this.lineWidth=a,this.lineJoin=l,0!==this.ctx.clip_path.length){var w=this.path;n=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=f(n,this.posX,-1*this.pdf.internal.pageSize.height*(d-1)+this.posY),m.call(this,e,!0),this.path=w}i=JSON.parse(JSON.stringify(u)),this.path=f(i,this.posX,-1*this.pdf.internal.pageSize.height*(d-1)+this.posY),!1!==t&&0!==d||m.call(this,e,t)}}else m.call(this,e,t);this.path=u},m=function(e,t){if(("stroke"!==e||t||!d.call(this))&&("stroke"===e||t||!h.call(this))){for(var n,i=[],r=this.path,o=0;o<r.length;o++){var s=r[o];switch(s.type){case"begin":i.push({begin:!0});break;case"close":i.push({close:!0});break;case"mt":i.push({start:s,deltas:[],abs:[]});break;case"lt":var a=i.length;if(!isNaN(r[o-1].x)){var l=[s.x-r[o-1].x,s.y-r[o-1].y];if(0<a)for(;0<=a;a--)if(!0!==i[a-1].close&&!0!==i[a-1].begin){i[a-1].deltas.push(l),i[a-1].abs.push(s);break}}break;case"bct":i[i.length-1].deltas.push(l=[s.x1-r[o-1].x,s.y1-r[o-1].y,s.x2-r[o-1].x,s.y2-r[o-1].y,s.x-r[o-1].x,s.y-r[o-1].y]);break;case"qct":i[i.length-1].deltas.push(l=[r[o-1].x+2/3*(s.x1-r[o-1].x)-r[o-1].x,r[o-1].y+2/3*(s.y1-r[o-1].y)-r[o-1].y,s.x+2/3*(s.x1-s.x)-r[o-1].x,s.y+2/3*(s.y1-s.y)-r[o-1].y,s.x-r[o-1].x,s.y-r[o-1].y]);break;case"arc":i.push({deltas:[],abs:[],arc:!0}),Array.isArray(i[i.length-1].abs)&&i[i.length-1].abs.push(s)}}for(n=t?null:"stroke"===e?"stroke":"fill",o=0;o<i.length;o++){if(i[o].arc)for(var u=i[o].abs,c=0;c<u.length;c++){var A=u[c];if(void 0!==A.startAngle){var p=N(A.startAngle),f=N(A.endAngle),g=A.x,m=A.y;v.call(this,g,m,A.radius,p,f,A.counterclockwise,n,t)}else E.call(this,A.x,A.y)}i[o].arc||!0===i[o].close||!0===i[o].begin||S.call(this,i[o].deltas,g=i[o].start.x,m=i[o].start.y,null,null)}n&&w.call(this,n),t&&_.call(this)}},y=function(e){var t=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,n=t*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return e-n;case"top":return e+t-n;case"hanging":return e+t-2*n;case"middle":return e+t/2-n;case"ideographic":return e;case"alphabetic":default:return e}};u.prototype.createLinearGradient=function(){var e=function(){};return e.colorStops=[],e.addColorStop=function(e,t){this.colorStops.push([e,t])},e.getColor=function(){return 0===this.colorStops.length?"#000000":this.colorStops[0][1]},e.isCanvasGradient=!0,e},u.prototype.createPattern=function(){return this.createLinearGradient()},u.prototype.createRadialGradient=function(){return this.createLinearGradient()};var v=function(e,t,n,i,r,o,s,a){for(var l=I(i),u=I(r),c=T.call(this,n,l,u,o),h=0;h<c.length;h++){var d=c[h];0===h&&b.call(this,d.x1+e,d.y1+t),L.call(this,e,t,d.x2,d.y2,d.x3,d.y3,d.x4,d.y4)}a?_.call(this):w.call(this,s)},w=function(e){switch(e){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},_=function(){this.pdf.clip()},b=function(e,t){this.pdf.internal.out(r(e)+" "+o(t)+" m")},C=function(e){var t;switch(e.align){case"right":case"end":t="right";break;case"center":t="center";break;case"left":case"start":default:t="left"}var n=this.ctx.transform.applyToPoint(new x(e.x,e.y)),i=this.ctx.transform.decompose(),r=new R;r=(r=(r=r.multiply(i.translate)).multiply(i.skew)).multiply(i.scale);for(var o,s=this.pdf.getTextDimensions(e.text),a=this.ctx.transform.applyToRectangle(new D(e.x,e.y,s.w,s.h)),l=r.applyToRectangle(new D(e.x,e.y-s.h,s.w,s.h)),u=A.call(this,l),c=[],h=0;h<u.length;h+=1)-1===c.indexOf(u[h])&&c.push(u[h]);if(c.sort(),!0===this.autoPaging)for(var d=c[c.length-1],p=c[0];p<d+1;p++){if(this.pdf.setPage(p),0!==this.ctx.clip_path.length){var g=this.path;o=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=f(o,this.posX,-1*this.pdf.internal.pageSize.height*(p-1)+this.posY),m.call(this,"fill",!0),this.path=g}var y=JSON.parse(JSON.stringify(a));if(y=f([y],this.posX,-1*this.pdf.internal.pageSize.height*(p-1)+this.posY)[0],.01<=e.scale){var v=this.pdf.internal.getFontSize();this.pdf.setFontSize(v*e.scale)}this.pdf.text(e.text,y.x,y.y,{angle:e.angle,align:t,renderingMode:e.renderingMode,maxWidth:e.maxWidth}),.01<=e.scale&&this.pdf.setFontSize(v)}else.01<=e.scale&&(v=this.pdf.internal.getFontSize(),this.pdf.setFontSize(v*e.scale)),this.pdf.text(e.text,n.x+this.posX,n.y+this.posY,{angle:e.angle,align:t,renderingMode:e.renderingMode,maxWidth:e.maxWidth}),.01<=e.scale&&this.pdf.setFontSize(v)},E=function(e,t,n,i){i=i||0,this.pdf.internal.out(r(e+(n=n||0))+" "+o(t+i)+" l")},S=function(e,t,n){return this.pdf.lines(e,t,n,null,null)},L=function(e,t,i,r,o,l,u,c){this.pdf.internal.out([n(s(i+e)),n(a(r+t)),n(s(o+e)),n(a(l+t)),n(s(u+e)),n(a(c+t)),"c"].join(" "))},T=function(e,t,n,i){var r=2*Math.PI,o=t;(o<r||r<o)&&(o%=r);var s=n;(s<r||r<s)&&(s%=r);for(var a=[],l=Math.PI/2,u=i?-1:1,c=t,h=Math.min(r,Math.abs(s-o));1e-5<h;){var d=c+u*Math.min(h,l);a.push(B.call(this,e,c,d)),h-=Math.abs(d-c),c=d}return a},B=function(e,t,n){var i=(n-t)/2,r=e*Math.cos(i),o=e*Math.sin(i),s=r,a=-o,l=s*s+a*a,u=l+s*r+a*o,c=4/3*(Math.sqrt(2*l*u)-u)/(s*o-a*r),h=s-c*a,d=a+c*s,A=h,p=-d,f=i+t,g=Math.cos(f),m=Math.sin(f);return{x1:e*Math.cos(t),y1:e*Math.sin(t),x2:h*g-d*m,y2:h*m+d*g,x3:A*g-p*m,y3:A*m+p*g,x4:e*Math.cos(n),y4:e*Math.sin(n)}},N=function(e){return 180*e/Math.PI},I=function(e){return e*Math.PI/180},O=function(e,t,n,i,r,o){var s=e+.5*(n-e),a=t+.5*(i-t),l=r+.5*(n-r),u=o+.5*(i-o),c=Math.min(e,r,s,l),h=Math.max(e,r,s,l),d=Math.min(t,o,a,u),A=Math.max(t,o,a,u);return new D(c,d,h-c,A-d)},F=function(e,t,n,i,r,o,s,a){for(var l,u,c,h,d,A,p,f,g,m,y,v,w,_=n-e,b=i-t,C=r-n,E=o-i,S=s-r,L=a-o,T=0;T<41;T++)f=(A=(u=e+(l=T/40)*_)+l*((h=n+l*C)-u))+l*(h+l*(r+l*S-h)-A),g=(p=(c=t+l*b)+l*((d=i+l*E)-c))+l*(d+l*(o+l*L-d)-p),w=0==T?(v=m=f,y=g):(m=Math.min(m,f),y=Math.min(y,g),v=Math.max(v,f),Math.max(w,g));return new D(Math.round(m),Math.round(y),Math.round(v-m),Math.round(w-y))},x=function(e,t){var n=e||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return n},set:function(e){isNaN(e)||(n=parseFloat(e))}});var i=t||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return i},set:function(e){isNaN(e)||(i=parseFloat(e))}});var r="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return r},set:function(e){r=e.toString()}}),this},D=function(e,t,n,i){x.call(this,e,t),this.type="rect";var r=n||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return r},set:function(e){isNaN(e)||(r=parseFloat(e))}});var o=i||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return o},set:function(e){isNaN(e)||(o=parseFloat(e))}}),this},R=function(e,t,n,i,r,o){var s=[];return Object.defineProperty(this,"sx",{get:function(){return s[0]},set:function(e){s[0]=Math.round(1e5*e)/1e5}}),Object.defineProperty(this,"shy",{get:function(){return s[1]},set:function(e){s[1]=Math.round(1e5*e)/1e5}}),Object.defineProperty(this,"shx",{get:function(){return s[2]},set:function(e){s[2]=Math.round(1e5*e)/1e5}}),Object.defineProperty(this,"sy",{get:function(){return s[3]},set:function(e){s[3]=Math.round(1e5*e)/1e5}}),Object.defineProperty(this,"tx",{get:function(){return s[4]},set:function(e){s[4]=Math.round(1e5*e)/1e5}}),Object.defineProperty(this,"ty",{get:function(){return s[5]},set:function(e){s[5]=Math.round(1e5*e)/1e5}}),Object.defineProperty(this,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(this,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(this,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(this,"isIdentity",{get:function(){return 1===this.sx&&0===this.shy&&0===this.shx&&1===this.sy&&0===this.tx&&0===this.ty}}),this.sx=isNaN(e)?1:e,this.shy=isNaN(t)?0:t,this.shx=isNaN(n)?0:n,this.sy=isNaN(i)?1:i,this.tx=isNaN(r)?0:r,this.ty=isNaN(o)?0:o,this};R.prototype.multiply=function(e){return new R(e.sx*this.sx+e.shy*this.shx,e.sx*this.shy+e.shy*this.sy,e.shx*this.sx+e.sy*this.shx,e.shx*this.shy+e.sy*this.sy,e.tx*this.sx+e.ty*this.shx+this.tx,e.tx*this.shy+e.ty*this.sy+this.ty)},R.prototype.decompose=function(){var e=this.sx,t=this.shy,n=this.shx,i=this.sy,r=this.tx,o=this.ty,s=Math.sqrt(e*e+t*t),a=(e/=s)*n+(t/=s)*i;n-=e*a,i-=t*a;var l=Math.sqrt(n*n+i*i);return a/=l,e*(i/=l)<t*(n/=l)&&(e=-e,t=-t,a=-a,s=-s),{scale:new R(s,0,0,l,0,0),translate:new R(1,0,0,1,r,o),rotate:new R(e,t,-t,e,0,0),skew:new R(1,0,a,1,0,0)}},R.prototype.applyToPoint=function(e){return new x(e.x*this.sx+e.y*this.shx+this.tx,e.x*this.shy+e.y*this.sy+this.ty)},R.prototype.applyToRectangle=function(e){var t=this.applyToPoint(e),n=this.applyToPoint(new x(e.x+e.w,e.y+e.h));return new D(t.x,t.y,n.x-t.x,n.y-t.y)},R.prototype.clone=function(){return new R(this.sx,this.shy,this.shx,this.sy,this.tx,this.ty)}}(de.API,"undefined"!=typeof self&&self||"undefined"!=typeof window&&window||"undefined"!=typeof global&&global||Function('return typeof this === "object" && this.content')()||Function("return this")()),g=function(e){var t,n,i,r,o,s,a,l,u,c;for(/[^\x00-\xFF]/.test(e),n=[],i=0,r=(e+=t="\0\0\0\0".slice(e.length%4||4)).length;i<r;i+=4)0!==(o=(e.charCodeAt(i)<<24)+(e.charCodeAt(i+1)<<16)+(e.charCodeAt(i+2)<<8)+e.charCodeAt(i+3))?(s=(o=((o=((o=((o=(o-(c=o%85))/85)-(u=o%85))/85)-(l=o%85))/85)-(a=o%85))/85)%85,n.push(s+33,a+33,l+33,u+33,c+33)):n.push(122);return function(e,n){for(var i=t.length;0<i;i--)e.pop()}(n),String.fromCharCode.apply(String,n)+"~>"},m=function(e){var t,n,i,r,o,s=String,a="length",l="charCodeAt",u="slice",c="replace";for(e[u](-2),e=e[u](0,-2)[c](/\s/g,"")[c]("z","!!!!!"),i=[],r=0,o=(e+=t="uuuuu"[u](e[a]%5||5))[a];r<o;r+=5)n=52200625*(e[l](r)-33)+614125*(e[l](r+1)-33)+7225*(e[l](r+2)-33)+85*(e[l](r+3)-33)+(e[l](r+4)-33),i.push(255&n>>24,255&n>>16,255&n>>8,255&n);return function(e,n){for(var i=t[a];0<i;i--)e.pop()}(i),s.fromCharCode.apply(s,i)},y=function(e){for(var t="",n=0;n<e.length;n+=1)t+=("0"+e.charCodeAt(n).toString(16)).slice(-2);return t+">"},v=function(e){var t=new RegExp(/^([0-9A-Fa-f]{2})+$/);if(-1!==(e=e.replace(/\s/g,"")).indexOf(">")&&(e=e.substr(0,e.indexOf(">"))),e.length%2&&(e+="0"),!1===t.test(e))return"";for(var n="",i=0;i<e.length;i+=2)n+=String.fromCharCode("0x"+(e[i]+e[i+1]));return n},w=function(e,t){t=Object.assign({predictor:1,colors:1,bitsPerComponent:8,columns:1},t);for(var n,i,r=[],o=e.length;o--;)r[o]=e.charCodeAt(o);return n=f.adler32cs.from(e),(i=new Deflater(6)).append(new Uint8Array(r)),e=i.flush(),(r=new Uint8Array(e.length+6)).set(new Uint8Array([120,156])),r.set(e,2),r.set(new Uint8Array([255&n,n>>8&255,n>>16&255,n>>24&255]),e.length+2),String.fromCharCode.apply(null,r)},(f=de.API).processDataByFilters=function(e,t){var n=0,i=e||"",r=[];for("string"==typeof(t=t||[])&&(t=[t]),n=0;n<t.length;n+=1)switch(t[n]){case"ASCII85Decode":case"/ASCII85Decode":i=m(i),r.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":i=g(i),r.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":i=v(i),r.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":i=y(i),r.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":i=w(i),r.push("/FlateDecode");break;default:throw'The filter: "'+t[n]+'" is not implemented'}return{data:i,reverseChain:r.reverse().join(" ")}},(_=de.API).loadFile=function(e,t,n){var i;t=t||!0,n=n||function(){};try{i=function(e,t,n){var i=new XMLHttpRequest,r=[],o=0,s=function(e){var t=e.length,n=String.fromCharCode;for(o=0;o<t;o+=1)r.push(n(255&e.charCodeAt(o)));return r.join("")};if(i.open("GET",e,!t),i.overrideMimeType("text/plain; charset=x-user-defined"),!1===t&&(i.onload=function(){return s(this.responseText)}),i.send(null),200===i.status)return t?s(i.responseText):void 0;console.warn('Unable to load file "'+e+'"')}(e,t)}catch(e){i=void 0}return i},_.loadImageFile=_.loadFile,b=de.API,C="undefined"!=typeof window&&window||"undefined"!=typeof global&&global,E=function(e){var t=i(e);return"undefined"===t?"undefined":"string"===t||e instanceof String?"string":"number"===t||e instanceof Number?"number":"function"===t||e instanceof Function?"function":e&&e.constructor===Array?"array":e&&1===e.nodeType?"element":"object"===t?"object":"unknown"},S=function(e,t){var n=document.createElement(e);if(t.className&&(n.className=t.className),t.innerHTML){n.innerHTML=t.innerHTML;for(var i=n.getElementsByTagName("script"),r=i.length;0<r--;null)i[r].parentNode.removeChild(i[r])}for(var o in t.style)n.style[o]=t.style[o];return n},(((L=function e(t){var n=Object.assign(e.convert(Promise.resolve()),JSON.parse(JSON.stringify(e.template))),i=e.convert(Promise.resolve(),n);return(i=i.setProgress(1,e,1,[e])).set(t)}).prototype=Object.create(Promise.prototype)).constructor=L).convert=function(e,t){return e.__proto__=t||L.prototype,e},L.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{}}},L.prototype.from=function(e,t){return this.then((function(){switch(t=t||function(e){switch(E(e)){case"string":return"string";case"element":return"canvas"===e.nodeName.toLowerCase?"canvas":"element";default:return"unknown"}}(e)){case"string":return this.set({src:S("div",{innerHTML:e})});case"element":return this.set({src:e});case"canvas":return this.set({canvas:e});case"img":return this.set({img:e});default:return this.error("Unknown source type.")}}))},L.prototype.to=function(e){switch(e){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},L.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then((function(){var e={position:"relative",display:"inline-block",width:Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:"white"},t=function e(t,n){for(var i=3===t.nodeType?document.createTextNode(t.nodeValue):t.cloneNode(!1),r=t.firstChild;r;r=r.nextSibling)!0!==n&&1===r.nodeType&&"SCRIPT"===r.nodeName||i.appendChild(e(r,n));return 1===t.nodeType&&("CANVAS"===t.nodeName?(i.width=t.width,i.height=t.height,i.getContext("2d").drawImage(t,0,0)):"TEXTAREA"!==t.nodeName&&"SELECT"!==t.nodeName||(i.value=t.value),i.addEventListener("load",(function(){i.scrollTop=t.scrollTop,i.scrollLeft=t.scrollLeft}),!0)),i}(this.prop.src,this.opt.html2canvas.javascriptEnabled);"BODY"===t.tagName&&(e.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=S("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=S("div",{className:"html2pdf__container",style:e}),this.prop.container.appendChild(t),this.prop.container.firstChild.appendChild(S("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"}))},L.prototype.toCanvas=function(){return this.thenList([function(){return document.body.contains(this.prop.container)||this.toContainer()}]).then((function(){var e=Object.assign({},this.opt.html2canvas);if(delete e.onrendered,this.isHtml2CanvasLoaded())return html2canvas(this.prop.container,e)})).then((function(e){(this.opt.html2canvas.onrendered||function(){})(e),this.prop.canvas=e,document.body.removeChild(this.prop.overlay)}))},L.prototype.toContext2d=function(){return this.thenList([function(){return document.body.contains(this.prop.container)||this.toContainer()}]).then((function(){var e=this.opt.jsPDF,t=Object.assign({async:!0,allowTaint:!0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete t.onrendered,e.context2d.autoPaging=!0,e.context2d.posX=this.opt.x,e.context2d.posY=this.opt.y,t.windowHeight=t.windowHeight||0,t.windowHeight=0==t.windowHeight?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):t.windowHeight,this.isHtml2CanvasLoaded())return html2canvas(this.prop.container,t)})).then((function(e){(this.opt.html2canvas.onrendered||function(){})(e),this.prop.canvas=e,document.body.removeChild(this.prop.overlay)}))},L.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then((function(){var e=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=e}))},L.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then((function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF}))},L.prototype.output=function(e,t,n){return"img"===(n=n||"pdf").toLowerCase()||"image"===n.toLowerCase()?this.outputImg(e,t):this.outputPdf(e,t)},L.prototype.outputPdf=function(e,t){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then((function(){return this.prop.pdf.output(e,t)}))},L.prototype.outputImg=function(e,t){return this.thenList([function(){return this.prop.img||this.toImg()}]).then((function(){switch(e){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+e+'" is not supported.'}}))},L.prototype.isHtml2CanvasLoaded=function(){var e=void 0!==C.html2canvas;return e||console.error("html2canvas not loaded."),e},L.prototype.save=function(e){if(this.isHtml2CanvasLoaded())return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(e?{filename:e}:null).then((function(){this.prop.pdf.save(this.opt.filename)}))},L.prototype.doCallback=function(e){if(this.isHtml2CanvasLoaded())return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then((function(){this.prop.callback(this.prop.pdf)}))},L.prototype.set=function(e){if("object"!==E(e))return this;var t=Object.keys(e||{}).map((function(t){if(t in L.template.prop)return function(){this.prop[t]=e[t]};switch(t){case"margin":return this.setMargin.bind(this,e.margin);case"jsPDF":return function(){return this.opt.jsPDF=e.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,e.pageSize);default:return function(){this.opt[t]=e[t]}}}),this);return this.then((function(){return this.thenList(t)}))},L.prototype.get=function(e,t){return this.then((function(){var n=e in L.template.prop?this.prop[e]:this.opt[e];return t?t(n):n}))},L.prototype.setMargin=function(e){return this.then((function(){switch(E(e)){case"number":e=[e,e,e,e];case"array":if(2===e.length&&(e=[e[0],e[1],e[0],e[1]]),4===e.length)break;default:return this.error("Invalid margin array.")}this.opt.margin=e})).then(this.setPageSize)},L.prototype.setPageSize=function(e){function t(e,t){return Math.floor(e*t/72*96)}return this.then((function(){(e=e||de.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(e.inner={width:e.width-this.opt.margin[1]-this.opt.margin[3],height:e.height-this.opt.margin[0]-this.opt.margin[2]},e.inner.px={width:t(e.inner.width,e.k),height:t(e.inner.height,e.k)},e.inner.ratio=e.inner.height/e.inner.width),this.prop.pageSize=e}))},L.prototype.setProgress=function(e,t,n,i){return null!=e&&(this.progress.val=e),null!=t&&(this.progress.state=t),null!=n&&(this.progress.n=n),null!=i&&(this.progress.stack=i),this.progress.ratio=this.progress.val/this.progress.state,this},L.prototype.updateProgress=function(e,t,n,i){return this.setProgress(e?this.progress.val+e:null,t||null,n?this.progress.n+n:null,i?this.progress.stack.concat(i):null)},L.prototype.then=function(e,t){var n=this;return this.thenCore(e,t,(function(e,t){return n.updateProgress(null,null,1,[e]),Promise.prototype.then.call(this,(function(t){return n.updateProgress(null,e),t})).then(e,t).then((function(e){return n.updateProgress(1),e}))}))},L.prototype.thenCore=function(e,t,n){n=n||Promise.prototype.then;var i=this;e&&(e=e.bind(i)),t&&(t=t.bind(i));var r=-1!==Promise.toString().indexOf("[native code]")&&"Promise"===Promise.name?i:L.convert(Object.assign({},i),Promise.prototype),o=n.call(r,e,t);return L.convert(o,i.__proto__)},L.prototype.thenExternal=function(e,t){return Promise.prototype.then.call(this,e,t)},L.prototype.thenList=function(e){var t=this;return e.forEach((function(e){t=t.thenCore(e)})),t},L.prototype.catch=function(e){e&&(e=e.bind(this));var t=Promise.prototype.catch.call(this,e);return L.convert(t,this)},L.prototype.catchExternal=function(e){return Promise.prototype.catch.call(this,e)},L.prototype.error=function(e){return this.then((function(){throw new Error(e)}))},L.prototype.using=L.prototype.set,L.prototype.saveAs=L.prototype.save,L.prototype.export=L.prototype.output,L.prototype.run=L.prototype.then,de.getPageSize=function(e,t,n){if("object"===i(e)){var r=e;e=r.orientation,t=r.unit||t,n=r.format||n}t=t||"mm",n=n||"a4",e=(""+(e||"P")).toLowerCase();var o=(""+n).toLowerCase(),s={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(t){case"pt":var a=1;break;case"mm":a=72/25.4;break;case"cm":a=72/2.54;break;case"in":a=72;break;case"px":a=.75;break;case"pc":case"em":a=12;break;case"ex":a=6;break;default:throw"Invalid unit: "+t}if(s.hasOwnProperty(o))var l=s[o][1]/a,u=s[o][0]/a;else try{l=n[1],u=n[0]}catch(e){throw new Error("Invalid format: "+n)}if("p"===e||"portrait"===e){if(e="p",l<u){var c=u;u=l,l=c}}else{if("l"!==e&&"landscape"!==e)throw"Invalid orientation: "+e;e="l",u<l&&(c=u,u=l,l=c)}return{width:u,height:l,unit:t,k:a}},b.html=function(e,t){(t=t||{}).callback=t.callback||function(){},t.html2canvas=t.html2canvas||{},t.html2canvas.canvas=t.html2canvas.canvas||this.canvas,t.jsPDF=t.jsPDF||this;var n=new L(t);return t.worker?n:n.from(e).doCallback()},de.API.addJS=function(e){return N=e,this.internal.events.subscribe("postPutResources",(function(e){T=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(T+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),B=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+N+")"),this.internal.out(">>"),this.internal.out("endobj")})),this.internal.events.subscribe("putCatalog",(function(){void 0!==T&&void 0!==B&&this.internal.out("/Names <</JavaScript "+T+" 0 R>>")})),this},(I=de.API).events.push(["postPutResources",function(){var e=this,t=/^(\d+) 0 obj$/;if(0<this.outline.root.children.length)for(var n=e.outline.render().split(/\r\n/),i=0;i<n.length;i++){var r=n[i],o=t.exec(r);null!=o&&e.internal.newObjectDeferredBegin(o[1],!1),e.internal.write(r)}if(this.outline.createNamedDestinations){var s=this.internal.pages.length,a=[];for(i=0;i<s;i++){var l=e.internal.newObject();a.push(l);var u=e.internal.getPageInfo(i+1);e.internal.write("<< /D["+u.objId+" 0 R /XYZ null null null]>> endobj")}var c=e.internal.newObject();for(e.internal.write("<< /Names [ "),i=0;i<a.length;i++)e.internal.write("(page_"+(i+1)+")"+a[i]+" 0 R");e.internal.write(" ] >>","endobj"),e.internal.newObject(),e.internal.write("<< /Dests "+c+" 0 R"),e.internal.write(">>","endobj")}}]),I.events.push(["putCatalog",function(){0<this.outline.root.children.length&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+namesOid+" 0 R"))}]),I.events.push(["initialized",function(){var e=this;e.outline={createNamedDestinations:!1,root:{children:[]}},e.outline.add=function(e,t,n){var i={title:t,options:n,children:[]};return null==e&&(e=this.root),e.children.push(i),i},e.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=e,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},e.outline.genIds_r=function(t){t.id=e.internal.newObjectDeferred();for(var n=0;n<t.children.length;n++)this.genIds_r(t.children[n])},e.outline.renderRoot=function(e){this.objStart(e),this.line("/Type /Outlines"),0<e.children.length&&(this.line("/First "+this.makeRef(e.children[0])),this.line("/Last "+this.makeRef(e.children[e.children.length-1]))),this.line("/Count "+this.count_r({count:0},e)),this.objEnd()},e.outline.renderItems=function(t){for(var n=this.ctx.pdf.internal.getVerticalCoordinateString,i=0;i<t.children.length;i++){var r=t.children[i];this.objStart(r),this.line("/Title "+this.makeString(r.title)),this.line("/Parent "+this.makeRef(t)),0<i&&this.line("/Prev "+this.makeRef(t.children[i-1])),i<t.children.length-1&&this.line("/Next "+this.makeRef(t.children[i+1])),0<r.children.length&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1])));var o=this.count=this.count_r({count:0},r);if(0<o&&this.line("/Count "+o),r.options&&r.options.pageNumber){var s=e.internal.getPageInfo(r.options.pageNumber);this.line("/Dest ["+s.objId+" 0 R /XYZ 0 "+n(0)+" 0]")}this.objEnd()}for(i=0;i<t.children.length;i++)this.renderItems(r=t.children[i])},e.outline.line=function(e){this.ctx.val+=e+"\r\n"},e.outline.makeRef=function(e){return e.id+" 0 R"},e.outline.makeString=function(t){return"("+e.internal.pdfEscape(t)+")"},e.outline.objStart=function(e){this.ctx.val+="\r\n"+e.id+" 0 obj\r\n<<\r\n"},e.outline.objEnd=function(e){this.ctx.val+=">> \r\nendobj\r\n"},e.outline.count_r=function(e,t){for(var n=0;n<t.children.length;n++)e.count++,this.count_r(e,t.children[n]);return e.count}}]),F=function(){var e="function"==typeof Deflater;if(!e)throw new Error("requires deflate.js for compression");return e},x=function(e,t,n,i){var r=5,o=P;switch(i){case O.image_compression.FAST:r=3,o=H;break;case O.image_compression.MEDIUM:r=6,o=Q;break;case O.image_compression.SLOW:r=9,o=k}e=U(e,t,n,o);var s=new Uint8Array(D(r)),a=R(e),l=new Deflater(r),u=l.append(e),c=l.flush(),h=s.length+u.length+c.length,d=new Uint8Array(h+4);return d.set(s),d.set(u,s.length),d.set(c,s.length+u.length),d[h++]=a>>>24&255,d[h++]=a>>>16&255,d[h++]=a>>>8&255,d[h++]=255&a,O.arrayBufferToBinaryString(d)},D=function(e,t){var n=Math.LOG2E*Math.log(32768)-8<<4|8,i=n<<8;return i|=Math.min(3,(t-1&255)>>1)<<6,i|=0,[n,255&(i+=31-i%31)]},R=function(e,t){for(var n,i=1,r=0,o=e.length,s=0;0<o;){for(o-=n=t<o?t:o;r+=i+=e[s++],--n;);i%=65521,r%=65521}return(r<<16|i)>>>0},U=function(e,t,n,i){for(var r,o,s,a=e.length/t,l=new Uint8Array(e.length+a),u=V(),c=0;c<a;c++){if(r=e.subarray(s=c*t,s+t),i)l.set(i(r,n,o),s+c);else{for(var h=0,d=u.length,A=[];h<d;h++)A[h]=u[h](r,n,o);var p=j(A.concat());l.set(A[p],s+c)}o=r}return l},M=function(e,t,n){var i=Array.apply([],e);return i.unshift(0),i},H=function(e,t,n){var i=[],r=0,o=e.length;for(i[0]=1;r<o;r++)i[r+1]=e[r]-(e[r-t]||0)+256&255;return i},P=function(e,t,n){var i=[],r=0,o=e.length;for(i[0]=2;r<o;r++)i[r+1]=e[r]-(n&&n[r]||0)+256&255;return i},Q=function(e,t,n){var i=[],r=0,o=e.length;for(i[0]=3;r<o;r++)i[r+1]=e[r]+256-((e[r-t]||0)+(n&&n[r]||0)>>>1)&255;return i},k=function(e,t,n){var i,r=[],o=0,s=e.length;for(r[0]=4;o<s;o++)i=z(e[o-t]||0,n&&n[o]||0,n&&n[o-t]||0),r[o+1]=e[o]-i+256&255;return r},z=function(e,t,n){var i=e+t-n,r=Math.abs(i-e),o=Math.abs(i-t),s=Math.abs(i-n);return r<=o&&r<=s?e:o<=s?t:n},V=function(){return[M,H,P,Q,k]},j=function(e){for(var t,n,i,r=0,o=e.length;r<o;)((t=G(e[r].slice(1)))<n||!n)&&(n=t,i=r),r++;return i},G=function(e){for(var t=0,n=e.length,i=0;t<n;)i+=Math.abs(e[t++]);return i},(O=de.API).processPNG=function(e,t,n,i,r){var o,s,a,l,u,c,h=this.color_spaces.DEVICE_RGB,d=this.decode.FLATE_DECODE,A=8;if(this.isArrayBuffer(e)&&(e=new Uint8Array(e)),this.isArrayBufferView(e)){if("function"!=typeof PNG||"function"!=typeof De)throw new Error("PNG support requires png.js and zlib.js");if(e=(o=new PNG(e)).imgData,A=o.bits,h=o.colorSpace,l=o.colors,-1!==[4,6].indexOf(o.colorType)){if(8===o.bits)for(var p,f=(L=32==o.pixelBitlength?new Uint32Array(o.decodePixels().buffer):16==o.pixelBitlength?new Uint16Array(o.decodePixels().buffer):new Uint8Array(o.decodePixels().buffer)).length,g=new Uint8Array(f*o.colors),m=new Uint8Array(f),y=o.pixelBitlength-o.bits,v=0,w=0;v<f;v++){for(_=L[v],p=0;p<y;)g[w++]=_>>>p&255,p+=o.bits;m[v]=_>>>p&255}if(16===o.bits){f=(L=new Uint32Array(o.decodePixels().buffer)).length,g=new Uint8Array(f*(32/o.pixelBitlength)*o.colors),m=new Uint8Array(f*(32/o.pixelBitlength));for(var _,b=1<o.colors,C=w=v=0;v<f;)_=L[v++],g[w++]=_>>>0&255,b&&(g[w++]=_>>>16&255,_=L[v++],g[w++]=_>>>0&255),m[C++]=_>>>16&255;A=8}i!==O.image_compression.NONE&&F()?(e=x(g,o.width*o.colors,o.colors,i),c=x(m,o.width,1,i)):(e=g,c=m,d=null)}if(3===o.colorType&&(h=this.color_spaces.INDEXED,u=o.palette,o.transparency.indexed)){var E=o.transparency.indexed,S=0;for(v=0,f=E.length;v<f;++v)S+=E[v];if((S/=255)==f-1&&-1!==E.indexOf(0))a=[E.indexOf(0)];else if(S!==f){var L=o.decodePixels();for(m=new Uint8Array(L.length),v=0,f=L.length;v<f;v++)m[v]=E[L[v]];c=x(m,o.width,1)}}var T=function(e){var t;switch(e){case O.image_compression.FAST:t=11;break;case O.image_compression.MEDIUM:t=13;break;case O.image_compression.SLOW:t=14;break;default:t=12}return t}(i);return s=d===this.decode.FLATE_DECODE?"/Predictor "+T+" /Colors "+l+" /BitsPerComponent "+A+" /Columns "+o.width:"/Colors "+l+" /BitsPerComponent "+A+" /Columns "+o.width,(this.isArrayBuffer(e)||this.isArrayBufferView(e))&&(e=this.arrayBufferToBinaryString(e)),(c&&this.isArrayBuffer(c)||this.isArrayBufferView(c))&&(c=this.arrayBufferToBinaryString(c)),this.createImageInfo(e,o.width,o.height,h,A,d,t,n,s,a,u,c,T)}throw new Error("Unsupported PNG image data, try using JPEG instead.")},(q=de.API).processGIF89A=function(e,t,n,i,r){var o=new Ne(e),s=o.width,a=o.height,l=[];o.decodeAndBlitFrameRGBA(0,l);var u={data:l,width:s,height:a},c=new Oe(100).encode(u,100);return q.processJPEG.call(this,c,t,n,i)},q.processGIF87A=q.processGIF89A,(W=de.API).processBMP=function(e,t,n,i,r){var o=new Fe(e,!1),s=o.width,a=o.height,l={data:o.getData(),width:s,height:a},u=new Oe(100).encode(l,100);return W.processJPEG.call(this,u,t,n,i)},de.API.setLanguage=function(e){return void 0===this.internal.languageSettings&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),void 0!=={af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"FYRO Macedonian",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]&&(this.internal.languageSettings.languageCode=e,!1===this.internal.languageSettings.isSubscribed&&(this.internal.events.subscribe("putCatalog",(function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")})),this.internal.languageSettings.isSubscribed=!0)),this},X=(K=de.API).getCharWidthsArray=function(e,t){var n,i,r,o=(t=t||{}).font||this.internal.getFont(),s=t.fontSize||this.internal.getFontSize(),a=t.charSpace||this.internal.getCharSpace(),l=t.widths?t.widths:o.metadata.Unicode.widths,u=l.fof?l.fof:1,c=t.kerning?t.kerning:o.metadata.Unicode.kerning,h=c.fof?c.fof:1,d=0,A=l[0]||u,p=[];for(n=0,i=e.length;n<i;n++)r=e.charCodeAt(n),p.push("function"==typeof o.metadata.widthOfString?(o.metadata.widthOfGlyph(o.metadata.characterToGlyph(r))+a*(1e3/s)||0)/1e3:(l[r]||A)/u+(c[r]&&c[r][d]||0)/h),d=r;return p},Y=K.getArraySum=function(e){for(var t=e.length,n=0;t;)n+=e[--t];return n},J=K.getStringUnitWidth=function(e,t){var n=(t=t||{}).fontSize||this.internal.getFontSize(),i=t.font||this.internal.getFont(),r=t.charSpace||this.internal.getCharSpace();return"function"==typeof i.metadata.widthOfString?i.metadata.widthOfString(e,n,r)/n:Y(X.apply(this,arguments))},Z=function(e,t,n,i){for(var r=[],o=0,s=e.length,a=0;o!==s&&a+t[o]<n;)a+=t[o],o++;r.push(e.slice(0,o));var l=o;for(a=0;o!==s;)a+t[o]>i&&(r.push(e.slice(l,o)),a=0,l=o),a+=t[o],o++;return l!==o&&r.push(e.slice(l,o)),r},$=function(e,t,n){n||(n={});var i,r,o,s,a,l,u=[],c=[u],h=n.textIndent||0,d=0,A=0,p=e.split(" "),f=X.apply(this,[" ",n])[0];if(l=-1===n.lineIndent?p[0].length+2:n.lineIndent||0){var g=Array(l).join(" "),m=[];p.map((function(e){1<(e=e.split(/\s*\n/)).length?m=m.concat(e.map((function(e,t){return(t&&e.length?"\n":"")+e}))):m.push(e[0])})),p=m,l=J.apply(this,[g,n])}for(o=0,s=p.length;o<s;o++){var y=0;if(i=p[o],l&&"\n"==i[0]&&(i=i.substr(1),y=1),r=X.apply(this,[i,n]),t<h+d+(A=Y(r))||y){if(t<A){for(a=Z.apply(this,[i,r,t-(h+d),t]),u.push(a.shift()),u=[a.pop()];a.length;)c.push([a.shift()]);A=Y(r.slice(i.length-(u[0]?u[0].length:0)))}else u=[i];c.push(u),h=A+l,d=f}else u.push(i),h+=d+A,d=f}if(l)var v=function(e,t){return(t?g:"")+e.join(" ")};else v=function(e){return e.join(" ")};return c.map(v)},K.splitTextToSize=function(e,t,n){var i,r=(n=n||{}).fontSize||this.internal.getFontSize(),o=(function(e){if(e.widths&&e.kerning)return{widths:e.widths,kerning:e.kerning};var t=this.internal.getFont(e.fontName,e.fontStyle),n="Unicode";return t.metadata[n]?{widths:t.metadata[n].widths||{0:1},kerning:t.metadata[n].kerning||{}}:{font:t.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,n);i=Array.isArray(e)?e:e.split(/\r?\n/);var s=1*this.internal.scaleFactor*t/r;o.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/r:0,o.lineIndent=n.lineIndent;var a,l,u=[];for(a=0,l=i.length;a<l;a++)u=u.concat($.apply(this,[i[a],s,o]));return u},ee=de.API,ne={codePages:["WinAnsiEncoding"],WinAnsiEncoding:(te=function(e){for(var t="klmnopqrstuvwxyz",n={},i=0;i<t.length;i++)n[t[i]]="0123456789abcdef"[i];var r,o,s,a,l,u={},c=1,h=u,d=[],A="",p="",f=e.length-1;for(i=1;i!=f;)l=e[i],i+=1,"'"==l?o=o?(a=o.join(""),r):[]:o?o.push(l):"{"==l?(d.push([h,a]),h={},a=r):"}"==l?((s=d.pop())[0][s[1]]=h,a=r,h=s[0]):"-"==l?c=-1:a===r?n.hasOwnProperty(l)?(A+=n[l],a=parseInt(A,16)*c,c=1,A=""):A+=l:n.hasOwnProperty(l)?(p+=n[l],h[a]=parseInt(p,16)*c,c=1,a=r,p=""):p+=l;return u})("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},ie={Unicode:{Courier:ne,"Courier-Bold":ne,"Courier-BoldOblique":ne,"Courier-Oblique":ne,Helvetica:ne,"Helvetica-Bold":ne,"Helvetica-BoldOblique":ne,"Helvetica-Oblique":ne,"Times-Roman":ne,"Times-Bold":ne,"Times-BoldItalic":ne,"Times-Italic":ne}},re={Unicode:{"Courier-Oblique":te("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":te("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":te("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:te("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":te("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":te("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:te("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:te("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":te("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:te("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":te("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":te("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":te("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":te("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}},ee.events.push(["addFont",function(e){var t,n,i,r=e.font,o="Unicode";(t=re[o][r.postScriptName])&&((n=r.metadata[o]?r.metadata[o]:r.metadata[o]={}).widths=t.widths,n.kerning=t.kerning),(i=ie[o][r.postScriptName])&&((n=r.metadata[o]?r.metadata[o]:r.metadata[o]={}).encoding=i).codePages&&i.codePages.length&&(r.encoding=i.codePages[0])}]),oe=de,"undefined"!=typeof self&&self||"undefined"!=typeof global&&global||"undefined"!=typeof window&&window||Function("return this")(),oe.API.events.push(["addFont",function(e){var t=e.font,n=e.instance;if(void 0!==n&&n.existsFileInVFS(t.postScriptName)){var i=n.getFileFromVFS(t.postScriptName);if("string"!=typeof i)throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+t.postScriptName+"').");t.metadata=oe.API.TTFFont.open(t.postScriptName,t.fontName,i,t.encoding),t.metadata.Unicode=t.metadata.Unicode||{encoding:{},kerning:{},widths:[]},t.metadata.glyIdsUsed=[0]}else if(!1===t.isStandardFont)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+t.postScriptName+"').")}]),(se=de.API).addSvg=function(e,t,n,i,r){if(void 0===t||void 0===n)throw new Error("addSVG needs values for 'x' and 'y'");function o(e){for(var t=parseFloat(e[1]),n=parseFloat(e[2]),i=[],r=3,o=e.length;r<o;)"c"===e[r]?(i.push([parseFloat(e[r+1]),parseFloat(e[r+2]),parseFloat(e[r+3]),parseFloat(e[r+4]),parseFloat(e[r+5]),parseFloat(e[r+6])]),r+=7):"l"===e[r]?(i.push([parseFloat(e[r+1]),parseFloat(e[r+2])]),r+=3):r+=1;return[t,n,i]}var s,a,l,u,c,h,d,A=((a=((d=(l=document).createElement("iframe"),u=".jsPDF_sillysvg_iframe {display:none;position:absolute;}",(h=(c=l).createElement("style")).type="text/css",h.styleSheet?h.styleSheet.cssText=u:h.appendChild(c.createTextNode(u)),c.getElementsByTagName("head")[0].appendChild(h),d.name="childframe",d.setAttribute("width",0),d.setAttribute("height",0),d.setAttribute("frameborder","0"),d.setAttribute("scrolling","no"),d.setAttribute("seamless","seamless"),d.setAttribute("class","jsPDF_sillysvg_iframe"),l.body.appendChild(d),s=d).contentWindow||s.contentDocument).document).write(e),a.close(),a.getElementsByTagName("svg")[0]),p=[1,1],f=parseFloat(A.getAttribute("width")),g=parseFloat(A.getAttribute("height"));f&&g&&(i&&r?p=[i/f,r/g]:i?p=[i/f,i/f]:r&&(p=[r/g,r/g]));var m,y,v,w,_=A.childNodes;for(m=0,y=_.length;m<y;m++)(v=_[m]).tagName&&"PATH"===v.tagName.toUpperCase()&&((w=o(v.getAttribute("d").split(" ")))[0]=w[0]*p[0]+t,w[1]=w[1]*p[1]+n,this.lines.call(this,w[2],w[0],w[1],p));return this},se.addSVG=se.addSvg,se.addSvgAsImage=function(e,t,n,i,r,o,s,a){if(isNaN(t)||isNaN(n))throw console.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(i)||isNaN(r))throw console.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var l=document.createElement("canvas");l.width=i,l.height=r;var u=l.getContext("2d");return u.fillStyle="#fff",u.fillRect(0,0,l.width,l.height),canvg(l,e,{ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0,ignoreClear:!0}),this.addImage(l.toDataURL("image/jpeg",1),t,n,i,r,s,a),this},de.API.putTotalPages=function(e){var t,n;n=parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var i=1;i<=this.internal.getNumberOfPages();i++)for(var r=0;r<this.internal.pages[i].length;r++)this.internal.pages[i][r]=this.internal.pages[i][r].replace(t,n);return this},de.API.viewerPreferences=function(e,t){var n;e=e||{},t=t||!1;var r,o,s={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},a=Object.keys(s),l=[],u=0,c=0,h=0,d=!0;function A(e,t){var n,i=!1;for(n=0;n<e.length;n+=1)e[n]===t&&(i=!0);return i}if(void 0===this.internal.viewerpreferences&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(s)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,"reset"===e||!0===t){var p=a.length;for(h=0;h<p;h+=1)n[a[h]].value=n[a[h]].defaultValue,n[a[h]].explicitSet=!1}if("object"===i(e))for(r in e)if(o=e[r],A(a,r)&&void 0!==o){if("boolean"===n[r].type&&"boolean"==typeof o)n[r].value=o;else if("name"===n[r].type&&A(n[r].valueSet,o))n[r].value=o;else if("integer"===n[r].type&&Number.isInteger(o))n[r].value=o;else if("array"===n[r].type){for(u=0;u<o.length;u+=1)if(d=!0,1===o[u].length&&"number"==typeof o[u][0])l.push(String(o[u]-1));else if(1<o[u].length){for(c=0;c<o[u].length;c+=1)"number"!=typeof o[u][c]&&(d=!1);!0===d&&l.push([o[u][0]-1,o[u][1]-1].join(" "))}n[r].value="["+l.join(" ")+"]"}else n[r].value=n[r].defaultValue;n[r].explicitSet=!0}return!1===this.internal.viewerpreferences.isSubscribed&&(this.internal.events.subscribe("putCatalog",(function(){var e,t=[];for(e in n)!0===n[e].explicitSet&&t.push("name"===n[e].type?"/"+e+" /"+n[e].value:"/"+e+" "+n[e].value);0!==t.length&&this.internal.write("/ViewerPreferences\n<<\n"+t.join("\n")+"\n>>")})),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},ue=le=ae="",de.API.addMetadata=function(e,t){return le=t||"http://jspdf.default.namespaceuri/",ae=e,this.internal.events.subscribe("postPutResources",(function(){if(ae){var e='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+le+'"><jspdf:metadata>',t=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),n=unescape(encodeURIComponent(e)),i=unescape(encodeURIComponent(ae)),r=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),o=unescape(encodeURIComponent("</x:xmpmeta>")),s=n.length+i.length+r.length+t.length+o.length;ue=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+s+" >>"),this.internal.write("stream"),this.internal.write(t+n+i+r+o),this.internal.write("endstream"),this.internal.write("endobj")}else ue=""})),this.internal.events.subscribe("putCatalog",(function(){ue&&this.internal.write("/Metadata "+ue+" 0 R")})),this},function(e,t){var n=e.API,i=n.pdfEscape16=function(e,t){for(var n,i=t.metadata.Unicode.widths,r=["","0","00","000","0000"],o=[""],s=0,a=e.length;s<a;++s){if(n=t.metadata.characterToGlyph(e.charCodeAt(s)),t.metadata.glyIdsUsed.push(n),t.metadata.toUnicode[n]=e.charCodeAt(s),-1==i.indexOf(n)&&(i.push(n),i.push([parseInt(t.metadata.widthOfGlyph(n),10)])),"0"==n)return o.join("");n=n.toString(16),o.push(r[4-n.length],n)}return o.join("")},r=function(e){var t,n,i,r,o,s,a;for(o="/CIDInit /ProcSet findresource begin\n12 dict begin\nbegincmap\n/CIDSystemInfo <<\n  /Registry (Adobe)\n  /Ordering (UCS)\n  /Supplement 0\n>> def\n/CMapName /Adobe-Identity-UCS def\n/CMapType 2 def\n1 begincodespacerange\n<0000><ffff>\nendcodespacerange",i=[],s=0,a=(n=Object.keys(e).sort((function(e,t){return e-t}))).length;s<a;s++)t=n[s],100<=i.length&&(o+="\n"+i.length+" beginbfchar\n"+i.join("\n")+"\nendbfchar",i=[]),r=("0000"+e[t].toString(16)).slice(-4),t=("0000"+(+t).toString(16)).slice(-4),i.push("<"+t+"><"+r+">");return i.length&&(o+="\n"+i.length+" beginbfchar\n"+i.join("\n")+"\nendbfchar\n"),o+"endcmap\nCMapName currentdict /CMap defineresource pop\nend\nend"};n.events.push(["putFont",function(t){!function(t,n,i,o){if(t.metadata instanceof e.API.TTFFont&&"Identity-H"===t.encoding){for(var s=t.metadata.Unicode.widths,a=t.metadata.subset.encode(t.metadata.glyIdsUsed,1),l="",u=0;u<a.length;u++)l+=String.fromCharCode(a[u]);var c=i();o({data:l,addLength1:!0}),n("endobj");var h=i();o({data:r(t.metadata.toUnicode),addLength1:!0}),n("endobj");var d=i();n("<<"),n("/Type /FontDescriptor"),n("/FontName /"+t.fontName),n("/FontFile2 "+c+" 0 R"),n("/FontBBox "+e.API.PDFObject.convert(t.metadata.bbox)),n("/Flags "+t.metadata.flags),n("/StemV "+t.metadata.stemV),n("/ItalicAngle "+t.metadata.italicAngle),n("/Ascent "+t.metadata.ascender),n("/Descent "+t.metadata.decender),n("/CapHeight "+t.metadata.capHeight),n(">>"),n("endobj");var A=i();n("<<"),n("/Type /Font"),n("/BaseFont /"+t.fontName),n("/FontDescriptor "+d+" 0 R"),n("/W "+e.API.PDFObject.convert(s)),n("/CIDToGIDMap /Identity"),n("/DW 1000"),n("/Subtype /CIDFontType2"),n("/CIDSystemInfo"),n("<<"),n("/Supplement 0"),n("/Registry (Adobe)"),n("/Ordering ("+t.encoding+")"),n(">>"),n(">>"),n("endobj"),t.objectNumber=i(),n("<<"),n("/Type /Font"),n("/Subtype /Type0"),n("/ToUnicode "+h+" 0 R"),n("/BaseFont /"+t.fontName),n("/Encoding /"+t.encoding),n("/DescendantFonts ["+A+" 0 R]"),n(">>"),n("endobj"),t.isAlreadyPutted=!0}}(t.font,t.out,t.newObject,t.putStream)}]),n.events.push(["putFont",function(t){!function(t,n,i,o){if(t.metadata instanceof e.API.TTFFont&&"WinAnsiEncoding"===t.encoding){for(var s=t.metadata.rawData,a="",l=0;l<s.length;l++)a+=String.fromCharCode(s[l]);var u=i();o({data:a,addLength1:!0}),n("endobj");var c=i();o({data:r(t.metadata.toUnicode),addLength1:!0}),n("endobj");var h=i();for(n("<<"),n("/Descent "+t.metadata.decender),n("/CapHeight "+t.metadata.capHeight),n("/StemV "+t.metadata.stemV),n("/Type /FontDescriptor"),n("/FontFile2 "+u+" 0 R"),n("/Flags 96"),n("/FontBBox "+e.API.PDFObject.convert(t.metadata.bbox)),n("/FontName /"+t.fontName),n("/ItalicAngle "+t.metadata.italicAngle),n("/Ascent "+t.metadata.ascender),n(">>"),n("endobj"),t.objectNumber=i(),l=0;l<t.metadata.hmtx.widths.length;l++)t.metadata.hmtx.widths[l]=parseInt(t.metadata.hmtx.widths[l]*(1e3/t.metadata.head.unitsPerEm));n("<</Subtype/TrueType/Type/Font/ToUnicode "+c+" 0 R/BaseFont/"+t.fontName+"/FontDescriptor "+h+" 0 R/Encoding/"+t.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(t.metadata.hmtx.widths)+">>"),n("endobj"),t.isAlreadyPutted=!0}}(t.font,t.out,t.newObject,t.putStream)}]);var o=function(e){var t,n,r=e.text||"",o=e.x,s=e.y,a=e.options||{},l=e.mutex||{},u=l.pdfEscape,c=l.activeFontKey,h=l.fonts,d="",A=0,p="",f=h[n=c].encoding;if("Identity-H"!==h[n].encoding)return{text:r,x:o,y:s,options:a,mutex:l};for(p=r,n=c,"[object Array]"===Object.prototype.toString.call(r)&&(p=r[0]),A=0;A<p.length;A+=1)h[n].metadata.hasOwnProperty("cmap")&&(t=h[n].metadata.cmap.unicode.codeMap[p[A].charCodeAt(0)]),t||p[A].charCodeAt(0)<256&&h[n].metadata.hasOwnProperty("Unicode")?d+=p[A]:d+="";var g="";return parseInt(n.slice(1))<14||"WinAnsiEncoding"===f?g=function(e){for(var t="",n=0;n<e.length;n++)t+=""+e.charCodeAt(n).toString(16);return t}(u(d,n)):"Identity-H"===f&&(g=i(d,h[n])),l.isHex=!0,{text:g,x:o,y:s,options:a,mutex:l}};n.events.push(["postProcessText",function(e){var t=e.text||"",n=[],i={text:t,x:e.x,y:e.y,options:e.options,mutex:e.mutex};if("[object Array]"===Object.prototype.toString.call(t)){var r=0;for(r=0;r<t.length;r+=1)"[object Array]"===Object.prototype.toString.call(t[r])&&3===t[r].length?n.push([o(Object.assign({},i,{text:t[r][0]})).text,t[r][1],t[r][2]]):n.push(o(Object.assign({},i,{text:t[r]})).text);e.text=n}else e.text=o(Object.assign({},i,{text:t})).text}])}(de,"undefined"!=typeof self&&self||"undefined"!=typeof global&&global||"undefined"!=typeof window&&window||Function("return this")()),he=function(e){return void 0!==e&&(void 0===e.vFS&&(e.vFS={}),!0)},(ce=de.API).existsFileInVFS=function(e){return!!he(this.internal)&&void 0!==this.internal.vFS[e]},ce.addFileToVFS=function(e,t){return he(this.internal),this.internal.vFS[e]=t,this},ce.getFileFromVFS=function(e){return he(this.internal),void 0!==this.internal.vFS[e]?this.internal.vFS[e]:null},de.API.addHTML=function(e,t,n,i,r){if("undefined"==typeof html2canvas&&"undefined"==typeof rasterizeHTML)throw new Error("You need either https://github.com/niklasvh/html2canvas or https://github.com/cburgmer/rasterizeHTML.js");"number"!=typeof t&&(i=t,r=n),"function"==typeof i&&(r=i,i=null),"function"!=typeof r&&(r=function(){});var o=this.internal,s=o.scaleFactor,a=o.pageSize.getWidth(),l=o.pageSize.getHeight();if((i=i||{}).onrendered=(function(e){t=parseInt(t)||0,n=parseInt(n)||0;var o=i.dim||{},u=Object.assign({top:0,right:0,bottom:0,left:0,useFor:"content"},i.margin),c=o.h||Math.min(l,e.height/s),h=o.w||Math.min(a,e.width/s)-t,d=i.format||"JPEG",A=i.imageCompression||"SLOW";if(e.height>l-u.top-u.bottom&&i.pagesplit){var p=function(e,t,n,r,o){var s=document.createElement("canvas");s.height=o,s.width=r;var a=s.getContext("2d");return a.mozImageSmoothingEnabled=!1,a.webkitImageSmoothingEnabled=!1,a.msImageSmoothingEnabled=!1,a.imageSmoothingEnabled=!1,a.fillStyle=i.backgroundColor||"#ffffff",a.fillRect(0,0,r,o),a.drawImage(e,t,n,r,o,0,0,r,o),s},f=(function(){for(var i,o,c=0,f=0,g={},m=!1;;){var y;if(f=0,g.top=0!==c?u.top:n,g.left=0!==c?u.left:t,m=(a-u.left-u.right)*s<e.width,"content"===u.useFor?0===c?(i=Math.min((a-u.left)*s,e.width),o=Math.min((l-u.top)*s,e.height-c)):(i=Math.min(a*s,e.width),o=Math.min(l*s,e.height-c),g.top=0):(i=Math.min((a-u.left-u.right)*s,e.width),o=Math.min((l-u.bottom-u.top)*s,e.height-c)),m)for(;;){"content"===u.useFor&&(0===f?i=Math.min((a-u.left)*s,e.width):(i=Math.min(a*s,e.width-f),g.left=0));var v=[y=p(e,f,c,i,o),g.left,g.top,y.width/s,y.height/s,d,null,A];if(this.addImage.apply(this,v),(f+=i)>=e.width)break;this.addPage()}else v=[y=p(e,0,c,i,o),g.left,g.top,y.width/s,y.height/s,d,null,A],this.addImage.apply(this,v);if((c+=o)>=e.height)break;this.addPage()}r(h,c,null,v)}).bind(this);if("CANVAS"===e.nodeName){var g=new Image;g.onload=f,g.src=e.toDataURL("image/png"),e=g}else f()}else{var m=Math.random().toString(35),y=[e,t,n,h,c,d,m,A];this.addImage.apply(this,y),r(h,c,m,y)}}).bind(this),"undefined"!=typeof html2canvas&&!i.rstz)return html2canvas(e,i);if("undefined"==typeof rasterizeHTML)return null;var u="drawDocument";return"string"==typeof e&&(u=/^http/.test(e)?"drawURL":"drawHTML"),i.width=i.width||a*s,rasterizeHTML[u](e,void 0,i).then((function(e){i.onrendered(e.image)}),(function(e){r(null,e)}))},function(e){var t,n,r,o,s,a,l,u,c,h,d,A,p,f,g,m,y,v,w,_;t=function(){return function(t){return e.prototype=t,new e};function e(){}}(),h=function(e){var t,n,i,r,o,s,a;for(n=0,i=e.length,t=void 0,s=r=!1;!r&&n!==i;)(t=e[n]=e[n].trimLeft())&&(r=!0),n++;for(n=i-1;i&&!s&&-1!==n;)(t=e[n]=e[n].trimRight())&&(s=!0),n--;for(o=/\s+$/g,a=!0,n=0;n!==i;)"\u2028"!=e[n]&&(t=e[n].replace(/\s+/g," "),a&&(t=t.trimLeft()),t&&(a=o.test(t)),e[n]=t),n++;return e},A=function(e){var t,n,i;for(t=void 0,n=(i=e.split(",")).shift();!t&&n;)t=r[n.trim().toLowerCase()],n=i.shift();return t},p=function(e){var t;return-1<(e="auto"===e?"0px":e).indexOf("em")&&!isNaN(Number(e.replace("em","")))&&(e=18.719*Number(e.replace("em",""))+"px"),-1<e.indexOf("pt")&&!isNaN(Number(e.replace("pt","")))&&(e=1.333*Number(e.replace("pt",""))+"px"),(t=f[e])?t:void 0!==(t={"xx-small":9,"x-small":11,small:13,medium:16,large:19,"x-large":23,"xx-large":28,auto:0}[e])||(t=parseFloat(e))?f[e]=t/16:(t=e.match(/([\d\.]+)(px)/),f[e]=Array.isArray(t)&&3===t.length?parseFloat(t[1])/16:1)},c=function(e){var t,n,i,r,c;return c=e,r=document.defaultView&&document.defaultView.getComputedStyle?document.defaultView.getComputedStyle(c,null):c.currentStyle?c.currentStyle:c.style,n=void 0,(t={})["font-family"]=A((i=function(e){return e=e.replace(/-\D/g,(function(e){return e.charAt(1).toUpperCase()})),r[e]})("font-family"))||"times",t["font-style"]=o[i("font-style")]||"normal",t["text-align"]=s[i("text-align")]||"left","bold"===(n=a[i("font-weight")]||"normal")&&(t["font-style"]="normal"===t["font-style"]?n:n+t["font-style"]),t["font-size"]=p(i("font-size"))||1,t["line-height"]=p(i("line-height"))||1,t.display="inline"===i("display")?"inline":"block",t["margin-top"]=(n="block"===t.display)&&p(i("margin-top"))||0,t["margin-bottom"]=n&&p(i("margin-bottom"))||0,t["padding-top"]=n&&p(i("padding-top"))||0,t["padding-bottom"]=n&&p(i("padding-bottom"))||0,t["margin-left"]=n&&p(i("margin-left"))||0,t["margin-right"]=n&&p(i("margin-right"))||0,t["padding-left"]=n&&p(i("padding-left"))||0,t["padding-right"]=n&&p(i("padding-right"))||0,t["page-break-before"]=i("page-break-before")||"auto",t.float=l[i("cssFloat")]||"none",t.clear=u[i("clear")]||"none",t.color=i("color"),t},g=function(e,t,n){var i,r,o,s,a;if(o=!1,s=r=void 0,i=n["#"+e.id])if("function"==typeof i)o=i(e,t);else for(r=0,s=i.length;!o&&r!==s;)o=i[r](e,t),r++;if(i=n[e.nodeName],!o&&i)if("function"==typeof i)o=i(e,t);else for(r=0,s=i.length;!o&&r!==s;)o=i[r](e,t),r++;for(a="string"==typeof e.className?e.className.split(" "):[],r=0;r<a.length;r++)if(i=n["."+a[r]],!o&&i)if("function"==typeof i)o=i(e,t);else for(r=0,s=i.length;!o&&r!==s;)o=i[r](e,t),r++;return o},_=function(e,t){var n,i,r,o,s,a,l,u,c;for(n=[],i=[],r=0,c=e.rows[0].cells.length,l=e.clientWidth;r<c;)i[r]={name:(u=e.rows[0].cells[r]).textContent.toLowerCase().replace(/\s+/g,""),prompt:u.textContent.replace(/\r?\n/g,""),width:u.clientWidth/l*t.pdf.internal.pageSize.getWidth()},r++;for(r=1;r<e.rows.length;){for(a=e.rows[r],s={},o=0;o<a.cells.length;)s[i[o].name]=a.cells[o].textContent.replace(/\r?\n/g,""),o++;n.push(s),r++}return{rows:n,headers:i}};var b={SCRIPT:1,STYLE:1,NOSCRIPT:1,OBJECT:1,EMBED:1,SELECT:1},C=1;n=function(e,r,o){var s,a,l,u,h,d,A,p;for(a=e.childNodes,s=void 0,(h="block"===(l=c(e)).display)&&(r.setBlockBoundary(),r.setBlockStyle(l)),u=0,d=a.length;u<d;){if("object"===i(s=a[u])){if(r.executeWatchFunctions(s),1===s.nodeType&&"HEADER"===s.nodeName){var f=s,y=r.pdf.margins_doc.top;r.pdf.internal.events.subscribe("addPage",(function(e){r.y=y,n(f,r,o),r.pdf.margins_doc.top=r.y+10,r.y+=10}),!1)}if(8===s.nodeType&&"#comment"===s.nodeName)~s.textContent.indexOf("ADD_PAGE")&&(r.pdf.addPage(),r.y=r.pdf.margins_doc.top);else if(1!==s.nodeType||b[s.nodeName])if(3===s.nodeType){var v=s.nodeValue;if(s.nodeValue&&"LI"===s.parentNode.nodeName)if("OL"===s.parentNode.parentNode.nodeName)v=C+++". "+v;else{var w=l["font-size"],E=(3-.75*w)*r.pdf.internal.scaleFactor,S=.75*w*r.pdf.internal.scaleFactor,L=1.74*w/r.pdf.internal.scaleFactor;p=function(e,t){this.pdf.circle(e+E,t+S,L,"FD")}}16&s.ownerDocument.body.compareDocumentPosition(s)&&r.addText(v,l)}else"string"==typeof s&&r.addText(s,l);else{var T;if("IMG"===s.nodeName){var B=s.getAttribute("src");T=m[r.pdf.sHashCode(B)||B]}if(T){r.pdf.internal.pageSize.getHeight()-r.pdf.margins_doc.bottom<r.y+s.height&&r.y>r.pdf.margins_doc.top&&(r.pdf.addPage(),r.y=r.pdf.margins_doc.top,r.executeWatchFunctions(s));var N=c(s),I=r.x,O=12/r.pdf.internal.scaleFactor,F=(N["margin-left"]+N["padding-left"])*O,x=(N["margin-right"]+N["padding-right"])*O,D=(N["margin-top"]+N["padding-top"])*O,R=(N["margin-bottom"]+N["padding-bottom"])*O;r.pdf.addImage(T,I+=void 0!==N.float&&"right"===N.float?r.settings.width-s.width-x:F,r.y+D,s.width,s.height),T=void 0,"right"===N.float||"left"===N.float?(r.watchFunctions.push((function(e,t,n,i){return r.y>=t?(r.x+=e,r.settings.width+=n,!0):!!(i&&1===i.nodeType&&!b[i.nodeName]&&r.x+i.width>r.pdf.margins_doc.left+r.pdf.margins_doc.width)&&(r.x+=e,r.y=t,r.settings.width+=n,!0)}).bind(this,"left"===N.float?-s.width-F-x:0,r.y+s.height+D+R,s.width)),r.watchFunctions.push((function(e,t,n){return!(r.y<e&&t===r.pdf.internal.getNumberOfPages())||1===n.nodeType&&"both"===c(n).clear&&(r.y=e,!0)}).bind(this,r.y+s.height,r.pdf.internal.getNumberOfPages())),r.settings.width-=s.width+F+x,"left"===N.float&&(r.x+=s.width+F+x)):r.y+=s.height+D+R}else if("TABLE"===s.nodeName)A=_(s,r),r.y+=10,r.pdf.table(r.x,r.y,A.rows,A.headers,{autoSize:!1,printHeaders:o.printHeaders,margins:r.pdf.margins_doc,css:c(s)}),r.y=r.pdf.lastCellPos.y+r.pdf.lastCellPos.h+20;else if("OL"===s.nodeName||"UL"===s.nodeName)C=1,g(s,r,o)||n(s,r,o),r.y+=10;else if("LI"===s.nodeName){var U=r.x;r.x+=20/r.pdf.internal.scaleFactor,r.y+=3,g(s,r,o)||n(s,r,o),r.x=U}else"BR"===s.nodeName?(r.y+=l["font-size"]*r.pdf.internal.scaleFactor,r.addText("\u2028",t(l))):g(s,r,o)||n(s,r,o)}}u++}if(o.outY=r.y,h)return r.setBlockBoundary(p)},m={},y=function(e,t,n,i){var r,o=e.getElementsByTagName("img"),s=o.length,a=0;function l(){t.pdf.internal.events.publish("imagesLoaded"),i(r)}function u(e,n,i){if(e){var o=new Image;r=++a,o.crossOrigin="",o.onerror=o.onload=function(){if(o.complete&&(0===o.src.indexOf("data:image/")&&(o.width=n||o.width||0,o.height=i||o.height||0),o.width+o.height)){var r=t.pdf.sHashCode(e)||e;m[r]=m[r]||o}--a||l()},o.src=e}}for(;s--;)u(o[s].getAttribute("src"),o[s].width,o[s].height);return a||l()},v=function(e,t,i){var r=e.getElementsByTagName("footer");if(0<r.length){r=r[0];var o=t.pdf.internal.write,s=t.y;t.pdf.internal.write=function(){},n(r,t,i);var a=Math.ceil(t.y-s)+5;t.y=s,t.pdf.internal.write=o,t.pdf.margins_doc.bottom+=a;for(var l=function(e){var o=void 0!==e?e.pageNumber:1,s=t.y;t.y=t.pdf.internal.pageSize.getHeight()-t.pdf.margins_doc.bottom,t.pdf.margins_doc.bottom-=a;for(var l=r.getElementsByTagName("span"),u=0;u<l.length;++u)-1<(" "+l[u].className+" ").replace(/[\n\t]/g," ").indexOf(" pageCounter ")&&(l[u].innerHTML=o),-1<(" "+l[u].className+" ").replace(/[\n\t]/g," ").indexOf(" totalPages ")&&(l[u].innerHTML="###jsPDFVarTotalPages###");n(r,t,i),t.pdf.margins_doc.bottom+=a,t.y=s},u=r.getElementsByTagName("span"),c=0;c<u.length;++c)-1<(" "+u[c].className+" ").replace(/[\n\t]/g," ").indexOf(" totalPages ")&&t.pdf.internal.events.subscribe("htmlRenderingFinished",t.pdf.putTotalPages.bind(t.pdf,"###jsPDFVarTotalPages###"),!0);t.pdf.internal.events.subscribe("addPage",l,!1),l(),b.FOOTER=1}},w=function(e,t,i,r,o,s){if(!t)return!1;var a,l,u,c;"string"==typeof t||t.parentNode||(t=""+t.innerHTML),"string"==typeof t&&(a=t.replace(/<\/?script[^>]*?>/gi,""),c="jsPDFhtmlText"+Date.now().toString()+(1e3*Math.random()).toFixed(0),(u=document.createElement("div")).style.cssText="position: absolute !important;clip: rect(1px 1px 1px 1px); /* IE6, IE7 */clip: rect(1px, 1px, 1px, 1px);padding:0 !important;border:0 !important;height: 1px !important;width: 1px !important; top:auto;left:-100px;overflow: hidden;",u.innerHTML='<iframe style="height:1px;width:1px" name="'+c+'" />',document.body.appendChild(u),(l=window.frames[c]).document.open(),l.document.writeln(a),l.document.close(),t=l.document.body);var h,A=new d(e,i,r,o);return y.call(this,t,A,o.elementHandlers,(function(e){v(t,A,o.elementHandlers),n(t,A,o.elementHandlers),A.pdf.internal.events.publish("htmlRenderingFinished"),h=A.dispose(),"function"==typeof s?s(h):e&&console.error("jsPDF Warning: rendering issues? provide a callback to fromHTML!")})),h||{x:A.x,y:A.y}},(d=function(e,t,n,i){return this.pdf=e,this.x=t,this.y=n,this.settings=i,this.watchFunctions=[],this.init(),this}).prototype.init=function(){return this.paragraph={text:[],style:[]},this.pdf.internal.write("q")},d.prototype.dispose=function(){return this.pdf.internal.write("Q"),{x:this.x,y:this.y,ready:!0}},d.prototype.executeWatchFunctions=function(e){var t=!1,n=[];if(0<this.watchFunctions.length){for(var i=0;i<this.watchFunctions.length;++i)!0===this.watchFunctions[i](e)?t=!0:n.push(this.watchFunctions[i]);this.watchFunctions=n}return t},d.prototype.splitFragmentsIntoLines=function(e,n){var i,r,o,s,a,l,u,c,h,d,A,p,f,g;for(d=this.pdf.internal.scaleFactor,s={},l=u=c=g=a=o=h=r=void 0,p=[A=[]],i=0,f=this.settings.width;e.length;)if(a=e.shift(),g=n.shift(),a)if((o=s[(r=g["font-family"])+(h=g["font-style"])])||(o=this.pdf.internal.getFont(r,h).metadata.Unicode,s[r+h]=o),u=this.pdf.getStringUnitWidth(a,c={widths:o.widths,kerning:o.kerning,fontSize:12*g["font-size"],textIndent:i})*c.fontSize/d,"\u2028"==a)p.push(A=[]);else if(f<i+u){for(l=this.pdf.splitTextToSize(a,f,c),A.push([l.shift(),g]);l.length;)A=[[l.shift(),g]],p.push(A);i=this.pdf.getStringUnitWidth(A[0][0],c)*c.fontSize/d}else A.push([a,g]),i+=u;if(void 0!==g["text-align"]&&("center"===g["text-align"]||"right"===g["text-align"]||"justify"===g["text-align"]))for(var m=0;m<p.length;++m){var y=this.pdf.getStringUnitWidth(p[m][0][0],c)*c.fontSize/d;0<m&&(p[m][0][1]=t(p[m][0][1]));var v=f-y;if("right"===g["text-align"])p[m][0][1]["margin-left"]=v;else if("center"===g["text-align"])p[m][0][1]["margin-left"]=v/2;else if("justify"===g["text-align"]){var w=p[m][0][0].split(" ").length-1;p[m][0][1]["word-spacing"]=v/w,m===p.length-1&&(p[m][0][1]["word-spacing"]=0)}}return p},d.prototype.RenderTextFragment=function(e,t){var n,i;i=0,this.pdf.internal.pageSize.getHeight()-this.pdf.margins_doc.bottom<this.y+this.pdf.internal.getFontSize()&&(this.pdf.internal.write("ET","Q"),this.pdf.addPage(),this.y=this.pdf.margins_doc.top,this.pdf.internal.write("q","BT",this.getPdfColor(t.color),this.pdf.internal.getCoordinateString(this.x),this.pdf.internal.getVerticalCoordinateString(this.y),"Td"),i=Math.max(i,t["line-height"],t["font-size"]),this.pdf.internal.write(0,(-12*i).toFixed(2),"Td")),n=this.pdf.internal.getFont(t["font-family"],t["font-style"]);var r=this.getPdfColor(t.color);r!==this.lastTextColor&&(this.pdf.internal.write(r),this.lastTextColor=r),void 0!==t["word-spacing"]&&0<t["word-spacing"]&&this.pdf.internal.write(t["word-spacing"].toFixed(2),"Tw"),this.pdf.internal.write("/"+n.id,(12*t["font-size"]).toFixed(2),"Tf","("+this.pdf.internal.pdfEscape(e)+") Tj"),void 0!==t["word-spacing"]&&this.pdf.internal.write(0,"Tw")},d.prototype.getPdfColor=function(e){var t,n,i,r=/rgb\s*\(\s*(\d+),\s*(\d+),\s*(\d+\s*)\)/.exec(e);if(null!=r)t=parseInt(r[1]),n=parseInt(r[2]),i=parseInt(r[3]);else{if("string"==typeof e&&"#"!=e.charAt(0)){var o=new RGBColor(e);e=o.ok?o.toHex():"#000000"}t=e.substring(1,3),t=parseInt(t,16),n=e.substring(3,5),n=parseInt(n,16),i=e.substring(5,7),i=parseInt(i,16)}if("string"==typeof t&&/^#[0-9A-Fa-f]{6}$/.test(t)){var s=parseInt(t.substr(1),16);t=s>>16&255,n=s>>8&255,i=255&s}var a=this.f3;return 0===t&&0===n&&0===i||void 0===n?a(t/255)+" g":[a(t/255),a(n/255),a(i/255),"rg"].join(" ")},d.prototype.f3=function(e){return e.toFixed(3)},d.prototype.renderParagraph=function(e){var t,n,i,r,o,s,a,l,u,c,d,A,p;if(i=h(this.paragraph.text),A=this.paragraph.style,this.paragraph={text:[],style:[],blockstyle:{},priorblockstyle:t=this.paragraph.blockstyle},i.join("").trim()){a=this.splitFragmentsIntoLines(i,A),l=s=void 0,n=12/this.pdf.internal.scaleFactor,this.priorMarginBottom=this.priorMarginBottom||0,d=(Math.max((t["margin-top"]||0)-this.priorMarginBottom,0)+(t["padding-top"]||0))*n,c=((t["margin-bottom"]||0)+(t["padding-bottom"]||0))*n,this.priorMarginBottom=t["margin-bottom"]||0,"always"===t["page-break-before"]&&(this.pdf.addPage(),this.y=0,d=((t["margin-top"]||0)+(t["padding-top"]||0))*n),u=this.pdf.internal.write,o=r=void 0,this.y+=d,u("q","BT 0 g",this.pdf.internal.getCoordinateString(this.x),this.pdf.internal.getVerticalCoordinateString(this.y),"Td");for(var f=0;a.length;){for(r=l=0,o=(s=a.shift()).length;r!==o;)s[r][0].trim()&&(l=Math.max(l,s[r][1]["line-height"],s[r][1]["font-size"]),p=7*s[r][1]["font-size"]),r++;var g=0,m=0;for(void 0!==s[0][1]["margin-left"]&&0<s[0][1]["margin-left"]&&(g=(m=this.pdf.internal.getCoordinateString(s[0][1]["margin-left"]))-f,f=m),u(g+Math.max(t["margin-left"]||0,0)*n,(-12*l).toFixed(2),"Td"),r=0,o=s.length;r!==o;)s[r][0]&&this.RenderTextFragment(s[r][0],s[r][1]),r++;if(this.y+=l*n,this.executeWatchFunctions(s[0][1])&&0<a.length){var y=[],v=[];a.forEach((function(e){for(var t=0,n=e.length;t!==n;)e[t][0]&&(y.push(e[t][0]+" "),v.push(e[t][1])),++t})),a=this.splitFragmentsIntoLines(h(y),v),u("ET","Q"),u("q","BT 0 g",this.pdf.internal.getCoordinateString(this.x),this.pdf.internal.getVerticalCoordinateString(this.y),"Td")}}return e&&"function"==typeof e&&e.call(this,this.x-9,this.y-p/2),u("ET","Q"),this.y+=c}},d.prototype.setBlockBoundary=function(e){return this.renderParagraph(e)},d.prototype.setBlockStyle=function(e){return this.paragraph.blockstyle=e},d.prototype.addText=function(e,t){return this.paragraph.text.push(e),this.paragraph.style.push(t)},r={helvetica:"helvetica","sans-serif":"helvetica","times new roman":"times",serif:"times",times:"times",monospace:"courier",courier:"courier"},a={100:"normal",200:"normal",300:"normal",400:"normal",500:"bold",600:"bold",700:"bold",800:"bold",900:"bold",normal:"normal",bold:"bold",bolder:"bold",lighter:"normal"},o={normal:"normal",italic:"italic",oblique:"italic"},s={left:"left",right:"right",center:"center",justify:"justify"},l={none:"none",right:"right",left:"left"},u={none:"none",both:"both"},f={normal:1},e.fromHTML=function(e,t,n,i,r,o){return this.margins_doc=o||{top:0,bottom:0},i||(i={}),i.elementHandlers||(i.elementHandlers={}),w(this,e,isNaN(t)?4:t,isNaN(n)?4:n,i,r)}}(de.API),("undefined"!=typeof window&&window||"undefined"!=typeof global&&global).html2pdf=function(e,t,n){var i=t.canvas;if(i){var r,o;if((i.pdf=t).annotations={_nameMap:[],createAnnotation:function(e,n){var i,r=t.context2d._wrapX(n.left),o=t.context2d._wrapY(n.top),s=(t.context2d._page(n.top),e.indexOf("#"));i=0<=s?{name:e.substring(s+1)}:{url:e},t.link(r,o,n.right-n.left,n.bottom-n.top,i)},setName:function(e,n){var i=t.context2d._wrapX(n.left),r=t.context2d._wrapY(n.top),o=t.context2d._page(n.top);this._nameMap[e]={page:o,x:i,y:r}}},i.annotations=t.annotations,t.context2d._pageBreakAt=function(e){this.pageBreaks.push(e)},t.context2d._gotoPage=function(e){for(;t.internal.getNumberOfPages()<e;)t.addPage();t.setPage(e)},"string"==typeof e){e=e.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,"");var s,a,l=document.createElement("iframe");document.body.appendChild(l),null!=(s=l.contentDocument)&&null!=s||(s=l.contentWindow.document),s.open(),s.write(e),s.close(),r=s.body,a=s.body||{},e=s.documentElement||{},o=Math.max(a.scrollHeight,a.offsetHeight,e.clientHeight,e.scrollHeight,e.offsetHeight)}else a=(r=e).body||{},o=Math.max(a.scrollHeight,a.offsetHeight,e.clientHeight,e.scrollHeight,e.offsetHeight);var u={async:!0,allowTaint:!0,backgroundColor:"#ffffff",canvas:i,imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1,windowHeight:o=t.internal.pageSize.getHeight(),scrollY:o};t.context2d.pageWrapYEnabled=!0,t.context2d.pageWrapY=t.internal.pageSize.getHeight(),html2canvas(r,u).then((function(e){n&&(l&&l.parentElement.removeChild(l),n(t))}))}else alert("jsPDF canvas plugin not installed")},window.tmp=html2pdf,function(e){var t=e.BlobBuilder||e.WebKitBlobBuilder||e.MSBlobBuilder||e.MozBlobBuilder;e.URL=e.URL||e.webkitURL||function(e,t){return(t=document.createElement("a")).href=e,t};var n=e.Blob,i=URL.createObjectURL,r=URL.revokeObjectURL,o=e.Symbol&&e.Symbol.toStringTag,s=!1,a=!1,l=!!e.ArrayBuffer,u=t&&t.prototype.append&&t.prototype.getBlob;try{s=2===new Blob(["\xe4"]).size,a=2===new Blob([new Uint8Array([1,2])]).size}catch(s){}function c(e){return e.map((function(e){if(e.buffer instanceof ArrayBuffer){var t=e.buffer;if(e.byteLength!==t.byteLength){var n=new Uint8Array(e.byteLength);n.set(new Uint8Array(t,e.byteOffset,e.byteLength)),t=n.buffer}return t}return e}))}function h(e,n){n=n||{};var i=new t;return c(e).forEach((function(e){i.append(e)})),n.type?i.getBlob(n.type):i.getBlob()}function d(e,t){return new n(c(e),t||{})}if(e.Blob&&(h.prototype=Blob.prototype,d.prototype=Blob.prototype),o)try{File.prototype[o]="File",Blob.prototype[o]="Blob",FileReader.prototype[o]="FileReader"}catch(s){}function A(){var t=!!e.ActiveXObject||"-ms-scroll-limit"in document.documentElement.style&&"-ms-ime-align"in document.documentElement.style,n=e.XMLHttpRequest&&e.XMLHttpRequest.prototype.send;t&&n&&(XMLHttpRequest.prototype.send=function(e){e instanceof Blob&&this.setRequestHeader("Content-Type",e.type),n.call(this,e)});try{new File([],"")}catch(t){try{var i=new Function('class File extends Blob {constructor(chunks, name, opts) {opts = opts || {};super(chunks, opts || {});this.name = name;this.lastModifiedDate = opts.lastModified ? new Date(opts.lastModified) : new Date;this.lastModified = +this.lastModifiedDate;}};return new File([], ""), File')();e.File=i}catch(t){e.File=i=function(e,t,n){var i=new Blob(e,n),r=n&&void 0!==n.lastModified?new Date(n.lastModified):new Date;return i.name=t,i.lastModifiedDate=r,i.lastModified=+r,i.toString=function(){return"[object File]"},o&&(i[o]="File"),i}}}}s?(A(),e.Blob=a?e.Blob:d):u?(A(),e.Blob=h):function(){function t(e){for(var t=[],n=0;n<e.length;n++){var i=e.charCodeAt(n);i<128?t.push(i):i<2048?t.push(192|i>>6,128|63&i):i<55296||57344<=i?t.push(224|i>>12,128|i>>6&63,128|63&i):(n++,i=65536+((1023&i)<<10|1023&e.charCodeAt(n)),t.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|63&i))}return t}function n(e){var t,n,i,r,o,s;for(t="",i=e.length,n=0;n<i;)switch((r=e[n++])>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:t+=String.fromCharCode(r);break;case 12:case 13:o=e[n++],t+=String.fromCharCode((31&r)<<6|63&o);break;case 14:o=e[n++],s=e[n++],t+=String.fromCharCode((15&r)<<12|(63&o)<<6|(63&s)<<0)}return t}function o(e){for(var t=new Array(e.byteLength),n=new Uint8Array(e),i=t.length;i--;)t[i]=n[i];return t}function s(e){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=[],i=0;i<e.length;i+=3){var r=e[i],o=i+1<e.length,s=o?e[i+1]:0,a=i+2<e.length,l=a?e[i+2]:0,u=(15&s)<<2|l>>6,c=63&l;a||(c=64,o||(u=64)),n.push(t[r>>2],t[(3&r)<<4|s>>4],t[u],t[c])}return n.join("")}var a=Object.create||function(e){function t(){}return t.prototype=e,new t};if(l)var u=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],c=ArrayBuffer.isView||function(e){return e&&-1<u.indexOf(Object.prototype.toString.call(e))};function h(e,n){for(var i=0,r=(e=e||[]).length;i<r;i++){var s=e[i];e[i]=s instanceof h?s._buffer:"string"==typeof s?t(s):l&&(ArrayBuffer.prototype.isPrototypeOf(s)||c(s))?o(s):l&&(a=s)&&DataView.prototype.isPrototypeOf(a)?o(s.buffer):t(String(s))}var a;this._buffer=[].concat.apply([],e),this.size=this._buffer.length,this.type=n&&n.type||""}function d(e,t,n){var i=h.call(this,e,n=n||{})||this;return i.name=t,i.lastModifiedDate=n.lastModified?new Date(n.lastModified):new Date,i.lastModified=+i.lastModifiedDate,i}if(h.prototype.slice=function(e,t,n){return new h([this._buffer.slice(e||0,t||this._buffer.length)],{type:n})},h.prototype.toString=function(){return"[object Blob]"},(d.prototype=a(h.prototype)).constructor=d,Object.setPrototypeOf)Object.setPrototypeOf(d,h);else try{d.__proto__=h}catch(a){}function A(){if(!(this instanceof A))throw new TypeError("Failed to construct 'FileReader': Please use the 'new' operator, this DOM object constructor cannot be called as a function.");var e=document.createDocumentFragment();this.addEventListener=e.addEventListener,this.dispatchEvent=function(t){var n=this["on"+t.type];"function"==typeof n&&n(t),e.dispatchEvent(t)},this.removeEventListener=e.removeEventListener}function p(e,t,n){if(!(t instanceof h))throw new TypeError("Failed to execute '"+n+"' on 'FileReader': parameter 1 is not of type 'Blob'.");e.result="",setTimeout((function(){this.readyState=A.LOADING,e.dispatchEvent(new Event("load")),e.dispatchEvent(new Event("loadend"))}))}d.prototype.toString=function(){return"[object File]"},A.EMPTY=0,A.LOADING=1,A.DONE=2,A.prototype.error=null,A.prototype.onabort=null,A.prototype.onerror=null,A.prototype.onload=null,A.prototype.onloadend=null,A.prototype.onloadstart=null,A.prototype.onprogress=null,A.prototype.readAsDataURL=function(e){p(this,e,"readAsDataURL"),this.result="data:"+e.type+";base64,"+s(e._buffer)},A.prototype.readAsText=function(e){p(this,e,"readAsText"),this.result=n(e._buffer)},A.prototype.readAsArrayBuffer=function(e){p(this,e,"readAsText"),this.result=e._buffer.slice()},A.prototype.abort=function(){},URL.createObjectURL=function(e){return e instanceof h?"data:"+e.type+";base64,"+s(e._buffer):i.call(URL,e)},URL.revokeObjectURL=function(e){r&&r.call(URL,e)};var f=e.XMLHttpRequest&&e.XMLHttpRequest.prototype.send;f&&(XMLHttpRequest.prototype.send=function(e){e instanceof h?(this.setRequestHeader("Content-Type",e.type),f.call(this,n(e._buffer))):f.call(this,e)}),e.FileReader=A,e.File=d,e.Blob=h}()}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||"undefined"!=typeof global&&global||Function('return typeof this === "object" && this.content')()||Function("return this")());var Ae,pe,fe,ge,me,ye,ve,we,_e,be,Ce,Ee,Se,Le,Te,Be=Be||function(e){if(!(void 0===e||"undefined"!=typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))){var t=function(){return e.URL||e.webkitURL||e},n=e.document.createElementNS("http://www.w3.org/1999/xhtml","a"),i="download"in n,r=/constructor/i.test(e.HTMLElement)||e.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent),s=e.setImmediate||e.setTimeout,a=function(e){s((function(){throw e}),0)},l=function(e){setTimeout((function(){"string"==typeof e?t().revokeObjectURL(e):e.remove()}),4e4)},u=function(e){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob([String.fromCharCode(65279),e],{type:e.type}):e},c=function(c,h,d){d||(c=u(c));var A,p=this,f="application/octet-stream"===c.type,g=function(){!function(e,t,n){for(var i=(t=[].concat(t)).length;i--;){var r=e["on"+t[i]];if("function"==typeof r)try{r.call(e,e)}catch(e){a(e)}}}(p,"writestart progress write writeend".split(" "))};if(p.readyState=p.INIT,i)return A=t().createObjectURL(c),void s((function(){var e,t;n.href=A,n.download=h,e=n,t=new MouseEvent("click"),e.dispatchEvent(t),g(),l(A),p.readyState=p.DONE}),0);!function(){if((o||f&&r)&&e.FileReader){var n=new FileReader;return n.onloadend=function(){var t=o?n.result:n.result.replace(/^data:[^;]*;/,"data:attachment/file;");e.open(t,"_blank")||(e.location.href=t),t=void 0,p.readyState=p.DONE,g()},n.readAsDataURL(c),p.readyState=p.INIT}A||(A=t().createObjectURL(c)),f?e.location.href=A:e.open(A,"_blank")||(e.location.href=A),p.readyState=p.DONE,g(),l(A)}()},h=c.prototype;return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(e,t,n){return t=t||e.name||"download",n||(e=u(e)),navigator.msSaveOrOpenBlob(e,t)}:(h.abort=function(){},h.readyState=h.INIT=0,h.WRITING=1,h.DONE=2,h.error=h.onwritestart=h.onprogress=h.onwrite=h.onabort=h.onerror=h.onwriteend=null,function(e,t,n){return new c(e,t||e.name||"download",n)})}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||void 0);function Ne(e){var t=0;if(71!==e[t++]||73!==e[t++]||70!==e[t++]||56!==e[t++]||56!=(e[t++]+1&253)||97!==e[t++])throw"Invalid GIF 87a/89a header.";var n=e[t++]|e[t++]<<8,i=e[t++]|e[t++]<<8,r=e[t++];t++,t++;var o=null;r>>7&&(o=t,t+=3*(1<<1+(7&r)));var s=!0,a=[],l=0,u=null,c=0,h=null;for(this.width=n,this.height=i;s&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(11!==e[t]||78==e[t+1]&&69==e[t+2]&&84==e[t+3]&&83==e[t+4]&&67==e[t+5]&&65==e[t+6]&&80==e[t+7]&&69==e[t+8]&&50==e[t+9]&&46==e[t+10]&&48==e[t+11]&&3==e[t+12]&&1==e[t+13]&&0==e[t+16])t+=14,h=e[t++]|e[t++]<<8,t++;else for(t+=12;0!==(b=e[t++]);)t+=b;break;case 249:if(4!==e[t++]||0!==e[t+4])throw"Invalid graphics extension block.";var d=e[t++];l=e[t++]|e[t++]<<8,u=e[t++],0==(1&d)&&(u=null),c=d>>2&7,t++;break;case 254:for(;0!==(b=e[t++]);)t+=b;break;default:throw"Unknown graphic control label: 0x"+e[t-1].toString(16)}break;case 44:var A=e[t++]|e[t++]<<8,p=e[t++]|e[t++]<<8,f=e[t++]|e[t++]<<8,g=e[t++]|e[t++]<<8,m=e[t++],y=m>>6&1,v=o,w=!1;m>>7&&(w=!0,v=t,t+=3*(1<<1+(7&m)));var _=t;for(t++;;){var b;if(0===(b=e[t++]))break;t+=b}a.push({x:A,y:p,width:f,height:g,has_local_palette:w,palette_offset:v,data_offset:_,data_length:t-_,transparent_index:u,interlaced:!!y,delay:l,disposal:c});break;case 59:s=!1;break;default:throw"Unknown gif block: 0x"+e[t-1].toString(16)}this.numFrames=function(){return a.length},this.loopCount=function(){return h},this.frameInfo=function(e){if(e<0||e>=a.length)throw"Frame index out of range.";return a[e]},this.decodeAndBlitFrameBGRA=function(t,i){var r=this.frameInfo(t),o=r.width*r.height,s=new Uint8Array(o);Ie(e,r.data_offset,s,o);var a=r.palette_offset,l=r.transparent_index;null===l&&(l=256);var u=r.width,c=n-u,h=u,d=4*(r.y*n+r.x),A=4*((r.y+r.height)*n+r.x),p=d,f=4*c;!0===r.interlaced&&(f+=4*(u+c)*7);for(var g=8,m=0,y=s.length;m<y;++m){var v=s[m];if(0===h&&(h=u,A<=(p+=f)&&(f=c+4*(u+c)*(g-1),p=d+(u+c)*(g<<1),g>>=1)),v===l)p+=4;else{var w=e[a+3*v],_=e[a+3*v+1];i[p++]=e[a+3*v+2],i[p++]=_,i[p++]=w,i[p++]=255}--h}},this.decodeAndBlitFrameRGBA=function(t,i){var r=this.frameInfo(t),o=r.width*r.height,s=new Uint8Array(o);Ie(e,r.data_offset,s,o);var a=r.palette_offset,l=r.transparent_index;null===l&&(l=256);var u=r.width,c=n-u,h=u,d=4*(r.y*n+r.x),A=4*((r.y+r.height)*n+r.x),p=d,f=4*c;!0===r.interlaced&&(f+=4*(u+c)*7);for(var g=8,m=0,y=s.length;m<y;++m){var v=s[m];if(0===h&&(h=u,A<=(p+=f)&&(f=c+4*(u+c)*(g-1),p=d+(u+c)*(g<<1),g>>=1)),v===l)p+=4;else{var w=e[a+3*v+1],_=e[a+3*v+2];i[p++]=e[a+3*v],i[p++]=w,i[p++]=_,i[p++]=255}--h}}}function Ie(e,t,n,i){for(var r=e[t++],o=1<<r,s=o+1,a=s+1,l=r+1,u=(1<<l)-1,c=0,h=0,d=0,A=e[t++],p=new Int32Array(4096),f=null;;){for(;c<16&&0!==A;)h|=e[t++]<<c,c+=8,1===A?A=e[t++]:--A;if(c<l)break;var g=h&u;if(h>>=l,c-=l,g!==o){if(g===s)break;for(var m=g<a?g:f,y=0,v=m;o<v;)v=p[v]>>8,++y;var w=v;if(i<d+y+(m!==g?1:0))return void console.log("Warning, gif stream longer than expected.");n[d++]=w;var _=d+=y;for(m!==g&&(n[d++]=w),v=m;y--;)n[--_]=255&(v=p[v]),v>>=8;null!==f&&a<4096&&(p[a++]=f<<8|w,u+1<=a&&l<12&&(++l,u=u<<1|1)),f=g}else a=s+1,u=(1<<(l=r+1))-1,f=null}return d!==i&&console.log("Warning, gif stream shorter than expected."),n}try{t.GifWriter=function(e,t,n,i){var r=0,o=void 0===(i=void 0===i?{}:i).loop?null:i.loop,s=void 0===i.palette?null:i.palette;if(t<=0||n<=0||65535<t||65535<n)throw"Width/Height invalid.";function a(e){var t=e.length;if(t<2||256<t||t&t-1)throw"Invalid code/color length, must be power of 2 and 2 .. 256.";return t}e[r++]=71,e[r++]=73,e[r++]=70,e[r++]=56,e[r++]=57,e[r++]=97;var l=0,u=0;if(null!==s){for(var c=a(s);c>>=1;)++l;if(c=1<<l,--l,void 0!==i.background){if(c<=(u=i.background))throw"Background index out of range.";if(0===u)throw"Background index explicitly passed as 0."}}if(e[r++]=255&t,e[r++]=t>>8&255,e[r++]=255&n,e[r++]=n>>8&255,e[r++]=(null!==s?128:0)|l,e[r++]=u,e[r++]=0,null!==s)for(var h=0,d=s.length;h<d;++h){var A=s[h];e[r++]=A>>16&255,e[r++]=A>>8&255,e[r++]=255&A}if(null!==o){if(o<0||65535<o)throw"Loop count invalid.";e[r++]=33,e[r++]=255,e[r++]=11,e[r++]=78,e[r++]=69,e[r++]=84,e[r++]=83,e[r++]=67,e[r++]=65,e[r++]=80,e[r++]=69,e[r++]=50,e[r++]=46,e[r++]=48,e[r++]=3,e[r++]=1,e[r++]=255&o,e[r++]=o>>8&255,e[r++]=0}var p=!1;this.addFrame=function(t,n,i,o,l,u){if(!0===p&&(--r,p=!1),t<0||n<0||65535<t||65535<n)throw"x/y invalid.";if(i<=0||o<=0||65535<i||65535<o)throw"Width/Height invalid.";if(l.length<i*o)throw"Not enough pixels for the frame size.";var c=!0,h=(u=void 0===u?{}:u).palette;if(null==h&&(c=!1,h=s),null==h)throw"Must supply either a local or global palette.";for(var d=a(h),A=0;d>>=1;)++A;d=1<<A;var f=void 0===u.delay?0:u.delay,g=void 0===u.disposal?0:u.disposal;if(g<0||3<g)throw"Disposal out of range.";var m=!1,y=0;if(null!=u.transparent&&(m=!0,(y=u.transparent)<0||d<=y))throw"Transparent color index.";if((0!==g||m||0!==f)&&(e[r++]=33,e[r++]=249,e[r++]=4,e[r++]=g<<2|(!0===m?1:0),e[r++]=255&f,e[r++]=f>>8&255,e[r++]=y,e[r++]=0),e[r++]=44,e[r++]=255&t,e[r++]=t>>8&255,e[r++]=255&n,e[r++]=n>>8&255,e[r++]=255&i,e[r++]=i>>8&255,e[r++]=255&o,e[r++]=o>>8&255,e[r++]=!0===c?128|A-1:0,!0===c)for(var v=0,w=h.length;v<w;++v){var _=h[v];e[r++]=_>>16&255,e[r++]=_>>8&255,e[r++]=255&_}r=function(e,t,n,i){e[t++]=n;var r=t++,o=1<<n,s=o-1,a=o+1,l=a+1,u=n+1,c=0,h=0;function d(n){for(;n<=c;)e[t++]=255&h,h>>=8,c-=8,t===r+256&&(e[r]=255,r=t++)}function A(e){h|=e<<c,c+=u,d(8)}var p=i[0]&s,f={};A(o);for(var g=1,m=i.length;g<m;++g){var y=i[g]&s,v=p<<8|y,w=f[v];if(void 0===w){for(h|=p<<c,c+=u;8<=c;)e[t++]=255&h,h>>=8,c-=8,t===r+256&&(e[r]=255,r=t++);4096===l?(A(o),l=a+1,u=n+1,f={}):(1<<u<=l&&++u,f[v]=l++),p=y}else p=w}return A(p),A(a),d(1),r+1===t?e[r]=0:(e[r]=t-r-1,e[t++]=0),t}(e,r,A<2?2:A,l)},this.end=function(){return!1===p&&(e[r++]=59,p=!0),r}},t.GifReader=Ne}catch(o){}function Oe(e){var t,n,i,r,o,s=Math.floor,a=new Array(64),l=new Array(64),u=new Array(64),c=new Array(64),h=new Array(65535),d=new Array(65535),A=new Array(64),p=new Array(64),f=[],g=0,m=7,y=new Array(64),v=new Array(64),w=new Array(64),_=new Array(256),b=new Array(2048),C=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],E=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],S=[0,1,2,3,4,5,6,7,8,9,10,11],L=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],T=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],B=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],N=[0,1,2,3,4,5,6,7,8,9,10,11],I=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],O=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function F(e,t){for(var n=0,i=0,r=new Array,o=1;o<=16;o++){for(var s=1;s<=e[o];s++)r[t[i]]=[],r[t[i]][0]=n,r[t[i]][1]=o,i++,n++;n*=2}return r}function x(e){for(var t=e[0],n=e[1]-1;0<=n;)t&1<<n&&(g|=1<<m),n--,--m<0&&(255==g?(D(255),D(0)):D(g),m=7,g=0)}function D(e){f.push(e)}function R(e){D(e>>8&255),D(255&e)}function U(e,t,n,i,r){for(var o,s=r[0],a=r[240],l=function(e,t){var n,i,r,o,s,a,l,u,c,h,d=0;for(c=0;c<8;++c){var p=(n=e[d])+(u=e[d+7]),f=n-u,g=(i=e[d+1])+(l=e[d+6]),m=i-l,y=(r=e[d+2])+(a=e[d+5]),v=r-a,w=(o=e[d+3])+(s=e[d+4]),_=o-s,b=p+w,C=p-w,E=g+y,S=g-y;e[d]=b+E,e[d+4]=b-E;var L=.707106781*(S+C);e[d+2]=C+L,e[d+6]=C-L;var T=.382683433*((b=_+v)-(S=m+f)),B=.5411961*b+T,N=1.306562965*S+T,I=.707106781*(E=v+m),O=f+I,F=f-I;e[d+5]=F+B,e[d+3]=F-B,e[d+1]=O+N,e[d+7]=O-N,d+=8}for(c=d=0;c<8;++c){var x=(n=e[d])+(u=e[d+56]),D=n-u,R=(i=e[d+8])+(l=e[d+48]),U=i-l,M=(r=e[d+16])+(a=e[d+40]),H=r-a,P=(o=e[d+24])+(s=e[d+32]),Q=o-s,k=x+P,z=x-P,V=R+M,j=R-M;e[d]=k+V,e[d+32]=k-V;var G=.707106781*(j+z);e[d+16]=z+G,e[d+48]=z-G;var q=.382683433*((k=Q+H)-(j=U+D)),W=.5411961*k+q,K=1.306562965*j+q,X=.707106781*(V=H+U),Y=D+X,J=D-X;e[d+40]=J+W,e[d+24]=J-W,e[d+8]=Y+K,e[d+56]=Y-K,d++}for(c=0;c<64;++c)A[c]=0<(h=e[c]*t[c])?h+.5|0:h-.5|0;return A}(e,t),u=0;u<64;++u)p[C[u]]=l[u];var c=p[0]-n;n=p[0],0==c?x(i[0]):(x(i[d[o=32767+c]]),x(h[o]));for(var f=63;0<f&&0==p[f];f--);if(0==f)return x(s),n;for(var g,m=1;m<=f;){for(var y=m;0==p[m]&&m<=f;++m);var v=m-y;if(16<=v){g=v>>4;for(var w=1;w<=g;++w)x(a);v&=15}x(r[(v<<4)+d[o=32767+p[m]]]),x(h[o]),m++}return 63!=f&&x(s),n}function M(e){e<=0&&(e=1),100<e&&(e=100),o!=e&&(function(e){for(var t=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],n=0;n<64;n++){var i=s((t[n]*e+50)/100);i<1?i=1:255<i&&(i=255),a[C[n]]=i}for(var r=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],o=0;o<64;o++){var h=s((r[o]*e+50)/100);h<1?h=1:255<h&&(h=255),l[C[o]]=h}for(var d=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],A=0,p=0;p<8;p++)for(var f=0;f<8;f++)u[A]=1/(a[C[A]]*d[p]*d[f]*8),c[A]=1/(l[C[A]]*d[p]*d[f]*8),A++}(e<50?Math.floor(5e3/e):Math.floor(200-2*e)),o=e)}this.encode=function(e,o){var s,h;(new Date).getTime(),o&&M(o),f=new Array,g=0,m=7,R(65496),R(65504),R(16),D(74),D(70),D(73),D(70),D(0),D(1),D(1),D(0),R(1),R(1),D(0),D(0),function(){R(65499),R(132),D(0);for(var e=0;e<64;e++)D(a[e]);D(1);for(var t=0;t<64;t++)D(l[t])}(),s=e.width,h=e.height,R(65472),R(17),D(8),R(h),R(s),D(3),D(1),D(17),D(0),D(2),D(17),D(1),D(3),D(17),D(1),function(){R(65476),R(418),D(0);for(var e=0;e<16;e++)D(E[e+1]);for(var t=0;t<=11;t++)D(S[t]);D(16);for(var n=0;n<16;n++)D(L[n+1]);for(var i=0;i<=161;i++)D(T[i]);D(1);for(var r=0;r<16;r++)D(B[r+1]);for(var o=0;o<=11;o++)D(N[o]);D(17);for(var s=0;s<16;s++)D(I[s+1]);for(var a=0;a<=161;a++)D(O[a])}(),R(65498),R(12),D(3),D(1),D(0),D(2),D(17),D(3),D(17),D(0),D(63),D(0);var d=0,A=0,p=0;g=0,m=7,this.encode.displayName="_encode_";for(var _,C,F,H,P,Q,k,z,V,j=e.data,G=e.height,q=4*e.width,W=0;W<G;){for(_=0;_<q;){for(Q=P=q*W+_,k=-1,V=z=0;V<64;V++)Q=P+(z=V>>3)*q+(k=4*(7&V)),G<=W+z&&(Q-=q*(W+1+z-G)),q<=_+k&&(Q-=_+k-q+4),C=j[Q++],F=j[Q++],H=j[Q++],y[V]=(b[C]+b[F+256>>0]+b[H+512>>0]>>16)-128,v[V]=(b[C+768>>0]+b[F+1024>>0]+b[H+1280>>0]>>16)-128,w[V]=(b[C+1280>>0]+b[F+1536>>0]+b[H+1792>>0]>>16)-128;d=U(y,u,d,t,i),A=U(v,c,A,n,r),p=U(w,c,p,n,r),_+=32}W+=8}if(0<=m){var K=[];K[1]=m+1,K[0]=(1<<m+1)-1,x(K)}return R(65497),new Uint8Array(f)},(new Date).getTime(),e||(e=50),function(){for(var e=String.fromCharCode,t=0;t<256;t++)_[t]=e(t)}(),t=F(E,S),n=F(B,N),i=F(L,T),r=F(I,O),function(){for(var e=1,t=2,n=1;n<=15;n++){for(var i=e;i<t;i++)d[32767+i]=n,h[32767+i]=[],h[32767+i][1]=n,h[32767+i][0]=i;for(var r=-(t-1);r<=-e;r++)d[32767+r]=n,h[32767+r]=[],h[32767+r][1]=n,h[32767+r][0]=t-1+r;e<<=1,t<<=1}}(),function(){for(var e=0;e<256;e++)b[e]=19595*e,b[e+256>>0]=38470*e,b[e+512>>0]=7471*e+32768,b[e+768>>0]=-11059*e,b[e+1024>>0]=-21709*e,b[e+1280>>0]=32768*e+8421375,b[e+1536>>0]=-27439*e,b[e+1792>>0]=-5329*e}(),M(e),(new Date).getTime()}function Fe(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,-1===["BM","BA","CI","CP","IC","PT"].indexOf(this.flag))throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}window.tmp=Ne,de.API.adler32cs=(ye="function"==typeof ArrayBuffer&&"function"==typeof Uint8Array,ve=null,we=function(){if(!ye)return function(){return!1};try{var e={};"function"==typeof e.Buffer&&(ve=e.Buffer)}catch(e){}return function(e){return e instanceof ArrayBuffer||null!==ve&&e instanceof ve}}(),_e=null!==ve?function(e){return new ve(e,"utf8").toString("binary")}:function(e){return unescape(encodeURIComponent(e))},be=function(e,t){for(var n=65535&e,i=e>>>16,r=0,o=t.length;r<o;r++)i=(i+(n=(n+(255&t.charCodeAt(r)))%65521))%65521;return(i<<16|n)>>>0},Ce=function(e,t){for(var n=65535&e,i=e>>>16,r=0,o=t.length;r<o;r++)i=(i+(n=(n+t[r])%65521))%65521;return(i<<16|n)>>>0},Se=(Ee={}).Adler32=(((me=(ge=function(e){if(!(this instanceof ge))throw new TypeError("Constructor cannot called be as a function.");if(!isFinite(e=null==e?1:+e))throw new Error("First arguments needs to be a finite number.");this.checksum=e>>>0}).prototype={}).constructor=ge).from=((Ae=function(e){if(!(this instanceof ge))throw new TypeError("Constructor cannot called be as a function.");if(null==e)throw new Error("First argument needs to be a string.");this.checksum=be(1,e.toString())}).prototype=me,Ae),ge.fromUtf8=((pe=function(e){if(!(this instanceof ge))throw new TypeError("Constructor cannot called be as a function.");if(null==e)throw new Error("First argument needs to be a string.");var t=_e(e.toString());this.checksum=be(1,t)}).prototype=me,pe),ye&&(ge.fromBuffer=((fe=function(e){if(!(this instanceof ge))throw new TypeError("Constructor cannot called be as a function.");if(!we(e))throw new Error("First argument needs to be ArrayBuffer.");var t=new Uint8Array(e);return this.checksum=Ce(1,t)}).prototype=me,fe)),me.update=function(e){if(null==e)throw new Error("First argument needs to be a string.");return e=e.toString(),this.checksum=be(this.checksum,e)},me.updateUtf8=function(e){if(null==e)throw new Error("First argument needs to be a string.");var t=_e(e.toString());return this.checksum=be(this.checksum,t)},ye&&(me.updateBuffer=function(e){if(!we(e))throw new Error("First argument needs to be ArrayBuffer.");var t=new Uint8Array(e);return this.checksum=Ce(this.checksum,t)}),me.clone=function(){return new Se(this.checksum)},ge),Ee.from=function(e){if(null==e)throw new Error("First argument needs to be a string.");return be(1,e.toString())},Ee.fromUtf8=function(e){if(null==e)throw new Error("First argument needs to be a string.");var t=_e(e.toString());return be(1,t)},ye&&(Ee.fromBuffer=function(e){if(!we(e))throw new Error("First argument need to be ArrayBuffer.");var t=new Uint8Array(e);return Ce(1,t)}),Ee),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(e){var n,i,r,o,s,a,l,u=t,c=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],h=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],d={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},A={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},p=["(",")","(","<",">","<","[","]","[","{","}","{","\xab","\xbb","\xab","\u2039","\u203a","\u2039","\u2045","\u2046","\u2045","\u207d","\u207e","\u207d","\u208d","\u208e","\u208d","\u2264","\u2265","\u2264","\u2329","\u232a","\u2329","\ufe59","\ufe5a","\ufe59","\ufe5b","\ufe5c","\ufe5b","\ufe5d","\ufe5e","\ufe5d","\ufe64","\ufe65","\ufe64"],f=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),g=!1,m=0;this.__bidiEngine__={};var y=function(e){var t=e.charCodeAt(),n=t>>8,i=A[n];return void 0!==i?u[256*i+(255&t)]:252===n||253===n?"AL":f.test(n)?"L":8===n?"R":"N"},v=function(e){for(var t,n=0;n<e.length;n++){if("L"===(t=y(e.charAt(n))))return!1;if("R"===t)return!0}return!1},w=function(e,t,s,a){var l,u,c,h,d=t[a];switch(d){case"L":case"R":g=!1;break;case"N":case"AN":break;case"EN":g&&(d="AN");break;case"AL":g=!0,d="R";break;case"WS":d="N";break;case"CS":a<1||a+1>=t.length||"EN"!==(l=s[a-1])&&"AN"!==l||"EN"!==(u=t[a+1])&&"AN"!==u?d="N":g&&(u="AN"),d=u===l?u:"N";break;case"ES":d="EN"===(l=0<a?s[a-1]:"B")&&a+1<t.length&&"EN"===t[a+1]?"EN":"N";break;case"ET":if(0<a&&"EN"===s[a-1]){d="EN";break}if(g){d="N";break}for(c=a+1,h=t.length;c<h&&"ET"===t[c];)c++;d=c<h&&"EN"===t[c]?"EN":"N";break;case"NSM":if(r&&!o){for(h=t.length,c=a+1;c<h&&"NSM"===t[c];)c++;if(c<h){var A=e[a];if(l=t[c],(1425<=A&&A<=2303||64286===A)&&("R"===l||"AL"===l)){d="R";break}}}d=a<1||"B"===(l=t[a-1])?"N":s[a-1];break;case"B":n=!(g=!1),d=m;break;case"S":i=!0,d="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":g=!1;break;case"BN":d="N"}return d},_=function(e,t,n){var i=e.split("");return n&&b(i,n,{hiLevel:m}),i.reverse(),t&&t.reverse(),i.join("")},b=function(e,t,r){var o,s,a,l,u,A=-1,p=e.length,f=0,v=[],_=m?h:c,b=[];for(i=n=g=!1,s=0;s<p;s++)b[s]=y(e[s]);for(a=0;a<p;a++){if(u=f,v[a]=w(e,b,v,a),o=240&(f=_[u][d[v[a]]]),t[a]=l=_[f&=15][5],0<o)if(16===o){for(s=A;s<a;s++)t[s]=1;A=-1}else A=-1;if(_[f][6])-1===A&&(A=a);else if(-1<A){for(s=A;s<a;s++)t[s]=l;A=-1}"B"===b[a]&&(t[a]=0),r.hiLevel|=l}i&&function(e,t,n){for(var i=0;i<n;i++)if("S"===e[i]){t[i]=m;for(var r=i-1;0<=r&&"WS"===e[r];r--)t[r]=m}}(b,t,p)},C=function(e,t,i,r,o){if(!(o.hiLevel<e)){if(1===e&&1===m&&!n)return t.reverse(),void(i&&i.reverse());for(var s,a,l,u,c=t.length,h=0;h<c;){if(r[h]>=e){for(l=h+1;l<c&&r[l]>=e;)l++;for(u=h,a=l-1;u<a;u++,a--)s=t[u],t[u]=t[a],t[a]=s,i&&(s=i[u],i[u]=i[a],i[a]=s);h=l}h++}}},E=function(e,t,n){var i=e.split(""),r={hiLevel:m};return n||(n=[]),b(i,n,r),function(e,t,n){if(0!==n.hiLevel&&l)for(var i,r=0;r<e.length;r++)1===t[r]&&0<=(i=p.indexOf(e[r]))&&(e[r]=p[i+1])}(i,n,r),C(2,i,t,n,r),C(1,i,t,n,r),i.join("")};return this.__bidiEngine__.doBidiReorder=function(e,t,n){if(function(e,t){if(t)for(var n=0;n<e.length;n++)t[n]=n;void 0===o&&(o=v(e)),void 0===a&&(a=v(e))}(e,t),r||!s||a)if(r&&s&&o^a)m=o?1:0,e=_(e,t,n);else if(!r&&s&&a)m=o?1:0,e=E(e,t,n),e=_(e,t);else if(!r||o||s||a){if(r&&!s&&o^a)e=_(e,t),e=o?(m=0,E(e,t,n)):(m=1,e=E(e,t,n),_(e,t));else if(r&&o&&!s&&a)m=1,e=E(e,t,n),e=_(e,t);else if(!r&&!s&&o^a){var i=l;o?(m=1,e=E(e,t,n),m=0,l=!1,e=E(e,t,n),l=i):(m=0,e=E(e,t,n),e=_(e,t),l=!(m=1),e=E(e,t,n),l=i,e=_(e,t))}}else m=0,e=E(e,t,n);else m=o?1:0,e=E(e,t,n);return e},this.__bidiEngine__.setOptions=function(e){e&&(r=e.isInputVisual,s=e.isOutputVisual,o=e.isInputRtl,a=e.isOutputRtl,l=e.isSymmetricSwapping)},this.__bidiEngine__.setOptions(e),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(e){var t=e.text,i=[];if("[object Array]"===Object.prototype.toString.call(t)){var r=0;for(i=[],r=0;r<t.length;r+=1)"[object Array]"===Object.prototype.toString.call(t[r])?i.push([n.doBidiReorder(t[r][0]),t[r][1],t[r][2]]):i.push([n.doBidiReorder(t[r])]);e.text=i}else e.text=n.doBidiReorder(t)}])}(de),window.tmp=Oe,Fe.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,16===this.bitPP&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=0===this.colors?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:r,green:i,blue:n,quad:o}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Fe.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP;this.data=new Uint8Array(this.width*this.height*4),this[e]()}catch(e){console.log("bit decode error:"+e)}},Fe.prototype.bit1=function(){var e=Math.ceil(this.width/8),t=e%4,n=0<=this.height?this.height-1:-this.height;for(n=this.height-1;0<=n;n--){for(var i=this.bottom_up?n:this.height-1-n,r=0;r<e;r++)for(var o=this.datav.getUint8(this.pos++,!0),s=i*this.width*4+8*r*4,a=0;a<8&&8*r+a<this.width;a++){var l=this.palette[o>>7-a&1];this.data[s+4*a]=l.blue,this.data[s+4*a+1]=l.green,this.data[s+4*a+2]=l.red,this.data[s+4*a+3]=255}0!=t&&(this.pos+=4-t)}},Fe.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,n=this.height-1;0<=n;n--){for(var i=this.bottom_up?n:this.height-1-n,r=0;r<e;r++){var o=this.datav.getUint8(this.pos++,!0),s=i*this.width*4+2*r*4,a=15&o,l=this.palette[o>>4];if(this.data[s]=l.blue,this.data[s+1]=l.green,this.data[s+2]=l.red,this.data[s+3]=255,2*r+1>=this.width)break;this.data[s+4]=(l=this.palette[a]).blue,this.data[s+4+1]=l.green,this.data[s+4+2]=l.red,this.data[s+4+3]=255}0!=t&&(this.pos+=4-t)}},Fe.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;0<=t;t--){for(var n=this.bottom_up?t:this.height-1-t,i=0;i<this.width;i++){var r=this.datav.getUint8(this.pos++,!0),o=n*this.width*4+4*i;if(r<this.palette.length){var s=this.palette[r];this.data[o]=s.red,this.data[o+1]=s.green,this.data[o+2]=s.blue,this.data[o+3]=255}else this.data[o]=255,this.data[o+1]=255,this.data[o+2]=255,this.data[o+3]=255}0!=e&&(this.pos+=4-e)}},Fe.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),n=this.height-1;0<=n;n--){for(var i=this.bottom_up?n:this.height-1-n,r=0;r<this.width;r++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var s=(o&t)/t*255|0,a=(o>>5&t)/t*255|0,l=o>>15?255:0,u=i*this.width*4+4*r;this.data[u]=(o>>10&t)/t*255|0,this.data[u+1]=a,this.data[u+2]=s,this.data[u+3]=l}this.pos+=e}},Fe.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),n=parseInt("111111",2),i=this.height-1;0<=i;i--){for(var r=this.bottom_up?i:this.height-1-i,o=0;o<this.width;o++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(s&t)/t*255|0,l=(s>>5&n)/n*255|0,u=r*this.width*4+4*o;this.data[u]=(s>>11)/t*255|0,this.data[u+1]=l,this.data[u+2]=a,this.data[u+3]=255}this.pos+=e}},Fe.prototype.bit24=function(){for(var e=this.height-1;0<=e;e--){for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var i=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),s=t*this.width*4+4*n;this.data[s]=o,this.data[s+1]=r,this.data[s+2]=i,this.data[s+3]=255}this.pos+=this.width%4}},Fe.prototype.bit32=function(){for(var e=this.height-1;0<=e;e--)for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var i=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=t*this.width*4+4*n;this.data[a]=o,this.data[a+1]=r,this.data[a+2]=i,this.data[a+3]=s}},Fe.prototype.getData=function(){return this.data},window.tmp=Fe,function(e){var t=[0,1,2,3,4,4,5,5,6,6,6,6,7,7,7,7,8,8,8,8,8,8,8,8,9,9,9,9,9,9,9,9,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,0,0,16,17,18,18,19,19,20,20,20,20,21,21,21,21,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29];function n(){var e=this;function t(e,t){for(var n=0;n|=1&e,e>>>=1,n<<=1,0<--t;);return n>>>1}e.build_tree=function(n){var i,r,o,s=e.dyn_tree,a=e.stat_desc.static_tree,l=e.stat_desc.elems,u=-1;for(n.heap_len=0,n.heap_max=573,i=0;i<l;i++)0!==s[2*i]?(n.heap[++n.heap_len]=u=i,n.depth[i]=0):s[2*i+1]=0;for(;n.heap_len<2;)s[2*(o=n.heap[++n.heap_len]=u<2?++u:0)]=1,n.depth[o]=0,n.opt_len--,a&&(n.static_len-=a[2*o+1]);for(e.max_code=u,i=Math.floor(n.heap_len/2);1<=i;i--)n.pqdownheap(s,i);for(o=l;i=n.heap[1],n.heap[1]=n.heap[n.heap_len--],n.pqdownheap(s,1),r=n.heap[1],n.heap[--n.heap_max]=i,n.heap[--n.heap_max]=r,s[2*o]=s[2*i]+s[2*r],n.depth[o]=Math.max(n.depth[i],n.depth[r])+1,s[2*i+1]=s[2*r+1]=o,n.heap[1]=o++,n.pqdownheap(s,1),2<=n.heap_len;);n.heap[--n.heap_max]=n.heap[1],function(t){var n,i,r,o,s,a,l=e.dyn_tree,u=e.stat_desc.static_tree,c=e.stat_desc.extra_bits,h=e.stat_desc.extra_base,d=e.stat_desc.max_length,A=0;for(o=0;o<=15;o++)t.bl_count[o]=0;for(l[2*t.heap[t.heap_max]+1]=0,n=t.heap_max+1;n<573;n++)d<(o=l[2*l[2*(i=t.heap[n])+1]+1]+1)&&(o=d,A++),l[2*i+1]=o,i>e.max_code||(t.bl_count[o]++,s=0,h<=i&&(s=c[i-h]),t.opt_len+=(a=l[2*i])*(o+s),u&&(t.static_len+=a*(u[2*i+1]+s)));if(0!==A){do{for(o=d-1;0===t.bl_count[o];)o--;t.bl_count[o]--,t.bl_count[o+1]+=2,t.bl_count[d]--,A-=2}while(0<A);for(o=d;0!==o;o--)for(i=t.bl_count[o];0!==i;)(r=t.heap[--n])>e.max_code||(l[2*r+1]!=o&&(t.opt_len+=(o-l[2*r+1])*l[2*r],l[2*r+1]=o),i--)}}(n),function(e,n,i){var r,o,s,a=[],l=0;for(r=1;r<=15;r++)a[r]=l=l+i[r-1]<<1;for(o=0;o<=n;o++)0!==(s=e[2*o+1])&&(e[2*o]=t(a[s]++,s))}(s,e.max_code,n.bl_count)}}function i(e,t,n,i,r){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=i,this.max_length=r}function r(e,t,n,i,r){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=i,this.func=r}n._length_code=[0,1,2,3,4,5,6,7,8,8,9,9,10,10,11,11,12,12,12,12,13,13,13,13,14,14,14,14,15,15,15,15,16,16,16,16,16,16,16,16,17,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,28],n.base_length=[0,1,2,3,4,5,6,7,8,10,12,14,16,20,24,28,32,40,48,56,64,80,96,112,128,160,192,224,0],n.base_dist=[0,1,2,3,4,6,8,12,16,24,32,48,64,96,128,192,256,384,512,768,1024,1536,2048,3072,4096,6144,8192,12288,16384,24576],n.d_code=function(e){return e<256?t[e]:t[256+(e>>>7)]},n.extra_lbits=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],n.extra_dbits=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],n.extra_blbits=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],n.bl_order=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],i.static_ltree=[12,8,140,8,76,8,204,8,44,8,172,8,108,8,236,8,28,8,156,8,92,8,220,8,60,8,188,8,124,8,252,8,2,8,130,8,66,8,194,8,34,8,162,8,98,8,226,8,18,8,146,8,82,8,210,8,50,8,178,8,114,8,242,8,10,8,138,8,74,8,202,8,42,8,170,8,106,8,234,8,26,8,154,8,90,8,218,8,58,8,186,8,122,8,250,8,6,8,134,8,70,8,198,8,38,8,166,8,102,8,230,8,22,8,150,8,86,8,214,8,54,8,182,8,118,8,246,8,14,8,142,8,78,8,206,8,46,8,174,8,110,8,238,8,30,8,158,8,94,8,222,8,62,8,190,8,126,8,254,8,1,8,129,8,65,8,193,8,33,8,161,8,97,8,225,8,17,8,145,8,81,8,209,8,49,8,177,8,113,8,241,8,9,8,137,8,73,8,201,8,41,8,169,8,105,8,233,8,25,8,153,8,89,8,217,8,57,8,185,8,121,8,249,8,5,8,133,8,69,8,197,8,37,8,165,8,101,8,229,8,21,8,149,8,85,8,213,8,53,8,181,8,117,8,245,8,13,8,141,8,77,8,205,8,45,8,173,8,109,8,237,8,29,8,157,8,93,8,221,8,61,8,189,8,125,8,253,8,19,9,275,9,147,9,403,9,83,9,339,9,211,9,467,9,51,9,307,9,179,9,435,9,115,9,371,9,243,9,499,9,11,9,267,9,139,9,395,9,75,9,331,9,203,9,459,9,43,9,299,9,171,9,427,9,107,9,363,9,235,9,491,9,27,9,283,9,155,9,411,9,91,9,347,9,219,9,475,9,59,9,315,9,187,9,443,9,123,9,379,9,251,9,507,9,7,9,263,9,135,9,391,9,71,9,327,9,199,9,455,9,39,9,295,9,167,9,423,9,103,9,359,9,231,9,487,9,23,9,279,9,151,9,407,9,87,9,343,9,215,9,471,9,55,9,311,9,183,9,439,9,119,9,375,9,247,9,503,9,15,9,271,9,143,9,399,9,79,9,335,9,207,9,463,9,47,9,303,9,175,9,431,9,111,9,367,9,239,9,495,9,31,9,287,9,159,9,415,9,95,9,351,9,223,9,479,9,63,9,319,9,191,9,447,9,127,9,383,9,255,9,511,9,0,7,64,7,32,7,96,7,16,7,80,7,48,7,112,7,8,7,72,7,40,7,104,7,24,7,88,7,56,7,120,7,4,7,68,7,36,7,100,7,20,7,84,7,52,7,116,7,3,8,131,8,67,8,195,8,35,8,163,8,99,8,227,8],i.static_dtree=[0,5,16,5,8,5,24,5,4,5,20,5,12,5,28,5,2,5,18,5,10,5,26,5,6,5,22,5,14,5,30,5,1,5,17,5,9,5,25,5,5,5,21,5,13,5,29,5,3,5,19,5,11,5,27,5,7,5,23,5],i.static_l_desc=new i(i.static_ltree,n.extra_lbits,257,286,15),i.static_d_desc=new i(i.static_dtree,n.extra_dbits,0,30,15),i.static_bl_desc=new i(null,n.extra_blbits,0,19,7);var o=[new r(0,0,0,0,0),new r(4,4,8,4,1),new r(4,5,16,8,1),new r(4,6,32,32,1),new r(4,4,16,16,2),new r(8,16,32,32,2),new r(8,16,128,128,2),new r(8,32,128,256,2),new r(32,128,258,1024,2),new r(32,258,258,4096,2)],s=["need dictionary","stream end","","","stream error","data error","","buffer error","",""];function a(e,t,n,i){var r=e[2*t],o=e[2*n];return r<o||r==o&&i[t]<=i[n]}function l(){var e,t,r,l,u,c,h,d,A,p,f,g,m,y,v,w,_,b,C,E,S,L,T,B,N,I,O,F,x,D,R,U,M,H,P,Q,k,z,V,j,G,q=this,W=new n,K=new n,X=new n;function Y(){var e;for(e=0;e<286;e++)R[2*e]=0;for(e=0;e<30;e++)U[2*e]=0;for(e=0;e<19;e++)M[2*e]=0;R[512]=1,q.opt_len=q.static_len=0,Q=z=0}function J(e,t){var n,i,r=-1,o=e[1],s=0,a=7,l=4;for(0===o&&(a=138,l=3),e[2*(t+1)+1]=65535,n=0;n<=t;n++)i=o,o=e[2*(n+1)+1],++s<a&&i==o||(s<l?M[2*i]+=s:0!==i?(i!=r&&M[2*i]++,M[32]++):s<=10?M[34]++:M[36]++,r=i,l=(s=0)===o?(a=138,3):i==o?(a=6,3):(a=7,4))}function Z(e){q.pending_buf[q.pending++]=e}function $(e){Z(255&e),Z(e>>>8&255)}function ee(e,t){var n,i=t;16-i<G?($(j|=(n=e)<<G&65535),j=n>>>16-G,G+=i-16):(j|=e<<G&65535,G+=i)}function te(e,t){var n=2*e;ee(65535&t[n],65535&t[n+1])}function ne(e,t){var n,i,r=-1,o=e[1],s=0,a=7,l=4;for(0===o&&(a=138,l=3),n=0;n<=t;n++)if(i=o,o=e[2*(n+1)+1],!(++s<a&&i==o)){if(s<l)for(;te(i,M),0!=--s;);else 0!==i?(i!=r&&(te(i,M),s--),te(16,M),ee(s-3,2)):s<=10?(te(17,M),ee(s-3,3)):(te(18,M),ee(s-11,7));r=i,l=(s=0)===o?(a=138,3):i==o?(a=6,3):(a=7,4)}}function ie(){16==G?($(j),G=j=0):8<=G&&(Z(255&j),j>>>=8,G-=8)}function re(e,t){var i,r,o;if(q.pending_buf[k+2*Q]=e>>>8&255,q.pending_buf[k+2*Q+1]=255&e,q.pending_buf[H+Q]=255&t,Q++,0===e?R[2*t]++:(z++,e--,R[2*(n._length_code[t]+256+1)]++,U[2*n.d_code(e)]++),0==(8191&Q)&&2<O){for(i=8*Q,r=S-_,o=0;o<30;o++)i+=U[2*o]*(5+n.extra_dbits[o]);if(i>>>=3,z<Math.floor(Q/2)&&i<Math.floor(r/2))return!0}return Q==P-1}function oe(e,t){var i,r,o,s,a=0;if(0!==Q)for(;i=q.pending_buf[k+2*a]<<8&65280|255&q.pending_buf[k+2*a+1],r=255&q.pending_buf[H+a],a++,0===i?te(r,e):(te((o=n._length_code[r])+256+1,e),0!==(s=n.extra_lbits[o])&&ee(r-=n.base_length[o],s),te(o=n.d_code(--i),t),0!==(s=n.extra_dbits[o])&&ee(i-=n.base_dist[o],s)),a<Q;);te(256,e),V=e[513]}function se(){8<G?$(j):0<G&&Z(255&j),G=j=0}function ae(e,t,n){var i,r;ee(0+(n?1:0),3),i=e,r=t,se(),V=8,$(r),$(~r),q.pending_buf.set(d.subarray(i,i+r),q.pending),q.pending+=r}function le(t){(function(e,t,r){var o,s,a=0;0<O?(W.build_tree(q),K.build_tree(q),a=function(){var e;for(J(R,W.max_code),J(U,K.max_code),X.build_tree(q),e=18;3<=e&&0===M[2*n.bl_order[e]+1];e--);return q.opt_len+=3*(e+1)+5+5+4,e}(),(s=q.static_len+3+7>>>3)<=(o=q.opt_len+3+7>>>3)&&(o=s)):o=s=t+5,t+4<=o&&-1!=e?ae(e,t,r):s==o?(ee(2+(r?1:0),3),oe(i.static_ltree,i.static_dtree)):(ee(4+(r?1:0),3),function(e,t,i){var r;for(ee(e-257,5),ee(t-1,5),ee(i-4,4),r=0;r<i;r++)ee(M[2*n.bl_order[r]+1],3);ne(R,e-1),ne(U,t-1)}(W.max_code+1,K.max_code+1,a+1),oe(R,U)),Y(),r&&se()})(0<=_?_:-1,S-_,t),_=S,e.flush_pending()}function ue(){var t,n,i,r;do{if(0==(r=A-T-S)&&0===S&&0===T)r=u;else if(-1==r)r--;else if(u+u-262<=S){for(d.set(d.subarray(u,u+u),0),L-=u,S-=u,_-=u,i=t=m;n=65535&f[--i],f[i]=u<=n?n-u:0,0!=--t;);for(i=t=u;n=65535&p[--i],p[i]=u<=n?n-u:0,0!=--t;);r+=u}if(0===e.avail_in)return;t=e.read_buf(d,S+T,r),3<=(T+=t)&&(g=((g=255&d[S])<<w^255&d[S+1])&v)}while(T<262&&0!==e.avail_in)}function ce(e){var t,n,i=N,r=S,o=B,s=u-262<S?S-(u-262):0,a=D,l=h,c=S+258,A=d[r+o-1],f=d[r+o];x<=B&&(i>>=2),T<a&&(a=T);do{if(d[(t=e)+o]==f&&d[t+o-1]==A&&d[t]==d[r]&&d[++t]==d[r+1]){r+=2,t++;do{}while(d[++r]==d[++t]&&d[++r]==d[++t]&&d[++r]==d[++t]&&d[++r]==d[++t]&&d[++r]==d[++t]&&d[++r]==d[++t]&&d[++r]==d[++t]&&d[++r]==d[++t]&&r<c);if(n=258-(c-r),r=c-258,o<n){if(L=e,a<=(o=n))break;A=d[r+o-1],f=d[r+o]}}}while((e=65535&p[e&l])>s&&0!=--i);return o<=T?o:T}function he(e){return e.total_in=e.total_out=0,e.msg=null,q.pending=0,q.pending_out=0,t=113,l=0,W.dyn_tree=R,W.stat_desc=i.static_l_desc,K.dyn_tree=U,K.stat_desc=i.static_d_desc,X.dyn_tree=M,X.stat_desc=i.static_bl_desc,G=j=0,V=8,Y(),function(){var e;for(A=2*u,e=f[m-1]=0;e<m-1;e++)f[e]=0;I=o[O].max_lazy,x=o[O].good_length,D=o[O].nice_length,N=o[O].max_chain,b=B=2,g=E=T=_=S=0}(),0}q.depth=[],q.bl_count=[],q.heap=[],R=[],U=[],M=[],q.pqdownheap=function(e,t){for(var n=q.heap,i=n[t],r=t<<1;r<=q.heap_len&&(r<q.heap_len&&a(e,n[r+1],n[r],q.depth)&&r++,!a(e,i,n[r],q.depth));)n[t]=n[r],t=r,r<<=1;n[t]=i},q.deflateInit=function(e,t,n,i,o,s){return i||(i=8),o||(o=8),s||(s=0),e.msg=null,-1==t&&(t=6),o<1||9<o||8!=i||n<9||15<n||t<0||9<t||s<0||2<s?-2:(e.dstate=q,h=(u=1<<(c=n))-1,v=(m=1<<(y=o+7))-1,w=Math.floor((y+3-1)/3),d=new Uint8Array(2*u),p=[],f=[],P=1<<o+6,q.pending_buf=new Uint8Array(4*P),r=4*P,k=Math.floor(P/2),H=3*P,O=t,F=s,he(e))},q.deflateEnd=function(){return 42!=t&&113!=t&&666!=t?-2:(q.pending_buf=null,d=p=f=null,q.dstate=null,113==t?-3:0)},q.deflateParams=function(e,t,n){var i=0;return-1==t&&(t=6),t<0||9<t||n<0||2<n?-2:(o[O].func!=o[t].func&&0!==e.total_in&&(i=e.deflate(1)),O!=t&&(I=o[O=t].max_lazy,x=o[O].good_length,D=o[O].nice_length,N=o[O].max_chain),F=n,i)},q.deflateSetDictionary=function(e,n,i){var r,o=i,s=0;if(!n||42!=t)return-2;if(o<3)return 0;for(u-262<o&&(s=i-(o=u-262)),d.set(n.subarray(s,s+o),0),_=S=o,g=((g=255&d[0])<<w^255&d[1])&v,r=0;r<=o-3;r++)p[r&h]=f[g=(g<<w^255&d[r+2])&v],f[g]=r;return 0},q.deflate=function(n,a){var A,y,N,x,D,R;if(4<a||a<0)return-2;if(!n.next_out||!n.next_in&&0!==n.avail_in||666==t&&4!=a)return n.msg=s[4],-2;if(0===n.avail_out)return n.msg=s[7],-5;if(e=n,x=l,l=a,42==t&&(y=8+(c-8<<4)<<8,3<(N=(O-1&255)>>1)&&(N=3),y|=N<<6,0!==S&&(y|=32),t=113,Z((R=y+=31-y%31)>>8&255),Z(255&R)),0!==q.pending){if(e.flush_pending(),0===e.avail_out)return l=-1,0}else if(0===e.avail_in&&a<=x&&4!=a)return e.msg=s[7],-5;if(666==t&&0!==e.avail_in)return n.msg=s[7],-5;if(0!==e.avail_in||0!==T||0!=a&&666!=t){switch(D=-1,o[O].func){case 0:D=function(t){var n,i=65535;for(r-5<i&&(i=r-5);;){if(T<=1){if(ue(),0===T&&0==t)return 0;if(0===T)break}if(S+=T,n=_+i,((T=0)===S||n<=S)&&(T=S-n,S=n,le(!1),0===e.avail_out))return 0;if(u-262<=S-_&&(le(!1),0===e.avail_out))return 0}return le(4==t),0===e.avail_out?4==t?2:0:4==t?3:1}(a);break;case 1:D=function(t){for(var n,i=0;;){if(T<262){if(ue(),T<262&&0==t)return 0;if(0===T)break}if(3<=T&&(i=65535&f[g=(g<<w^255&d[S+2])&v],p[S&h]=f[g],f[g]=S),0!==i&&(S-i&65535)<=u-262&&2!=F&&(b=ce(i)),3<=b)if(n=re(S-L,b-3),T-=b,b<=I&&3<=T){for(b--;g=(g<<w^255&d[2+ ++S])&v,i=65535&f[g],p[S&h]=f[g],f[g]=S,0!=--b;);S++}else S+=b,b=0,g=((g=255&d[S])<<w^255&d[S+1])&v;else n=re(0,255&d[S]),T--,S++;if(n&&(le(!1),0===e.avail_out))return 0}return le(4==t),0===e.avail_out?4==t?2:0:4==t?3:1}(a);break;case 2:D=function(t){for(var n,i,r=0;;){if(T<262){if(ue(),T<262&&0==t)return 0;if(0===T)break}if(3<=T&&(r=65535&f[g=(g<<w^255&d[S+2])&v],p[S&h]=f[g],f[g]=S),B=b,C=L,b=2,0!==r&&B<I&&(S-r&65535)<=u-262&&(2!=F&&(b=ce(r)),b<=5&&(1==F||3==b&&4096<S-L)&&(b=2)),3<=B&&b<=B){for(i=S+T-3,n=re(S-1-C,B-3),T-=B-1,B-=2;++S<=i&&(r=65535&f[g=(g<<w^255&d[S+2])&v],p[S&h]=f[g],f[g]=S),0!=--B;);if(E=0,b=2,S++,n&&(le(!1),0===e.avail_out))return 0}else if(0!==E){if((n=re(0,255&d[S-1]))&&le(!1),S++,T--,0===e.avail_out)return 0}else E=1,S++,T--}return 0!==E&&(n=re(0,255&d[S-1]),E=0),le(4==t),0===e.avail_out?4==t?2:0:4==t?3:1}(a)}if(2!=D&&3!=D||(t=666),0==D||2==D)return 0===e.avail_out&&(l=-1),0;if(1==D){if(1==a)ee(2,3),te(256,i.static_ltree),ie(),1+V+10-G<9&&(ee(2,3),te(256,i.static_ltree),ie()),V=7;else if(ae(0,0,!1),3==a)for(A=0;A<m;A++)f[A]=0;if(e.flush_pending(),0===e.avail_out)return l=-1,0}}return 4!=a?0:1}}function u(){this.next_in_index=0,this.next_out_index=0,this.avail_in=0,this.total_in=0,this.avail_out=0,this.total_out=0}u.prototype={deflateInit:function(e,t){return this.dstate=new l,t||(t=15),this.dstate.deflateInit(this,e,t)},deflate:function(e){return this.dstate?this.dstate.deflate(this,e):-2},deflateEnd:function(){if(!this.dstate)return-2;var e=this.dstate.deflateEnd();return this.dstate=null,e},deflateParams:function(e,t){return this.dstate?this.dstate.deflateParams(this,e,t):-2},deflateSetDictionary:function(e,t){return this.dstate?this.dstate.deflateSetDictionary(this,e,t):-2},read_buf:function(e,t,n){var i=this.avail_in;return n<i&&(i=n),0===i?0:(this.avail_in-=i,e.set(this.next_in.subarray(this.next_in_index,this.next_in_index+i),t),this.next_in_index+=i,this.total_in+=i,i)},flush_pending:function(){var e=this,t=e.dstate.pending;t>e.avail_out&&(t=e.avail_out),0!==t&&(e.next_out.set(e.dstate.pending_buf.subarray(e.dstate.pending_out,e.dstate.pending_out+t),e.next_out_index),e.next_out_index+=t,e.dstate.pending_out+=t,e.total_out+=t,e.avail_out-=t,e.dstate.pending-=t,0===e.dstate.pending&&(e.dstate.pending_out=0))}};var c=e.zip||e;c.Deflater=c._jzlib_Deflater=function(e){var t=new u,n=new Uint8Array(512),i=e?e.level:-1;void 0===i&&(i=-1),t.deflateInit(i),t.next_out=n,this.append=function(e,i){var r,o=[],s=0,a=0,l=0;if(e.length){t.next_in_index=0,t.next_in=e,t.avail_in=e.length;do{if(t.next_out_index=0,t.avail_out=512,0!=t.deflate(0))throw new Error("deflating: "+t.msg);t.next_out_index&&o.push(512==t.next_out_index?new Uint8Array(n):new Uint8Array(n.subarray(0,t.next_out_index))),l+=t.next_out_index,i&&0<t.next_in_index&&t.next_in_index!=s&&(i(t.next_in_index),s=t.next_in_index)}while(0<t.avail_in||0===t.avail_out);return r=new Uint8Array(l),o.forEach((function(e){r.set(e,a),a+=e.length})),r}},this.flush=function(){var e,i,r=[],o=0,s=0;do{if(t.next_out_index=0,t.avail_out=512,1!=(e=t.deflate(4))&&0!=e)throw new Error("deflating: "+t.msg);0<512-t.avail_out&&r.push(new Uint8Array(n.subarray(0,t.next_out_index))),s+=t.next_out_index}while(0<t.avail_in||0===t.avail_out);return t.deflateEnd(),i=new Uint8Array(s),r.forEach((function(e){i.set(e,o),o+=e.length})),i}}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||"undefined"!=typeof global&&global||Function('return typeof this === "object" && this.content')()||Function("return this")()),("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||"undefined"!=typeof global&&global||Function('return typeof this === "object" && this.content')()||Function("return this")()).RGBColor=function(e){var t;e=e||"",this.ok=!1,"#"==e.charAt(0)&&(e=e.substr(1,6)),e=(e=e.replace(/ /g,"")).toLowerCase();var n={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"};for(var i in n)e==i&&(e=n[i]);for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(e){return[parseInt(e[1]),parseInt(e[2]),parseInt(e[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}}],o=0;o<r.length;o++){var s=r[o].process,a=r[o].re.exec(e);a&&(t=s(a),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:255<this.r?255:this.r,this.g=this.g<0||isNaN(this.g)?0:255<this.g?255:this.g,this.b=this.b<0||isNaN(this.b)?0:255<this.b?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var e=this.r.toString(16),t=this.g.toString(16),n=this.b.toString(16);return 1==e.length&&(e="0"+e),1==t.length&&(t="0"+t),1==n.length&&(n="0"+n),"#"+e+t+n}},function(e){var t="+".charCodeAt(0),n="/".charCodeAt(0),i="0".charCodeAt(0),r="a".charCodeAt(0),o="A".charCodeAt(0),s="-".charCodeAt(0),a="_".charCodeAt(0),l=function(e){var l=e.charCodeAt(0);return l===t||l===s?62:l===n||l===a?63:l<i?-1:l<i+10?l-i+26+26:l<o+26?l-o:l<r+26?l-r+26:void 0};e.API.TTFFont=function(){function e(e,t,n){var i;if(this.rawData=e,i=this.contents=new c(e),this.contents.pos=4,"ttcf"===i.readString(4)){if(!t)throw new Error("Must specify a font name for TTC files.");throw new Error("Font "+t+" not found in TTC file.")}i.pos=0,this.parse(),this.subset=new N(this),this.registerTTF()}return e.open=function(t,n,i,r){if("string"!=typeof i)throw new Error("Invalid argument supplied in TTFFont.open");return new e(function(e){var t,n,i,r,o,s;if(0<e.length%4)throw new Error("Invalid string. Length must be a multiple of 4");var a=e.length;o="="===e.charAt(a-2)?2:"="===e.charAt(a-1)?1:0,s=new Uint8Array(3*e.length/4-o),i=0<o?e.length-4:e.length;var u=0;function c(e){s[u++]=e}for(n=t=0;t<i;t+=4,n+=3)c((16711680&(r=l(e.charAt(t))<<18|l(e.charAt(t+1))<<12|l(e.charAt(t+2))<<6|l(e.charAt(t+3))))>>16),c((65280&r)>>8),c(255&r);return 2===o?c(255&(r=l(e.charAt(t))<<2|l(e.charAt(t+1))>>4)):1===o&&(c((r=l(e.charAt(t))<<10|l(e.charAt(t+1))<<4|l(e.charAt(t+2))>>2)>>8&255),c(255&r)),s}(i),n,r)},e.prototype.parse=function(){return this.directory=new h(this.contents),this.head=new p(this),this.name=new _(this),this.cmap=new g(this),this.toUnicode=new Map,this.hhea=new m(this),this.maxp=new b(this),this.hmtx=new C(this),this.post=new v(this),this.os2=new y(this),this.loca=new B(this),this.glyf=new S(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var e,t,n,i;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var e,t,n,i;for(i=[],e=0,t=(n=this.bbox).length;e<t;e++)i.push(Math.round(n[e]*this.scaleFactor));return i}).call(this),this.stemV=0,this.post.exists?(t=255&(n=this.post.italic_angle),!0&(e=n>>16)&&(e=-(1+(65535^e))),this.italicAngle=+(e+"."+t)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=1===(i=this.familyClass)||2===i||3===i||4===i||5===i||7===i,this.isScript=10===this.familyClass,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),0!==this.italicAngle&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(e){var t;return(null!=(t=this.cmap.unicode)?t.codeMap[e]:void 0)||0},e.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},e.prototype.widthOfString=function(e,t,n){var i,r,o,s,a;for(r=s=o=0,a=(e=""+e).length;0<=a?s<a:a<s;r=0<=a?++s:--s)i=e.charCodeAt(r),o+=this.widthOfGlyph(this.characterToGlyph(i))+n*(1e3/t)||0;return o*(t/1e3)},e.prototype.lineHeight=function(e,t){return null==t&&(t=!1),(this.ascender+(t?this.lineGap:0)-this.decender)/1e3*e},e}();var u,c=function(){function e(e){this.data=null!=e?e:[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(e){return this.data[this.pos++]=e},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},e.prototype.readInt32=function(){var e;return 2147483648<=(e=this.readUInt32())?e-4294967296:e},e.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},e.prototype.readInt16=function(){var e;return 32768<=(e=this.readUInt16())?e-65536:e},e.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},e.prototype.readString=function(e){var t,n,i;for(n=[],t=i=0;0<=e?i<e:e<i;t=0<=e?++i:--i)n[t]=String.fromCharCode(this.readByte());return n.join("")},e.prototype.writeString=function(e){var t,n,i,r;for(r=[],t=n=0,i=e.length;0<=i?n<i:i<n;t=0<=i?++n:--n)r.push(this.writeByte(e.charCodeAt(t)));return r},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(e){return this.writeInt16(e)},e.prototype.readLongLong=function(){var e,t,n,i,r,o,s,a;return e=this.readByte(),t=this.readByte(),n=this.readByte(),i=this.readByte(),r=this.readByte(),o=this.readByte(),s=this.readByte(),a=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^n)+4294967296*(255^i)+16777216*(255^r)+65536*(255^o)+256*(255^s)+(255^a)+1):72057594037927940*e+281474976710656*t+1099511627776*n+4294967296*i+16777216*r+65536*o+256*s+a},e.prototype.writeLongLong=function(e){var t,n;return t=Math.floor(e/4294967296),n=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(e){return this.writeInt32(e)},e.prototype.read=function(e){var t,n;for(t=[],n=0;0<=e?n<e:e<n;0<=e?++n:--n)t.push(this.readByte());return t},e.prototype.write=function(e){var t,n,i;for(i=[],t=0,n=e.length;t<n;t++)i.push(this.writeByte(e[t]));return i},e}(),h=function(){var e;function t(e){var t,n,i;for(this.scalarType=e.readInt(),this.tableCount=e.readShort(),this.searchRange=e.readShort(),this.entrySelector=e.readShort(),this.rangeShift=e.readShort(),this.tables={},n=0,i=this.tableCount;0<=i?n<i:i<n;0<=i?++n:--n)t={tag:e.readString(4),checksum:e.readInt(),offset:e.readInt(),length:e.readInt()},this.tables[t.tag]=t}return t.prototype.encode=function(t){var n,i,r,o,s,a,l,u,h,d,A,p;for(p in d=Object.keys(t).length,s=Math.log(2),u=16*Math.floor(Math.log(d)/s),r=Math.floor(u/s),l=16*d-u,(i=new c).writeInt(this.scalarType),i.writeShort(d),i.writeShort(u),i.writeShort(r),i.writeShort(l),a=i.pos+16*d,o=null,A=[],t)for(h=t[p],i.writeString(p),i.writeInt(e(h)),i.writeInt(a),i.writeInt(h.length),A=A.concat(h),"head"===p&&(o=a),a+=h.length;a%4;)A.push(0),a++;return i.write(A),n=2981146554-e(i.data),i.pos=o+8,i.writeUInt32(n),i.data},e=function(e){var t,n,i,r;for(e=E.call(e);e.length%4;)e.push(0);for(n=new c(e),i=t=0,r=e.length;i<r;i+=4)t+=n.readUInt32();return 4294967295&t},t}(),d={}.hasOwnProperty,A=function(e,t){for(var n in t)d.call(t,n)&&(e[n]=t[n]);function i(){this.constructor=e}return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};u=function(){function e(e){var t;this.file=e,this.exists=!!(t=this.file.directory.tables[this.tag]),t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var p=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return A(t,u),t.prototype.tag="head",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},t.prototype.encode=function(e){var t;return(t=new c).writeInt(this.version),t.writeInt(this.revision),t.writeInt(this.checkSumAdjustment),t.writeInt(this.magicNumber),t.writeShort(this.flags),t.writeShort(this.unitsPerEm),t.writeLongLong(this.created),t.writeLongLong(this.modified),t.writeShort(this.xMin),t.writeShort(this.yMin),t.writeShort(this.xMax),t.writeShort(this.yMax),t.writeShort(this.macStyle),t.writeShort(this.lowestRecPPEM),t.writeShort(this.fontDirectionHint),t.writeShort(e),t.writeShort(this.glyphDataFormat),t.data},t}(),f=function(){function e(e,t){var n,i,r,o,s,a,l,u,c,h,d,A,p,f,g,m,y,v;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),c=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=3===this.platformID&&1===this.encodingID&&4===this.format||0===this.platformID&&4===this.format,this.codeMap={},this.format){case 0:for(a=g=0;g<256;a=++g)this.codeMap[a]=e.readByte();break;case 4:for(d=e.readUInt16(),h=d/2,e.pos+=6,r=function(){var t,n;for(n=[],a=t=0;0<=h?t<h:h<t;a=0<=h?++t:--t)n.push(e.readUInt16());return n}(),e.pos+=2,p=function(){var t,n;for(n=[],a=t=0;0<=h?t<h:h<t;a=0<=h?++t:--t)n.push(e.readUInt16());return n}(),l=function(){var t,n;for(n=[],a=t=0;0<=h?t<h:h<t;a=0<=h?++t:--t)n.push(e.readUInt16());return n}(),u=function(){var t,n;for(n=[],a=t=0;0<=h?t<h:h<t;a=0<=h?++t:--t)n.push(e.readUInt16());return n}(),i=(this.length-e.pos+this.offset)/2,s=function(){var t,n;for(n=[],a=t=0;0<=i?t<i:i<t;a=0<=i?++t:--t)n.push(e.readUInt16());return n}(),a=m=0,v=r.length;m<v;a=++m)for(f=r[a],n=y=A=p[a];A<=f?y<=f:f<=y;n=A<=f?++y:--y)0===u[a]?o=n+l[a]:0!==(o=s[u[a]/2+(n-A)-(h-a)]||0)&&(o+=l[a]),this.codeMap[n]=65535&o}e.pos=c}return e.encode=function(e,t){var n,i,r,o,s,a,l,u,h,d,A,p,f,g,m,y,v,w,_,b,C,E,S,L,T,B,N,I,O,F,x,D,R,U,M,H,P,Q,k,z,V,j,G,q,W;switch(N=new c,o=Object.keys(e).sort((function(e,t){return e-t})),t){case"macroman":for(f=0,g=function(){var e,t;for(t=[],p=e=0;e<256;p=++e)t.push(0);return t}(),y={0:0},r={},I=0,D=o.length;I<D;I++)null==y[j=e[i=o[I]]]&&(y[j]=++f),r[i]={old:e[i],new:y[e[i]]},g[i]=y[e[i]];return N.writeUInt16(1),N.writeUInt16(0),N.writeUInt32(12),N.writeUInt16(0),N.writeUInt16(262),N.writeUInt16(0),N.write(g),{charMap:r,subtable:N.data,maxGlyphID:f+1};case"unicode":for(T=[],h=[],y={},n={},m=l=null,O=v=0,R=o.length;O<R;O++)null==y[w=e[i=o[O]]]&&(y[w]=++v),n[i]={old:w,new:y[w]},s=y[w]-i,null!=m&&s===l||(m&&h.push(m),T.push(i),l=s),m=i;for(m&&h.push(m),h.push(65535),T.push(65535),S=2*(E=T.length),C=2*Math.pow(Math.log(E)/Math.LN2,2),d=Math.log(C/2)/Math.LN2,b=2*E-C,a=[],_=[],A=[],p=F=0,U=T.length;F<U;p=++F){if(u=h[p],65535===(L=T[p])){a.push(0),_.push(0);break}if(32768<=L-(B=n[L].new))for(a.push(0),_.push(2*(A.length+E-p)),i=x=L;L<=u?x<=u:u<=x;i=L<=u?++x:--x)A.push(n[i].new);else a.push(B-L),_.push(0)}for(N.writeUInt16(3),N.writeUInt16(1),N.writeUInt32(12),N.writeUInt16(4),N.writeUInt16(16+8*E+2*A.length),N.writeUInt16(0),N.writeUInt16(S),N.writeUInt16(C),N.writeUInt16(d),N.writeUInt16(b),z=0,M=h.length;z<M;z++)N.writeUInt16(i=h[z]);for(N.writeUInt16(0),V=0,H=T.length;V<H;V++)N.writeUInt16(i=T[V]);for(G=0,P=a.length;G<P;G++)N.writeUInt16(s=a[G]);for(q=0,Q=_.length;q<Q;q++)N.writeUInt16(_[q]);for(W=0,k=A.length;W<k;W++)N.writeUInt16(f=A[W]);return{charMap:n,subtable:N.data,maxGlyphID:v+1}}},e}(),g=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return A(t,u),t.prototype.tag="cmap",t.prototype.parse=function(e){var t,n,i;for(e.pos=this.offset,this.version=e.readUInt16(),n=e.readUInt16(),this.tables=[],this.unicode=null,i=0;0<=n?i<n:n<i;0<=n?++i:--i)t=new f(e,this.offset),this.tables.push(t),t.isUnicode&&null==this.unicode&&(this.unicode=t);return!0},t.encode=function(e,t){var n,i;return null==t&&(t="macroman"),n=f.encode(e,t),(i=new c).writeUInt16(0),i.writeUInt16(1),n.table=i.data.concat(n.subtable),n},t}(),m=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return A(t,u),t.prototype.tag="hhea",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},t}(),y=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return A(t,u),t.prototype.tag="OS/2",t.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=function(){var t,n;for(n=[],t=0;t<10;++t)n.push(e.readByte());return n}(),this.charRange=function(){var t,n;for(n=[],t=0;t<4;++t)n.push(e.readInt());return n}(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),0<this.version&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=function(){var t,n;for(n=[],t=0;t<2;++t)n.push(e.readInt());return n}(),1<this.version))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},t}(),v=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return A(t,u),t.prototype.tag="post",t.prototype.parse=function(e){var t,n,i,r;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:break;case 131072:for(n=e.readUInt16(),this.glyphNameIndex=[],i=0;0<=n?i<n:n<i;0<=n?++i:--i)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],r=[];e.pos<this.offset+this.length;)t=e.readByte(),r.push(this.names.push(e.readString(t)));return r;case 151552:return n=e.readUInt16(),this.offsets=e.read(n);case 196608:break;case 262144:return this.map=(function(){var t,n,i;for(i=[],t=0,n=this.file.maxp.numGlyphs;0<=n?t<n:n<t;0<=n?++t:--t)i.push(e.readUInt32());return i}).call(this)}},t}(),w=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},_=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return A(t,u),t.prototype.tag="name",t.prototype.parse=function(e){var t,n,i,r,o,s,a,l,u,c,h,d;for(e.pos=this.offset,e.readShort(),t=e.readShort(),s=e.readShort(),n=[],r=u=0;0<=t?u<t:t<u;r=0<=t?++u:--u)n.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+s+e.readShort()});for(a={},r=c=0,h=n.length;c<h;r=++c)e.pos=(i=n[r]).offset,l=e.readString(i.length),o=new w(l,i),null==a[d=i.nameID]&&(a[d]=[]),a[i.nameID].push(o);this.strings=a,this.copyright=a[0],this.fontFamily=a[1],this.fontSubfamily=a[2],this.uniqueSubfamily=a[3],this.fontName=a[4],this.version=a[5];try{this.postscriptName=a[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch(e){this.postscriptName=a[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=a[7],this.manufacturer=a[8],this.designer=a[9],this.description=a[10],this.vendorUrl=a[11],this.designerUrl=a[12],this.license=a[13],this.licenseUrl=a[14],this.preferredFamily=a[15],this.preferredSubfamily=a[17],this.compatibleFull=a[18],this.sampleText=a[19]},t}(),b=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return A(t,u),t.prototype.tag="maxp",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},t}(),C=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return A(t,u),t.prototype.tag="hmtx",t.prototype.parse=function(e){var t,n,i,r,o,s;for(e.pos=this.offset,this.metrics=[],i=0,o=this.file.hhea.numberOfMetrics;0<=o?i<o:o<i;0<=o?++i:--i)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(n=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var t,i;for(i=[],t=0;0<=n?t<n:n<t;0<=n?++t:--t)i.push(e.readInt16());return i}(),this.widths=(function(){var e,t,n,i;for(i=[],e=0,t=(n=this.metrics).length;e<t;e++)i.push(n[e].advance);return i}).call(this),t=this.widths[this.widths.length-1],s=[],r=0;0<=n?r<n:n<r;0<=n?++r:--r)s.push(this.widths.push(t));return s},t.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},t}(),E=[].slice,S=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return A(t,u),t.prototype.tag="glyf",t.prototype.parse=function(e){return this.cache={}},t.prototype.glyphFor=function(e){var t,n,i,r,o,s,a,l,u,h;return(e=e)in this.cache?this.cache[e]:(t=this.file.contents,n=(r=this.file.loca).indexOf(e),0===(i=r.lengthOf(e))?this.cache[e]=null:(t.pos=this.offset+n,o=(s=new c(t.read(i))).readShort(),l=s.readShort(),h=s.readShort(),a=s.readShort(),u=s.readShort(),this.cache[e]=-1===o?new T(s,l,h,a,u):new L(s,o,l,h,a,u),this.cache[e]))},t.prototype.encode=function(e,t,n){var i,r,o,s,a;for(o=[],r=[],s=0,a=t.length;s<a;s++)i=e[t[s]],r.push(o.length),i&&(o=o.concat(i.encode(n)));return r.push(o.length),{table:o,offsets:r}},t}(),L=function(){function e(e,t,n,i,r,o){this.raw=e,this.numberOfContours=t,this.xMin=n,this.yMin=i,this.xMax=r,this.yMax=o,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),T=function(){function e(e,t,n,i,r){var o,s;for(this.raw=e,this.xMin=t,this.yMin=n,this.xMax=i,this.yMax=r,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;s=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readShort()),32&s;)o.pos+=1&s?4:2,128&s?o.pos+=8:64&s?o.pos+=4:8&s&&(o.pos+=2)}return e.prototype.encode=function(e){var t,n,i,r;for(n=new c(E.call(this.raw.data)),t=i=0,r=this.glyphIDs.length;i<r;t=++i)n.pos=this.glyphOffsets[t];return n.data},e}(),B=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return A(t,u),t.prototype.tag="loca",t.prototype.parse=function(e){return e.pos=this.offset,this.offsets=0===this.file.head.indexToLocFormat?(function(){var t,n,i;for(i=[],t=0,n=this.length;t<n;t+=2)i.push(2*e.readUInt16());return i}).call(this):(function(){var t,n,i;for(i=[],t=0,n=this.length;t<n;t+=4)i.push(e.readUInt32());return i}).call(this)},t.prototype.indexOf=function(e){return this.offsets[e]},t.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},t.prototype.encode=function(e,t){for(var n=new Uint32Array(this.offsets.length),i=0,r=0,o=0;o<n.length;++o)if(n[o]=i,r<t.length&&t[r]==o){++r,n[o]=i;var s=this.offsets[o+1]-this.offsets[o];0<s&&(i+=s)}for(var a=new Array(4*n.length),l=0;l<n.length;++l)a[4*l+3]=255&n[l],a[4*l+2]=(65280&n[l])>>8,a[4*l+1]=(16711680&n[l])>>16,a[4*l]=(4278190080&n[l])>>24;return a},t}(),N=function(){function e(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var e,t,n,i;for(t in n=this.font.cmap.tables[0].codeMap,e={},i=this.subset)e[t]=n[i[t]];return e},e.prototype.glyphsFor=function(e){var t,n,i,r,o,s,a;for(i={},o=0,s=e.length;o<s;o++)i[r=e[o]]=this.font.glyf.glyphFor(r);for(r in t=[],i)(null!=(n=i[r])?n.compound:void 0)&&t.push.apply(t,n.glyphIDs);if(0<t.length)for(r in a=this.glyphsFor(t))i[r]=n=a[r];return i},e.prototype.encode=function(e,t){var n,i,r,o,s,a,l,u,c,h,d,A,p,f;for(i in n=g.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(e),h={0:0},f=n.charMap)h[(s=f[i]).old]=s.new;for(d in c=n.maxGlyphID,o)d in h||(h[d]=c++);return l=function(e){var t,n;for(t in n={},e)n[e[t]]=t;return n}(h),u=Object.keys(l).sort((function(e,t){return e-t})),A=function(){var e,t,n;for(n=[],e=0,t=u.length;e<t;e++)n.push(l[u[e]]);return n}(),r=this.font.glyf.encode(o,A,h),a=this.font.loca.encode(r.offsets,A),p={cmap:this.font.cmap.raw(),glyf:r.table,loca:a,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(p["OS/2"]=this.font.os2.raw()),this.font.directory.encode(p)},e}();e.API.PDFObject=function(){var e;function t(){}return e=function(e,t){return(Array(t+1).join("0")+e).slice(-t)},t.convert=function(n){var i,r;if(Array.isArray(n))return"["+function(){var e,i,r;for(r=[],e=0,i=n.length;e<i;e++)r.push(t.convert(n[e]));return r}().join(" ")+"]";if("string"==typeof n)return"/"+n;if(null!=n?n.isString:void 0)return"("+n+")";if(n instanceof Date)return"(D:"+e(n.getUTCFullYear(),4)+e(n.getUTCMonth(),2)+e(n.getUTCDate(),2)+e(n.getUTCHours(),2)+e(n.getUTCMinutes(),2)+e(n.getUTCSeconds(),2)+"Z)";if("[object Object]"!=={}.toString.call(n))return""+n;for(i in r=["<<"],n)r.push("/"+i+" "+t.convert(n[i]));return r.push(">>"),r.join("\n")},t}()}(de),Le="undefined"!=typeof self&&self||"undefined"!=typeof window&&window||"undefined"!=typeof global&&global||Function('return typeof this === "object" && this.content')()||Function("return this")(),Te=function(){var e,t,n;function i(e){var t,n,i,r,o,s,a,l,u,c,h,d,A;for(this.data=e,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},o=null;;){switch(t=this.readUInt32(),l=(function(){var e,t;for(t=[],e=0;e<4;++e)t.push(String.fromCharCode(this.data[this.pos++]));return t}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(t);break;case"fcTL":o&&this.animation.frames.push(o),this.pos+=4,o={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},r=this.readUInt16(),i=this.readUInt16()||100,o.delay=1e3*r/i,o.disposeOp=this.data[this.pos++],o.blendOp=this.data[this.pos++],o.data=[];break;case"IDAT":case"fdAT":for("fdAT"===l&&(this.pos+=4,t-=4),e=(null!=o?o.data:void 0)||this.imgData,h=0;0<=t?h<t:t<h;0<=t?++h:--h)e.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(n=this.palette.length/3,this.transparency.indexed=this.read(t),this.transparency.indexed.length>n)throw new Error("More transparent colors than palette size");if(0<(u=n-this.transparency.indexed.length))for(d=0;0<=u?d<u:u<d;0<=u?++d:--d)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(t)[0];break;case 2:this.transparency.rgb=this.read(t)}break;case"tEXt":s=(c=this.read(t)).indexOf(0),a=String.fromCharCode.apply(String,c.slice(0,s)),this.text[a]=String.fromCharCode.apply(String,c.slice(s+1));break;case"IEND":return o&&this.animation.frames.push(o),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=4===(A=this.colorType)||6===A,this.pixelBitlength=this.bits*(this.colors+(this.hasAlphaChannel?1:0)),this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=t}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}i.load=function(e,t,n){var r;return"function"==typeof t&&(n=t),(r=new XMLHttpRequest).open("GET",e,!0),r.responseType="arraybuffer",r.onload=function(){var e;return e=new i(new Uint8Array(r.response||r.mozResponseArrayBuffer)),"function"==typeof(null!=t?t.getContext:void 0)&&e.render(t),"function"==typeof n?n(e):void 0},r.send(null)},i.prototype.read=function(e){var t,n;for(n=[],t=0;0<=e?t<e:e<t;0<=e?++t:--t)n.push(this.data[this.pos++]);return n},i.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},i.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},i.prototype.decodePixels=function(e){var t=this.pixelBitlength/8,n=new Uint8Array(this.width*this.height*t),i=0,r=this;if(null==e&&(e=this.imgData),0===e.length)return new Uint8Array(0);function o(o,s,a,l){var u,c,h,d,A,p,f,g,m,y,v,w,_,b,C,E,S,L,T,B,N=Math.ceil((r.width-o)/a),I=Math.ceil((r.height-s)/l),O=r.width==N&&r.height==I;for(_=t*N,v=O?n:new Uint8Array(_*I),p=e.length,c=w=0;w<I&&i<p;){switch(e[i++]){case 0:for(d=E=0;E<_;d=E+=1)v[c++]=e[i++];break;case 1:for(d=S=0;S<_;d=S+=1)u=e[i++],A=d<t?0:v[c-t],v[c++]=(u+A)%256;break;case 2:for(d=L=0;L<_;d=L+=1)u=e[i++],h=(d-d%t)/t,v[c++]=((b=w&&v[(w-1)*_+h*t+d%t])+u)%256;break;case 3:for(d=T=0;T<_;d=T+=1)u=e[i++],h=(d-d%t)/t,A=d<t?0:v[c-t],b=w&&v[(w-1)*_+h*t+d%t],v[c++]=(u+Math.floor((A+b)/2))%256;break;case 4:for(d=B=0;B<_;d=B+=1)u=e[i++],h=(d-d%t)/t,0===w?b=C=0:(b=v[(w-1)*_+h*t+d%t],C=h&&v[(w-1)*_+(h-1)*t+d%t]),f=(A=d<t?0:v[c-t])+b-C,g=Math.abs(f-A),m=Math.abs(f-b),y=Math.abs(f-C),v[c++]=(u+(g<=m&&g<=y?A:m<=y?b:C))%256;break;default:throw new Error("Invalid filter algorithm: "+e[i-1])}if(!O){var F=((s+w*l)*r.width+o)*t,x=w*_;for(d=0;d<N;d+=1){for(var D=0;D<t;D+=1)n[F++]=v[x++];F+=(a-1)*t}}w++}}return e=(e=new De(e)).getBytes(),1==r.interlaceMethod?(o(0,0,8,8),o(4,0,8,8),o(0,4,4,8),o(2,0,4,4),o(0,2,2,4),o(1,0,2,2),o(0,1,1,2)):o(0,0,1,1),n},i.prototype.decodePalette=function(){var e,t,n,i,r,o,s,a,l;for(n=this.palette,o=this.transparency.indexed||[],r=new Uint8Array((o.length||0)+n.length),i=0,t=s=e=0,a=n.length;s<a;t=s+=3)r[i++]=n[t],r[i++]=n[t+1],r[i++]=n[t+2],r[i++]=null!=(l=o[e++])?l:255;return r},i.prototype.copyToImageData=function(e,t){var n,i,r,o,s,a,l,u,c,h,d;if(i=this.colors,c=null,n=this.hasAlphaChannel,this.palette.length&&(c=null!=(d=this._decodedPalette)?d:this._decodedPalette=this.decodePalette(),i=4,n=!0),u=(r=e.data||e).length,s=c||t,o=a=0,1===i)for(;o<u;)l=c?4*t[o/4]:a,h=s[l++],r[o++]=h,r[o++]=h,r[o++]=h,r[o++]=n?s[l++]:255,a=l;else for(;o<u;)l=c?4*t[o/4]:a,r[o++]=s[l++],r[o++]=s[l++],r[o++]=s[l++],r[o++]=n?s[l++]:255,a=l},i.prototype.decode=function(){var e;return e=new Uint8Array(this.width*this.height*4),this.copyToImageData(e,this.decodePixels()),e};try{t=Le.document.createElement("canvas"),n=t.getContext("2d")}catch(o){return-1}return e=function(e){var i;return n.width=e.width,n.height=e.height,n.clearRect(0,0,e.width,e.height),n.putImageData(e,0,0),(i=new Image).src=t.toDataURL(),i},i.prototype.decodeFrames=function(t){var n,i,r,o,s,a,l,u;if(this.animation){for(u=[],i=s=0,a=(l=this.animation.frames).length;s<a;i=++s)r=t.createImageData((n=l[i]).width,n.height),o=this.decodePixels(new Uint8Array(n.data)),this.copyToImageData(r,o),n.imageData=r,u.push(n.image=e(r));return u}},i.prototype.renderFrame=function(e,t){var n,i,r;return n=(i=this.animation.frames)[t],r=i[t-1],0===t&&e.clearRect(0,0,this.width,this.height),1===(null!=r?r.disposeOp:void 0)?e.clearRect(r.xOffset,r.yOffset,r.width,r.height):2===(null!=r?r.disposeOp:void 0)&&e.putImageData(r.imageData,r.xOffset,r.yOffset),0===n.blendOp&&e.clearRect(n.xOffset,n.yOffset,n.width,n.height),e.drawImage(n.image,n.xOffset,n.yOffset)},i.prototype.animate=function(e){var t,n,i,r,o,s,a=this;return n=0,r=(s=this.animation).numFrames,i=s.frames,o=s.numPlays,(t=function(){var s,l;if(s=n++%r,l=i[s],a.renderFrame(e,s),1<r&&n/r<o)return a.animation._timeout=setTimeout(t,l.delay)})()},i.prototype.stopAnimation=function(){var e;return clearTimeout(null!=(e=this.animation)?e._timeout:void 0)},i.prototype.render=function(e){var t,n;return e._png&&e._png.stopAnimation(),e._png=this,e.width=this.width,e.height=this.height,t=e.getContext("2d"),this.animation?(this.decodeFrames(t),this.animate(t)):(n=t.createImageData(this.width,this.height),this.copyToImageData(n,this.decodePixels()),t.putImageData(n,0,0))},i}(),Le.PNG=Te;var xe=function(){function e(){this.pos=0,this.bufferLength=0,this.eof=!1,this.buffer=null}return e.prototype={ensureBuffer:function(e){var t=this.buffer,n=t?t.byteLength:0;if(e<n)return t;for(var i=512;i<e;)i<<=1;for(var r=new Uint8Array(i),o=0;o<n;++o)r[o]=t[o];return this.buffer=r},getByte:function(){for(var e=this.pos;this.bufferLength<=e;){if(this.eof)return null;this.readBlock()}return this.buffer[this.pos++]},getBytes:function(e){var t=this.pos;if(e){this.ensureBuffer(t+e);for(var n=t+e;!this.eof&&this.bufferLength<n;)this.readBlock();var i=this.bufferLength;i<n&&(n=i)}else{for(;!this.eof;)this.readBlock();n=this.bufferLength}return this.pos=n,this.buffer.subarray(t,n)},lookChar:function(){for(var e=this.pos;this.bufferLength<=e;){if(this.eof)return null;this.readBlock()}return String.fromCharCode(this.buffer[this.pos])},getChar:function(){for(var e=this.pos;this.bufferLength<=e;){if(this.eof)return null;this.readBlock()}return String.fromCharCode(this.buffer[this.pos++])},makeSubStream:function(e,t,n){for(var i=e+t;this.bufferLength<=i&&!this.eof;)this.readBlock();return new Stream(this.buffer,e,t,n)},skip:function(e){e||(e=1),this.pos+=e},reset:function(){this.pos=0}},e}(),De=function(){if("undefined"!=typeof Uint32Array){var e=new Uint32Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),t=new Uint32Array([3,4,5,6,7,8,9,10,65547,65549,65551,65553,131091,131095,131099,131103,196643,196651,196659,196667,262211,262227,262243,262259,327811,327843,327875,327907,258,258,258]),n=new Uint32Array([1,2,3,4,65541,65543,131081,131085,196625,196633,262177,262193,327745,327777,393345,393409,459009,459137,524801,525057,590849,591361,657409,658433,724993,727041,794625,798721,868353,876545]),i=[new Uint32Array([459008,524368,524304,524568,459024,524400,524336,590016,459016,524384,524320,589984,524288,524416,524352,590048,459012,524376,524312,589968,459028,524408,524344,590032,459020,524392,524328,59e4,524296,524424,524360,590064,459010,524372,524308,524572,459026,524404,524340,590024,459018,524388,524324,589992,524292,524420,524356,590056,459014,524380,524316,589976,459030,524412,524348,590040,459022,524396,524332,590008,524300,524428,524364,590072,459009,524370,524306,524570,459025,524402,524338,590020,459017,524386,524322,589988,524290,524418,524354,590052,459013,524378,524314,589972,459029,524410,524346,590036,459021,524394,524330,590004,524298,524426,524362,590068,459011,524374,524310,524574,459027,524406,524342,590028,459019,524390,524326,589996,524294,524422,524358,590060,459015,524382,524318,589980,459031,524414,524350,590044,459023,524398,524334,590012,524302,524430,524366,590076,459008,524369,524305,524569,459024,524401,524337,590018,459016,524385,524321,589986,524289,524417,524353,590050,459012,524377,524313,589970,459028,524409,524345,590034,459020,524393,524329,590002,524297,524425,524361,590066,459010,524373,524309,524573,459026,524405,524341,590026,459018,524389,524325,589994,524293,524421,524357,590058,459014,524381,524317,589978,459030,524413,524349,590042,459022,524397,524333,590010,524301,524429,524365,590074,459009,524371,524307,524571,459025,524403,524339,590022,459017,524387,524323,589990,524291,524419,524355,590054,459013,524379,524315,589974,459029,524411,524347,590038,459021,524395,524331,590006,524299,524427,524363,590070,459011,524375,524311,524575,459027,524407,524343,590030,459019,524391,524327,589998,524295,524423,524359,590062,459015,524383,524319,589982,459031,524415,524351,590046,459023,524399,524335,590014,524303,524431,524367,590078,459008,524368,524304,524568,459024,524400,524336,590017,459016,524384,524320,589985,524288,524416,524352,590049,459012,524376,524312,589969,459028,524408,524344,590033,459020,524392,524328,590001,524296,524424,524360,590065,459010,524372,524308,524572,459026,524404,524340,590025,459018,524388,524324,589993,524292,524420,524356,590057,459014,524380,524316,589977,459030,524412,524348,590041,459022,524396,524332,590009,524300,524428,524364,590073,459009,524370,524306,524570,459025,524402,524338,590021,459017,524386,524322,589989,524290,524418,524354,590053,459013,524378,524314,589973,459029,524410,524346,590037,459021,524394,524330,590005,524298,524426,524362,590069,459011,524374,524310,524574,459027,524406,524342,590029,459019,524390,524326,589997,524294,524422,524358,590061,459015,524382,524318,589981,459031,524414,524350,590045,459023,524398,524334,590013,524302,524430,524366,590077,459008,524369,524305,524569,459024,524401,524337,590019,459016,524385,524321,589987,524289,524417,524353,590051,459012,524377,524313,589971,459028,524409,524345,590035,459020,524393,524329,590003,524297,524425,524361,590067,459010,524373,524309,524573,459026,524405,524341,590027,459018,524389,524325,589995,524293,524421,524357,590059,459014,524381,524317,589979,459030,524413,524349,590043,459022,524397,524333,590011,524301,524429,524365,590075,459009,524371,524307,524571,459025,524403,524339,590023,459017,524387,524323,589991,524291,524419,524355,590055,459013,524379,524315,589975,459029,524411,524347,590039,459021,524395,524331,590007,524299,524427,524363,590071,459011,524375,524311,524575,459027,524407,524343,590031,459019,524391,524327,589999,524295,524423,524359,590063,459015,524383,524319,589983,459031,524415,524351,590047,459023,524399,524335,590015,524303,524431,524367,590079]),9],r=[new Uint32Array([327680,327696,327688,327704,327684,327700,327692,327708,327682,327698,327690,327706,327686,327702,327694,0,327681,327697,327689,327705,327685,327701,327693,327709,327683,327699,327691,327707,327687,327703,327695,0]),5];return(s.prototype=Object.create(xe.prototype)).getBits=function(e){for(var t,n=this.codeSize,i=this.codeBuf,r=this.bytes,s=this.bytesPos;n<e;)void 0===(t=r[s++])&&o("Bad encoding in flate stream"),i|=t<<n,n+=8;return t=i&(1<<e)-1,this.codeBuf=i>>e,this.codeSize=n-=e,this.bytesPos=s,t},s.prototype.getCode=function(e){for(var t=e[0],n=e[1],i=this.codeSize,r=this.codeBuf,s=this.bytes,a=this.bytesPos;i<n;){var l;void 0===(l=s[a++])&&o("Bad encoding in flate stream"),r|=l<<i,i+=8}var u=t[r&(1<<n)-1],c=u>>16,h=65535&u;return(0==i||i<c||0==c)&&o("Bad encoding in flate stream"),this.codeBuf=r>>c,this.codeSize=i-c,this.bytesPos=a,h},s.prototype.generateHuffmanTable=function(e){for(var t=e.length,n=0,i=0;i<t;++i)e[i]>n&&(n=e[i]);for(var r=1<<n,o=new Uint32Array(r),s=1,a=0,l=2;s<=n;++s,a<<=1,l<<=1)for(var u=0;u<t;++u)if(e[u]==s){var c=0,h=a;for(i=0;i<s;++i)c=c<<1|1&h,h>>=1;for(i=c;i<r;i+=l)o[i]=s<<16|u;++a}return[o,n]},s.prototype.readBlock=function(){function s(e,t,n,i,r){for(var o=e.getBits(n)+i;0<o--;)t[p++]=r}var a=this.getBits(3);if(1&a&&(this.eof=!0),0!=(a>>=1)){var l,u;if(1==a)l=i,u=r;else if(2==a){for(var c=this.getBits(5)+257,h=this.getBits(5)+1,d=this.getBits(4)+4,A=Array(e.length),p=0;p<d;)A[e[p++]]=this.getBits(3);for(var f=this.generateHuffmanTable(A),g=0,m=(p=0,c+h),y=new Array(m);p<m;){var v=this.getCode(f);16==v?s(this,y,2,3,g):17==v?s(this,y,3,3,g=0):18==v?s(this,y,7,11,g=0):y[p++]=g=v}l=this.generateHuffmanTable(y.slice(0,c)),u=this.generateHuffmanTable(y.slice(c,m))}else o("Unknown block type in flate stream");for(var w=(F=this.buffer)?F.length:0,_=this.bufferLength;;){var b=this.getCode(l);if(b<256)w<=_+1&&(w=(F=this.ensureBuffer(_+1)).length),F[_++]=b;else{if(256==b)return void(this.bufferLength=_);var C=(b=t[b-=257])>>16;0<C&&(C=this.getBits(C)),g=(65535&b)+C,b=this.getCode(u),0<(C=(b=n[b])>>16)&&(C=this.getBits(C));var E=(65535&b)+C;w<=_+g&&(w=(F=this.ensureBuffer(_+g)).length);for(var S=0;S<g;++S,++_)F[_]=F[_-E]}}}else{var L,T=this.bytes,B=this.bytesPos;void 0===(L=T[B++])&&o("Bad block header in flate stream");var N=L;void 0===(L=T[B++])&&o("Bad block header in flate stream"),N|=L<<8,void 0===(L=T[B++])&&o("Bad block header in flate stream");var I=L;void 0===(L=T[B++])&&o("Bad block header in flate stream"),(I|=L<<8)!=(65535&~N)&&o("Bad uncompressed block length in flate stream"),this.codeBuf=0,this.codeSize=0;var O=this.bufferLength,F=this.ensureBuffer(O+N),x=O+N;this.bufferLength=x;for(var D=O;D<x;++D){if(void 0===(L=T[B++])){this.eof=!0;break}F[D]=L}this.bytesPos=B}},s}function o(e){throw new Error(e)}function s(e){var t=0,n=e[t++],i=e[t++];-1!=n&&-1!=i||o("Invalid header in flate stream"),8!=(15&n)&&o("Unknown compression method in flate stream"),((n<<8)+i)%31!=0&&o("Bad FCHECK in flate stream"),32&i&&o("FDICT bit set in flate stream"),this.bytes=e,this.bytesPos=2,this.codeSize=0,this.codeBuf=0,xe.call(this)}}();window.tmp=De}();try{e.exports=jsPDF}catch(p){}!function(){"use strict";function e(){}function t(e){if(!(this instanceof t))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],s(e,this)}function n(e,n){for(;3===e._state;)e=e._value;0!==e._state?(e._handled=!0,t._immediateFn((function(){var t=1===e._state?n.onFulfilled:n.onRejected;if(null!==t){var o;try{o=t(e._value)}catch(s){return void r(n.promise,s)}i(n.promise,o)}else(1===e._state?i:r)(n.promise,e._value)}))):e._deferreds.push(n)}function i(e,n){try{if(n===e)throw new TypeError("A promise cannot be resolved with itself.");if(n&&("object"==typeof n||"function"==typeof n)){var i=n.then;if(n instanceof t)return e._state=3,e._value=n,void o(e);if("function"==typeof i)return void s(function(e,t){return function(){e.apply(t,arguments)}}(i,n),e)}e._state=1,e._value=n,o(e)}catch(a){r(e,a)}}function r(e,t){e._state=2,e._value=t,o(e)}function o(e){2===e._state&&0===e._deferreds.length&&t._immediateFn((function(){e._handled||t._unhandledRejectionFn(e._value)}));for(var i=0,r=e._deferreds.length;r>i;i++)n(e,e._deferreds[i]);e._deferreds=null}function s(e,t){var n=!1;try{e((function(e){n||(n=!0,i(t,e))}),(function(e){n||(n=!0,r(t,e))}))}catch(o){if(n)return;n=!0,r(t,o)}}var a=function(e){var t=this.constructor;return this.then((function(n){return t.resolve(e()).then((function(){return n}))}),(function(n){return t.resolve(e()).then((function(){return t.reject(n)}))}))},l=setTimeout;t.prototype.catch=function(e){return this.then(null,e)},t.prototype.then=function(t,i){var r=new this.constructor(e);return n(this,new function(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}(t,i,r)),r},t.prototype.finally=a,t.all=function(e){return new t((function(t,n){function i(e,s){try{if(s&&("object"==typeof s||"function"==typeof s)){var a=s.then;if("function"==typeof a)return void a.call(s,(function(t){i(e,t)}),n)}r[e]=s,0==--o&&t(r)}catch(l){n(l)}}if(!e||void 0===e.length)throw new TypeError("Promise.all accepts an array");var r=Array.prototype.slice.call(e);if(0===r.length)return t([]);for(var o=r.length,s=0;r.length>s;s++)i(s,r[s])}))},t.resolve=function(e){return e&&"object"==typeof e&&e.constructor===t?e:new t((function(t){t(e)}))},t.reject=function(e){return new t((function(t,n){n(e)}))},t.race=function(e){return new t((function(t,n){for(var i=0,r=e.length;r>i;i++)e[i].then(t,n)}))},t._immediateFn="function"==typeof setImmediate&&function(e){setImmediate(e)}||function(e){l(e,0)},t._unhandledRejectionFn=function(e){void 0!==console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)};var u=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw Error("unable to locate global object")}();u.Promise?u.Promise.prototype.finally||(u.Promise.prototype.finally=a):u.Promise=t}(),l=function(){return function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,(function(t){return e[t]}).bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=5)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1);Object.defineProperty(t,"toCodePoints",{enumerable:!0,get:function(){return i.toCodePoints}}),Object.defineProperty(t,"fromCodePoint",{enumerable:!0,get:function(){return i.fromCodePoint}});var r=n(2);Object.defineProperty(t,"LineBreaker",{enumerable:!0,get:function(){return r.LineBreaker}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toCodePoints=function(e){for(var t=[],n=0,i=e.length;n<i;){var r=e.charCodeAt(n++);if(r>=55296&&r<=56319&&n<i){var o=e.charCodeAt(n++);56320==(64512&o)?t.push(((1023&r)<<10)+(1023&o)+65536):(t.push(r),n--)}else t.push(r)}return t},t.fromCodePoint=function(){if(String.fromCodePoint)return String.fromCodePoint.apply(String,arguments);var e=arguments.length;if(!e)return"";for(var t=[],n=-1,i="";++n<e;){var r=arguments.length<=n?void 0:arguments[n];r<=65535?t.push(r):t.push(55296+((r-=65536)>>10),r%1024+56320),(n+1===e||t.length>16384)&&(i+=String.fromCharCode.apply(String,t),t.length=0)}return i};for(var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r="undefined"==typeof Uint8Array?[]:new Uint8Array(256),o=0;o<i.length;o++)r[i.charCodeAt(o)]=o;t.decode=function(e){var t=.75*e.length,n=e.length,i=void 0,o=0,s=void 0,a=void 0,l=void 0,u=void 0;"="===e[e.length-1]&&(t--,"="===e[e.length-2]&&t--);var c="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array&&void 0!==Uint8Array.prototype.slice?new ArrayBuffer(t):new Array(t),h=Array.isArray(c)?c:new Uint8Array(c);for(i=0;i<n;i+=4)s=r[e.charCodeAt(i)],a=r[e.charCodeAt(i+1)],l=r[e.charCodeAt(i+2)],u=r[e.charCodeAt(i+3)],h[o++]=s<<2|a>>4,h[o++]=(15&a)<<4|l>>2,h[o++]=(3&l)<<6|63&u;return c},t.polyUint16Array=function(e){for(var t=e.length,n=[],i=0;i<t;i+=2)n.push(e[i+1]<<8|e[i]);return n},t.polyUint32Array=function(e){for(var t=e.length,n=[],i=0;i<t;i+=4)n.push(e[i+3]<<24|e[i+2]<<16|e[i+1]<<8|e[i]);return n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LineBreaker=t.inlineBreakOpportunities=t.lineBreakAtIndex=t.codePointsToCharacterClasses=t.UnicodeTrie=t.BREAK_ALLOWED=t.BREAK_NOT_ALLOWED=t.BREAK_MANDATORY=t.classes=t.LETTER_NUMBER_MODIFIER=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],i=!0,r=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);i=!0);}catch(e){r=!0,o=e}finally{try{!i&&a.return&&a.return()}finally{if(r)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=n(3),s=function(e){return e&&e.__esModule?e:{default:e}}(n(4)),a=n(1),l=t.LETTER_NUMBER_MODIFIER=50,u=10,c=13,h=15,d=17,A=18,p=19,f=20,g=21,m=22,y=24,v=25,w=26,_=27,b=28,C=30,E=32,S=33,L=34,T=35,B=37,N=38,I=39,O=40,F=42,x=(t.classes={BK:1,CR:2,LF:3,CM:4,NL:5,SG:6,WJ:7,ZW:8,GL:9,SP:u,ZWJ:11,B2:12,BA:c,BB:14,HY:h,CB:16,CL:d,CP:A,EX:p,IN:f,NS:g,OP:m,QU:23,IS:y,NU:v,PO:w,PR:_,SY:b,AI:29,AL:C,CJ:31,EB:E,EM:S,H2:L,H3:T,HL:36,ID:B,JL:N,JV:I,JT:O,RI:41,SA:F,XX:43},t.BREAK_MANDATORY="!"),D=t.BREAK_NOT_ALLOWED="\xd7",R=t.BREAK_ALLOWED="\xf7",U=t.UnicodeTrie=(0,o.createTrieFromBase64)(s.default),M=[C,36],H=[1,2,3,5],P=[u,8],Q=[_,w],k=H.concat(P),z=[N,I,O,L,T],V=[h,c],j=t.codePointsToCharacterClasses=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"strict",n=[],i=[],r=[];return e.forEach((function(e,o){var s=U.get(e);if(s>l?(r.push(!0),s-=l):r.push(!1),-1!==["normal","auto","loose"].indexOf(t)&&-1!==[8208,8211,12316,12448].indexOf(e))return i.push(o),n.push(16);if(4===s||11===s){if(0===o)return i.push(o),n.push(C);var a=n[o-1];return-1===k.indexOf(a)?(i.push(i[o-1]),n.push(a)):(i.push(o),n.push(C))}return i.push(o),31===s?n.push("strict"===t?g:B):s===F||29===s?n.push(C):43===s?n.push(e>=131072&&e<=196605||e>=196608&&e<=262141?B:C):void n.push(s)})),[i,n,r]},G=function(e,t,n,i){var r=i[n];if(Array.isArray(e)?-1!==e.indexOf(r):e===r)for(var o=n;o<=i.length;){var s=i[++o];if(s===t)return!0;if(s!==u)break}if(r===u)for(var a=n;a>0;){var l=i[--a];if(Array.isArray(e)?-1!==e.indexOf(l):e===l)for(var c=n;c<=i.length;){var h=i[++c];if(h===t)return!0;if(h!==u)break}if(l!==u)break}return!1},q=function(e,t){for(var n=e;n>=0;){var i=t[n];if(i!==u)return i;n--}return 0},W=function(e,t,n,i,r){if(0===n[i])return D;var o=i-1;if(Array.isArray(r)&&!0===r[o])return D;var s=o-1,a=o+1,l=t[o],C=s>=0?t[s]:0,F=t[a];if(2===l&&3===F)return D;if(-1!==H.indexOf(l))return x;if(-1!==H.indexOf(F))return D;if(-1!==P.indexOf(F))return D;if(8===q(o,t))return R;if(11===U.get(e[o])&&(F===B||F===E||F===S))return D;if(7===l||7===F)return D;if(9===l)return D;if(-1===[u,c,h].indexOf(l)&&9===F)return D;if(-1!==[d,A,p,y,b].indexOf(F))return D;if(q(o,t)===m)return D;if(G(23,m,o,t))return D;if(G([d,A],g,o,t))return D;if(G(12,12,o,t))return D;if(l===u)return R;if(23===l||23===F)return D;if(16===F||16===l)return R;if(-1!==[c,h,g].indexOf(F)||14===l)return D;if(36===C&&-1!==V.indexOf(l))return D;if(l===b&&36===F)return D;if(F===f&&-1!==M.concat(f,p,v,B,E,S).indexOf(l))return D;if(-1!==M.indexOf(F)&&l===v||-1!==M.indexOf(l)&&F===v)return D;if(l===_&&-1!==[B,E,S].indexOf(F)||-1!==[B,E,S].indexOf(l)&&F===w)return D;if(-1!==M.indexOf(l)&&-1!==Q.indexOf(F)||-1!==Q.indexOf(l)&&-1!==M.indexOf(F))return D;if(-1!==[_,w].indexOf(l)&&(F===v||-1!==[m,h].indexOf(F)&&t[a+1]===v)||-1!==[m,h].indexOf(l)&&F===v||l===v&&-1!==[v,b,y].indexOf(F))return D;if(-1!==[v,b,y,d,A].indexOf(F))for(var k=o;k>=0;){var j=t[k];if(j===v)return D;if(-1===[b,y].indexOf(j))break;k--}if(-1!==[_,w].indexOf(F))for(var W=-1!==[d,A].indexOf(l)?s:o;W>=0;){var K=t[W];if(K===v)return D;if(-1===[b,y].indexOf(K))break;W--}if(N===l&&-1!==[N,I,L,T].indexOf(F)||-1!==[I,L].indexOf(l)&&-1!==[I,O].indexOf(F)||-1!==[O,T].indexOf(l)&&F===O)return D;if(-1!==z.indexOf(l)&&-1!==[f,w].indexOf(F)||-1!==z.indexOf(F)&&l===_)return D;if(-1!==M.indexOf(l)&&-1!==M.indexOf(F))return D;if(l===y&&-1!==M.indexOf(F))return D;if(-1!==M.concat(v).indexOf(l)&&F===m||-1!==M.concat(v).indexOf(F)&&l===A)return D;if(41===l&&41===F){for(var X=n[o],Y=1;X>0&&41===t[--X];)Y++;if(Y%2!=0)return D}return l===E&&F===S?D:R},K=(t.lineBreakAtIndex=function(e,t){if(0===t)return D;if(t>=e.length)return x;var n=j(e),i=r(n,2);return W(e,i[1],i[0],t)},function(e,t){t||(t={lineBreak:"normal",wordBreak:"normal"});var n=j(e,t.lineBreak),i=r(n,3),o=i[0],s=i[1],a=i[2];return"break-all"!==t.wordBreak&&"break-word"!==t.wordBreak||(s=s.map((function(e){return-1!==[v,C,F].indexOf(e)?B:e}))),[o,s,"keep-all"===t.wordBreak?a.map((function(t,n){return t&&e[n]>=19968&&e[n]<=40959})):null]}),X=(t.inlineBreakOpportunities=function(e,t){var n=(0,a.toCodePoints)(e),i=D,o=K(n,t),s=r(o,3),l=s[0],u=s[1],c=s[2];return n.forEach((function(e,t){i+=(0,a.fromCodePoint)(e)+(t>=n.length-1?x:W(n,u,l,t+1,c))})),i},function(){function e(t,n,i,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._codePoints=t,this.required=n===x,this.start=i,this.end=r}return i(e,[{key:"slice",value:function(){return a.fromCodePoint.apply(void 0,function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(this._codePoints.slice(this.start,this.end)))}}]),e}());t.LineBreaker=function(e,t){var n=(0,a.toCodePoints)(e),i=K(n,t),o=r(i,3),s=o[0],l=o[1],u=o[2],c=n.length,h=0,d=0;return{next:function(){if(d>=c)return{done:!0};for(var e=D;d<c&&(e=W(n,l,s,++d,u))===D;);if(e!==D||d===c){var t=new X(n,e,h,d);return h=d,{value:t,done:!1}}return{done:!0}}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Trie=t.createTrieFromBase64=t.UTRIE2_INDEX_2_MASK=t.UTRIE2_INDEX_2_BLOCK_LENGTH=t.UTRIE2_OMITTED_BMP_INDEX_1_LENGTH=t.UTRIE2_INDEX_1_OFFSET=t.UTRIE2_UTF8_2B_INDEX_2_LENGTH=t.UTRIE2_UTF8_2B_INDEX_2_OFFSET=t.UTRIE2_INDEX_2_BMP_LENGTH=t.UTRIE2_LSCP_INDEX_2_LENGTH=t.UTRIE2_DATA_MASK=t.UTRIE2_DATA_BLOCK_LENGTH=t.UTRIE2_LSCP_INDEX_2_OFFSET=t.UTRIE2_SHIFT_1_2=t.UTRIE2_INDEX_SHIFT=t.UTRIE2_SHIFT_1=t.UTRIE2_SHIFT_2=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(1),o=t.UTRIE2_SHIFT_2=5,s=t.UTRIE2_SHIFT_1=11,a=t.UTRIE2_INDEX_SHIFT=2,l=t.UTRIE2_SHIFT_1_2=s-o,u=t.UTRIE2_LSCP_INDEX_2_OFFSET=65536>>o,c=t.UTRIE2_DATA_BLOCK_LENGTH=1<<o,h=t.UTRIE2_DATA_MASK=c-1,d=t.UTRIE2_LSCP_INDEX_2_LENGTH=1024>>o,A=t.UTRIE2_INDEX_2_BMP_LENGTH=u+d,p=t.UTRIE2_UTF8_2B_INDEX_2_OFFSET=A,f=t.UTRIE2_UTF8_2B_INDEX_2_LENGTH=32,g=t.UTRIE2_INDEX_1_OFFSET=p+f,m=t.UTRIE2_OMITTED_BMP_INDEX_1_LENGTH=65536>>s,y=t.UTRIE2_INDEX_2_BLOCK_LENGTH=1<<l,v=t.UTRIE2_INDEX_2_MASK=y-1,w=(t.createTrieFromBase64=function(e){var t=(0,r.decode)(e),n=Array.isArray(t)?(0,r.polyUint32Array)(t):new Uint32Array(t),i=Array.isArray(t)?(0,r.polyUint16Array)(t):new Uint16Array(t),o=i.slice(12,n[4]/2),s=2===n[5]?i.slice((24+n[4])/2):n.slice(Math.ceil((24+n[4])/4));return new w(n[0],n[1],n[2],n[3],o,s)},t.Trie=function(){function e(t,n,i,r,o,s){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.initialValue=t,this.errorValue=n,this.highStart=i,this.highValueIndex=r,this.index=o,this.data=s}return i(e,[{key:"get",value:function(e){var t=void 0;if(e>=0){if(e<55296||e>56319&&e<=65535)return t=((t=this.index[e>>o])<<a)+(e&h),this.data[t];if(e<=65535)return t=((t=this.index[u+(e-55296>>o)])<<a)+(e&h),this.data[t];if(e<this.highStart)return t=this.index[t=g-m+(e>>s)],t=((t=this.index[t+=e>>o&v])<<a)+(e&h),this.data[t];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue}}]),e}())},function(e,t,n){"use strict";e.exports="KwAAAAAAAAAACA4AIDoAAPAfAAACAAAAAAAIABAAGABAAEgAUABYAF4AZgBeAGYAYABoAHAAeABeAGYAfACEAIAAiACQAJgAoACoAK0AtQC9AMUAXgBmAF4AZgBeAGYAzQDVAF4AZgDRANkA3gDmAOwA9AD8AAQBDAEUARoBIgGAAIgAJwEvATcBPwFFAU0BTAFUAVwBZAFsAXMBewGDATAAiwGTAZsBogGkAawBtAG8AcIBygHSAdoB4AHoAfAB+AH+AQYCDgIWAv4BHgImAi4CNgI+AkUCTQJTAlsCYwJrAnECeQKBAk0CiQKRApkCoQKoArACuALAAsQCzAIwANQC3ALkAjAA7AL0AvwCAQMJAxADGAMwACADJgMuAzYDPgOAAEYDSgNSA1IDUgNaA1oDYANiA2IDgACAAGoDgAByA3YDfgOAAIQDgACKA5IDmgOAAIAAogOqA4AAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAK8DtwOAAIAAvwPHA88D1wPfAyAD5wPsA/QD/AOAAIAABAQMBBIEgAAWBB4EJgQuBDMEIAM7BEEEXgBJBCADUQRZBGEEaQQwADAAcQQ+AXkEgQSJBJEEgACYBIAAoASoBK8EtwQwAL8ExQSAAIAAgACAAIAAgACgAM0EXgBeAF4AXgBeAF4AXgBeANUEXgDZBOEEXgDpBPEE+QQBBQkFEQUZBSEFKQUxBTUFPQVFBUwFVAVcBV4AYwVeAGsFcwV7BYMFiwWSBV4AmgWgBacFXgBeAF4AXgBeAKsFXgCyBbEFugW7BcIFwgXIBcIFwgXQBdQF3AXkBesF8wX7BQMGCwYTBhsGIwYrBjMGOwZeAD8GRwZNBl4AVAZbBl4AXgBeAF4AXgBeAF4AXgBeAF4AXgBeAGMGXgBqBnEGXgBeAF4AXgBeAF4AXgBeAF4AXgB5BoAG4wSGBo4GkwaAAIADHgR5AF4AXgBeAJsGgABGA4AAowarBrMGswagALsGwwbLBjAA0wbaBtoG3QbaBtoG2gbaBtoG2gblBusG8wb7BgMHCwcTBxsHCwcjBysHMAc1BzUHOgdCB9oGSgdSB1oHYAfaBloHaAfaBlIH2gbaBtoG2gbaBtoG2gbaBjUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHbQdeAF4ANQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQd1B30HNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1B4MH2gaKB68EgACAAIAAgACAAIAAgACAAI8HlwdeAJ8HpweAAIAArwe3B14AXgC/B8UHygcwANAH2AfgB4AA6AfwBz4B+AcACFwBCAgPCBcIogEYAR8IJwiAAC8INwg/CCADRwhPCFcIXwhnCEoDGgSAAIAAgABvCHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIhAiLCI4IMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAANQc1BzUHNQc1BzUHNQc1BzUHNQc1B54INQc1B6II2gaqCLIIugiAAIAAvgjGCIAAgACAAIAAgACAAIAAgACAAIAAywiHAYAA0wiAANkI3QjlCO0I9Aj8CIAAgACAAAIJCgkSCRoJIgknCTYHLwk3CZYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiAAIAAAAFAAXgBeAGAAcABeAHwAQACQAKAArQC9AJ4AXgBeAE0A3gBRAN4A7AD8AMwBGgEAAKcBNwEFAUwBXAF4QkhCmEKnArcCgAHHAsABz4LAAcABwAHAAd+C6ABoAG+C/4LAAcABwAHAAc+DF4MAAcAB54M3gweDV4Nng3eDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEeDqABVg6WDqABoQ6gAaABoAHXDvcONw/3DvcO9w73DvcO9w73DvcO9w73DvcO9w73DvcO9w73DvcO9w73DvcO9w73DvcO9w73DvcO9w73DvcO9w73DncPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB7cPPwlGCU4JMACAAIAAgABWCV4JYQmAAGkJcAl4CXwJgAkwADAAMAAwAIgJgACLCZMJgACZCZ8JowmrCYAAswkwAF4AXgB8AIAAuwkABMMJyQmAAM4JgADVCTAAMAAwADAAgACAAIAAgACAAIAAgACAAIAAqwYWBNkIMAAwADAAMADdCeAJ6AnuCR4E9gkwAP4JBQoNCjAAMACAABUK0wiAAB0KJAosCjQKgAAwADwKQwqAAEsKvQmdCVMKWwowADAAgACAALcEMACAAGMKgABrCjAAMAAwADAAMAAwADAAMAAwADAAMAAeBDAAMAAwADAAMAAwADAAMAAwADAAMAAwAIkEPQFzCnoKiQSCCooKkAqJBJgKoAqkCokEGAGsCrQKvArBCjAAMADJCtEKFQHZCuEK/gHpCvEKMAAwADAAMACAAIwE+QowAIAAPwEBCzAAMAAwADAAMACAAAkLEQswAIAAPwEZCyELgAAOCCkLMAAxCzkLMAAwADAAMAAwADAAXgBeAEELMAAwADAAMAAwADAAMAAwAEkLTQtVC4AAXAtkC4AAiQkwADAAMAAwADAAMAAwADAAbAtxC3kLgAuFC4sLMAAwAJMLlwufCzAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAApwswADAAMACAAIAAgACvC4AAgACAAIAAgACAALcLMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAvwuAAMcLgACAAIAAgACAAIAAyguAAIAAgACAAIAA0QswADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAANkLgACAAIAA4AswADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACJCR4E6AswADAAhwHwC4AA+AsADAgMEAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMACAAIAAGAwdDCUMMAAwAC0MNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQw1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHPQwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADUHNQc1BzUHNQc1BzUHNQc2BzAAMAA5DDUHNQc1BzUHNQc1BzUHNQc1BzUHNQdFDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAgACAAIAATQxSDFoMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAF4AXgBeAF4AXgBeAF4AYgxeAGoMXgBxDHkMfwxeAIUMXgBeAI0MMAAwADAAMAAwAF4AXgCVDJ0MMAAwADAAMABeAF4ApQxeAKsMswy7DF4Awgy9DMoMXgBeAF4AXgBeAF4AXgBeAF4AXgDRDNkMeQBqCeAM3Ax8AOYM7Az0DPgMXgBeAF4AXgBeAF4AXgBeAF4AXgBeAF4AXgBeAF4AXgCgAAANoAAHDQ4NFg0wADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAeDSYNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIAAgACAAIAAgACAAC4NMABeAF4ANg0wADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAD4NRg1ODVYNXg1mDTAAbQ0wADAAMAAwADAAMAAwADAA2gbaBtoG2gbaBtoG2gbaBnUNeg3CBYANwgWFDdoGjA3aBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gaUDZwNpA2oDdoG2gawDbcNvw3HDdoG2gbPDdYN3A3fDeYN2gbsDfMN2gbaBvoN/g3aBgYODg7aBl4AXgBeABYOXgBeACUG2gYeDl4AJA5eACwO2w3aBtoGMQ45DtoG2gbaBtoGQQ7aBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gZJDjUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1B1EO2gY1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQdZDjUHNQc1BzUHNQc1B2EONQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHaA41BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1B3AO2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gY1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1B2EO2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gZJDtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBkkOeA6gAKAAoAAwADAAMAAwAKAAoACgAKAAoACgAKAAgA4wADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAD//wQABAAEAAQABAAEAAQABAAEAA0AAwABAAEAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAKABMAFwAeABsAGgAeABcAFgASAB4AGwAYAA8AGAAcAEsASwBLAEsASwBLAEsASwBLAEsAGAAYAB4AHgAeABMAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAFgAbABIAHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYADQARAB4ABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkAFgAaABsAGwAbAB4AHQAdAB4ATwAXAB4ADQAeAB4AGgAbAE8ATwAOAFAAHQAdAB0ATwBPABcATwBPAE8AFgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwArAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAAQABAANAA0ASwBLAEsASwBLAEsASwBLAEsASwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUAArACsABABQAAQABAAEAAQABAAEAAQAKwArAAQABAArACsABAAEAAQAUAArACsAKwArACsAKwArACsABAArACsAKwArAFAAUAArAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAGgAaAFAAUABQAFAAUABMAB4AGwBQAB4AKwArACsABAAEAAQAKwBQAFAAUABQAFAAUAArACsAKwArAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUAArAFAAUAArACsABAArAAQABAAEAAQABAArACsAKwArAAQABAArACsABAAEAAQAKwArACsABAArACsAKwArACsAKwArAFAAUABQAFAAKwBQACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwAEAAQAUABQAFAABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUAArACsABABQAAQABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQAKwArAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwAeABsAKwArACsAKwArACsAKwBQAAQABAAEAAQABAAEACsABAAEAAQAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwArAAQABAArACsABAAEAAQAKwArACsAKwArACsAKwArAAQABAArACsAKwArAFAAUAArAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwAeAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwAEAFAAKwBQAFAAUABQAFAAUAArACsAKwBQAFAAUAArAFAAUABQAFAAKwArACsAUABQACsAUAArAFAAUAArACsAKwBQAFAAKwArACsAUABQAFAAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQAKwArACsABAAEAAQAKwAEAAQABAAEACsAKwBQACsAKwArACsAKwArAAQAKwArACsAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAB4AHgAeAB4AHgAeABsAHgArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABAArACsAKwArACsAKwArAAQABAArAFAAUABQACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAB4AUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABAArACsAKwArACsAKwArAAQABAArACsAKwArACsAKwArAFAAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwArAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAKwBcAFwAKwBcACsAKwBcACsAKwArACsAKwArAFwAXABcAFwAKwBcAFwAXABcAFwAXABcACsAXABcAFwAKwBcACsAXAArACsAXABcACsAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgArACoAKgBcACsAKwBcAFwAXABcAFwAKwBcACsAKgAqACoAKgAqACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAFwAXABcAFwAUAAOAA4ADgAOAB4ADgAOAAkADgAOAA0ACQATABMAEwATABMACQAeABMAHgAeAB4ABAAEAB4AHgAeAB4AHgAeAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUAANAAQAHgAEAB4ABAAWABEAFgARAAQABABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAAQABAAEAAQABAANAAQABABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsADQANAB4AHgAeAB4AHgAeAAQAHgAeAB4AHgAeAB4AKwAeAB4ADgAOAA0ADgAeAB4AHgAeAB4ACQAJACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgAeAB4AHgBcAFwAXABcAFwAXAAqACoAKgAqAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAKgAqACoAKgAqACoAKgBcAFwAXAAqACoAKgAqAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAXAAqAEsASwBLAEsASwBLAEsASwBLAEsAKgAqACoAKgAqACoAUABQAFAAUABQAFAAKwBQACsAKwArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQACsAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwAEAAQABAAeAA0AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAEQArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAADQANAA0AUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAA0ADQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQACsABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoADQANABUAXAANAB4ADQAbAFwAKgArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAB4AHgATABMADQANAA4AHgATABMAHgAEAAQABAAJACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAUABQAFAAUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwAeACsAKwArABMAEwBLAEsASwBLAEsASwBLAEsASwBLAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwBcAFwAXABcAFwAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcACsAKwArACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwAeAB4AXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgArACsABABLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKgAqACoAKgAqACoAKgBcACoAKgAqACoAKgAqACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAUABQAFAAUABQAFAAUAArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4ADQANAA0ADQAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAHgAeAB4AHgBQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwANAA0ADQANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwBQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsABAAEAAQAHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAABABQAFAAUABQAAQABAAEAFAAUAAEAAQABAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAKwBQACsAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAKwArAB4AHgAeAB4AHgAeACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAUABQAFAAKwAeAB4AHgAeAB4AHgAeAA4AHgArAA0ADQANAA0ADQANAA0ACQANAA0ADQAIAAQACwAEAAQADQAJAA0ADQAMAB0AHQAeABcAFwAWABcAFwAXABYAFwAdAB0AHgAeABQAFAAUAA0AAQABAAQABAAEAAQABAAJABoAGgAaABoAGgAaABoAGgAeABcAFwAdABUAFQAeAB4AHgAeAB4AHgAYABYAEQAVABUAFQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgANAB4ADQANAA0ADQAeAA0ADQANAAcAHgAeAB4AHgArAAQABAAEAAQABAAEAAQABAAEAAQAUABQACsAKwBPAFAAUABQAFAAUAAeAB4AHgAWABEATwBQAE8ATwBPAE8AUABQAFAAUABQAB4AHgAeABYAEQArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAGwAbABsAGwAbABsAGwAaABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAaABsAGwAbABsAGgAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgBQABoAHgAdAB4AUAAeABoAHgAeAB4AHgAeAB4AHgAeAB4ATwAeAFAAGwAeAB4AUABQAFAAUABQAB4AHgAeAB0AHQAeAFAAHgBQAB4AUAAeAFAATwBQAFAAHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AUABQAFAAUABPAE8AUABQAFAAUABQAE8AUABQAE8AUABPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAE8ATwBPAE8ATwBPAE8ATwBPAE8AUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAATwAeAB4AKwArACsAKwAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB0AHQAeAB4AHgAdAB0AHgAeAB0AHgAeAB4AHQAeAB0AGwAbAB4AHQAeAB4AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB0AHgAdAB4AHQAdAB0AHQAdAB0AHgAdAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAdAB0AHQAdAB4AHgAdAB0AHgAeAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABQAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAlACUAHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBQAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAeAB4AHgAeAB0AHQAeAB4AHgAeAB0AHQAdAB4AHgAdAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB0AHQAeAB4AHQAeAB4AHgAeAB0AHQAeAB4AHgAeACUAJQAdAB0AJQAeACUAJQAlACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAHgAeAB4AHgAdAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHQAdAB0AHgAdACUAHQAdAB4AHQAdAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHQAdAB0AHQAlAB4AJQAlACUAHQAlACUAHQAdAB0AJQAlAB0AHQAlAB0AHQAlACUAJQAeAB0AHgAeAB4AHgAdAB0AJQAdAB0AHQAdAB0AHQAlACUAJQAlACUAHQAlACUAIAAlAB0AHQAlACUAJQAlACUAJQAlACUAHgAeAB4AJQAlACAAIAAgACAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeABcAFwAXABcAFwAXAB4AEwATACUAHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwArACUAJQBXAFcAVwBXACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAKwArACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAE8ATwBPAE8ATwBPAE8ATwAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeACsAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUAArACsAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQBQAFAAUABQACsAKwArACsAUABQAFAAUABQAFAAUABQAA0AUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQACsAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgBQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAABAAEAAQAKwAEAAQAKwArACsAKwArAAQABAAEAAQAUABQAFAAUAArAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsABAAEAAQAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsADQANAA0ADQANAA0ADQANAB4AKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AUABQAFAAUABQAFAAUABQAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAUABQAFAAUABQAA0ADQANAA0ADQANABQAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwANAA0ADQANAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAeAAQABAAEAB4AKwArAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLACsADQArAB4AKwArAAQABAAEAAQAUABQAB4AUAArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwAEAAQABAAEAAQABAAEAAQABAAOAA0ADQATABMAHgAeAB4ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0AUABQAFAAUAAEAAQAKwArAAQADQANAB4AUAArACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXABcAA0ADQANACoASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUAArACsAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANACsADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEcARwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQACsAKwAeAAQABAANAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAEAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUAArACsAUAArACsAUABQACsAKwBQAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AKwArAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAeAB4ADQANAA0ADQAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAArAAQABAArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAEAAQABAAEAAQABAAEACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAFgAWAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAKwBQACsAKwArACsAKwArAFAAKwArACsAKwBQACsAUAArAFAAKwBQAFAAUAArAFAAUAArAFAAKwArAFAAKwBQACsAUAArAFAAKwBQACsAUABQACsAUAArACsAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAUABQAFAAUAArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUAArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAlACUAJQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeACUAJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeACUAJQAlACUAJQAeACUAJQAlACUAJQAgACAAIAAlACUAIAAlACUAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAIQAhACEAIQAhACUAJQAgACAAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAIAAgACAAIAAlACUAJQAlACAAJQAgACAAIAAgACAAIAAgACAAIAAlACUAJQAgACUAJQAlACUAIAAgACAAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeACUAHgAlAB4AJQAlACUAJQAlACAAJQAlACUAJQAeACUAHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAIAAgACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAIAAlACUAJQAlACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAIAAgACAAJQAlACUAIAAgACAAIAAgAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFwAXABcAFQAVABUAHgAeAB4AHgAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAIAAgACAAJQAlACUAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAlACAAIAAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsA"},function(e,t,n){"use strict";n.r(t);var i=/^#([a-f0-9]{3})$/i,r=function(e){var t=e.match(i);return!!t&&[parseInt(t[1][0]+t[1][0],16),parseInt(t[1][1]+t[1][1],16),parseInt(t[1][2]+t[1][2],16),null]},o=/^#([a-f0-9]{6})$/i,s=function(e){var t=e.match(o);return!!t&&[parseInt(t[1].substring(0,2),16),parseInt(t[1].substring(2,4),16),parseInt(t[1].substring(4,6),16),null]},a=/^rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)$/,l=/^rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d?\.?\d+)\s*\)$/,u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],i=!0,r=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),4!==n.length);i=!0);}catch(e){r=!0,o=e}finally{try{i||null==a.return||a.return()}finally{if(r)throw o}}return n}(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}(Array.isArray(t)?function(e){return[Math.min(e[0],255),Math.min(e[1],255),Math.min(e[2],255),e.length>3?e[3]:null]}(t):r(t)||function(e){var t=e.match(a);return!!t&&[Number(t[1]),Number(t[2]),Number(t[3]),null]}(t)||function(e){var t=e.match(l);return!!(t&&t.length>4)&&[Number(t[1]),Number(t[2]),Number(t[3]),Number(t[4])]}(t)||function(e){return c[e.toLowerCase()]||!1}(t)||s(t)||[0,0,0,null]),i=n[1],o=n[2],u=n[3];this.r=n[0],this.g=i,this.b=o,this.a=u}return function(e,t,n){t&&function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}(e.prototype,t)}(e,[{key:"isTransparent",value:function(){return 0===this.a}},{key:"toString",value:function(){return null!==this.a&&1!==this.a?"rgba(".concat(this.r,",").concat(this.g,",").concat(this.b,",").concat(this.a,")"):"rgb(".concat(this.r,",").concat(this.g,",").concat(this.b,")")}}]),e}(),c={transparent:[0,0,0,0],aliceblue:[240,248,255,null],antiquewhite:[250,235,215,null],aqua:[0,255,255,null],aquamarine:[127,255,212,null],azure:[240,255,255,null],beige:[245,245,220,null],bisque:[255,228,196,null],black:[0,0,0,null],blanchedalmond:[255,235,205,null],blue:[0,0,255,null],blueviolet:[138,43,226,null],brown:[165,42,42,null],burlywood:[222,184,135,null],cadetblue:[95,158,160,null],chartreuse:[127,255,0,null],chocolate:[210,105,30,null],coral:[255,127,80,null],cornflowerblue:[100,149,237,null],cornsilk:[255,248,220,null],crimson:[220,20,60,null],cyan:[0,255,255,null],darkblue:[0,0,139,null],darkcyan:[0,139,139,null],darkgoldenrod:[184,134,11,null],darkgray:[169,169,169,null],darkgreen:[0,100,0,null],darkgrey:[169,169,169,null],darkkhaki:[189,183,107,null],darkmagenta:[139,0,139,null],darkolivegreen:[85,107,47,null],darkorange:[255,140,0,null],darkorchid:[153,50,204,null],darkred:[139,0,0,null],darksalmon:[233,150,122,null],darkseagreen:[143,188,143,null],darkslateblue:[72,61,139,null],darkslategray:[47,79,79,null],darkslategrey:[47,79,79,null],darkturquoise:[0,206,209,null],darkviolet:[148,0,211,null],deeppink:[255,20,147,null],deepskyblue:[0,191,255,null],dimgray:[105,105,105,null],dimgrey:[105,105,105,null],dodgerblue:[30,144,255,null],firebrick:[178,34,34,null],floralwhite:[255,250,240,null],forestgreen:[34,139,34,null],fuchsia:[255,0,255,null],gainsboro:[220,220,220,null],ghostwhite:[248,248,255,null],gold:[255,215,0,null],goldenrod:[218,165,32,null],gray:[128,128,128,null],green:[0,128,0,null],greenyellow:[173,255,47,null],grey:[128,128,128,null],honeydew:[240,255,240,null],hotpink:[255,105,180,null],indianred:[205,92,92,null],indigo:[75,0,130,null],ivory:[255,255,240,null],khaki:[240,230,140,null],lavender:[230,230,250,null],lavenderblush:[255,240,245,null],lawngreen:[124,252,0,null],lemonchiffon:[255,250,205,null],lightblue:[173,216,230,null],lightcoral:[240,128,128,null],lightcyan:[224,255,255,null],lightgoldenrodyellow:[250,250,210,null],lightgray:[211,211,211,null],lightgreen:[144,238,144,null],lightgrey:[211,211,211,null],lightpink:[255,182,193,null],lightsalmon:[255,160,122,null],lightseagreen:[32,178,170,null],lightskyblue:[135,206,250,null],lightslategray:[119,136,153,null],lightslategrey:[119,136,153,null],lightsteelblue:[176,196,222,null],lightyellow:[255,255,224,null],lime:[0,255,0,null],limegreen:[50,205,50,null],linen:[250,240,230,null],magenta:[255,0,255,null],maroon:[128,0,0,null],mediumaquamarine:[102,205,170,null],mediumblue:[0,0,205,null],mediumorchid:[186,85,211,null],mediumpurple:[147,112,219,null],mediumseagreen:[60,179,113,null],mediumslateblue:[123,104,238,null],mediumspringgreen:[0,250,154,null],mediumturquoise:[72,209,204,null],mediumvioletred:[199,21,133,null],midnightblue:[25,25,112,null],mintcream:[245,255,250,null],mistyrose:[255,228,225,null],moccasin:[255,228,181,null],navajowhite:[255,222,173,null],navy:[0,0,128,null],oldlace:[253,245,230,null],olive:[128,128,0,null],olivedrab:[107,142,35,null],orange:[255,165,0,null],orangered:[255,69,0,null],orchid:[218,112,214,null],palegoldenrod:[238,232,170,null],palegreen:[152,251,152,null],paleturquoise:[175,238,238,null],palevioletred:[219,112,147,null],papayawhip:[255,239,213,null],peachpuff:[255,218,185,null],peru:[205,133,63,null],pink:[255,192,203,null],plum:[221,160,221,null],powderblue:[176,224,230,null],purple:[128,0,128,null],rebeccapurple:[102,51,153,null],red:[255,0,0,null],rosybrown:[188,143,143,null],royalblue:[65,105,225,null],saddlebrown:[139,69,19,null],salmon:[250,128,114,null],sandybrown:[244,164,96,null],seagreen:[46,139,87,null],seashell:[255,245,238,null],sienna:[160,82,45,null],silver:[192,192,192,null],skyblue:[135,206,235,null],slateblue:[106,90,205,null],slategray:[112,128,144,null],slategrey:[112,128,144,null],snow:[255,250,250,null],springgreen:[0,255,127,null],steelblue:[70,130,180,null],tan:[210,180,140,null],teal:[0,128,128,null],thistle:[216,191,216,null],tomato:[255,99,71,null],turquoise:[64,224,208,null],violet:[238,130,238,null],wheat:[245,222,179,null],white:[255,255,255,null],whitesmoke:[245,245,245,null],yellow:[255,255,0,null],yellowgreen:[154,205,50,null]},h=new u([0,0,0,0]),d=function(e){switch(e){case"underline":return 1;case"overline":return 2;case"line-through":return 3}return 4},A=function(e){var t=function(e){return"none"===e?null:e.split(" ").map(d)}(e.textDecorationLine?e.textDecorationLine:e.textDecoration);return null===t?null:{textDecorationLine:t,textDecorationColor:e.textDecorationColor?new u(e.textDecorationColor):null,textDecorationStyle:function(e){switch(e){case"double":return 1;case"dotted":return 2;case"dashed":return 3;case"wavy":return 4}return 0}(e.textDecorationStyle)}},p=function(e,t){var n=Math.max.apply(null,e.colorStops.map((function(e){return e.stop}))),i=1/Math.max(1,n);e.colorStops.forEach((function(e){t.addColorStop(Math.floor(Math.max(0,i*e.stop)),e.color.toString())}))},f=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.canvas=t||document.createElement("canvas")}return function(e,t,n){t&&function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}(e.prototype,t)}(e,[{key:"render",value:function(e){this.ctx=this.canvas.getContext("2d"),this.options=e,this.canvas.width=Math.floor(e.width*e.scale),this.canvas.height=Math.floor(e.height*e.scale),this.canvas.style.width="".concat(e.width,"px"),this.canvas.style.height="".concat(e.height,"px"),this.ctx.scale(this.options.scale,this.options.scale),this.ctx.translate(-e.x,-e.y),this.ctx.textBaseline="bottom",e.logger.log("Canvas renderer initialized (".concat(e.width,"x").concat(e.height," at ").concat(e.x,",").concat(e.y,") with scale ").concat(this.options.scale))}},{key:"clip",value:function(e,t){var n=this;e.length&&(this.ctx.save(),e.forEach((function(e){n.path(e),n.ctx.clip()}))),t(),e.length&&this.ctx.restore()}},{key:"drawImage",value:function(e,t,n){this.ctx.drawImage(e,t.left,t.top,t.width,t.height,n.left,n.top,n.width,n.height)}},{key:"drawShape",value:function(e,t){this.path(e),this.ctx.fillStyle=t.toString(),this.ctx.fill()}},{key:"fill",value:function(e){this.ctx.fillStyle=e.toString(),this.ctx.fill()}},{key:"getTarget",value:function(){return this.canvas.getContext("2d").setTransform(1,0,0,1,0,0),Promise.resolve(this.canvas)}},{key:"path",value:function(e){var t=this;this.ctx.beginPath(),Array.isArray(e)?e.forEach((function(e,n){var i=0===e.type?e:e.start;0===n?t.ctx.moveTo(i.x,i.y):t.ctx.lineTo(i.x,i.y),1===e.type&&t.ctx.bezierCurveTo(e.startControl.x,e.startControl.y,e.endControl.x,e.endControl.y,e.end.x,e.end.y)})):this.ctx.arc(e.x+e.radius,e.y+e.radius,e.radius,0,2*Math.PI,!0),this.ctx.closePath()}},{key:"rectangle",value:function(e,t,n,i,r){this.ctx.fillStyle=r.toString(),this.ctx.fillRect(e,t,n,i)}},{key:"renderLinearGradient",value:function(e,t){var n=this.ctx.createLinearGradient(e.left+t.direction.x1,e.top+t.direction.y1,e.left+t.direction.x0,e.top+t.direction.y0);p(t,n),this.ctx.fillStyle=n,this.ctx.fillRect(e.left,e.top,e.width,e.height)}},{key:"renderRadialGradient",value:function(e,t){var n=this,i=e.left+t.center.x,r=e.top+t.center.y,o=this.ctx.createRadialGradient(i,r,0,i,r,t.radius.x);if(o)if(p(t,o),this.ctx.fillStyle=o,t.radius.x!==t.radius.y){var s=e.top+.5*e.height,a=t.radius.y/t.radius.x,l=1/a;this.transform(e.left+.5*e.width,s,[1,0,0,a,0,0],(function(){return n.ctx.fillRect(e.left,l*(e.top-s)+s,e.width,e.height*l)}))}else this.ctx.fillRect(e.left,e.top,e.width,e.height)}},{key:"renderRepeat",value:function(e,t,n,i,r){this.path(e),this.ctx.fillStyle=this.ctx.createPattern(this.resizeImage(t,n),"repeat"),this.ctx.translate(i,r),this.ctx.fill(),this.ctx.translate(-i,-r)}},{key:"renderTextNode",value:function(e,t,n,i,r){var o=this;this.ctx.font=[n.fontStyle,n.fontVariant,n.fontWeight,n.fontSize,n.fontFamily].join(" "),e.forEach((function(e){if(o.ctx.fillStyle=t.toString(),r&&e.text.trim().length?(r.slice(0).reverse().forEach((function(t){o.ctx.shadowColor=t.color.toString(),o.ctx.shadowOffsetX=t.offsetX*o.options.scale,o.ctx.shadowOffsetY=t.offsetY*o.options.scale,o.ctx.shadowBlur=t.blur,o.ctx.fillText(e.text,e.bounds.left,e.bounds.top+e.bounds.height)})),o.ctx.shadowColor="",o.ctx.shadowOffsetX=0,o.ctx.shadowOffsetY=0,o.ctx.shadowBlur=0):o.ctx.fillText(e.text,e.bounds.left,e.bounds.top+e.bounds.height),null!==i){var s=i.textDecorationColor||t;i.textDecorationLine.forEach((function(t){switch(t){case 1:var i=o.options.fontMetrics.getMetrics(n).baseline;o.rectangle(e.bounds.left,Math.round(e.bounds.top+i),e.bounds.width,1,s);break;case 2:o.rectangle(e.bounds.left,Math.round(e.bounds.top),e.bounds.width,1,s);break;case 3:var r=o.options.fontMetrics.getMetrics(n).middle;o.rectangle(e.bounds.left,Math.ceil(e.bounds.top+r),e.bounds.width,1,s)}}))}}))}},{key:"resizeImage",value:function(e,t){if(e.width===t.width&&e.height===t.height)return e;var n=this.canvas.ownerDocument.createElement("canvas");return n.width=t.width,n.height=t.height,n.getContext("2d").drawImage(e,0,0,e.width,e.height,0,0,t.width,t.height),n}},{key:"setOpacity",value:function(e){this.ctx.globalAlpha=e}},{key:"transform",value:function(e,t,n,i){this.ctx.save(),this.ctx.translate(e,t),this.ctx.transform(n[0],n[1],n[2],n[3],n[4],n[5]),this.ctx.translate(-e,-t),i(),this.ctx.restore()}}]),e}(),g=function(){function e(t,n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.enabled="undefined"!=typeof window&&t,this.start=i||Date.now(),this.id=n}return function(e,t,n){t&&function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}(e.prototype,t)}(e,[{key:"child",value:function(t){return new e(this.enabled,t,this.start)}},{key:"log",value:function(){}},{key:"error",value:function(){if(this.enabled&&window.console&&window.console.error){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];Function.prototype.bind.call(window.console.error,window.console).apply(window.console,[Date.now()-this.start+"ms",this.id?"html2canvas (".concat(this.id,"):"):"html2canvas:"].concat([].slice.call(t,0)))}}}]),e}(),m=function(e,t){return 0!=(e&t)},y=function(e,t){return Math.sqrt(e*e+t*t)},v=function(e,t){for(var n=e.length-1;n>=0;n--){var i=e.item(n);"content"!==i&&t.style.setProperty(i,e.getPropertyValue(i))}return t};function w(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var _=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.type="%"===t.substr(t.length-1)?1:0;var n=parseFloat(t);this.value=isNaN(n)?0:n}return function(e,t,n){t&&w(e.prototype,t),n&&w(e,n)}(e,[{key:"isPercentage",value:function(){return 1===this.type}},{key:"getAbsoluteValue",value:function(e){return this.isPercentage()?e*(this.value/100):this.value}}],[{key:"create",value:function(t){return new e(t)}}]),e}(),b=function(e,t,n){switch(n){case"px":case"%":return new _(t+n);case"em":case"rem":var i=new _(t);return i.value*="em"===n?parseFloat(e.style.font.fontSize):function e(t){var n=t.parent;return n?e(n):parseFloat(t.style.font.fontSize)}(e),i;default:return new _("0")}},C=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.width=t,this.height=n},E=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.type=0,this.x=t,this.y=n},S=function(e,t,n){return new E(e.x+(t.x-e.x)*n,e.y+(t.y-e.y)*n)},L=function(){function e(t,n,i,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.type=1,this.start=t,this.startControl=n,this.endControl=i,this.end=r}return function(e,t,n){t&&function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}(e.prototype,t)}(e,[{key:"subdivide",value:function(t,n){var i=S(this.start,this.startControl,t),r=S(this.startControl,this.endControl,t),o=S(this.endControl,this.end,t),s=S(i,r,t),a=S(r,o,t),l=S(s,a,t);return n?new e(this.start,i,s,l):new e(l,a,o,this.end)}},{key:"reverse",value:function(){return new e(this.end,this.endControl,this.startControl,this.start)}}]),e}(),T=function(){function e(t,n,i,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.left=t,this.top=n,this.width=i,this.height=r}return function(e,t,n){n&&function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}(e,n)}(e,0,[{key:"fromClientRect",value:function(t,n,i){return new e(t.left+n,t.top+i,t.width,t.height)}}]),e}(),B=function(e,t,n){return T.fromClientRect(e.getBoundingClientRect(),t,n)},N=function(e){var t=e.body,n=e.documentElement;if(!t||!n)throw new Error("");var i=Math.max(Math.max(t.scrollWidth,n.scrollWidth),Math.max(t.offsetWidth,n.offsetWidth),Math.max(t.clientWidth,n.clientWidth)),r=Math.max(Math.max(t.scrollHeight,n.scrollHeight),Math.max(t.offsetHeight,n.offsetHeight),Math.max(t.clientHeight,n.clientHeight));return new T(0,0,i,r)},I=function(e,t,n,i){var r=[];return r.push(e instanceof L?e.subdivide(.5,!1):e),r.push(n instanceof L?n.subdivide(.5,!0):n),r.push(i instanceof L?i.subdivide(.5,!0).reverse():i),r.push(t instanceof L?t.subdivide(.5,!1).reverse():t),r},O=function(e){return[e.topLeftInner,e.topRightInner,e.bottomRightInner,e.bottomLeftInner]},F=function(e,t,n){var i=n[x.TOP_LEFT][0].getAbsoluteValue(e.width),r=n[x.TOP_LEFT][1].getAbsoluteValue(e.height),o=n[x.TOP_RIGHT][0].getAbsoluteValue(e.width),s=n[x.TOP_RIGHT][1].getAbsoluteValue(e.height),a=n[x.BOTTOM_RIGHT][0].getAbsoluteValue(e.width),l=n[x.BOTTOM_RIGHT][1].getAbsoluteValue(e.height),u=n[x.BOTTOM_LEFT][0].getAbsoluteValue(e.width),c=n[x.BOTTOM_LEFT][1].getAbsoluteValue(e.height),h=[];h.push((i+o)/e.width),h.push((u+a)/e.width),h.push((r+c)/e.height),h.push((s+l)/e.height);var d=Math.max.apply(Math,h);d>1&&(i/=d,r/=d,o/=d,s/=d,a/=d,l/=d,u/=d,c/=d);var A=e.width-o,p=e.height-l,f=e.width-a,g=e.height-c;return{topLeftOuter:i>0||r>0?D(e.left,e.top,i,r,x.TOP_LEFT):new E(e.left,e.top),topLeftInner:i>0||r>0?D(e.left+t[3].borderWidth,e.top+t[0].borderWidth,Math.max(0,i-t[3].borderWidth),Math.max(0,r-t[0].borderWidth),x.TOP_LEFT):new E(e.left+t[3].borderWidth,e.top+t[0].borderWidth),topRightOuter:o>0||s>0?D(e.left+A,e.top,o,s,x.TOP_RIGHT):new E(e.left+e.width,e.top),topRightInner:o>0||s>0?D(e.left+Math.min(A,e.width+t[3].borderWidth),e.top+t[0].borderWidth,A>e.width+t[3].borderWidth?0:o-t[3].borderWidth,s-t[0].borderWidth,x.TOP_RIGHT):new E(e.left+e.width-t[1].borderWidth,e.top+t[0].borderWidth),bottomRightOuter:a>0||l>0?D(e.left+f,e.top+p,a,l,x.BOTTOM_RIGHT):new E(e.left+e.width,e.top+e.height),bottomRightInner:a>0||l>0?D(e.left+Math.min(f,e.width-t[3].borderWidth),e.top+Math.min(p,e.height+t[0].borderWidth),Math.max(0,a-t[1].borderWidth),l-t[2].borderWidth,x.BOTTOM_RIGHT):new E(e.left+e.width-t[1].borderWidth,e.top+e.height-t[2].borderWidth),bottomLeftOuter:u>0||c>0?D(e.left,e.top+g,u,c,x.BOTTOM_LEFT):new E(e.left,e.top+e.height),bottomLeftInner:u>0||c>0?D(e.left+t[3].borderWidth,e.top+g,Math.max(0,u-t[3].borderWidth),c-t[2].borderWidth,x.BOTTOM_LEFT):new E(e.left+t[3].borderWidth,e.top+e.height-t[2].borderWidth)}},x={TOP_LEFT:0,TOP_RIGHT:1,BOTTOM_RIGHT:2,BOTTOM_LEFT:3},D=function(e,t,n,i,r){var o=(Math.sqrt(2)-1)/3*4,s=n*o,a=i*o,l=e+n,u=t+i;switch(r){case x.TOP_LEFT:return new L(new E(e,u),new E(e,u-a),new E(l-s,t),new E(l,t));case x.TOP_RIGHT:return new L(new E(e,t),new E(e+s,t),new E(l,u-a),new E(l,u));case x.BOTTOM_RIGHT:return new L(new E(l,t),new E(l,t+a),new E(e+s,u),new E(e,u));case x.BOTTOM_LEFT:default:return new L(new E(l,u),new E(l-s,u),new E(e,t+a),new E(e,t))}},R=["top","right","bottom","left"],U=function(e){return R.map((function(t){return new _(e.getPropertyValue("padding-".concat(t)))}))},M={BORDER_BOX:0,PADDING_BOX:1,CONTENT_BOX:2},H=M,P=function e(t){switch(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t){case"contain":this.size=1;break;case"cover":this.size=2;break;case"auto":this.size=0;break;default:this.value=new _(t)}},Q=new P("auto"),k=function(e,t,n,i){var r=function(e,t){return new T(e.left+t[3].borderWidth,e.top+t[0].borderWidth,e.width-(t[1].borderWidth+t[3].borderWidth),e.height-(t[0].borderWidth+t[2].borderWidth))}(t,i);switch(e){case H.BORDER_BOX:return t;case H.CONTENT_BOX:var o=n[3].getAbsoluteValue(t.width),s=n[1].getAbsoluteValue(t.width),a=n[0].getAbsoluteValue(t.width),l=n[2].getAbsoluteValue(t.width);return new T(r.left+o,r.top+a,r.width-o-s,r.height-a-l);case H.PADDING_BOX:default:return r}},z=function(e,t,n){return new E(e[0].getAbsoluteValue(n.width-t.width),e[1].getAbsoluteValue(n.height-t.height))},V=function(e,t){return{backgroundColor:new u(e.backgroundColor),backgroundImage:q(e,t),backgroundClip:j(e.backgroundClip),backgroundOrigin:G(e.backgroundOrigin)}},j=function(e){switch(e){case"padding-box":return M.PADDING_BOX;case"content-box":return M.CONTENT_BOX}return M.BORDER_BOX},G=function(e){switch(e){case"padding-box":return H.PADDING_BOX;case"content-box":return H.CONTENT_BOX}return H.BORDER_BOX},q=function(e,t){var n=X(e.backgroundImage).map((function(e){if("url"===e.method){var n=t.loadImage(e.args[0]);e.args=n?[n]:[]}return e})),i=e.backgroundPosition.split(","),r=e.backgroundRepeat.split(","),o=e.backgroundSize.split(",");return n.map((function(e,t){var n=(o[t]||"auto").trim().split(" ").map(W),s=(i[t]||"auto").trim().split(" ").map(K);return{source:e,repeat:function(e){switch(("string"==typeof r[t]?r[t]:r[0]).trim()){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":return 0}return 0}(),size:n.length<2?[n[0],Q]:[n[0],n[1]],position:s.length<2?[s[0],s[0]]:[s[0],s[1]]}}))},W=function(e){return"auto"===e?Q:new P(e)},K=function(e){switch(e){case"bottom":case"right":return new _("100%");case"left":case"top":return new _("0%");case"auto":return new _("0")}return new _(e)},X=function(e){var t=/^\s$/,n=[],i=[],r="",o=null,s="",a=0,l=0,u=function(){var e="";if(r){'"'===s.substr(0,1)&&(s=s.substr(1,s.length-2)),s&&i.push(s.trim());var t=r.indexOf("-",1)+1;"-"===r.substr(0,1)&&t>0&&(e=r.substr(0,t).toLowerCase(),r=r.substr(t)),"none"!==(r=r.toLowerCase())&&n.push({prefix:e,method:r,args:i})}i=[],r=s=""};return e.split("").forEach((function(e){if(0!==a||!t.test(e)){switch(e){case'"':o?o===e&&(o=null):o=e;break;case"(":if(o)break;if(0===a)return void(a=1);l++;break;case")":if(o)break;if(1===a){if(0===l)return a=0,void u();l--}break;case",":if(o)break;if(0===a)return void u();if(1===a&&0===l&&!r.match(/^url$/i))return i.push(s.trim()),void(s="")}0===a?r+=e:s+=e}})),u(),n},Y=Object.keys({TOP:0,RIGHT:1,BOTTOM:2,LEFT:3}).map((function(e){return e.toLowerCase()})),J=function(e){return Y.map((function(t){var n=new u(e.getPropertyValue("border-".concat(t,"-color"))),i=function(e){switch(e){case"none":return 0}return 1}(e.getPropertyValue("border-".concat(t,"-style"))),r=parseFloat(e.getPropertyValue("border-".concat(t,"-width")));return{borderColor:n,borderStyle:i,borderWidth:isNaN(r)?0:r}}))},Z=["top-left","top-right","bottom-right","bottom-left"],$=function(e){return Z.map((function(t){var n=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],i=!0,r=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),2!==n.length);i=!0);}catch(e){r=!0,o=e}finally{try{i||null==a.return||a.return()}finally{if(r)throw o}}return n}(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}(e.getPropertyValue("border-".concat(t,"-radius")).split(" ").map(_.create)),i=n[0],r=n[1];return void 0===r?[i,i]:[i,r]}))},ee=function(e,t){return e|function(e){switch(t){case"block":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":return 128;case"grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 1<<17;case"table-column":return 1<<18;case"table-caption":return 1<<19;case"ruby-base":return 1<<20;case"ruby-text":return 1<<21;case"ruby-base-container":return 1<<22;case"ruby-text-container":return 1<<23;case"contents":return 1<<24;case"inline-block":return 1<<25;case"inline-list-item":return 1<<26;case"inline-table":return 1<<27;case"inline-flex":return 1<<28;case"inline-grid":return 1<<29}return 1}()},te=function(e){switch(e){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0},ne=function(e){return{fontFamily:e.fontFamily,fontSize:e.fontSize,fontStyle:e.fontStyle,fontVariant:e.fontVariant,fontWeight:function(e){switch(e){case"normal":return 400;case"bold":return 700}var t=parseInt(e,10);return isNaN(t)?400:t}(e.fontWeight)}},ie=function(e){if("normal"===e)return 0;var t=parseFloat(e);return isNaN(t)?0:t},re=function(e){switch(e){case"strict":return"strict";case"normal":default:return"normal"}},oe=function(e){switch(e){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}},se=function(e){var t=X(e.getPropertyValue("list-style-image"));return{listStyleType:oe(e.getPropertyValue("list-style-type")),listStyleImage:t.length?t[0]:null,listStylePosition:ae(e.getPropertyValue("list-style-position"))}},ae=function(e){switch(e){case"inside":return 0;case"outside":default:return 1}},le=["top","right","bottom","left"],ue=function(e){return le.map((function(t){return new _(e.getPropertyValue("margin-".concat(t)))}))},ce=function(e){switch(e){case"hidden":return 1;case"scroll":return 2;case"auto":return 3;case"visible":default:return 0}},he=function(e){switch(e){case"break-word":return 1;case"normal":default:return 0}},de=/^([+-]|\d|\.)$/i,Ae=function(e){if("none"===e||"string"!=typeof e)return null;for(var t="",n=!1,i=[],r=[],o=0,s=null,a=function(){t.length&&(n?i.push(parseFloat(t)):s=new u(t)),n=!1,t=""},l=function(){i.length&&null!==s&&r.push({color:s,offsetX:i[0]||0,offsetY:i[1]||0,blur:i[2]||0}),i.splice(0,i.length),s=null},c=0;c<e.length;c++){var h=e[c];switch(h){case"(":t+=h,o++;break;case")":t+=h,o--;break;case",":0===o?(a(),l()):t+=h;break;case" ":0===o?a():t+=h;break;default:0===t.length&&de.test(h)&&(n=!0),t+=h}}return a(),l(),0===r.length?null:r},pe=function(e){switch(e){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0},fe=function(e){return parseFloat(e.trim())},ge=/(matrix|matrix3d)\((.+)\)/,me=function(e){var t=ve(e.transform||e.webkitTransform||e.mozTransform||e.msTransform||e.oTransform);return null===t?null:{transform:t,transformOrigin:ye(e.transformOrigin||e.webkitTransformOrigin||e.mozTransformOrigin||e.msTransformOrigin||e.oTransformOrigin)}},ye=function(e){if("string"!=typeof e){var t=new _("0");return[t,t]}var n=e.split(" ").map(_.create);return[n[0],n[1]]},ve=function(e){if("none"===e||"string"!=typeof e)return null;var t=e.match(ge);if(t){if("matrix"===t[1]){var n=t[2].split(",").map(fe);return[n[0],n[1],n[2],n[3],n[4],n[5]]}var i=t[2].split(",").map(fe);return[i[0],i[1],i[4],i[5],i[12],i[13]]}return null},we=function(e){switch(e){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}},_e=function(e){switch(e){case"break-all":return"break-all";case"keep-all":return"keep-all";case"normal":default:return"normal"}},be=function(e){var t="auto"===e;return{auto:t,order:t?0:parseInt(e,10)}},Ce=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.element=t}return function(e,t,n){t&&function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}(e.prototype,t)}(e,[{key:"render",value:function(e){var t=this;this.options=e,this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),this.canvas.width=Math.floor(e.width)*e.scale,this.canvas.height=Math.floor(e.height)*e.scale,this.canvas.style.width="".concat(e.width,"px"),this.canvas.style.height="".concat(e.height,"px"),this.ctx.scale(e.scale,e.scale),e.logger.log("ForeignObject renderer initialized (".concat(e.width,"x").concat(e.height," at ").concat(e.x,",").concat(e.y,") with scale ").concat(e.scale));var n=Ee(Math.max(e.windowWidth,e.width)*e.scale,Math.max(e.windowHeight,e.height)*e.scale,e.scrollX*e.scale,e.scrollY*e.scale,this.element);return Se(n).then((function(n){return e.backgroundColor&&(t.ctx.fillStyle=e.backgroundColor.toString(),t.ctx.fillRect(0,0,e.width*e.scale,e.height*e.scale)),t.ctx.drawImage(n,-e.x*e.scale,-e.y*e.scale),t.canvas}))}}]),e}(),Ee=function(e,t,n,i,r){var o="http://www.w3.org/2000/svg",s=document.createElementNS(o,"svg"),a=document.createElementNS(o,"foreignObject");return s.setAttributeNS(null,"width",e),s.setAttributeNS(null,"height",t),a.setAttributeNS(null,"width","100%"),a.setAttributeNS(null,"height","100%"),a.setAttributeNS(null,"x",n),a.setAttributeNS(null,"y",i),a.setAttributeNS(null,"externalResourcesRequired","true"),s.appendChild(a),a.appendChild(r),s},Se=function(e){return new Promise((function(t,n){var i=new Image;i.onload=function(){return t(i)},i.onerror=n,i.src="data:image/svg+xml;charset=utf-8,".concat(encodeURIComponent((new XMLSerializer).serializeToString(e)))}))},Le=function(e){return 0===e[0]&&255===e[1]&&0===e[2]&&255===e[3]},Te={get SUPPORT_RANGE_BOUNDS(){var e=function(e){if(e.createRange){var t=e.createRange();if(t.getBoundingClientRect){var n=e.createElement("boundtest");n.style.height="".concat(123,"px"),n.style.display="block",e.body.appendChild(n),t.selectNode(n);var i=t.getBoundingClientRect(),r=Math.round(i.height);if(e.body.removeChild(n),123===r)return!0}}return!1}(document);return Object.defineProperty(Te,"SUPPORT_RANGE_BOUNDS",{value:e}),e},get SUPPORT_SVG_DRAWING(){var e=function(e){var t=new Image,n=e.createElement("canvas"),i=n.getContext("2d");t.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{i.drawImage(t,0,0),n.toDataURL()}catch(e){return!1}return!0}(document);return Object.defineProperty(Te,"SUPPORT_SVG_DRAWING",{value:e}),e},get SUPPORT_FOREIGNOBJECT_DRAWING(){var e="function"==typeof Array.from&&"function"==typeof window.fetch?function(e){var t=e.createElement("canvas");t.width=100,t.height=100;var n=t.getContext("2d");n.fillStyle="rgb(0, 255, 0)",n.fillRect(0,0,100,100);var i=new Image,r=t.toDataURL();i.src=r;var o=Ee(100,100,0,0,i);return n.fillStyle="red",n.fillRect(0,0,100,100),Se(o).then((function(t){n.drawImage(t,0,0);var i=n.getImageData(0,0,100,100).data;n.fillStyle="red",n.fillRect(0,0,100,100);var o=e.createElement("div");return o.style.backgroundImage="url(".concat(r,")"),o.style.height="".concat(100,"px"),Le(i)?Se(Ee(100,100,0,0,o)):Promise.reject(!1)})).then((function(e){return n.drawImage(e,0,0),Le(n.getImageData(0,0,100,100).data)})).catch((function(e){return!1}))}(document):Promise.resolve(!1);return Object.defineProperty(Te,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:e}),e},get SUPPORT_CORS_IMAGES(){var e=void 0!==(new Image).crossOrigin;return Object.defineProperty(Te,"SUPPORT_CORS_IMAGES",{value:e}),e},get SUPPORT_RESPONSE_TYPE(){var e="string"==typeof(new XMLHttpRequest).responseType;return Object.defineProperty(Te,"SUPPORT_RESPONSE_TYPE",{value:e}),e},get SUPPORT_CORS_XHR(){var e="withCredentials"in new XMLHttpRequest;return Object.defineProperty(Te,"SUPPORT_CORS_XHR",{value:e}),e}},Be=Te,Ne=n(0),Ie=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.text=t,this.bounds=n},Oe=function(e,t,n){var i=e.ownerDocument.createElement("html2canvaswrapper");i.appendChild(e.cloneNode(!0));var r=e.parentNode;if(r){r.replaceChild(i,e);var o=B(i,t,n);return i.firstChild&&r.replaceChild(i.firstChild,i),o}return new T(0,0,0,0)},Fe=function(e,t,n,i,r){var o=e.ownerDocument.createRange();return o.setStart(e,t),o.setEnd(e,t+n),T.fromClientRect(o.getBoundingClientRect(),i,r)},xe=function(){function e(t,n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.text=t,this.parent=n,this.bounds=i}return function(e,t,n){n&&function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}(e,n)}(e,0,[{key:"fromTextNode",value:function(t,n){var i=Re(t.data,n.style.textTransform);return new e(i,n,function(e,t,n){for(var i=0!==t.style.letterSpacing?Object(Ne.toCodePoints)(e).map((function(e){return Object(Ne.fromCodePoint)(e)})):function(e,t){for(var n,i=Object(Ne.LineBreaker)(e,{lineBreak:t.style.lineBreak,wordBreak:1===t.style.overflowWrap?"break-word":t.style.wordBreak}),r=[];!(n=i.next()).done;)r.push(n.value.slice());return r}(e,t),r=i.length,o=n.parentNode?n.parentNode.ownerDocument.defaultView:null,s=o?o.pageXOffset:0,a=o?o.pageYOffset:0,l=[],u=0,c=0;c<r;c++){var h=i[c];if(null!==t.style.textDecoration||h.trim().length>0)if(Be.SUPPORT_RANGE_BOUNDS)l.push(new Ie(h,Fe(n,u,h.length,s,a)));else{var d=n.splitText(h.length);l.push(new Ie(h,Oe(n,s,a))),n=d}else Be.SUPPORT_RANGE_BOUNDS||(n=n.splitText(h.length));u+=h.length}return l}(i,n,t))}}]),e}(),De=/(^|\s|:|-|\(|\))([a-z])/g,Re=function(e,t){switch(t){case 1:return e.toLowerCase();case 3:return e.replace(De,Ue);case 2:return e.toUpperCase();default:return e}};function Ue(e,t,n){return e.length>0?t+n.toUpperCase():e}var Me=function e(t,n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.type=2,this.x=t,this.y=n,this.radius=i},He=new u([42,42,42]),Pe=new u([165,165,165]),Qe=new u([222,222,222]),ke={borderWidth:1,borderColor:Pe,borderStyle:1},ze=[ke,ke,ke,ke],Ve={backgroundColor:Qe,backgroundImage:[],backgroundClip:M.PADDING_BOX,backgroundOrigin:H.PADDING_BOX},je=new _("50%"),Ge=[je,je],qe=[Ge,Ge,Ge,Ge],We=new _("3px"),Ke=[We,We],Xe=[Ke,Ke,Ke,Ke],Ye=function(e){return"radio"===e.type?qe:Xe},Je=function(e,t){if("radio"===e.type||"checkbox"===e.type){if(e.checked){var n=Math.min(t.bounds.width,t.bounds.height);t.childNodes.push("checkbox"===e.type?[new E(t.bounds.left+.39363*n,t.bounds.top+.79*n),new E(t.bounds.left+.16*n,t.bounds.top+.5549*n),new E(t.bounds.left+.27347*n,t.bounds.top+.44071*n),new E(t.bounds.left+.39694*n,t.bounds.top+.5649*n),new E(t.bounds.left+.72983*n,t.bounds.top+.23*n),new E(t.bounds.left+.84*n,t.bounds.top+.34085*n),new E(t.bounds.left+.39363*n,t.bounds.top+.79*n)]:new Me(t.bounds.left+n/4,t.bounds.top+n/4,n/4))}}else et(tt(e),e,t,!1)},Ze=function(e,t){et(e.value,e,t,!0)},$e=function(e,t){var n=e.options[e.selectedIndex||0];et(n&&n.text||"",e,t,!1)},et=function(e,t,n,i){var r=t.ownerDocument.body;if(e.length>0&&r){var o=t.ownerDocument.createElement("html2canvaswrapper");v(t.ownerDocument.defaultView.getComputedStyle(t,null),o),o.style.position="absolute",o.style.left="".concat(n.bounds.left,"px"),o.style.top="".concat(n.bounds.top,"px"),i||(o.style.whiteSpace="nowrap");var s=t.ownerDocument.createTextNode(e);o.appendChild(s),r.appendChild(o),n.childNodes.push(xe.fromTextNode(s,n)),r.removeChild(o)}},tt=function(e){var t="password"===e.type?new Array(e.value.length+1).join("\u2022"):e.value;return 0===t.length?e.placeholder||"":t},nt=["OL","UL","MENU"],it=function(e,t,n){var i=t.style.listStyle;if(i){var r,o=e.ownerDocument.defaultView.getComputedStyle(e,null),s=e.ownerDocument.createElement("html2canvaswrapper");switch(v(o,s),s.style.position="absolute",s.style.bottom="auto",s.style.display="block",s.style.letterSpacing="normal",i.listStylePosition){case 1:s.style.left="auto",s.style.right="".concat(e.ownerDocument.defaultView.innerWidth-t.bounds.left-t.style.margin[1].getAbsoluteValue(t.bounds.width)+7,"px"),s.style.textAlign="right";break;case 0:s.style.left="".concat(t.bounds.left-t.style.margin[3].getAbsoluteValue(t.bounds.width),"px"),s.style.right="auto",s.style.textAlign="left"}var a=t.style.margin[0].getAbsoluteValue(t.bounds.width),l=i.listStyleImage;if(l)if("url"===l.method){var u=e.ownerDocument.createElement("img");u.src=l.args[0],s.style.top="".concat(t.bounds.top-a,"px"),s.style.width="auto",s.style.height="auto",s.appendChild(u)}else{var c=.5*parseFloat(t.style.font.fontSize);s.style.top="".concat(t.bounds.top-a+t.bounds.height-1.5*c,"px"),s.style.width="".concat(c,"px"),s.style.height="".concat(c,"px"),s.style.backgroundImage=o.listStyleImage}else"number"==typeof t.listIndex&&(r=e.ownerDocument.createTextNode(At(t.listIndex,i.listStyleType,!0)),s.appendChild(r),s.style.top="".concat(t.bounds.top-a,"px"));var h=e.ownerDocument.body;h.appendChild(s),r?(t.childNodes.push(xe.fromTextNode(r,t)),h.removeChild(s)):t.childNodes.push(new ft(s,t,n,0))}},rt={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},ot={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["\u0554","\u0553","\u0552","\u0551","\u0550","\u054f","\u054e","\u054d","\u054c","\u054b","\u054a","\u0549","\u0548","\u0547","\u0546","\u0545","\u0544","\u0543","\u0542","\u0541","\u0540","\u053f","\u053e","\u053d","\u053c","\u053b","\u053a","\u0539","\u0538","\u0537","\u0536","\u0535","\u0534","\u0533","\u0532","\u0531"]},st={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["\u05d9\u05f3","\ufffd?\u05f3","\u05d7\u05f3","\u05d6\u05f3","\u05d5\u05f3","\u05d4\u05f3","\u05d3\u05f3","\u05d2\u05f3","\u05d1\u05f3","\u05d0\u05f3","\u05ea","\u05e9","\u05e8","\u05e7","\u05e6","\u05e4","\u05e2","\u05e1","\u05e0","\u05de","\u05dc","\u05db","\u05d9\ufffd?","\u05d9\u05d7","\u05d9\u05d6","\ufffd?\u05d6","\ufffd?\u05d5","\u05d9","\ufffd?","\u05d7","\u05d6","\u05d5","\u05d4","\u05d3","\u05d2","\u05d1","\u05d0"]},at={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["\u10f5","\u10f0","\u10ef","\u10f4","\u10ee","\u10ed","\u10ec","\u10eb","\u10ea","\u10e9","\u10e8","\u10e7","\u10e6","\u10e5","\u10e4","\u10f3","\u10e2","\u10e1","\u10e0","\u10df","\u10de","\u10dd","\u10f2","\u10dc","\u10db","\u10da","\u10d9","\ufffd?","\u10d7","\u10f1","\u10d6","\u10d5","\u10d4","\u10d3","\u10d2","\u10d1","\u10d0"]},lt=function(e,t,n,i,r,o){return e<t||e>n?At(e,r,o.length>0):i.integers.reduce((function(t,n,r){for(;e>=n;)e-=n,t+=i.values[r];return t}),"")+o},ut=function(e,t,n,i){var r="";do{n||e--,r=i(e)+r,e/=t}while(e*t>=t);return r},ct=function(e,t,n,i,r){var o=n-t+1;return(e<0?"-":"")+(ut(Math.abs(e),o,i,(function(e){return Object(Ne.fromCodePoint)(Math.floor(e%o)+t)}))+r)},ht=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:". ",i=t.length;return ut(Math.abs(e),i,!1,(function(e){return t[Math.floor(e%i)]}))+n},dt=function(e,t,n,i,r,o){if(e<-9999||e>9999)return At(e,4,r.length>0);var s=Math.abs(e),a=r;if(0===s)return t[0]+a;for(var l=0;s>0&&l<=4;l++){var u=s%10;0===u&&m(o,1)&&""!==a?a=t[u]+a:u>1||1===u&&0===l||1===u&&1===l&&m(o,2)||1===u&&1===l&&m(o,4)&&e>100||1===u&&l>1&&m(o,8)?a=t[u]+(l>0?n[l-1]:"")+a:1===u&&l>0&&(a=n[l-1]+a),s=Math.floor(s/10)}return(e<0?i:"")+a},At=function(e,t,n){var i=n?". ":"",r=n?"\u3001":"",o=n?", ":"";switch(t){case 0:return"\u2022";case 1:return"\u25e6";case 2:return"\u25fe";case 5:var s=ct(e,48,57,!0,i);return s.length<4?"0".concat(s):s;case 4:return ht(e,"\u3007\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d",r);case 6:return lt(e,1,3999,rt,3,i).toLowerCase();case 7:return lt(e,1,3999,rt,3,i);case 8:return ct(e,945,969,!1,i);case 9:return ct(e,97,122,!1,i);case 10:return ct(e,65,90,!1,i);case 11:return ct(e,1632,1641,!0,i);case 12:case 49:return lt(e,1,9999,ot,3,i);case 35:return lt(e,1,9999,ot,3,i).toLowerCase();case 13:return ct(e,2534,2543,!0,i);case 14:case 30:return ct(e,6112,6121,!0,i);case 15:return ht(e,"\u5b50\u4e11\u5bc5\u536f\u8fb0\u5df3\u5348\u672a\u7533\u9149\u620c\u4ea5",r);case 16:return ht(e,"\u7532\u4e59\u4e19\u4e01\u620a\u5df1\u5e9a\u8f9b\u58ec\u7678",r);case 17:case 48:return dt(e,"\u96f6\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d","\u5341\u767e\u5343\u842c","\u8ca0",r,14);case 47:return dt(e,"\u96f6\u58f9\u8cb3\u53c3\u8086\u4f0d\u9678\u67d2\u634c\u7396","\u62fe\u4f70\u4edf\u842c","\u8ca0",r,15);case 42:return dt(e,"\u96f6\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d","\u5341\u767e\u5343\u842c","\u8d1f",r,14);case 41:return dt(e,"\u96f6\u58f9\u8d30\u53c1\u8086\u4f0d\u9646\u67d2\u634c\u7396","\u62fe\u4f70\u4edf\u842c","\u8d1f",r,15);case 26:return dt(e,"\u3007\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d","\u5341\u767e\u5343\u4e07","\u30de\u30a4\u30ca\u30b9",r,0);case 25:return dt(e,"\u96f6\u58f1\u5f10\u53c2\u56db\u4f0d\u516d\u4e03\u516b\u4e5d","\u62fe\u767e\u5343\u4e07","\u30de\u30a4\u30ca\u30b9",r,7);case 31:return dt(e,"\ufffd?\ufffd\uc77c\uc774\uc0bc\uc0ac\ufffd?\ufffd\uc721\uce60\ud314\uad6c","\uc2ed\ubc31\ucc9c\ub9cc","\ub9c8\uc774\ub108\uc2a4",o,7);case 33:return dt(e,"\u96f6\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d","\u5341\u767e\u5343\u842c","\ub9c8\uc774\ub108\uc2a4",o,0);case 32:return dt(e,"\u96f6\u58f9\u8cb3\u53c3\u56db\u4e94\u516d\u4e03\u516b\u4e5d","\u62fe\u767e\u5343","\ub9c8\uc774\ub108\uc2a4",o,7);case 18:return ct(e,2406,2415,!0,i);case 20:return lt(e,1,19999,at,3,i);case 21:return ct(e,2790,2799,!0,i);case 22:return ct(e,2662,2671,!0,i);case 22:return lt(e,1,10999,st,3,i);case 23:return ht(e,"\u3042\u3044\u3046\u3048\u304a\u304b\u304d\u304f\u3051\u3053\u3055\u3057\u3059\u305b\u305d\u305f\u3061\u3064\u3066\u3068\u306a\u306b\u306c\u306d\u306e\u306f\u3072\u3075\u3078\u307b\u307e\u307f\u3080\u3081\u3082\u3084\u3086\u3088\u3089\u308a\u308b\u308c\u308d\u308f\u3090\u3091\u3092\u3093");case 24:return ht(e,"\u3044\u308d\u306f\u306b\u307b\u3078\u3068\u3061\u308a\u306c\u308b\u3092\u308f\u304b\u3088\u305f\u308c\u305d\u3064\u306d\u306a\u3089\u3080\u3046\u3090\u306e\u304a\u304f\u3084\u307e\u3051\u3075\u3053\u3048\u3066\u3042\u3055\u304d\u3086\u3081\u307f\u3057\u3091\u3072\u3082\u305b\u3059");case 27:return ct(e,3302,3311,!0,i);case 28:return ht(e,"\u30a2\u30a4\u30a6\u30a8\u30aa\u30ab\u30ad\u30af\u30b1\u30b3\u30b5\u30b7\u30b9\u30bb\u30bd\u30bf\u30c1\u30c4\u30c6\u30c8\u30ca\u30cb\u30cc\u30cd\u30ce\u30cf\u30d2\u30d5\ufffd?\u30db\u30de\u30df\u30e0\u30e1\u30e2\u30e4\u30e6\u30e8\u30e9\u30ea\u30eb\u30ec\u30ed\u30ef\u30f0\u30f1\u30f2\u30f3",r);case 29:return ht(e,"\u30a4\u30ed\u30cf\u30cb\u30db\ufffd?\u30c8\u30c1\u30ea\u30cc\u30eb\u30f2\u30ef\u30ab\u30e8\u30bf\u30ec\u30bd\u30c4\u30cd\u30ca\u30e9\u30e0\u30a6\u30f0\u30ce\u30aa\u30af\u30e4\u30de\u30b1\u30d5\u30b3\u30a8\u30c6\u30a2\u30b5\u30ad\u30e6\u30e1\u30df\u30b7\u30f1\u30d2\u30e2\u30bb\u30b9",r);case 34:return ct(e,3792,3801,!0,i);case 37:return ct(e,6160,6169,!0,i);case 38:return ct(e,4160,4169,!0,i);case 39:return ct(e,2918,2927,!0,i);case 40:return ct(e,1776,1785,!0,i);case 43:return ct(e,3046,3055,!0,i);case 44:return ct(e,3174,3183,!0,i);case 45:return ct(e,3664,3673,!0,i);case 46:return ct(e,3872,3881,!0,i);case 3:default:return ct(e,48,57,!0,i)}},pt=["INPUT","TEXTAREA","SELECT"],ft=function(){function e(t,n,i,r){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.parent=n,this.tagName=t.tagName,this.index=r,this.childNodes=[],this.listItems=[],"number"==typeof t.start&&(this.listStart=t.start);var s=t.ownerDocument.defaultView,a=s.pageXOffset,l=s.pageYOffset,c=s.getComputedStyle(t,null),h=function(e){return e.split(" ").reduce(ee,0)}(c.display),d="radio"===t.type||"checkbox"===t.type,p=function(e){switch(e){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}(c.position);if(this.style={background:d?Ve:V(c,i),border:d?ze:J(c),borderRadius:(t instanceof s.HTMLInputElement||t instanceof HTMLInputElement)&&d?Ye(t):$(c),color:d?He:new u(c.color),display:h,float:te(c.float),font:ne(c),letterSpacing:ie(c.letterSpacing),listStyle:2048===h?se(c):null,lineBreak:re(c.lineBreak),margin:ue(c),opacity:parseFloat(c.opacity),overflow:-1===pt.indexOf(t.tagName)?ce(c.overflow):1,overflowWrap:he(c.overflowWrap?c.overflowWrap:c.wordWrap),padding:U(c),position:p,textDecoration:A(c),textShadow:Ae(c.textShadow),textTransform:pe(c.textTransform),transform:me(c),visibility:we(c.visibility),wordBreak:_e(c.wordBreak),zIndex:be(0!==p?c.zIndex:"auto")},this.isTransformed()&&(t.style.transform="matrix(1,0,0,1,0,0)"),2048===h){var f=function(e){var t=e.parent;if(!t)return null;do{if(-1!==nt.indexOf(t.tagName))return t;t=t.parent}while(t);return e.parent}(this);if(f){var g=f.listItems.length;f.listItems.push(this),this.listIndex=t.hasAttribute("value")&&"number"==typeof t.value?t.value:0===g?"number"==typeof f.listStart?f.listStart:1:f.listItems[g-1].listIndex+1}}"IMG"===t.tagName&&t.addEventListener("load",(function(){o.bounds=B(t,a,l),o.curvedBounds=F(o.bounds,o.style.border,o.style.borderRadius)})),this.image=gt(t,i),this.bounds=d?function(e){return e.width>e.height?(e.left+=(e.width-e.height)/2,e.width=e.height):e.width<e.height&&(e.top+=(e.height-e.width)/2,e.height=e.width),e}(B(t,a,l)):B(t,a,l),this.curvedBounds=F(this.bounds,this.style.border,this.style.borderRadius)}return function(e,t,n){t&&function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}(e.prototype,t)}(e,[{key:"getClipPaths",value:function(){var e=this.parent?this.parent.getClipPaths():[];return 0!==this.style.overflow?e.concat([O(this.curvedBounds)]):e}},{key:"isInFlow",value:function(){return this.isRootElement()&&!this.isFloating()&&!this.isAbsolutelyPositioned()}},{key:"isVisible",value:function(){return!m(this.style.display,1)&&this.style.opacity>0&&0===this.style.visibility}},{key:"isAbsolutelyPositioned",value:function(){return 0!==this.style.position&&1!==this.style.position}},{key:"isPositioned",value:function(){return 0!==this.style.position}},{key:"isFloating",value:function(){return 0!==this.style.float}},{key:"isRootElement",value:function(){return null===this.parent}},{key:"isTransformed",value:function(){return null!==this.style.transform}},{key:"isPositionedWithZIndex",value:function(){return this.isPositioned()&&!this.style.zIndex.auto}},{key:"isInlineLevel",value:function(){return m(this.style.display,4)||m(this.style.display,1<<25)||m(this.style.display,1<<28)||m(this.style.display,1<<29)||m(this.style.display,1<<26)||m(this.style.display,1<<27)}},{key:"isInlineBlockOrInlineTable",value:function(){return m(this.style.display,1<<25)||m(this.style.display,1<<27)}}]),e}(),gt=function(e,t){if(e instanceof e.ownerDocument.defaultView.SVGSVGElement||e instanceof SVGSVGElement){var n=new XMLSerializer;return t.loadImage("data:image/svg+xml,".concat(encodeURIComponent(n.serializeToString(e))))}switch(e.tagName){case"IMG":return t.loadImage(e.currentSrc||e.src);case"CANVAS":return t.loadCanvas(e);case"IFRAME":var i=e.getAttribute("data-html2canvas-internal-iframe-key");if(i)return i}return null},mt=function(){function e(t,n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.container=t,this.parent=n,this.contexts=[],this.children=[],this.treatAsRealStackingContext=i}return function(e,t,n){t&&function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}(e.prototype,t)}(e,[{key:"getOpacity",value:function(){return this.parent?this.container.style.opacity*this.parent.getOpacity():this.container.style.opacity}},{key:"getRealParentStackingContext",value:function(){return!this.parent||this.treatAsRealStackingContext?this:this.parent.getRealParentStackingContext()}}]),e}(),yt=["SCRIPT","HEAD","TITLE","OBJECT","BR","OPTION"],vt=function(e,t){return e.isRootElement()||e.isPositionedWithZIndex()||e.style.opacity<1||e.isTransformed()||_t(e,t)},wt=function(e){return e.isPositioned()||e.isFloating()},_t=function(e,t){return"BODY"===t.nodeName&&e.parent instanceof ft&&e.parent.style.background.backgroundColor.isTransparent()},bt=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._data={},this._document=t}return function(e,t,n){t&&function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}(e.prototype,t)}(e,[{key:"_parseMetrics",value:function(e){var t=this._document.createElement("div"),n=this._document.createElement("img"),i=this._document.createElement("span"),r=this._document.body;if(!r)throw new Error("");t.style.visibility="hidden",t.style.fontFamily=e.fontFamily,t.style.fontSize=e.fontSize,t.style.margin="0",t.style.padding="0",r.appendChild(t),n.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",n.width=1,n.height=1,n.style.margin="0",n.style.padding="0",n.style.verticalAlign="baseline",i.style.fontFamily=e.fontFamily,i.style.fontSize=e.fontSize,i.style.margin="0",i.style.padding="0",i.appendChild(this._document.createTextNode("Hidden Text")),t.appendChild(i),t.appendChild(n);var o=n.offsetTop-i.offsetTop+2;t.removeChild(i),t.appendChild(this._document.createTextNode("Hidden Text")),t.style.lineHeight="normal",n.style.verticalAlign="super";var s=n.offsetTop-t.offsetTop+2;return r.removeChild(t),{baseline:o,middle:s}}},{key:"getMetrics",value:function(e){var t="".concat(e.fontFamily," ").concat(e.fontSize);return void 0===this._data[t]&&(this._data[t]=this._parseMetrics(e)),this._data[t]}}]),e}(),Ct=/([+-]?\d*\.?\d+)(deg|grad|rad|turn)/i;function Et(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var St=/^(to )?(left|top|right|bottom)( (left|top|right|bottom))?$/i,Lt=/^([+-]?\d*\.?\d+)% ([+-]?\d*\.?\d+)%$/i,Tt=/(px)|%|( 0)$/i,Bt=/^(from|to|color-stop)\((?:([\d.]+)(%)?,\s*)?(.+?)\)$/i,Nt=/^\s*(circle|ellipse)?\s*((?:([\d.]+)(px|r?em|%)\s*(?:([\d.]+)(px|r?em|%))?)|closest-side|closest-corner|farthest-side|farthest-corner)?\s*(?:at\s*(?:(left|center|right)|([\d.]+)(px|r?em|%))\s+(?:(top|center|bottom)|([\d.]+)(px|r?em|%)))?(?:\s|$)/i,It={left:new _("0%"),top:new _("0%"),center:new _("50%"),right:new _("100%"),bottom:new _("100%")},Ot=function(e,t,n){for(var i=[],r=t;r<e.length;r++){var o=e[r],s=Tt.test(o),a=o.lastIndexOf(" "),l=new u(s?o.substring(0,a):o),c=s?new _(o.substring(a+1)):r===t?new _("0%"):r===e.length-1?new _("100%"):null;i.push({color:l,stop:c})}for(var h=i.map((function(e){var t=e.stop;return{color:e.color,stop:0===n?0:t?t.getAbsoluteValue(n)/n:null}})),d=h[0].stop,A=0;A<h.length;A++)if(null!==d){var p=h[A].stop;if(null===p){for(var f=A;null===h[f].stop;)f++;for(var g=(h[f].stop-d)/(f-A+1);A<f;A++)d=h[A].stop=d+g}else d=p}return h},Ft=function(e,t,n){var i=function(e){var t=e.match(Ct);if(t){var n=parseFloat(t[1]);switch(t[2].toLowerCase()){case"deg":return Math.PI*n/180;case"grad":return Math.PI/200*n;case"rad":return n;case"turn":return 2*Math.PI*n}}return null}(e[0]),r=St.test(e[0]),o=r||null!==i||Lt.test(e[0]),s=o?null!==i?Dt(n?i-.5*Math.PI:i,t):r?Ut(e[0],t):Mt(e[0],t):Dt(Math.PI,t),a=o?1:0,l=Math.min(y(Math.abs(s.x0)+Math.abs(s.x1),Math.abs(s.y0)+Math.abs(s.y1)),2*t.width,2*t.height);return new function e(t,n){Et(this,e),this.type=0,this.colorStops=t,this.direction=n}(Ot(e,a,l),s)},xt=function(e,t,n){var i=t[0].match(Nt),r=i&&("circle"===i[1]||void 0!==i[3]&&void 0===i[5])?0:1,o={},s={};i&&(void 0!==i[3]&&(o.x=b(e,i[3],i[4]).getAbsoluteValue(n.width)),void 0!==i[5]&&(o.y=b(e,i[5],i[6]).getAbsoluteValue(n.height)),i[7]?s.x=It[i[7].toLowerCase()]:void 0!==i[8]&&(s.x=b(e,i[8],i[9])),i[10]?s.y=It[i[10].toLowerCase()]:void 0!==i[11]&&(s.y=b(e,i[11],i[12])));var a={x:void 0===s.x?n.width/2:s.x.getAbsoluteValue(n.width),y:void 0===s.y?n.height/2:s.y.getAbsoluteValue(n.height)},l=Pt(i&&i[2]||"farthest-corner",r,a,o,n);return new function e(t,n,i,r){Et(this,e),this.type=1,this.colorStops=t,this.shape=n,this.center=i,this.radius=r}(Ot(t,i?1:0,Math.min(l.x,l.y)),r,a,l)},Dt=function(e,t){var n=t.width,i=t.height,r=.5*n,o=.5*i,s=(Math.abs(n*Math.sin(e))+Math.abs(i*Math.cos(e)))/2,a=r+Math.sin(e)*s,l=o-Math.cos(e)*s;return{x0:a,x1:n-a,y0:l,y1:i-l}},Rt=function(e){return Math.acos(e.width/2/(y(e.width,e.height)/2))},Ut=function(e,t){switch(e){case"bottom":case"to top":return Dt(0,t);case"left":case"to right":return Dt(Math.PI/2,t);case"right":case"to left":return Dt(3*Math.PI/2,t);case"top right":case"right top":case"to bottom left":case"to left bottom":return Dt(Math.PI+Rt(t),t);case"top left":case"left top":case"to bottom right":case"to right bottom":return Dt(Math.PI-Rt(t),t);case"bottom left":case"left bottom":case"to top right":case"to right top":return Dt(Rt(t),t);case"bottom right":case"right bottom":case"to top left":case"to left top":return Dt(2*Math.PI-Rt(t),t);case"top":case"to bottom":default:return Dt(Math.PI,t)}},Mt=function(e,t){var n=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],i=!0,r=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),2!==n.length);i=!0);}catch(e){r=!0,o=e}finally{try{i||null==a.return||a.return()}finally{if(r)throw o}}return n}(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}(e.split(" ").map(parseFloat)),i=n[0]/100*t.width/(n[1]/100*t.height);return Dt(Math.atan(isNaN(i)?1:i)+Math.PI/2,t)},Ht=function(e,t,n,i){return[{x:0,y:0},{x:0,y:e.height},{x:e.width,y:0},{x:e.width,y:e.height}].reduce((function(e,r){var o=y(t-r.x,n-r.y);return(i?o<e.optimumDistance:o>e.optimumDistance)?{optimumCorner:r,optimumDistance:o}:e}),{optimumDistance:i?1/0:-1/0,optimumCorner:null}).optimumCorner},Pt=function(e,t,n,i,r){var o=n.x,s=n.y,a=0,l=0;switch(e){case"closest-side":0===t?a=l=Math.min(Math.abs(o),Math.abs(o-r.width),Math.abs(s),Math.abs(s-r.height)):1===t&&(a=Math.min(Math.abs(o),Math.abs(o-r.width)),l=Math.min(Math.abs(s),Math.abs(s-r.height)));break;case"closest-corner":if(0===t)a=l=Math.min(y(o,s),y(o,s-r.height),y(o-r.width,s),y(o-r.width,s-r.height));else if(1===t){var u=Math.min(Math.abs(s),Math.abs(s-r.height))/Math.min(Math.abs(o),Math.abs(o-r.width)),c=Ht(r,o,s,!0);l=u*(a=y(c.x-o,(c.y-s)/u))}break;case"farthest-side":0===t?a=l=Math.max(Math.abs(o),Math.abs(o-r.width),Math.abs(s),Math.abs(s-r.height)):1===t&&(a=Math.max(Math.abs(o),Math.abs(o-r.width)),l=Math.max(Math.abs(s),Math.abs(s-r.height)));break;case"farthest-corner":if(0===t)a=l=Math.max(y(o,s),y(o,s-r.height),y(o-r.width,s),y(o-r.width,s-r.height));else if(1===t){var h=Math.max(Math.abs(s),Math.abs(s-r.height))/Math.max(Math.abs(o),Math.abs(o-r.width)),d=Ht(r,o,s,!1);l=h*(a=y(d.x-o,(d.y-s)/h))}break;default:a=i.x||0,l=void 0!==i.y?i.y:a}return{x:a,y:l}},Qt=function(e){var t="",n="",i="",r="",o=0,s=/^(left|center|right|\d+(?:px|r?em|%)?)(?:\s+(top|center|bottom|\d+(?:px|r?em|%)?))?$/i,a=/^\d+(px|r?em|%)?(?:\s+\d+(px|r?em|%)?)?$/i,l=e[o].match(s);l&&o++;var u=e[o].match(/^(circle|ellipse)?\s*(closest-side|closest-corner|farthest-side|farthest-corner|contain|cover)?$/i);u&&(t=u[1]||"","contain"===(i=u[2]||"")?i="closest-side":"cover"===i&&(i="farthest-corner"),o++);var c=e[o].match(a);c&&o++;var h=e[o].match(s);h&&o++;var d=e[o].match(a);d&&o++;var A=h||l;A&&A[1]&&(r=A[1]+(/^\d+$/.test(A[1])?"px":""),A[2]&&(r+=" "+A[2]+(/^\d+$/.test(A[2])?"px":"")));var p=d||c;return p&&(n=p[0],p[1]||(n+="px")),!r||t||n||i||(n=r,r=""),r&&(r="at ".concat(r)),[[t,i,n,r].filter((function(e){return!!e})).join(" ")].concat(e.slice(o))},kt=function(e){return e.map((function(e){return e.match(Bt)})).map((function(t,n){if(!t)return e[n];switch(t[1]){case"from":return"".concat(t[4]," 0%");case"to":return"".concat(t[4]," 100%");case"color-stop":return"%"===t[3]?"".concat(t[4]," ").concat(t[2]):"".concat(t[4]," ").concat(100*parseFloat(t[2]),"%")}}))};function zt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],i=!0,r=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);i=!0);}catch(e){r=!0,o=e}finally{try{i||null==a.return||a.return()}finally{if(r)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var Vt=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.target=t,this.options=n,t.render(n)}return function(e,t,n){t&&function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}(e.prototype,t)}(e,[{key:"renderNode",value:function(e){e.isVisible()&&(this.renderNodeBackgroundAndBorders(e),this.renderNodeContent(e))}},{key:"renderNodeContent",value:function(e){var t=this,n=function(){if(e.childNodes.length&&e.childNodes.forEach((function(n){if(n instanceof xe){var i=n.parent.style;t.target.renderTextNode(n.bounds,i.color,i.font,i.textDecoration,i.textShadow)}else t.target.drawShape(n,e.style.color)})),e.image){var n=t.options.imageStore.get(e.image);if(n){var i=function(e,t,n){var i=t[0].value,r=t[3].value;return new T(e.left+r+n[3].borderWidth,e.top+i+n[0].borderWidth,e.width-(n[1].borderWidth+n[3].borderWidth+r+t[1].value),e.height-(n[0].borderWidth+n[2].borderWidth+i+t[2].value))}(e.bounds,e.style.padding,e.style.border),r="number"==typeof n.width&&n.width>0?n.width:i.width,o="number"==typeof n.height&&n.height>0?n.height:i.height;r>0&&o>0&&t.target.clip([O(e.curvedBounds)],(function(){t.target.drawImage(n,new T(0,0,r,o),i)}))}}},i=e.getClipPaths();i.length?this.target.clip(i,n):n()}},{key:"renderNodeBackgroundAndBorders",value:function(e){var t=this,n=!e.style.background.backgroundColor.isTransparent()||e.style.background.backgroundImage.length,i=e.style.border.some((function(e){return 0!==e.borderStyle&&!e.borderColor.isTransparent()})),r=function(){var i=function(e,t){switch(t){case M.BORDER_BOX:return function(e){return[e.topLeftOuter,e.topRightOuter,e.bottomRightOuter,e.bottomLeftOuter]}(e);case M.PADDING_BOX:default:return O(e)}}(e.curvedBounds,e.style.background.backgroundClip);n&&t.target.clip([i],(function(){e.style.background.backgroundColor.isTransparent()||t.target.fill(e.style.background.backgroundColor),t.renderBackgroundImage(e)})),e.style.border.forEach((function(n,i){0===n.borderStyle||n.borderColor.isTransparent()||t.renderBorder(n,i,e.curvedBounds)}))};if(n||i){var o=e.parent?e.parent.getClipPaths():[];o.length?this.target.clip(o,r):r()}}},{key:"renderBackgroundImage",value:function(e){var t=this;e.style.background.backgroundImage.slice(0).reverse().forEach((function(n){"url"===n.source.method&&n.source.args.length?t.renderBackgroundRepeat(e,n):/gradient/i.test(n.source.method)&&t.renderBackgroundGradient(e,n)}))}},{key:"renderBackgroundRepeat",value:function(e,t){var n=this.options.imageStore.get(t.source.args[0]);if(n){var i=k(e.style.background.backgroundOrigin,e.bounds,e.style.padding,e.style.border),r=function(e,t,n){var i=0,r=0,o=e.size;if(1===o[0].size||2===o[0].size){var s=t.width/t.height;return n.width/n.height<s!=(2===o[0].size)?new C(n.width,n.width/s):new C(n.height*s,n.height)}return o[0].value&&(i=o[0].value.getAbsoluteValue(n.width)),0===o[0].size&&0===o[1].size?r=t.height:0===o[1].size?r=i/t.width*t.height:o[1].value&&(r=o[1].value.getAbsoluteValue(n.height)),0===o[0].size&&(i=r/t.height*t.width),new C(i,r)}(t,n,i),o=z(t.position,r,i),s=function(e,t,n,i,r){switch(e.repeat){case 2:return[new E(Math.round(r.left),Math.round(i.top+t.y)),new E(Math.round(r.left+r.width),Math.round(i.top+t.y)),new E(Math.round(r.left+r.width),Math.round(n.height+i.top+t.y)),new E(Math.round(r.left),Math.round(n.height+i.top+t.y))];case 3:return[new E(Math.round(i.left+t.x),Math.round(r.top)),new E(Math.round(i.left+t.x+n.width),Math.round(r.top)),new E(Math.round(i.left+t.x+n.width),Math.round(r.height+r.top)),new E(Math.round(i.left+t.x),Math.round(r.height+r.top))];case 1:return[new E(Math.round(i.left+t.x),Math.round(i.top+t.y)),new E(Math.round(i.left+t.x+n.width),Math.round(i.top+t.y)),new E(Math.round(i.left+t.x+n.width),Math.round(i.top+t.y+n.height)),new E(Math.round(i.left+t.x),Math.round(i.top+t.y+n.height))];default:return[new E(Math.round(r.left),Math.round(r.top)),new E(Math.round(r.left+r.width),Math.round(r.top)),new E(Math.round(r.left+r.width),Math.round(r.height+r.top)),new E(Math.round(r.left),Math.round(r.height+r.top))]}}(t,o,r,i,e.bounds),a=Math.round(i.left+o.x),l=Math.round(i.top+o.y);this.target.renderRepeat(s,n,r,a,l)}}},{key:"renderBackgroundGradient",value:function(e,t){var n=k(e.style.background.backgroundOrigin,e.bounds,e.style.padding,e.style.border),i=function(e,t){var n=e.size,i=n[0].value?n[0].value.getAbsoluteValue(t.width):t.width,r=n[1].value?n[1].value.getAbsoluteValue(t.height):n[0].value?i:t.height;return new C(i,r)}(t,n),r=z(t.position,i,n),o=new T(Math.round(n.left+r.x),Math.round(n.top+r.y),i.width,i.height),s=function(e,t,n){var i=t.args,r=t.method,o=t.prefix;return"linear-gradient"===r?Ft(i,n,!!o):"gradient"===r&&"linear"===i[0]?Ft(["to bottom"].concat(kt(i.slice(3))),n,!!o):"radial-gradient"===r?xt(e,"-webkit-"===o?Qt(i):i,n):"gradient"===r&&"radial"===i[0]?xt(e,kt(Qt(i.slice(1))),n):void 0}(e,t.source,o);if(s)switch(s.type){case 0:this.target.renderLinearGradient(o,s);break;case 1:this.target.renderRadialGradient(o,s)}}},{key:"renderBorder",value:function(e,t,n){this.target.drawShape(function(e,t){switch(t){case 0:return I(e.topLeftOuter,e.topLeftInner,e.topRightOuter,e.topRightInner);case 1:return I(e.topRightOuter,e.topRightInner,e.bottomRightOuter,e.bottomRightInner);case 2:return I(e.bottomRightOuter,e.bottomRightInner,e.bottomLeftOuter,e.bottomLeftInner);case 3:default:return I(e.bottomLeftOuter,e.bottomLeftInner,e.topLeftOuter,e.topLeftInner)}}(n,t),e.borderColor)}},{key:"renderStack",value:function(e){var t=this;if(e.container.isVisible()){var n=e.getOpacity();n!==this._opacity&&(this.target.setOpacity(e.getOpacity()),this._opacity=n);var i=e.container.style.transform;null!==i?this.target.transform(e.container.bounds.left+i.transformOrigin[0].value,e.container.bounds.top+i.transformOrigin[1].value,i.transform,(function(){return t.renderStackContent(e)})):this.renderStackContent(e)}}},{key:"renderStackContent",value:function(e){var t=zt(Gt(e),5),n=t[0],i=t[1],r=t[2],o=t[3],s=t[4],a=zt(jt(e),2),l=a[0],u=a[1];this.renderNodeBackgroundAndBorders(e.container),n.sort(qt).forEach(this.renderStack,this),this.renderNodeContent(e.container),u.forEach(this.renderNode,this),o.forEach(this.renderStack,this),s.forEach(this.renderStack,this),l.forEach(this.renderNode,this),i.forEach(this.renderStack,this),r.sort(qt).forEach(this.renderStack,this)}},{key:"render",value:function(e){return this.options.backgroundColor&&this.target.rectangle(this.options.x,this.options.y,this.options.width,this.options.height,this.options.backgroundColor),this.renderStack(e),this.target.getTarget()}}]),e}(),jt=function(e){for(var t=[],n=[],i=e.children.length,r=0;r<i;r++){var o=e.children[r];o.isInlineLevel()?t.push(o):n.push(o)}return[t,n]},Gt=function(e){for(var t=[],n=[],i=[],r=[],o=[],s=e.contexts.length,a=0;a<s;a++){var l=e.contexts[a];l.container.isPositioned()||l.container.style.opacity<1||l.container.isTransformed()?l.container.style.zIndex.order<0?t.push(l):l.container.style.zIndex.order>0?i.push(l):n.push(l):l.container.isFloating()?r.push(l):o.push(l)}return[t,n,i,r,o]},qt=function(e,t){return e.container.style.zIndex.order>t.container.style.zIndex.order?1:e.container.style.zIndex.order<t.container.style.zIndex.order?-1:e.container.index>t.container.index?1:-1},Wt=function(e,t){if(!t.proxy)return Promise.reject(null);var n=t.proxy;return new Promise((function(i,r){var o=Be.SUPPORT_CORS_XHR&&Be.SUPPORT_RESPONSE_TYPE?"blob":"text",s=Be.SUPPORT_CORS_XHR?new XMLHttpRequest:new XDomainRequest;s.onload=function(){if(s instanceof XMLHttpRequest)if(200===s.status)if("text"===o)i(s.response);else{var e=new FileReader;e.addEventListener("load",(function(){return i(e.result)}),!1),e.addEventListener("error",(function(e){return r(e)}),!1),e.readAsDataURL(s.response)}else r("");else i(s.responseText)},s.onerror=r,s.open("GET","".concat(n,"?url=").concat(encodeURIComponent(e),"&responseType=").concat(o)),"text"!==o&&s instanceof XMLHttpRequest&&(s.responseType=o),t.imageTimeout&&(s.timeout=t.imageTimeout,s.ontimeout=function(){return r("")}),s.send()}))};function Kt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Xt(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Yt(e,t,n){return t&&Xt(e.prototype,t),n&&Xt(e,n),e}var Jt=function(){function e(t,n,i){Kt(this,e),this.options=t,this._window=i,this.origin=this.getOrigin(i.location.href),this.cache={},this.logger=n,this._index=0}return Yt(e,[{key:"loadImage",value:function(e){var t=this;if(this.hasResourceInCache(e))return e;if(on(e))return this.cache[e]=an(e,this.options.imageTimeout||0),e;if(!sn(e)||Be.SUPPORT_SVG_DRAWING){if(!0===this.options.allowTaint||nn(e)||this.isSameOrigin(e))return this.addImage(e,e,!1);if(!this.isSameOrigin(e)){if("string"==typeof this.options.proxy)return this.cache[e]=Wt(e,this.options).then((function(e){return an(e,t.options.imageTimeout||0)})),e;if(!0===this.options.useCORS&&Be.SUPPORT_CORS_IMAGES)return this.addImage(e,e,!0)}}}},{key:"inlineImage",value:function(e){var t=this;return nn(e)?an(e,this.options.imageTimeout||0):this.hasResourceInCache(e)?this.cache[e]:this.isSameOrigin(e)||"string"!=typeof this.options.proxy?this.xhrImage(e):this.cache[e]=Wt(e,this.options).then((function(e){return an(e,t.options.imageTimeout||0)}))}},{key:"xhrImage",value:function(e){var t=this;return this.cache[e]=new Promise((function(n,i){var r=new XMLHttpRequest;r.onreadystatechange=function(){if(4===r.readyState)if(200!==r.status)i("Failed to fetch image ".concat(e.substring(0,256)," with status code ").concat(r.status));else{var t=new FileReader;t.addEventListener("load",(function(){n(t.result)}),!1),t.addEventListener("error",(function(e){return i(e)}),!1),t.readAsDataURL(r.response)}},r.responseType="blob",t.options.imageTimeout&&(r.timeout=t.options.imageTimeout,r.ontimeout=function(){return i("")}),r.open("GET",e,!0),r.send()})).then((function(e){return an(e,t.options.imageTimeout||0)})),this.cache[e]}},{key:"loadCanvas",value:function(e){var t=String(this._index++);return this.cache[t]=Promise.resolve(e),t}},{key:"hasResourceInCache",value:function(e){return void 0!==this.cache[e]}},{key:"addImage",value:function(e,t,n){var i=this;return this.cache[e]=new Promise((function(e,r){var o=new Image;o.onload=function(){return e(o)},(rn(t)||n)&&(o.crossOrigin="anonymous"),o.onerror=r,o.src=t,!0===o.complete&&setTimeout((function(){e(o)}),500),i.options.imageTimeout&&setTimeout((function(){return r("")}),i.options.imageTimeout)})),e}},{key:"isSameOrigin",value:function(e){return this.getOrigin(e)===this.origin}},{key:"getOrigin",value:function(e){var t=this._link||(this._link=this._window.document.createElement("a"));return t.href=e,t.href=t.href,t.protocol+t.hostname+t.port}},{key:"ready",value:function(){var e=this,t=Object.keys(this.cache),n=t.map((function(t){return e.cache[t].catch((function(e){return null}))}));return Promise.all(n).then((function(e){return new Zt(t,e)}))}}]),e}(),Zt=function(){function e(t,n){Kt(this,e),this._keys=t,this._resources=n}return Yt(e,[{key:"get",value:function(e){var t=this._keys.indexOf(e);return-1===t?null:this._resources[t]}}]),e}(),$t=/^data:image\/svg\+xml/i,en=/^data:image\/.*;base64,/i,tn=/^data:image\/.*/i,nn=function(e){return tn.test(e)},rn=function(e){return en.test(e)},on=function(e){return"blob"===e.substr(0,4)},sn=function(e){return"svg"===e.substr(-3).toLowerCase()||$t.test(e)},an=function(e,t){return new Promise((function(n,i){var r=new Image;r.onload=function(){return n(r)},r.onerror=i,r.src=e,!0===r.complete&&setTimeout((function(){n(r)}),500),t&&setTimeout((function(){return i("")}),t)}))};function ln(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],i=!0,r=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);i=!0);}catch(e){r=!0,o=e}finally{try{i||null==a.return||a.return()}finally{if(r)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var un=function(e,t,n){if(!t||!t.content||"none"===t.content||"-moz-alt-content"===t.content||"none"===t.display)return null;var i=cn(t.content),r=i.length,o=[],s="",a=t.counterIncrement;if(a&&"none"!==a){var l=ln(a.split(/\s+/),2),u=l[1],c=n.counters[l[0]];c&&(c[c.length-1]+=void 0===u?1:parseInt(u,10))}for(var h=0;h<r;h++){var d=i[h];switch(d.type){case 0:s+=d.value||"";break;case 1:e instanceof HTMLElement&&d.value&&(s+=e.getAttribute(d.value)||"");break;case 3:var A=n.counters[d.name||""];A&&(s+=An([A[A.length-1]],"",d.format));break;case 4:var p=n.counters[d.name||""];p&&(s+=An(p,d.glue,d.format));break;case 5:s+=dn(t,!0,n.quoteDepth),n.quoteDepth++;break;case 6:n.quoteDepth--,s+=dn(t,!1,n.quoteDepth);break;case 2:s&&(o.push({type:0,value:s}),s=""),o.push({type:1,value:d.value||""})}}return s&&o.push({type:0,value:s}),o},cn=function(e,t){if(t&&t[e])return t[e];for(var n=[],i=e.length,r=!1,o=!1,s=!1,a="",l="",u=[],c=0;c<i;c++){var h=e.charAt(c);switch(h){case"'":case'"':o?a+=h:(r=!r,s||r||(n.push({type:0,value:a}),a=""));break;case"\\":o?(a+=h,o=!1):o=!0;break;case"(":r?a+=h:(s=!0,l=a,a="",u=[]);break;case")":if(r)a+=h;else if(s){switch(a&&u.push(a),l){case"attr":u.length>0&&n.push({type:1,value:u[0]});break;case"counter":if(u.length>0){var d={type:3,name:u[0]};u.length>1&&(d.format=u[1]),n.push(d)}break;case"counters":if(u.length>0){var A={type:4,name:u[0]};u.length>1&&(A.glue=u[1]),u.length>2&&(A.format=u[2]),n.push(A)}break;case"url":u.length>0&&n.push({type:2,value:u[0]})}s=!1,a=""}break;case",":r?a+=h:s&&(u.push(a),a="");break;case" ":case"\t":r?a+=h:a&&(hn(n,a),a="");break;default:a+=h}"\\"!==h&&(o=!1)}return a&&hn(n,a),t&&(t[e]=n),n},hn=function(e,t){switch(t){case"open-quote":e.push({type:5});break;case"close-quote":e.push({type:6})}},dn=function(e,t,n){var i=e.quotes?e.quotes.split(/\s+/):["'\"'","'\"'"],r=2*n;return r>=i.length&&(r=i.length-2),t||++r,i[r].replace(/^["']|["']$/g,"")},An=function(e,t,n){for(var i=e.length,r="",o=0;o<i;o++)o>0&&(r+=t||""),r+=At(e[o],oe(n||"decimal"),!1);return r},pn=function(){function e(t,n,i,r,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.referenceElement=t,this.scrolledElements=[],this.copyStyles=r,this.inlineImages=r,this.logger=i,this.options=n,this.renderer=o,this.resourceLoader=new Jt(n,i,window),this.pseudoContentData={counters:{},quoteDepth:0},this.documentElement=this.cloneNode(t.ownerDocument.documentElement)}return function(e,t,n){t&&function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}(e.prototype,t)}(e,[{key:"inlineAllImages",value:function(e){var t=this;if(this.inlineImages&&e){var n=e.style;Promise.all(X(n.backgroundImage).map((function(e){return"url"===e.method?t.resourceLoader.inlineImage(e.args[0]).then((function(e){return e&&"string"==typeof e.src?'url("'.concat(e.src,'")'):"none"})).catch((function(e){})):Promise.resolve("".concat(e.prefix).concat(e.method,"(").concat(e.args.join(","),")"))}))).then((function(e){e.length>1&&(n.backgroundColor=""),n.backgroundImage=e.join(",")})),e instanceof HTMLImageElement&&this.resourceLoader.inlineImage(e.src).then((function(t){if(t&&e instanceof HTMLImageElement&&e.parentNode){var n=e.parentNode,i=v(e.style,t.cloneNode(!1));n.replaceChild(i,e)}})).catch((function(e){}))}}},{key:"inlineFonts",value:function(e){var t=this;return Promise.all(Array.from(e.styleSheets).map((function(t){return t.href?fetch(t.href).then((function(e){return e.text()})).then((function(e){return gn(e,t.href)})).catch((function(e){return[]})):fn(t,e)}))).then((function(e){return e.reduce((function(e,t){return e.concat(t)}),[])})).then((function(e){return Promise.all(e.map((function(e){return fetch(e.formats[0].src).then((function(e){return e.blob()})).then((function(e){return new Promise((function(t,n){var i=new FileReader;i.onerror=n,i.onload=function(){t(i.result)},i.readAsDataURL(e)}))})).then((function(t){return e.fontFace.setProperty("src",'url("'.concat(t,'")')),"@font-face {".concat(e.fontFace.cssText," ")}))})))})).then((function(n){var i=e.createElement("style");i.textContent=n.join("\n"),t.documentElement.appendChild(i)}))}},{key:"createElementClone",value:function(e){var t=this;if(this.copyStyles&&e instanceof HTMLCanvasElement){var n=e.ownerDocument.createElement("img");try{return n.src=e.toDataURL(),n}catch(e){}}if(e instanceof HTMLIFrameElement){var i=e.cloneNode(!1),r=Ln();i.setAttribute("data-html2canvas-internal-iframe-key",r);var o=B(e,0,0),s=o.width,a=o.height;return this.resourceLoader.cache[r]=Bn(e,this.options).then((function(e){return t.renderer(e,{allowTaint:t.options.allowTaint,backgroundColor:"#ffffff",canvas:null,imageTimeout:t.options.imageTimeout,logging:t.options.logging,proxy:t.options.proxy,removeContainer:t.options.removeContainer,scale:t.options.scale,foreignObjectRendering:t.options.foreignObjectRendering,useCORS:t.options.useCORS,target:new f,width:s,height:a,x:0,y:0,windowWidth:e.ownerDocument.defaultView.innerWidth,windowHeight:e.ownerDocument.defaultView.innerHeight,scrollX:e.ownerDocument.defaultView.pageXOffset,scrollY:e.ownerDocument.defaultView.pageYOffset},t.logger.child(r))})).then((function(t){return new Promise((function(n,r){var o=document.createElement("img");o.onload=function(){return n(t)},o.onerror=function(e){"data:,"==o.src?n(t):r(e)},o.src=t.toDataURL(),i.parentNode&&i.parentNode.replaceChild(v(e.ownerDocument.defaultView.getComputedStyle(e),o),i)}))})),i}try{if(e instanceof HTMLStyleElement&&e.sheet&&e.sheet.cssRules){var l=[].slice.call(e.sheet.cssRules,0).reduce((function(e,t){return t&&t.cssText?e+t.cssText:e}),""),u=e.cloneNode(!1);return u.textContent=l,u}}catch(e){if(this.logger.log("Unable to access cssRules property"),"SecurityError"!==e.name)throw this.logger.log(e),e}return e.cloneNode(!1)}},{key:"cloneNode",value:function(e){var t=e.nodeType===Node.TEXT_NODE?document.createTextNode(e.nodeValue):this.createElementClone(e),n=e.ownerDocument.defaultView,i=e instanceof n.HTMLElement?n.getComputedStyle(e):null,r=e instanceof n.HTMLElement?n.getComputedStyle(e,":before"):null,o=e instanceof n.HTMLElement?n.getComputedStyle(e,":after"):null;this.referenceElement===e&&t instanceof n.HTMLElement&&(this.clonedReferenceElement=t),t instanceof n.HTMLBodyElement&&Cn(t);for(var s=function(e,t){if(!e||!e.counterReset||"none"===e.counterReset)return[];for(var n=[],i=e.counterReset.split(/\s*,\s*/),r=i.length,o=0;o<r;o++){var s=ln(i[o].split(/\s+/),2),a=s[0],l=s[1];n.push(a);var u=t.counters[a];u||(u=t.counters[a]=[]),u.push(parseInt(l||0,10))}return n}(i,this.pseudoContentData),a=un(e,r,this.pseudoContentData),l=e.firstChild;l;l=l.nextSibling)l.nodeType===Node.ELEMENT_NODE&&("SCRIPT"===l.nodeName||l.hasAttribute("data-html2canvas-ignore")||"function"==typeof this.options.ignoreElements&&this.options.ignoreElements(l))||this.copyStyles&&"STYLE"===l.nodeName||t.appendChild(this.cloneNode(l));var u=un(e,o,this.pseudoContentData);if(function(e,t){for(var n=e.length,i=0;i<n;i++)t.counters[e[i]].pop()}(s,this.pseudoContentData),e instanceof n.HTMLElement&&t instanceof n.HTMLElement)switch(r&&this.inlineAllImages(yn(e,t,r,a,vn)),o&&this.inlineAllImages(yn(e,t,o,u,wn)),!i||!this.copyStyles||e instanceof HTMLIFrameElement||v(i,t),this.inlineAllImages(t),0===e.scrollTop&&0===e.scrollLeft||this.scrolledElements.push([t,e.scrollLeft,e.scrollTop]),e.nodeName){case"CANVAS":this.copyStyles||mn(e,t);break;case"TEXTAREA":case"SELECT":t.value=e.value}return t}}]),e}(),fn=function(e,t){return(e.cssRules?Array.from(e.cssRules):[]).filter((function(e){return e.type===CSSRule.FONT_FACE_RULE})).map((function(e){for(var n=X(e.style.getPropertyValue("src")),i=[],r=0;r<n.length;r++)if("url"===n[r].method&&n[r+1]&&"format"===n[r+1].method){var o=t.createElement("a");o.href=n[r].args[0],t.body&&t.body.appendChild(o),i.push({src:o.href,format:n[r+1].args[0]})}return{formats:i.filter((function(e){return/^woff/i.test(e.format)})),fontFace:e.style}})).filter((function(e){return e.formats.length}))},gn=function(e,t){var n=document.implementation.createHTMLDocument(""),i=document.createElement("base");i.href=t;var r=document.createElement("style");return r.textContent=e,n.head&&n.head.appendChild(i),n.body&&n.body.appendChild(r),r.sheet?fn(r.sheet,n):[]},mn=function(e,t){try{if(t){t.width=e.width,t.height=e.height;var n=e.getContext("2d"),i=t.getContext("2d");n?i.putImageData(n.getImageData(0,0,e.width,e.height),0,0):i.drawImage(e,0,0)}}catch(e){}},yn=function(e,t,n,i,r){if(n&&n.content&&"none"!==n.content&&"-moz-alt-content"!==n.content&&"none"!==n.display){var o=t.ownerDocument.createElement("html2canvaspseudoelement");if(v(n,o),i)for(var s=i.length,a=0;a<s;a++){var l=i[a];switch(l.type){case 1:var u=t.ownerDocument.createElement("img");u.src=X("url(".concat(l.value,")"))[0].args[0],u.style.opacity="1",o.appendChild(u);break;case 0:o.appendChild(t.ownerDocument.createTextNode(l.value))}}return o.className="".concat(_n," ").concat(bn),t.className+=" ".concat(r===vn?_n:bn),r===vn?t.insertBefore(o,t.firstChild):t.appendChild(o),o}},vn=":before",wn=":after",_n="___html2canvas___pseudoelement_before",bn="___html2canvas___pseudoelement_after",Cn=function(e){En(e,".".concat(_n).concat(vn).concat('{\n    content: "" !important;\n    display: none !important;\n}',"\n         .").concat(bn).concat(wn).concat('{\n    content: "" !important;\n    display: none !important;\n}'))},En=function(e,t){var n=e.ownerDocument.createElement("style");n.innerHTML=t,e.appendChild(n)},Sn=function(e){var t=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],i=!0,r=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),3!==n.length);i=!0);}catch(e){r=!0,o=e}finally{try{i||null==a.return||a.return()}finally{if(r)throw o}}return n}(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}(e),n=t[0],i=t[2];n.scrollLeft=t[1],n.scrollTop=i},Ln=function(){return Math.ceil(Date.now()+1e7*Math.random()).toString(16)},Tn=/^data:text\/(.+);(base64)?,(.*)$/i,Bn=function(e,t){try{return Promise.resolve(e.contentWindow.document.documentElement)}catch(n){return t.proxy?Wt(e.src,t).then((function(e){var t=e.match(Tn);return t?"base64"===t[2]?window.atob(decodeURIComponent(t[3])):decodeURIComponent(t[3]):Promise.reject()})).then((function(t){return Nn(e.ownerDocument,B(e,0,0)).then((function(e){var n=e.contentWindow.document;n.open(),n.write(t);var i=In(e).then((function(){return n.documentElement}));return n.close(),i}))})):Promise.reject()}},Nn=function(e,t){var n=e.createElement("iframe");return n.className="html2canvas-container",n.style.visibility="hidden",n.style.position="fixed",n.style.left="-10000px",n.style.top="0px",n.style.border="0",n.width=t.width.toString(),n.height=t.height.toString(),n.scrolling="no",n.setAttribute("data-html2canvas-ignore","true"),e.body?(e.body.appendChild(n),Promise.resolve(n)):Promise.reject("")},In=function(e){var t=e.contentWindow,n=t.document;return new Promise((function(i,r){t.onload=e.onload=n.onreadystatechange=function(){var t=setInterval((function(){n.body.childNodes.length>0&&"complete"===n.readyState&&(clearInterval(t),i(e))}),50)}}))};function On(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Fn=function(e,t){var n=t||{},i=new g("boolean"!=typeof n.logging||n.logging);i.log("html2canvas ".concat("1.0.0-rc.1"));var r=e.ownerDocument;if(!r)return Promise.reject("Provided element is not within a Document");var o=r.defaultView;return function e(t,n,i){var r=t.ownerDocument,o=new T(n.scrollX,n.scrollY,n.windowWidth,n.windowHeight),s=r.documentElement?new u(getComputedStyle(r.documentElement).backgroundColor):h,a=r.body?new u(getComputedStyle(r.body).backgroundColor):h,l=t===r.documentElement?s.isTransparent()?a.isTransparent()?n.backgroundColor?new u(n.backgroundColor):null:a:s:n.backgroundColor?new u(n.backgroundColor):null;return(n.foreignObjectRendering?Be.SUPPORT_FOREIGNOBJECT_DRAWING:Promise.resolve(!1)).then((function(s){return s?function(e){return e.inlineFonts(r).then((function(){return e.resourceLoader.ready()})).then((function(){var o=new Ce(e.documentElement),s=r.defaultView,a=s.pageXOffset,u=s.pageYOffset,c="HTML"===t.tagName||"BODY"===t.tagName?N(r):B(t,a,u),h=c.height;return o.render({backgroundColor:l,logger:i,scale:n.scale,x:"number"==typeof n.x?n.x:c.left,y:"number"==typeof n.y?n.y:c.top,width:"number"==typeof n.width?n.width:Math.ceil(c.width),height:"number"==typeof n.height?n.height:Math.ceil(h),windowWidth:n.windowWidth,windowHeight:n.windowHeight,scrollX:n.scrollX,scrollY:n.scrollY})}))}(new pn(t,n,i,!0,e)):function(e,t,n,i,r,o){var s=new pn(n,i,r,!1,o),a=e.defaultView.pageXOffset,l=e.defaultView.pageYOffset;return Nn(e,t).then((function(r){var o=r.contentWindow,u=o.document,c=In(r).then((function(){s.scrolledElements.forEach(Sn),o.scrollTo(t.left,t.top),!/(iPad|iPhone|iPod)/g.test(navigator.userAgent)||o.scrollY===t.top&&o.scrollX===t.left||(u.documentElement.style.top=-t.top+"px",u.documentElement.style.left=-t.left+"px",u.documentElement.style.position="absolute");var n=Promise.resolve([r,s.clonedReferenceElement,s.resourceLoader]),a=i.onclone;return s.clonedReferenceElement instanceof o.HTMLElement||s.clonedReferenceElement instanceof e.defaultView.HTMLElement||s.clonedReferenceElement instanceof HTMLElement?"function"==typeof a?Promise.resolve().then((function(){return a(u)})).then((function(){return n})):n:Promise.reject("")}));return u.open(),u.write("".concat(function(e){var t="";return e&&(t+="<!DOCTYPE ",e.name&&(t+=e.name),e.internalSubset&&(t+=e.internalSubset),e.publicId&&(t+='"'.concat(e.publicId,'"')),e.systemId&&(t+='"'.concat(e.systemId,'"')),t+=">"),t}(document.doctype),"<html></html>")),function(e,t,n){!e.defaultView||t===e.defaultView.pageXOffset&&n===e.defaultView.pageYOffset||e.defaultView.scrollTo(t,n)}(n.ownerDocument,a,l),u.replaceChild(u.adoptNode(s.documentElement),u.documentElement),u.close(),c}))}(r,o,t,n,i,e).then((function(e){var t=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],i=!0,r=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),3!==n.length);i=!0);}catch(e){r=!0,o=e}finally{try{i||null==a.return||a.return()}finally{if(r)throw o}}return n}(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}(e),o=t[0],s=t[1],a=t[2],u=function(e,t,n){var i=0,r=new ft(e,null,t,i++),o=new mt(r,null,!0);return function e(t,n,i,r,o){for(var s,a=t.firstChild;a;a=s){s=a.nextSibling;var l=a.ownerDocument.defaultView;if(a instanceof l.Text||a instanceof Text||l.parent&&a instanceof l.parent.Text)a.data.trim().length>0&&n.childNodes.push(xe.fromTextNode(a,n));else if(a instanceof l.HTMLElement||a instanceof HTMLElement||l.parent&&a instanceof l.parent.HTMLElement){if(-1===yt.indexOf(a.nodeName)){var u=new ft(a,n,r,o++);if(u.isVisible()){"INPUT"===a.tagName?Je(a,u):"TEXTAREA"===a.tagName?Ze(a,u):"SELECT"===a.tagName?$e(a,u):u.style.listStyle&&-1!==u.style.listStyle.listStyleType&&it(a,u,r);var c="TEXTAREA"!==a.tagName,h=vt(u,a);if(h||wt(u)){var d=h||u.isPositioned()?i.getRealParentStackingContext():i,A=new mt(u,d,h);d.contexts.push(A),c&&e(a,u,A,r,o)}else i.children.push(u),c&&e(a,u,i,r,o)}}}else if(a instanceof l.SVGSVGElement||a instanceof SVGSVGElement||l.parent&&a instanceof l.parent.SVGSVGElement){var p=new ft(a,n,r,o++),f=vt(p,a);if(f||wt(p)){var g=f||p.isPositioned()?i.getRealParentStackingContext():i,m=new mt(p,g,f);g.contexts.push(m)}else i.children.push(p)}}}(e,r,o,t,1),o}(s,a),c=s.ownerDocument;return l===u.container.style.background.backgroundColor&&(u.container.style.background.backgroundColor=h),a.ready().then((function(e){var t=new bt(c),a=c.defaultView,h=a.pageXOffset,d=a.pageYOffset,A="HTML"===s.tagName||"BODY"===s.tagName?N(r):B(s,h,d),p=A.height,f={backgroundColor:l,fontMetrics:t,imageStore:e,logger:i,scale:n.scale,x:"number"==typeof n.x?n.x:A.left,y:"number"==typeof n.y?n.y:A.top,width:"number"==typeof n.width?n.width:Math.ceil(A.width),height:"number"==typeof n.height?n.height:Math.ceil(p)};if(Array.isArray(n.target))return Promise.all(n.target.map((function(e){return new Vt(e,f).render(u)})));var g=new Vt(n.target,f).render(u);return!0===n.removeContainer&&o.parentNode&&o.parentNode.removeChild(o),g}))}))}))}(e,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),i.forEach((function(t){On(e,t,n[t])}))}return e}({},{allowTaint:!1,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,scale:o.devicePixelRatio||1,target:new f(n.canvas),useCORS:!1,windowWidth:o.innerWidth,windowHeight:o.innerHeight,scrollX:o.pageXOffset,scrollY:o.pageYOffset},n),i)};Fn.CanvasRenderer=f,t.default=Fn}]).default},window.html2canvas=l(),e.exports=l();var c,h="undefined",d=null,A=function(e,t){this.files={},this.root="",e&&this.load(e,t)};A.signature={LOCAL_FILE_HEADER:"PK\x03\x04",CENTRAL_FILE_HEADER:"PK\x01\x02",CENTRAL_DIRECTORY_END:"PK\x05\x06",ZIP64_CENTRAL_DIRECTORY_LOCATOR:"PK\x06\x07",ZIP64_CENTRAL_DIRECTORY_END:"PK\x06\x06",DATA_DESCRIPTOR:"PK\x07\b"},A.defaults={base64:!1,binary:!1,dir:!1,date:d,compression:d},A.support={arraybuffer:typeof ArrayBuffer!==h&&typeof Uint8Array!==h,nodebuffer:typeof Buffer!==h,uint8array:typeof Uint8Array!==h,blob:function(){if(typeof ArrayBuffer===h)return!1;var e=new ArrayBuffer(0);try{return 0===new Blob([e],{type:"application/zip"}).size}catch(n){}try{var t=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder);return t.append(e),0===t.getBlob("application/zip").size}catch(n){}return!1}()},A.prototype=function(){var e,t;A.support.uint8array&&"function"==typeof TextEncoder&&"function"==typeof TextDecoder&&(e=new TextEncoder("utf-8"),t=new TextDecoder("utf-8"));var n=function(e){if(e._data instanceof A.CompressedObject&&(e._data=e._data.getContent(),e.options.binary=!0,e.options.base64=!1,"uint8array"===A.utils.getTypeOf(e._data))){var t=e._data;e._data=new Uint8Array(t.length),0!==t.length&&e._data.set(t,0)}return e._data},i=function(t){var i=n(t);if("string"===A.utils.getTypeOf(i)){if(!t.options.binary){if(e)return e.encode(i);if(A.support.nodebuffer)return new Buffer(i,"utf-8")}return t.asBinary()}return i},r=function(e){var t=n(this);return null==t?"":(this.options.base64&&(t=A.base64.decode(t)),t=e&&this.options.binary?A.prototype.utf8decode(t):A.utils.transformTo("string",t),e||this.options.binary||(t=A.prototype.utf8encode(t)),t)},o=function(e,t,n){this.name=e,this._data=t,this.options=n};o.prototype={asText:function(){return r.call(this,!0)},asBinary:function(){return r.call(this,!1)},asNodeBuffer:function(){var e=i(this);return A.utils.transformTo("nodebuffer",e)},asUint8Array:function(){var e=i(this);return A.utils.transformTo("uint8array",e)},asArrayBuffer:function(){return this.asUint8Array().buffer}};var s=function(e,t){var n,i="";for(n=0;n<t;n++)i+=String.fromCharCode(255&e),e>>>=8;return i},a=function(){var e,t,n={};for(e=0;e<arguments.length;e++)for(t in arguments[e])arguments[e].hasOwnProperty(t)&&void 0===n[t]&&(n[t]=arguments[e][t]);return n},l=function(e,t,n){var i=u(e),r=A.utils.getTypeOf(t);if(i&&c.call(this,i),(n=function(e){return!0===(e=e||{}).base64&&null==e.binary&&(e.binary=!0),(e=a(e,A.defaults)).date=e.date||new Date,null!==e.compression&&(e.compression=e.compression.toUpperCase()),e}(n)).dir||null==t)n.base64=!1,n.binary=!1,t=null;else if("string"===r)n.binary&&!n.base64&&!0!==n.optimizedBinaryString&&(t=A.utils.string2binary(t));else{if(n.base64=!1,n.binary=!0,!(r||t instanceof A.CompressedObject))throw new Error("The data of '"+e+"' is in an unsupported format !");"arraybuffer"===r&&(t=A.utils.transformTo("uint8array",t))}return this.files[e]=new o(e,t,n)},u=function(e){"/"==e.slice(-1)&&(e=e.substring(0,e.length-1));var t=e.lastIndexOf("/");return t>0?e.substring(0,t):""},c=function(e){return"/"!=e.slice(-1)&&(e+="/"),this.files[e]||l.call(this,e,null,{dir:!0}),this.files[e]},h=function(e,t){var n,r=new A.CompressedObject;return e._data instanceof A.CompressedObject?(r.uncompressedSize=e._data.uncompressedSize,r.crc32=e._data.crc32,0===r.uncompressedSize||e.options.dir?(t=A.compressions.STORE,r.compressedContent="",r.crc32=0):e._data.compressionMethod===t.magic?r.compressedContent=e._data.getCompressedContent():(n=e._data.getContent(),r.compressedContent=t.compress(A.utils.transformTo(t.compressInputType,n)))):((n=i(e))&&0!==n.length&&!e.options.dir||(t=A.compressions.STORE,n=""),r.uncompressedSize=n.length,r.crc32=this.crc32(n),r.compressedContent=t.compress(A.utils.transformTo(t.compressInputType,n))),r.compressedSize=r.compressedContent.length,r.compressionMethod=t.magic,r},d=function(e,t,n,i){var r,o,a=this.utf8encode(t.name),l=a!==t.name,u=t.options;r=u.date.getHours(),r<<=6,r|=u.date.getMinutes(),r<<=5,r|=u.date.getSeconds()/2,o=u.date.getFullYear()-1980,o<<=4,o|=u.date.getMonth()+1,o<<=5,o|=u.date.getDate();var c="";return c+="\n\0",c+=l?"\0\b":"\0\0",c+=n.compressionMethod,c+=s(r,2),c+=s(o,2),c+=s(n.crc32,4),c+=s(n.compressedSize,4),c+=s(n.uncompressedSize,4),c+=s(a.length,2),{fileRecord:A.signature.LOCAL_FILE_HEADER+(c+="\0\0")+a,dirRecord:A.signature.CENTRAL_FILE_HEADER+"\x14\0"+c+"\0\0\0\0\0\0"+(!0===t.options.dir?"\x10\0\0\0":"\0\0\0\0")+s(i,4)+a,compressedObject:n}},p=function(){this.data=[]};p.prototype={append:function(e){e=A.utils.transformTo("string",e),this.data.push(e)},finalize:function(){return this.data.join("")}};var f=function(e){this.data=new Uint8Array(e),this.index=0};return f.prototype={append:function(e){0!==e.length&&(e=A.utils.transformTo("uint8array",e),this.data.set(e,this.index),this.index+=e.length)},finalize:function(){return this.data}},{load:function(e,t){throw new Error("Load method is not defined. Is the file jszip-load.js included ?")},filter:function(e){var t,n,i,r,s=[];for(t in this.files)this.files.hasOwnProperty(t)&&(r=new o((i=this.files[t]).name,i._data,a(i.options)),n=t.slice(this.root.length,t.length),t.slice(0,this.root.length)===this.root&&e(n,r)&&s.push(r));return s},file:function(e,t,n){if(1===arguments.length){if(A.utils.isRegExp(e)){var i=e;return this.filter((function(e,t){return!t.options.dir&&i.test(e)}))}return this.filter((function(t,n){return!n.options.dir&&t===e}))[0]||null}return l.call(this,e=this.root+e,t,n),this},folder:function(e){if(!e)return this;if(A.utils.isRegExp(e))return this.filter((function(t,n){return n.options.dir&&e.test(t)}));var t=c.call(this,this.root+e),n=this.clone();return n.root=t.name,n},remove:function(e){var t=this.files[e=this.root+e];if(t||("/"!=e.slice(-1)&&(e+="/"),t=this.files[e]),t)if(t.options.dir)for(var n=this.filter((function(t,n){return n.name.slice(0,e.length)===e})),i=0;i<n.length;i++)delete this.files[n[i].name];else delete this.files[e];return this},generate:function(e){e=a(e||{},{base64:!0,compression:"STORE",type:"base64"}),A.utils.checkSupport(e.type);var t,n,i,r=[],o=0,l=0;for(var u in this.files)if(this.files.hasOwnProperty(u)){var c=this.files[u],g=c.options.compression||e.compression.toUpperCase(),m=A.compressions[g];if(!m)throw new Error(g+" is not a valid compression method !");var y=h.call(this,c,m),v=d.call(this,u,c,y,o);o+=v.fileRecord.length+y.compressedSize,l+=v.dirRecord.length,r.push(v)}switch(i=A.signature.CENTRAL_DIRECTORY_END+"\0\0\0\0"+s(r.length,2)+s(r.length,2)+s(l,4)+s(o,4)+"\0\0",e.type.toLowerCase()){case"uint8array":case"arraybuffer":case"blob":case"nodebuffer":t=new f(o+l+i.length);break;case"base64":default:t=new p(o+l+i.length)}for(n=0;n<r.length;n++)t.append(r[n].fileRecord),t.append(r[n].compressedObject.compressedContent);for(n=0;n<r.length;n++)t.append(r[n].dirRecord);t.append(i);var w=t.finalize();switch(e.type.toLowerCase()){case"uint8array":case"arraybuffer":case"nodebuffer":return A.utils.transformTo(e.type.toLowerCase(),w);case"blob":return A.utils.arrayBuffer2Blob(A.utils.transformTo("arraybuffer",w));case"base64":return e.base64?A.base64.encode(w):w;default:return w}},crc32:function(e,t){if(void 0===e||!e.length)return 0;var n="string"!==A.utils.getTypeOf(e),i=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];void 0===t&&(t=0),t^=-1;for(var r=0,o=e.length;r<o;r++)t=t>>>8^i[255&(t^(n?e[r]:e.charCodeAt(r)))];return-1^t},clone:function(){var e=new A;for(var t in this)"function"!=typeof this[t]&&(e[t]=this[t]);return e},utf8encode:function(t){if(e){var n=e.encode(t);return A.utils.transformTo("string",n)}if(A.support.nodebuffer)return A.utils.transformTo("string",new Buffer(t,"utf-8"));for(var i=[],r=0,o=0;o<t.length;o++){var s=t.charCodeAt(o);s<128?i[r++]=String.fromCharCode(s):s>127&&s<2048?(i[r++]=String.fromCharCode(s>>6|192),i[r++]=String.fromCharCode(63&s|128)):(i[r++]=String.fromCharCode(s>>12|224),i[r++]=String.fromCharCode(s>>6&63|128),i[r++]=String.fromCharCode(63&s|128))}return i.join("")},utf8decode:function(e){var n=[],i=0,r="string"!==A.utils.getTypeOf(e),o=0,s=0,a=0,l=0;if(t)return t.decode(A.utils.transformTo("uint8array",e));if(A.support.nodebuffer)return A.utils.transformTo("nodebuffer",e).toString("utf-8");for(;o<e.length;)(s=r?e[o]:e.charCodeAt(o))<128?(n[i++]=String.fromCharCode(s),o++):s>191&&s<224?(a=r?e[o+1]:e.charCodeAt(o+1),n[i++]=String.fromCharCode((31&s)<<6|63&a),o+=2):(a=r?e[o+1]:e.charCodeAt(o+1),l=r?e[o+2]:e.charCodeAt(o+2),n[i++]=String.fromCharCode((15&s)<<12|(63&a)<<6|63&l),o+=3);return n.join("")}}}(),A.compressions={STORE:{magic:"\0\0",compress:function(e){return e},uncompress:function(e){return e},compressInputType:d,uncompressInputType:d}},function(){function e(e){return e}function t(e,t){for(var n=0;n<e.length;++n)t[n]=255&e.charCodeAt(n);return t}function n(e){var t=65536,n=[],i=e.length,r=A.utils.getTypeOf(e),o=0,s=!0;try{switch(r){case"uint8array":String.fromCharCode.apply(null,new Uint8Array(0));break;case"nodebuffer":String.fromCharCode.apply(null,new Buffer(0))}}catch(u){s=!1}if(!s){for(var a="",l=0;l<e.length;l++)a+=String.fromCharCode(e[l]);return a}for(;o<i&&t>1;)try{n.push(String.fromCharCode.apply(null,"array"===r||"nodebuffer"===r?e.slice(o,Math.min(o+t,i)):e.subarray(o,Math.min(o+t,i)))),o+=t}catch(u){t=Math.floor(t/2)}return n.join("")}function i(e,t){for(var n=0;n<e.length;n++)t[n]=e[n];return t}A.utils={string2binary:function(e){for(var t="",n=0;n<e.length;n++)t+=String.fromCharCode(255&e.charCodeAt(n));return t},string2Uint8Array:function(e){return A.utils.transformTo("uint8array",e)},uint8Array2String:function(e){return A.utils.transformTo("string",e)},arrayBuffer2Blob:function(e){A.utils.checkSupport("blob");try{return new Blob([e],{type:"application/zip"})}catch(n){}try{var t=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder);return t.append(e),t.getBlob("application/zip")}catch(n){}throw new Error("Bug : can't construct the Blob.")},string2Blob:function(e){var t=A.utils.transformTo("arraybuffer",e);return A.utils.arrayBuffer2Blob(t)}};var r={};r.string={string:e,array:function(e){return t(e,new Array(e.length))},arraybuffer:function(e){return r.string.uint8array(e).buffer},uint8array:function(e){return t(e,new Uint8Array(e.length))},nodebuffer:function(e){return t(e,new Buffer(e.length))}},r.array={string:n,array:e,arraybuffer:function(e){return new Uint8Array(e).buffer},uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return new Buffer(e)}},r.arraybuffer={string:function(e){return n(new Uint8Array(e))},array:function(e){return i(new Uint8Array(e),new Array(e.byteLength))},arraybuffer:e,uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return new Buffer(new Uint8Array(e))}},r.uint8array={string:n,array:function(e){return i(e,new Array(e.length))},arraybuffer:function(e){return e.buffer},uint8array:e,nodebuffer:function(e){return new Buffer(e)}},r.nodebuffer={string:n,array:function(e){return i(e,new Array(e.length))},arraybuffer:function(e){return r.nodebuffer.uint8array(e).buffer},uint8array:function(e){return i(e,new Uint8Array(e.length))},nodebuffer:e},A.utils.transformTo=function(e,t){if(t||(t=""),!e)return t;A.utils.checkSupport(e);var n=A.utils.getTypeOf(t);return r[n][e](t)},A.utils.getTypeOf=function(e){return"string"==typeof e?"string":"[object Array]"===Object.prototype.toString.call(e)?"array":A.support.nodebuffer&&Buffer.isBuffer(e)?"nodebuffer":A.support.uint8array&&e instanceof Uint8Array?"uint8array":A.support.arraybuffer&&e instanceof ArrayBuffer?"arraybuffer":void 0},A.utils.isRegExp=function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},A.utils.checkSupport=function(e){var t=!0;switch(e.toLowerCase()){case"uint8array":t=A.support.uint8array;break;case"arraybuffer":t=A.support.arraybuffer;break;case"nodebuffer":t=A.support.nodebuffer;break;case"blob":t=A.support.blob}if(!t)throw new Error(e+" is not supported by this browser")}}(),A.CompressedObject=function(){this.compressedSize=0,this.uncompressedSize=0,this.crc32=0,this.compressionMethod=d,this.compressedContent=d},A.CompressedObject.prototype={getContent:function(){return d},getCompressedContent:function(){return d}},A.base64=(c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",{encode:function(e,t){for(var n,i,r,o,s,a,l,u="",h=0;h<e.length;)o=(n=e.charCodeAt(h++))>>2,s=(3&n)<<4|(i=e.charCodeAt(h++))>>4,a=(15&i)<<2|(r=e.charCodeAt(h++))>>6,l=63&r,isNaN(i)?a=l=64:isNaN(r)&&(l=64),u=u+c.charAt(o)+c.charAt(s)+c.charAt(a)+c.charAt(l);return u},decode:function(e,t){var n,i,r,o,s,a,l="",u=0;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");u<e.length;)r=c.indexOf(e.charAt(u++)),n=(15&(o=c.indexOf(e.charAt(u++))))<<4|(s=c.indexOf(e.charAt(u++)))>>2,i=(3&s)<<6|(a=c.indexOf(e.charAt(u++))),l+=String.fromCharCode(r<<2|o>>4),64!=s&&(l+=String.fromCharCode(n)),64!=a&&(l+=String.fromCharCode(i));return l}}),void 0!==window.jQuery&&(window.jQuery.fn.webdatarocks=function(e){return(e=e||{}).container=this.get(0),e=window.WebDataRocks?window.WebDataRocks(e):window.PivotApi(e),this.data("webdatarocks",e),e}),void 0!==window.angular&&window.angular.module("webdatarocks",[]).directive("wbrPivot",(function(){return{restrict:"A",scope:{report:"=wbrReport",customizeCell:"&wbrCustomizeCell",cellclick:"&wbrCellClick",celldoubleclick:"&wbrCellDoubleClick",dataerror:"&wbrDataError",datafilecancelled:"&wbrDataFileCancelled",dataloaded:"&wbrDataLoaded",datachanged:"&wbrDataChanged",fieldslistclose:"&wbrFieldsListClose",fieldslistopen:"&wbrFieldsListOpen",filteropen:"&wbrFilteropen",fullscreen:"&wbrFullscreen",loadingdata:"&wbrLoadingData",loadinglocalization:"&wbrLoadingLocalization",loadingolapstructure:"&wbrLoadingOlapStructure",loadingreportfile:"&wbrLoadingReportFile",localizationerror:"&wbrLocalizationError",localizationloaded:"&wbrLocalizationLoaded",openingreportfile:"&wbrOpeningReportFile",querycomplete:"&wbrQueryComplete",queryerror:"&wbrQueryError",ready:"&wbrReady",reportchange:"&wbrReportChange",reportcomplete:"&wbrReportComplete",reportfilecancelled:"&wbrReportFileCancelled",reportfileerror:"&wbrReportFileError",reportfileloaded:"&wbrReportFileLoaded",runningquery:"&wbrRunningQuery",update:"&wbrUpdate",beforetoolbarcreated:"&wbrBeforeToolbarCreated"},link:function(e,t,n,i){(i={}).container=t[0],function(e,t){void 0!==e.wbrGlobal&&(t.global=e.wbrGlobal),void 0!==e.wbrWidth&&(t.width=e.wbrWidth),void 0!==e.wbrHeight&&(t.height=e.wbrHeight),void 0!==e.wbrToolbar&&(t.toolbar=!0===e.wbrToolbar||"true"==e.wbrToolbar||"on"==e.wbrToolbar)}(n,i),e.customizeCell&&(i.customizeCell=function(t,n){return e.customizeCell({html:t,data:n})}),e.cellclick&&(i.cellclick=function(t){e.cellclick({cell:t})}),e.celldoubleclick&&(i.celldoubleclick=function(t){e.celldoubleclick({cell:t})}),i.dataerror=e.dataerror,i.datafilecancelled=e.datafilecancelled,i.dataloaded=e.dataloaded,i.datachanged&&(i.datachanged=function(t){e.datachanged({event:t})}),i.fieldslistclose=e.fieldslistclose,i.fieldslistopen=e.fieldslistopen,i.filteropen&&(i.filteropen=function(t){e.filteropen({params:t})}),i.fullscreen&&(i.fullscreen=function(t){e.fullscreen({fullScreenMode:t})}),i.loadingdata=e.loadingdata,i.loadinglocalization=e.loadinglocalization,i.loadingolapstructure=e.loadingolapstructure,i.loadingreportfile=e.loadingreportfile,i.localizationerror=e.localizationerror,i.localizationloaded=e.localizationloaded,i.olapstructureerror=e.olapstructureerror,i.olapstructureloaded=e.olapstructureloaded,i.openingreportfile=e.openingreportfile,i.querycomplete=e.querycomplete,i.queryerror=e.queryerror,e.ready&&(i.ready=function(){e.ready({pivot:r})}),i.reportchange=e.reportchange,i.reportcomplete=e.reportcomplete,i.reportfilecancelled=e.reportfilecancelled,i.reportfileerror=e.reportfileerror,i.reportfileloaded=e.reportfileloaded,i.runningquery=e.runningquery,i.loadingdata=e.loadingdata,i.loadingdata=e.loadingdata,i.loadingdata=e.loadingdata,i.update=e.update,e.beforetoolbarcreated&&(i.beforetoolbarcreated=function(t){e.beforetoolbarcreated({toolbar:t})}),e.report&&(i.report=e.report),e.global&&(i.global=e.global);var r=new WebDataRocks(i)}}})),void 0!==window.React&&(window.WebDataRocksReact={Pivot:React.createClass({propTypes:{global:React.PropTypes.object,width:React.PropTypes.oneOfType([React.PropTypes.string,React.PropTypes.number]),height:React.PropTypes.oneOfType([React.PropTypes.string,React.PropTypes.number]),report:React.PropTypes.oneOfType([React.PropTypes.string,React.PropTypes.object]),toolbar:React.PropTypes.bool,customizeCell:React.PropTypes.func,cellclick:React.PropTypes.func,celldoubleclick:React.PropTypes.func,dataerror:React.PropTypes.func,datafilecancelled:React.PropTypes.func,dataloaded:React.PropTypes.func,datachanged:React.PropTypes.func,fieldslistclose:React.PropTypes.func,fieldslistopen:React.PropTypes.func,filteropen:React.PropTypes.func,fullscreen:React.PropTypes.func,loadingdata:React.PropTypes.func,loadinglocalization:React.PropTypes.func,loadingolapstructure:React.PropTypes.func,loadingreportfile:React.PropTypes.func,localizationerror:React.PropTypes.func,localizationloaded:React.PropTypes.func,olapstructureerror:React.PropTypes.func,olapstructureloaded:React.PropTypes.func,openingreportfile:React.PropTypes.func,querycomplete:React.PropTypes.func,queryerror:React.PropTypes.func,ready:React.PropTypes.func,reportchange:React.PropTypes.func,reportcomplete:React.PropTypes.func,reportfilecancelled:React.PropTypes.func,reportfileerror:React.PropTypes.func,reportfileloaded:React.PropTypes.func,runningquery:React.PropTypes.func,update:React.PropTypes.func,beforetoolbarcreated:React.PropTypes.func},render:function(){return React.DOM.div()},componentDidMount:function(){var e={};e.container=ReactDOM.findDOMNode(this),this.parseProps(e),this.webdatarocks=new window.WebDataRocks(e)},shouldComponentUpdate:function(){return!1},componentWillUnmount:function(){},parseProps:function(e){for(var t in this.props)e[t]=this.props[t]}})}),e.exports&&(e.exports=WebDataRocks)}).call(this,n("YuTi")(e))},zUnb:function(i,r,l){"use strict";function c(e){return"function"==typeof e}l.r(r);var d=!1,f={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){if(e){var t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else d&&console.log("RxJS: Back to a better error behavior. Thank you. <3");d=e},get useDeprecatedSynchronousErrorHandling(){return d}};function m(e){setTimeout((function(){throw e}),0)}var y={closed:!0,next:function(e){},error:function(e){if(f.useDeprecatedSynchronousErrorHandling)throw e;m(e)},complete:function(){}},v=Array.isArray||function(e){return e&&"number"==typeof e.length};function w(e){return null!==e&&"object"==typeof e}var _,b=function(){function e(e){return Error.call(this),this.message=e?"".concat(e.length," errors occurred during unsubscription:\n").concat(e.map((function(e,t){return"".concat(t+1,") ").concat(e.toString())})).join("\n  ")):"",this.name="UnsubscriptionError",this.errors=e,this}return e.prototype=Object.create(Error.prototype),e}(),C=((_=function(){function e(t){p(this,e),this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}return g(e,[{key:"unsubscribe",value:function(){var t;if(!this.closed){var n=this._parentOrParents,i=this._unsubscribe,r=this._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof e)n.remove(this);else if(null!==n)for(var o=0;o<n.length;++o)n[o].remove(this);if(c(i))try{i.call(this)}catch(u){t=u instanceof b?E(u.errors):[u]}if(v(r))for(var s=-1,a=r.length;++s<a;){var l=r[s];if(w(l))try{l.unsubscribe()}catch(u){t=t||[],u instanceof b?t=t.concat(E(u.errors)):t.push(u)}}if(t)throw new b(t)}}},{key:"add",value:function(t){var n=t;if(!t)return e.EMPTY;switch(typeof t){case"function":n=new e(t);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof e)){var i=n;(n=new e)._subscriptions=[i]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}var r=n._parentOrParents;if(null===r)n._parentOrParents=this;else if(r instanceof e){if(r===this)return n;n._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return n;r.push(this)}var o=this._subscriptions;return null===o?this._subscriptions=[n]:o.push(n),n}},{key:"remove",value:function(e){var t=this._subscriptions;if(t){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}}}]),e}()).EMPTY=function(e){return e.closed=!0,e}(new _),_);function E(e){return e.reduce((function(e,t){return e.concat(t instanceof b?t.errors:t)}),[])}var S="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random(),L=function(e){a(n,e);var t=u(n);function n(e,i,r){var o;switch(p(this,n),(o=t.call(this)).syncErrorValue=null,o.syncErrorThrown=!1,o.syncErrorThrowable=!1,o.isStopped=!1,arguments.length){case 0:o.destination=y;break;case 1:if(!e){o.destination=y;break}if("object"==typeof e){e instanceof n?(o.syncErrorThrowable=e.syncErrorThrowable,o.destination=e,e.add(h(o))):(o.syncErrorThrowable=!0,o.destination=new T(h(o),e));break}default:o.syncErrorThrowable=!0,o.destination=new T(h(o),e,i,r)}return o}return g(n,[{key:S,value:function(){return this}},{key:"next",value:function(e){this.isStopped||this._next(e)}},{key:"error",value:function(e){this.isStopped||(this.isStopped=!0,this._error(e))}},{key:"complete",value:function(){this.isStopped||(this.isStopped=!0,this._complete())}},{key:"unsubscribe",value:function(){this.closed||(this.isStopped=!0,s(A(n.prototype),"unsubscribe",this).call(this))}},{key:"_next",value:function(e){this.destination.next(e)}},{key:"_error",value:function(e){this.destination.error(e),this.unsubscribe()}},{key:"_complete",value:function(){this.destination.complete(),this.unsubscribe()}},{key:"_unsubscribeAndRecycle",value:function(){var e=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this}}],[{key:"create",value:function(e,t,i){var r=new n(e,t,i);return r.syncErrorThrowable=!1,r}}]),n}(C),T=function(e){a(n,e);var t=u(n);function n(e,i,r,o){var s,a;p(this,n),(s=t.call(this))._parentSubscriber=e;var l=h(s);return c(i)?a=i:i&&(a=i.next,r=i.error,o=i.complete,i!==y&&(c((l=Object.create(i)).unsubscribe)&&s.add(l.unsubscribe.bind(l)),l.unsubscribe=s.unsubscribe.bind(h(s)))),s._context=l,s._next=a,s._error=r,s._complete=o,s}return g(n,[{key:"next",value:function(e){if(!this.isStopped&&this._next){var t=this._parentSubscriber;f.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}}},{key:"error",value:function(e){if(!this.isStopped){var t=this._parentSubscriber,n=f.useDeprecatedSynchronousErrorHandling;if(this._error)n&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)n?(t.syncErrorValue=e,t.syncErrorThrown=!0):m(e),this.unsubscribe();else{if(this.unsubscribe(),n)throw e;m(e)}}}},{key:"complete",value:function(){var e=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var n=function(){return e._complete.call(e._context)};f.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}}},{key:"__tryOrUnsub",value:function(e,t){try{e.call(this._context,t)}catch(n){if(this.unsubscribe(),f.useDeprecatedSynchronousErrorHandling)throw n;m(n)}}},{key:"__tryOrSetError",value:function(e,t,n){if(!f.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,n)}catch(i){return f.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=i,e.syncErrorThrown=!0,!0):(m(i),!0)}return!1}},{key:"_unsubscribe",value:function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()}}]),n}(L),B="function"==typeof Symbol&&Symbol.observable||"@@observable";function N(e){return e}var I,O=((I=function(){function e(t){p(this,e),this._isScalar=!1,t&&(this._subscribe=t)}return g(e,[{key:"lift",value:function(t){var n=new e;return n.source=this,n.operator=t,n}},{key:"subscribe",value:function(e,t,n){var i=this.operator,r=function(e,t,n){if(e){if(e instanceof L)return e;if(e[S])return e[S]()}return e||t||n?new L(e,t,n):new L(y)}(e,t,n);if(r.add(i?i.call(r,this.source):this.source||f.useDeprecatedSynchronousErrorHandling&&!r.syncErrorThrowable?this._subscribe(r):this._trySubscribe(r)),f.useDeprecatedSynchronousErrorHandling&&r.syncErrorThrowable&&(r.syncErrorThrowable=!1,r.syncErrorThrown))throw r.syncErrorValue;return r}},{key:"_trySubscribe",value:function(e){try{return this._subscribe(e)}catch(t){f.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),function(e){for(;e;){var t=e,n=t.closed,i=t.destination,r=t.isStopped;if(n||r)return!1;e=i&&i instanceof L?i:null}return!0}(e)?e.error(t):console.warn(t)}}},{key:"forEach",value:function(e,t){var n=this;return new(t=F(t))((function(t,i){var r;r=n.subscribe((function(t){try{e(t)}catch(n){i(n),r&&r.unsubscribe()}}),i,t)}))}},{key:"_subscribe",value:function(e){var t=this.source;return t&&t.subscribe(e)}},{key:B,value:function(){return this}},{key:"pipe",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?this:(0===(i=t).length?N:1===i.length?i[0]:function(e){return i.reduce((function(e,t){return t(e)}),e)})(this);var i}},{key:"toPromise",value:function(e){var t=this;return new(e=F(e))((function(e,n){var i;t.subscribe((function(e){return i=e}),(function(e){return n(e)}),(function(){return e(i)}))}))}}]),e}()).create=function(e){return new I(e)},I);function F(e){if(e||(e=f.Promise||Promise),!e)throw new Error("no Promise impl found");return e}var x,D=function(){function e(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return e.prototype=Object.create(Error.prototype),e}(),R=function(e){a(n,e);var t=u(n);function n(e,i){var r;return p(this,n),(r=t.call(this)).subject=e,r.subscriber=i,r.closed=!1,r}return g(n,[{key:"unsubscribe",value:function(){if(!this.closed){this.closed=!0;var e=this.subject,t=e.observers;if(this.subject=null,t&&0!==t.length&&!e.isStopped&&!e.closed){var n=t.indexOf(this.subscriber);-1!==n&&t.splice(n,1)}}}}]),n}(C),U=function(e){a(n,e);var t=u(n);function n(e){var i;return p(this,n),(i=t.call(this,e)).destination=e,i}return n}(L),M=((x=function(e){a(n,e);var t=u(n);function n(){var e;return p(this,n),(e=t.call(this)).observers=[],e.closed=!1,e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return g(n,[{key:S,value:function(){return new U(this)}},{key:"lift",value:function(e){var t=new H(this,this);return t.operator=e,t}},{key:"next",value:function(e){if(this.closed)throw new D;if(!this.isStopped)for(var t=this.observers,n=t.length,i=t.slice(),r=0;r<n;r++)i[r].next(e)}},{key:"error",value:function(e){if(this.closed)throw new D;this.hasError=!0,this.thrownError=e,this.isStopped=!0;for(var t=this.observers,n=t.length,i=t.slice(),r=0;r<n;r++)i[r].error(e);this.observers.length=0}},{key:"complete",value:function(){if(this.closed)throw new D;this.isStopped=!0;for(var e=this.observers,t=e.length,n=e.slice(),i=0;i<t;i++)n[i].complete();this.observers.length=0}},{key:"unsubscribe",value:function(){this.isStopped=!0,this.closed=!0,this.observers=null}},{key:"_trySubscribe",value:function(e){if(this.closed)throw new D;return s(A(n.prototype),"_trySubscribe",this).call(this,e)}},{key:"_subscribe",value:function(e){if(this.closed)throw new D;return this.hasError?(e.error(this.thrownError),C.EMPTY):this.isStopped?(e.complete(),C.EMPTY):(this.observers.push(e),new R(this,e))}},{key:"asObservable",value:function(){var e=new O;return e.source=this,e}}]),n}(O)).create=function(e,t){return new H(e,t)},x),H=function(e){a(n,e);var t=u(n);function n(e,i){var r;return p(this,n),(r=t.call(this)).destination=e,r.source=i,r}return g(n,[{key:"next",value:function(e){var t=this.destination;t&&t.next&&t.next(e)}},{key:"error",value:function(e){var t=this.destination;t&&t.error&&this.destination.error(e)}},{key:"complete",value:function(){var e=this.destination;e&&e.complete&&this.destination.complete()}},{key:"_subscribe",value:function(e){return this.source?this.source.subscribe(e):C.EMPTY}}]),n}(M),P=function(e){a(n,e);var t=u(n);function n(e,i,r){var o;return p(this,n),(o=t.call(this)).parent=e,o.outerValue=i,o.outerIndex=r,o.index=0,o}return g(n,[{key:"_next",value:function(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)}},{key:"_error",value:function(e){this.parent.notifyError(e,this),this.unsubscribe()}},{key:"_complete",value:function(){this.parent.notifyComplete(this),this.unsubscribe()}}]),n}(L),Q=function(e){return function(t){for(var n=0,i=e.length;n<i&&!t.closed;n++)t.next(e[n]);t.complete()}};var k="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator",z=function(e){if(e&&"function"==typeof e[B])return o=e,function(e){var t=o[B]();if("function"!=typeof t.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return t.subscribe(e)};if((t=e)&&"number"==typeof t.length&&"function"!=typeof t)return Q(e);var t,n,i,r,o;if((n=e)&&"function"!=typeof n.subscribe&&"function"==typeof n.then)return r=e,function(e){return r.then((function(t){e.closed||(e.next(t),e.complete())}),(function(t){return e.error(t)})).then(null,m),e};if(e&&"function"==typeof e[k])return i=e,function(e){for(var t=i[k]();;){var n=t.next();if(n.done){e.complete();break}if(e.next(n.value),e.closed)break}return"function"==typeof t.return&&e.add((function(){t.return&&t.return()})),e};var s=w(e)?"an invalid object":"'".concat(e,"'");throw new TypeError("You provided ".concat(s," where a stream was expected. You can provide an Observable, Promise, Array, or Iterable."))},V=function(e){a(n,e);var t=u(n);function n(){return p(this,n),t.apply(this,arguments)}return g(n,[{key:"notifyNext",value:function(e,t,n,i,r){this.destination.next(t)}},{key:"notifyError",value:function(e,t){this.destination.error(e)}},{key:"notifyComplete",value:function(e){this.destination.complete()}}]),n}(L),j=function(){function e(t,n){p(this,e),this.project=t,this.thisArg=n}return g(e,[{key:"call",value:function(e,t){return t.subscribe(new G(e,this.project,this.thisArg))}}]),e}(),G=function(e){a(n,e);var t=u(n);function n(e,i,r){var o;return p(this,n),(o=t.call(this,e)).project=i,o.count=0,o.thisArg=r||h(o),o}return g(n,[{key:"_next",value:function(e){var t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(t)}}]),n}(L),q=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.POSITIVE_INFINITY;p(this,e),this.project=t,this.concurrent=n}return g(e,[{key:"call",value:function(e,t){return t.subscribe(new W(e,this.project,this.concurrent))}}]),e}(),W=function(e){a(n,e);var t=u(n);function n(e,i){var r,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.POSITIVE_INFINITY;return p(this,n),(r=t.call(this,e)).project=i,r.concurrent=o,r.hasCompleted=!1,r.buffer=[],r.active=0,r.index=0,r}return g(n,[{key:"_next",value:function(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)}},{key:"_tryNext",value:function(e){var t,n=this.index++;try{t=this.project(e,n)}catch(i){return void this.destination.error(i)}this.active++,this._innerSub(t,e,n)}},{key:"_innerSub",value:function(e,t,n){var i=new P(this,t,n),r=this.destination;r.add(i);var o=function(e,t,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new P(e,n,i);if(!r.closed)return t instanceof O?t.subscribe(r):z(t)(r)}(this,e,void 0,void 0,i);o!==i&&r.add(o)}},{key:"_complete",value:function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}},{key:"notifyNext",value:function(e,t,n,i,r){this.destination.next(t)}},{key:"notifyComplete",value:function(e){var t=this.buffer;this.remove(e),this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}]),n}(V);function K(){return function(e){return e.lift(new Y(e))}}var X,Y=function(){function e(t){p(this,e),this.connectable=t}return g(e,[{key:"call",value:function(e,t){var n=this.connectable;n._refCount++;var i=new J(e,n),r=t.subscribe(i);return i.closed||(i.connection=n.connect()),r}}]),e}(),J=function(e){a(n,e);var t=u(n);function n(e,i){var r;return p(this,n),(r=t.call(this,e)).connectable=i,r}return g(n,[{key:"_unsubscribe",value:function(){var e=this.connectable;if(e){this.connectable=null;var t=e._refCount;if(t<=0)this.connection=null;else if(e._refCount=t-1,t>1)this.connection=null;else{var n=this.connection,i=e._connection;this.connection=null,!i||n&&i!==n||i.unsubscribe()}}else this.connection=null}}]),n}(L),Z={operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:(X=function(e){a(n,e);var t=u(n);function n(e,i){var r;return p(this,n),(r=t.call(this)).source=e,r.subjectFactory=i,r._refCount=0,r._isComplete=!1,r}return g(n,[{key:"_subscribe",value:function(e){return this.getSubject().subscribe(e)}},{key:"getSubject",value:function(){var e=this._subject;return e&&!e.isStopped||(this._subject=this.subjectFactory()),this._subject}},{key:"connect",value:function(){var e=this._connection;return e||(this._isComplete=!1,(e=this._connection=new C).add(this.source.subscribe(new $(this.getSubject(),this))),e.closed&&(this._connection=null,e=C.EMPTY)),e}},{key:"refCount",value:function(){return K()(this)}}]),n}(O).prototype)._subscribe},_isComplete:{value:X._isComplete,writable:!0},getSubject:{value:X.getSubject},connect:{value:X.connect},refCount:{value:X.refCount}},$=function(e){a(n,e);var t=u(n);function n(e,i){var r;return p(this,n),(r=t.call(this,e)).connectable=i,r}return g(n,[{key:"_error",value:function(e){this._unsubscribe(),s(A(n.prototype),"_error",this).call(this,e)}},{key:"_complete",value:function(){this.connectable._isComplete=!0,this._unsubscribe(),s(A(n.prototype),"_complete",this).call(this)}},{key:"_unsubscribe",value:function(){var e=this.connectable;if(e){this.connectable=null;var t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}}}]),n}(U);function ee(){return new M}function te(e){return{toString:e}.toString()}function ne(e,t,n){return te((function(){var i=function(e){return function(){if(e){var t=e.apply(void 0,arguments);for(var n in t)this[n]=t[n]}}}(t);function r(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(this instanceof r)return i.apply(this,t),this;var s=o(r,t);return a.annotation=s,a;function a(e,t,n){for(var i=e.hasOwnProperty("__parameters__")?e.__parameters__:Object.defineProperty(e,"__parameters__",{value:[]}).__parameters__;i.length<=n;)i.push(null);return(i[n]=i[n]||[]).push(s),e}}return n&&(r.prototype=Object.create(n.prototype)),r.prototype.ngMetadataName=e,r.annotationCls=r,r}))}var ie=ne("Inject",(function(e){return{token:e}})),re=ne("Optional"),oe=ne("Self"),se=ne("SkipSelf"),ae=function(e){return e[e.Default=0]="Default",e[e.Host=1]="Host",e[e.Self=2]="Self",e[e.SkipSelf=4]="SkipSelf",e[e.Optional=8]="Optional",e}({});function le(e){for(var t in e)if(e[t]===le)return t;throw Error("Could not find renamed property on target object.")}function ue(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function ce(e){return{factory:e.factory,providers:e.providers||[],imports:e.imports||[]}}function he(e){return de(e,e[pe])||de(e,e[me])}function de(e,t){return t&&t.token===e?t:null}function Ae(e){return e&&(e.hasOwnProperty(fe)||e.hasOwnProperty(ye))?e[fe]:null}var pe=le({"\u0275prov":le}),fe=le({"\u0275inj":le}),ge=le({"\u0275provFallback":le}),me=le({ngInjectableDef:le}),ye=le({ngInjectorDef:le});function ve(e){if("string"==typeof e)return e;if(Array.isArray(e))return"["+e.map(ve).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return""+e.overriddenName;if(e.name)return""+e.name;var t=e.toString();if(null==t)return""+t;var n=t.indexOf("\n");return-1===n?t:t.substring(0,n)}function we(e,t){return null==e||""===e?null===t?"":t:null==t||""===t?e:e+" "+t}var _e=le({__forward_ref__:le});function be(e){return e.__forward_ref__=be,e.toString=function(){return ve(this())},e}function Ce(e){return"function"==typeof(t=e)&&t.hasOwnProperty(_e)&&t.__forward_ref__===be?e():e;var t}var Ee,Se="undefined"!=typeof globalThis&&globalThis,Le="undefined"!=typeof window&&window,Te="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Be="undefined"!=typeof global&&global,Ne=Se||Be||Le||Te,Ie=le({"\u0275cmp":le}),Oe=le({"\u0275dir":le}),Fe=le({"\u0275pipe":le}),xe=le({"\u0275mod":le}),De=le({"\u0275loc":le}),Re=le({"\u0275fac":le}),Ue=le({__NG_ELEMENT_ID__:le}),Me=function(){function e(t,n){p(this,e),this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=ue({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}return g(e,[{key:"toString",value:function(){return"InjectionToken "+this._desc}}]),e}(),He=new Me("INJECTOR",-1),Pe={},Qe=/\n/gm,ke=le({provide:String,useValue:le}),ze=void 0;function Ve(e){var t=ze;return ze=e,t}function je(e){var t=Ee;return Ee=e,t}function Ge(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ae.Default;if(void 0===ze)throw new Error("inject() must be called from an injection context");return null===ze?We(e,void 0,t):ze.get(e,t&ae.Optional?null:void 0,t)}function qe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ae.Default;return(Ee||Ge)(Ce(e),t)}function We(e,t,n){var i=he(e);if(i&&"root"==i.providedIn)return void 0===i.value?i.value=i.factory():i.value;if(n&ae.Optional)return null;if(void 0!==t)return t;throw new Error("Injector: NOT_FOUND [".concat(ve(e),"]"))}function Ke(e){for(var t=[],n=0;n<e.length;n++){var i=Ce(e[n]);if(Array.isArray(i)){if(0===i.length)throw new Error("Arguments array must have arguments.");for(var r=void 0,o=ae.Default,s=0;s<i.length;s++){var a=i[s];a instanceof re||"Optional"===a.ngMetadataName||a===re?o|=ae.Optional:a instanceof se||"SkipSelf"===a.ngMetadataName||a===se?o|=ae.SkipSelf:a instanceof oe||"Self"===a.ngMetadataName||a===oe?o|=ae.Self:r=a instanceof ie||a===ie?a.token:a}t.push(qe(r,o))}else t.push(qe(i))}return t}var Xe=function(){function e(){p(this,e)}return g(e,[{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Pe;if(t===Pe){var n=new Error("NullInjectorError: No provider for ".concat(ve(e),"!"));throw n.name="NullInjectorError",n}return t}}]),e}(),Ye=function e(){p(this,e)};function Je(e,t){e.forEach((function(e){return Array.isArray(e)?Je(e,t):t(e)}))}function Ze(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function $e(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}var et,tt=function(e){return e[e.OnPush=0]="OnPush",e[e.Default=1]="Default",e}({}),nt=((et={})[et.Emulated=0]="Emulated",et[et.Native=1]="Native",et[et.None=2]="None",et[et.ShadowDom=3]="ShadowDom",et),it={},rt=[],ot=0;function st(e){return te((function(){var t=e.type,n=t.prototype,i={},r={type:t,providersResolver:null,decls:e.decls,vars:e.vars,factory:null,template:e.template||null,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:i,inputs:null,outputs:null,exportAs:e.exportAs||null,onChanges:null,onInit:n.ngOnInit||null,doCheck:n.ngDoCheck||null,afterContentInit:n.ngAfterContentInit||null,afterContentChecked:n.ngAfterContentChecked||null,afterViewInit:n.ngAfterViewInit||null,afterViewChecked:n.ngAfterViewChecked||null,onDestroy:n.ngOnDestroy||null,onPush:e.changeDetection===tt.OnPush,directiveDefs:null,pipeDefs:null,selectors:e.selectors||rt,viewQuery:e.viewQuery||null,features:e.features||null,data:e.data||{},encapsulation:e.encapsulation||nt.Emulated,id:"c",styles:e.styles||rt,_:null,setInput:null,schemas:e.schemas||null,tView:null},o=e.directives,s=e.features,a=e.pipes;return r.id+=ot++,r.inputs=ht(e.inputs,i),r.outputs=ht(e.outputs),s&&s.forEach((function(e){return e(r)})),r.directiveDefs=o?function(){return("function"==typeof o?o():o).map(at)}:null,r.pipeDefs=a?function(){return("function"==typeof a?a():a).map(lt)}:null,r}))}function at(e){return dt(e)||function(e){return e[Oe]||null}(e)}function lt(e){return function(e){return e[Fe]||null}(e)}var ut={};function ct(e){var t={type:e.type,bootstrap:e.bootstrap||rt,declarations:e.declarations||rt,imports:e.imports||rt,exports:e.exports||rt,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null};return null!=e.id&&te((function(){ut[e.id]=e.type})),t}function ht(e,t){if(null==e)return it;var n={};for(var i in e)if(e.hasOwnProperty(i)){var r=e[i],o=r;Array.isArray(r)&&(o=r[1],r=r[0]),n[r]=i,t&&(t[r]=o)}return n}function dt(e){return e[Ie]||null}function At(e,t){return e.hasOwnProperty(Re)?e[Re]:null}function pt(e,t){var n=e[xe]||null;if(!n&&!0===t)throw new Error("Type ".concat(ve(e)," does not have '\u0275mod' property."));return n}function ft(e){return Array.isArray(e)&&"object"==typeof e[1]}function gt(e){return Array.isArray(e)&&!0===e[1]}function mt(e){return 0!=(8&e.flags)}function yt(e){return 2==(2&e.flags)}function vt(e){return 1==(1&e.flags)}function wt(e){return null!==e.template}function _t(e){return 0!=(512&e[2])}var bt=void 0;function Ct(e){return!!e.listen}var Et={createRenderer:function(e,t){return void 0!==bt?bt:"undefined"!=typeof document?document:void 0}};function St(e){for(;Array.isArray(e);)e=e[0];return e}function Lt(e,t){return St(t[e.index])}function Tt(e,t){return e.data[t+20]}function Bt(e,t){var n=t[e];return ft(n)?n:n[0]}function Nt(e){var t=function(e){return e.__ngContext__||null}(e);return t?Array.isArray(t)?t:t.lView:null}function It(e){return 4==(4&e[2])}function Ot(e){return 128==(128&e[2])}function Ft(e,t){return null===e||null==t?null:e[t]}function xt(e){e[18]=0}function Dt(e,t){e[5]+=t;for(var n=e,i=e[3];null!==i&&(1===t&&1===n[5]||-1===t&&0===n[5]);)i[5]+=t,n=i,i=i[3]}var Rt={lFrame:Jt(null),bindingsEnabled:!0,checkNoChangesMode:!1};function Ut(){return Rt.bindingsEnabled}function Mt(){return Rt.lFrame.lView}function Ht(){return Rt.lFrame.tView}function Pt(){return Rt.lFrame.previousOrParentTNode}function Qt(e,t){Rt.lFrame.previousOrParentTNode=e,Rt.lFrame.isParent=t}function kt(){return Rt.lFrame.isParent}function zt(){return Rt.checkNoChangesMode}function Vt(e){Rt.checkNoChangesMode=e}function jt(e,t){var n=Rt.lFrame;n.bindingIndex=n.bindingRootIndex=e,Gt(t)}function Gt(e){Rt.lFrame.currentDirectiveIndex=e}function qt(){return Rt.lFrame.currentQueryIndex}function Wt(e){Rt.lFrame.currentQueryIndex=e}function Kt(e,t){var n=Yt();Rt.lFrame=n,n.previousOrParentTNode=t,n.lView=e}function Xt(e,t){var n=Yt(),i=e[1];Rt.lFrame=n,n.previousOrParentTNode=t,n.lView=e,n.tView=i,n.contextLView=e,n.bindingIndex=i.bindingStartIndex}function Yt(){var e=Rt.lFrame,t=null===e?null:e.child;return null===t?Jt(e):t}function Jt(e){var t={previousOrParentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:0,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null};return null!==e&&(e.child=t),t}function Zt(){var e=Rt.lFrame;return Rt.lFrame=e.parent,e.previousOrParentTNode=null,e.lView=null,e}var $t=Zt;function en(){var e=Zt();e.isParent=!0,e.tView=null,e.selectedIndex=0,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function tn(){return Rt.lFrame.selectedIndex}function nn(e){Rt.lFrame.selectedIndex=e}function rn(e,t){for(var n=t.directiveStart,i=t.directiveEnd;n<i;n++){var r=e.data[n];r.afterContentInit&&(e.contentHooks||(e.contentHooks=[])).push(-n,r.afterContentInit),r.afterContentChecked&&((e.contentHooks||(e.contentHooks=[])).push(n,r.afterContentChecked),(e.contentCheckHooks||(e.contentCheckHooks=[])).push(n,r.afterContentChecked)),r.afterViewInit&&(e.viewHooks||(e.viewHooks=[])).push(-n,r.afterViewInit),r.afterViewChecked&&((e.viewHooks||(e.viewHooks=[])).push(n,r.afterViewChecked),(e.viewCheckHooks||(e.viewCheckHooks=[])).push(n,r.afterViewChecked)),null!=r.onDestroy&&(e.destroyHooks||(e.destroyHooks=[])).push(n,r.onDestroy)}}function on(e,t,n){ln(e,t,3,n)}function sn(e,t,n,i){(3&e[2])===n&&ln(e,t,n,i)}function an(e,t){var n=e[2];(3&n)===t&&(n&=2047,n+=1,e[2]=n)}function ln(e,t,n,i){for(var r=null!=i?i:-1,o=0,s=void 0!==i?65535&e[18]:0;s<t.length;s++)if("number"==typeof t[s+1]){if(o=t[s],null!=i&&o>=i)break}else t[s]<0&&(e[18]+=65536),(o<r||-1==r)&&(un(e,n,t,s),e[18]=(4294901760&e[18])+s+2),s++}function un(e,t,n,i){var r=n[i]<0,o=n[i+1],s=e[r?-n[i]:n[i]];r?e[2]>>11<e[18]>>16&&(3&e[2])===t&&(e[2]+=2048,o.call(s)):o.call(s)}var cn=function e(t,n,i){p(this,e),this.factory=t,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=i};function hn(e,t,n){for(var i=Ct(e),r=0;r<n.length;){var o=n[r];if("number"==typeof o){if(0!==o)break;r++;var s=n[r++],a=n[r++],l=n[r++];i?e.setAttribute(t,a,l,s):t.setAttributeNS(s,a,l)}else{var u=o,c=n[++r];dn(u)?i&&e.setProperty(t,u,c):i?e.setAttribute(t,u,c):t.setAttribute(u,c),r++}}return r}function dn(e){return 64===e.charCodeAt(0)}function An(e,t){if(null===t||0===t.length);else if(null===e||0===e.length)e=t.slice();else for(var n=-1,i=0;i<t.length;i++){var r=t[i];"number"==typeof r?n=r:0===n||pn(e,n,r,null,-1===n||2===n?t[++i]:null)}return e}function pn(e,t,n,i,r){var o=0,s=e.length;if(-1===t)s=-1;else for(;o<e.length;){var a=e[o++];if("number"==typeof a){if(a===t){s=-1;break}if(a>t){s=o-1;break}}}for(;o<e.length;){var l=e[o];if("number"==typeof l)break;if(l===n){if(null===i)return void(null!==r&&(e[o+1]=r));if(i===e[o+1])return void(e[o+2]=r)}o++,null!==i&&o++,null!==r&&o++}-1!==s&&(e.splice(s,0,t),o=s+1),e.splice(o++,0,n),null!==i&&e.splice(o++,0,i),null!==r&&e.splice(o++,0,r)}function fn(e){return-1!==e}function gn(e){return 32767&e}function mn(e){return e>>16}function yn(e,t){for(var n=mn(e),i=t;n>0;)i=i[15],n--;return i}function vn(e){return"function"==typeof e?e.name||e.toString():"object"==typeof e&&null!=e&&"function"==typeof e.type?e.type.name||e.type.toString():function(e){return"string"==typeof e?e:null==e?"":""+e}(e)}var wn=("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Ne);function _n(e){return e instanceof Function?e():e}var bn=!0;function Cn(e){var t=bn;return bn=e,t}var En=0;function Sn(e,t){var n=Tn(e,t);if(-1!==n)return n;var i=t[1];i.firstCreatePass&&(e.injectorIndex=t.length,Ln(i.data,e),Ln(t,null),Ln(i.blueprint,null));var r=Bn(e,t),o=e.injectorIndex;if(fn(r))for(var s=gn(r),a=yn(r,t),l=a[1].data,u=0;u<8;u++)t[o+u]=a[s+u]|l[s+u];return t[o+8]=r,o}function Ln(e,t){e.push(0,0,0,0,0,0,0,0,t)}function Tn(e,t){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null==t[e.injectorIndex+8]?-1:e.injectorIndex}function Bn(e,t){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;for(var n=t[6],i=1;n&&-1===n.injectorIndex;)n=(t=t[15])?t[6]:null,i++;return n?n.injectorIndex|i<<16:-1}function Nn(e,t,n){!function(e,t,n){var i;"string"==typeof n?i=n.charCodeAt(0)||0:n.hasOwnProperty(Ue)&&(i=n[Ue]),null==i&&(i=n[Ue]=En++);var r=255&i,o=1<<r,s=64&r,a=32&r,l=t.data;128&r?s?a?l[e+7]|=o:l[e+6]|=o:a?l[e+5]|=o:l[e+4]|=o:s?a?l[e+3]|=o:l[e+2]|=o:a?l[e+1]|=o:l[e]|=o}(e,t,n)}function In(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:ae.Default,r=arguments.length>4?arguments[4]:void 0;if(null!==e){var o=function(e){if("string"==typeof e)return e.charCodeAt(0)||0;var t=e.hasOwnProperty(Ue)?e[Ue]:void 0;return"number"==typeof t&&t>0?255&t:t}(n);if("function"==typeof o){Kt(t,e);try{var s=o();if(null!=s||i&ae.Optional)return s;throw new Error("No provider for ".concat(vn(n),"!"))}finally{$t()}}else if("number"==typeof o){if(-1===o)return new Mn(e,t);var a=null,l=Tn(e,t),u=-1,c=i&ae.Host?t[16][6]:null;for((-1===l||i&ae.SkipSelf)&&(u=-1===l?Bn(e,t):t[l+8],Un(i,!1)?(a=t[1],l=gn(u),t=yn(u,t)):l=-1);-1!==l;){u=t[l+8];var h=t[1];if(Rn(o,l,h.data)){var d=Fn(l,t,n,a,i,c);if(d!==On)return d}Un(i,t[1].data[l+8]===c)&&Rn(o,l,t)?(a=h,l=gn(u),t=yn(u,t)):l=-1}}}if(i&ae.Optional&&void 0===r&&(r=null),0==(i&(ae.Self|ae.Host))){var A=t[9],p=je(void 0);try{return A?A.get(n,r,i&ae.Optional):We(n,r,i&ae.Optional)}finally{je(p)}}if(i&ae.Optional)return r;throw new Error("NodeInjector: NOT_FOUND [".concat(vn(n),"]"))}var On={};function Fn(e,t,n,i,r,o){var s=t[1],a=s.data[e+8],l=xn(a,s,n,null==i?yt(a)&&bn:i!=s&&3===a.type,r&ae.Host&&o===a);return null!==l?Dn(t,s,l,a):On}function xn(e,t,n,i,r){for(var o=e.providerIndexes,s=t.data,a=65535&o,l=e.directiveStart,u=o>>16,c=r?a+u:e.directiveEnd,h=i?a:a+u;h<c;h++){var d=s[h];if(h<l&&n===d||h>=l&&d.type===n)return h}if(r){var A=s[l];if(A&&wt(A)&&A.type===n)return l}return null}function Dn(e,t,n,i){var r=e[n],o=t.data;if(r instanceof cn){var s=r;if(s.resolving)throw new Error("Circular dep for "+vn(o[n]));var a,l=Cn(s.canSeeViewProviders);s.resolving=!0,s.injectImpl&&(a=je(s.injectImpl)),Kt(e,i);try{r=e[n]=s.factory(void 0,o,e,i),t.firstCreatePass&&n>=i.directiveStart&&function(e,t,n){var i=t.onChanges,r=t.onInit,o=t.doCheck;i&&((n.preOrderHooks||(n.preOrderHooks=[])).push(e,i),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e,i)),r&&(n.preOrderHooks||(n.preOrderHooks=[])).push(-e,r),o&&((n.preOrderHooks||(n.preOrderHooks=[])).push(e,o),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e,o))}(n,o[n],t)}finally{s.injectImpl&&je(a),Cn(l),s.resolving=!1,$t()}}return r}function Rn(e,t,n){var i=64&e,r=32&e;return!!((128&e?i?r?n[t+7]:n[t+6]:r?n[t+5]:n[t+4]:i?r?n[t+3]:n[t+2]:r?n[t+1]:n[t])&1<<e)}function Un(e,t){return!(e&ae.Self||e&ae.Host&&t)}var Mn=function(){function e(t,n){p(this,e),this._tNode=t,this._lView=n}return g(e,[{key:"get",value:function(e,t){return In(this._tNode,this._lView,e,void 0,t)}}]),e}();function Hn(e){return e.ngDebugContext}function Pn(e){return e.ngOriginalError}function Qn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];e.error.apply(e,n)}var kn=function(){function e(){p(this,e),this._console=console}return g(e,[{key:"handleError",value:function(e){var t=this._findOriginalError(e),n=this._findContext(e),i=function(e){return e.ngErrorLogger||Qn}(e);i(this._console,"ERROR",e),t&&i(this._console,"ORIGINAL ERROR",t),n&&i(this._console,"ERROR CONTEXT",n)}},{key:"_findContext",value:function(e){return e?Hn(e)?Hn(e):this._findContext(Pn(e)):null}},{key:"_findOriginalError",value:function(e){for(var t=Pn(e);t&&Pn(t);)t=Pn(t);return t}}]),e}(),zn=!0,Vn=!1;function jn(){return Vn=!0,zn}function Gn(e,t){e.__ngContext__=t}function qn(e){throw new Error("Multiple components match node with tagname "+e.tagName)}function Wn(){throw new Error("Cannot mix multi providers and regular providers")}function Kn(e,t,n){for(var i=e.length;;){var r=e.indexOf(t,n);if(-1===r)return r;if(0===r||e.charCodeAt(r-1)<=32){var o=t.length;if(r+o===i||e.charCodeAt(r+o)<=32)return r}n=r+1}}function Xn(e,t,n){for(var i=0;i<e.length;){var r=e[i++];if(n&&"class"===r){if(-1!==Kn((r=e[i]).toLowerCase(),t,0))return!0}else if(1===r){for(;i<e.length&&"string"==typeof(r=e[i++]);)if(r.toLowerCase()===t)return!0;return!1}}return!1}function Yn(e){return 0===e.type&&"ng-template"!==e.tagName}function Jn(e,t,n){return t===(0!==e.type||n?e.tagName:"ng-template")}function Zn(e,t,n){for(var i=4,r=e.attrs||[],o=function(e){for(var t=0;t<e.length;t++)if(3===(n=e[t])||4===n||6===n)return t;var n;return e.length}(r),s=!1,a=0;a<t.length;a++){var l=t[a];if("number"!=typeof l){if(!s)if(4&i){if(i=2|1&i,""!==l&&!Jn(e,l,n)||""===l&&1===t.length){if($n(i))return!1;s=!0}}else{var u=8&i?l:t[++a];if(8&i&&null!==e.attrs){if(!Xn(e.attrs,u,n)){if($n(i))return!1;s=!0}continue}var c=ei(8&i?"class":l,r,Yn(e),n);if(-1===c){if($n(i))return!1;s=!0;continue}if(""!==u){var h;h=c>o?"":r[c+1].toLowerCase();var d=8&i?h:null;if(d&&-1!==Kn(d,u,0)||2&i&&u!==h){if($n(i))return!1;s=!0}}}}else{if(!s&&!$n(i)&&!$n(l))return!1;if(s&&$n(l))continue;s=!1,i=l|1&i}}return $n(i)||s}function $n(e){return 0==(1&e)}function ei(e,t,n,i){if(null===t)return-1;var r=0;if(i||!n){for(var o=!1;r<t.length;){var s=t[r];if(s===e)return r;if(3===s||6===s)o=!0;else{if(1===s||2===s){for(var a=t[++r];"string"==typeof a;)a=t[++r];continue}if(4===s)break;if(0===s){r+=4;continue}}r+=o?1:2}return-1}return function(e,t){var n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){var i=e[n];if("number"==typeof i)return-1;if(i===t)return n;n++}return-1}(t,e)}function ti(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=0;i<t.length;i++)if(Zn(e,t[i],n))return!0;return!1}function ni(e,t){return e?":not("+t.trim()+")":t}function ii(e){for(var t=e[0],n=1,i=2,r="",o=!1;n<e.length;){var s=e[n];if("string"==typeof s)if(2&i){var a=e[++n];r+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else 8&i?r+="."+s:4&i&&(r+=" "+s);else""===r||$n(s)||(t+=ni(o,r),r=""),i=s,o=o||!$n(i);n++}return""!==r&&(t+=ni(o,r)),t}var ri={};function oi(e){var t=e[3];return gt(t)?t[3]:t}function si(e){return li(e[13])}function ai(e){return li(e[4])}function li(e){for(;null!==e&&!gt(e);)e=e[4];return e}function ui(e,t,n,i){if(!i)if(3==(3&t[2])){var r=e.preOrderCheckHooks;null!==r&&on(t,r,n)}else{var o=e.preOrderHooks;null!==o&&sn(t,o,0,n)}nn(n)}function ci(e,t){var n=e.contentQueries;if(null!==n)for(var i=0;i<n.length;i+=2){var r=n[i],o=n[i+1];if(-1!==o){var s=e.data[o];Wt(r),s.contentQueries(2,t[o],o)}}}function hi(e,t,n){return Ct(t)?t.createElement(e,n):null===n?t.createElement(e):t.createElementNS(n,e)}function di(e,t,n,i,r,o,s,a,l,u){var c=t.blueprint.slice();return c[0]=r,c[2]=140|i,xt(c),c[3]=c[15]=e,c[8]=n,c[10]=s||e&&e[10],c[11]=a||e&&e[11],c[12]=l||e&&e[12]||null,c[9]=u||e&&e[9]||null,c[6]=o,c[16]=2==t.type?e[16]:c,c}function Ai(e,t,n,i,r,o){var s=n+20,a=e.data[s]||function(e,t,n,i,r,o){var s=Pt(),a=kt(),l=a?s:s&&s.parent,u=e.data[n]=_i(0,l&&l!==t?l:null,i,n,r,o);return null===e.firstChild&&(e.firstChild=u),s&&(!a||null!=s.child||null===u.parent&&2!==s.type?a||(s.next=u):s.child=u),u}(e,t,s,i,r,o);return Qt(a,!0),a}function pi(e,t,n){Xt(t,t[6]);try{var i=e.viewQuery;null!==i&&Qi(1,i,n);var r=e.template;null!==r&&mi(e,t,r,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),e.staticContentQueries&&ci(e,t),e.staticViewQueries&&Qi(2,e.viewQuery,n);var o=e.components;null!==o&&function(e,t){for(var n=0;n<t.length;n++)Ri(e,t[n])}(t,o)}catch(s){throw e.firstCreatePass&&(e.incompleteFirstPass=!0),s}finally{t[2]&=-5,en()}}function fi(e,t,n,i){var r=t[2];if(256!=(256&r)){Xt(t,t[6]);var o=zt();try{xt(t),Rt.lFrame.bindingIndex=e.bindingStartIndex,null!==n&&mi(e,t,n,2,i);var s=3==(3&r);if(!o)if(s){var a=e.preOrderCheckHooks;null!==a&&on(t,a,null)}else{var l=e.preOrderHooks;null!==l&&sn(t,l,0,null),an(t,0)}if(function(e){for(var t=si(e);null!==t;t=ai(t))if(t[2])for(var n=t[9],i=0;i<n.length;i++){var r=n[i],o=r[3];0==(1024&r[2])&&Dt(o,1),r[2]|=1024}}(t),function(e){for(var t=si(e);null!==t;t=ai(t))for(var n=10;n<t.length;n++){var i=t[n],r=i[1];Ot(i)&&fi(r,i,r.template,i[8])}}(t),null!==e.contentQueries&&ci(e,t),!o)if(s){var u=e.contentCheckHooks;null!==u&&on(t,u)}else{var c=e.contentHooks;null!==c&&sn(t,c,1),an(t,1)}!function(e,t){try{var n=e.expandoInstructions;if(null!==n)for(var i=e.expandoStartIndex,r=-1,o=0;o<n.length;o++){var s=n[o];"number"==typeof s?s<=0?(nn(0-s),r=i+=9+n[++o]):i+=s:(null!==s&&(jt(i,r),s(2,t[r])),r++)}}finally{nn(-1)}}(e,t);var h=e.components;null!==h&&function(e,t){for(var n=0;n<t.length;n++)Di(e,t[n])}(t,h);var d=e.viewQuery;if(null!==d&&Qi(2,d,i),!o)if(s){var A=e.viewCheckHooks;null!==A&&on(t,A)}else{var p=e.viewHooks;null!==p&&sn(t,p,2),an(t,2)}!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),o||(t[2]&=-73),1024&t[2]&&(t[2]&=-1025,Dt(t[3],-1))}finally{en()}}}function gi(e,t,n,i){var r=t[10],o=!zt(),s=It(t);try{o&&!s&&r.begin&&r.begin(),s&&pi(e,t,i),fi(e,t,n,i)}finally{o&&!s&&r.end&&r.end()}}function mi(e,t,n,i,r){var o=tn();try{nn(-1),2&i&&t.length>20&&ui(e,t,0,zt()),n(i,r)}finally{nn(o)}}function yi(e){var t=e.tView;return null===t||t.incompleteFirstPass?e.tView=vi(1,-1,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts):t}function vi(e,t,n,i,r,o,s,a,l,u){var c=20+i,h=c+r,d=function(e,t){for(var n=[],i=0;i<t;i++)n.push(i<e?null:ri);return n}(c,h);return d[1]={type:e,id:t,blueprint:d,template:n,queries:null,viewQuery:a,node:null,data:d.slice().fill(null,c),bindingStartIndex:c,expandoStartIndex:h,expandoInstructions:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:l,consts:u,incompleteFirstPass:!1}}function wi(e,t,n,i){var r=zi(t);r.push(n),e.firstCreatePass&&function(e){return e.cleanup||(e.cleanup=[])}(e).push(i,r.length-1)}function _i(e,t,n,i,r,o){return{type:n,index:i,injectorIndex:t?t.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,tagName:r,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function bi(e,t,n){for(var i in e)if(e.hasOwnProperty(i)){var r=e[i];(n=null===n?{}:n).hasOwnProperty(i)?n[i].push(t,r):n[i]=[t,r]}return n}function Ci(e,t){var n=e.expandoInstructions;n.push(t.hostBindings),0!==t.hostVars&&n.push(t.hostVars)}function Ei(e,t,n){for(var i=0;i<n;i++)t.push(ri),e.blueprint.push(ri),e.data.push(null)}function Si(e,t){null!==e.hostBindings&&e.hostBindings(1,t)}function Li(e,t,n){var i=20-t.index,r=e.data.length-(65535&t.providerIndexes);(e.expandoInstructions||(e.expandoInstructions=[])).push(i,r,n)}function Ti(e,t){t.flags|=2,(e.components||(e.components=[])).push(t.index)}function Bi(e,t,n){if(n){if(t.exportAs)for(var i=0;i<t.exportAs.length;i++)n[t.exportAs[i]]=e;wt(t)&&(n[""]=e)}}function Ni(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}function Ii(e,t,n){e.data.push(n);var i=n.factory||(n.factory=At(n.type)),r=new cn(i,wt(n),null);e.blueprint.push(r),t.push(r)}function Oi(e,t,n){var i=Lt(t,e),r=yi(n),o=e[10],s=Ui(e,di(e,r,null,n.onPush?64:16,i,t,o,o.createRenderer(i,n)));e[t.index]=s}function Fi(e,t,n,i,r,o){var s=o[t];if(null!==s)for(var a=i.setInput,l=0;l<s.length;){var u=s[l++],c=s[l++],h=s[l++];null!==a?i.setInput(n,h,u,c):n[c]=h}}function xi(e,t){for(var n=null,i=0;i<t.length;){var r=t[i];if(0!==r)if(5!==r){if("number"==typeof r)break;e.hasOwnProperty(r)&&(null===n&&(n=[]),n.push(r,e[r],t[i+1])),i+=2}else i+=2;else i+=4}return n}function Di(e,t){var n=Bt(t,e);if(Ot(n)){var i=n[1];80&n[2]?fi(i,n,i.template,n[8]):n[5]>0&&function e(t){for(var n=si(t);null!==n;n=ai(n))for(var i=10;i<n.length;i++){var r=n[i];if(1024&r[2]){var o=r[1];fi(o,r,o.template,r[8])}else r[5]>0&&e(r)}var s=t[1].components;if(null!==s)for(var a=0;a<s.length;a++){var l=Bt(s[a],t);Ot(l)&&l[5]>0&&e(l)}}(n)}}function Ri(e,t){var n=Bt(t,e),i=n[1];!function(e,t){for(var n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])}(i,n),pi(i,n,n[8])}function Ui(e,t){return e[13]?e[14][4]=t:e[13]=t,e[14]=t,t}function Mi(e){for(;e;){e[2]|=64;var t=oi(e);if(_t(e)&&!t)return e;e=t}return null}function Hi(e,t,n){var i=t[10];i.begin&&i.begin();try{fi(e,t,e.template,n)}catch(r){throw Vi(t,r),r}finally{i.end&&i.end()}}function Pi(e){!function(e){for(var t=0;t<e.components.length;t++){var n=e.components[t],i=Nt(n),r=i[1];gi(r,i,r.template,n)}}(e[8])}function Qi(e,t,n){Wt(0),t(e,n)}var ki=Promise.resolve(null);function zi(e){return e[7]||(e[7]=[])}function Vi(e,t){var n=e[9],i=n?n.get(kn,null):null;i&&i.handleError(t)}function ji(e,t,n,i,r){for(var o=0;o<n.length;){var s=n[o++],a=n[o++],l=t[s],u=e.data[s];null!==u.setInput?u.setInput(l,r,i,a):l[a]=r}}function Gi(e,t){var n=t[3];return-1===e.index?gt(n)?n:null:n}function qi(e,t){var n=Gi(e,t);return n?ir(t[11],n[7]):null}function Wi(e,t,n,i,r){if(null!=i){var o,s=!1;gt(i)?o=i:ft(i)&&(s=!0,i=i[0]);var a=St(i);0===e&&null!==n?null==r?tr(t,n,a):er(t,n,a,r||null):1===e&&null!==n?er(t,n,a,r||null):2===e?function(e,t,n){var i=ir(e,t);i&&function(e,t,n,i){Ct(e)?e.removeChild(t,n,i):t.removeChild(n)}(e,i,t,n)}(t,a,s):3===e&&t.destroyNode(a),null!=o&&function(e,t,n,i,r){var o=n[7];o!==St(n)&&Wi(t,e,i,o,r);for(var s=10;s<n.length;s++){var a=n[s];ar(a[1],a,e,t,i,o)}}(t,e,o,n,r)}}function Ki(e,t,n,i){var r=qi(e.node,t);r&&ar(e,t,t[11],n?1:2,r,i)}function Xi(e,t){var n=e[9],i=n.indexOf(t);1024&t[2]&&Dt(t[3],-1),n.splice(i,1)}function Yi(e,t){if(!(e.length<=10)){var n=10+t,i=e[n];if(i){var r=i[17];null!==r&&r!==e&&Xi(r,i),t>0&&(e[n-1][4]=i[4]);var o=$e(e,10+t);Ki(i[1],i,!1,null);var s=o[19];null!==s&&s.detachView(o[1]),i[3]=null,i[4]=null,i[2]&=-129}return i}}function Ji(e,t){if(!(256&t[2])){var n=t[11];Ct(n)&&n.destroyNode&&ar(e,t,n,3,null,null),function(e){var t=e[13];if(!t)return $i(e[1],e);for(;t;){var n=null;if(ft(t))n=t[13];else{var i=t[10];i&&(n=i)}if(!n){for(;t&&!t[4]&&t!==e;)ft(t)&&$i(t[1],t),t=Zi(t,e);null===t&&(t=e),ft(t)&&$i(t[1],t),n=t&&t[4]}t=n}}(t)}}function Zi(e,t){var n;return ft(e)&&(n=e[6])&&2===n.type?Gi(n,e):e[3]===t?null:e[3]}function $i(e,t){if(!(256&t[2])){t[2]&=-129,t[2]|=256,function(e,t){var n;if(null!=e&&null!=(n=e.destroyHooks))for(var i=0;i<n.length;i+=2){var r=t[n[i]];if(!(r instanceof cn)){var o=n[i+1];if(Array.isArray(o))for(var s=0;s<o.length;s+=2)o[s+1].call(r[o[s]]);else o.call(r)}}}(e,t),function(e,t){var n=e.cleanup;if(null!==n){for(var i=t[7],r=0;r<n.length-1;r+=2)if("string"==typeof n[r]){var o=n[r+1],s="function"==typeof o?o(t):St(t[o]),a=i[n[r+2]],l=n[r+3];"boolean"==typeof l?s.removeEventListener(n[r],a,l):l>=0?i[l]():i[-l].unsubscribe(),r+=2}else n[r].call(i[n[r+1]]);t[7]=null}}(e,t);var n=t[6];n&&3===n.type&&Ct(t[11])&&t[11].destroy();var i=t[17];if(null!==i&&gt(t[3])){i!==t[3]&&Xi(i,t);var r=t[19];null!==r&&r.detachView(e)}}}function er(e,t,n,i){Ct(e)?e.insertBefore(t,n,i):t.insertBefore(n,i,!0)}function tr(e,t,n){Ct(e)?e.appendChild(t,n):t.appendChild(n)}function nr(e,t,n,i){null!==i?er(e,t,n,i):tr(e,t,n)}function ir(e,t){return Ct(e)?e.parentNode(t):t.parentNode}function rr(e,t,n,i){var r=function(e,t,n){for(var i=t.parent;null!=i&&(4===i.type||5===i.type);)i=(t=i).parent;if(null==i){var r=n[6];return 2===r.type?qi(r,n):n[0]}if(t&&5===t.type&&4&t.flags)return Lt(t,n).parentNode;if(2&i.flags){var o=e.data,s=o[o[i.index].directiveStart].encapsulation;if(s!==nt.ShadowDom&&s!==nt.Native)return null}return Lt(i,n)}(e,i,t);if(null!=r){var o=t[11],s=function(e,t){if(2===e.type){var n=Gi(e,t);return null===n?null:or(n.indexOf(t,10)-10,n)}return 4===e.type||5===e.type?Lt(e,t):null}(i.parent||t[6],t);if(Array.isArray(n))for(var a=0;a<n.length;a++)nr(o,r,n[a],s);else nr(o,r,n,s)}}function or(e,t){var n=10+e+1;if(n<t.length){var i=t[n],r=i[1].firstChild;if(null!==r)return function e(t,n){if(null!==n){var i=n.type;if(3===i)return Lt(n,t);if(0===i)return or(-1,t[n.index]);if(4===i||5===i){var r=n.child;if(null!==r)return e(t,r);var o=t[n.index];return gt(o)?or(-1,o):St(o)}var s=t[16],a=s[6],l=oi(s),u=a.projection[n.projection];return null!=u?e(l,u):e(t,n.next)}return null}(i,r)}return t[7]}function sr(e,t,n,i,r,o,s){for(;null!=n;){var a=i[n.index],l=n.type;s&&0===t&&(a&&Gn(St(a),i),n.flags|=4),64!=(64&n.flags)&&(4===l||5===l?(sr(e,t,n.child,i,r,o,!1),Wi(t,e,r,a,o)):1===l?lr(e,t,i,n,r,o):Wi(t,e,r,a,o)),n=s?n.projectionNext:n.next}}function ar(e,t,n,i,r,o){sr(n,i,e.node.child,t,r,o,!1)}function lr(e,t,n,i,r,o){var s=n[16],a=s[6].projection[i.projection];if(Array.isArray(a))for(var l=0;l<a.length;l++)Wi(t,e,r,a[l],o);else sr(e,t,a,s[3],r,o,!0)}function ur(e,t,n){Ct(e)?e.setAttribute(t,"style",n):t.style.cssText=n}function cr(e,t,n){Ct(e)?""===n?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n):t.className=n}var hr,dr,Ar,pr=function(){function e(t,n){p(this,e),this._lView=t,this._cdRefInjectingView=n,this._appRef=null,this._viewContainerRef=null}return g(e,[{key:"destroy",value:function(){if(this._appRef)this._appRef.detachView(this);else if(this._viewContainerRef){var e=this._viewContainerRef.indexOf(this);e>-1&&this._viewContainerRef.detach(e),this._viewContainerRef=null}Ji(this._lView[1],this._lView)}},{key:"onDestroy",value:function(e){wi(this._lView[1],this._lView,null,e)}},{key:"markForCheck",value:function(){Mi(this._cdRefInjectingView||this._lView)}},{key:"detach",value:function(){this._lView[2]&=-129}},{key:"reattach",value:function(){this._lView[2]|=128}},{key:"detectChanges",value:function(){Hi(this._lView[1],this._lView,this.context)}},{key:"checkNoChanges",value:function(){!function(e,t,n){Vt(!0);try{Hi(e,t,n)}finally{Vt(!1)}}(this._lView[1],this._lView,this.context)}},{key:"attachToViewContainerRef",value:function(e){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._viewContainerRef=e}},{key:"detachFromAppRef",value:function(){var e;this._appRef=null,ar(this._lView[1],e=this._lView,e[11],2,null,null)}},{key:"attachToAppRef",value:function(e){if(this._viewContainerRef)throw new Error("This view is already attached to a ViewContainer!");this._appRef=e}},{key:"rootNodes",get:function(){var e=this._lView;return null==e[0]?function e(t,i,r,o){for(var s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];null!==r;){var a=i[r.index];if(null!==a&&o.push(St(a)),gt(a))for(var l=10;l<a.length;l++){var u=a[l],c=u[1].firstChild;null!==c&&e(u[1],u,c,o)}var h=r.type;if(4===h||5===h)e(t,i,r.child,o);else if(1===h){var d=i[16],A=d[6].projection[r.projection];if(Array.isArray(A))o.push.apply(o,n(A));else{var p=oi(d);e(p[1],p,A,o,!0)}}r=s?r.projectionNext:r.next}return o}(e[1],e,e[6].child,[]):[]}},{key:"context",get:function(){return this._lView[8]}},{key:"destroyed",get:function(){return 256==(256&this._lView[2])}}]),e}(),fr=function(e){a(n,e);var t=u(n);function n(e){var i;return p(this,n),(i=t.call(this,e))._view=e,i}return g(n,[{key:"detectChanges",value:function(){Pi(this._view)}},{key:"checkNoChanges",value:function(){!function(e){Vt(!0);try{Pi(e)}finally{Vt(!1)}}(this._view)}},{key:"context",get:function(){return null}}]),n}(pr);function gr(e,t,n){return hr||(hr=function(e){a(n,e);var t=u(n);function n(){return p(this,n),t.apply(this,arguments)}return n}(e)),new hr(Lt(t,n))}function mr(e,t,n,i){return dr||(dr=function(e){a(n,e);var t=u(n);function n(e,i,r){var o;return p(this,n),(o=t.call(this))._declarationView=e,o._declarationTContainer=i,o.elementRef=r,o}return g(n,[{key:"createEmbeddedView",value:function(e){var t=this._declarationTContainer.tViews,n=di(this._declarationView,t,e,16,null,t.node);n[17]=this._declarationView[this._declarationTContainer.index];var i=this._declarationView[19];return null!==i&&(n[19]=i.createEmbeddedView(t)),pi(t,n,e),new pr(n)}}]),n}(e)),0===n.type?new dr(i,n,gr(t,n,i)):null}function yr(e,t,n,i){var r;Ar||(Ar=function(e){a(i,e);var n=u(i);function i(e,t,r){var o;return p(this,i),(o=n.call(this))._lContainer=e,o._hostTNode=t,o._hostView=r,o}return g(i,[{key:"clear",value:function(){for(;this.length>0;)this.remove(this.length-1)}},{key:"get",value:function(e){return null!==this._lContainer[8]&&this._lContainer[8][e]||null}},{key:"createEmbeddedView",value:function(e,t,n){var i=e.createEmbeddedView(t||{});return this.insert(i,n),i}},{key:"createComponent",value:function(e,t,n,i,r){var o=n||this.parentInjector;if(!r&&null==e.ngModule&&o){var s=o.get(Ye,null);s&&(r=s)}var a=e.create(o,i,void 0,r);return this.insert(a.hostView,t),a}},{key:"insert",value:function(e,t){var n=e._lView,i=n[1];if(e.destroyed)throw new Error("Cannot insert a destroyed View in a ViewContainer!");if(this.allocateContainerIfNeeded(),gt(n[3])){var r=this.indexOf(e);if(-1!==r)this.detach(r);else{var o=n[3],s=new Ar(o,o[6],o[3]);s.detach(s.indexOf(e))}}var a=this._adjustIndex(t);return function(e,t,n,i){var r=10+i,o=n.length;i>0&&(n[r-1][4]=t),i<o-10?(t[4]=n[r],Ze(n,10+i,t)):(n.push(t),t[4]=null),t[3]=n;var s=t[17];null!==s&&n!==s&&function(e,t){var n=e[9];t[16]!==t[3][3][16]&&(e[2]=!0),null===n?e[9]=[t]:n.push(t)}(s,t);var a=t[19];null!==a&&a.insertView(e),t[2]|=128}(i,n,this._lContainer,a),Ki(i,n,!0,or(a,this._lContainer)),e.attachToViewContainerRef(this),Ze(this._lContainer[8],a,e),e}},{key:"move",value:function(e,t){if(e.destroyed)throw new Error("Cannot move a destroyed View in a ViewContainer!");return this.insert(e,t)}},{key:"indexOf",value:function(e){var t=this._lContainer[8];return null!==t?t.indexOf(e):-1}},{key:"remove",value:function(e){this.allocateContainerIfNeeded();var t=this._adjustIndex(e,-1);!function(e,t){var n=Yi(e,t);n&&Ji(n[1],n)}(this._lContainer,t),$e(this._lContainer[8],t)}},{key:"detach",value:function(e){this.allocateContainerIfNeeded();var t=this._adjustIndex(e,-1),n=Yi(this._lContainer,t);return n&&null!=$e(this._lContainer[8],t)?new pr(n):null}},{key:"_adjustIndex",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return null==e?this.length+t:e}},{key:"allocateContainerIfNeeded",value:function(){null===this._lContainer[8]&&(this._lContainer[8]=[])}},{key:"element",get:function(){return gr(t,this._hostTNode,this._hostView)}},{key:"injector",get:function(){return new Mn(this._hostTNode,this._hostView)}},{key:"parentInjector",get:function(){var e=Bn(this._hostTNode,this._hostView),t=yn(e,this._hostView),n=function(e,t,n){if(n.parent&&-1!==n.parent.injectorIndex){for(var i=n.parent.injectorIndex,r=n.parent;null!=r.parent&&i==r.parent.injectorIndex;)r=r.parent;return r}for(var o=mn(e),s=t,a=t[6];o>1;)a=(s=s[15])[6],o--;return a}(e,this._hostView,this._hostTNode);return fn(e)&&null!=n?new Mn(n,t):new Mn(null,this._hostView)}},{key:"length",get:function(){return this._lContainer.length-10}}]),i}(e));var o=i[n.index];if(gt(o))r=o;else{var s;if(4===n.type)s=St(o);else if(s=i[11].createComment(""),_t(i)){var l=i[11],c=Lt(n,i);er(l,ir(l,c),s,function(e,t){return Ct(e)?e.nextSibling(t):t.nextSibling}(l,c))}else rr(i[1],i,s,n);i[n.index]=r=new Array(o,!0,!1,i,null,0,n,s,null,null),Ui(i,r)}return new Ar(r,n,i)}var vr=new Me("Set Injector scope."),wr={},_r={},br=[],Cr=void 0;function Er(){return void 0===Cr&&(Cr=new Xe),Cr}function Sr(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3?arguments[3]:void 0;return new Lr(e,n,t||Er(),i)}var Lr=function(){function e(t,n,i){var r=this,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;p(this,e),this.parent=i,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;var s=[];n&&Je(n,(function(e){return r.processProvider(e,t,n)})),Je([t],(function(e){return r.processInjectorType(e,[],s)})),this.records.set(He,Br(void 0,this));var a=this.records.get(vr);this.scope=null!=a?a.value:null,this.source=o||("object"==typeof t?null:ve(t))}return g(e,[{key:"destroy",value:function(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach((function(e){return e.ngOnDestroy()}))}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Pe,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ae.Default;this.assertNotDestroyed();var i,r=Ve(this);try{if(!(n&ae.SkipSelf)){var o=this.records.get(e);if(void 0===o){var s=("function"==typeof(i=e)||"object"==typeof i&&i instanceof Me)&&he(e);o=s&&this.injectableDefInScope(s)?Br(Tr(e),wr):null,this.records.set(e,o)}if(null!=o)return this.hydrate(e,o)}return(n&ae.Self?Er():this.parent).get(e,t=n&ae.Optional&&t===Pe?null:t)}catch(a){if("NullInjectorError"===a.name){if((a.ngTempTokenPath=a.ngTempTokenPath||[]).unshift(ve(e)),r)throw a;return function(e,t,n,i){var r=e.ngTempTokenPath;throw t.__source&&r.unshift(t.__source),e.message=function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;e=e&&"\n"===e.charAt(0)&&"\u0275"==e.charAt(1)?e.substr(2):e;var r=ve(t);if(Array.isArray(t))r=t.map(ve).join(" -> ");else if("object"==typeof t){var o=[];for(var s in t)if(t.hasOwnProperty(s)){var a=t[s];o.push(s+":"+("string"==typeof a?JSON.stringify(a):ve(a)))}r="{".concat(o.join(", "),"}")}return"".concat(n).concat(i?"("+i+")":"","[").concat(r,"]: ").concat(e.replace(Qe,"\n  "))}("\n"+e.message,r,"R3InjectorError",i),e.ngTokenPath=r,e.ngTempTokenPath=null,e}(a,e,0,this.source)}throw a}finally{Ve(r)}}},{key:"_resolveInjectorDefTypes",value:function(){var e=this;this.injectorDefTypes.forEach((function(t){return e.get(t)}))}},{key:"toString",value:function(){var e=[];return this.records.forEach((function(t,n){return e.push(ve(n))})),"R3Injector[".concat(e.join(", "),"]")}},{key:"assertNotDestroyed",value:function(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}},{key:"processInjectorType",value:function(e,t,n){var i=this;if(!(e=Ce(e)))return!1;var r=Ae(e),o=null==r&&e.ngModule||void 0,s=void 0===o?e:o,a=-1!==n.indexOf(s);if(void 0!==o&&(r=Ae(o)),null==r)return!1;if(null!=r.imports&&!a){var l;n.push(s);try{Je(r.imports,(function(e){i.processInjectorType(e,t,n)&&(void 0===l&&(l=[]),l.push(e))}))}finally{}if(void 0!==l)for(var u=function(e){var t=l[e],n=t.ngModule,r=t.providers;Je(r,(function(e){return i.processProvider(e,n,r||br)}))},c=0;c<l.length;c++)u(c)}this.injectorDefTypes.add(s),this.records.set(s,Br(r.factory,wr));var h=r.providers;if(null!=h&&!a){var d=e;Je(h,(function(e){return i.processProvider(e,d,h)}))}return void 0!==o&&void 0!==e.providers}},{key:"processProvider",value:function(e,t,i){var r=Ir(e=Ce(e))?e:Ce(e&&e.provide),s=function(e,t,i){return Nr(e)?Br(void 0,e.useValue):Br(function(e,t,i){var r,s=void 0;if(Ir(e)){var a=Ce(e);return At(a)||Tr(a)}if(Nr(e))s=function(){return Ce(e.useValue)};else if((r=e)&&r.useFactory)s=function(){return e.useFactory.apply(e,n(Ke(e.deps||[])))};else if(function(e){return!(!e||!e.useExisting)}(e))s=function(){return qe(Ce(e.useExisting))};else{var l=Ce(e&&(e.useClass||e.provide));if(l||function(e,t,n){var i="";throw e&&t&&(i=" - only instances of Provider and Type are allowed, got: [".concat(t.map((function(e){return e==n?"?"+n+"?":"..."})).join(", "),"]")),new Error("Invalid provider for the NgModule '".concat(ve(e),"'")+i)}(t,i,e),!function(e){return!!e.deps}(e))return At(l)||Tr(l);s=function(){return o(l,n(Ke(e.deps)))}}return s}(e,t,i),wr)}(e,t,i);if(Ir(e)||!0!==e.multi){var a=this.records.get(r);a&&void 0!==a.multi&&Wn()}else{var l=this.records.get(r);l?void 0===l.multi&&Wn():((l=Br(void 0,wr,!0)).factory=function(){return Ke(l.multi)},this.records.set(r,l)),r=e,l.multi.push(e)}this.records.set(r,s)}},{key:"hydrate",value:function(e,t){var n;return t.value===_r?function(e){throw new Error("Cannot instantiate cyclic dependency! "+e)}(ve(e)):t.value===wr&&(t.value=_r,t.value=t.factory()),"object"==typeof t.value&&t.value&&null!==(n=t.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(t.value),t.value}},{key:"injectableDefInScope",value:function(e){return!!e.providedIn&&("string"==typeof e.providedIn?"any"===e.providedIn||e.providedIn===this.scope:this.injectorDefTypes.has(e.providedIn))}},{key:"destroyed",get:function(){return this._destroyed}}]),e}();function Tr(e){var t=he(e),n=null!==t?t.factory:At(e);if(null!==n)return n;var i=Ae(e);if(null!==i)return i.factory;if(e instanceof Me)throw new Error("Token ".concat(ve(e)," is missing a \u0275prov definition."));if(e instanceof Function)return function(e){var t=e.length;if(t>0){var n=function(e,t){for(var n=[],i=0;i<e;i++)n.push("?");return n}(t);throw new Error("Can't resolve all parameters for ".concat(ve(e),": (").concat(n.join(", "),")."))}var i=function(e){var t=e&&(e[pe]||e[me]||e[ge]&&e[ge]());if(t){var n=function(e){if(e.hasOwnProperty("name"))return e.name;var t=(""+e).match(/^function\s*([^\s(]+)/);return null===t?"":t[1]}(e);return console.warn('DEPRECATED: DI is instantiating a token "'.concat(n,'" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "').concat(n,'" class.')),t}return null}(e);return null!==i?function(){return i.factory(e)}:function(){return new e}}(e);throw new Error("unreachable")}function Br(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return{factory:e,value:t,multi:n?[]:void 0}}function Nr(e){return null!==e&&"object"==typeof e&&ke in e}function Ir(e){return"function"==typeof e}var Or=function(e,t,n){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3?arguments[3]:void 0,r=Sr(e,t,n,i);return r._resolveInjectorDefTypes(),r}({name:n},t,e,n)},Fr=function(){var e=function(){function e(){p(this,e)}return g(e,null,[{key:"create",value:function(e,t){return Array.isArray(e)?Or(e,t,""):Or(e.providers,e.parent,e.name||"")}}]),e}();return e.THROW_IF_NOT_FOUND=Pe,e.NULL=new Xe,e.\u0275prov=ue({token:e,providedIn:"any",factory:function(){return qe(He)}}),e.__NG_ELEMENT_ID__=-1,e}();function xr(e,t,n){var i=n?e.styles:null,r=n?e.classes:null,o=0;if(null!==t)for(var s=0;s<t.length;s++){var a=t[s];"number"==typeof a?o=a:1==o?r=we(r,a):2==o&&(i=we(i,a+": "+t[++s]+";"))}n?e.styles=i:e.stylesWithoutHost=i,n?e.classes=r:e.classesWithoutHost=r}var Dr=null;function Rr(){if(!Dr){var e=Ne.Symbol;if(e&&e.iterator)Dr=e.iterator;else for(var t=Object.getOwnPropertyNames(Map.prototype),n=0;n<t.length;++n){var i=t[n];"entries"!==i&&"size"!==i&&Map.prototype[i]===Map.prototype.entries&&(Dr=i)}}return Dr}function Ur(e){return!!Mr(e)&&(Array.isArray(e)||!(e instanceof Map)&&Rr()in e)}function Mr(e){return null!==e&&("function"==typeof e||"object"==typeof e)}function Hr(e,t,n){var i,r=Mt();return function(e,t,n){return!Object.is(e[t],n)&&(e[t]=n,!0)}(r,Rt.lFrame.bindingIndex++,t)&&function(e,t,n,i,r,o,s,a){var l,u=Lt(t,n),c=t.inputs;null!=c&&(l=c[i])?(ji(e,n,l,i,r),yt(t)&&function(e,t){var n=Bt(t,e);16&n[2]||(n[2]|=64)}(n,t.index)):3===t.type&&(i=function(e){return"class"===e?"className":"for"===e?"htmlFor":"formaction"===e?"formAction":"innerHtml"===e?"innerHTML":"readonly"===e?"readOnly":"tabindex"===e?"tabIndex":e}(i),r=null!=s?s(r,t.tagName||"",i):r,Ct(o)?o.setProperty(u,i,r):dn(i)||(u.setProperty?u.setProperty(i,r):u[i]=r))}(Ht(),Tt((i=Rt.lFrame).tView,i.selectedIndex),r,e,t,r[11],n),Hr}function Pr(e,t,n,i,r){var o=r?"class":"style";ji(e,n,t.inputs[o],o,i)}function Qr(e,t,n,i){var r=Mt(),o=Ht(),s=20+e,a=r[11],l=r[s]=hi(t,a,Rt.lFrame.currentNamespace),u=o.firstCreatePass?function(e,t,n,i,r,o,s){var a=t.consts,l=Ft(a,o),u=Ai(t,n[6],e,3,r,l);return function(e,t,n,i){if(Ut()){var r=function(e,t,n){var i=e.directiveRegistry,r=null;if(i)for(var o=0;o<i.length;o++){var s=i[o];ti(n,s.selectors,!1)&&(r||(r=[]),Nn(Sn(n,t),e,s.type),wt(s)?(2&n.flags&&qn(n),Ti(e,n),r.unshift(s)):r.push(s))}return r}(e,t,n),o=null===i?null:{"":-1};if(null!==r){var s=0;!0,Ni(n,e.data.length,r.length);for(var a=0;a<r.length;a++){var l=r[a];l.providersResolver&&l.providersResolver(l)}Li(e,n,r.length);for(var u=!1,c=!1,h=0;h<r.length;h++){var d=r[h];n.mergedAttrs=An(n.mergedAttrs,d.hostAttrs),Ii(e,t,d),Bi(e.data.length-1,d,o),null!==d.contentQueries&&(n.flags|=8),null===d.hostBindings&&null===d.hostAttrs&&0===d.hostVars||(n.flags|=128),!u&&(d.onChanges||d.onInit||d.doCheck)&&((e.preOrderHooks||(e.preOrderHooks=[])).push(n.index-20),u=!0),c||!d.onChanges&&!d.doCheck||((e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(n.index-20),c=!0),Ci(e,d),s+=d.hostVars}!function(e,t){for(var n=t.directiveEnd,i=e.data,r=t.attrs,o=[],s=null,a=null,l=t.directiveStart;l<n;l++){var u=i[l],c=u.inputs,h=null===r||Yn(t)?null:xi(c,r);o.push(h),s=bi(c,l,s),a=bi(u.outputs,l,a)}null!==s&&(s.hasOwnProperty("class")&&(t.flags|=16),s.hasOwnProperty("style")&&(t.flags|=32)),t.initialInputs=o,t.inputs=s,t.outputs=a}(e,n),Ei(e,t,s)}o&&function(e,t,n){if(t)for(var i=e.localNames=[],r=0;r<t.length;r+=2){var o=n[t[r+1]];if(null==o)throw new Error("Export of name '".concat(t[r+1],"' not found!"));i.push(t[r],o)}}(n,i,o)}n.mergedAttrs=An(n.mergedAttrs,n.attrs)}(t,n,u,Ft(a,s)),null!==u.attrs&&xr(u,u.attrs,!1),null!==u.mergedAttrs&&xr(u,u.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,u),u}(e,o,r,0,t,n,i):o.data[s];Qt(u,!0);var c=u.mergedAttrs;null!==c&&hn(a,l,c);var h=u.classes;null!==h&&cr(a,l,h);var d=u.styles;null!==d&&ur(a,l,d),rr(o,r,l,u),0===Rt.lFrame.elementDepthCount&&Gn(l,r),Rt.lFrame.elementDepthCount++,vt(u)&&(function(e,t,n){Ut()&&(function(e,t,n,i){var r=n.directiveStart,o=n.directiveEnd;e.firstCreatePass||Sn(n,t),Gn(i,t);for(var s=n.initialInputs,a=r;a<o;a++){var l=e.data[a],u=wt(l);u&&Oi(t,n,l);var c=Dn(t,e,a,n);Gn(c,t),null!==s&&Fi(0,a-r,c,l,0,s),u&&(Bt(n.index,t)[8]=c)}}(e,t,n,Lt(n,t)),128==(128&n.flags)&&function(e,t,n){var i=n.directiveStart,r=n.directiveEnd,o=e.expandoInstructions,s=e.firstCreatePass,a=n.index-20,l=Rt.lFrame.currentDirectiveIndex;try{nn(a);for(var u=i;u<r;u++){var c=e.data[u],h=t[u];Gt(u),null!==c.hostBindings||0!==c.hostVars||null!==c.hostAttrs?Si(c,h):s&&o.push(null)}}finally{nn(-1),Gt(l)}}(e,t,n))}(o,r,u),function(e,t,n){if(mt(t))for(var i=t.directiveEnd,r=t.directiveStart;r<i;r++){var o=e.data[r];o.contentQueries&&o.contentQueries(1,n[r],r)}}(o,u,r)),null!==i&&function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Lt,i=t.localNames;if(null!==i)for(var r=t.index+1,o=0;o<i.length;o+=2){var s=i[o+1],a=-1===s?n(t,e):e[s];e[r++]=a}}(r,u)}function kr(){var e=Pt();kt()?Rt.lFrame.isParent=!1:Qt(e=e.parent,!1);var t=e;Rt.lFrame.elementDepthCount--;var n=Ht();n.firstCreatePass&&(rn(n,e),mt(e)&&n.queries.elementEnd(e)),null!=t.classesWithoutHost&&function(e){return 0!=(16&e.flags)}(t)&&Pr(n,t,Mt(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function(e){return 0!=(32&e.flags)}(t)&&Pr(n,t,Mt(),t.stylesWithoutHost,!1)}function zr(e){return!!e&&"function"==typeof e.then}function Vr(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3?arguments[3]:void 0,r=Mt(),o=Ht(),s=Pt();return function(e,t,n,i,r,o){var s=arguments.length>6&&void 0!==arguments[6]&&arguments[6],a=arguments.length>7?arguments[7]:void 0,l=vt(i),u=e.firstCreatePass&&(e.cleanup||(e.cleanup=[])),c=zi(t),h=!0;if(3===i.type){var d=Lt(i,t),A=a?a(d):it,p=A.target||d,f=c.length,g=a?function(e){return a(St(e[i.index])).target}:i.index;if(Ct(n)){var m=null;if(!a&&l&&(m=function(e,t,n,i){var r=e.cleanup;if(null!=r)for(var o=0;o<r.length-1;o+=2){var s=r[o];if(s===n&&r[o+1]===i){var a=t[7],l=r[o+2];return a.length>l?a[l]:null}"string"==typeof s&&(o+=2)}return null}(e,t,r,i.index)),null!==m)(m.__ngLastListenerFn__||m).__ngNextListenerFn__=o,m.__ngLastListenerFn__=o,h=!1;else{o=Gr(i,t,o,!1);var y=n.listen(A.name||p,r,o);c.push(o,y),u&&u.push(r,g,f,f+1)}}else o=Gr(i,t,o,!0),p.addEventListener(r,o,s),c.push(o),u&&u.push(r,g,f,s)}var v,w=i.outputs;if(h&&null!==w&&(v=w[r])){var _=v.length;if(_)for(var b=0;b<_;b+=2){var C=t[v[b]][v[b+1]].subscribe(o),E=c.length;c.push(o,C),u&&u.push(r,i.index,E,-(E+1))}}}(o,r,r[11],s,e,t,n,i),Vr}function jr(e,t,n){try{return!1!==t(n)}catch(i){return Vi(e,i),!1}}function Gr(e,t,n,i){return function r(o){if(o===Function)return n;var s=2&e.flags?Bt(e.index,t):t;0==(32&t[2])&&Mi(s);for(var a=jr(t,n,o),l=r.__ngNextListenerFn__;l;)a=jr(t,l,o)&&a,l=l.__ngNextListenerFn__;return i&&!1===a&&(o.preventDefault(),o.returnValue=!1),a}}function qr(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=Mt(),i=Ht(),r=e+20,o=i.firstCreatePass?Ai(i,n[6],e,3,null,null):i.data[r],s=n[r]=function(e,t){return Ct(t)?t.createText(e):t.createTextNode(e)}(t,n[11]);rr(i,n,s,o),Qt(o,!1)}function Wr(e,t){var n=Nt(e)[1],i=n.data.length-1;rn(n,{directiveStart:i,directiveEnd:i+1})}var Kr=function e(){p(this,e)},Xr=function(){function e(){p(this,e)}return g(e,[{key:"resolveComponentFactory",value:function(e){throw function(e){var t=Error("No component factory found for ".concat(ve(e),". Did you add it to @NgModule.entryComponents?"));return t.ngComponent=e,t}(e)}}]),e}(),Yr=function(){var e=function e(){p(this,e)};return e.NULL=new Xr,e}(),Jr=function(){var e=function e(t){p(this,e),this.nativeElement=t};return e.__NG_ELEMENT_ID__=function(){return Zr(e)},e}(),Zr=function(e){return gr(e,Pt(),Mt())},$r=function e(){p(this,e)},eo=function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e}({}),to=function(){var e=function e(){p(this,e)};return e.\u0275prov=ue({token:e,providedIn:"root",factory:function(){return null}}),e}(),no=new function e(t){p(this,e),this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}("10.0.4"),io=function(){function e(){p(this,e)}return g(e,[{key:"supports",value:function(e){return Ur(e)}},{key:"create",value:function(e){return new oo(e)}}]),e}(),ro=function(e,t){return t},oo=function(){function e(t){p(this,e),this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||ro}return g(e,[{key:"forEachItem",value:function(e){var t;for(t=this._itHead;null!==t;t=t._next)e(t)}},{key:"forEachOperation",value:function(e){for(var t=this._itHead,n=this._removalsHead,i=0,r=null;t||n;){var o=!n||t&&t.currentIndex<uo(n,i,r)?t:n,s=uo(o,i,r),a=o.currentIndex;if(o===n)i--,n=n._nextRemoved;else if(t=t._next,null==o.previousIndex)i++;else{r||(r=[]);var l=s-i,u=a-i;if(l!=u){for(var c=0;c<l;c++){var h=c<r.length?r[c]:r[c]=0,d=h+c;u<=d&&d<l&&(r[c]=h+1)}r[o.previousIndex]=u-l}}s!==a&&e(o,s,a)}}},{key:"forEachPreviousItem",value:function(e){var t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}},{key:"forEachAddedItem",value:function(e){var t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}},{key:"forEachMovedItem",value:function(e){var t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}},{key:"forEachRemovedItem",value:function(e){var t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}},{key:"forEachIdentityChange",value:function(e){var t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}},{key:"diff",value:function(e){if(null==e&&(e=[]),!Ur(e))throw new Error("Error trying to diff '".concat(ve(e),"'. Only arrays and iterables are allowed"));return this.check(e)?this:null}},{key:"onDestroy",value:function(){}},{key:"check",value:function(e){var t=this;this._reset();var n,i,r,o=this._itHead,s=!1;if(Array.isArray(e)){this.length=e.length;for(var a=0;a<this.length;a++)i=e[a],r=this._trackByFn(a,i),null!==o&&Object.is(o.trackById,r)?(s&&(o=this._verifyReinsertion(o,i,r,a)),Object.is(o.item,i)||this._addIdentityChange(o,i)):(o=this._mismatch(o,i,r,a),s=!0),o=o._next}else n=0,function(e,t){if(Array.isArray(e))for(var n=0;n<e.length;n++)t(e[n]);else for(var i,r=e[Rr()]();!(i=r.next()).done;)t(i.value)}(e,(function(e){r=t._trackByFn(n,e),null!==o&&Object.is(o.trackById,r)?(s&&(o=t._verifyReinsertion(o,e,r,n)),Object.is(o.item,e)||t._addIdentityChange(o,e)):(o=t._mismatch(o,e,r,n),s=!0),o=o._next,n++})),this.length=n;return this._truncate(o),this.collection=e,this.isDirty}},{key:"_reset",value:function(){if(this.isDirty){var e,t;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=t)e.previousIndex=e.currentIndex,t=e._nextMoved;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}},{key:"_mismatch",value:function(e,t,n,i){var r;return null===e?r=this._itTail:(r=e._prev,this._remove(e)),null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(n,i))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,r,i)):null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,r,i)):e=this._addAfter(new so(t,n),r,i),e}},{key:"_verifyReinsertion",value:function(e,t,n,i){var r=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==r?e=this._reinsertAfter(r,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}},{key:"_truncate",value:function(e){for(;null!==e;){var t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}},{key:"_reinsertAfter",value:function(e,t,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);var i=e._prevRemoved,r=e._nextRemoved;return null===i?this._removalsHead=r:i._nextRemoved=r,null===r?this._removalsTail=i:r._prevRemoved=i,this._insertAfter(e,t,n),this._addToMoves(e,n),e}},{key:"_moveAfter",value:function(e,t,n){return this._unlink(e),this._insertAfter(e,t,n),this._addToMoves(e,n),e}},{key:"_addAfter",value:function(e,t,n){return this._insertAfter(e,t,n),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}},{key:"_insertAfter",value:function(e,t,n){var i=null===t?this._itHead:t._next;return e._next=i,e._prev=t,null===i?this._itTail=e:i._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new lo),this._linkedRecords.put(e),e.currentIndex=n,e}},{key:"_remove",value:function(e){return this._addToRemovals(this._unlink(e))}},{key:"_unlink",value:function(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);var t=e._prev,n=e._next;return null===t?this._itHead=n:t._next=n,null===n?this._itTail=t:n._prev=t,e}},{key:"_addToMoves",value:function(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}},{key:"_addToRemovals",value:function(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new lo),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}},{key:"_addIdentityChange",value:function(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}},{key:"isDirty",get:function(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}}]),e}(),so=function e(t,n){p(this,e),this.item=t,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null},ao=function(){function e(){p(this,e),this._head=null,this._tail=null}return g(e,[{key:"add",value:function(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}},{key:"get",value:function(e,t){var n;for(n=this._head;null!==n;n=n._nextDup)if((null===t||t<=n.currentIndex)&&Object.is(n.trackById,e))return n;return null}},{key:"remove",value:function(e){var t=e._prevDup,n=e._nextDup;return null===t?this._head=n:t._nextDup=n,null===n?this._tail=t:n._prevDup=t,null===this._head}}]),e}(),lo=function(){function e(){p(this,e),this.map=new Map}return g(e,[{key:"put",value:function(e){var t=e.trackById,n=this.map.get(t);n||(n=new ao,this.map.set(t,n)),n.add(e)}},{key:"get",value:function(e,t){var n=this.map.get(e);return n?n.get(e,t):null}},{key:"remove",value:function(e){var t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}},{key:"clear",value:function(){this.map.clear()}},{key:"isEmpty",get:function(){return 0===this.map.size}}]),e}();function uo(e,t,n){var i=e.previousIndex;if(null===i)return i;var r=0;return n&&i<n.length&&(r=n[i]),i+t+r}var co=function(){function e(){p(this,e)}return g(e,[{key:"supports",value:function(e){return e instanceof Map||Mr(e)}},{key:"create",value:function(){return new ho}}]),e}(),ho=function(){function e(){p(this,e),this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}return g(e,[{key:"forEachItem",value:function(e){var t;for(t=this._mapHead;null!==t;t=t._next)e(t)}},{key:"forEachPreviousItem",value:function(e){var t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}},{key:"forEachChangedItem",value:function(e){var t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}},{key:"forEachAddedItem",value:function(e){var t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}},{key:"forEachRemovedItem",value:function(e){var t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}},{key:"diff",value:function(e){if(e){if(!(e instanceof Map||Mr(e)))throw new Error("Error trying to diff '".concat(ve(e),"'. Only maps and objects are allowed"))}else e=new Map;return this.check(e)?this:null}},{key:"onDestroy",value:function(){}},{key:"check",value:function(e){var t=this;this._reset();var n=this._mapHead;if(this._appendAfter=null,this._forEach(e,(function(e,i){if(n&&n.key===i)t._maybeAddToChanges(n,e),t._appendAfter=n,n=n._next;else{var r=t._getOrCreateRecordForKey(i,e);n=t._insertBeforeOrAppend(n,r)}})),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(var i=n;null!==i;i=i._nextRemoved)i===this._mapHead&&(this._mapHead=null),this._records.delete(i.key),i._nextRemoved=i._next,i.previousValue=i.currentValue,i.currentValue=null,i._prev=null,i._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}},{key:"_insertBeforeOrAppend",value:function(e,t){if(e){var n=e._prev;return t._next=e,t._prev=n,e._prev=t,n&&(n._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}},{key:"_getOrCreateRecordForKey",value:function(e,t){if(this._records.has(e)){var n=this._records.get(e);this._maybeAddToChanges(n,t);var i=n._prev,r=n._next;return i&&(i._next=r),r&&(r._prev=i),n._next=null,n._prev=null,n}var o=new Ao(e);return this._records.set(e,o),o.currentValue=t,this._addToAdditions(o),o}},{key:"_reset",value:function(){if(this.isDirty){var e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}},{key:"_maybeAddToChanges",value:function(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}},{key:"_addToAdditions",value:function(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}},{key:"_addToChanges",value:function(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}},{key:"_forEach",value:function(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach((function(n){return t(e[n],n)}))}},{key:"isDirty",get:function(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}}]),e}(),Ao=function e(t){p(this,e),this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null},po=function(){var e=function(){function e(t){p(this,e),this.factories=t}return g(e,[{key:"find",value:function(e){var t,n=this.factories.find((function(t){return t.supports(e)}));if(null!=n)return n;throw new Error("Cannot find a differ supporting object '".concat(e,"' of type '").concat((t=e).name||typeof t,"'"))}}],[{key:"create",value:function(t,n){if(null!=n){var i=n.factories.slice();t=t.concat(i)}return new e(t)}},{key:"extend",value:function(t){return{provide:e,useFactory:function(n){if(!n)throw new Error("Cannot extend IterableDiffers without a parent injector");return e.create(t,n)},deps:[[e,new se,new re]]}}}]),e}();return e.\u0275prov=ue({token:e,providedIn:"root",factory:function(){return new e([new io])}}),e}(),fo=function(){var e=function(){function e(t){p(this,e),this.factories=t}return g(e,[{key:"find",value:function(e){var t=this.factories.find((function(t){return t.supports(e)}));if(t)return t;throw new Error("Cannot find a differ supporting object '".concat(e,"'"))}}],[{key:"create",value:function(t,n){if(n){var i=n.factories.slice();t=t.concat(i)}return new e(t)}},{key:"extend",value:function(t){return{provide:e,useFactory:function(n){if(!n)throw new Error("Cannot extend KeyValueDiffers without a parent injector");return e.create(t,n)},deps:[[e,new se,new re]]}}}]),e}();return e.\u0275prov=ue({token:e,providedIn:"root",factory:function(){return new e([new co])}}),e}(),go=[new co],mo=new po([new io]),yo=new fo(go),vo=function(){var e=function e(){p(this,e)};return e.__NG_ELEMENT_ID__=function(){return wo(e,Jr)},e}(),wo=function(e,t){return mr(e,t,Pt(),Mt())},_o=function(){var e=function e(){p(this,e)};return e.__NG_ELEMENT_ID__=function(){return bo(e,Jr)},e}(),bo=function(e,t){return yr(e,t,Pt(),Mt())},Co={},Eo=function(e){a(n,e);var t=u(n);function n(e){var i;return p(this,n),(i=t.call(this)).ngModule=e,i}return g(n,[{key:"resolveComponentFactory",value:function(e){var t=dt(e);return new To(t,this.ngModule)}}]),n}(Yr);function So(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push({propName:e[n],templateName:n});return t}var Lo=new Me("SCHEDULER_TOKEN",{providedIn:"root",factory:function(){return wn}}),To=function(e){a(n,e);var t=u(n);function n(e,i){var r;return p(this,n),(r=t.call(this)).componentDef=e,r.ngModule=i,r.componentType=e.type,r.selector=e.selectors.map(ii).join(","),r.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],r.isBoundToModule=!!i,r}return g(n,[{key:"create",value:function(e,t,n,i){var r,o,s=(i=i||this.ngModule)?function(e,t){return{get:function(n,i,r){var o=e.get(n,Co,r);return o!==Co||i===Co?o:t.get(n,i,r)}}}(e,i.injector):e,a=s.get($r,Et),l=s.get(to,null),u=a.createRenderer(null,this.componentDef),c=this.componentDef.selectors[0][0]||"div",h=n?function(e,t,n){if(Ct(e))return e.selectRootElement(t,n===nt.ShadowDom);var i="string"==typeof t?e.querySelector(t):t;return i.textContent="",i}(u,n,this.componentDef.encapsulation):hi(c,a.createRenderer(null,this.componentDef),function(e){var t=e.toLowerCase();return"svg"===t?"http://www.w3.org/2000/svg":"math"===t?"http://www.w3.org/1998/MathML/":null}(c)),d=this.componentDef.onPush?576:528,A={components:[],scheduler:wn,clean:ki,playerHandler:null,flags:0},p=vi(0,-1,null,1,0,null,null,null,null,null),f=di(null,p,A,d,null,null,a,u,l,s);Xt(f,null);try{var g=function(e,t,n,i,r,o){var s=n[1];n[20]=e;var a=Ai(s,null,0,3,null,null),l=a.mergedAttrs=t.hostAttrs;null!==l&&(xr(a,l,!0),null!==e&&(hn(r,e,l),null!==a.classes&&cr(r,e,a.classes),null!==a.styles&&ur(r,e,a.styles)));var u=i.createRenderer(e,t),c=di(n,yi(t),null,t.onPush?64:16,n[20],a,i,u,void 0);return s.firstCreatePass&&(Nn(Sn(a,n),s,t.type),Ti(s,a),Ni(a,n.length,1)),Ui(n,c),n[20]=c}(h,this.componentDef,f,a,u);if(h)if(n)hn(u,h,["ng-version",no.full]);else{var m=function(e){for(var t=[],n=[],i=1,r=2;i<e.length;){var o=e[i];if("string"==typeof o)2===r?""!==o&&t.push(o,e[++i]):8===r&&n.push(o);else{if(!$n(r))break;r=o}i++}return{attrs:t,classes:n}}(this.componentDef.selectors[0]),y=m.attrs,v=m.classes;y&&hn(u,h,y),v&&v.length>0&&cr(u,h,v.join(" "))}if(o=Tt(p,0),void 0!==t)for(var w=o.projection=[],_=0;_<this.ngContentSelectors.length;_++){var b=t[_];w.push(null!=b?Array.from(b):null)}r=function(e,t,n,i,r){var o=n[1],s=function(e,t,n){var i=Pt();e.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),Li(e,i,1),Ii(e,t,n));var r=Dn(t,e,t.length-1,i);Gn(r,t);var o=Lt(i,t);return o&&Gn(o,t),r}(o,n,t);i.components.push(s),e[8]=s,r&&r.forEach((function(e){return e(s,t)})),t.contentQueries&&t.contentQueries(1,s,n.length-1);var a=Pt();if(o.firstCreatePass&&(null!==t.hostBindings||null!==t.hostAttrs)){nn(a.index-20);var l=n[1];Ci(l,t),Ei(l,n,t.hostVars),Si(t,s)}return s}(g,this.componentDef,f,A,[Wr]),pi(p,f,null)}finally{en()}var C=new Bo(this.componentType,r,gr(Jr,o,f),f,o);return p.node.child=o,C}},{key:"inputs",get:function(){return So(this.componentDef.inputs)}},{key:"outputs",get:function(){return So(this.componentDef.outputs)}}]),n}(Kr),Bo=function(e){a(n,e);var t=u(n);function n(e,i,r,o,s){var a,l,u,c;return p(this,n),(a=t.call(this)).location=r,a._rootLView=o,a._tNode=s,a.destroyCbs=[],a.instance=i,a.hostView=a.changeDetectorRef=new fr(o),l=o[1],u=o,null==(c=l.node)&&(l.node=c=_i(0,null,2,-1,null,null)),u[6]=c,a.componentType=e,a}return g(n,[{key:"destroy",value:function(){this.destroyCbs&&(this.destroyCbs.forEach((function(e){return e()})),this.destroyCbs=null,!this.hostView.destroyed&&this.hostView.destroy())}},{key:"onDestroy",value:function(e){this.destroyCbs&&this.destroyCbs.push(e)}},{key:"injector",get:function(){return new Mn(this._tNode,this._rootLView)}}]),n}(function(){return function e(){p(this,e)}}()),No=void 0,Io=["en",[["a","p"],["AM","PM"],No],[["AM","PM"],No,No],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],No,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],No,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",No,"{1} 'at' {0}",No],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(e){var t=Math.floor(Math.abs(e)),n=e.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===n?1:5}],Oo={};function Fo(e){return e in Oo||(Oo[e]=Ne.ng&&Ne.ng.common&&Ne.ng.common.locales&&Ne.ng.common.locales[e]),Oo[e]}var xo=function(e){return e[e.LocaleId=0]="LocaleId",e[e.DayPeriodsFormat=1]="DayPeriodsFormat",e[e.DayPeriodsStandalone=2]="DayPeriodsStandalone",e[e.DaysFormat=3]="DaysFormat",e[e.DaysStandalone=4]="DaysStandalone",e[e.MonthsFormat=5]="MonthsFormat",e[e.MonthsStandalone=6]="MonthsStandalone",e[e.Eras=7]="Eras",e[e.FirstDayOfWeek=8]="FirstDayOfWeek",e[e.WeekendRange=9]="WeekendRange",e[e.DateFormat=10]="DateFormat",e[e.TimeFormat=11]="TimeFormat",e[e.DateTimeFormat=12]="DateTimeFormat",e[e.NumberSymbols=13]="NumberSymbols",e[e.NumberFormats=14]="NumberFormats",e[e.CurrencyCode=15]="CurrencyCode",e[e.CurrencySymbol=16]="CurrencySymbol",e[e.CurrencyName=17]="CurrencyName",e[e.Currencies=18]="Currencies",e[e.Directionality=19]="Directionality",e[e.PluralCase=20]="PluralCase",e[e.ExtraData=21]="ExtraData",e}({});function Do(e){var t;null==(t=e)&&function(e,t,n,i){throw new Error("ASSERTION ERROR: Expected localeId to be defined"+" [Expected=> null != ".concat(t," <=Actual]"))}(0,t),"string"==typeof e&&e.toLowerCase().replace(/_/g,"-")}var Ro=new Map,Uo=function(e){a(n,e);var t=u(n);function n(e,i){var r;p(this,n),(r=t.call(this))._parent=i,r._bootstrapComponents=[],r.injector=h(r),r.destroyCbs=[],r.componentFactoryResolver=new Eo(h(r));var o=pt(e),s=e[De]||null;return s&&Do(s),r._bootstrapComponents=_n(o.bootstrap),r._r3Injector=Sr(e,i,[{provide:Ye,useValue:h(r)},{provide:Yr,useValue:r.componentFactoryResolver}],ve(e)),r._r3Injector._resolveInjectorDefTypes(),r.instance=r.get(e),r}return g(n,[{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Fr.THROW_IF_NOT_FOUND,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ae.Default;return e===Fr||e===Ye||e===He?this:this._r3Injector.get(e,t,n)}},{key:"destroy",value:function(){var e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach((function(e){return e()})),this.destroyCbs=null}},{key:"onDestroy",value:function(e){this.destroyCbs.push(e)}}]),n}(Ye),Mo=function(e){a(n,e);var t=u(n);function n(e){var i;return p(this,n),(i=t.call(this)).moduleType=e,null!==pt(e)&&function e(t){if(null!==t.\u0275mod.id){var n=t.\u0275mod.id;(function(e,t,n){if(t&&t!==n)throw new Error("Duplicate module registered for ".concat(e," - ").concat(ve(t)," vs ").concat(ve(t.name)))})(n,Ro.get(n),t),Ro.set(n,t)}var i=t.\u0275mod.imports;i instanceof Function&&(i=i()),i&&i.forEach((function(t){return e(t)}))}(e),i}return g(n,[{key:"create",value:function(e){return new Uo(this.moduleType,e)}}]),n}(function(){return function e(){p(this,e)}}()),Ho=function(e){a(n,e);var t=u(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return p(this,n),(e=t.call(this)).__isAsync=i,e}return g(n,[{key:"emit",value:function(e){s(A(n.prototype),"next",this).call(this,e)}},{key:"subscribe",value:function(e,t,i){var r,o=function(e){return null},a=function(){return null};e&&"object"==typeof e?(r=this.__isAsync?function(t){setTimeout((function(){return e.next(t)}))}:function(t){e.next(t)},e.error&&(o=this.__isAsync?function(t){setTimeout((function(){return e.error(t)}))}:function(t){e.error(t)}),e.complete&&(a=this.__isAsync?function(){setTimeout((function(){return e.complete()}))}:function(){e.complete()})):(r=this.__isAsync?function(t){setTimeout((function(){return e(t)}))}:function(t){e(t)},t&&(o=this.__isAsync?function(e){setTimeout((function(){return t(e)}))}:function(e){t(e)}),i&&(a=this.__isAsync?function(){setTimeout((function(){return i()}))}:function(){i()}));var l=s(A(n.prototype),"subscribe",this).call(this,r,o,a);return e instanceof C&&e.add(l),l}}]),n}(M);function Po(){return this._results[Rr()]()}var Qo=function(){function e(){p(this,e),this.dirty=!0,this._results=[],this.changes=new Ho,this.length=0;var t=Rr(),n=e.prototype;n[t]||(n[t]=Po)}return g(e,[{key:"map",value:function(e){return this._results.map(e)}},{key:"filter",value:function(e){return this._results.filter(e)}},{key:"find",value:function(e){return this._results.find(e)}},{key:"reduce",value:function(e,t){return this._results.reduce(e,t)}},{key:"forEach",value:function(e){this._results.forEach(e)}},{key:"some",value:function(e){return this._results.some(e)}},{key:"toArray",value:function(){return this._results.slice()}},{key:"toString",value:function(){return this._results.toString()}},{key:"reset",value:function(e){this._results=function e(t,n){void 0===n&&(n=t);for(var i=0;i<t.length;i++){var r=t[i];Array.isArray(r)?(n===t&&(n=t.slice(0,i)),e(r,n)):n!==t&&n.push(r)}return n}(e),this.dirty=!1,this.length=this._results.length,this.last=this._results[this.length-1],this.first=this._results[0]}},{key:"notifyOnChanges",value:function(){this.changes.emit(this)}},{key:"setDirty",value:function(){this.dirty=!0}},{key:"destroy",value:function(){this.changes.complete(),this.changes.unsubscribe()}}]),e}(),ko=function(){function e(t){p(this,e),this.queryList=t,this.matches=null}return g(e,[{key:"clone",value:function(){return new e(this.queryList)}},{key:"setDirty",value:function(){this.queryList.setDirty()}}]),e}(),zo=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];p(this,e),this.queries=t}return g(e,[{key:"createEmbeddedView",value:function(t){var n=t.queries;if(null!==n){for(var i=null!==t.contentQueries?t.contentQueries[0]:n.length,r=[],o=0;o<i;o++){var s=n.getByIndex(o);r.push(this.queries[s.indexInDeclarationView].clone())}return new e(r)}return null}},{key:"insertView",value:function(e){this.dirtyQueriesWithMatches(e)}},{key:"detachView",value:function(e){this.dirtyQueriesWithMatches(e)}},{key:"dirtyQueriesWithMatches",value:function(e){for(var t=0;t<this.queries.length;t++)null!==Xo(e,t).matches&&this.queries[t].setDirty()}}]),e}(),Vo=function e(t,n,i){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;p(this,e),this.predicate=t,this.descendants=n,this.isStatic=i,this.read=r},jo=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];p(this,e),this.queries=t}return g(e,[{key:"elementStart",value:function(e,t){for(var n=0;n<this.queries.length;n++)this.queries[n].elementStart(e,t)}},{key:"elementEnd",value:function(e){for(var t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}},{key:"embeddedTView",value:function(t){for(var n=null,i=0;i<this.length;i++){var r=null!==n?n.length:0,o=this.getByIndex(i).embeddedTView(t,r);o&&(o.indexInDeclarationView=i,null!==n?n.push(o):n=[o])}return null!==n?new e(n):null}},{key:"template",value:function(e,t){for(var n=0;n<this.queries.length;n++)this.queries[n].template(e,t)}},{key:"getByIndex",value:function(e){return this.queries[e]}},{key:"track",value:function(e){this.queries.push(e)}},{key:"length",get:function(){return this.queries.length}}]),e}(),Go=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;p(this,e),this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}return g(e,[{key:"elementStart",value:function(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}},{key:"elementEnd",value:function(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}},{key:"template",value:function(e,t){this.elementStart(e,t)}},{key:"embeddedTView",value:function(t,n){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,n),new e(this.metadata)):null}},{key:"isApplyingToNode",value:function(e){if(this._appliesToNextNode&&!1===this.metadata.descendants){for(var t=this._declarationNodeIndex,n=e.parent;null!==n&&4===n.type&&n.index!==t;)n=n.parent;return t===(null!==n?n.index:-1)}return this._appliesToNextNode}},{key:"matchTNode",value:function(e,t){if(Array.isArray(this.metadata.predicate))for(var n=this.metadata.predicate,i=0;i<n.length;i++)this.matchTNodeWithReadOption(e,t,qo(t,n[i]));else{var r=this.metadata.predicate;r===vo?0===t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,xn(t,e,r,!1,!1))}}},{key:"matchTNodeWithReadOption",value:function(e,t,n){if(null!==n){var i=this.metadata.read;if(null!==i)if(i===Jr||i===_o||i===vo&&0===t.type)this.addMatch(t.index,-2);else{var r=xn(t,e,i,!1,!1);null!==r&&this.addMatch(t.index,r)}else this.addMatch(t.index,n)}}},{key:"addMatch",value:function(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}]),e}();function qo(e,t){var n=e.localNames;if(null!==n)for(var i=0;i<n.length;i+=2)if(n[i]===t)return n[i+1];return null}function Wo(e,t,n,i){return-1===n?function(e,t){return 3===e.type||4===e.type?gr(Jr,e,t):0===e.type?mr(vo,Jr,e,t):null}(t,e):-2===n?function(e,t,n){return n===Jr?gr(Jr,t,e):n===vo?mr(vo,Jr,t,e):n===_o?yr(_o,Jr,t,e):void 0}(e,t,i):Dn(e,e[1],n,t)}function Ko(e,t,n,i){var r=t[19].queries[i];if(null===r.matches){for(var o=e.data,s=n.matches,a=[],l=0;l<s.length;l+=2){var u=s[l];a.push(u<0?null:Wo(t,o[u],s[l+1],n.metadata.read))}r.matches=a}return r.matches}function Xo(e,t){return e.queries.getByIndex(t)}var Yo=new Me("Application Initializer"),Jo=function(){var e=function(){function e(t){var n=this;p(this,e),this.appInits=t,this.initialized=!1,this.done=!1,this.donePromise=new Promise((function(e,t){n.resolve=e,n.reject=t}))}return g(e,[{key:"runInitializers",value:function(){var e=this;if(!this.initialized){var t=[],n=function(){e.done=!0,e.resolve()};if(this.appInits)for(var i=0;i<this.appInits.length;i++){var r=this.appInits[i]();zr(r)&&t.push(r)}Promise.all(t).then((function(){n()})).catch((function(t){e.reject(t)})),0===t.length&&n(),this.initialized=!0}}}]),e}();return e.\u0275fac=function(t){return new(t||e)(qe(Yo,8))},e.\u0275prov=ue({token:e,factory:e.\u0275fac}),e}(),Zo=new Me("AppId"),$o={provide:Zo,useFactory:function(){return"".concat(es()).concat(es()).concat(es())},deps:[]};function es(){return String.fromCharCode(97+Math.floor(25*Math.random()))}var ts=new Me("Platform Initializer"),ns=new Me("Platform ID"),is=new Me("appBootstrapListener"),rs=function(){var e=function(){function e(){p(this,e)}return g(e,[{key:"log",value:function(e){console.log(e)}},{key:"warn",value:function(e){console.warn(e)}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=ue({token:e,factory:e.\u0275fac}),e}(),os=new Me("LocaleId"),ss=new Me("DefaultCurrencyCode"),as=function e(t,n){p(this,e),this.ngModuleFactory=t,this.componentFactories=n},ls=function(e){return new Mo(e)},us=ls,cs=function(e){return Promise.resolve(ls(e))},hs=function(e){var t=ls(e),n=_n(pt(e).declarations).reduce((function(e,t){var n=dt(t);return n&&e.push(new To(n)),e}),[]);return new as(t,n)},ds=hs,As=function(e){return Promise.resolve(hs(e))},ps=function(){var e=function(){function e(){p(this,e),this.compileModuleSync=us,this.compileModuleAsync=cs,this.compileModuleAndAllComponentsSync=ds,this.compileModuleAndAllComponentsAsync=As}return g(e,[{key:"clearCache",value:function(){}},{key:"clearCacheFor",value:function(e){}},{key:"getModuleId",value:function(e){}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=ue({token:e,factory:e.\u0275fac}),e}(),fs=Promise.resolve(0);function gs(e){"undefined"==typeof Zone?fs.then((function(){e&&e.apply(null,null)})):Zone.current.scheduleMicroTask("scheduleMicrotask",e)}var ms=function(){function e(t){var n,i,r=t.enableLongStackTrace,o=void 0!==r&&r,s=t.shouldCoalesceEventChangeDetection,a=void 0!==s&&s;if(p(this,e),this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ho(!1),this.onMicrotaskEmpty=new Ho(!1),this.onStable=new Ho(!1),this.onError=new Ho(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched(),this._nesting=0,this._outer=this._inner=Zone.current,Zone.wtfZoneSpec&&(this._inner=this._inner.fork(Zone.wtfZoneSpec)),Zone.TaskTrackingZoneSpec&&(this._inner=this._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(this._inner=this._inner.fork(Zone.longStackTraceZoneSpec)),this.shouldCoalesceEventChangeDetection=a,this.lastRequestAnimationFrameId=-1,this.nativeRequestAnimationFrame=function(){var e=Ne.requestAnimationFrame,t=Ne.cancelAnimationFrame;if("undefined"!=typeof Zone&&e&&t){var n=e[Zone.__symbol__("OriginalDelegate")];n&&(e=n);var i=t[Zone.__symbol__("OriginalDelegate")];i&&(t=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,i=!!(n=this).shouldCoalesceEventChangeDetection&&n.nativeRequestAnimationFrame&&function(){!function(e){-1===e.lastRequestAnimationFrameId&&(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(Ne,(function(){e.fakeTopEventTask||(e.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",(function(){e.lastRequestAnimationFrameId=-1,_s(e),ws(e)}),void 0,(function(){}),(function(){}))),e.fakeTopEventTask.invoke()})),_s(e))}(n)},n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0,maybeDelayChangeDetection:i},onInvokeTask:function(e,t,r,o,s,a){try{return bs(n),e.invokeTask(r,o,s,a)}finally{i&&"eventTask"===o.type&&i(),Cs(n)}},onInvoke:function(e,t,i,r,o,s,a){try{return bs(n),e.invoke(i,r,o,s,a)}finally{Cs(n)}},onHasTask:function(e,t,i,r){e.hasTask(i,r),t===i&&("microTask"==r.change?(n._hasPendingMicrotasks=r.microTask,_s(n),ws(n)):"macroTask"==r.change&&(n.hasPendingMacrotasks=r.macroTask))},onHandleError:function(e,t,i,r){return e.handleError(i,r),n.runOutsideAngular((function(){return n.onError.emit(r)})),!1}})}return g(e,[{key:"run",value:function(e,t,n){return this._inner.run(e,t,n)}},{key:"runTask",value:function(e,t,n,i){var r=this._inner,o=r.scheduleEventTask("NgZoneEvent: "+i,e,vs,ys,ys);try{return r.runTask(o,t,n)}finally{r.cancelTask(o)}}},{key:"runGuarded",value:function(e,t,n){return this._inner.runGuarded(e,t,n)}},{key:"runOutsideAngular",value:function(e){return this._outer.run(e)}}],[{key:"isInAngularZone",value:function(){return!0===Zone.current.get("isAngularZone")}},{key:"assertInAngularZone",value:function(){if(!e.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}},{key:"assertNotInAngularZone",value:function(){if(e.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}}]),e}();function ys(){}var vs={};function ws(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular((function(){return e.onStable.emit(null)}))}finally{e.isStable=!0}}}function _s(e){e.hasPendingMicrotasks=!!(e._hasPendingMicrotasks||e.shouldCoalesceEventChangeDetection&&-1!==e.lastRequestAnimationFrameId)}function bs(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function Cs(e){e._nesting--,ws(e)}var Es,Ss=function(){function e(){p(this,e),this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ho,this.onMicrotaskEmpty=new Ho,this.onStable=new Ho,this.onError=new Ho}return g(e,[{key:"run",value:function(e,t,n){return e.apply(t,n)}},{key:"runGuarded",value:function(e,t,n){return e.apply(t,n)}},{key:"runOutsideAngular",value:function(e){return e()}},{key:"runTask",value:function(e,t,n,i){return e.apply(t,n)}}]),e}(),Ls=function(){var e=function(){function e(t){var n=this;p(this,e),this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run((function(){n.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")}))}return g(e,[{key:"_watchAngularEvents",value:function(){var e=this;this._ngZone.onUnstable.subscribe({next:function(){e._didWork=!0,e._isZoneStable=!1}}),this._ngZone.runOutsideAngular((function(){e._ngZone.onStable.subscribe({next:function(){ms.assertNotInAngularZone(),gs((function(){e._isZoneStable=!0,e._runCallbacksIfReady()}))}})}))}},{key:"increasePendingRequestCount",value:function(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}},{key:"decreasePendingRequestCount",value:function(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}},{key:"isStable",value:function(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}},{key:"_runCallbacksIfReady",value:function(){var e=this;if(this.isStable())gs((function(){for(;0!==e._callbacks.length;){var t=e._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(e._didWork)}e._didWork=!1}));else{var t=this.getPendingTasks();this._callbacks=this._callbacks.filter((function(e){return!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)})),this._didWork=!0}}},{key:"getPendingTasks",value:function(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map((function(e){return{source:e.source,creationLocation:e.creationLocation,data:e.data}})):[]}},{key:"addCallback",value:function(e,t,n){var i=this,r=-1;t&&t>0&&(r=setTimeout((function(){i._callbacks=i._callbacks.filter((function(e){return e.timeoutId!==r})),e(i._didWork,i.getPendingTasks())}),t)),this._callbacks.push({doneCb:e,timeoutId:r,updateCb:n})}},{key:"whenStable",value:function(e,t,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(e,t,n),this._runCallbacksIfReady()}},{key:"getPendingRequestCount",value:function(){return this._pendingCount}},{key:"findProviders",value:function(e,t,n){return[]}}]),e}();return e.\u0275fac=function(t){return new(t||e)(qe(ms))},e.\u0275prov=ue({token:e,factory:e.\u0275fac}),e}(),Ts=function(){var e=function(){function e(){p(this,e),this._applications=new Map,Bs.addToWindow(this)}return g(e,[{key:"registerApplication",value:function(e,t){this._applications.set(e,t)}},{key:"unregisterApplication",value:function(e){this._applications.delete(e)}},{key:"unregisterAllApplications",value:function(){this._applications.clear()}},{key:"getTestability",value:function(e){return this._applications.get(e)||null}},{key:"getAllTestabilities",value:function(){return Array.from(this._applications.values())}},{key:"getAllRootElements",value:function(){return Array.from(this._applications.keys())}},{key:"findTestabilityInTree",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return Bs.findTestabilityInTree(this,e,t)}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=ue({token:e,factory:e.\u0275fac}),e}(),Bs=new(function(){function e(){p(this,e)}return g(e,[{key:"addToWindow",value:function(e){}},{key:"findTestabilityInTree",value:function(e,t,n){return null}}]),e}()),Ns=new Me("AllowMultipleToken");function Is(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i="Platform: "+t,r=new Me(i);return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],o=Os();if(!o||o.injector.get(Ns,!1))if(e)e(n.concat(t).concat({provide:r,useValue:!0}));else{var s=n.concat(t).concat({provide:r,useValue:!0},{provide:vr,useValue:"platform"});!function(e){if(Es&&!Es.destroyed&&!Es.injector.get(Ns,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");Es=e.get(Fs);var t=e.get(ts,null);t&&t.forEach((function(e){return e()}))}(Fr.create({providers:s,name:i}))}return function(e){var t=Os();if(!t)throw new Error("No platform exists!");if(!t.injector.get(e,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return t}(r)}}function Os(){return Es&&!Es.destroyed?Es:null}var Fs=function(){var e=function(){function e(t){p(this,e),this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}return g(e,[{key:"bootstrapModuleFactory",value:function(e,t){var n,i,r=this,o=(n=t?t.ngZone:void 0,i=t&&t.ngZoneEventCoalescing||!1,"noop"===n?new Ss:("zone.js"===n?void 0:n)||new ms({enableLongStackTrace:jn(),shouldCoalesceEventChangeDetection:i})),s=[{provide:ms,useValue:o}];return o.run((function(){var t=Fr.create({providers:s,parent:r.injector,name:e.moduleType.name}),n=e.create(t),i=n.injector.get(kn,null);if(!i)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return n.onDestroy((function(){return Us(r._modules,n)})),o.runOutsideAngular((function(){return o.onError.subscribe({next:function(e){i.handleError(e)}})})),function(e,t,i){try{var o=((s=n.injector.get(Jo)).runInitializers(),s.donePromise.then((function(){return Do(n.injector.get(os,"en-US")||"en-US"),r._moduleDoBootstrap(n),n})));return zr(o)?o.catch((function(n){throw t.runOutsideAngular((function(){return e.handleError(n)})),n})):o}catch(a){throw t.runOutsideAngular((function(){return e.handleError(a)})),a}var s}(i,o)}))}},{key:"bootstrapModule",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=xs({},n);return function(e,t,n){var i=new Mo(n);return Promise.resolve(i)}(0,0,e).then((function(e){return t.bootstrapModuleFactory(e,i)}))}},{key:"_moduleDoBootstrap",value:function(e){var t=e.injector.get(Rs);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach((function(e){return t.bootstrap(e)}));else{if(!e.instance.ngDoBootstrap)throw new Error("The module ".concat(ve(e.instance.constructor),' was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.'));e.instance.ngDoBootstrap(t)}this._modules.push(e)}},{key:"onDestroy",value:function(e){this._destroyListeners.push(e)}},{key:"destroy",value:function(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach((function(e){return e.destroy()})),this._destroyListeners.forEach((function(e){return e()})),this._destroyed=!0}},{key:"injector",get:function(){return this._injector}},{key:"destroyed",get:function(){return this._destroyed}}]),e}();return e.\u0275fac=function(t){return new(t||e)(qe(Fr))},e.\u0275prov=ue({token:e,factory:e.\u0275fac}),e}();function xs(e,t){return Array.isArray(t)?t.reduce(xs,e):Object.assign(Object.assign({},e),t)}var Ds,Rs=((Ds=function(){function e(t,n,i,r,o,s){var a=this;p(this,e),this._zone=t,this._console=n,this._injector=i,this._exceptionHandler=r,this._componentFactoryResolver=o,this._initStatus=s,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._enforceNoNewChanges=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._enforceNoNewChanges=jn(),this._zone.onMicrotaskEmpty.subscribe({next:function(){a._zone.run((function(){a.tick()}))}});var l=new O((function(e){a._stable=a._zone.isStable&&!a._zone.hasPendingMacrotasks&&!a._zone.hasPendingMicrotasks,a._zone.runOutsideAngular((function(){e.next(a._stable),e.complete()}))})),u=new O((function(e){var t;a._zone.runOutsideAngular((function(){t=a._zone.onStable.subscribe((function(){ms.assertNotInAngularZone(),gs((function(){a._stable||a._zone.hasPendingMacrotasks||a._zone.hasPendingMicrotasks||(a._stable=!0,e.next(!0))}))}))}));var n=a._zone.onUnstable.subscribe((function(){ms.assertInAngularZone(),a._stable&&(a._stable=!1,a._zone.runOutsideAngular((function(){e.next(!1)})))}));return function(){t.unsubscribe(),n.unsubscribe()}}));this.isStable=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i,r=Number.POSITIVE_INFINITY,o=null,s=t[t.length-1];return(i=s)&&"function"==typeof i.schedule?(o=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(r=t.pop())):"number"==typeof s&&(r=t.pop()),null===o&&1===t.length&&t[0]instanceof O?t[0]:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.POSITIVE_INFINITY;return function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.POSITIVE_INFINITY;return"function"==typeof n?function(r){return r.pipe(e((function(e,i){return(r=t(e,i),r instanceof O?r:new O(z(r))).pipe(function(e,t){return function(t){return t.lift(new j(e,void 0))}}((function(t,r){return n(e,t,i,r)})));var r}),i))}:("number"==typeof n&&(i=n),function(e){return e.lift(new q(t,i))})}(N,e)}(r)(function(e,t){return t?function(e,t){return new O((function(n){var i=new C,r=0;return i.add(t.schedule((function(){r!==e.length?(n.next(e[r++]),n.closed||i.add(this.schedule())):n.complete()}))),i}))}(e,t):new O(Q(e))}(t,o))}(l,u.pipe((function(e){return K()((t=ee,function(e){var n;n="function"==typeof t?t:function(){return t};var i=Object.create(e,Z);return i.source=e,i.subjectFactory=n,i})(e));var t})))}return g(e,[{key:"bootstrap",value:function(e,t){var n,i=this;if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");n=e instanceof Kr?e:this._componentFactoryResolver.resolveComponentFactory(e),this.componentTypes.push(n.componentType);var r=n.isBoundToModule?void 0:this._injector.get(Ye),o=n.create(Fr.NULL,[],t||n.selector,r);o.onDestroy((function(){i._unloadComponent(o)}));var s=o.injector.get(Ls,null);return s&&o.injector.get(Ts).registerApplication(o.location.nativeElement,s),this._loadComponent(o),jn()&&this._console.log("Angular is running in development mode. Call enableProdMode() to enable production mode."),o}},{key:"tick",value:function(){var e=this;if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;var n,i=t(this._views);try{for(i.s();!(n=i.n()).done;)n.value.detectChanges()}catch(s){i.e(s)}finally{i.f()}if(this._enforceNoNewChanges){var r,o=t(this._views);try{for(o.s();!(r=o.n()).done;)r.value.checkNoChanges()}catch(s){o.e(s)}finally{o.f()}}}catch(a){this._zone.runOutsideAngular((function(){return e._exceptionHandler.handleError(a)}))}finally{this._runningTick=!1}}},{key:"attachView",value:function(e){var t=e;this._views.push(t),t.attachToAppRef(this)}},{key:"detachView",value:function(e){var t=e;Us(this._views,t),t.detachFromAppRef()}},{key:"_loadComponent",value:function(e){this.attachView(e.hostView),this.tick(),this.components.push(e),this._injector.get(is,[]).concat(this._bootstrapListeners).forEach((function(t){return t(e)}))}},{key:"_unloadComponent",value:function(e){this.detachView(e.hostView),Us(this.components,e)}},{key:"ngOnDestroy",value:function(){this._views.slice().forEach((function(e){return e.destroy()}))}},{key:"viewCount",get:function(){return this._views.length}}]),e}()).\u0275fac=function(e){return new(e||Ds)(qe(ms),qe(rs),qe(Fr),qe(kn),qe(Yr),qe(Jo))},Ds.\u0275prov=ue({token:Ds,factory:Ds.\u0275fac}),Ds);function Us(e,t){var n=e.indexOf(t);n>-1&&e.splice(n,1)}var Ms=Is(null,"core",[{provide:ns,useValue:"unknown"},{provide:Fs,deps:[Fr]},{provide:Ts,deps:[]},{provide:rs,deps:[]}]),Hs=[{provide:Rs,useClass:Rs,deps:[ms,rs,Fr,kn,Yr,Jo]},{provide:Lo,deps:[ms],useFactory:function(e){var t=[];return e.onStable.subscribe((function(){for(;t.length;)t.pop()()})),function(e){t.push(e)}}},{provide:Jo,useClass:Jo,deps:[[new re,Yo]]},{provide:ps,useClass:ps,deps:[]},$o,{provide:po,useFactory:function(){return mo},deps:[]},{provide:fo,useFactory:function(){return yo},deps:[]},{provide:os,useFactory:function(e){return Do(e=e||"undefined"!=typeof $localize&&$localize.locale||"en-US"),e},deps:[[new ie(os),new re,new se]]},{provide:ss,useValue:"USD"}],Ps=function(){var e=function e(t){p(this,e)};return e.\u0275mod=ct({type:e}),e.\u0275inj=ce({factory:function(t){return new(t||e)(qe(Rs))},providers:Hs}),e}(),Qs=null;function ks(){return Qs}var zs,Vs,js,Gs,qs,Ws,Ks=new Me("DocumentToken"),Xs=function(e){return e[e.Zero=0]="Zero",e[e.One=1]="One",e[e.Two=2]="Two",e[e.Few=3]="Few",e[e.Many=4]="Many",e[e.Other=5]="Other",e}({}),Ys=function e(){p(this,e)},Js=((Vs=function(e){a(n,e);var t=u(n);function n(e){var i;return p(this,n),(i=t.call(this)).locale=e,i}return g(n,[{key:"getPluralCategory",value:function(e,t){switch(function(e){return function(e){var t=function(e){return e.toLowerCase().replace(/_/g,"-")}(e),n=Fo(t);if(n)return n;var i=t.split("-")[0];if(n=Fo(i))return n;if("en"===i)return Io;throw new Error('Missing locale data for the locale "'.concat(e,'".'))}(e)[xo.PluralCase]}(t||this.locale)(e)){case Xs.Zero:return"zero";case Xs.One:return"one";case Xs.Two:return"two";case Xs.Few:return"few";case Xs.Many:return"many";default:return"other"}}}]),n}(Ys)).\u0275fac=function(e){return new(e||Vs)(qe(os))},Vs.\u0275prov=ue({token:Vs,factory:Vs.\u0275fac}),Vs),Zs=((zs=function e(){p(this,e)}).\u0275mod=ct({type:zs}),zs.\u0275inj=ce({factory:function(e){return new(e||zs)},providers:[{provide:Ys,useClass:Js}]}),zs),$s=function(n){a(r,n);var i=u(r);function r(){return p(this,r),i.apply(this,arguments)}return g(r,[{key:"getProperty",value:function(e,t){return e[t]}},{key:"log",value:function(e){window.console&&window.console.log&&window.console.log(e)}},{key:"logGroup",value:function(e){window.console&&window.console.group&&window.console.group(e)}},{key:"logGroupEnd",value:function(){window.console&&window.console.groupEnd&&window.console.groupEnd()}},{key:"onAndCancel",value:function(e,t,n){return e.addEventListener(t,n,!1),function(){e.removeEventListener(t,n,!1)}}},{key:"dispatchEvent",value:function(e,t){e.dispatchEvent(t)}},{key:"remove",value:function(e){return e.parentNode&&e.parentNode.removeChild(e),e}},{key:"getValue",value:function(e){return e.value}},{key:"createElement",value:function(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}},{key:"createHtmlDocument",value:function(){return document.implementation.createHTMLDocument("fakeTitle")}},{key:"getDefaultDocument",value:function(){return document}},{key:"isElementNode",value:function(e){return e.nodeType===Node.ELEMENT_NODE}},{key:"isShadowRoot",value:function(e){return e instanceof DocumentFragment}},{key:"getGlobalEventTarget",value:function(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}},{key:"getHistory",value:function(){return window.history}},{key:"getLocation",value:function(){return window.location}},{key:"getBaseHref",value:function(e){var t,n=ea||(ea=document.querySelector("base"))?ea.getAttribute("href"):null;return null==n?null:(t=n,js||(js=document.createElement("a")),js.setAttribute("href",t),"/"===js.pathname.charAt(0)?js.pathname:"/"+js.pathname)}},{key:"resetBaseElement",value:function(){ea=null}},{key:"getUserAgent",value:function(){return window.navigator.userAgent}},{key:"performanceNow",value:function(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}},{key:"supportsCookies",value:function(){return!0}},{key:"getCookie",value:function(n){return function(n,i){i=encodeURIComponent(i);var r,o=t(n.split(";"));try{for(o.s();!(r=o.n()).done;){var s=r.value,a=s.indexOf("="),l=e(-1==a?[s,""]:[s.slice(0,a),s.slice(a+1)],2),u=l[0],c=l[1];if(u.trim()===i)return decodeURIComponent(c)}}catch(h){o.e(h)}finally{o.f()}return null}(document.cookie,n)}}],[{key:"makeCurrent",value:function(){var e;e=new r,Qs||(Qs=e)}}]),r}(function(e){a(n,e);var t=u(n);function n(){return p(this,n),t.call(this)}return g(n,[{key:"supportsDOMEvents",value:function(){return!0}}]),n}(function(){return function e(){p(this,e)}}())),ea=null,ta=new Me("TRANSITION_ID"),na=[{provide:Yo,useFactory:function(e,t,n){return function(){n.get(Jo).donePromise.then((function(){var n=ks();Array.prototype.slice.apply(t.querySelectorAll("style[ng-transition]")).filter((function(t){return t.getAttribute("ng-transition")===e})).forEach((function(e){return n.remove(e)}))}))}},deps:[ta,Ks,Fr],multi:!0}],ia=function(){function e(){p(this,e)}return g(e,[{key:"addToWindow",value:function(e){Ne.getAngularTestability=function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=e.findTestabilityInTree(t,n);if(null==i)throw new Error("Could not find testability for element.");return i},Ne.getAllAngularTestabilities=function(){return e.getAllTestabilities()},Ne.getAllAngularRootElements=function(){return e.getAllRootElements()},Ne.frameworkStabilizers||(Ne.frameworkStabilizers=[]),Ne.frameworkStabilizers.push((function(e){var t=Ne.getAllAngularTestabilities(),n=t.length,i=!1,r=function(t){i=i||t,0==--n&&e(i)};t.forEach((function(e){e.whenStable(r)}))}))}},{key:"findTestabilityInTree",value:function(e,t,n){if(null==t)return null;var i=e.getTestability(t);return null!=i?i:n?ks().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}],[{key:"init",value:function(){var t;t=new e,Bs=t}}]),e}(),ra=new Me("EventManagerPlugins"),oa=((Gs=function(){function e(t,n){var i=this;p(this,e),this._zone=n,this._eventNameToPlugin=new Map,t.forEach((function(e){return e.manager=i})),this._plugins=t.slice().reverse()}return g(e,[{key:"addEventListener",value:function(e,t,n){return this._findPluginFor(t).addEventListener(e,t,n)}},{key:"addGlobalEventListener",value:function(e,t,n){return this._findPluginFor(t).addGlobalEventListener(e,t,n)}},{key:"getZone",value:function(){return this._zone}},{key:"_findPluginFor",value:function(e){var t=this._eventNameToPlugin.get(e);if(t)return t;for(var n=this._plugins,i=0;i<n.length;i++){var r=n[i];if(r.supports(e))return this._eventNameToPlugin.set(e,r),r}throw new Error("No event manager plugin found for event "+e)}}]),e}()).\u0275fac=function(e){return new(e||Gs)(qe(ra),qe(ms))},Gs.\u0275prov=ue({token:Gs,factory:Gs.\u0275fac}),Gs),sa=function(){function e(t){p(this,e),this._doc=t}return g(e,[{key:"addGlobalEventListener",value:function(e,t,n){var i=ks().getGlobalEventTarget(this._doc,e);if(!i)throw new Error("Unsupported event target ".concat(i," for event ").concat(t));return this.addEventListener(i,t,n)}}]),e}(),aa=((Ws=function(){function e(){p(this,e),this._stylesSet=new Set}return g(e,[{key:"addStyles",value:function(e){var t=this,n=new Set;e.forEach((function(e){t._stylesSet.has(e)||(t._stylesSet.add(e),n.add(e))})),this.onStylesAdded(n)}},{key:"onStylesAdded",value:function(e){}},{key:"getAllStyles",value:function(){return Array.from(this._stylesSet)}}]),e}()).\u0275fac=function(e){return new(e||Ws)},Ws.\u0275prov=ue({token:Ws,factory:Ws.\u0275fac}),Ws),la=((qs=function(e){a(n,e);var t=u(n);function n(e){var i;return p(this,n),(i=t.call(this))._doc=e,i._hostNodes=new Set,i._styleNodes=new Set,i._hostNodes.add(e.head),i}return g(n,[{key:"_addStylesToHost",value:function(e,t){var n=this;e.forEach((function(e){var i=n._doc.createElement("style");i.textContent=e,n._styleNodes.add(t.appendChild(i))}))}},{key:"addHost",value:function(e){this._addStylesToHost(this._stylesSet,e),this._hostNodes.add(e)}},{key:"removeHost",value:function(e){this._hostNodes.delete(e)}},{key:"onStylesAdded",value:function(e){var t=this;this._hostNodes.forEach((function(n){return t._addStylesToHost(e,n)}))}},{key:"ngOnDestroy",value:function(){this._styleNodes.forEach((function(e){return ks().remove(e)}))}}]),n}(aa)).\u0275fac=function(e){return new(e||qs)(qe(Ks))},qs.\u0275prov=ue({token:qs,factory:qs.\u0275fac}),qs),ua={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},ca=/%COMP%/g;function ha(e,t,n){for(var i=0;i<t.length;i++){var r=t[i];Array.isArray(r)?ha(e,r,n):(r=r.replace(ca,e),n.push(r))}return n}function da(e){return function(t){if("__ngUnwrap__"===t)return e;!1===e(t)&&(t.preventDefault(),t.returnValue=!1)}}var Aa,pa,fa,ga,ma=((Aa=function(){function e(t,n,i){p(this,e),this.eventManager=t,this.sharedStylesHost=n,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new ya(t)}return g(e,[{key:"createRenderer",value:function(e,t){if(!e||!t)return this.defaultRenderer;switch(t.encapsulation){case nt.Emulated:var n=this.rendererByCompId.get(t.id);return n||(n=new va(this.eventManager,this.sharedStylesHost,t,this.appId),this.rendererByCompId.set(t.id,n)),n.applyToHost(e),n;case nt.Native:case nt.ShadowDom:return new wa(this.eventManager,this.sharedStylesHost,e,t);default:if(!this.rendererByCompId.has(t.id)){var i=ha(t.id,t.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(t.id,this.defaultRenderer)}return this.defaultRenderer}}},{key:"begin",value:function(){}},{key:"end",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||Aa)(qe(oa),qe(la),qe(Zo))},Aa.\u0275prov=ue({token:Aa,factory:Aa.\u0275fac}),Aa),ya=function(){function e(t){p(this,e),this.eventManager=t,this.data=Object.create(null)}return g(e,[{key:"destroy",value:function(){}},{key:"createElement",value:function(e,t){return t?document.createElementNS(ua[t]||t,e):document.createElement(e)}},{key:"createComment",value:function(e){return document.createComment(e)}},{key:"createText",value:function(e){return document.createTextNode(e)}},{key:"appendChild",value:function(e,t){e.appendChild(t)}},{key:"insertBefore",value:function(e,t,n){e&&e.insertBefore(t,n)}},{key:"removeChild",value:function(e,t){e&&e.removeChild(t)}},{key:"selectRootElement",value:function(e,t){var n="string"==typeof e?document.querySelector(e):e;if(!n)throw new Error('The selector "'.concat(e,'" did not match any elements'));return t||(n.textContent=""),n}},{key:"parentNode",value:function(e){return e.parentNode}},{key:"nextSibling",value:function(e){return e.nextSibling}},{key:"setAttribute",value:function(e,t,n,i){if(i){t=i+":"+t;var r=ua[i];r?e.setAttributeNS(r,t,n):e.setAttribute(t,n)}else e.setAttribute(t,n)}},{key:"removeAttribute",value:function(e,t,n){if(n){var i=ua[n];i?e.removeAttributeNS(i,t):e.removeAttribute("".concat(n,":").concat(t))}else e.removeAttribute(t)}},{key:"addClass",value:function(e,t){e.classList.add(t)}},{key:"removeClass",value:function(e,t){e.classList.remove(t)}},{key:"setStyle",value:function(e,t,n,i){i&eo.DashCase?e.style.setProperty(t,n,i&eo.Important?"important":""):e.style[t]=n}},{key:"removeStyle",value:function(e,t,n){n&eo.DashCase?e.style.removeProperty(t):e.style[t]=""}},{key:"setProperty",value:function(e,t,n){e[t]=n}},{key:"setValue",value:function(e,t){e.nodeValue=t}},{key:"listen",value:function(e,t,n){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,da(n)):this.eventManager.addEventListener(e,t,da(n))}}]),e}(),va=function(e){a(n,e);var t=u(n);function n(e,i,r,o){var s;p(this,n),(s=t.call(this,e)).component=r;var a,l=ha(o+"-"+r.id,r.styles,[]);return i.addStyles(l),s.contentAttr="_ngcontent-%COMP%".replace(ca,o+"-"+r.id),s.hostAttr=(a=o+"-"+r.id,"_nghost-%COMP%".replace(ca,a)),s}return g(n,[{key:"applyToHost",value:function(e){s(A(n.prototype),"setAttribute",this).call(this,e,this.hostAttr,"")}},{key:"createElement",value:function(e,t){var i=s(A(n.prototype),"createElement",this).call(this,e,t);return s(A(n.prototype),"setAttribute",this).call(this,i,this.contentAttr,""),i}}]),n}(ya),wa=function(e){a(n,e);var t=u(n);function n(e,i,r,o){var s;p(this,n),(s=t.call(this,e)).sharedStylesHost=i,s.hostEl=r,s.component=o,s.shadowRoot=o.encapsulation===nt.ShadowDom?r.attachShadow({mode:"open"}):r.createShadowRoot(),s.sharedStylesHost.addHost(s.shadowRoot);for(var a=ha(o.id,o.styles,[]),l=0;l<a.length;l++){var u=document.createElement("style");u.textContent=a[l],s.shadowRoot.appendChild(u)}return s}return g(n,[{key:"nodeOrShadowRoot",value:function(e){return e===this.hostEl?this.shadowRoot:e}},{key:"destroy",value:function(){this.sharedStylesHost.removeHost(this.shadowRoot)}},{key:"appendChild",value:function(e,t){return s(A(n.prototype),"appendChild",this).call(this,this.nodeOrShadowRoot(e),t)}},{key:"insertBefore",value:function(e,t,i){return s(A(n.prototype),"insertBefore",this).call(this,this.nodeOrShadowRoot(e),t,i)}},{key:"removeChild",value:function(e,t){return s(A(n.prototype),"removeChild",this).call(this,this.nodeOrShadowRoot(e),t)}},{key:"parentNode",value:function(e){return this.nodeOrShadowRoot(s(A(n.prototype),"parentNode",this).call(this,this.nodeOrShadowRoot(e)))}}]),n}(ya),_a=((pa=function(e){a(n,e);var t=u(n);function n(e){return p(this,n),t.call(this,e)}return g(n,[{key:"supports",value:function(e){return!0}},{key:"addEventListener",value:function(e,t,n){var i=this;return e.addEventListener(t,n,!1),function(){return i.removeEventListener(e,t,n)}}},{key:"removeEventListener",value:function(e,t,n){return e.removeEventListener(t,n)}}]),n}(sa)).\u0275fac=function(e){return new(e||pa)(qe(Ks))},pa.\u0275prov=ue({token:pa,factory:pa.\u0275fac}),pa),ba=["alt","control","meta","shift"],Ca={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Ea={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Sa={alt:function(e){return e.altKey},control:function(e){return e.ctrlKey},meta:function(e){return e.metaKey},shift:function(e){return e.shiftKey}},La=((fa=function(e){a(n,e);var t=u(n);function n(e){return p(this,n),t.call(this,e)}return g(n,[{key:"supports",value:function(e){return null!=n.parseEventName(e)}},{key:"addEventListener",value:function(e,t,i){var r=n.parseEventName(t),o=n.eventCallback(r.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular((function(){return ks().onAndCancel(e,r.domEventName,o)}))}}],[{key:"parseEventName",value:function(e){var t=e.toLowerCase().split("."),i=t.shift();if(0===t.length||"keydown"!==i&&"keyup"!==i)return null;var r=n._normalizeKey(t.pop()),o="";if(ba.forEach((function(e){var n=t.indexOf(e);n>-1&&(t.splice(n,1),o+=e+".")})),o+=r,0!=t.length||0===r.length)return null;var s={};return s.domEventName=i,s.fullKey=o,s}},{key:"getEventFullKey",value:function(e){var t="",n=function(e){var t=e.key;if(null==t){if(null==(t=e.keyIdentifier))return"Unidentified";t.startsWith("U+")&&(t=String.fromCharCode(parseInt(t.substring(2),16)),3===e.location&&Ea.hasOwnProperty(t)&&(t=Ea[t]))}return Ca[t]||t}(e);return" "===(n=n.toLowerCase())?n="space":"."===n&&(n="dot"),ba.forEach((function(i){i!=n&&(0,Sa[i])(e)&&(t+=i+".")})),t+=n}},{key:"eventCallback",value:function(e,t,i){return function(r){n.getEventFullKey(r)===e&&i.runGuarded((function(){return t(r)}))}}},{key:"_normalizeKey",value:function(e){switch(e){case"esc":return"escape";default:return e}}}]),n}(sa)).\u0275fac=function(e){return new(e||fa)(qe(Ks))},fa.\u0275prov=ue({token:fa,factory:fa.\u0275fac}),fa),Ta=Is(Ms,"browser",[{provide:ns,useValue:"browser"},{provide:ts,useValue:function(){$s.makeCurrent(),ia.init()},multi:!0},{provide:Ks,useFactory:function(){return function(e){bt=e}(document),document},deps:[]}]),Ba=[[],{provide:vr,useValue:"root"},{provide:kn,useFactory:function(){return new kn},deps:[]},{provide:ra,useClass:_a,multi:!0,deps:[Ks,ms,ns]},{provide:ra,useClass:La,multi:!0,deps:[Ks]},[],{provide:ma,useClass:ma,deps:[oa,la,Zo]},{provide:$r,useExisting:ma},{provide:aa,useExisting:la},{provide:la,useClass:la,deps:[Ks]},{provide:Ls,useClass:Ls,deps:[ms]},{provide:oa,useClass:oa,deps:[ra,ms]},[]],Na=((ga=function(){function e(t){if(p(this,e),t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}return g(e,null,[{key:"withServerTransition",value:function(t){return{ngModule:e,providers:[{provide:Zo,useValue:t.appId},{provide:ta,useExisting:Zo},na]}}}]),e}()).\u0275mod=ct({type:ga}),ga.\u0275inj=ce({factory:function(e){return new(e||ga)(qe(ga,12))},providers:Ba,imports:[Zs,Ps]}),ga);"undefined"!=typeof window&&window;var Ia,Oa,Fa,xa=l("mqXB"),Da=((Ia=function(){function e(t){p(this,e),this.el=t,this.cellclick=new Ho,this.celldoubleclick=new Ho,this.dataerror=new Ho,this.datafilecancelled=new Ho,this.dataloaded=new Ho,this.datachanged=new Ho,this.fieldslistclose=new Ho,this.fieldslistopen=new Ho,this.filteropen=new Ho,this.fullscreen=new Ho,this.loadingdata=new Ho,this.loadinglocalization=new Ho,this.loadingreportfile=new Ho,this.localizationerror=new Ho,this.localizationloaded=new Ho,this.openingreportfile=new Ho,this.querycomplete=new Ho,this.queryerror=new Ho,this.ready=new Ho,this.reportchange=new Ho,this.reportcomplete=new Ho,this.reportfilecancelled=new Ho,this.reportfileerror=new Ho,this.reportfileloaded=new Ho,this.runningquery=new Ho,this.update=new Ho,this.beforetoolbarcreated=new Ho,this.aftergriddraw=new Ho,this.beforegriddraw=new Ho}return g(e,[{key:"ngOnInit",value:function(){var e=this;this.root=this.el.nativeElement,this.webDataRocks=new xa({container:this.root.getElementsByClassName("wbr-ng-wrapper")[0],width:this.width,height:this.height,toolbar:this.toolbar,report:this.report,global:this.global,customizeCell:this.customizeCell,cellclick:function(t){return e.cellclick.next(t)},celldoubleclick:function(t){return e.celldoubleclick.next(t)},dataerror:function(t){return e.dataerror.next(t)},datafilecancelled:function(){return e.datafilecancelled.next()},dataloaded:function(){return e.dataloaded.next()},datachanged:function(t){return e.datachanged.next(t)},fieldslistclose:function(){return e.fieldslistclose.next()},fieldslistopen:function(){return e.fieldslistopen.next()},filteropen:function(){return e.filteropen.next()},loadingdata:function(){return e.loadingdata.next()},loadinglocalization:function(){return e.loadinglocalization.next()},loadingreportfile:function(){return e.loadingreportfile.next()},localizationerror:function(){return e.localizationerror.next()},localizationloaded:function(){return e.localizationloaded.next()},openingreportfile:function(){return e.openingreportfile.next()},querycomplete:function(){return e.querycomplete.next()},queryerror:function(){return e.queryerror.next()},ready:function(){return e.ready.next(e.webDataRocks)},reportchange:function(){return e.reportchange.next()},reportcomplete:function(){return e.reportcomplete.next()},reportfilecancelled:function(){return e.reportfilecancelled.next()},reportfileerror:function(){return e.reportfileerror.next()},reportfileloaded:function(){return e.reportfileloaded.next()},runningquery:function(){return e.runningquery.next()},update:function(){return e.update.next()},beforetoolbarcreated:function(t){return e.beforetoolbarcreated.next(t)},aftergriddraw:function(t){return e.aftergriddraw.next(t)},beforegriddraw:function(t){return e.beforegriddraw.next(t)}})}}]),e}()).\u0275fac=function(e){return new(e||Ia)(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ae.Default,n=Mt();return null==n?qe(e,t):In(Pt(),n,Ce(e),t)}(Jr))},Ia.\u0275cmp=st({type:Ia,selectors:[["app-wbr-pivot"]],inputs:{toolbar:"toolbar",width:"width",height:"height",report:"report",global:"global",customizeCell:"customizeCell"},outputs:{cellclick:"cellclick",celldoubleclick:"celldoubleclick",dataerror:"dataerror",datafilecancelled:"datafilecancelled",dataloaded:"dataloaded",datachanged:"datachanged",fieldslistclose:"fieldslistclose",fieldslistopen:"fieldslistopen",filteropen:"filteropen",fullscreen:"fullscreen",loadingdata:"loadingdata",loadinglocalization:"loadinglocalization",loadingreportfile:"loadingreportfile",localizationerror:"localizationerror",localizationloaded:"localizationloaded",openingreportfile:"openingreportfile",querycomplete:"querycomplete",queryerror:"queryerror",ready:"ready",reportchange:"reportchange",reportcomplete:"reportcomplete",reportfilecancelled:"reportfilecancelled",reportfileerror:"reportfileerror",reportfileloaded:"reportfileloaded",runningquery:"runningquery",update:"update",beforetoolbarcreated:"beforetoolbarcreated",aftergriddraw:"aftergriddraw",beforegriddraw:"beforegriddraw"},decls:1,vars:0,consts:[[1,"wbr-ng-wrapper"]],template:function(e,t){1&e&&(Qr(0,"div",0,void 0),kr())},styles:[""]}),Ia),Ra=["pivot1"],Ua=((Fa=function(){function e(){p(this,e)}return g(e,[{key:"onPivotReady",value:function(e){console.log("[ready] WebdatarocksComponent",this.child)}},{key:"onCustomizeCell",value:function(e,t){t.isClassicTotalRow&&e.addClass("fm-total-classic-r"),t.isGrandTotalRow&&e.addClass("fm-grand-total-r"),t.isGrandTotalColumn&&e.addClass("fm-grand-total-c")}},{key:"onReportComplete",value:function(){this.child.webDataRocks.off("reportcomplete"),this.child.webDataRocks.setReport({dataSource:{filename:"../assets/json-data.json"}})}}]),e}()).\u0275fac=function(e){return new(e||Fa)},Fa.\u0275cmp=st({type:Fa,selectors:[["app-root"]],viewQuery:function(e,t){var n,i,r,o;1&e&&(o=Ra,function(e,t,n,i,r,o){e.firstCreatePass&&function(e,t,n){null===e.queries&&(e.queries=new jo),e.queries.track(new Go(t,-1))}(e,new Vo(n,!0,!1,void 0)),function(e,t){var n=new Qo;wi(e,t,n,n.destroy),null===t[19]&&(t[19]=new zo),t[19].queries.push(new ko(n))}(e,t)}(Ht(),Mt(),o)),2&e&&function(e){var t=Mt(),n=Ht(),i=qt();Wt(i+1);var r=Xo(n,i);if(e.dirty&&It(t)===r.metadata.isStatic){if(null===r.matches)e.reset([]);else{var o=r.crossesNgTemplate?function e(t,n,i,r){var o=t.queries.getByIndex(i),s=o.matches;if(null!==s)for(var a=Ko(t,n,o,i),l=0;l<s.length;l+=2){var u=s[l];if(u>0)r.push(a[l/2]);else{for(var c=s[l+1],h=n[-u],d=10;d<h.length;d++){var A=h[d];A[17]===A[3]&&e(A[1],A,c,r)}if(null!==h[9])for(var p=h[9],f=0;f<p.length;f++){var g=p[f];e(g[1],g,c,r)}}}return r}(n,t,i,[]):Ko(n,t,r,i);e.reset(o),e.notifyOnChanges()}return!0}return!1}((i=Mt(),r=qt(),n=i[19].queries[r].queryList))&&(t.child=n.first)},decls:5,vars:4,consts:[[3,"toolbar","width","height","customizeCell","ready","reportcomplete"],["pivot1",""]],template:function(e,t){1&e&&(Qr(0,"h1"),qr(1,"Angular 10 integration with WebDataRocks"),kr(),Qr(2,"app-wbr-pivot",0,1),Vr("ready",(function(e){return t.onPivotReady(e)}))("reportcomplete",(function(){return t.onReportComplete()})),qr(4," WebDataRocks will appear here\n"),kr()),2&e&&(ui(Ht(),Mt(),tn()+2,zt()),Hr("toolbar",!0)("width","100%")("height","95%")("customizeCell",t.onCustomizeCell))},directives:[Da],styles:[""]}),Fa),Ma=((Oa=function e(){p(this,e)}).\u0275mod=ct({type:Oa,bootstrap:[Ua]}),Oa.\u0275inj=ce({factory:function(e){return new(e||Oa)},providers:[],imports:[[Na]]}),Oa);(function(){if(Vn)throw new Error("Cannot enable prod mode after platform setup.");zn=!1})(),Ta().bootstrapModule(Ma).catch((function(e){return console.error(e)}))},zn8P:function(e,t){function n(e){return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}))}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id="zn8P"}},[[0,0]]])}();