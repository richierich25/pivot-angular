var WebDataRocksToolbar;(WebDataRocksToolbar=function(e,t,i,r,n){this.pivot=t,this.pivotContainer=e,this.width="number"==typeof r||0>r.indexOf("px")&&0>r.indexOf("%")?r+"px":r,this.Labels=n}).prototype.getTabs=function(){var e=[],t=this.Labels;return e.push({title:t.connect,id:"wdr-tab-connect",icon:this.icons.connect,menu:[{title:t.connect_local_csv,id:"wdr-tab-connect-local-csv",handler:this.connectLocalCSVHandler,mobile:!1,icon:this.icons.connect_csv},{title:t.connect_local_json,id:"wdr-tab-connect-local-json",handler:this.connectLocalJSONHandler,mobile:!1,icon:this.icons.connect_json},{title:this.osUtils.isMobile?t.connect_remote_csv_mobile:t.connect_remote_csv,id:"wdr-tab-connect-remote-csv",handler:this.connectRemoteCSV,icon:this.icons.connect_csv},{title:this.osUtils.isMobile?t.connect_remote_json_mobile:t.connect_remote_json,id:"wdr-tab-connect-remote-json",handler:this.connectRemoteJSON,icon:this.icons.connect_json}]}),e.push({title:t.open,id:"wdr-tab-open",icon:this.icons.open,menu:[{title:t.local_report,id:"wdr-tab-open-local-report",handler:this.openLocalReport,mobile:!1,icon:this.icons.open_local},{title:this.osUtils.isMobile?t.remote_report_mobile:t.remote_report,id:"wdr-tab-open-remote-report",handler:this.openRemoteReport,icon:this.icons.open_remote}]}),e.push({title:t.save,id:"wdr-tab-save",handler:this.saveHandler,mobile:!1,icon:this.icons.save}),e.push({title:t.export,id:"wdr-tab-export",mobile:!1,icon:this.icons.export,menu:[{title:t.export_print,id:"wdr-tab-export-print",handler:this.printHandler,icon:this.icons.export_print},{title:t.export_html,id:"wdr-tab-export-html",handler:this.exportHandler,args:"html",icon:this.icons.export_html},{title:t.export_excel,id:"wdr-tab-export-excel",handler:this.exportHandler,args:"excel",icon:this.icons.export_excel},{title:t.export_pdf,id:"wdr-tab-export-pdf",handler:this.exportHandler,args:"pdf",icon:this.icons.export_pdf}]}),e.push({title:t.format,id:"wdr-tab-format",icon:this.icons.format,rightGroup:!0,menu:[{title:this.osUtils.isMobile?t.format_cells_mobile:t.format_cells,id:"wdr-tab-format-cells",handler:this.formatCellsHandler,icon:this.icons.format_number},{title:this.osUtils.isMobile?t.conditional_formatting_mobile:t.conditional_formatting,id:"wdr-tab-format-conditional",handler:this.conditionalFormattingHandler,icon:this.icons.format_conditional}]}),e.push({title:t.options,id:"wdr-tab-options",handler:this.optionsHandler,icon:this.icons.options,rightGroup:!0}),e.push({title:t.fields,id:"wdr-tab-fields",handler:this.fieldsHandler,icon:this.icons.fields,rightGroup:!0}),null!=document.addEventListener&&e.push({title:t.fullscreen,id:"wdr-tab-fullscreen",handler:this.fullscreenHandler,mobile:!1,icon:this.icons.fullscreen,rightGroup:!0}),e},WebDataRocksToolbar.prototype.create=function(){this.popupManager=new WebDataRocksToolbar.PopupManager(this),this.dataProvider=this.getTabs(),this.init()},WebDataRocksToolbar.prototype.applyToolbarLayoutClasses=function(){if(!this.osUtils.isMobile){var e=this,t=function(){if(e.toolbarWrapper){var t=e.toolbarWrapper.getBoundingClientRect().width;e.toolbarWrapper.classList.remove("wdr-layout-500"),e.toolbarWrapper.classList.remove("wdr-layout-360"),e.toolbarWrapper.classList.remove("wdr-layout-300"),500>t&&e.toolbarWrapper.classList.add("wdr-layout-500"),360>t&&e.toolbarWrapper.classList.add("wdr-layout-360"),300>t&&e.toolbarWrapper.classList.add("wdr-layout-300")}};t(),window.addEventListener("resize",t)}},WebDataRocksToolbar.prototype.init=function(){this.container=this.pivotContainer,this.container.style.position=""==this.container.style.position?"relative":this.container.style.position,this.toolbarWrapper=document.createElement("div"),this.toolbarWrapper.id="wdr-toolbar-wrapper",this.toolbarWrapper.style.width=this.width,this.osUtils.isMobile&&this.addClass(this.toolbarWrapper,"wdr-mobile"),this.addClass(this.toolbarWrapper,"wdr-toolbar-ui"),this.toolbarWrapper.style.width=this.width;var e=document.createElement("ul");e.id="wdr-toolbar";var t=document.createElement("div");t.classList.add("wdr-toolbar-group-right"),e.appendChild(t);for(var i=0;i<this.dataProvider.length;i++)if(!this.isDisabled(this.dataProvider[i]))if(this.osUtils.isMobile&&null!=this.dataProvider[i].menu&&1!=this.dataProvider[i].collapse)for(var r=0;r<this.dataProvider[i].menu.length;r++)this.isDisabled(this.dataProvider[i].menu[r])||e.appendChild(this.createTab(this.dataProvider[i].menu[r]));else r=this.dataProvider[i].divider?this.createDivider(this.dataProvider[i]):this.createTab(this.dataProvider[i]),t&&this.dataProvider[i].rightGroup?t.appendChild(r):e.appendChild(r);this.toolbarWrapper.appendChild(e),this.container.insertBefore(this.toolbarWrapper,this.container.firstChild),this.updateLabels(this.Labels),this.applyToolbarLayoutClasses()},WebDataRocksToolbar.prototype.updateLabels=function(e){e=this.Labels=e,this.setText(document.querySelector("#wdr-tab-connect > a > span"),e.connect),this.setText(document.querySelector("#wdr-tab-connect-local-csv > a > span"),e.connect_local_csv),this.setText(document.querySelector("#wdr-tab-connect-local-json > a > span"),e.connect_local_json),this.setText(document.querySelector("#wdr-tab-connect-remote-csv > a > span"),this.osUtils.isMobile?e.connect_remote_csv_mobile:e.connect_remote_csv),this.setText(document.querySelector("#wdr-tab-open > a > span"),e.open),this.setText(document.querySelector("#wdr-tab-open-local-report > a > span"),e.local_report),this.setText(document.querySelector("#wdr-tab-open-remote-report > a > span"),this.osUtils.isMobile?e.remote_report_mobile:e.remote_report),this.setText(document.querySelector("#wdr-tab-save > a > span"),e.save),this.setText(document.querySelector("#wdr-tab-format > a > span"),e.format),this.setText(document.querySelector("#wdr-tab-format-cells > a > span"),this.osUtils.isMobile?e.format_cells_mobile:e.format_cells),this.setText(document.querySelector("#wdr-tab-format-conditional > a > span"),this.osUtils.isMobile?e.conditional_formatting_mobile:e.conditional_formatting),this.setText(document.querySelector("#wdr-tab-options > a > span"),e.options),this.setText(document.querySelector("#wdr-tab-fullscreen > a > span"),e.fullscreen),this.setText(document.querySelector("#wdr-tab-export > a > span"),e.export),this.setText(document.querySelector("#wdr-tab-export-print > a > span"),e.export_print),this.setText(document.querySelector("#wdr-tab-export-html > a > span"),e.export_html),this.setText(document.querySelector("#wdr-tab-export-excel > a > span"),e.export_excel),this.setText(document.querySelector("#wdr-tab-export-pdf > a > span"),e.export_pdf),this.setText(document.querySelector("#wdr-tab-fields > a > span"),e.fields)},WebDataRocksToolbar.prototype.icons={connect:'<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="-305.5 396.5 36 36"><title>menu_connect</title><path fill="#555" d="M-274.5 425.409s-.988.277-1.422.761l-3.536-1.783c.189-.509.258-1.066.07-1.572l3.719-1.76a2.36 2.36 0 0 0 3.317.147 2.341 2.341 0 0 0 .157-3.3 2.335 2.335 0 0 0-4.055 1.582c-.009.122-.008.237.001.358l-3.896 1.884a2.281 2.281 0 0 0-1.359-.451 2.338 2.338 0 0 0-2.177 2.481 2.33 2.33 0 0 0 2.177 2.179c.491 0 .967-.156 1.359-.451l3.921 1.892a2.317 2.317 0 0 0 1.981 2.604 2.316 2.316 0 0 0 2.604-1.981c.171-1.269-1-2.432-2.262-2.603a8.794 8.794 0 0 0-.6-.026v.039zM-301.592 413.883c-.008.105-.908.222.092.326v6.836c0 2.587 5.827 5.455 13.177 5.455h1.081c-1.146-3 .303-6.854 3.299-8.155-1.448.172-2.868.069-4.334.069-7.056.009-12.775-2.093-13.315-4.531z"/><path fill="#555" d="M-288.5 416.217c7.377 0 13-2.097 13-4.683v-6.853c0-2.586-5.647-4.682-13-4.682-7.352 0-13 2.104-13 4.69v6.853c0 2.586 5.648 4.675 13 4.675zm.177-15.268c5.903 0 10.691 1.661 10.691 3.741s-4.796 3.741-10.691 3.741c-5.894 0-10.683-1.67-10.683-3.741 0-2.072 4.79-3.741 10.683-3.741z"/></svg>',connect_csv:'<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36"><path d="M11 24l6 0V27h-6V24z"/><path d="M12.8 22L12.8 22l1.2-2.5L15.1 22h1.9l-2-3.9L16.9 14h-1.8l-1 2.5L12.9 14h-1.8l1.9 3.9L11 22H12.8z"/><path d="M19 19h6v3h-6V19z"/><path d="M19 14h6v3L19 17V14z"/><path d="M19 24h6v3h-6V24z"/><path d="M23 4H7v28h22V11L23 4zM8 31V5h14v7h6v19H8L8 31z"/></svg>',connect_json:'<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36"><path d="M23 4H7v28h22V11L23 4zM8 31V5h14v7h6v19H8L8 31z"/><path d="M19 24c0 0.6-0.4 1-1 1 -0.6 0-1-0.4-1-1v-2c0-0.6 0.4-1 1-1 0.6 0 1 0.4 1 1V24zM21 18v-2c0-0.6-0.4 0-1 0 -0.6 0-1-0.4-1-1 0-0.6 0.4-1 1-1 1.7 0 3 0.3 3 2v2c0 1.1 0.9 2 2 2 0.6 0 1 0.4 1 1 0 0.6-0.4 1-1 1 -1.1 0-2 0.9-2 2v2c0 1.7-1.3 2-3 2 -0.6 0-1-0.4-1-1s0.4-1 1-1c0.6 0 1 0.6 1 0v-2c0-1.2 0.5-2.3 1.4-3C21.5 20.3 21 19.2 21 18zM11 20c1.1 0 2-0.9 2-2v-2c0-1.7 1.3-2 3-2 0.6 0 1 0.4 1 1 0 0.6-0.4 1-1 1 -0.6 0-1-0.6-1 0v2c0 1.2-0.5 2.3-1.4 3 0.8 0.7 1.4 1.8 1.4 3v2c0 0.6 0.4 0 1 0 0.6 0 1 0.4 1 1s-0.4 1-1 1c-1.7 0-3-0.3-3-2v-2c0-1.1-0.9-2-2-2 -0.6 0-1-0.4-1-1C10 20.4 10.4 20 11 20z"/><path d="M18 17c0.6 0 1 0.4 1 1s-0.4 1-1 1 -1-0.4-1-1S17.4 17 18 17z"/></svg>',open:'<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="-305.5 396.5 36 36"><title>menu_open</title><path fill="#555" d="M-279.351 408.5h8.976c.064 0 .126-.067.167-.025.021.052.021.055 0 .107l-2.053 20.701c-.01.117-.104.217-.219.217h-30.102c-.116 0-.21-.104-.221-.22l-1.989-16.009c-.022-.041-.022.124 0 .083.042-.054.115.146.178.146h21.198c.87 0 1.665-.726 2.053-1.499l1.812-3.446a.414.414 0 0 1 .2-.055zm-4.052 2.473c.084-.011.162-.052.194-.126l1.813-3.288c.408-.754 1.196-1.059 2.054-1.059h7.842v-2.637c0-1.102-.83-2.166-1.929-2.25-.053 0-.183-.113-.235-.113h-18.328c-.104 0-.188.006-.241-.09.01-1.1-.858-1.91-1.958-1.91h-6.902c-1.226 0-2.406.864-2.406 2.089v9.426l20.096-.042z"/></svg>',open_local:'<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36"><style>.a{fill:none;}</style><path d="M30.9 10.6C30.8 10.4 30.2 10 30 10h-1V8c0-0.4-0.6-1-1-1H15l-1-2H8C7.6 5 7 5.6 7 6v4H6c-0.2 0-0.8 0.4-0.9 0.6 -0.1 0.1-0.2 0.3-0.1 0.5l2.1 19.5C7.2 30.8 7.7 31 8 31h20c0.3 0 0.8-0.2 0.9-0.5l2.1-19.5C31 10.9 31 10.7 30.9 10.6zM28 30H8L6 11h24L28 30z"/><line x1="11" y1="23" x2="11" y2="23" class="a"/><line x1="25" y1="23" x2="25" y2="23" class="a"/><polygon points="11 15 11 23 17 23 17 25 14 25 14 26 22 26 22 25 19 25 19 23 25 23 25 15 "/></svg>',open_remote:'<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36"><path d="M30.9 10.6C30.8 10.4 30.2 10 30 10h-1V8c0-0.4-0.6-1-1-1H15l-1-2H8C7.6 5 7 5.6 7 6v4H6c-0.2 0-0.8 0.4-0.9 0.6 -0.1 0.1-0.2 0.3-0.1 0.5l2.1 19.5C7.2 30.8 7.7 31 8 31h20c0.3 0 0.8-0.2 0.9-0.5l2.1-19.5C31 10.9 31 10.7 30.9 10.6zM28 30H8L6 11h24L28 30z"/><path d="M24.8 18.1l-0.8 1.5c-0.2 0.2-0.5 0.2-0.8 0 -1.3-1.2-3.2-1.9-5.3-1.9 -2.1 0-4 0.7-5.3 1.9 -0.2 0.2-0.5 0.2-0.8 0l-0.8-1.5c-0.1-0.1-0.2-0.2-0.2-0.3 0-0.1 0.1-0.2 0.2-0.3 1.7-1.5 4.1-2.5 6.8-2.5 2.7 0 5.1 0.9 6.8 2.5 0.1 0 0.2 0.2 0.2 0.3C25 17.9 24.9 18 24.8 18.1zM18 19.6c1.5 0 2.8 0.5 3.8 1.4 0.2 0.2 0.2 0.5 0 0.7l-0.8 1.5c-0.2 0.2-0.5 0.2-0.8 0 -0.6-0.5-1.4-0.8-2.3-0.8 -0.9 0-1.7 0.3-2.3 0.8 -0.2 0.2-0.5 0.2-0.8 0l-0.8-1.5c-0.2-0.2-0.2-0.5 0-0.7C15.2 20.1 16.5 19.6 18 19.6zM18 23.4c0.8 0 1.4 0.6 1.4 1.3 0 0.7-0.6 1.3-1.4 1.3 -0.8 0-1.4-0.6-1.4-1.3C16.6 24 17.2 23.4 18 23.4z"/></svg>',save:'<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="-17.5 774.5 36 36"><title>menu_save</title><g fill="#555"><path d="M15.191 783.284l-5.457-5.467a1.101 1.101 0 0 0-.781-.317h-.835c-.2 0-.618.163-.618.363v8.889c0 .618-.245.748-.853.748H-5.638c-.617 0-.862-.14-.862-.748v-8.889c0-.2-.409-.363-.609-.363h-6.283c-.618 0-1.108.499-1.108 1.107v27.785c0 .617.5 1.107 1.108 1.107h27.784c.618 0 1.108-.499 1.108-1.107v-22.337c0-.29-.109-.562-.309-.771zM8.98 801.463c0 .618-.499 1.037-1.107 1.037H-6.873c-.617 0-.627-.357-.627-.966v-8.626c0-.617.019-1.408.627-1.408H7.882c.618 0 1.108.613 1.108 1.223l-.01 8.74z"/><path d="M-4.167 784.5h9.361c.2 0 .306.228.306.028v-6.665c0-.2-.106-.363-.306-.363h-9.361c-.2 0-.333.163-.333.363v6.665c0 .191.124-.028.333-.028zm5.667-4.294c0-.618.392-1.108 1-1.108.618 0 1 .5 1 1.108v1.97c0 .618-.392 1.108-1 1.108-.618 0-1-.5-1-1.108v-1.97zM4.168 796.5h-7.31c-.617 0-1.108.393-1.108 1s.5 1 1.108 1h7.31c.617 0 1.107-.393 1.107-1s-.498-1-1.107-1z"/></g></svg>',export:'<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="-17.5 774.5 36 36"><title>menu_export</title><g fill="#555"><path d="M15.446 795.615l-4.289-6.461c-.346-.515-.803-.654-1.428-.654H7.788c-.186 0-.346-.029-.363.156-.008.076.017.07.059.137l4.76 7.108c.042.06.034.337-.017.38-.025.025-.067.219-.102.219H6.699c-.194 0-.354-.063-.363.125-.305 3.23-3.174 5.495-6.407 5.192-2.81-.263-5.039-2.329-5.3-5.14-.009-.195-.168-.178-.363-.178h-5.401c-.076 0-.144-.281-.144-.357 0-.025.008-.157.017-.175l4.76-7.203c.102-.16.05-.245-.109-.347-.06-.035-.118.082-.187.082h-1.94c-.616 0-1.199.145-1.553.658l-4.664 6.547c-.203.304-.545.586-.545.95v9.216c1 .911 1.267 1.646 2.187 1.629h27.625c.903.009 1.188-.709 1.188-1.611v-9.233c1-.373.157-.735-.054-1.04z"/><path d="M-3.674 783.5H-2.5v10.2c1 1.4 1.764 2.464 3.165 2.371 1.274-.083 1.835-1.097 2.835-2.371v-10.2h1.207c.346 0 .641-.04.65-.387.008-.151-.042-.193-.144-.311l-4.186-5.11c-.228-.287-.642-.302-.929-.073-.042.034-.076.081-.101.115l-4.135 5.172c-.22.271-.187.447.084.668.11.085.244-.074.38-.074z"/></g></svg>',export_print:'<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="-17.5 774.5 36 36"><title>dd_save_print</title><path fill="#555" d="M-5.5 798.685v3.815h11v-7h-11v3.185zm2-1.185h7v1h-7v-1zm0 2h7v1h-7v-1zM5.5 786.308V782.5h-11v7h11z"/><path fill="#555" d="M8.94 786.5H7.5v4h-14v-4h-1.44c-1.493 0-2.56 1.064-2.56 2.558v6.87c0 1.493 1.067 2.572 2.56 2.572h1.44v-4h14v4h1.44c1.493 0 2.56-1.064 2.56-2.557v-6.878c0-1.501-1.074-2.565-2.56-2.565z"/></svg>',export_excel:'<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36"><path d="M24.4 15h-3.8L18 18.6 15.3 15h-3.8l4.5 5.2L11 27h7.3L18 25h-2l2-3L21.1 27H25l-5.1-6.8L24.4 15z"/><path d="M23 4H7v28h22V11L23 4zM8 31V5h14v7h6v19H8L8 31z"/></svg>',export_html:'<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36"><path d="M25.7 20.8l-2.3-2.5c-0.2-0.2-0.4-0.3-0.6-0.3 -0.2 0-0.4 0.1-0.6 0.3 -0.3 0.4-0.3 1 0 1.4l1.7 1.9 -1.7 1.9c-0.2 0.2-0.3 0.4-0.3 0.7 0 0.3 0.1 0.5 0.3 0.7 0.2 0.2 0.4 0.3 0.6 0.3 0.2 0 0.4-0.1 0.6-0.3l2.3-2.5C26.1 21.8 26.1 21.2 25.7 20.8z"/><path d="M14 24c0-0.3-0.1-0.5-0.3-0.7l-1.7-1.9 1.7-1.9c0.3-0.4 0.3-1 0-1.4 -0.2-0.2-0.4-0.3-0.6-0.3 -0.2 0-0.4 0.1-0.6 0.3l-2.3 2.5c-0.3 0.4-0.3 1 0 1.4l2.3 2.5c0.2 0.2 0.4 0.3 0.6 0.3 0.2 0 0.4-0.1 0.6-0.3C13.9 24.5 14 24.3 14 24z"/><path d="M20.4 15.1c-0.1 0-0.2-0.1-0.3-0.1 -0.4 0-0.8 0.3-0.9 0.6l-4.1 11.1c-0.1 0.2-0.1 0.5 0 0.7 0.1 0.2 0.3 0.4 0.5 0.5C15.7 28 15.8 28 16 28c0.4 0 0.8-0.3 0.9-0.6l4.1-11.1C21.1 15.8 20.9 15.2 20.4 15.1z"/><path d="M23 4H7v28h22V11L23 4zM8 31V5h14v7h6v19H8L8 31z"/></svg>',export_pdf:'<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36"><path d="M17.2 17.1L17.2 17.1C17.3 17.1 17.3 17.1 17.2 17.1c0.1-0.5 0.2-0.7 0.2-1V15.8c0.1-0.6 0.1-1 0-1.1 0 0 0 0 0-0.1l-0.1-0.1 0 0 0 0c0 0 0 0.1-0.1 0.1C16.9 15.2 16.9 16 17.2 17.1L17.2 17.1zM13.8 24.8c-0.2 0.1-0.4 0.2-0.6 0.3 -0.8 0.7-1.3 1.5-1.5 1.8l0 0 0 0 0 0C12.5 26.9 13.1 26.2 13.8 24.8 13.9 24.8 13.9 24.8 13.8 24.8 13.9 24.8 13.8 24.8 13.8 24.8zM24.1 23.1c-0.1-0.1-0.6-0.5-2.1-0.5 -0.1 0-0.1 0-0.2 0l0 0c0 0 0 0 0 0.1 0.8 0.3 1.6 0.6 2.1 0.6 0.1 0 0.1 0 0.2 0l0 0h0.1c0 0 0 0 0-0.1l0 0C24.2 23.3 24.1 23.3 24.1 23.1zM24.6 24c-0.2 0.1-0.6 0.2-1 0.2 -0.9 0-2.2-0.2-3.4-0.8 -1.9 0.2-3.4 0.5-4.5 0.9 -0.1 0-0.1 0-0.2 0.1 -1.3 2.4-2.5 3.5-3.4 3.5 -0.2 0-0.3 0-0.4-0.1l-0.6-0.3v-0.1c-0.1-0.2-0.1-0.3-0.1-0.6 0.1-0.6 0.8-1.6 2.1-2.4 0.2-0.1 0.6-0.3 1-0.6 0.3-0.6 0.7-1.2 1.1-2 0.6-1.1 0.9-2.3 1.2-3.3l0 0c-0.4-1.4-0.7-2.1-0.2-3.7 0.1-0.5 0.4-0.9 0.9-0.9h0.2c0.2 0 0.4 0.1 0.7 0.2 0.8 0.8 0.4 2.6 0 4.1 0 0.1 0 0.1 0 0.1 0.4 1.2 1.1 2.3 1.8 2.9 0.3 0.2 0.6 0.5 1 0.7 0.6 0 1-0.1 1.5-0.1 1.3 0 2.2 0.2 2.6 0.8 0.1 0.2 0.1 0.5 0.1 0.7C24.9 23.5 24.8 23.8 24.6 24zM17.3 19.6c-0.2 0.8-0.7 1.7-1.1 2.7 -0.2 0.5-0.4 0.8-0.7 1.2h0.1 0.1l0 0c1.5-0.6 2.8-0.9 3.7-1 -0.2-0.1-0.3-0.2-0.4-0.3C18.4 21.6 17.7 20.7 17.3 19.6z"/><path d="M23 4H7v28h22V11L23 4zM8 31V5h14v7h6v19H8L8 31z"/></svg>',format:'<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="-17.5 774.5 36 36"><title>menu_format</title><g fill="#555"><path d="M15.144 781.92a7.62 7.62 0 0 0-4.238-4.157 4.634 4.634 0 0 0-1.201-.254.99.99 0 0 0-.906.36l-10.797 10.829c-1.462 1.462-2.916 2.908-4.37 4.378a1.347 1.347 0 0 0-.326.596c-.481 2.197-.939 4.402-1.413 6.607a.639.639 0 0 0 .792.793l6.551-1.381c.253-.049.49-.171.67-.359 5.063-5.08 10.127-10.144 15.19-15.207.237-.229.384-.548.4-.882a8.491 8.491 0 0 0-.352-1.323zm-16.825 16.652l-2.54.531a2.367 2.367 0 0 0-1.911-1.87c.18-.906.384-1.813.571-2.729a2.05 2.05 0 0 1 1.078.229 6.007 6.007 0 0 1 2.671 2.605c.139.318.245.653.311.996 0 .157 0 .157-.18.238z"/><path d="M6.568 804.5H-11.5v-18h7.761l1.83-2.118 1.593-1.882h-12.455c-.947 0-1.729 1.241-1.729 2.18v21.097c0 .947.77 1.724 1.726 1.724H8.283c.947 0 2.217-.769 2.217-1.724v-12.488l-4 3.438v7.773h.068z"/></g></svg>',format_number:'<svg xmlns="http://www.w3.org/2000/svg" width="52" height="36" viewBox="0 0 52 36"><path d="M31 19.2v-3.4l2.5-0.4c0.2-0.7 0.5-1.4 0.9-2.1l-1.4-2 2.4-2.4 2 1.4c0.7-0.4 1.4-0.7 2.1-0.9l0.4-2.5h3.4l0.4 2.5c0.7 0.2 1.4 0.5 2.1 0.9l2-1.4 2.4 2.4 -1.4 2c0.4 0.7 0.7 1.4 0.9 2.1L52 15.8v3.4l-2.5 0.4c-0.2 0.7-0.5 1.4-0.9 2.1l1.4 2 -2.4 2.4 -2-1.5c-0.7 0.4-1.4 0.7-2.1 0.9l-0.4 2.5h-3.4l-0.4-2.5c-0.7-0.2-1.4-0.5-2.1-0.9l-2 1.5 -2.4-2.4 1.4-2c-0.4-0.7-0.7-1.4-0.9-2.1L31 19.2zM41.5 21c1.9 0 3.5-1.6 3.5-3.5 0-1.9-1.6-3.5-3.5-3.5 -1.9 0-3.5 1.6-3.5 3.5C38 19.4 39.6 21 41.5 21z"/><path d="M38 30H1V6h36V5H0v26h38V30L38 30z"/><path d="M9.4 21.1c-0.3 0.3-0.7 0.4-1.2 0.4 -0.5 0-0.9-0.2-1.2-0.5s-0.4-0.8-0.4-1.4H5c0 0.9 0.2 1.7 0.7 2.2 0.5 0.6 1.2 0.9 2 1v1.3h1.1v-1.4c0.8-0.1 1.5-0.4 1.9-0.9 0.5-0.5 0.7-1.1 0.7-1.9 0-0.4-0.1-0.8-0.2-1.1 -0.1-0.3-0.3-0.6-0.5-0.8 -0.2-0.2-0.5-0.4-0.8-0.6 -0.3-0.2-0.8-0.4-1.4-0.6 -0.6-0.2-1-0.4-1.2-0.7s-0.4-0.6-0.4-1c0-0.4 0.1-0.8 0.4-1 0.2-0.2 0.6-0.4 1-0.4 0.4 0 0.8 0.2 1 0.5 0.3 0.3 0.4 0.8 0.4 1.4h1.6c0-0.9-0.2-1.6-0.6-2.2 -0.4-0.6-1-0.9-1.8-1v-1.5H7.9v1.5C7.1 12.6 6.5 12.9 6 13.4s-0.7 1.1-0.7 1.9c0 1.1 0.5 2 1.6 2.6 0.3 0.2 0.8 0.4 1.3 0.6 0.6 0.2 1 0.4 1.2 0.7s0.4 0.6 0.4 1C9.8 20.5 9.7 20.8 9.4 21.1z"/><path d="M16.3 12.6h-0.2l-3.8 1.5v1.4l2.4-0.8v8.1h1.6V12.6z"/><path d="M19.9 23.8c0.2-0.5 0.4-1 0.4-1.5l0-1.2h-1.5v1.3c0 0.3-0.1 0.6-0.2 1 -0.1 0.3-0.3 0.7-0.5 1.1l0.9 0.5C19.3 24.7 19.6 24.3 19.9 23.8z"/><path d="M27 16.7c0-1.4-0.3-2.5-0.8-3.2s-1.3-1.1-2.4-1.1c-1.1 0-1.9 0.4-2.4 1.1 -0.5 0.7-0.8 1.8-0.8 3.3v1.8c0 1.4 0.3 2.5 0.8 3.2s1.3 1.1 2.4 1.1c1.1 0 1.9-0.4 2.4-1.1 0.5-0.7 0.8-1.8 0.8-3.3V16.7zM25.4 18.9c0 0.9-0.1 1.6-0.4 2 -0.2 0.4-0.6 0.6-1.2 0.6 -0.5 0-0.9-0.2-1.2-0.7 -0.3-0.5-0.4-1.2-0.4-2.1v-2.3c0-0.9 0.1-1.5 0.4-2 0.3-0.4 0.6-0.6 1.2-0.6 0.5 0 0.9 0.2 1.2 0.7 0.3 0.4 0.4 1.1 0.4 2.1V18.9z"/></svg>',format_conditional:'<svg xmlns="http://www.w3.org/2000/svg" width="52" height="36" viewBox="0 0 52 36"><polygon points="38 5 0 5 0 31 26 31 26 30 1 30 1 6 37 6 37 10 38 10 "/><path d="M9 13H8.6L5 14.4v1.4l2-0.8V23h2V13z"/><path d="M17 22h-4l2.4-2.9c0.6-0.7 1-1.3 1.3-1.8 0.3-0.5 0.4-1.1 0.4-1.5 0-0.8-0.3-1.5-0.8-2 -0.5-0.5-1.2-0.7-2.2-0.7 -0.6 0-1.2 0.1-1.7 0.4s-0.9 0.6-1.1 1C11.1 14.9 11 16 11 16h1.6c0 0 0.1-0.9 0.4-1.3s0.7-0.4 1.2-0.4c0.4 0 0.8 0.2 1 0.5 0.3 0.3 0.4 0.7 0.4 1.1 0 0.4-0.1 0.7-0.3 1.1 -0.2 0.4-0.6 0.8-1.1 1.3L11 21.9V23h6V22z"/><path d="M21 19h0.8c0.6 0 1-0.1 1.3 0.2 0.3 0.3 0.4 0.6 0.4 1.1 0 0.5-0.1 0.8-0.4 1.1 -0.3 0.3-0.6 0.4-1.1 0.4 -0.5 0-0.8-0.3-1.1-0.5C20.6 20.9 20.5 21 20.5 20h-1.5c0 1 0.3 1.6 0.8 2.1s1.3 0.8 2.1 0.8c0.9 0 1.6-0.2 2.2-0.7 0.6-0.5 0.8-1.2 0.8-2.1 0-0.5-0.1-1-0.4-1.4 -0.3-0.4-0.6-0.7-1.1-0.9 0.4-0.2 0.7-0.5 1-0.9 0.3-0.4 0.4-0.8 0.4-1.2 0-0.9-0.3-1.5-0.8-2 -0.5-0.5-1.2-0.7-2.1-0.7 -0.5 0-1 0.1-1.5 0.3 -0.4 0.2-0.8 0.7-1 1.1S19.1 15 19.1 16h1.5c0-1 0.1-0.9 0.4-1.1 0.3-0.3 0.6-0.5 1-0.5 0.5 0 0.8 0.1 1 0.3s0.3 0.6 0.3 1.1c0 0.5-0.1 0.7-0.4 1C22.7 17 22.3 17 21.9 17H21V19z"/><path d="M47.8 7C50.1 7 52 8.9 52 11.2c0 1-0.3 1.8-0.8 2.5l-1.7 1.7L43.6 9.5l1.7-1.7C46 7.3 46.8 7 47.8 7zM30.7 22.4L29 30l7.6-1.7 11.6-11.6 -5.9-5.9L30.7 22.4zM42 17.9l-5.1 5.1 -0.9-0.9 5.1-5L42 17.9z"/></svg>',options:'<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="-17.5 774.5 36 36"><title>menu_options</title><path fill="#555" d="M11.363 789.058l-.76-1.838a33.692 33.692 0 0 0 1.601-4.223l-2.327-2.328a31.444 31.444 0 0 0-4.142 1.691l-1.829-.76a32.88 32.88 0 0 0-1.83-4.101h-3.291a32.106 32.106 0 0 0-1.731 4.133l-1.83.76a33.556 33.556 0 0 0-4.206-1.609l-2.328 2.32a31.563 31.563 0 0 0 1.69 4.141l-.759 1.838a34.366 34.366 0 0 0-4.117 1.838v3.3a32.519 32.519 0 0 0 4.117 1.731l.759 1.829a33.633 33.633 0 0 0-1.608 4.223l2.327 2.328a32.986 32.986 0 0 0 4.133-1.699l1.83.76a31.481 31.481 0 0 0 1.862 4.108h3.291a32.194 32.194 0 0 0 1.732-4.133l1.837-.76a33.57 33.57 0 0 0 4.207 1.609l2.327-2.328a31.481 31.481 0 0 0-1.69-4.141l.76-1.838a32.532 32.532 0 0 0 4.108-1.829v-3.3a30.142 30.142 0 0 0-4.133-1.722zM.5 799.202a6.706 6.706 0 1 1 6.706-6.706A6.71 6.71 0 0 1 .5 799.202z"/></svg>',fields:'<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="-17.5 774.5 36 36"><title>menu_fields</title><g fill="#555"><path d="M11.351 787.279c1.112.367 2.027 1.221 2.55 2.221H13.5v-10.627c0-.744-.089-1.357-.825-1.373h-26.339c-.736.008-.836.612-.836 1.349v21.656c0 .735.093.995.836.995h10.836c-.008 0 .205-1.314.629-2.025-.073-.098-.123.025-.18.025H-12.5v-6h10.563l.83-1.699c.4-.76 1.606-1.258 1.606-1.667V785.5h10.843l.009 1.779zM-1.5 791.5h-11v-6h11v6z"/><path d="M15.805 801.444l-1.602-1.308c0-.237.082-.49.082-.817a2.483 2.483 0 0 0-.082-.817l1.602-1.389a.399.399 0 0 0 .082-.49l-1.528-2.86a.364.364 0 0 0-.278-.123.678.678 0 0 0-.18 0l-1.912.866a6.95 6.95 0 0 0-1.299-.817l-.311-1.989c-.017-.195-.188-.199-.384-.199H6.93c-.147 0-.384.037-.384.199l-.311 2.053c-.458.229-.899.468-1.299.786l-1.912-.834c-.041-.008-.09-.016-.131-.008a.356.356 0 0 0-.319.192l-1.528 2.817c-.082.164-.082.408.082.489l1.749 1.308c0 .237-.082.489-.082.816a2.48 2.48 0 0 0 .082.817l-1.602 1.356a.399.399 0 0 0-.082.49l1.528 2.86a.364.364 0 0 0 .278.123.678.678 0 0 0 .18 0l1.912-.817c.4.318.842.597 1.299.817l.311 2.116a.322.322 0 0 0 .221.4c.033.008.065.017.09.017h3.065c.147 0 .384-.164.384-.327l.311-2.215c.466-.212.907-.49 1.299-.817l1.831.817a.441.441 0 0 0 .54-.163l1.528-2.86c.056-.08-.018-.326-.165-.489zm-7.306.744a2.865 2.865 0 0 1-3.064-2.664c-.114-1.585 1.079-2.95 2.664-3.064a2.867 2.867 0 0 1 3.072 2.868 2.804 2.804 0 0 1-2.672 2.86z"/></g></svg>',fullscreen:'<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="-17.5 774.5 36 36"><title>menu_fullscreen_open</title><g fill="#555"><path d="M-7.5 779.976V777.5h-7v7h3v-2.752l3.758 4.067 1.74-1.846-4.342-4.003 2.844.01zM-7.742 799.096l-3.758 4.101V800.5h-3v7h7v-2h-2.618l-.049-.371 4.124-4.054-1.699-1.979zM8.746 785.913l3.754-4.092v2.679h3v-7h-7v2h2.602l.082.381-4.126 4.041 1.688 1.991zM13.5 800.5v2.598l-.382.074-4.058-4.003-1.882 1.575 4.006 3.756H8.5v3h7v-7h-2zM-4 786.5h9c1.104 0 2.5.908 2.5 2.011v7.996c0 1.103-1.396 1.993-2.5 1.993h-9c-1.104 0-2.5-.891-2.5-1.993v-8.005c0-1.103 1.396-2.002 2.5-2.002z"/></g></svg>'},WebDataRocksToolbar.prototype.connectLocalCSVHandler=function(){this.pivot.connectTo({dataSourceType:"csv",browseForFile:!0})},WebDataRocksToolbar.prototype.connectLocalJSONHandler=function(){this.pivot.connectTo({dataSourceType:"json",browseForFile:!0})},WebDataRocksToolbar.prototype.connectRemoteCSV=function(){this.showConnectToRemoteCSVDialog()},WebDataRocksToolbar.prototype.connectRemoteJSON=function(){this.showConnectToRemoteJSONDialog()},WebDataRocksToolbar.prototype.openLocalReport=function(){this.pivot.open()},WebDataRocksToolbar.prototype.openRemoteReport=function(){this.showOpenRemoteReportDialog()},WebDataRocksToolbar.prototype.saveHandler=function(){this.pivot.save("report.json","file")},WebDataRocksToolbar.prototype.formatCellsHandler=function(){this.showFormatCellsDialog()},WebDataRocksToolbar.prototype.conditionalFormattingHandler=function(){this.showConditionalFormattingDialog()},WebDataRocksToolbar.prototype.optionsHandler=function(){this.showOptionsDialog()},WebDataRocksToolbar.prototype.fieldsHandler=function(){this.pivot.openFieldsList()},WebDataRocksToolbar.prototype.printHandler=function(){this.pivot.print()},WebDataRocksToolbar.prototype.exportHandler=function(e){"pdf"==e?this.showExportPdfDialog():this.pivot.exportTo(e)},WebDataRocksToolbar.prototype.fullscreenHandler=function(){this.toggleFullscreen()},WebDataRocksToolbar.prototype.defaults={},WebDataRocksToolbar.prototype.showConnectToRemoteCSVDialog=function(){var e=this,t=this.Labels,i=this.popupManager.createPopup();i.content.classList.add("wdr-popup-w500"),i.setTitle(t.open_remote_csv),i.setToolbar([{id:"wdr-btn-open",label:t.open,handler:function(){0<r.value.length&&e.pivot.connectTo({filename:r.value,dataSourceType:"csv"})},isPositive:!0},{id:"wdr-btn-cancel",label:t.cancel}]),t=document.createElement("div");var r=document.createElement("input");r.id="wdr-inp-file-url",r.type="text",r.value="https://cdn.webdatarocks.com/data/data.csv",t.appendChild(r),i.setContent(t),this.popupManager.addPopup(i.content)},WebDataRocksToolbar.prototype.showConnectToRemoteJSONDialog=function(){var e=this,t=this.Labels,i=this.popupManager.createPopup();i.content.classList.add("wdr-popup-w500"),i.setTitle(t.open_remote_json),i.setToolbar([{id:"wdr-btn-open",label:t.open,handler:function(){0<r.value.length&&e.pivot.connectTo({filename:r.value,dataSourceType:"json"})},isPositive:!0},{id:"wdr-btn-cancel",label:t.cancel}]),t=document.createElement("div");var r=document.createElement("input");r.id="wdr-inp-file-url",r.type="text",r.value="https://cdn.webdatarocks.com/data/data.json",t.appendChild(r),i.setContent(t),this.popupManager.addPopup(i.content)},WebDataRocksToolbar.prototype.showOpenRemoteReportDialog=function(){var e=this,t=this.Labels,i=this.popupManager.createPopup();i.content.classList.add("wdr-popup-w500"),i.setTitle(t.open_remote_report),i.setToolbar([{id:"wdr-btn-open",label:t.open,handler:function(){0<r.value.length&&e.pivot.load(r.value)},isPositive:!0},{id:"wdr-btn-cancel",label:t.cancel}]),t=document.createElement("div");var r=document.createElement("input");r.type="text";var n=e.pivot.getOptions()||{};r.value=n.grid&&"flat"==n.grid.type?"https://cdn.webdatarocks.com/reports/report-flat.json":"https://cdn.webdatarocks.com/reports/report.json",t.appendChild(r),i.setContent(t),this.popupManager.addPopup(i.content)},WebDataRocksToolbar.prototype.showFormatCellsDialog=function(){var e=this,t=this.Labels,i=function(){l.disabled=c.disabled=u.disabled=h.disabled=A.disabled=p.disabled=f.disabled=m.disabled="empty"==a.value;var t=e.pivot.getFormat(a.value);l.value="left"==t.textAlign||"right"==t.textAlign?t.textAlign:"right",c.value=t.thousandsSeparator,u.value=t.decimalSeparator,h.value=t.decimalPlaces,A.value=t.currencySymbol,p.value=t.currencySymbolAlign,f.value=t.nullValue,m.value=1==t.isPercent},r=this.popupManager.createPopup();r.content.id="wdr-popup-format-cells",r.setTitle(this.osUtils.isMobile?t.format:t.format_cells),r.setToolbar([{id:"wdr-btn-apply",label:t.apply,handler:function(){var t={};""==a.value&&(t.name=""),t.textAlign=l.value,t.thousandsSeparator=c.value,t.decimalSeparator=u.value,t.decimalPlaces=h.value,t.currencySymbol=A.value,t.currencySymbolAlign=p.value,t.nullValue=f.value,t.isPercent="true"==m.value,e.pivot.setFormat(t,""==a.value?null:a.value),e.pivot.refresh()},isPositive:!0},{id:"wdr-btn-cancel",label:t.cancel}],!0);var n=document.createElement("div"),o=document.createElement("div");o.classList.add("wdr-inp-group"),n.appendChild(o);var s=document.createElement("div");s.classList.add("wdr-inp-row"),s.classList.add("wdr-ir-horizontal"),o.appendChild(s),(d=document.createElement("label")).classList.add("wdr-uc"),e.setText(d,t.choose_value),s.appendChild(d);var a=(g=e.createSelect()).select;a.onchange=i,a.options[0]=new Option(t.choose_value,"empty"),a.options[0].disabled=!0,a.options[1]=new Option(t.all_values,""),s.appendChild(g),(s=document.createElement("div")).classList.add("wdr-inp-row"),s.classList.add("wdr-ir-horizontal"),o.appendChild(s),(o=document.createElement("div")).classList.add("wdr-inp-group"),n.appendChild(o),(s=document.createElement("div")).classList.add("wdr-inp-row"),s.classList.add("wdr-ir-horizontal"),o.appendChild(s),d=document.createElement("label"),e.setText(d,t.text_align),s.appendChild(d);var l=(g=e.createSelect()).select;l.options[0]=new Option(t.align_left,"left"),l.options[1]=new Option(t.align_right,"right"),s.appendChild(g),(s=document.createElement("div")).classList.add("wdr-inp-row"),s.classList.add("wdr-ir-horizontal"),o.appendChild(s),d=document.createElement("label"),e.setText(d,t.thousand_separator),s.appendChild(d);var c=(g=e.createSelect()).select;c.options[0]=new Option(t.none,""),c.options[1]=new Option(t.space," "),c.options[2]=new Option(",",","),c.options[3]=new Option(".","."),s.appendChild(g),(s=document.createElement("div")).classList.add("wdr-inp-row"),s.classList.add("wdr-ir-horizontal"),o.appendChild(s),d=document.createElement("label"),e.setText(d,t.decimal_separator),s.appendChild(d);var u=(g=e.createSelect()).select;u.options[0]=new Option(".","."),u.options[1]=new Option(",",","),s.appendChild(g),(s=document.createElement("div")).classList.add("wdr-inp-row"),s.classList.add("wdr-ir-horizontal"),o.appendChild(s),d=document.createElement("label"),e.setText(d,t.decimal_places),s.appendChild(d);for(var h=(g=e.createSelect()).select,d=0;11>d;d++)h.options[d]=new Option(0===d?t.none:d-1,d-1);s.appendChild(g),(s=document.createElement("div")).classList.add("wdr-inp-row"),s.classList.add("wdr-ir-horizontal"),o.appendChild(s),d=document.createElement("label"),e.setText(d,t.currency_symbol),s.appendChild(d);var A=document.createElement("input");A.classList.add("wdr-inp"),A.type="text",s.appendChild(A),(s=document.createElement("div")).classList.add("wdr-inp-row"),s.classList.add("wdr-ir-horizontal"),o.appendChild(s),d=document.createElement("label"),e.setText(d,t.currency_align),s.appendChild(d);var p=(g=e.createSelect()).select;p.options[0]=new Option(t.align_left,"left"),p.options[1]=new Option(t.align_right,"right"),s.appendChild(g),(s=document.createElement("div")).classList.add("wdr-inp-row"),s.classList.add("wdr-ir-horizontal"),o.appendChild(s),d=document.createElement("label"),e.setText(d,t.null_value),s.appendChild(d);var f=document.createElement("input");f.classList.add("wdr-inp"),f.type="text",s.appendChild(f),(s=document.createElement("div")).classList.add("wdr-inp-row"),s.classList.add("wdr-ir-horizontal"),o.appendChild(s),d=document.createElement("label"),e.setText(d,t.is_percent),s.appendChild(d);var g,m=(g=e.createSelect()).select;for(m.options[0]=new Option(t.true_value,!0),m.options[1]=new Option(t.false_value,!1),s.appendChild(g),r.setContent(n),this.popupManager.addPopup(r.content),t=e.pivot.getMeasures(),d=0;d<t.length;d++)a.options[d+2]=new Option(t[d].caption,t[d].uniqueName);i()},WebDataRocksToolbar.prototype.showConditionalFormattingDialog=function(){var e=this,t=this.Labels,i=this.pivot.getAllConditions(),r=function(e){for(var t=e.match(/\W\d+\.*\d*/g),i=[],r=!1,n="",o=0;o<e.length;o++)'"'==e[o]||"'"==e[o]?(r?i.push(n):n="",r=!r):r&&(n+=e[o]);return e=e.match(/<=|>=|<|>|=|=|!=|isNaN/g),null==t&&null==i?{}:{value1:null!=t?t[0].replace(/\s/,""):i[0],value2:null!=t&&1<t.length?t[1].replace(/\s/,""):"",sign:e?e.join(""):""}},n=this.popupManager.createPopup();n.content.id="wdr-popup-conditional",n.setTitle(this.osUtils.isMobile?t.conditional:t.conditional_formatting),n.setToolbar([{id:"wdr-btn-apply",label:t.apply,handler:function(){e.pivot.removeAllConditions();for(var t=0;t<i.length;t++){var r,n=i[t].value1,o=i[t].value2,s="",a=null==o||0==o.length,l="><"===(r=i[t].sign),c="isNaN"===r;if((null==n||0==n.length)&&!c||l&&a||(l&&!a?s="AND(#value > "+n+", #value < "+o+")":c?s="isNaN(#value)":(isNaN(parseFloat(n))&&(n="'"+n+"'"),s="#value "+r+" "+n)),null==(r=s))return;i[t].formula=r,e.pivot.addCondition(i[t])}e.pivot.refresh()},isPositive:!0},{id:"wdr-btn-cancel",label:t.cancel}],!0);var o=document.createElement("a");o.id="wdr-add-btn",o.setAttribute("href","javascript:void(0)"),o.classList.add("wdr-ui-btn"),o.classList.add("wdr-ui-btn-light"),o.classList.add("wdr-button-add"),o.onclick=function(){var t={sign:"<",value1:"0",measures:e.pivot.getMeasures(),format:{fontFamily:"Arial",fontSize:"12px",color:"#000000",backgroundColor:"#FFFFFF"}};i.push(t),s.appendChild(e.createConditionalFormattingItem(t,i)),e.popupManager.centerPopup(n.content)},o.setAttribute("title",t.add_condition),(t=document.createElement("span")).classList.add("wdr-icon"),t.classList.add("wdr-icon-act_add"),o.appendChild(t),n.toolbar.insertBefore(o,n.toolbar.firstChild);var s=document.createElement("div");for(s.classList.add("wdr-popup-content"),s.onclick=function(t){t.target.classList.contains("wdr-cr-delete")&&e.popupManager.centerPopup(n.content)},o=0;o<i.length;o++)t=r(i[o].formula),i[o].value1=t.value1,i[o].value2=t.value2,i[o].sign=t.sign,i[o].measures=e.pivot.getMeasures(),s.appendChild(e.createConditionalFormattingItem(i[o],i));n.setContent(s),this.popupManager.addPopup(n.content)},WebDataRocksToolbar.prototype.defaults.fontSizes="8px 9px 10px 11px 12px 13px 14px".split(" "),WebDataRocksToolbar.prototype.defaults.fonts="Arial;Lucida Sans Unicode;Verdana;Courier New;Palatino Linotype;Tahoma;Impact;Trebuchet MS;Georgia;Times New Roman".split(";"),WebDataRocksToolbar.prototype.defaults.conditions=[{label:"less_than",sign:"<"},{label:"less_than_or_equal",sign:"<="},{label:"greater_than",sign:">"},{label:"greater_than_or_equal",sign:">="},{label:"equal_to",sign:"="},{label:"not_equal_to",sign:"!="},{label:"between",sign:"><"},{label:"is_empty",sign:"isNaN"}],WebDataRocksToolbar.prototype.createConditionalFormattingItem=function(e,t){var i=this,r=this.Labels,n=function(){"sign"in e&&"><"===e.sign?(d.classList.remove("wdr-width120"),d.classList.add("wdr-width50"),d.style.display="inline-block",p.value="value2"in e?e.value2:"0",p.style.display="inline-block",A.style.display="inline-block"):("sign"in e&&"isNaN"===e.sign?d.style.display="none":(d.classList.add("wdr-width120"),d.classList.remove("wdr-width50"),d.style.display="inline-block"),p.style.display="none",A.style.display="none")},o=function(){var t=e.format;null!=t&&(w.style.backgroundColor=t.backgroundColor||"#fff",w.style.color=t.color||"#000",w.style.fontFamily=t.fontFamily||"Arial",w.style.fontSize=t.fontSize||"12px")},s=document.createElement("div");s.classList.add("wdr-condition-row");var a=document.createElement("div");a.classList.add("wdr-wrap-relative"),s.appendChild(a);var l=document.createElement("span");l.classList.add("wdr-cr-delete"),l.classList.add("wdr-icon"),l.classList.add("wdr-icon-act_trash"),l.onclick=function(){var i=t.indexOf(e);-1<i&&t.splice(i,1),s.parentNode.removeChild(s)},a.appendChild(l),(l=document.createElement("div")).classList.add("wdr-cr-inner"),a.appendChild(l);var c=document.createElement("div");c.classList.add("wdr-cr-lbl"),c.classList.add("wdr-width50"),i.setText(c,r.value+":"),l.appendChild(c),(c=i.createSelect()).id="wdr-values";var u=c.select;"measures"in e?(function(e,t){u[0]=new Option(r.all_values,"");for(var n=(n=i.pivot.getOptions()||{}).grid&&"flat"==n.grid.type,o=0;o<e.length;o++)n&&7==e[o].type||(u[u.options.length]=new Option(e[o].caption,e[o].uniqueName));null!=t?u.value=t:u.selectedIndex=0}(e.measures,e.measure),u.disabled=0===e.measures.length):u.disabled=!0,u.onchange=function(){e.measure=u.value},l.appendChild(c),(c=i.createSelect()).id="wdr-conditions";var h=c.select;!function(e){for(var t=0;t<i.defaults.conditions.length;t++)h[t]=new Option(r[i.defaults.conditions[t].label],i.defaults.conditions[t].sign);null!=e?h.value=e:h.selectedIndex=0}("sign"in e?e.sign:null),h.onchange=function(){e.sign=h.value,"sign"in e&&"><"===e.sign?e.value2=0:("sign"in e&&"isNaN"===e.sign&&delete e.value1,delete e.value2),n()},l.appendChild(c);var d=document.createElement("input");d.classList.add("wdr-number-inp"),d.classList.add("wdr-width50"),d.type="number",d.value="value1"in e?e.value1:"0",d.onchange=function(){e.value1=0==d.value.length?"0":d.value},l.appendChild(d);var A=document.createElement("span");A.id="wdr-and-label",A.classList.add("wdr-width20"),i.setText(A,r.and_symbole),l.appendChild(A);var p=document.createElement("input");p.classList.add("wdr-number-inp"),p.classList.add("wdr-width50"),p.type="number",p.value="value2"in e?e.value2:"0",p.onchange=function(){e.value2=0==p.value.length?"0":p.value},l.appendChild(p),n(),(l=document.createElement("div")).classList.add("wdr-cr-inner"),a.appendChild(l),(c=document.createElement("div")).classList.add("wdr-cr-lbl"),c.classList.add("wdr-width50"),i.setText(c,r.format+":"),l.appendChild(c),(c=i.createSelect()).id="wdr-font-family";var f=c.select;!function(e){for(var t=0;t<i.defaults.fonts.length;t++)f[t]=new Option(i.defaults.fonts[t],i.defaults.fonts[t]);f.value=null==e?"Arial":e}(e.hasOwnProperty("format")&&e.format.hasOwnProperty("fontFamily")?e.format.fontFamily:null),f.onchange=function(){null!=e.format&&(e.format.fontFamily=f.value,o())},l.appendChild(c),(c=i.createSelect()).id="wdr-font-size";var g=c.select;!function(e){for(var t=0;t<i.defaults.fontSizes.length;t++)g[t]=new Option(i.defaults.fontSizes[t],i.defaults.fontSizes[t]);g.value=null==e?"12px":e}(e.hasOwnProperty("format")&&e.format.hasOwnProperty("fontSize")?e.format.fontSize:null),g.onchange=function(){null!=e.format&&(e.format.fontSize=g.value,o())},l.appendChild(c);var m=new WebDataRocksToolbar.ColorPicker(this,s);m.setColor(e.hasOwnProperty("format")&&e.format.hasOwnProperty("backgroundColor")?e.format.backgroundColor:"0xFFFFFF","bg"),m.setColor(e.hasOwnProperty("format")&&e.format.hasOwnProperty("color")?e.format.color:"0x000000","font"),m.changeHandler=function(){null!=e.format&&(w.style.color=m.fontColor||"#000",w.style.backgroundColor=m.backgroundColor||"#fff")},m.applyHandler=function(){null!=e.format&&(e.format.color=m.fontColor,e.format.backgroundColor=m.backgroundColor,o())},m.cancelHandler=function(){null!=e.format&&(m.setColor(e.format.hasOwnProperty("backgroundColor")?e.format.backgroundColor:"0xFFFFFF","bg"),m.setColor(e.format.hasOwnProperty("color")?e.format.color:"0x000000","font")),o()},l.appendChild(m.element);var w=document.createElement("input");return w.id="wdr-sample",w.classList.add("wdr-inp"),w.type="number",w.value="73.93",w.style.pointerEvents="none",l.appendChild(w),o(),s},WebDataRocksToolbar.prototype.showOptionsDialog=function(){var e=this,t=this.Labels,i=this.popupManager.createPopup();i.content.id="wdr-popup-options",i.setTitle(this.osUtils.isMobile?t.options:t.layout_options),i.setToolbar([{id:"wdr-btn-apply",label:t.apply,handler:function(){var t,i;c.checked?t="off":h.checked?t="on":d.checked?t="rows":A.checked&&(t="columns"),w.checked?i="off":y.checked?i="on":v.checked?i="rows":_.checked&&(i="columns");var r="compact";g&&g.checked?r="classic":m&&m.checked&&(r="flat"),e.pivot.getOptions(),e.pivot.setOptions({grid:{showGrandTotals:t,showTotals:i,type:r}}),e.pivot.refresh()},isPositive:!0},{id:"wdr-btn-cancel",label:t.cancel}],!0);var r=document.createElement("div");r.classList.add("wdr-popup-content");var n=document.createElement("div");n.classList.add("wdr-ui-row"),r.appendChild(n);var o=document.createElement("div");o.classList.add("wdr-ui-col-2"),n.appendChild(o),(p=document.createElement("div")).classList.add("wdr-title-2"),e.setText(p,t.grand_totals),o.appendChild(p);var s="wdr-grand-totals-"+Date.now();(p=document.createElement("ul")).classList.add("wdr-radiobtn-list"),o.appendChild(p);var a=document.createElement("li"),l=document.createElement("div");l.classList.add("wdr-radio-wrap");var c=document.createElement("input");c.type="radio",c.name=s,c.id="wdr-gt-1",c.value="off",l.appendChild(c);var u=document.createElement("label");u.setAttribute("for","wdr-gt-1"),e.setText(u,t.grand_totals_off),l.appendChild(u),a.appendChild(l),p.appendChild(a),a=document.createElement("li"),(l=document.createElement("div")).classList.add("wdr-radio-wrap");var h=document.createElement("input");h.type="radio",h.name=s,h.id="wdr-gt-2",h.value="on",l.appendChild(h),(u=document.createElement("label")).setAttribute("for","wdr-gt-2"),e.setText(u,t.grand_totals_on),l.appendChild(u),a.appendChild(l),p.appendChild(a),a=document.createElement("li"),(l=document.createElement("div")).classList.add("wdr-radio-wrap");var d=document.createElement("input");d.type="radio",d.name=s,d.id="wdr-gt-3",d.value="rows",l.appendChild(d),(u=document.createElement("label")).setAttribute("for","wdr-gt-3"),e.setText(u,t.grand_totals_on_rows),l.appendChild(u),a.appendChild(l),p.appendChild(a),a=document.createElement("li"),(l=document.createElement("div")).classList.add("wdr-radio-wrap");var A=document.createElement("input");A.type="radio",A.name=s,A.id="wdr-gt-4",A.value="rows",l.appendChild(A),(u=document.createElement("label")).setAttribute("for","wdr-gt-4"),e.setText(u,t.grand_totals_on_columns),l.appendChild(u),a.appendChild(l),p.appendChild(a),(p=document.createElement("div")).classList.add("wdr-title-2"),e.setText(p,t.layout),o.appendChild(p);var p,f="wdr-layout-"+Date.now();(p=document.createElement("ul")).classList.add("wdr-radiobtn-list"),o.appendChild(p),a=document.createElement("li"),(l=document.createElement("div")).classList.add("wdr-radio-wrap"),(s=document.createElement("input")).type="radio",s.name=f,s.id="wdr-lt-1",s.value="compact",l.appendChild(s),(u=document.createElement("label")).setAttribute("for","wdr-lt-1"),e.setText(u,t.compact_view),l.appendChild(u),a.appendChild(l),p.appendChild(a),a=document.createElement("li"),(l=document.createElement("div")).classList.add("wdr-radio-wrap");var g=document.createElement("input");g.type="radio",g.name=f,g.id="wdr-lt-2",g.value="classic",l.appendChild(g),(u=document.createElement("label")).setAttribute("for","wdr-lt-2"),e.setText(u,t.classic_view),l.appendChild(u),a.appendChild(l),p.appendChild(a),o=e.pivot.getReport({withDefaults:!0,withGlobals:!0}),a=document.createElement("li"),(l=document.createElement("div")).classList.add("wdr-radio-wrap");var m=document.createElement("input");m.type="radio",m.name=f,m.id="wdr-lt-3",m.value="flat",l.appendChild(m),(u=document.createElement("label")).setAttribute("for","wdr-lt-3"),e.setText(u,t.flat_view),l.appendChild(u),a.appendChild(l),p.appendChild(a),(o=document.createElement("div")).classList.add("wdr-ui-col-2"),n.appendChild(o),(p=document.createElement("div")).classList.add("wdr-title-2"),e.setText(p,t.subtotals),o.appendChild(p),n="wdr-subtotals-"+Date.now(),(p=document.createElement("ul")).classList.add("wdr-radiobtn-list"),o.appendChild(p),a=document.createElement("li"),(l=document.createElement("div")).classList.add("wdr-radio-wrap");var w=document.createElement("input");w.type="radio",w.name=n,w.id="wdr-st-1",w.value="off",l.appendChild(w),(u=document.createElement("label")).setAttribute("for","wdr-st-1"),e.setText(u,t.subtotals_off),l.appendChild(u),a.appendChild(l),p.appendChild(a),a=document.createElement("li"),(l=document.createElement("div")).classList.add("wdr-radio-wrap");var y=document.createElement("input");y.type="radio",y.name=n,y.id="wdr-st-2",y.value="on",l.appendChild(y),(u=document.createElement("label")).setAttribute("for","wdr-st-2"),e.setText(u,t.subtotals_on),l.appendChild(u),a.appendChild(l),p.appendChild(a),a=document.createElement("li"),(l=document.createElement("div")).classList.add("wdr-radio-wrap");var v=document.createElement("input");v.type="radio",v.name=n,v.id="wdr-st-3",v.value="rows",l.appendChild(v),(u=document.createElement("label")).setAttribute("for","wdr-st-3"),e.setText(u,t.subtotals_on_rows),l.appendChild(u),a.appendChild(l),p.appendChild(a),a=document.createElement("li"),(l=document.createElement("div")).classList.add("wdr-radio-wrap");var _=document.createElement("input");_.type="radio",_.name=n,_.id="wdr-st-4",_.value="columns",l.appendChild(_),(u=document.createElement("label")).setAttribute("for","wdr-st-4"),e.setText(u,t.subtotals_on_columns),l.appendChild(u),a.appendChild(l),p.appendChild(a),i.setContent(r),this.popupManager.addPopup(i.content),"off"==(t=(o=e.pivot.getOptions()||{}).grid||{}).showGrandTotals||0==t.showGrandTotals?c.checked=!0:"on"==t.showGrandTotals||1==t.showGrandTotals?h.checked=!0:"rows"==t.showGrandTotals?d.checked=!0:"columns"==t.showGrandTotals&&(A.checked=!0),"off"==t.showTotals?w.checked=!0:"on"==t.showTotals?y.checked=!0:"rows"==t.showTotals?v.checked=!0:"columns"==t.showTotals&&(_.checked=!0),"flat"==t.type&&m?m.checked=!0:"classic"==t.type&&g?g.checked=!0:s&&(s.checked=!0)},WebDataRocksToolbar.prototype.showExportPdfDialog=function(){var e=this,t=this.Labels,i=this.popupManager.createPopup();i.setTitle(t.choose_page_orientation),i.setToolbar([{id:"wdr-btn-apply",label:t.apply,handler:function(){var t="portrait";a.checked&&(t="landscape"),e.pivot.exportTo("pdf",{pageOrientation:t})},isPositive:!0},{id:"wdr-btn-cancel",label:t.cancel}]);var r=document.createElement("div"),n=document.createElement("ul");n.classList.add("wdr-radiobtn-list"),r.appendChild(n);var o=document.createElement("li");n.appendChild(o);var s=document.createElement("div");s.classList.add("wdr-radio-wrap"),o.appendChild(s),(o=document.createElement("input")).id="wdr-portrait-radio",o.type="radio",o.name="wdr-pdf-orientation",o.checked=!0,s.appendChild(o),(o=document.createElement("label")).setAttribute("for","wdr-portrait-radio"),e.setText(o,t.portrait),s.appendChild(o),o=document.createElement("li"),n.appendChild(o),(s=document.createElement("div")).classList.add("wdr-radio-wrap"),o.appendChild(s);var a=document.createElement("input");a.id="wdr-landscape-radio",a.type="radio",a.name="wdr-pdf-orientation",s.appendChild(a),(o=document.createElement("label")).setAttribute("for","wdr-landscape-radio"),e.setText(o,t.landscape),s.appendChild(o),i.setContent(r),this.popupManager.addPopup(i.content)},WebDataRocksToolbar.prototype.toggleFullscreen=function(){this.isFullscreen()?this.exitFullscreen():this.enterFullscreen(this.container)},WebDataRocksToolbar.prototype.isFullscreen=function(){return document.fullScreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement},WebDataRocksToolbar.prototype.enterFullscreen=function(e){if(e.requestFullscreen||e.webkitRequestFullScreen||e.mozRequestFullScreen||e.msRequestFullscreen&&window==top){if(this.containerStyle={width:this.container.style.width,height:this.container.style.height,position:this.container.style.position,top:this.container.style.top,bottom:this.container.style.bottom,left:this.container.style.left,right:this.container.style.right,marginTop:this.container.style.marginTop,marginLeft:this.container.style.left,toolbarWidth:this.toolbarWrapper.style.width},this.container.style.width="100%",this.container.style.height="100%",this.container.style.position="fixed",this.container.style.top="0px",this.container.style.left="0px",this.toolbarWrapper.style.width="100%",e.requestFullscreen)e.requestFullscreen();else if(e.webkitRequestFullScreen){var t=navigator.userAgent;-1<t.indexOf("Safari")&&-1==t.indexOf("Chrome")?e.webkitRequestFullScreen():e.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT)}else e.mozRequestFullScreen?e.mozRequestFullScreen():e.msRequestFullscreen&&(window==top?e.msRequestFullscreen():alert("Fullscreen mode in IE 11 is not currently supported while Pivot embeded in iframe."));e.addEventListener("fullscreenchange",(function(){window.screenTop||window.screenY||this.isFullscreen()||this.exitFullscreen()}).bind(this),!1),e.addEventListener("webkitfullscreenchange",(function(){window.screenTop||window.screenY||this.isFullscreen()||this.exitFullscreen()}).bind(this),!1),e.addEventListener("mozfullscreenchange",(function(){window.fullScreen||window.innerWidth==screen.width&&window.innerHeight==screen.height||this.exitFullscreen()}).bind(this),!1)}},WebDataRocksToolbar.prototype.exitFullscreen=function(){this.container.style.width=this.containerStyle.width,this.container.style.height=this.containerStyle.height,this.container.style.position=this.containerStyle.position,this.container.style.top=this.containerStyle.top,this.container.style.left=this.containerStyle.left,this.container.style.marginTop=this.containerStyle.marginTop,this.container.style.marginLeft=this.containerStyle.marginLeft,this.toolbarWrapper.style.width=this.containerStyle.toolbarWidth,document.exitFullscreen?document.exitFullscreen():document.cancelFullscreen?document.cancelFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullScreen?document.webkitExitFullScreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen()},WebDataRocksToolbar.prototype.nullOrUndefined=function(e){return null==e},WebDataRocksToolbar.prototype.hasClass=function(e,t){return e.className.match(RegExp("(\\s|^)"+t+"(\\s|$)"))},WebDataRocksToolbar.prototype.addClass=function(e,t){this.hasClass(e,t)||(e.className+=" "+t)},WebDataRocksToolbar.prototype.removeClass=function(e,t){this.hasClass(e,t)&&(e.className=e.className.replace(RegExp("(\\s|^)"+t+"(\\s|$)")," "))},WebDataRocksToolbar.prototype.setText=function(e,t){e&&(void 0!==e.innerText&&(e.innerText=t),void 0!==e.textContent&&(e.textContent=t))},WebDataRocksToolbar.prototype.createSelect=function(){var e=document.createElement("div");e.classList.add("wdr-select");var t=document.createElement("select");return e.appendChild(t),e.select=t,e},WebDataRocksToolbar.prototype.createDivider=function(e){return(e=document.createElement("li")).className="wdr-divider",e},WebDataRocksToolbar.prototype.createTab=function(e){var t=document.createElement("li");t.id=e.id;var i=document.createElement("a");e.hasOwnProperty("class_attr")&&i.setAttribute("class",e.class_attr),i.setAttribute("href","javascript:void(0)"),e.icon&&((r=document.createElement("div")).classList.add("wdr-svg-icon"),r.innerHTML=e.icon,i.appendChild(r)),r=document.createElement("span"),this.setText(r,e.title),i.appendChild(r);var r,n=this;return this.nullOrUndefined(r="function"==typeof e.handler?e.handler:this[e.handler])||(i.onclick=function(e,t){return function(){e.call(n,t)}}(r,e.args)),this.nullOrUndefined(this[e.onShowHandler])||(i.onmouseover=function(e){return function(){e.call(n)}}(this[e.onShowHandler])),t.onmouseover=function(){n.showDropdown(this)},t.onmouseout=function(){n.hideDropdown(this)},t.appendChild(i),null==e.menu||this.osUtils.isMobile&&1!=e.collapse||t.appendChild(this.createTabMenu(e.menu)),t},WebDataRocksToolbar.prototype.showDropdown=function(e){var t=e.querySelectorAll(".wdr-dropdown")[0];t&&(t.style.display="block",t.getBoundingClientRect().right>this.toolbarWrapper.getBoundingClientRect().right&&(t.style.right=0,this.addClass(e,"wdr-align-rigth")))},WebDataRocksToolbar.prototype.hideDropdown=function(e){var t=e.querySelectorAll(".wdr-dropdown")[0];t&&(t.style.display="none",t.style.right=null,this.removeClass(e,"wdr-align-rigth"))},WebDataRocksToolbar.prototype.createTabMenu=function(e){var t=document.createElement("div");t.className="wdr-dropdown wdr-shadow-container";var i=document.createElement("ul");i.className="wdr-dropdown-content";for(var r=0;r<e.length;r++)this.isDisabled(e[r])||i.appendChild(e[r].divider?this.createMenuDivider():this.createTab(e[r]));return t.appendChild(i),t},WebDataRocksToolbar.prototype.createMenuDivider=function(){var e=document.createElement("li");return e.className="wdr-v-divider",e},WebDataRocksToolbar.prototype.isDisabled=function(e){return!!this.nullOrUndefined(e)||!1===e.ios&&this.osUtils.isIOS||!1===e.android&&this.osUtils.isAndroid||!1===e.mobile&&this.osUtils.isMobile},WebDataRocksToolbar.prototype.getElementById=function(e,t){var i=function(e,t){for(var r=0;r<e.childNodes.length;r++){var n=e.childNodes[r];if(n.id==t)return n;if(null!=(n=i(n,t)))return n}return null};return i(t||this.toolbarWrapper,e)},WebDataRocksToolbar.prototype.osUtils={isIOS:!(!navigator.userAgent.match(/iPhone|iPad|iPod/i)&&!navigator.platform.match(/iPhone|iPad|iPod/i)),isMac:/Mac/i.test(navigator.platform),isAndroid:!!navigator.userAgent.match(/Android/i),isBlackBerry:/BlackBerry/i.test(navigator.platform),isMobile:navigator.userAgent.match(/iPhone|iPad|iPod/i)||navigator.platform.match(/iPhone|iPad|iPod/i)||navigator.userAgent.match(/Android/i)||/BlackBerry/i.test(navigator.platform)},WebDataRocksToolbar.PopupManager=function(e){this.toolbar=e,this.activePopup=null},WebDataRocksToolbar.PopupManager.prototype.createPopup=function(){return new WebDataRocksToolbar.PopupManager.PopupWindow(this)},WebDataRocksToolbar.PopupManager.prototype.addPopup=function(e){if(null!=e){this.removePopup(),this.modalOverlay=this.createModalOverlay(),this.activePopup=e,this.toolbar.toolbarWrapper.appendChild(e),this.toolbar.toolbarWrapper.appendChild(this.modalOverlay),this.addLayoutClasses(e),this.centerPopup(e);var t=this;e.resizeHandler=function(){e&&(t.addLayoutClasses(e),t.centerPopup(e))},window.addEventListener("resize",e.resizeHandler)}},WebDataRocksToolbar.PopupManager.prototype.addLayoutClasses=function(e){e.classList.remove("wdr-layout-tablet"),e.classList.remove("wdr-layout-mobile"),e.classList.remove("wdr-layout-mobile-small");var t=this.getBoundingRect(this.toolbar.container);768>t.width&&e.classList.add("wdr-layout-tablet"),580>t.width&&e.classList.add("wdr-layout-mobile"),460>t.width&&e.classList.add("wdr-layout-mobile-small")},WebDataRocksToolbar.PopupManager.prototype.centerPopup=function(e){var t=this.getBoundingRect(this.toolbar.container),i=this.getBoundingRect(e),r=this.getBoundingRect(this.toolbar.toolbarWrapper);e.style.zIndex=parseInt(this.modalOverlay.style.zIndex)+1,this.modalOverlay.style.height=t.height+"px",e.style.left=Math.max(0,(r.width-i.width)/2)+"px",e.style.top=Math.max(0,(t.height-i.height)/2)+"px"},WebDataRocksToolbar.PopupManager.prototype.removePopup=function(e){e=e||this.activePopup,null!=this.modalOverlay&&(this.toolbar.toolbarWrapper.removeChild(this.modalOverlay),this.modalOverlay=null),null!=e&&(this.toolbar.toolbarWrapper.removeChild(e),this.activePopup=null,window.removeEventListener("resize",e.resizeHandler))},WebDataRocksToolbar.PopupManager.prototype.getBoundingRect=function(e){var t=e.getBoundingClientRect();return{left:t.left,right:t.right,top:t.top,bottom:t.bottom,width:t.width||e.clientWidth,height:t.height||e.clientHeight}},WebDataRocksToolbar.PopupManager.prototype.createModalOverlay=function(){var e=document.createElement("div");e.className="wdr-modal-overlay",e.id="wdr-popUp-modal-overlay";var t=this;return e.addEventListener("click",(function(e){t.removePopup(t.activePopup)})),e},WebDataRocksToolbar.PopupManager.PopupWindow=function(e){this.popupManager=e;var t=document.createElement("div");t.className="wdr-panel-content";var i=document.createElement("div");i.className="wdr-title-bar";var r=document.createElement("div");r.className="wdr-title-text";var n=document.createElement("div");n.className="wdr-toolbox",n.style.clear="both",this.content=document.createElement("div"),this.content.className="wdr-popup wdr-panel wdr-toolbar-ui wdr-ui",this.content.appendChild(t),t.appendChild(i),i.appendChild(r),this.setTitle=function(e){WebDataRocksToolbar.prototype.setText(r,e)},this.setContent=function(e){t.insertBefore(e,i.nextSibling)};var o=this;return this.setToolbar=function(e,s){n.innerHTML="";for(var a=e.length-1;0<=a;a--){var l=document.createElement("a");l.setAttribute("href","javascript:void(0)"),l.className="wdr-ui-btn"+(e[a].isPositive?" wdr-ui-btn-dark":""),e[a].id&&(l.id=e[a].id),WebDataRocksToolbar.prototype.setText(l,e[a].label),l.onclick=function(e){return function(){null!=e&&e.call(),o.popupManager.removePopup()}}(e[a].handler),!0===e[a].disabled?WebDataRocksToolbar.prototype.addClass(l,"wdr-ui-disabled"):WebDataRocksToolbar.prototype.removeClass(l,"wdr-ui-disabled"),e[a].isPositive&&(WebDataRocksToolbar.prototype.osUtils.isMac||WebDataRocksToolbar.prototype.osUtils.isIOS)?n.appendChild(l):n.insertBefore(l,n.firstChild)}s?(n.classList.add("wdr-ui-col"),i.appendChild(n),i.classList.add("wdr-ui-row"),r.classList.add("wdr-ui-col")):t.appendChild(n)},this.toolbar=n,this.titleBar=i,this.title=r,this},WebDataRocksToolbar.ColorPicker=function(e,t){function i(e){e=e.target.getAttribute("data-c"),h.drawShades(h.colors[e]),h.setColor(e,h.currentType,!0)}function r(e){e=e.target.getAttribute("data-c"),h.setColor(e,h.currentType,!0)}function n(e){h.currentType=e,a.classList.remove("wdr-current"),l.classList.remove("wdr-current"),"bg"==e?(l.classList.add("wdr-current"),h.setColor(h.backgroundColor,e,!1)):(a.classList.add("wdr-current"),h.setColor(h.fontColor,e,!1))}function o(){h.closePopup(),h.cancelHandler&&h.cancelHandler()}this.toolbar=e,this.element=document.createElement("div"),this.element.classList.add("wdr-colorpick-wrap"),this.element.classList.add("wdr-width40"),this.colorPickerButton=document.createElement("div"),this.colorPickerButton.classList.add("wdr-colorpick-btn"),this.element.appendChild(this.colorPickerButton),this.colorPickerIcon=document.createElement("span"),this.colorPickerIcon.classList.add("wdr-icon"),this.colorPickerIcon.classList.add("wdr-icon-act_font"),this.colorPickerButton.appendChild(this.colorPickerIcon),this.popup=document.createElement("div"),this.popup.classList.add("wdr-colorpick-popup"),this.popup.onclick=function(e){e.stopPropagation()},t.appendChild(this.popup);var s=document.createElement("div");s.classList.add("wdr-color-targ-switch"),this.popup.appendChild(s);var a=document.createElement("a");a.classList.add("wdr-cts-item"),a.classList.add("wdr-current"),a.href="javascript:void(0);",a.innerHTML=e.Labels.cp_text,a.onclick=function(){n("font")},s.appendChild(a);var l=document.createElement("a");for(var c in l.classList.add("wdr-cts-item"),l.innerHTML=e.Labels.cp_highlight,l.href="javascript:void(0);",l.onclick=function(){n("bg")},s.appendChild(l),(s=document.createElement("div")).classList.add("wdr-cp-sett-row"),this.popup.appendChild(s),this.colorInput=document.createElement("input"),this.colorInput.type="text",this.colorInput.classList.add("wdr-inp"),this.colorInput.classList.add("wdr-width140"),this.colorInput.classList.add("wdr-tac"),this.colorInput.onchange=function(){var e=h.colorInput.value;h.isColor(e)&&h.setColor(e,h.currentType,!0)},s.appendChild(this.colorInput),this.colorPreview=document.createElement("div"),this.colorPreview.classList.add("wdr-cp-curr-color"),this.colorPreview.classList.add("wdr-width140"),s.appendChild(this.colorPreview),this.mainColors=document.createElement("div"),this.mainColors.classList.add("wdr-row-9colors"),this.popup.appendChild(this.mainColors),this.colors){(s=document.createElement("div")).classList.add("wdr-r9c-item"),s.style.backgroundColor=c,s.setAttribute("data-c",c),s.addEventListener("click",i),this.mainColors.appendChild(s);var u=document.createElement("span");u.classList.add("wdr-cp-currentmark"),u.classList.add("wdr-icon"),u.classList.add("wdr-icon-act_check"),s.appendChild(u),(u=document.createElement("span")).classList.add("wdr-r9c-arrow"),u.style.borderTopColor=c,s.appendChild(u)}for(this.shadeColors=document.createElement("div"),this.shadeColors.classList.add("wdr-row-4colors"),this.popup.appendChild(this.shadeColors),c=0;8>c;c++)(s=document.createElement("div")).classList.add("wdr-r4c-item"),s.addEventListener("click",r),this.shadeColors.appendChild(s),(u=document.createElement("span")).classList.add("wdr-cp-currentmark"),u.classList.add("wdr-icon"),u.classList.add("wdr-icon-act_check"),s.appendChild(u);this.drawShades(this.colors["#000000"]),(s=document.createElement("div")).classList.add("wdr-cp-btns-row"),this.popup.appendChild(s),(c=document.createElement("a")).innerHTML=e.Labels.apply,c.classList.add("wdr-ui-btn"),c.classList.add("wdr-ui-btn-dark"),c.addEventListener("click",(function(){h.closePopup(),h.applyHandler&&h.applyHandler()})),(u=document.createElement("a")).innerHTML=e.Labels.cancel,u.classList.add("wdr-ui-btn"),u.addEventListener("click",o),WebDataRocksToolbar.prototype.osUtils.isMac||WebDataRocksToolbar.prototype.osUtils.isIOS?(s.appendChild(u),s.appendChild(c)):(s.appendChild(c),s.appendChild(u)),this.currentType="font",this.colorPickerButton.addEventListener("click",(function(e){e.stopPropagation(),h.isOpened()?h.closePopup():h.openPopup()})),document.body.addEventListener("click",(function(e){o()}));var h=this},WebDataRocksToolbar.ColorPicker.prototype.colors={"#000000":"#000000 #212121 #424242 #616161 #757575 #9E9E9E #BDBDBD #FFFFFF".split(" "),"#F44336":"#D32F2F #E53935 #F44336 #EF5350 #E57373 #EF9A9A #FFCDD2 #FFEBEE".split(" "),"#FF9800":"#F57C00 #FB8C00 #FF9800 #FFA726 #FFB74D #FFCC80 #FFE0B2 #FFF3E0".split(" "),"#FFEB3B":"#FBC02D #FDD835 #FFEB3B #FFEE58 #FFF176 #FFF59D #FFF9C4 #FFFDE7".split(" "),"#8BC34A":"#689F38 #7CB342 #8BC34A #9CCC65 #AED581 #C5E1A5 #DCEDC8 #F1F8E9".split(" "),"#009688":"#00796B #00897B #009688 #26A69A #4DB6AC #80CBC4 #B2DFDB #E0F2F1".split(" "),"#03A9F4":"#0288D1 #039BE5 #03A9F4 #29B6F6 #4FC3F7 #81D4FA #B3E5FC #E1F5FE".split(" "),"#3F51B5":"#303F9F #3949AB #3F51B5 #5C6BC0 #7986CB #9FA8DA #C5CAE9 #E8EAF6".split(" "),"#9C27B0":"#7B1FA2 #8E24AA #9C27B0 #AB47BC #BA68C8 #CE93D8 #E1BEE7 #F3E5F5".split(" ")},WebDataRocksToolbar.ColorPicker.prototype.isOpened=function(){return this.popup.parentElement&&this.popup.parentElement.classList.contains("wdr-popup-opened")},WebDataRocksToolbar.ColorPicker.prototype.drawShades=function(e){if(e)for(var t=this.shadeColors.children,i=0;i<t.length;i++){var r=t[i];r.setAttribute("data-c",e[i]),r.style.backgroundColor=e[i],r.style.borderRight="#FFFFFF"==e[i]?"1px solid #d5d5d5":"none",r.style.borderBottom="#FFFFFF"==e[i]?"1px solid #d5d5d5":"none"}},WebDataRocksToolbar.ColorPicker.prototype.setColor=function(e,t,i){"string"==typeof e&&0==e.indexOf("0x")&&(e="#"+e.substr(2)),"bg"==t?(this.backgroundColor=e,this.colorPickerButton.style.backgroundColor=e):(this.fontColor=e,this.colorPickerIcon.style.color=e),this.colorInput.value=e,this.colorPreview.style.backgroundColor=e,this.drawSelected(),i&&this.changeHandler&&this.changeHandler()},WebDataRocksToolbar.ColorPicker.prototype.drawSelected=function(){var e="bg"==this.currentType?this.backgroundColor:this.fontColor,t=this.findMain(e);this.drawShades(this.colors[t]);for(var i=this.mainColors.children,r=0;r<i.length;r++)i[r].classList.remove("wdr-current");for((t=this.mainColors.querySelector("[data-c='"+t+"']"))&&t.classList.add("wdr-current"),i=this.shadeColors.children,r=0;r<i.length;r++)i[r].classList.remove("wdr-current");(e=this.shadeColors.querySelector("[data-c='"+e+"']"))&&e.classList.add("wdr-current")},WebDataRocksToolbar.ColorPicker.prototype.findMain=function(e){for(var t in"string"==typeof e&&0==e.indexOf("0x")&&(e="#"+e.substr(2)),this.colors)if(0<=this.colors[t].indexOf(e))return t},WebDataRocksToolbar.ColorPicker.prototype.isColor=function(e){return e.match(/^#?[0-9A-Fa-f]{6}$/g)},WebDataRocksToolbar.ColorPicker.prototype.closePopup=function(){this.popup.parentElement&&this.popup.parentElement.classList.remove("wdr-popup-opened")},WebDataRocksToolbar.ColorPicker.prototype.openPopup=function(){for(var e=this.toolbar.toolbarWrapper.querySelectorAll(".wdr-colorpick-popup"),t=0;t<e.length;t++)e[t].parentElement.classList.remove("wdr-popup-opened");this.popup.parentElement&&(e=this.toolbar.toolbarWrapper.querySelector("#wdr-popup-conditional .wdr-panel-content"),t=this.getWhere(this.colorPickerButton,e),0>this.getWhere(this.colorPickerButton,document.body).top-this.popup.clientHeight?(this.popup.classList.remove("wdr-arrow-down"),this.popup.classList.add("wdr-arrow-up"),this.popup.style.top=this.colorPickerButton.clientHeight+t.top+11+"px",this.popup.style.bottom=""):(this.popup.classList.add("wdr-arrow-down"),this.popup.classList.remove("wdr-arrow-up"),this.popup.style.bottom=e.clientHeight-t.top+5+"px",this.popup.style.top=""),this.popup.style.left=t.left+this.colorPickerButton.clientWidth/2+2+"px",this.popup.parentElement.classList.add("wdr-popup-opened"))},WebDataRocksToolbar.ColorPicker.prototype.getWhere=function(e,t){var i=0,r=0;if(e.offsetParent){i=e.offsetLeft,r=e.offsetTop;for(var n=e;(n=n.parentNode)&&n!=t;)i-=0,r-=n.scrollTop?n.scrollTop:0;for(;(e=e.offsetParent)&&e!=t;)i+=e.offsetLeft,r+=e.offsetTop}return{top:r+0,left:i+0}},function(e,t){"function"==typeof define&&define.amd&&define("webdatarocks",[],t),e.WebDataRocks=t()}(window,(function(){return function(e){var t,i,r,n,o,s,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});!function(e){var t=function(){function e(e,t,i){void 0===t&&(t=null),void 0===i&&(i=null),this.type=e,this.target=t,this.data=i}return e.isNativeType=function(e){return-1<"fullscreenchange mozfullscreenchange webkitfullscreenchange MSFullscreenChange focusin focusout touchstart touchmove touchend touchenter touchleave touchcancel".split(" ").indexOf(e)},e.COMPLETE="event_complete",e.CONNECTED="event_connected",e.PROGRESS="event_progress",e.SELECT="event_select",e.CHANGE="event_change",e.ERROR="event_error",e.OPENED="event_opened",e.CLOSED="event_closed",e.CANCEL="event_cancel",e.OPEN="event_open",e.CLOSE="event_close",e.RESIZE="event_resize",e}();e._Event=t,t=function(){function t(){this.dispatchActive=!1,this._listeners=[],this._addedListeners=[],this._deletedListeners=[]}return t.prototype.areListenersEqual=function(e,t){return e.type==t.type&&e.handler==t.handler},t.prototype.hasEventListener=function(e,t){if(s.nullOrUndefined(this._listeners[e]))return!1;for(var i=0;i<this._listeners[e].length;i++)if(this.areListenersEqual(this._listeners[e][i],t))return!0;return!1},t.prototype.addEventListener=function(e,t,i){if(void 0===i&&(i=0),!this.hasEventListener(e,t={type:e,handler:t,priority:i}))if(this.dispatchActive)s.nullOrUndefined(this._addedListeners[e])&&(this._addedListeners[e]=[]),this._addedListeners[e].push(t);else if(s.nullOrUndefined(this._listeners[e])&&(this._listeners[e]=[]),0==this._listeners[e].length)this._listeners[e].push(t);else{this._listeners[e][this._listeners[e].length-1].priority>=i&&this._listeners[e].push(t);for(var r=0;r<this._listeners[e].length;r++)if(this._listeners[e][r].priority<i){this._listeners[e].splice(r,0,t);break}}},t.prototype.removeEventListener=function(e,t){if(!s.nullOrUndefined(this._listeners[e])){for(var i={type:e,handler:t},r=this._listeners[e].slice(0),n=[],o=0;o<r.length;o++)this.areListenersEqual(r[o],i)?this.dispatchActive&&(s.nullOrUndefined(this._deletedListeners[e])&&(this._deletedListeners[e]=[]),this._deletedListeners[e].push(r[o])):n.push(r[o]);this._listeners[e]=n}},t.prototype.removeAllEventListeners=function(e){void 0===e?(this._listeners=[],this._addedListeners=[],this._deletedListeners=[]):(s.nullOrUndefined(this._listeners)||(this._listeners[e]=[]),s.nullOrUndefined(this._addedListeners)||(this._addedListeners[e]=[]),s.nullOrUndefined(this._deletedListeners)||(this._deletedListeners[e]=[]))},t.prototype.dispatch=function(e){if(!s.nullOrUndefined(this._listeners[e.type])){this.dispatchActive=!0;for(var t=this._listeners[e.type].slice(0),i=0;i<t.length;i++){if(!s.nullOrUndefined(this._deletedListeners[e.type])){var r,o=!1;for(r in this._deletedListeners[e.type])this.areListenersEqual(t[i],this._deletedListeners[e.type][r])&&(o=!0);if(o)continue}t[i].handler.call(this,e instanceof n.model.APIEvent?e.data:e)}for(var a in delete this._deletedListeners[e.type],this._addedListeners){if(s.nullOrUndefined(this._listeners[a]))t=[];else{if(!(this._listeners[a]instanceof Array))continue;t=this._listeners[a].slice(0)}if(!s.nullOrUndefined(this._addedListeners[a]))for(i=0;i<this._addedListeners[a].length;i++)if(0==t.length)t.push(this._addedListeners[a][i]);else for(t[t.length-1].priority==this._addedListeners[a][i].priority&&t.push(this._addedListeners[a][i]),e=0;e<t.length;e++)if(t[e].priority<this._addedListeners[a][i].priority){t.splice(e,0,this._addedListeners[a][i]);break}this._listeners[a]=t,this._addedListeners[a]=[]}this.dispatchActive=!1}},t.prototype.dispatchWith=function(t,i,r){t=new e._Event(t,null==i?this:i,r),this.dispatch(t)},t}(),e.EventDispatcher=t}(t||(t={})),function(e){var t,i;t=e.dragndrop||(e.dragndrop={}),i=function(){function t(){var e=this;this.distance=5,this._lastDraggable=null,s.fmdocument.addEventListener("mousemove",(function(t){return e.onMouseMove(t)})),s.fmdocument.addEventListener("touchmove",(function(t){return e.onTouchMove(t)}),!1),s.fmdocument.addEventListener("mouseup",(function(t){return e.onMouseUp(t)})),s.fmdocument.addEventListener("touchend",(function(t){return e.onTouchEnd(t)})),s.fmdocument.addEventListener("touchcancel",(function(t){return e.onTouchEnd(t)}))}return t.getInstance=function(){return t.instance||(t.instance=new t),t.instance},t.dispose=function(){t.instance=null},t.prototype.makeDraggable=function(e,t){var i=this;e.addClass("wdr-draggable");var r=function(r){t.handle&&!r.target.matches(t.handle)||i.dragElement==e||(null!=i.dragElement&&i.stopDrag(t,r),i.dragElement=e,i.dragOptions=t,i.startX=i.getX(r),i.startY=i.getY(r))};e.addEventListener("mousedown",r),e.addEventListener("touchstart",r)},t.prototype.getX=function(e){return e instanceof MouseEvent?e.clientX:e.changedTouches[0].clientX},t.prototype.getY=function(e){return e instanceof MouseEvent?e.clientY:e.changedTouches[0].clientY},t.prototype.onMouseMove=function(e){1==e.which&&this.dragElement&&(this.dragHelper&&this.dragElement.hasClass("wdr-dragging")?(this.setHelperPosition(e.clientX,e.clientY),this.dragOptions.onDrag&&this.dragOptions.onDrag(this.dragElement,e),e.preventDefault()):s.nullOrUndefined(this.dragOptions.onDragStart)||this.dragOptions.onDragStart(this.dragElement,e)?(this.dragHelper=this.dragOptions.createHelper(this.dragElement),this.dragHelper.css("opacity",0),n._view.PivotView.stage.container.addChild(this.dragHelper),this.setHelperPosition(e.clientX,e.clientY,!0),this.dragElement.addClass("wdr-dragging")):(this.dragElement=null,this.dragHelper.removeFromParent(!0),this.dragHelper=null))},t.prototype.isDistanceOK=function(e,t){return Math.abs(this.startX-e)>this.distance||Math.abs(this.startY-t)>this.distance},t.prototype.setHelperPosition=function(e,t,i){if(void 0===i&&(i=!1),null!=this.dragHelper){var r=n._view.PivotView.stage.container.getOffset();this.dragHelper.position({top:t-r.top,left:e-r.left}),this.isDistanceOK(e,t)&&(this.dragHelper.css("opacity",1),this.dragElement.addClass("wdr-dragging-move")),i&&null!=this.dragElement&&(r=this.dragElement.getOffset(),t=Math.max(0,Math.min(this.dragElement.height,t-r.top)),e=Math.max(0,Math.min(this.dragElement.width,this.dragHelper.width,e-r.left)),this.dragHelper.css("margin-top",-t+"px"),this.dragHelper.css("margin-left",-e+"px"))}},t.prototype.onTouchMove=function(t){if(this.dragElement){var i=t.touches[0];if(this.dragHelper&&this.dragElement.hasClass("wdr-dragging")){if(this.setHelperPosition(i.clientX,i.clientY),this.dragOptions.onDrag&&this.dragOptions.onDrag(this.dragElement,t),t.preventDefault(),i=t.changedTouches[0],i=e.UIElement.convert(document.elementFromPoint(i.clientX,i.clientY))){var r=i.closest(".wdr-droppable");r&&r.droppableOptions&&r.droppableOptions.onDragOver&&(r.droppableOptions.onDragOver(this.dragElement,this.dragHelper,r,t),this._lastDraggable=r)}(null==i||null==r)&&null!=this._lastDraggable&&this._lastDraggable.droppableOptions&&this._lastDraggable.droppableOptions.onDragLeave&&this._lastDraggable.droppableOptions.onDragLeave(this.dragElement,this.dragHelper,this._lastDraggable,t)}else s.nullOrUndefined(this.dragOptions.onDragStart)||this.dragOptions.onDragStart(this.dragElement,t)?(this.dragHelper=this.dragOptions.createHelper(this.dragElement),this.dragHelper.css("opacity",0),n._view.PivotView.stage.container.addChild(this.dragHelper),this.setHelperPosition(i.clientX,i.clientY,!0),this.dragElement.addClass("wdr-dragging")):(this.dragElement=null,this.dragHelper.removeFromParent(!0),this.dragHelper=null)}},t.prototype.onMouseUp=function(e){this.stopDrag(this.dragOptions,e)},t.prototype.onTouchEnd=function(t){for(var i=t.changedTouches[0],r=i=e.UIElement.convert(document.elementFromPoint(i.clientX,i.clientY));i;){if(i.hasClass("wdr-droppable")){s.nullOrEmpty(i.droppableOptions.itemSelector)||(r=r.closest(i.droppableOptions.itemSelector)),i.droppableOptions.onDrop(this.dragElement,i,r,t);break}i=i.parent}this.stopDrag(this.dragOptions,t)},t.prototype.stopDrag=function(e,t){null!=this.dragHelper&&(this.dragHelper.removeFromParent(!0),this.dragHelper=null),null!=this.dragElement&&(this.dragElement.removeClass("wdr-dragging"),this.dragElement.removeClass("wdr-dragging-move"),e.onDragEnd&&this.isDistanceOK(this.getX(t),this.getY(t))&&e.onDragEnd(this.dragElement,t),this.dragElement=null),this._lastDraggable=null,this.startY=this.startX=NaN},t.prototype.makeDroppable=function(t,i,r){var n=this;t.hasClass("wdr-droppable")||(t.addClass("wdr-droppable"),t.addEventListener("mouseenter",(function(e){null!=n.dragElement&&1==e.which&&r.onDragEnter&&r.onDragEnter(n.dragElement,n.dragHelper,i,e)})),t.addEventListener("mouseleave",(function(e){null!=n.dragElement&&1==e.which&&r.onDragLeave&&r.onDragLeave(n.dragElement,n.dragHelper,i,e)})),t.addEventListener("mouseover",(function(e){null!=n.dragElement&&1==e.which&&r.onDragOver&&r.onDragOver(n.dragElement,n.dragHelper,i,e)})),t.addEventListener("mouseup",(function(i){if(null!=n.dragElement&&1==i.which){var o=e.UIElement.convert(i.target);s.nullOrEmpty(r.itemSelector)||(o=o.closest(r.itemSelector)),r.onDrop(n.dragElement,t,o,i)}})))},t}(),t.DragManager=i}(r||(r={})),function(e){var i=function(t){function i(i,r){void 0===i&&(i="div"),void 0===r&&(r="");var n=t.call(this)||this;return n.container=new e.UIElement(i),n.container.addClass("wdr-ui "+r),s.browserVersion().isMobile&&n.container.addClass("wdr-ui-mobile"),n.validate(),n}return a(i,t),i.prototype.validate=function(){this.invalidHash={}},i.prototype.invalidate=function(e){void 0===e&&(e="all"),this.invalidHash[e]=!0,this.draw()},i.prototype.isInvalid=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(this.invalidHash.all)return!0;for(t=0;t<e.length;t++)if(this.invalidHash[e[t]])return!0;return!1},i.prototype.draw=function(){this.validate()},i.prototype.validateNow=function(){this.invalidate()},i.prototype.show=function(){this.container.show()},i.prototype.hide=function(){this.container.hide()},i.prototype.getId=function(){return this.container.attr("id")},i.prototype.setId=function(e){this.container.attr("id",e)},i.prototype.getName=function(){return this.name},i.prototype.setName=function(e){this.name=e},i.prototype.html=function(e){return void 0===e?this.container.html():(this.container.html(e),this)},i.prototype.setEnabled=function(e){this.container.toggleClass("wdr-ui-disabled",!e)},i.prototype.getEnabled=function(){return!this.container.hasClass("wdr-ui-disabled")},i.prototype.addClass=function(e){void 0===e&&(e=""),this.container.addClass(e)},i.prototype.removeClass=function(e){this.container.removeClass(e)},Object.defineProperty(i.prototype,"padding",{get:function(){return this.container.padding},set:function(e){},enumerable:!0,configurable:!0}),i.prototype.getWidth=function(e){return this.container.getWidth(e)},i.prototype.setWidth=function(e){this.getWidth()!==e&&(this.container.setWidth(e),this.invalidate("size"))},i.prototype.getHeight=function(e){return void 0===e&&(e=!1),this.container.getHeight(e)},i.prototype.setHeight=function(e){this.getHeight()!==e&&(this.container.setHeight(e),this.invalidate("size"))},i.prototype.isVisible=function(e){return void 0===e&&(e=void 0),void 0!==e&&(e?this.show():this.hide()),this.container.visible},i.prototype.position=function(){return this.container.position()},i.prototype.addChild=function(e,t){void 0===t&&(t=!1),t?this.container.prepend(e.container):this.container.append(e.container)},i.prototype.removeFromParent=function(e){void 0===e&&(e=!1),e?this.container.remove():this.container.detach()},i.prototype.getX=function(){return this.container.left},i.prototype.getY=function(){return this.container.top},i.prototype.hitTestPoint=function(e,t){return e>=this.getX()&&e<=this.getX()+this.getWidth()&&t>=this.getY()&&t<=this.getY()+this.getHeight()},i.prototype.addEventListener=function(e,t){this.container.addEventListener(e,t)},i.prototype.removeEventListener=function(e,t){this.container.removeEventListener(e,t)},i.prototype.dispatch=function(e){this.container.dispatch(e)},i.prototype.dispatchWith=function(e,t,i){this.container.dispatchWith(e,t,i)},i.prototype.addLayoutClasses=function(e){void 0===e&&(e=!1),e=e?this.getWidth(!0):n._view.PivotView.stageWidth,this.container.toggleClass("wdr-layout-tablet",768>e),this.container.toggleClass("wdr-layout-mobile",580>e),this.container.toggleClass("wdr-layout-mobile-small",460>e)},i}(t.EventDispatcher);e.UIComponentBase=i}(r||(r={})),function(e){var i=function(i){function r(e,t){void 0===e&&(e="div"),void 0===t&&(t="");var r=i.call(this)||this;return r.display="block",r.frames=[],r.__handlers=[],r.element="string"==typeof e?document.createElement(e):e,r.addClass("wdr-ui-element"),r.addClass(t),r}return a(r,i),Object.defineProperty(r.prototype,"element",{get:function(){return this._element},set:function(e){(this._element=e)&&(this._element.uielement=this)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"id",{get:function(){return this.element.id},set:function(e){this.element.id=e},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"parent",{get:function(){return r.convert(this.element.parentElement)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"nodeName",{get:function(){return this._element.nodeName.toLowerCase()},enumerable:!0,configurable:!0}),r.prototype.addChild=function(e){this.element.appendChild(e.element)},r.prototype.children=function(){for(var e=this.element.firstElementChild,t=[];e;)t.push(r.convert(e)),e=e.nextElementSibling;return t},r.prototype.contains=function(e){return this.element.contains(e.element)},r.prototype.append=function(e){return e&&this.addChild(e),this},r.prototype.prepend=function(e){return this.element.insertBefore(e.element,this.element.firstChild),this},r.prototype.before=function(e){return this.element.parentNode&&this.element.parentNode.insertBefore(e.element,this.element),this},r.prototype.after=function(e){return this.element.parentNode&&this.element.nextElementSibling?this.element.parentNode.insertBefore(e.element,this.element.nextElementSibling):this.append(e),this},r.prototype.addComponent=function(e){this.element.appendChild(e.container.element)},r.prototype.removeFromParent=function(e){void 0===e&&(e=!0),e?this.remove():this.detach()},r.prototype.remove=function(){null!=this.element&&(this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.dispose())},r.prototype.detach=function(){if(null!=this.element&&this.element.parentNode){var e=this.element.cloneNode(!0);this.element.parentNode.removeChild(this.element),this.element=e}},r.prototype.removeAllChildren=function(){for(;this.element&&this.element.firstChild;){var e=r.convert(this.element.firstChild);e&&e.dispose&&e.dispose(),this.element.removeChild(this.element.firstChild)}},r.prototype.clone=function(){return r.convert(this.element.cloneNode(!0))},r.convert=function(e){return e&&e.nodeType==Node.ELEMENT_NODE?s.nullOrUndefined(e.uielement)?new r(e):e.uielement:null},r.prototype.get=function(e){var t=this.children();return 0<t.length?t[e]:null},r.prototype.find=function(e,t){if(void 0===t||0==t)return r.convert(this.element.querySelector(e));for(var i=this.element.querySelectorAll(e),n=[],o=0;o<i.length;o++)n.push(r.convert(i[o]));return n},r.prototype.closest=function(e){if(!this.element)return null;for(var t=this.element;null!=t;){if(t.matches){if(t.matches(e))return t==this.element?this:r.convert(t)}else if(t.msMatchesSelector(e))return t==this.element?this:r.convert(t);t=t.parentElement}return null},r.prototype.addClass=function(e){if(!this.element)return this;for(var t=(e=e.trim()).split(" "),i=0;i<t.length;i++)0<t[i].length&&(s.detectBrowser().isMsie?(e=this.element.getAttribute("class"),s.nullOrUndefined(e)?this.element.setAttribute("class",t[i]):-1==e.split(" ").indexOf(t[i])&&this.element.setAttribute("class",e+" "+t[i])):0==this.element.classList.contains(t[i])&&this.element.classList.add(t[i]));return this},r.prototype.removeClass=function(e){if(!this.element)return this;if(0<(e=e.trim()).length)if(s.detectBrowser().isMsie){var t=this.element.getAttribute("class");s.nullOrUndefined(t)||-1<(e=(t=t.split(" ")).indexOf(e))&&(t.splice(e,1),this.element.setAttribute("class",t.join(" ")))}else this.element.classList.contains(e)&&this.element.classList.remove(e);return this},r.prototype.toggleClass=function(e,t){t?this.addClass(e):this.removeClass(e)},r.prototype.hasClass=function(e){return this.element.classList.contains(e)},r.prototype.disableSelection=function(){return this.addClass("wdr-noselect"),this},r.prototype.enableSelection=function(){return this.addClass("wdr-selectable"),this},r.prototype.getWidth=function(e){if(void 0===e&&(e=!1),!this.element)return 0;var t=window.getComputedStyle(this.element);return e=e?0:(parseFloat(t.paddingLeft)||0)+(parseFloat(t.paddingRight)||0),this.element.clientWidth-e},r.prototype.setWidth=function(e){return"number"==typeof e?this.element.style.width=e+"px":"string"==typeof e&&(this.element.style.width=e),this},Object.defineProperty(r.prototype,"width",{get:function(){return this.getWidth()},set:function(e){this.setWidth(e)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"padding",{get:function(){var e=window.getComputedStyle(this.element);return{left:parseFloat(e.paddingLeft)||0,right:parseFloat(e.paddingRight)||0,top:parseFloat(e.paddingTop)||0,bottom:parseFloat(e.paddingBottom)||0}},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"borderWidth",{get:function(){var e=window.getComputedStyle(this.element);return{left:parseFloat(e.borderLeftWidth||e.borderWidth)||0,right:parseFloat(e.borderRightWidth||e.borderWidth)||0,top:parseFloat(e.borderTopWidth||e.borderWidth)||0,bottom:parseFloat(e.borderBottomWidth||e.borderWidth)||0}},enumerable:!0,configurable:!0}),r.prototype.getHeight=function(e){void 0===e&&(e=!1);var t=window.getComputedStyle(this.element);return e=e?0:(parseFloat(t.paddingTop)||0)+(parseFloat(t.paddingBottom)||0),0>this.element.clientHeight-e?0:this.element.clientHeight-e},r.prototype.setHeight=function(e){return"number"==typeof e?this.element.style.height=e+"px":"string"==typeof e&&(this.element.style.height=e),this},Object.defineProperty(r.prototype,"height",{get:function(){return this.getHeight()},set:function(e){this.setHeight(e)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"left",{get:function(){return this.element.getBoundingClientRect().left},set:function(e){this.element.style.left=e+"px"},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"top",{get:function(){return this.element.getBoundingClientRect().top},set:function(e){this.element.style.top=e+"px"},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"right",{get:function(){return this.element.getBoundingClientRect().right},set:function(e){this.element.style.right=e+"px"},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"bottom",{get:function(){return this.element.getBoundingClientRect().bottom},set:function(e){this.element.style.bottom=e+"px"},enumerable:!0,configurable:!0}),r.prototype.outerHtml=function(){return this.element.outerHTML},r.prototype.html=function(e){return void 0===e?this.element.innerHTML:(this.element.innerHTML=e,this)},r.prototype.empty=function(){this.html("")},r.prototype.clear=function(){this.empty()},r.prototype.text=function(e){return void 0===e?this.element.textContent:("input"==this.element.tagName.toLowerCase()?this.element.value=e:this.element.textContent=e,this)},r.prototype.focus=function(){return this.element.focus(),this},r.prototype.blur=function(){return this.element.blur(),this},r.prototype.show=function(){this.element.style.display=this.display},r.prototype.hide=function(){this.element.style.display="none"},Object.defineProperty(r.prototype,"x",{get:function(){return this.element.offsetLeft},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"y",{get:function(){return this.element.offsetTop},enumerable:!0,configurable:!0}),r.prototype.offset=function(e){if(void 0===e)return this.getOffset();this.css("left",e.left+"px"),this.css("top",e.top+"px")},r.prototype.getBoundingClientRect=function(){return this.element.getBoundingClientRect()},r.prototype.position=function(e){if(void 0===e)return{top:this.y,left:this.x};this.offset(e)},r.prototype.attr=function(e,t){if(void 0===t)return this.element.getAttribute(e);try{this.element.setAttribute(e,t)}catch(i){this.element.attributes[e]=t}return this},r.prototype.removeAttr=function(e){return this.element.removeAttribute(e),this},r.prototype.css=function(e,t){return void 0===t?window.getComputedStyle(this.element)[r.toCamelCase(e)]:(this.element.style[r.toCamelCase(e)]=t,this)},r.toCamelCase=function(e){var t=e.split("-");if(1<t.length){for(e=1;e<t.length;e++)t[e]=t[e].charAt(0).toUpperCase()+t[e].substr(1);return t.join("")}return e},r.prototype.val=function(){return"input"==this.element.tagName.toLowerCase()||"textarea"==this.element.tagName.toLowerCase()?this.element.value:this.element.textContent},r.prototype.requestAnimationFrame=function(e){var t=0;return window.requestAnimationFrame?t=window.requestAnimationFrame(e):window.msRequestAnimationFrame?t=window.msRequestAnimationFrame(e):window.mozRequestAnimationFrame?t=window.mozRequestAnimationFrame(e):window.webkitRequestAnimationFrame?t=window.webkitRequestAnimationFrame(e):e.call(null),this.frames.push(t),t},r.prototype.cancelAnimationFrame=function(e){this.frames.splice(this.frames.indexOf(e),1),0!=e&&(null!=window.cancelAnimationFrame?window.cancelAnimationFrame(e):null!=window.msCancelRequestAnimationFrame?window.msCancelRequestAnimationFrame(e):null!=window.mozCancelAnimationFrame?window.mozCancelAnimationFrame(e):null!=window.webkitCancelAnimationFrame&&window.webkitCancelAnimationFrame(e))},Object.defineProperty(r.prototype,"visible",{get:function(){return this.element&&"none"!=this.css("display")},set:function(e){e?this.show():this.hide()},enumerable:!0,configurable:!0}),r.prototype.getOffset=function(e){if(void 0===e&&(e=null),null==e)return this.element.getBoundingClientRect();for(var t=0,i=0,r=this.element;r&&r!=e&&!isNaN(r.offsetLeft)&&!isNaN(r.offsetTop);)t+=r.offsetLeft-r.scrollLeft,i+=r.offsetTop-r.scrollTop,r=r.offsetParent;return{top:i,left:t}},r.prototype.getScrollTop=function(){return this.element.scrollTop},r.prototype.setScrollTop=function(e){return this.element.scrollTop=e,this},r.prototype.setScrollLeft=function(e){return this.element.scrollLeft=e,this},r.prototype.addEventListener=function(e,r,n){void 0!==this.element["on"+e]||t._Event.isNativeType(e)?(s.nullOrUndefined(this.__handlers[e])&&(this.__handlers[e]=[]),this.__handlers[e][r.toString()]=function(e){r(e)},this.element.addEventListener(e,this.__handlers[e][r.toString()],n)):i.prototype.addEventListener.call(this,e,r,n)},r.prototype.removeEventListener=function(e,r,n){void 0!==this.element["on"+e]||t._Event.isNativeType(e)?this.__handlers[e]&&this.element.removeEventListener(e,this.__handlers[e][r.toString()],n):i.prototype.removeEventListener.call(this,e,r)},r.prototype.dispatch=function(e){i.prototype.dispatch.call(this,e)},r.prototype.removeAllEventListeners=function(e){for(var t in this.__handlers)if(void 0===e||e==t)for(var r in this.__handlers[t])try{this.element.removeEventListener(t,this.__handlers[t][r],!0),this.element.removeEventListener(t,this.__handlers[t][r],!1)}catch(n){console.error(n)}this.__handlers=[],i.prototype.removeAllEventListeners.call(this,t)},r.prototype.dispose=function(){this.removeAllEventListeners(),this.removeAllChildren(),this._element=this._element.uielement=null;for(var e=0;e<this.frames.length;e++)this.cancelAnimationFrame(this.frames[e]);this.frames=[],this._resizableHelper&&this._resizableHelper.dispose()},r.prototype.refresh=function(){this.html(this.html())},r.prototype.draggable=function(t){e.dragndrop.DragManager.getInstance().makeDraggable(this,t)},r.prototype.droppable=function(t,i){this._droppableOptions=t,e.dragndrop.DragManager.getInstance().makeDroppable(this,i||this,t)},Object.defineProperty(r.prototype,"droppableOptions",{get:function(){return this._droppableOptions},enumerable:!0,configurable:!0}),r.prototype.index=function(){for(var e=0,t=this.element;t=t.previousElementSibling;)e++;return e},r.prototype.resizable=function(t){this._resizableHelper=new e.resizable.ResizableHelper(this,t)},r}(t.EventDispatcher);e.UIElement=i}(r||(r={})),function(e){var i=function(e){function i(t){void 0===t&&(t="");var i=e.call(this,"a","wdr-ui-btn")||this;return i.mouseDownTimeout=0,i.repeatDelay=50,i.addClass(t),i.container.addEventListener("click",(function(e){return i.onClick(e)})),i.container.addEventListener("mousedown",(function(e){return i.onMouseDown()})),i.container.addEventListener("mouseup",(function(e){return i.onMouseUp()})),i.container.addEventListener("mouseout",(function(e){return i.onMouseOut()})),i.container.display="inline-block",i}return a(i,e),i.prototype.onClick=function(e){this.getEnabled()&&this.dispatchWith(i.CLICK_EVENT,this),e.stopImmediatePropagation()},i.prototype.onMouseDown=function(){var e=this;this.container.toggleClass("wdr-ui-pressed",!0),this.mouseDownTimeout=s.fmSetInterval((function(){return e.dispatchMouseDown()}),this.getRepeatDelay())},i.prototype.dispatchMouseDown=function(){this.dispatch(new t._Event(i.MOUSE_DOWN_EVENT,this))},i.prototype.onMouseUp=function(){this.container.toggleClass("wdr-ui-pressed",!1),s.fmClearInterval(this.mouseDownTimeout)},i.prototype.onMouseOut=function(){this.container.toggleClass("wdr-ui-pressed",!1),s.fmClearInterval(this.mouseDownTimeout)},i.prototype.getLabel=function(){return this.label},i.prototype.setRepeatDelay=function(e){this.repeatDelay=e},i.prototype.getRepeatDelay=function(){return this.repeatDelay},i.prototype.setLabel=function(e){this.label!=e&&(this.label=e,this.container.text(this.label))},i.MOUSE_DOWN_EVENT="buttonmousedown",i.CLICK_EVENT="buttonclick",i}(e.UIComponentBase);e.UIButton=i}(r||(r={})),function(e){var t=function(e){function t(t){void 0===t&&(t="");var i=e.call(this,"span","wdr-ui wdr-ui-label")||this;return i.container.display="inline-block",i.setLabel(t),i}return a(t,e),t.prototype.getLabel=function(){return this.label},t.prototype.setLabel=function(e,t){void 0===t&&(t=!1),this.label!=e&&(this.label=e,t?this.container.html(this.label):this.container.text(this.label))},t.prototype.setSelectable=function(e){e?this.container.enableSelection():this.container.disableSelection()},t}(e.UIComponentBase);e.UILabel=t}(r||(r={})),function(e){var i=function(i){function r(){var e=i.call(this,"textarea","wdr-ui-text-area")||this;return e.container.addEventListener("keypress",(function(t){return e.onKeyPressed(t)})),e.container.addEventListener("keyup",(function(t){return e.onKeyUp(t)})),e.container.addEventListener("paste",(function(t){return e.onInputPaste(t)})),e}return a(r,i),r.prototype.onKeyUp=function(e){this.dispatchChange()},r.prototype.onInputPaste=function(e){this.dispatchChange()},r.prototype.dispatchChange=function(){this.dispatch(new t._Event(e.UITextInput.CHANGE_EVENT,this))},r.prototype.getText=function(){return this.container.val()},r.prototype.setText=function(e){this.getText()!=e&&(this.container.element.value=e,this.dispatchChange())},r.prototype.clear=function(){this.setText("")},r.prototype.insertText=function(e){var t=this.getSelectionBeginIndex(),i=this.getSelectionEndIndex(),r=(r=this.getText()).substr(0,t)+e+r.substr(t);this.setText(r),this.setSelection(t+e.length,i+e.length)},r.prototype.setSelection=function(e,t){void 0===t&&(t=-1),this.container.element.focus(),this.container.element.setSelectionRange(e,0>t?e:t)},r.prototype.getSelectionBeginIndex=function(){return this.container.element.selectionStart},r.prototype.getSelectionEndIndex=function(){return this.container.element.selectionEnd},r.prototype.selectAll=function(){this.setSelection(0,this.getText().length)},r.prototype.onKeyPressed=function(e){e.ctrlKey?(this.dispatchWith(r.EVENT_CTRL_ENTER),e.preventDefault()):13==e.keyCode&&(this.dispatchWith(r.EVENT_ENTER),e.preventDefault())},r.EVENT_ENTER="ntr",r.EVENT_CTRL_ENTER="ntl",r}(e.UIComponentBase);e.UITextArea=i}(r||(r={})),function(e){var i=function(e){function i(){var t=e.call(this,"input","wdr-ui-text-input")||this;return t.text="",t.prompt="",t.changeDelay=0,t.changeDispatched=!0,t.container.display="inline-block",t.container.attr("type","text"),t.container.attr("data-placeholder",""),t.container.addEventListener("focusin",(function(e){return t.onFocusIn()})),t.container.addEventListener("focusout",(function(e){return t.onFocusOut()})),t.container.addEventListener("keyup",(function(e){return t.onKeyUp(e)})),t.container.addEventListener("keypress",(function(e){return t.onKeyPressed(e)})),t.container.addEventListener("paste",(function(e){return t.onInputPaste(e)})),t}return a(i,e),i.getChar=function(e){return null==e.which?32>e.keyCode?null:String.fromCharCode(e.keyCode):0!=e.which&&0!=e.charCode?32>e.which?null:String.fromCharCode(e.which):null},i.prototype.onKeyPressed=function(e){if(13==e.keyCode&&this.dispatchWith(i.EVENT_ENTER),!(s.nullOrUndefined(this.restrictRule)||e.ctrlKey||e.altKey||e.metaKey)){var t=i.getChar(e);null!=t&&!1===this.restrictRule.test(t)&&e.preventDefault()}},i.prototype.onKeyUp=function(e){this.container.val()!==this.text&&(this.text=this.container.val(),this.dispatchChange())},i.prototype.onInputPaste=function(e){this.container.val()!==this.text&&(this.text=this.container.val(),this.dispatchChange())},i.prototype.dispatchChange=function(){var e=this;0<this.changeDelay?this.changeDispatched&&(this.changeDispatched=!1,s.fmSetTimeout((function(){return e._dispatchChange()}),this.changeDelay)):this._dispatchChange()},i.prototype._dispatchChange=function(){this.changeDispatched=!0,this.dispatch(new t._Event(i.CHANGE_EVENT,this,this.text))},i.prototype.onFocusIn=function(){0==this.text.length&&(this.container.text(""),this.enablePrompt(!1))},i.prototype.onFocusOut=function(){this.enablePrompt(0==this.text.length)},i.prototype.getText=function(){return this.text=this.container.val()==this.prompt?this.text:this.container.val()},i.prototype.setText=function(e){this.text!=e&&(this.text=e,this.container.text(this.text),this.enablePrompt(0==this.text.length))},i.prototype.clear=function(e){void 0===e&&(e=!0),this.setText(""),e&&this._dispatchChange()},i.prototype.setPrompt=function(e){e!=this.prompt&&(this.prompt=e,this.container.attr("data-placeholder",this.prompt),this.enablePrompt(0==this.text.length))},i.prototype.enablePrompt=function(e){this.container.text(e?this.prompt:this.text),this.container.toggleClass("wdr-ui-prompt",e)},i.prototype.getPrompt=function(){return this.prompt},i.prototype.setRestriction=function(e){this.restrictRule=e},i.prototype.getRestriction=function(){return this.restrictRule},i.prototype.setChangeDelay=function(e){this.changeDelay=e},i.prototype.getChangeDelay=function(){return this.changeDelay},i.prototype.getType=function(){return this.container.attr("type")},i.prototype.setType=function(e){this.container.attr("type",e)},i.CHANGE_EVENT="_",i.EVENT_ENTER="ntr",i}(e.UIComponentBase);e.UITextInput=i}(r||(r={})),function(e){var i=function(i){function r(){var t=i.call(this)||this;return t.container.display="inline-block",t.container.hasClass("wdr-ui-btn")&&t.container.removeClass("wdr-ui-btn"),t.container.addClass("wdr-ui-toggle-btn"),t.selected=0,t.addEventListener(e.UIButton.CLICK_EVENT,(function(){return t.onClick()})),t}return a(r,i),r.prototype.onClick=function(){this.getEnabled()&&(this.toggle(),this.dispatchWith(t._Event.CHANGE,this))},r.prototype.toggle=function(){this.selected=1==this.selected?0:1,this.container.toggleClass("wdr-selected",1==this.selected)},r.prototype.setSelection=function(e){this.selected==e||1<e||-1>e||(this.selected=e,this.container.toggleClass("wdr-selected",1==this.selected))},r.prototype.getSelection=function(){return this.selected},r}(e.UIButton);e.UIToggleButton=i}(r||(r={})),function(e){var t=function(t){function i(){var i=t.call(this)||this;return i.container.display="inline-block",i.container.hasClass("wdr-ui-toggle-btn")&&i.container.removeClass("wdr-ui-toggle-btn"),i.container.addClass("wdr-ui-checkbox"),i.labelHolder=new e.UILabel("Label"),i.container.append(i.labelHolder.container),i}return a(i,t),i.prototype.toggle=function(){t.prototype.toggle.call(this),this.container.toggleClass("wdr-ui-semi-selected",-1==this.getSelection())},i.prototype.setLabel=function(e,t){void 0===t&&(t=!1),null!=this.labelHolder&&this.labelHolder.setLabel(e,t)},i.prototype.getLabel=function(){return null!=this.labelHolder?this.labelHolder.getLabel():""},i.prototype.setSelection=function(e){this.getSelection()==e||1<e||-1>e||(t.prototype.setSelection.call(this,e),this.container.toggleClass("wdr-ui-semi-selected",-1==this.getSelection()))},Object.defineProperty(i.prototype,"checked",{get:function(){return 1==this.getSelection()},set:function(e){this.setSelection(e?1:0)},enumerable:!0,configurable:!0}),i.SELECTED=1,i.UNSELECTED=0,i.SEMI_SELECTED=-1,i}(e.UIToggleButton);e.UICheckBox=t}(r||(r={})),function(e){var t=function(e){function t(){var i=e.call(this,"div","wdr-ui-divider")||this;return i.mouseMoveHandler=function(e){return i.onMouseMove(e)},i.mouseDownHandler=function(e){return i.onMouseDown(e)},i.mouseUpHandler=function(e){return i.onMouseUp(e)},i.direction=t.HORIZONTAL,i.addEventListener("mousedown",i.mouseDownHandler),s.fmdocument.addEventListener("mouseup",i.mouseUpHandler),i.container.disableSelection(),i}return a(t,e),t.prototype.onMouseDown=function(e){this._height=this.direction==t.HORIZONTAL?this.getHeight():this.getWidth(),this._baseOffset=this.container.parent.getOffset(),s.fmdocument.addEventListener("mousemove",this.mouseMoveHandler),e.preventDefault(),e.stopImmediatePropagation()},t.prototype.onMouseMove=function(e){if(this.direction==t.HORIZONTAL){var i=e.clientY-this._baseOffset.top;if(this._containment&&(i<this._containment[1]||i>this._containment[3]))return;this.container.css("top",i-this._height/2+"px"),this.dispatchWith(t.EVENT_MOVED,this,{top:i})}this.direction==t.VERTICAL&&(e=e.clientX-this._baseOffset.left,this._containment&&(e<this._containment[0]||e>this._containment[2])||(this.container.css("left",e-this._height/2+"px"),this.dispatchWith(t.EVENT_MOVED,this,{left:e})))},t.prototype.onMouseUp=function(e){s.fmdocument.removeEventListener("mousemove",this.mouseMoveHandler)},Object.defineProperty(t.prototype,"direction",{get:function(){return this._direction},set:function(e){this._direction=e,this.container.toggleClass("wdr-ui-horizontal",this._direction==t.HORIZONTAL),this.container.toggleClass("wdr-ui-vertical",this._direction==t.VERTICAL),this.container.css("position","absolute")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"containment",{set:function(e){this._containment=e},enumerable:!0,configurable:!0}),t.HORIZONTAL=0,t.VERTICAL=1,t.EVENT_MOVED="divider_moved_event",t}(e.UIComponentBase);e.UIDivider=t}(r||(r={})),function(e){var t=function(e){function t(){return e.call(this,"div","wdr-ui-modal-overlay")||this}return a(t,e),t.prototype.setTransparent=function(e){this.container.toggleClass("wdr-ui-opaque",!1),this.container.toggleClass("wdr-ui-transparent",e)},t.prototype.setOpaque=function(e){this.container.toggleClass("wdr-ui-transparent",!1),this.container.toggleClass("wdr-ui-opaque",e)},t}(e.UIComponentBase);e.UIModalOverlay=t}(r||(r={})),function(e){var t,i;t=e.containers||(e.containers={}),i=function(e){function t(t){return void 0===t&&(t="wdr-ui-container"),e.call(this,"div",t)||this}return a(t,e),t.prototype.removeChild=function(e){this.contains(e)&&e.container.detach()},t.prototype.contains=function(e){return!s.nullOrUndefined(e)&&this.container.contains(e.container)},t.prototype.getWidth=function(){return this.container.width},t.prototype.getHeight=function(){return this.container.height},t.prototype.removeAllChildren=function(){for(var e=this.container.children(),t=e.length-1;0<=t;t--)e[t].removeFromParent()},t}(e.UIComponentBase),t.UIContainer=i}(r||(r={})),function(e){!function(e){var t=function(e){function t(){return e.call(this,"wdr-ui-border-container")||this}return a(t,e),t}(e.UIContainer);e.UIBorderContainer=t}(e.containers||(e.containers={}))}(r||(r={})),function(e){!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t.container.addClass("wdr-ui-window"),t.hide(),t}return a(t,e),t.prototype.setPosition=function(e,t){this.container.offset({left:Math.floor(e),top:Math.floor(t)}),this.container.css("position","absolute")},t.prototype.getPosition=function(){return this.container.offset()},t}(e.UIContainer);e.UIWindow=t}(e.containers||(e.containers={}))}(r||(r={})),function(e){!function(e){var t=function(e){function t(){return e.call(this,"wdr-ui-hgroup")||this}return a(t,e),t}(e.UIContainer);e.UIHGroup=t}(e.containers||(e.containers={}))}(r||(r={})),function(e){!function(e){var t=function(e){function t(){return e.call(this,"wdr-ui-vgroup")||this}return a(t,e),t}(e.UIContainer);e.UIVGroup=t}(e.containers||(e.containers={}))}(r||(r={})),function(e){!function(e){var t=function(e){function t(){return e.call(this,"wdr-ui-panel")||this}return a(t,e),t}(e.UIContainer);e.UIPanel=t}(e.containers||(e.containers={}))}(r||(r={})),function(e){var i,r;r=function(i){function r(t){var r=i.call(this)||this;return r._overlayClickHandler=function(){return r.onOverlayClick()},r.resizeHandler=function(e){return r.onWindowResize(e)},r.isOpaque=!1,r._modalParent=t,r.container.addClass("wdr-ui-popup"),r.hide(),r._overlay=new e.UIModalOverlay,r._overlay.addEventListener("click",r._overlayClickHandler),r._overlay.hide(),r._modalParent&&r._modalParent.addChild(r._overlay.container),r}return a(r,i),r.prototype.onWindowResize=function(e){var t=this;e.target===window&&(this.container.requestAnimationFrame((function(){return t.centerPosition()})),this.addLayoutClasses())},r.prototype.onOverlayClick=function(){this.close()},r.prototype.open=function(){s.fmwindow.addEventListener("resize",this.resizeHandler),this._overlay.show(),this._overlay.container.toggleClass("wdr-ui-opaque",this.isOpaque),this.show(),this.centerPosition(),this.dispatchWith(t._Event.OPENED),this.addLayoutClasses()},r.prototype.close=function(){s.fmwindow.removeEventListener("resize",this.resizeHandler),this._overlay.hide(),this.hide(),this.dispatchWith(t._Event.CLOSED)},r.prototype.centerPosition=function(){if(t=this._modalParent){var e=Math.max(0,(t.getWidth(!0)-this.container.getWidth(!0)-2)/2),t=Math.max(0,(t.getHeight(!0)-this.container.getHeight(!0)-2)/2);this.setPosition(e,t)}},Object.defineProperty(r.prototype,"overlay",{get:function(){return this._overlay},enumerable:!0,configurable:!0}),r}((i=e.containers||(e.containers={})).UIWindow),i.UIPopup=r}(r||(r={})),function(e){!function(e){var t=function(e){function t(){return e.call(this,"wdr-ui-toolbar")||this}return a(t,e),t}(e.UIContainer);e.UIToolbar=t}(e.containers||(e.containers={}))}(r||(r={})),function(e){var t,i;i=function(t){function i(){var i=t.call(this,"wdr-ui-toolbar-mobile")||this;return i.headerDisplay=new e.UILabel,i.headerDisplay.addClass("wdr-ui-header-display"),i.addChild(i.headerDisplay),i}return a(i,t),i.prototype.setHeader=function(e){this.header!=e&&(this.header=e,this.headerDisplay.setLabel(e))},i.prototype.getHeader=function(){return this.header},i.prototype.setLeftItem=function(e){this.leftItem!=e&&(null!=this.leftItem&&this.leftItem.removeFromParent(),this.leftItem=e,null!=this.leftItem&&(this.leftItem.addClass("wdr-ui-left"),this.addChild(this.leftItem)))},i.prototype.setRightItem=function(e){this.rightItem!=e&&(null!=this.rightItem&&this.rightItem.removeFromParent(),this.rightItem=e,null!=this.rightItem&&(this.rightItem.addClass("wdr-ui-right"),this.addChild(this.rightItem)))},i}((t=e.containers||(e.containers={})).UIContainer),t.UIToolbarMobile=i}(r||(r={})),function(e){!function(e){var t=function(){function e(){this.items=[],this.allItems=[]}return e.prototype.setItems=function(e){this.allItems=e},e.prototype.getItems=function(e,t){if(0>e||t>this.allItems.length+1)return[];this.items.length=0;for(var i=e;i<t;i++)this.items.push(this.allItems[i]);return this.items},e.prototype.getLength=function(){return this.allItems.length},e}();e.SmartDataProvider=t}(e.dataProviders||(e.dataProviders={}))}(r||(r={})),function(e){var i,r;i=e.lists||(e.lists={}),r=function(i){function r(){var e=i.call(this,"ul","wdr-ui-list")||this;return e.rowHeight=s.browserVersion().isMobile?r.DEFAULT_ROW_HEIGHT_MOBILE:r.DEFAULT_ROW_HEIGHT,e.selectedItems=[],e.selectedIndices=[],e.markSelected=!1,e.useCache=!0,e._allowMultipleSelection=!1,e.dataProvider=[],e.itemsCache=[],e.visibleItems=[],e.labelField="label",e.itemRendererFactory=e.defaultItemRendererFactory,e.selectedItem=null,e.selectedIndex=-1,e.container.addEventListener("click",(function(t){return e.onItemClick(t)})),e}return a(r,i),r.prototype.getRowHeight=function(){return 0<this.visibleItems.length?this.visibleItems[0].getHeight():this.rowHeight},r.prototype.getStartIdx=function(){return 0},r.prototype.getRowCount=function(){return this.dataProvider.length},r.prototype.draw=function(){this.isInvalid("data")&&this.drawItems(),this.validate()},r.prototype.drawItems=function(){var e=this,t=this.container.getScrollTop();this.removeAllItems();for(var i,r=this.getDataProvider(),n=0;n<r.length;n++)i=this.getItem(r[n],n),this.addItem(i);this.container.setScrollTop(t),this.container.requestAnimationFrame((function(){0<e.visibleItems.length&&(e.rowHeight=e.visibleItems[0].getHeight())}))},r.prototype.getItem=function(e,t){var i;return this.useCache&&0<this.itemsCache.length?((i=this.itemsCache.pop()).setData(e),i.setIndex(t)):(i=this.itemRendererFactory(e,t)).setLabelField(this.labelField),i},r.prototype.addItem=function(e){this.visibleItems.push(e),this.addChild(e)},r.prototype.removeAllItems=function(){for(;0<this.visibleItems.length;)this._removeItem(this.visibleItems.pop())},r.prototype.removeItem=function(e){for(var t=0;t<this.visibleItems.length;t++)if(this.visibleItems[t]===e){this.visibleItems.splice(t,1);break}this._removeItem(e)},r.prototype._removeItem=function(e){null!=this.container.find(e.container.element.nodeName)&&e.container.remove()},r.prototype.onItemClick=function(i){if(null!=(i=e.UIElement.convert(i.target).closest("li"))){i=parseInt(i.attr("data-index"));var r=this.getStartIdx()+i,n=this.selectedItem,o=this.selectedIndex;this.setSelectedIndex(i),this.dispatchWith(t._Event.CHANGE,this,{selectedItem:this.selectedItem,selectedIndex:this.selectedIndex,realIndex:r,prevItem:n,prevIndex:o})}},r.prototype.getDataProvider=function(){return this.dataProvider},r.prototype.setDataProvider=function(e,t){void 0===t&&(t=!0),this.dataProvider=e,t&&this.invalidate("data")},r.prototype.getLabelField=function(){return this.labelField},r.prototype.setLabelField=function(e){this.labelField!=e&&(this.labelField=e,this.invalidate("data"))},r.prototype.setItemRendererFactory=function(e){this.itemRendererFactory=e,this.invalidate("data")},r.prototype.validateItemAt=function(e){-1<e&&e<this.visibleItems.length&&this.visibleItems[e].validateNow()},r.prototype.validateItem=function(e,t){void 0===t&&(t="");for(var i,r=0;r<this.visibleItems.length;r++)if(i=this.visibleItems[r].getData(),0==t.length&&i===e||0<t.length&&i.hasOwnProperty(t)&&i[t]==e[t]){this.visibleItems[r].validateNow();break}},r.prototype.getSelectedIndex=function(){return this.selectedIndex},r.prototype.setSelectedIndex=function(e){var t=this.getDataProvider();-1<e&&e<t.length?this.updateSelectedItem(t[e],e):this.updateSelectedItem(null,-1)},r.prototype.getSelectedItem=function(){return this.selectedItem},r.prototype.setSelectedItem=function(e,t){var i=this.getDataProvider();if(s.nullOrUndefined(e)||s.nullOrEmpty(t))-1<i.indexOf(e)&&this.updateSelectedItem(e,i.indexOf(e));else for(var r=0;r<i.length;r++)if(!s.nullOrUndefined(i[r])&&i[r][t]==e[t]){this.updateSelectedItem(i[r],r);break}},r.prototype.updateSelectedItem=function(e,t){if(this.allowMultipleSelection){var i=-1<this.selectedIndices.indexOf(t);!(i=!i)&&2>this.selectedIndices.length||(i?(this.selectedIndices.push(t),this.selectedItems.push(e)):(this.selectedIndices.splice(this.selectedIndices.indexOf(t),1),this.selectedItems.splice(this.selectedItems.indexOf(e),1)),this.markSelected&&(e.isSelected=i,this.validateItemAt(t)))}else this.markSelected&&null!=this.selectedItem&&(this.selectedItem.isSelected=!1,this.validateItemAt(this.selectedIndex)),this.selectedItem=e,this.selectedIndex=t,this.markSelected&&null!=this.selectedItem&&(this.selectedItem.isSelected=!0,this.validateItemAt(this.selectedIndex))},r.prototype.defaultItemRendererFactory=function(t,i){var r=new e.renderers.UIItemRenderer;return r.setData(t),r.setIndex(i),r},r.prototype.getMinHeight=function(){return this.getRowHeight()},r.prototype.getMaxHeight=function(){return this.getRowHeight()*this.getDataProvider().length},Object.defineProperty(r.prototype,"allowMultipleSelection",{get:function(){return this._allowMultipleSelection},set:function(e){this._allowMultipleSelection=e},enumerable:!0,configurable:!0}),r.prototype.getSelectedIndices=function(){return this.selectedIndices},r.prototype.setSelectedIndices=function(e){this.selectedIndices=e,this.selectedItems.length=0,e=this.getDataProvider();for(var t=0;t<e.length;t++)-1<this.selectedIndices.indexOf(t)?(this.selectedItems.push(e[t]),this.markSelected&&(e[t].isSelected=!0,this.validateItemAt(t))):this.markSelected&&(e[t].isSelected=!1,this.validateItemAt(t))},r.prototype.getSelectedItems=function(){return this.selectedItems},r.prototype.setSelectedItems=function(e){this.selectedItems=e,this.selectedIndices.length=0,e=this.getDataProvider();for(var t=0;t<e.length;t++)-1<this.selectedItems.indexOf(e[t])?(this.selectedIndices.push(t),this.markSelected&&(e[t].isSelected=!0,this.validateItemAt(t))):this.markSelected&&(e[t].isSelected=!1,this.validateItemAt(t))},r.prototype.droppable=function(e){this.container.droppable(e,this)},r.DEFAULT_ROW_HEIGHT=21,r.DEFAULT_ROW_HEIGHT_MOBILE=31,r}(e.UIComponentBase),i.UIList=r}(r||(r={})),function(e){var i,r;i=e.lists||(e.lists={}),r=function(r){function n(){var n=r.call(this,"div","wdr-ui-dropdown")||this;return n.prompt="Choose item",n.mouseHandler=function(e){return n.handleMouse(e)},n._allowMultipleSelection=!1,n.container.display="inline-block",n.dropDownBtn=new i.UIDropDownButton,n.dropDownBtn.addEventListener(t._Event.CHANGE,(function(){return n.onBtnChange()})),n.dropDownListWrap=new e.UIComponentBase("div","wdr-ui-dropdown-list"),n.dropDownListWrap.hide(),n.dropDownList=new i.UIList,n.dropDownList.markSelected=!0,n.dropDownList.setItemRendererFactory(n.itemRendererFactory),n.dropDownList.addEventListener(t._Event.CHANGE,(function(e){return n.onListChange(e)})),n.dropDownListWrap.addChild(n.dropDownList),n.addChild(n.dropDownBtn),n.addChild(n.dropDownListWrap),n}return a(n,r),n.prototype.itemRendererFactory=function(t,i){var r=new e.renderers.SelectItemRenderer;return r.setData(t),r.setIndex(i),r},n.prototype.onListChange=function(e){this.enablePrompt(null==e.data.selectedItem),this.dispatchWith(t._Event.CHANGE,this,e.data),this.allowMultipleSelection||this.close()},n.prototype.onBtnChange=function(){this.dropDownBtn.getSelection()?this.open():this.close()},n.prototype.enablePrompt=function(e){var t=this.dropDownList.getSelectedItem();t=e||this.allowMultipleSelection||null==t?this.prompt:t[this.getLabelField()],this.dropDownBtn.setLabel(t),this.container.toggleClass("wdr-ui-prompt",e)},n.prototype.setPrompt=function(e){this.prompt!==e&&(this.prompt=e,this.enablePrompt(!0))},n.prototype.getPrompt=function(){return this.prompt},n.prototype.open=function(){this.getEnabled()&&(this.dropDownListWrap.show(),this.dropDownList.setWidth(this.dropDownBtn.getWidth(!0)),this.dropDownBtn.setSelection(1),document.body.addEventListener("mousedown",this.mouseHandler))},n.prototype.handleMouse=function(t){null==e.UIElement.convert(t.target).closest(".wdr-ui-dropdown")&&(document.body.removeEventListener("mousedown",this.mouseHandler),this.close())},n.prototype.close=function(){this.getEnabled()&&(this.dropDownListWrap.hide(),this.dropDownBtn.setSelection(0),document.body.removeEventListener("mouseup",this.mouseHandler))},n.prototype.getDataProvider=function(){return this.dropDownList.getDataProvider()},n.prototype.setDataProvider=function(e){this.dropDownList.setDataProvider(e)},n.prototype.getLabelField=function(){return this.dropDownList.getLabelField()},n.prototype.setLabelField=function(e){this.dropDownList.setLabelField(e)},n.prototype.setItemRendererFactory=function(e){this.dropDownList.setItemRendererFactory(e)},n.prototype.validateNow=function(){this.dropDownList.validateNow()},n.prototype.validateItemAt=function(e){this.dropDownList.validateItemAt(e)},n.prototype.getSelectedIndex=function(){return this.dropDownList.getSelectedIndex()},n.prototype.setSelectedIndex=function(e){this.dropDownList.setSelectedIndex(e),this.enablePrompt(null==this.dropDownList.getSelectedItem())},n.prototype.getSelectedIndices=function(){return this.dropDownList.getSelectedIndices()},n.prototype.setSelectedIndices=function(e){this.dropDownList.setSelectedIndices(e),this.enablePrompt(!0)},n.prototype.getSelectedItem=function(){return this.dropDownList.getSelectedItem()},n.prototype.setSelectedItem=function(e,t){this.dropDownList.setSelectedItem(e,t),this.enablePrompt(null==this.dropDownList.getSelectedItem())},n.prototype.getSelectedItems=function(){return this.dropDownList.getSelectedItems()},n.prototype.setSelectedItems=function(e){this.dropDownList.setSelectedItems(e),this.enablePrompt(!0)},n.prototype.show=function(){r.prototype.show.call(this)},n.prototype.getRowHeight=function(){return this.dropDownList.getRowHeight()},n.prototype.getRowCount=function(){return this.dropDownList.getRowCount()},n.prototype.validateItem=function(e,t){},n.prototype.getMinHeight=function(){return 0},n.prototype.getMaxHeight=function(){return 0},Object.defineProperty(n.prototype,"allowMultipleSelection",{get:function(){return this._allowMultipleSelection},set:function(e){this._allowMultipleSelection=e,this.dropDownList.allowMultipleSelection=e,this._allowMultipleSelection?this.dropDownList.container.addClass("wdr-ui-dropdown-multiple-selection-list"):this.dropDownList.container.removeClass("wdr-ui-dropdown-multiple-selection-list")},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"markSelected",{set:function(e){this.dropDownList.markSelected=e},enumerable:!0,configurable:!0}),n}(e.UIComponentBase),i.UIDropDownList=r}(r||(r={})),function(e){var t,i;t=e.lists||(e.lists={}),i=function(i){function r(){var r=i.call(this)||this;return r.addClass("wdr-ui-vlist"),r._list=new t.UIList,r.addChild(r._list),r._placeholder=new e.UIComponentBase("div","wdr-ui-vlist-placeholder"),r.addChild(r._placeholder),r.addEventListener("scroll",(function(){return r.onScroll()})),r}return a(r,i),r.prototype.onScroll=function(){this.invalidate("data")},r.prototype.draw=function(){if(this._placeholder.setHeight(Math.min(this.getMaxHeight(),r.MAX_HEIGHT)),this.isInvalid("data")){this._list.setDataProvider(this.getDataProvider());var e=this.getStartIdx()*this.getRowHeight()*this.getScale()-this.getScaleFix();this._list.container.top=Math.min(e,this._placeholder.getHeight()-this._list.container.height)}this.validate()},r.prototype.getScale=function(){return this.getMaxHeight()>r.MAX_HEIGHT?r.MAX_HEIGHT/this.getMaxHeight():1},r.prototype.getStartIdx=function(){return 1!=this.getScale()?Math.floor((this.getScrollPosition()+this.getScaleFix())/this.getScale()/this.getRowHeight()):Math.floor(this.getScrollPosition()/this.getRowHeight())},r.prototype.getScaleFix=function(){return 1!=this.getScale()?(this.getHeight()/this.getScale()-this.getHeight())*(this.getScrollPosition()/r.MAX_HEIGHT)*this.getScale():0},Object.defineProperty(r.prototype,"allowMultipleSelection",{get:function(){return this._list.allowMultipleSelection},set:function(e){this._list.allowMultipleSelection=e},enumerable:!0,configurable:!0}),r.prototype.getLabelField=function(){return this._list.getLabelField()},r.prototype.setLabelField=function(e){this._list.setLabelField(e)},r.prototype.setItemRendererFactory=function(e){this._list.setItemRendererFactory(e)},r.prototype.validateItemAt=function(e){this._list.validateItemAt(e)},r.prototype.validateItem=function(e,t){void 0===t&&(t=""),this._list.validateItem(e,t)},r.prototype.getRowHeight=function(){return 37},r.prototype.getRowCount=function(){return 0<this.getRowHeight()?Math.ceil(this.getHeight()/this.getRowHeight())+1:0},r.prototype.getSelectedIndex=function(){return this._list.getSelectedIndex()},r.prototype.setSelectedIndex=function(e){this._list.setSelectedIndex(e)},r.prototype.getSelectedIndices=function(){return this._list.getSelectedIndices()},r.prototype.setSelectedIndices=function(e){this._list.setSelectedIndices(e)},r.prototype.getSelectedItem=function(){return this._list.getSelectedItem()},r.prototype.setSelectedItem=function(e,t){this._list.setSelectedItem(e,t)},r.prototype.getSelectedItems=function(){return this._list.getSelectedItems()},r.prototype.setSelectedItems=function(e){this._list.setSelectedItems(e)},r.prototype.getMinHeight=function(){return this._list.getRowHeight()},r.prototype.getMaxHeight=function(){return this.getRowHeight()*this.getSmartDataProvider().getLength()},r.prototype.getSmartDataProvider=function(){return this.smartDataProvider},r.prototype.setSmartDataProvider=function(e){this.smartDataProvider=e},r.prototype.getScrollPosition=function(){return this.container.getScrollTop()},r.prototype.setScrollPosition=function(e){this.container.setScrollTop(e)},r.prototype.setDataProvider=function(e){this.getSmartDataProvider()&&(this.getSmartDataProvider().setItems(e),this.setScrollPosition(0),this.invalidate("data"))},r.prototype.getDataProvider=function(){var e=this.getStartIdx(),t=e+this.getRowCount();return this.getSmartDataProvider()?this.getSmartDataProvider().getItems(e,t):[]},r.MAX_HEIGHT=1e6,r}(e.UIComponentBase),t.UIVirtualList=i}(r||(r={})),function(e){var t,i;t=e.lists||(e.lists={}),i=function(t){function i(){var i=t.call(this)||this;return i.addClass("wdr-ui-dropdown-btn"),i.labelDisplay=new e.UILabel,i.addChild(i.labelDisplay),i}return a(i,t),i.prototype.setLabel=function(e){this.labelDisplay.setLabel(e)},i}(e.UIToggleButton),t.UIDropDownButton=i}(r||(r={})),function(e){var t,i;t=e.renderers||(e.renderers={}),i=function(e){function t(){var t=e.call(this,"li")||this;return t.labelField="label",t}return a(t,e),t.prototype.getData=function(){return this.data},t.prototype.setData=function(e){null!=e&&(this.data=e,this.invalidate("data"))},t.prototype.getIndex=function(){return parseInt(this.container.attr("data-index"))},t.prototype.setIndex=function(e){this.container.attr("data-index",e)},t.prototype.getLabelField=function(){return this.labelField},t.prototype.setLabelField=function(e){this.labelField!=e&&(this.labelField=e,this.invalidate("data"))},t.prototype.getLabelFunction=function(){return this.labelFunction},t.prototype.setLabelFunction=function(e){this.labelFunction!=e&&(this.labelFunction=e,this.invalidate("data"))},t.prototype.draw=function(){this.isInvalid("data")&&this.container.text(this.data[this.labelField]),this.validate()},t}(e.UIComponentBase),t.UIItemRenderer=i}(r||(r={})),function(e){var t,i;i=function(t){function i(){return t.call(this)||this}return a(i,t),i.prototype.draw=function(){var t=this.getData();null==this.label&&(this.label=new e.UILabel,this.label.setId("#wdr-text-display"),this.container.append(this.label.container)),this.label.setLabel(t[this.getLabelField()],!0),this.container.toggleClass("wdr-selected",!0===t.isSelected),this.container.toggleClass("wdr-not-selected",!0!==t.isSelected)},i}((t=e.renderers||(e.renderers={})).UIItemRenderer),t.SelectItemRenderer=i}(r||(r={})),function(e){var t,i;t=e.resizable||(e.resizable={}),i=function(){function t(e,t){var i=this;this._mouseDownHandler=function(e){return i.onMouseDown(e)},this._mouseUpHandler=function(e){return i.onMouseUp(e)},this._mouseMoveHandler=function(e){return i.onMouseMove(e)},this.target=e,this.options=t,this.createHandles()}return t.prototype.createHandles=function(){for(var e=0;e<this.options.sides.length;e++)this.createHandle(this.options.sides[e])},t.prototype.createHandle=function(t){var i=new e.UIElement("div","wdr-resizable-handle");return i.addClass("wdr-"+t),i.addEventListener("mousedown",this._mouseDownHandler),this.target.addChild(i),i},t.prototype.onMouseDown=function(t){(t=e.UIElement.convert(t.target)).hasClass("wdr-left")?this._currentSide="left":t.hasClass("wdr-right")&&(this._currentSide="right"),this.startResizing()},t.prototype.onMouseUp=function(e){this.onResize(e.clientX,e.clientY),this.stopResizing()},t.prototype.onMouseMove=function(e){this._boundingRect&&(e.clientX<this._boundingRect.left||e.clientX>this._boundingRect.right||e.clientY<this._boundingRect.top||e.clientY>this._boundingRect.bottom)?this.onMouseUp(e):this.onResize(e.clientX,e.clientY)},t.prototype.onResize=function(e,t){var i={left:this._originalPosition.left,top:this._originalPosition.top},r={width:this._originalSize.width,height:this._originalSize.height};"left"==this._currentSide&&(i.left=e,r.width+=this._originalPosition.left-i.left),"right"==this._currentSide&&(r.width=e-this._originalPosition.left),this.options.resize&&this.options.resize({side:this._currentSide,originalPosition:this._originalPosition,originalSize:this._originalSize,position:i,size:r})},t.prototype.startResizing=function(){document.addEventListener("mousemove",this._mouseMoveHandler),document.addEventListener("mouseup",this._mouseUpHandler),this._originalSize={width:this.target.getWidth(!0),height:this.target.getHeight(!0)},this._originalPosition={left:this.target.getOffset().left,top:this.target.getOffset().top},this._boundingRect=this.options.containtment?this.options.containtment.getBoundingClientRect():null},t.prototype.stopResizing=function(){document.removeEventListener("mousemove",this._mouseMoveHandler),document.removeEventListener("mouseup",this._mouseUpHandler)},t.prototype.dispose=function(){document.removeEventListener("mousemove",this._mouseMoveHandler),document.removeEventListener("mouseup",this._mouseUpHandler)},t}(),t.ResizableHelper=i}(r||(r={})),function(e){!function(e){var t=function(){function e(e,t){void 0===t&&(t=1e3);var i=this;this.touchStartHandler=function(e){return i.onTouchStart(e)},this.touchEndHandler=function(e){return i.onTouchEnd(e)},this.target=e,this.delay=t}return e.prototype.listen=function(e){this.handler=e,this.target.addEventListener("touchstart",this.touchStartHandler),this.target.addEventListener("touchend",this.touchEndHandler)},e.prototype.stop=function(){this.target.removeEventListener("touchstart",this.touchStartHandler),this.target.removeEventListener("touchend",this.touchEndHandler)},e.prototype.onTouchStart=function(e){var t=this;this.timer=s.fmSetTimeout((function(){return t.callHandler(e)}),this.delay)},e.prototype.onTouchEnd=function(e){this.timer&&s.fmClearTimeout(this.timer)},e.prototype.callHandler=function(e){this.handler(e,e&&0<e.changedTouches.length?e.changedTouches[0]:null)},e}();e.LongPressListener=t}(e._utils||(e._utils={}))}(r||(r={})),function(e){var t=function(){function e(t,i,r){void 0===i&&(i=0),void 0===r&&(r=e.LITTLE_ENDIAN),this._dynamicSize=!0,this._byteLength=0,this._byteOffset=i,this.buffer=t,this.position=0,this.endianness=r}return Object.defineProperty(e.prototype,"byteOffset",{get:function(){return this._byteOffset},set:function(e){this._byteOffset=e,this._dataView=new DataView(this._buffer,this._byteOffset),this._byteLength=this._buffer.byteLength},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"byteLength",{get:function(){return this._byteLength-this._byteOffset},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"buffer",{get:function(){return this._trimAlloc(),this._buffer},set:function(e){this._buffer=e,this._dataView=0==this._byteOffset?new DataView(this._buffer):new DataView(this._buffer,this._byteOffset),this._byteLength=this._buffer.byteLength},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dataView",{get:function(){return this._dataView},set:function(e){this._byteOffset=e.byteOffset,this._buffer=e.buffer,this._dataView=new DataView(this._buffer,this._byteOffset),this._byteLength=this._byteOffset+e.byteLength},enumerable:!0,configurable:!0}),e.prototype.seek=function(e){e=Math.max(0,Math.min(this.byteLength,e)),this.position=isNaN(e)||!isFinite(e)?0:e},e.prototype.writeString=function(e){this.writeUint8Array(i.encode(e))},e.prototype.writeUint32=function(e,t){void 0===t&&(t=null),this._realloc(4),this._dataView.setUint32(this.position,e,null==t?this.endianness:t),this.position+=4},e.prototype.writeUint8=function(e){this._realloc(1),this._dataView.setUint8(this.position,e),this.position+=1},e.prototype.writeUint8Array=function(e){if(this._realloc(1*e.length),e instanceof Uint8Array&&0==this.byteOffset+this.position%e.BYTES_PER_ELEMENT)this.memcpy(this._buffer,this.byteOffset+this.position,e.buffer,0,e.byteLength),this.mapUint8Array(e.length);else for(var t=0;t<e.length;t++)this.writeUint8(e[t])},e.prototype.readString=function(e,t){return r.decode(this.mapUint8Array(e))},e.prototype.readUint32=function(){var e=this._dataView.getUint32(this.position,this.endianness);return this.position+=4,e},e.prototype.readUint8=function(){var e=this._dataView.getUint8(this.position);return this.position+=1,e},e.prototype.readUint8Array=function(e){void 0===e&&(e=-1),e=0>e?this.byteLength-this.position:e;var t=new Uint8Array(e);return this.memcpy(t.buffer,0,this.buffer,this.byteOffset+this.position,e*t.BYTES_PER_ELEMENT),this.position+=t.byteLength,t},e.prototype.mapUint8Array=function(e){this._realloc(1*e);var t=new Uint8Array(this._buffer,this.byteOffset+this.position,e);return this.position+=1*e,t},e.prototype._realloc=function(e){if(this._dynamicSize)if((e=this._byteOffset+this.position+e)<=(t=this._buffer.byteLength))e>this._byteLength&&(this._byteLength=e);else{for(1>t&&(t=1);e>t;)t*=2;var t=new ArrayBuffer(t),i=new Uint8Array(this._buffer);new Uint8Array(t,0,i.length).set(i),this.buffer=t,this._byteLength=e}},e.prototype._trimAlloc=function(){if(this._byteLength!=this._buffer.byteLength){var e=new ArrayBuffer(this._byteLength),t=new Uint8Array(e),i=new Uint8Array(this._buffer,0,t.length);t.set(i),this.buffer=e}},e.prototype.memcpy=function(e,t,i,r,n){e=new Uint8Array(e,t,n),i=new Uint8Array(i,r,n),e.set(i)},e.BIG_ENDIAN=!1,e.LITTLE_ENDIAN=!0,e}();e.DataStream=t;var i=function(){function e(){}return e.encode=function(t){t=t?String(t):"";var i,r=[],n=new a(r);for(t=new l(t),null==e.encoder&&(e.encoder=new o);t.get()!==e.EOF_code_point;)e.encoder.encode(n,t);do{i=e.encoder.encode(n,t)}while(i!==e.EOF_byte);return new Uint8Array(r)},e.EOF_byte=-1,e.EOF_code_point=-1,e}();e.TextEncoder=i;var r=function(){function e(){}return e.decode=function(t){t||(t=new Uint8Array(0)),t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength),t=new s(t);var i,r=new c;for(null==e.decoder&&(e.decoder=new n);t.get()!==e.EOF_byte;)null!==(i=e.decoder.decode(t))&&i!==e.EOF_code_point&&r.emit(i);do{null!==(i=e.decoder.decode(t))&&i!==e.EOF_code_point&&r.emit(i)}while(i!==e.EOF_code_point);return r.str()},e.EOF_byte=-1,e.EOF_code_point=-1,e}();e.TextDecoder=r;var n=function(){function e(){this.EOF_code_point=this.EOF_byte=-1,this.utf8_lower_boundary=this.utf8_bytes_seen=this.utf8_bytes_needed=this.utf8_code_point=0}return e.prototype.decode=function(e){var t=e.get();if(t===this.EOF_byte)return this.EOF_code_point;if(e.offset(1),0===this.utf8_bytes_needed){if(this.inRange(t,0,127))return t;if(this.inRange(t,194,223))this.utf8_bytes_needed=1,this.utf8_lower_boundary=128,this.utf8_code_point=t-192;else if(this.inRange(t,224,239))this.utf8_bytes_needed=2,this.utf8_lower_boundary=2048,this.utf8_code_point=t-224;else{if(!this.inRange(t,240,244))return this.EOF_code_point;this.utf8_bytes_needed=3,this.utf8_lower_boundary=65536,this.utf8_code_point=t-240}return this.utf8_code_point*=Math.pow(64,this.utf8_bytes_needed),null}return this.inRange(t,128,191)?(this.utf8_bytes_seen+=1,this.utf8_code_point+=(t-128)*Math.pow(64,this.utf8_bytes_needed-this.utf8_bytes_seen),this.utf8_bytes_seen!==this.utf8_bytes_needed?null:(e=this.utf8_code_point,t=this.utf8_lower_boundary,this.utf8_lower_boundary=this.utf8_bytes_seen=this.utf8_bytes_needed=this.utf8_code_point=0,this.inRange(e,t,1114111)&&!this.inRange(e,55296,57343)?e:this.EOF_code_point)):(this.utf8_lower_boundary=this.utf8_bytes_seen=this.utf8_bytes_needed=this.utf8_code_point=0,e.offset(-1),this.EOF_code_point)},e.prototype.inRange=function(e,t,i){return t<=e&&e<=i},e}();e.UTF8Decoder=n;var o=function(){function e(){this.EOF_code_point=this.EOF_byte=-1}return e.prototype.inRange=function(e,t,i){return t<=e&&e<=i},e.prototype.div=function(e,t){return Math.floor(e/t)},e.prototype.encode=function(e,t){var i,r,n=t.get();if(n===this.EOF_code_point)return this.EOF_byte;if(t.offset(1),this.inRange(n,55296,57343))return this.EOF_code_point;if(this.inRange(n,0,127))return e.emit(n);for(this.inRange(n,128,2047)?(i=1,r=192):this.inRange(n,2048,65535)?(i=2,r=224):this.inRange(n,65536,1114111)&&(i=3,r=240),r=e.emit(this.div(n,Math.pow(64,i))+r);0<i;)r=this.div(n,Math.pow(64,i-1)),r=e.emit(128+r%64),i-=1;return r},e}();e.UTF8Encoder=o;var s=function(){function e(e){this.EOF_byte=-1,this.pos=0,this.bytes=e}return e.prototype.get=function(){return this.pos>=this.bytes.length?this.EOF_byte:Number(this.bytes[this.pos])},e.prototype.offset=function(e){if(this.pos+=e,0>this.pos)throw Error("Seeking past start of the buffer");if(this.pos>this.bytes.length)throw Error("Seeking past EOF")},e.prototype.match=function(e){if(e.length>this.pos+this.bytes.length)return!1;var t;for(t=0;t<e.length;t+=1)if(Number(this.bytes[this.pos+t])!==e[t])return!1;return!0},e}();e.ByteInputStream=s;var a=function(){function e(e){this.EOF_byte=-1,this.pos=0,this.bytes=e}return e.prototype.emit=function(e){var t,i=this.EOF_byte;for(t=0;t<arguments.length;++t)i=Number(arguments[t]),this.bytes[this.pos++]=i;return i},e}();e.ByteOutputStream=a;var l=function(){function e(e){this.pos=0,this.EOF_code_point=-1,this._str=e,this.cps=this.getCps(this._str)}return e.prototype.getCps=function(e){for(var t=[],i=0,r=e.length;i<e.length;){var n=e.charCodeAt(i);if(this.inRange(n,55296,57343))if(this.inRange(n,56320,57343))t.push(65533);else if(i===r-1)t.push(65533);else{var o=e.charCodeAt(i+1);this.inRange(o,56320,57343)?(i+=1,t.push(65536+((n&=1023)<<10)+(o&=1023))):t.push(65533)}else t.push(n);i+=1}return t},e.prototype.inRange=function(e,t,i){return t<=e&&e<=i},e.prototype.offset=function(e){if(this.pos+=e,0>this.pos)throw Error("Seeking past start of the buffer");if(this.pos>this.cps.length)throw Error("Seeking past EOF")},e.prototype.get=function(){return this.pos>=this.cps.length?this.EOF_code_point:this.cps[this.pos]},e}();e.CodePointInputStream=l;var c=function(){function e(){this._str=""}return e.prototype.str=function(){return this._str},e.prototype.emit=function(e){65535>=e?this._str+=String.fromCharCode(e):(e-=65536,this._str+=String.fromCharCode(55296+(e>>10&1023)),this._str+=String.fromCharCode(56320+(1023&e)))},e}();e.CodePointOutputStream=c}(n||(n={})),function(e){var i=function(e){function i(){var t=e.call(this)||this;return t.connected=!1,t}return a(i,e),i.prototype.load=function(e){var t=this;this.url=e,this.connected=!1,this.close(),this.xhr=new XMLHttpRequest,this.xhr.open("GET",e,!0),this.xhr.responseType="arraybuffer",this.xhr.onload=function(e){return t.onComplete(e)},this.xhr.onprogress=function(e){return t.onProgress(e)},this.xhr.onerror=function(e){return t.onError(e)},this.xhr.onreadystatechange=function(e){return t.onReadyStateChange(e)},this.xhr.send()},i.prototype.onComplete=function(e){this.response=this.xhr.response,this.dispatch(new t._Event(t._Event.COMPLETE,this))},i.prototype.onProgress=function(e){this.dispatch(e)},i.prototype.onError=function(e){this.dispatch(e)},i.prototype.onReadyStateChange=function(e){null!=this.xhr&&4===this.xhr.readyState&&200!==this.xhr.status&&this.dispatch(new t._Event(t._Event.ERROR,this,this.xhr.statusText)),null!=this.xhr&&3>this.xhr.readyState&&!this.connected&&(this.connected=!0,this.dispatch(new t._Event(t._Event.CONNECTED)))},i.prototype.close=function(){null!=this.xhr&&this.xhr.abort()},i.prototype.dispose=function(){this.response=null,null!=this.xhr&&(this.xhr.onload=null,this.xhr.onprogress=null,this.xhr.onerror=null,this.xhr.onreadystatechange=null),this.xhr=null},i}(t.EventDispatcher);e.URLBinaryLoader=i}(o||(o={})),function(e){var i=function(e){function i(){var t=e.call(this)||this;return t.dataType=r.TEXT,t.contentType=n.TEXT_PLAIN,t.requestMethod=o.GET,t.connected=!1,t.withCredentials=!1,t._lastProgressTriggered=0,t._lastEvent=null,t.progressInterval=0,t.requestHeaders=[],t.data={},t._bytesLoaded=0,t}return a(i,e),i.prototype.load=function(e,t){var i=this;void 0===t&&(t=null),this.url=e,this._bytesLoaded=0,this.connected=!1,this.processRequestHeader(t),this.close(),this.xhr=new XMLHttpRequest,this.xhr.open(this.requestMethod,this.url,!0),this.xhr.onerror=function(e){return i.onError(e)},this.xhr.onreadystatechange=function(e){return i.onReadyStateChange(e)},this.xhr.onprogress=function(e){return i.onProgress(e)},this.xhr.setRequestHeader("Content-type",this.contentType);for(var r=0;r<this.requestHeaders.length;r++)this.xhr.setRequestHeader(this.requestHeaders[r].header,this.requestHeaders[r].value);this.xhr.send(this.data)},i.prototype.processRequestHeader=function(e){if(this.requestHeaders=[],null!=e)for(var t in e)this.requestHeaders.push(new l(t,e[t]))},i.prototype.getBytesLoaded=function(){return this._bytesLoaded},i.prototype.success=function(){this.response=this.xhr.response||this.xhr.responseText,this._bytesLoaded=this._lastEvent?this._lastEvent.loaded:this.response.length,this.dispatch(new t._Event(t._Event.COMPLETE,this))},i.prototype.onReadyStateChange=function(e){null!=this.xhr&&4===this.xhr.readyState&&(200===this.xhr.status?this.success():this.dispatch(new t._Event(t._Event.ERROR,this,this.xhr.statusText))),null!=this.xhr&&3>this.xhr.readyState&&!this.connected&&(this.connected=!0,this.dispatch(new t._Event(t._Event.CONNECTED)))},i.prototype.onProgress=function(e){s.getTimer()-this._lastProgressTriggered>this.progressInterval?(this.response=this.xhr.response||this.xhr.responseText,this._bytesLoaded=e.loaded,this.dispatch(e),this._lastProgressTriggered=s.getTimer(),this._lastEvent=null):this._lastEvent=e},i.prototype.onError=function(e){this.dispatch(new t._Event(t._Event.ERROR,this))},i.prototype.close=function(){null!=this.xhr&&(this.xhr.onprogress=null,this.xhr.onreadystatechange=null,this.xhr.abort())},i.prototype.dispose=function(){this.data=this.response=null,this.requestHeaders=[],null!=this.xhr&&(this.xhr.onprogress=null,this.xhr.onreadystatechange=null),this._lastProgressTriggered=this._lastEvent=this.xhr=null},i}(t.EventDispatcher);e.URLStream=i;var r=function(){function e(){}return e.TEXT="text",e.XML="xml",e.HTML="html",e.JSON="json",e}();e.DataType=r;var n=function(){function e(){}return e.TEXT_PLAIN="text/plain",e.TEXT_XML="text/xml",e.APPLICATION_JSON="application/json",e.APPLICATION_URLENCODED="application/x-www-form-urlencoded",e}();e.ContentType=n;var o=function(){function e(){}return e.POST="POST",e.GET="GET",e}();e.URLRequestMethod=o;var l=function(e,t){this.header=e,this.value=t};e.URLRequestHeader=l,i=function(){function e(){this.data={}}return e.prototype.toString=function(){var e,t=[];for(e in this.data)t.push(e+"="+this.data[e]);return t.join("&")},e}(),e.URLVariables=i}(o||(o={})),function(e){var i=function(e){function i(){var t=e.call(this)||this;return t.dialogOpened=!1,document.body.onfocus=function(){return t.onFocus()},t}return a(i,e),i.prototype.browse=function(e){var t=this;void 0===e&&(e=[]),this.input=document.createElement("input"),this.input.setAttribute("type","file"),this.input.style.display="none",document.body.appendChild(this.input),this.input.setAttribute("accept",e.join(",")),this.input.addEventListener("change",(function(){return t.onChange()})),this.dialogOpened=!0,this.input.click()},i.prototype.onChange=function(){this.dialogOpened=!1,s.nullOrUndefined(this.input.files)||s.nullOrUndefined(this.input.files[0])||(this.file=this.input.files[0],this.dispatchWith(t._Event.SELECT))},i.prototype.onFocus=function(){var e=this;this.dialogOpened&&s.fmSetTimeout((function(){(s.nullOrUndefined(e.input.files)||s.nullOrUndefined(e.input.files[0]))&&e.dispatchWith(t._Event.CANCEL),e.dialogOpened=!1}),500)},i.prototype.load=function(e){var t=this;void 0===e&&(e=r.TEXT),null!=this.file&&(this.reader=new FileReader,this.reader.onload=function(e){return t.onLoad(e)},this.reader.onprogress=function(e){return t.onProgress(e)},this.reader.onerror=function(e){return t.onError(e)},e==r.ARRAY_BUFFER?this.reader.readAsArrayBuffer(this.file):this.reader.readAsText(this.file))},i.prototype.onLoad=function(e){this.response=this.reader.result,this.dispatch(new t._Event(t._Event.COMPLETE,this))},i.prototype.onProgress=function(e){this.dispatch(e)},i.prototype.onError=function(e){this.dispatch(e)},i.prototype.dispose=function(){this.reader=this.file=this.response=null},i}(t.EventDispatcher);e.FileReference=i;var r=function(){function e(){}return e.TEXT="TEXT",e.ARRAY_BUFFER="ARRAY_BUFFER",e}();e.ReadMethod=r}(o||(o={})),function(e){var t=function(){function e(){}return Object.defineProperty(e.prototype,"item",{get:function(){return this[0]},enumerable:!0,configurable:!0}),e.prototype.find=function(e){return void 0===this.item?this:this.item.find(e)},e.prototype.text=function(){return void 0===this.item?"":this.item.text()},e.prototype.attr=function(e,t){return void 0===this.item?void 0:t?this.item.attr(e,t):this.item.attr(e)},e.prototype.children=function(){for(var t=new e,r=0;void 0!==this[r];)t[r++]=i.convert(this[r]);return t},e.prototype.push=function(e){return this[this.length]=e,this},Object.defineProperty(e.prototype,"length",{get:function(){for(var e=0;void 0!==this[e];)e++;return e},enumerable:!0,configurable:!0}),e}();e.XMLNodeList=t;var i=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return a(i,e),i.prototype.text=function(e){return e||!1===e?(this.textContent=e.toString(),this):e=s.nullOrUndefined(this.textContent)?"":this.textContent},i.prototype.append=function(e){return s.nullOrUndefined(e)||"string"==typeof e&&s.nullOrEmpty(e)||(e instanceof CDATASection||""!=e.textContent)&&this.appendChild(e),this},i.prototype.isEmpty=function(){return""==this.text()},i.prototype.find=function(e){e=this.querySelectorAll(e);for(var r=new t,n=0;n<e.length;n++)r[n]=i.convert(e[n]);return r},i.prototype.attr=function(e,t){return t||!1===t?(this.setAttribute(e,t),this):(null==(t=this.getAttribute(e))&&(t=void 0),t)},i.prototype.getChildren=function(){for(var e=new t,r=this.firstElementChild;r;)r.nodeType===Node.ELEMENT_NODE&&e.push(i.convert(r)),r=r.nextElementSibling;return e},Object.defineProperty(i.prototype,"length",{get:function(){return this.childNodes.length},enumerable:!0,configurable:!0}),i.convert=function(e){return e.find=i.prototype.find,e.append=i.prototype.append,e.text=i.prototype.text,e.attr=i.prototype.attr,e.isEmpty=i.prototype.isEmpty,e.getChildren=i.prototype.getChildren,e},i}(Element);e.XMLNode=i;var r=function(){function e(){throw Error("Singleton")}return e.create=function(t){if(null==t.firstChild){if(t=(new DOMParser).parseFromString(t,"text/xml"),e.isParseError(t))return null;t=t.firstElementChild?t.firstElementChild:t.firstChild}else t=t.firstChild;return i.convert(t)},e.isParseError=function(e){if(!e.getElementsByTagName("parsererror")||!e.getElementsByTagName("parsererror")[0])return!1;var t=e.getElementsByTagName("parsererror")[0].namespaceURI;return 0<e.getElementsByTagNameNS(t,"parsererror").length},e.cdata=function(t){return e.doc.createCDATASection(t)},e.toXMLString=function(t,i){void 0===i&&(i=!1),null==e.serializer&&(e.serializer=new XMLSerializer);var r=e.serializer.serializeToString(t);return 1==i&&(r=e.format(r)),r.trim()},e.format=function(e){var t=(e=e.replace(/>\s{0,}</g,"><").replace(/</g,"~::~<").replace(/\s*xmlns\:/g,"~::~xmlns:").replace(/\s*xmlns\=/g,"~::~xmlns=").split("~::~")).length,i=!1,r=0,n="",o=0,s=["\n"];for(o=0;20>o;o++)s.push(s[o]+"    ");for(o=0;o<t;o++)-1<e[o].search(/<!/)?(n+=s[r]+e[o],i=!0,(-1<e[o].search(/--\x3e/)||-1<e[o].search(/\]>/)||-1<e[o].search(/!DOCTYPE/))&&(i=!1)):-1<e[o].search(/--\x3e/)||-1<e[o].search(/\]>/)?(n+=e[o],i=!1):/^<\w/.exec(e[o-1])&&/^<\/\w/.exec(e[o])&&/^<[\w:\-\.\,]+/.exec(e[o-1])[0]==/^<\/[\w:\-\.\,]+/.exec(e[o])[0].replace("/","")?(n+=e[o],i||r--):n=-1<e[o].search(/<\w/)&&-1==e[o].search(/<\//)&&-1==e[o].search(/\/>/)?n+=i?e[o]:s[r++]+e[o]:-1<e[o].search(/<\w/)&&-1<e[o].search(/<\//)?n+=i?e[o]:s[r]+e[o]:-1<e[o].search(/<\//)?n+=i?e[o]:s[--r]+e[o]:-1<e[o].search(/\/>/)?n+=i?e[o]:s[r]+e[o]:-1<e[o].search(/<\?/)||-1<e[o].search(/xmlns\:/)||-1<e[o].search(/xmlns\=/)?n+(s[r]+e[o]):n+e[o];return(e=(e="\n"==n[0]?n.slice(1):n).replace(/[\r\n\s]*<\!\[CDATA\[/g,"<![CDATA[")).replace(/]]\x3e\s*/g,"]]>")},e.doc=(new DOMParser).parseFromString("<tmp/>","text/xml"),e}();e.XML=r}(o||(o={})),function(e){var t=function(){function e(){}return e.print=function(e,t,i){void 0===t&&(t=""),void 0===i&&(i="");var n="printer-"+(new Date).getTime(),o=new r.UIElement("iframe").attr("name",n);o.css("width","1px").css("height","1px").css("position","absolute").css("left","-9999px"),r.UIElement.convert(document.body).append(o);var a=(n=window.frames[n]).document;a.open(),a.write("<!DOCTYPE html>"),a.write("<html>"),a.write("<head>"),a.write("<title>"),a.write(i),a.write("</title>"),a.write("<style>"),a.write(t+"body{-webkit-print-color-adjust:exact;}"),a.write("</style>"),a.write("</head>"),a.write("<body>"),a.write(e),a.write("</body>"),a.write("</html>"),a.close(),n.focus(),n.print(),s.fmSetTimeout((function(){o.remove()}),2e3)},e}();e.PrintJob=t}(o||(o={})),function(e){var t=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.getInstance=function(){return null==t.instance&&(t.instance=new t),t.instance},Object.defineProperty(t.prototype,"target",{get:function(){return document},enumerable:!0,configurable:!0}),t}(i=function(){function t(){this.listeners={}}return Object.defineProperty(t.prototype,"target",{get:function(){return null},enumerable:!0,configurable:!0}),t.prototype.areListenersEqual=function(e,t){return e.type===t.type&&e.handler===t.handler&&e.useCapture===t.useCapture},t.prototype.hasEventListener=function(t,i){if(e.nullOrUndefined(this.listeners[t]))return!1;for(var r=0;r<this.listeners[t].length;r++)if(this.areListenersEqual(this.listeners[t][r],i))return!0;return!1},t.prototype.addEventListener=function(t,i,r){var n={type:t,handler:i,useCapture:r};this.hasEventListener(t,n)||(e.nullOrUndefined(this.listeners[t])&&(this.listeners[t]=[]),this.listeners[t].push(n),this.target.addEventListener(t,i,r))},t.prototype.removeEventListener=function(e,t,i){for(e in t={type:e,handler:t,useCapture:i},this.listeners){for(var r=[],n=0;n<this.listeners[e].length;n++)this.areListenersEqual(this.listeners[e][n],t)?"boolean"==typeof i?this.target.removeEventListener(e,this.listeners[e][n].handler,i):this.target.removeEventListener(e,this.listeners[e][n].handler):r.push(this.listeners[e][n]);this.listeners[e]=r}},t.prototype.dispose=function(){for(var e in this.listeners)for(var t=0;t<this.listeners[e].length;t++)this.target.removeEventListener(e,this.listeners[e][t].handler,!0),this.target.removeEventListener(e,this.listeners[e][t].handler,!1);this.listeners={}},t}()),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.getInstance=function(){return null==t.instance&&(t.instance=new t),t.instance},Object.defineProperty(t.prototype,"target",{get:function(){return window},enumerable:!0,configurable:!0}),t}(i),r=function(){function e(){}return e.dispose=function(){for(;0<e.timeouts.length;)clearTimeout(e.timeouts.pop());for(;0<e.intervals.length;)clearInterval(e.intervals.pop())},e.timeouts=[],e.intervals=[],e}();e.Timers=r,e.fmSetTimeout=function(e,t){var i=setTimeout(e,t);return r.timeouts.push(i),i},e.fmClearTimeout=function(e){clearTimeout(e),r.timeouts.splice(r.timeouts.indexOf(e),1)},e.fmSetInterval=function(e,t){var i=setInterval(e,t);return r.intervals.push(i),i},e.fmClearInterval=function(e){clearInterval(e),r.intervals.splice(r.intervals.indexOf(e),1)},e.fmdocument=t.getInstance(),e.fmwindow=i.getInstance()}(s||(s={})),function(e){var i=function(e){function i(t){var i=e.call(this)||this;return i._scrollListener=function(){return i.scrollListener()},i._dispatchResize=function(){return i._dispatchResize()},i._target=t,i.startListener(i._target.element),i}return a(i,e),i.prototype.resetTriggers=function(e){var t,i=(e=(t=e.__resizeTriggers__).firstElementChild).firstElementChild;(t=t.lastElementChild).scrollLeft=t.scrollWidth,t.scrollTop=t.scrollHeight,i.style.width=e.offsetWidth+1+"px",i.style.height=e.offsetHeight+1+"px",e.scrollLeft=e.scrollWidth,e.scrollTop=e.scrollHeight},i.prototype.checkTriggers=function(e){return e.offsetWidth!=e.__resizeLast__.width||e.offsetHeight!=e.__resizeLast__.height},i.prototype.scrollListener=function(){var e=this;if(null!=this._target){var t=this._target.element;this.resetTriggers(t),t.__resizeRAF__&&this._target.cancelAnimationFrame(t.__resizeRAF__),t.__resizeRAF__=this._target.requestAnimationFrame((function(){e.checkTriggers(t)&&(t.__resizeLast__.width=t.offsetWidth,t.__resizeLast__.height=t.offsetHeight,e.dispatchResize())}))}},i.prototype.dispatchResize=function(){this.dispatchWith(t._Event.RESIZE)},i.prototype.startListener=function(e){e.attachEvent?e.attachEvent("onresize",this._dispatchResize):e.__resizeTriggers__||("static"==getComputedStyle(e).position&&(e.style.position="relative"),e.__resizeLast__={},e.__resizeListeners__=[],e.__resizeTriggers__=document.createElement("div"),e.__resizeTriggers__.className="wdr-resize-triggers",e.__resizeTriggers__.innerHTML='<div class="wdr-expand-trigger"><div></div></div><div class="wdr-contract-trigger"></div>',e.appendChild(e.__resizeTriggers__),this.resetTriggers(e),e.addEventListener("scroll",this._scrollListener,!0))},i.prototype.stopListener=function(e){e.detachEvent?e.detachEvent("onresize",this._dispatchResize):(e.removeEventListener("scroll",this._scrollListener),e.__resizeTriggers__=!e.removeChild(e.__resizeTriggers__))},i.prototype.dispose=function(){this._target&&this._target.element&&this.stopListener(this._target.element),this._dispatchResize=this._scrollListener=this._target=null},i}(t.EventDispatcher);e.ResizeListener=i}(s||(s={})),function(e){var t=function(){function e(){}return e.isHttpURL=function(e){return null!=e&&(0==e.indexOf("http://")||0==e.indexOf("https://"))},e.isBlobURL=function(e){return null!=e&&0==e.indexOf("blob:http")},e.getUrl=function(t,i){if(void 0===i&&(i=!1),!t)return"()";if(0==(t=t.trim()).length)return"()";if(e.isBlobURL(t))return t;if(i){var r=-1<t.indexOf("?")?"&":"?";t+=r+Math.round(Date.now()/3600)}if(e.isHttpURL(t)||0==t.indexOf("file")||"/"==t.substr(0,1))return t;if(-1!=t.indexOf("..")){for(r=t.split("/");".."==r[0];)0<r.length&&r.shift();"/"==(t="/"+r.join("/")).substr(0,1)&&(t=t.substring(1))}return t},e.addTimestamp=function(e){var t=-1<e.indexOf("?")?"&":"?";return e+(t+Math.round(Date.now()/3600))},e}();e.URLUtils=t}(s||(s={})),function(e){var t=function(){function e(){}return e.isUTCFormat=function(e){return"UTC:"==e.slice(0,4)},e.format=function(t,i){var r=!1;"UTC:"==i.slice(0,4)&&(i=i.slice(4),r=!0);var n=t[(h=r?"getUTC":"get")+"Date"](),o=t[h+"Day"](),s=t[h+"Month"](),a=t[h+"FullYear"](),l=t[h+"Hours"](),c=t[h+"Minutes"](),u=t[h+"Seconds"](),h=t[h+"Milliseconds"](),d=r?0:t.getTimezoneOffset(),A={d:n,dd:e.pad(n),ddd:e.i18n.dayNames[o],dddd:e.i18n.dayNames[o+7],D:n,DD:e.pad(n),DDD:e.i18n.dayNames[o],DDDD:e.i18n.dayNames[o+7],M:s+1,MM:e.pad(s+1),MMM:e.i18n.monthNames[s],MMMM:e.i18n.monthNames[s+12],yy:String(a).slice(2),yyyy:a,YY:String(a).slice(2),YYYY:a,h:l%12||12,hh:e.pad(l%12||12),H:l,HH:e.pad(l),m:c,mm:e.pad(c),s:u,ss:e.pad(u),l:e.pad(h,3),L:e.pad(99<h?Math.round(h/10):h),t:12>l?"a":"p",tt:12>l?"am":"pm",T:12>l?"A":"P",TT:12>l?"AM":"PM",Z:r?"UTC":(String(t).match(e.timezone)||[""]).pop().replace(e.timezoneClip,""),o:(0<d?"-":"+")+e.pad(100*Math.floor(Math.abs(d)/60)+Math.abs(d)%60,4),S:["th","st","nd","rd"][3<n%10?0:(10!=n%100-n%10?1:0)*n%10]};return i.replace(e.token,(function(e){return e in A?A[e]:e.slice(1,e.length-1)}))},e.pad=function(e,t){var i=""+e;for(t=t||2;i.length<t;)i="0"+i;return i},e.setDayNames=function(t,i){e.i18n.dayNames=i.concat(t)},e.setMonthNames=function(t,i){e.i18n.monthNames=i.concat(t)},e.token=/d{1,4}|D{1,4}|m{1,4}|M{1,4}|yy(?:yy)?|YY(?:YY)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,e.timezone=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,e.timezoneClip=/[^-+\dA-Z]/g,e.i18n={dayNames:"Sun Mon Tue Wed Thu Fri Sat Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),monthNames:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec January February March April May June July August September October November December".split(" ")},e}();e.DateFormat=t}(s||(s={})),function(e){function t(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(t=0;t<e.length;t++)if(null==e[t])return!0;return!1}var i=function(){function i(){}return i.toBoolean=function(e){return null!=e&&("true"==e.toLowerCase()||"on"==e.toLowerCase())},i.generateID=function(){var e=(new Date).getTime()-new Date(2012,2,8).getTime();return i.lastGeneratedID==e?e.toString(35)+(i.lastGeneratedIDSuffix++).toString():(i.lastGeneratedID=e,i.lastGeneratedIDSuffix=0,e.toString(35))},i.bind=function(t){for(var i=[],r=1;r<arguments.length;r++)i[r-1]=arguments[r];if(e.nullOrUndefined(t))return t;for(r=0;r<i.length;r++)t=t.replace(RegExp("\\{"+r+"\\}","gi"),null==i[r]?"":i[r].toString());return t},i.concat=function(e,t){if(0==e.length)return t;var i=0<e.length?e.charCodeAt(e.length-1):-1,r=0<e.length?e.charCodeAt(e.length-2):-1,n="";if(-1!=r&&128<r&&256>r&&!(191<r&&224>r))return n=t.charCodeAt(0),n=String.fromCharCode((15&r)<<12|(63&i)<<6|63&n),e.substr(0,e.length-2)+n+t.substr(1);if(!(128>i||256<i)){if(191<i&&224>i)return r=t.charCodeAt(0),n=String.fromCharCode((31&i)<<6|63&r),e.substr(0,e.length-1)+n+t.substr(1);if(256>i)return r=t.charCodeAt(0),n=t.charCodeAt(1),n=String.fromCharCode((15&i)<<12|(63&r)<<6|63&n),e.substr(0,e.length-1)+n+t.substr(2)}return e+t},i.toTime=function(e){if(isNaN(e))return n.model._labels.Labels.INVALID_DATE;var t="",i=0>e;0>e&&(e*=-1);var r=(e=Math.round(e))%60;return t=10>r?"0"+r:r.toString(),t=(10>(r=(e=(e-r)/60)%60)?"0"+r:r.toString())+":"+t,t=(10>(r=(e=(e-r)/60)%24)?"0"+r:r.toString())+":"+t,0<(e=(e-r)/24)&&(t=e.toString()+"d "+t),i&&(t="-"+t),t},i.toDate=function(t,i){if(void 0===i&&(i="dd/MM/yyyy"),isNaN(t)||0==t)return n.model._labels.Labels.INVALID_DATE;var r=new Date(t);return isNaN(r.getTime())?"":e.DateFormat.format(r,i)},i.toDateTime=function(e,t){return void 0===t&&(t="dd/MM/yyyy HH:mm:ss"),i.toDate(e,t)},i.isDate=function(e){return this.matchesISODate(e)&&!isNaN(Date.parse(e))&&(1<e.match(/\d+/).length||1==e.match(/\d+/).length&&new Date(Date.parse(e)).toDateString()!=new Date(Date.parse(e.match(/\d+/)[0])).toDateString())},i.matchesISODate=function(t){return!(e.detectBrowser().isChrome&&!t.match(/^([\+-]?\d{4}(?!\d{2}\b))((-?)((0[1-9]|1[0-2])(\3([12]\d|0[1-9]|3[01]))?|W([0-4]\d|5[0-2])(-?[1-7])?|(00[1-9]|0[1-9]\d|[12]\d{2}|3([0-5]\d|6[1-6])))([T\s]((([01]\d|2[0-3])((:?)[0-5]\d)?|24\:?00)([\.,]\d+(?!:))?)?(\17[0-5]\d([\.,]\d+)?)?([zZ]|([\+-])([01]\d|2[0-3]):?([0-5]\d)?)?)?)?$/i))},i.fromRgbToHex=function(e){if(t(e))return 0;if("#"===e.substr(0,1))return parseInt(e.substr(1),16);"transparent"==e&&(e="rgb(255,255,255)"),e=(e=e.replace(/[^\d,]/g,"")).split(",");var i=parseInt(e[0]),r=parseInt(e[1]),n=parseInt(e[2]);return 0===parseInt(e[3])&&(i=r=n=255),n|r<<8|i<<16},i.strToUint8Arr=function(e){for(var t=new Uint8Array(e.length),i=0,r=e.length;i<r;++i)t[i]=e.charCodeAt(i);return t},i.strToUint8ArrExtended=function(e){for(var t=new n.DataStream(new ArrayBuffer(e.length)),i=0,r=e.length;i<r;++i)t.writeString(e.charAt(i));return t.seek(0),t.readUint8Array(t.byteLength)},i.dataURItoUint8Arr=function(e){return e=-1!==e.split(",")[0].indexOf("base64")?atob(e.split(",")[1]):decodeURI(e.split(",")[1]),i.strToUint8Arr(e)},i.decode2=function(e){var t,i,r,n,o,s;for(t="",r=e.length,i=0;i<r;)switch(n=e[i++],n>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:t+=String.fromCharCode(n);break;case 12:case 13:o=e[i++],t+=String.fromCharCode((31&n)<<6|63&o);break;case 14:o=e[i++],s=e[i++],t+=String.fromCharCode((15&n)<<12|(63&o)<<6|(63&s)<<0)}return t},i.decode=function(e){for(var t="",i=0;i<e.length;i++)t+=String.fromCharCode(e[i]);return decodeURIComponent(escape(t))},i.contains=function(e,t){return-1<e.toLowerCase().indexOf(t)},i.parseBool=function(e){return"string"==typeof e&&(e=String(e).toLowerCase()),"true"===e||"on"===e||1===e||!0===e},i.toNumber=function(e){return null==e?NaN:"number"==typeof e?e:("string"!=typeof e&&(e=e.toString()),","==n.model.format.FormatManager.getFormat("").thousandsSeparator&&(e=e.replace(/,/gi,"")),e=(e=e.replace(",",".")).replace(/[^[,|\.|\-|\d|e]]*/gi,""),parseFloat(e))},i.trim=function(e,t){if(void 0===t&&(t=null),null==e)return"";for(var r=0;i.isWhitespace(e.charAt(r),t);)++r;for(var n=e.length-1;i.isWhitespace(e.charAt(n),t);)--n;return n>=r?e.slice(r,n+1):""},i.trimLeft=function(e,t){if(void 0===t&&(t=null),null==e)return"";for(var r=0;i.isWhitespace(e.charAt(r),t);)++r;var n=e.length-1;return n>=r?e.slice(r,n+1):""},i.isWhitespace=function(e,t){if(void 0===t&&(t=null),null!=t&&e==t)return!1;switch(e){case" ":case"\t":case"\r":case"\n":case"\f":return!0}return!1},i.isEntity=function(e){for(var t in i.entityMap)if(i.entityMap[t]==e)return!0;return!1},i.escapeHtml=function(e,t){return void 0===t&&(t=!1),e.replace(t?/[<>"'\/]/g:/[&<>"'\/]/g,(function(e){return i.entityMap[e]}))},i.lastGeneratedIDSuffix=0,i.entityMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"},i}();e.StringUtils=i,e.nullOrUndefined=t,e.nullOrEmpty=function(e){if(t(e)||"string"!=typeof e||0==e.trim().length)return!0;e=e.trim();for(var i=0;i<e.length;i++)if(0!=e.charCodeAt(i))return!1;return!0},e.strEncode=function(e){return e.replace(/\|/g,"{%7C}")},e.strDecode=function(e){return e.replace(/{%7C}/g,"|")}}(s||(s={})),function(e){var t=function(){function e(){}return e.sortOn=function(t,i,r,n){var o=1==(r>>=1)%2,s=1==(r=r>>1>>1)%2;return r=1==(r>>=1)%2,s?(t=e.sortIndices(t,i,n),o&&t.reverse(),t):(r?e.sortNumeric(t,i):""==i?t.sort():t.sort((function(e,t){return e[i]==t[i]?0:e[i]>t[i]?1:-1})),o&&t.reverse(),t)},e.sort=function(t,i,r){return void 0===i&&(i=0),e.sortOn(t,"",i,r)},e.sortNumeric=function(e,t){e.sort(""==t?function(e,t){return isNaN(e)?1:isNaN(t)?-1:e-t}:function(e,i){return isNaN(e[t])?1:isNaN(i[t])?-1:e[t]-i[t]})},e.sortIndices=function(e,t,i){var r,n=[];for(r in e)n.push([e[r],parseInt(r)]);for(var o in n.sort(""==t?i?function(e,t){return i(e[0],t[0])}:function(e,t){return e[0]==t[0]?0:e[0]>t[0]?1:-1}:i?function(e,r){return i(e[0][t],r[0][t])}:function(e,i){return e[0][t]==i[0][t]?0:e[0][t]>i[0][t]?1:-1}),e=[],n)e.push(n[o][1]);return e},e.find=function(e,t,i){void 0===i&&(i=null);for(var r=e.length-1;-1<r;r--)if(null===i&&e[r]===t||null!==i&&e[r][i]===t)return e[r];return null},e.findIndex=function(e,t,i){void 0===i&&(i=null);for(var r=e.length-1;-1<r;r--)if(null===i&&e[r]===t||null!==i&&e[r][i]===t)return r;return-1},e.insert=function(e,t,i){for(var r=0;r<t.length;r++)e.splice(i+r,0,t[r])},e.CASEINSENSITIVE=1,e.DESCENDING=2,e.UNIQUESORT=4,e.RETURNINDEXEDARRAY=8,e.NUMERIC=16,e}();e.ArrayUtils=t}(s||(s={})),function(e){var t=function(){function t(){this.values={},this.keys=[]}return t.prototype.addItem=function(e,t){void 0===this.values[e]&&this.keys.push(e),this.values[e]=t},t.prototype.addUniqueItem=function(e,t){this.keys.push(e),this.values[e]=t},t.prototype.unshift=function(e,t){this.keys.unshift(e),this.values[e]=t},t.prototype.setItemAt=function(e,t,i){this.keys[i]=e,this.values[e]=t},t.prototype.addItemAt=function(e,t,i){null!=this.getItem(e)&&this.removeItem(e),this.keys.splice(i,0,e),this.values[e]=t},t.prototype.removeItem=function(e){null!=this.getItem(e)&&(this.keys.splice(this.indexOf(e),1),delete this.values[e])},t.prototype.removeItemAt=function(e){var t=this.getKeyAt(e);null!=t&&(this.keys.splice(e,1),delete this.values[t])},Object.defineProperty(t.prototype,"length",{get:function(){return this.keys.length},set:function(e){},enumerable:!0,configurable:!0}),t.prototype.indexOf=function(e){return this.keys.indexOf(e)},t.prototype.keyExists=function(e){return null!=this.values[e]},t.prototype.getItem=function(e){return this.values[e]},t.prototype.getItemAt=function(e){return this.getItem(this.keys[e])},t.prototype.getKeyAt=function(e){return this.keys[e]},t.prototype.moveItemAt=function(e,t){this.keys.splice(t,0,this.keys.splice(e,1)[0])},t.prototype.slice=function(i,r){void 0===i&&(i=0),void 0===r&&(r=0),0==r&&(r=this.length-i);for(var n=new t,o=0;o<r;o++)this.length>o+i&&(e.nullOrUndefined(this.getItemAt(o+i))||n.addItem(this.getKeyAt(o+i),this.getItemAt(o+i)));return n},t.prototype.concat=function(e,i){if(void 0===i&&(i=!0),!i)return this._concat(e),null;var r,n=new t;for(r=0;r<this.length;r++)n.addItem(this.getKeyAt(r),this.getItemAt(r));for(r=0;r<e.length;r++)n.addItem(e.getKeyAt(r),e.getItemAt(r));return n},t.prototype._concat=function(e){var t,i=e.length;for(t=0;t<i;t++)this.addItem(e.getKeyAt(t),e.getItemAt(t))},t.prototype.splice=function(e,i){void 0===i&&(i=0);var r=new t;e+i>this.length&&(i=this.length-e),1>i&&(i=this.length);for(var n=0;n<this.length;n++)(n<e||n>=e+i)&&r.addItem(this.getKeyAt(n),this.getItemAt(n));return r},t.prototype.reverse=function(){var e,i=new t;for(e=this.length-1;-1<e;e--)i.addItem(this.getKeyAt(e),this.getItemAt(e));return i},t.prototype.toArray=function(e){if(void 0===e&&(e=!1),e)return this.keys.slice(0);e=[];for(var t=0;t<this.length;t++)e.push(this.getItemAt(t));return e},t.prototype.toKeyArray=function(e){if(void 0===e&&(e=!1),e)return this.keys.slice(0);e=[];for(var t=0;t<this.length;t++)e.push(this.getKeyAt(t));return e},t.fromArray=function(e){for(var i=new t,r=0;r<e.length;r++)i.addItem(r.toString(),e[r]);return i},t.convert=function(e,i){for(var r=new t,n=0;n<e.length;n++)r.addItem(e[n][i],e[n]);return r},t.prototype.toString=function(){var e,t=[];for(e in this.keys){var i="{"+e+": "+this.getItem(e)+"}";t.push(i)}return t.join(", ")},t}();e.AssociativeArray=t}(s||(s={})),function(e){var t=function(){function e(){this.quotes=[]}return e.prototype.parse=function(e){try{this.quotes=[];for(var t=[],i=!1,r="",n=0;n<e.length;n++){var o=e.charAt(n);'"'==o||"'"==o?(i&&(this.quotes.push(r),t.push(o),r=""),i=!i):i&&(r+=o)}var s;for(e="  "+e,n=0;n<this.quotes.length;n++)if("truestyle"!=this.quotes[n].toLowerCase()){var a=t[n]+this.quotes[n]+t[n],l=e.substring(0,e.indexOf(a)+a.length+2);if((s=/(\w\w\w\()[\'|\"][^\'|^\"]*[\'|\"]/i).test(l))e=e.replace(a,"@"+n);else{s=/(\W)[\'|\"][^\'|^\"]*[\'|\"]/i;var c=(-1!=l.indexOf("#value")||-1!=l.indexOf("#updateDifference")||-1!=l.indexOf("#updatePercent"))&&-1!=l.indexOf("if(");s.test(l)&&!c?e=e.replace(a,"sum(@"+n+")"):(s=/(\W)[\'|\"][^\'|^\"]*[\'|\"]/i,e=e.replace(a,"@"+n))}}e=(e=(e=(e=e.replace(s=/\#value/g,"value()")).replace(s=/\#updateDifference/g,"updateDifference()")).replace(s=/\#updatePercent/g,"updatePercent()")).toLocaleLowerCase();var u=(u=this._parse(e))[1][0]}catch(h){return null}return u},e.prototype._parse=function(e){for(var t=[],i="",r=e.length,n=0;n<e.length;n++){var o=e.charAt(n);if("("==o)i+="$"+t.length+";",o=this._parse(e.slice(n+1)),t.push(o[1]),n=n+o[0]+1;else{if(")"==o){r=n;break}i+=o}}for(e=[],i=i.split(","),n=0;n<i.length;n++)e.push(this._parseOperands(i[n],t));return[r,e]},e.prototype._parseOperands=function(e,t){for(var i=[[" or "," and "],"== != >= <= = > <".split(" "),["-","+"],["/","*"],["^"]],r=0;r<i.length;r++){var n=Number.MIN_VALUE,o=i[r][0];if(3==r){n=e.indexOf(i[r][0]);var s=e.indexOf(i[r][1]);-1!=n&&-1!=s?o=n<s?i[r][0]:i[r][1]:-1!=n?o=i[r][0]:-1!=s&&(o=i[r][1])}else for(s=0;s<i[r].length;s++){var a=e.indexOf(i[r][s]);-1!=a&&a>=n&&(n=a+(o=i[r][s]).length)}if(2<(n=e.split(o)).length&&(s=n[n.length-1],n.pop(),n=[n.join(o),s]),2==n.length)return[o.trim(),[this._parseOperands(n[0],t),this._parseOperands(n[1],t)],!0]}return this._parseElements(e,t)},e.prototype._parseElements=function(e,t){if(-1!=(e=e.trim()).indexOf("$")){var i=(r=e.split("$"))[0],r=parseInt(r[1]);if(0<i.length){var n="string"!=typeof t[r][0];return("min"==i||"max"==i)&&1<t[r].length&&(n=!0,"string"==typeof t[r][0]&&(t[r][0]=["sum",[t[r][0]],!1]),"string"==typeof t[r][1]&&(t[r][1]=["sum",[t[r][1]],!1])),[i,t[r],n]}return t[r][0]}return-1!=e.indexOf("@")?(i=parseInt(e.slice(1)),this.quotes[i]):"truestyle"==e.toLowerCase()||"truestyle"==e.substring(1,e.length-1).toLowerCase()?"truestyle":(i=parseFloat(e),isNaN(i)?0:i)},e}();e.Lexer=t}(s||(s={})),function(e){var t=function(){function e(){}return Object.defineProperty(e,"isMac",{get:function(){return/Mac/i.test(navigator.platform)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isWin",{get:function(){return/Win/i.test(navigator.platform)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isIOS",{get:function(){return/(iPhone|iPod|iPad)/i.test(navigator.platform)||/(iPhone|iPod|iPad)/i.test(navigator.userAgent)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isAnd",{get:function(){return/Android/i.test(navigator.userAgent)},enumerable:!0,configurable:!0}),e}();e.OSUtil=t}(s||(s={})),function(e){var t=function(){function t(){}return t.isEmptyObject=function(t){for(var i in t)if(!e.nullOrUndefined(t[i]))return!1;return!0},t.deepCopy=function(e){if(e instanceof Array)return t.deepCopyArray(e);var i,r={};for(i in e)r[i]="object"!=typeof e[i]?e[i]:t.deepCopy(e[i]);return r},t.deepCopyArray=function(e){for(var i=[],r=0;r<e.length;r++)i[r]="object"!=typeof e[r]?e[r]:t.deepCopy(e[r]);return i},t}();e.ObjectUtils=t}(s||(s={})),function(e){var t=function(){function e(){throw Error("Singleton")}return e.dispose=function(){e.queue=[],e.instance=null,e.runningThread=null},e.addTask=function(t,i,r,n){void 0===r&&(r=null),void 0===n&&(n=null),e.queue.push({taskFunction:t,context:i,args:r,completeCallback:n}),null==e.runningThread&&e.run()},e.run=function(){(e.runningThread=new i(e.queue.shift(),(function(){return e.onTaskComplete()}))).run()},e.pause=function(){null!=e.runningThread&&e.runningThread.stop()},e.resume=function(){null!=e.runningThread?e.runningThread.run():0<e.queue.length&&e.run()},e.onTaskComplete=function(){e.runningThread=null,0<e.queue.length&&this.run()},e.cancel=function(){null!=e.runningThread&&(e.runningThread.stop(),e.runningThread=null),e.queue=[]},e.isRunning=function(){return null!=e.runningThread},e.adjustTaskSize=function(e,t){return 10<e-50?t=Math.floor(.95*t):-10>e-50&&(t=Math.floor(1.05*t)),Math.max(5,t)},e.queue=[],e}();e.ThreadManager=t;var i=function(){function t(e,t){void 0===t&&(t=null),this.delay=1,this.isComplete=!1,this.task=e,this.completeCallback=t}return t.prototype.run=function(){var t=this;this.currentTimeout=e.fmSetTimeout((function(){return t.doTask()}),this.delay)},t.prototype.stop=function(){e.fmClearTimeout(this.currentTimeout)},t.prototype.doTask=function(){var t=this;this.isComplete=this.task.taskFunction.call(this.task.context,this.task.args),1==this.isComplete?this.onComplete():this.currentTimeout=e.fmSetTimeout((function(){return t.doTask()}),this.delay)},t.prototype.onComplete=function(){null!=this.completeCallback&&this.completeCallback(),null!=this.task.completeCallback&&this.task.completeCallback()},t.prototype.dispose=function(){this.stop(),this.completeCallback=this.task=null},t}()}(s||(s={})),function(e){function t(){var e=navigator.userAgent.toLowerCase(),t={};if(t.isFirefox=/mozilla/.test(e)&&/firefox/.test(e),t.isChrome=/webkit/.test(e)&&/chrome/.test(e)&&!/edge/.test(e),t.isEdge=/edge/.test(e),t.isSafari=/applewebkit/.test(e)&&/safari/.test(e)&&!/chrome/.test(e),t.isOpera=/opera/.test(e),t.isMsie=/msie/.test(e),t.isMobile=/Android|webOS|iPhone|iPad|iPod|BlackBerry|Windows Phone/i.test(e)||/iPad|iPhone|iPod|BlackBerry/i.test(navigator.platform),t.version=NaN,t.isMsie||t.isFirefox||t.isChrome||t.isSafari||t.isOpera||!/trident/.test(e)||(t.isMsie=!0,t.version=11),isNaN(t.version))for(var i=["chrome","firefox","msie","safari","opera"],r=0;r<i.length;r++)try{t.version=parseInt(e.match(RegExp("("+i[r]+")( |/)([0-9]+)"))[3]);break}catch(n){}return t}e.browserVersion=function(){return t()},e.detectBrowser=t,e.isFullscreen=function(){return null!=document.fullscreenElement||null!=document.mozFullScreenElement||null!=document.webkitFullscreenElement||null!=document.msFullscreenElement},e.isHTML5Supported=function(){try{var e;if(e=void 0!==ArrayBuffer){var t;if(t=void 0!==DataView){var i;if(i=void 0!==Uint8Array){var r;if(window.chrome&&navigator.userAgent.match(/chrome.\d*/gi)){var n=navigator.userAgent.match(/chrome.\d*/gi)[0];r=12<=parseInt(n.replace(/[^\d]/g,""))}else r=!0;i=r&&(!window.opera||15<=window.opera.version())&&(!navigator.userAgent.match("Safari/")||!navigator.userAgent.match("Version/5.")&&!navigator.userAgent.match("Version/6.0"))}t=i}e=t}return e}catch(o){return!1}},e.getCookie=function(e){var t=document.cookie,i=t.indexOf(" "+e+"=");return-1==i&&(i=t.indexOf(e+"=")),-1==i?t=null:(i=t.indexOf("=",i)+1,-1==(e=t.indexOf(";",i))&&(e=t.length),t=decodeURI(t.substring(i,e))),t},e.setCookie=function(e,t){var i=new Date;i.setDate(i.getDate()+1825),t=encodeURI(t)+"; expires="+i.toUTCString(),document.cookie=e+"="+t},e.isLandscapeOrientation=function(){return screen.orientation&&-1<screen.orientation.type.indexOf("landscape")},e.isPortraitOrientation=function(){return screen.orientation&&-1<screen.orientation.type.indexOf("portrait")},e.viewportWidth=function(){return Math.max(document.documentElement.clientWidth)},e.viewportHeight=function(){return Math.max(document.documentElement.clientHeight)}}(s||(s={})),function(e){var i=function(i){function n(e,t){void 0===t&&(t=0);var r=i.call(this)||this;return r._currentCount=0,r._delay=0,r._repeatCount=0,r._running=!1,r._delay=e,r._repeatCount=t,r}return a(n,i),n.prototype.onTimer=function(){this._currentCount++,this.dispatch(new t._Event(r.TIMER)),0<this._repeatCount&&this._currentCount>=this._repeatCount&&(this.stop(),this.dispatch(new t._Event(r.TIMER_COMPLETE)))},n.prototype.start=function(){var t=this;this._running||(this._intervalId=e.fmSetInterval((function(){return t.onTimer()}),this._delay),this._running=!0)},n.prototype.stop=function(){this._running&&!e.nullOrUndefined(this._intervalId)&&(e.fmClearInterval(this._intervalId),this._running=!1)},n.prototype.reset=function(){this._currentCount=0,this.stop()},Object.defineProperty(n.prototype,"currentCount",{get:function(){return this._currentCount},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"running",{get:function(){return this._running},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"repeatCount",{get:function(){return this._repeatCount},set:function(e){this._repeatCount=e,this._currentCount>=this._repeatCount&&this.stop()},enumerable:!0,configurable:!0}),n}(t.EventDispatcher);e.Timer=i;var r=function(){function e(){}return e.TIMER="timer",e.TIMER_COMPLETE="complete",e}();e.TimerEvent=r,e.getTimer=function(){return"undefined"!=typeof performance&&"function"==typeof window.performance.now?performance.now():(new Date).getTime()}}(s||(s={})),function(e){var i=function(t){function i(n){var o=t.call(this)||this;if(o._isFocused=!1,o._keydownHandler=function(e){return o.onKeyDown(e)},o.inputKeyUpHandler=function(e){return o.onInputKeyUp(e)},null!=i._instance)throw Error("KeyboardListener is singleton");return o.target=n,e.browserVersion().isMobile||(e.fmdocument.addEventListener("keydown",o._keydownHandler),o._inputContainer=new r.UIElement("div"),o._inputContainer.attr("id","pivot-hiddenInputContainer"),o._inputContainer.css("position","fixed").css("left","0px").css("top","0px").css("opacity","0").css("width","0px").css("height","0px"),o._inputContainer.hide(),o._input=new r.UITextArea,o._input.setId("pivot-hiddenInput"),o._input.container.css("width","1px").css("height","1px").css("padding","0px"),o._input.addEventListener("focusin",(function(){o._isFocused=!0})),o._input.addEventListener("focusout",(function(){o._isFocused=!1})),o._inputContainer.append(o._input.container),n.append(o._inputContainer)),o}return a(i,t),i.getInstance=function(){return null==i._instance&&(i._instance=new i(n._view.PivotView.stage.container)),i._instance},Object.defineProperty(i.prototype,"isFocused",{get:function(){return this._isFocused},enumerable:!0,configurable:!0}),i.prototype.onKeyDown=function(e){var t=new o(o.KEY_DOWN);t.keyCode=e.keyCode,t.altKey=e.altKey,t.ctrlKey=e.ctrlKey,t.metaKey=e.metaKey,t.shiftKey=e.shiftKey,this.dispatch(t)},i.prototype.onInputKeyUp=function(e){this._inputContainer.hide(),this._input.setText(""),this._input.container.blur(),this._input.removeEventListener("keyup",this.inputKeyUpHandler)},i.prototype.copy=function(e){this._inputContainer.show(),this._input.setText(e),this._input.container.focus(),this._input.selectAll(),this._input.container.focus(),this._input.addEventListener("keyup",this.inputKeyUpHandler)},i}(t.EventDispatcher);e.KeyboardListener=i;var o=function(e){function t(t){return e.call(this,t)||this}return a(t,e),t.KEY_DOWN="event_keydown",t}(t._Event);e.KeyboardEvent=o}(s||(s={})),function(e){e.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(null!=console&&null!=console.log)for(t=s.browserVersion().isFirefox&&s.browserVersion().isMobile?0:1;t<e.length;t++);},e.stackTrace=function(){var e=Error();return e&&e.stack?e.stack.substr(77):""}}(n||(n={})),function(e){e.uialert=function(i,r,n,o,s,a){void 0===r&&(r=""),void 0===n&&(n=t.ALERT),void 0===o&&(o=null),void 0===s&&(s=null),void 0===a&&(a=!1),e._view.AlertView.getInstance().openView(i,r,n,o,s,a)};var t=function(){function e(){}return e.ALERT="alert",e.CONFIRMATION="confirmation",e.ERROR="error",e.INFO="info",e}();e.AlertType=t}(n||(n={})),function(e){e.preloader=function(t,i,r,n,o){void 0===t&&(t=!0),e._view.Preloader.getInstance().show(t,i,r,n,o)}}(n||(n={})),function(e){var i,r;i=e.model||(e.model={}),r=function(t){function r(){var n=t.call(this)||this;if(null!=r.instance)throw Error("Singleton");return n.cube_=e.data_.Cube.getInstance(),n.state_=new i._state.StateManager,n}return a(r,t),r.getInstance=function(){return null==this.instance&&(this.instance=new r),this.instance},r.prototype.init=function(t){r.id=t.id?t.id:"",i.JavaScriptHandlers.setHandlers(t),i._labels.LabelsManager.getInstance().reset(),e._view.grid.vo.GridCell.customizeCellFunction=t.customizeCell,this.state_.init(t)},r.prototype.open=function(){this.state_.open()},r.prototype.load=function(e){this.state_.load(e)},r.prototype.save=function(e,t,i,r,n){return void 0===t&&(t=null),void 0===n&&(n=!1),this.state_.save(e,t,i,r,n)},r.prototype.setReport=function(e){this.state_.setReport(e)},r.prototype.getReport=function(e){return void 0===e&&(e={}),this.state_.getReport(e)},r.prototype.clear=function(){this.state_.clear()},r.prototype.checkDataObject=function(e){var t={};return s.nullOrUndefined(e.dataSourceType)||(t.dataSourceType=e.dataSourceType),s.nullOrUndefined(e.filename)||(t.filename=e.filename),s.nullOrUndefined(e.requestHeader)||(t.requestHeader=e.requestHeader),s.nullOrUndefined(e.fieldSeparator)||(t.fieldSeparator=e.fieldSeparator),s.nullOrUndefined(e.recordsetDelimiter)||(t.recordsetDelimiter=e.recordsetDelimiter),s.nullOrUndefined(e.browseForFile)||(t.browseForFile=e.browseForFile),s.nullOrUndefined(e.data)||(t.data=e.data),s.nullOrUndefined(e.ignoreQuotedLineBreaks)||(t.ignoreQuotedLineBreaks=e.ignoreQuotedLineBreaks),s.nullOrUndefined(e.hash)||(t.hash=e.hash),s.nullOrUndefined(e.username)||(t.username=e.username),s.nullOrUndefined(e.password)||(t.password=e.password),t},r.prototype.connectTo=function(e){this.state_.connectTo(this.checkDataObject(e))},r.prototype.updateData=function(e,t){t.partial?this.state_.updateDataPartial(e.data,t):this.state_.updateData(this.checkDataObject(e),t)},r.prototype.getData=function(t,r,n){if(null!=n&&e.Pivot.instance.on("update",(function(){e.Pivot.instance.getData(t,n)})),null!=t&&null!=t.slice){var o=t.slice instanceof e.data_._structure.Slice?t.slice:e.data_._structure.Slice.fromObject(i.report.SliceValueObject.fromObject(t.slice),this.cube_.structure_);i.integration.IntegrationDataManager.getInstance().selectData(o,r)}else r((o=i.integration.IntegrationDataManager.getInstance().getData()).toObject())},r.prototype.getAllConditions=function(){return i.condition.ConditionManager.getObjects()},r.prototype.getCondition=function(e){return(e=i.condition.ConditionManager.get(e))?e.toObject():null},r.prototype.addCondition=function(e){i.condition.ConditionManager.add(i.condition.vo.ConditionValueObject.fromObject(e))},r.prototype.removeCondition=function(e){i.condition.ConditionManager.remove(e)},r.prototype.removeAllConditions=function(){i.condition.ConditionManager.removeAll()},r.prototype.addCalculatedMeasure=function(e){this.cube_.addCalculatedMeasure(e)},r.prototype.removeCalculatedMeasure=function(e){this.cube_.removeCalculatedMeasure(e)},r.prototype.removeAllCalculatedMeasures=function(){this.cube_.removeAllCalculatedMeasures()},r.prototype.expandAllData=function(t){void 0===t&&(t=!0),this.cube_.slice_.expandAll=!0,this.cube_.slice_.drillAll=t,this.cube_.slice_.clearExpands(),this.cube_.slice_.clearDrills(),e.data_.dataprovider_.DataProviderFactory.dispose(),this.refresh()},r.prototype.expandData=function(e){this.dataProvider_.expandData(e)},r.prototype.collapseAllData=function(){this.cube_.slice_.expandAll=!1,this.cube_.slice_.drillAll=!1,this.cube_.slice_.columnAxis.expandedTuples=[],this.cube_.slice_.columnAxis.drilledTuples=[],this.cube_.slice_.rowAxis.expandedTuples=[],this.cube_.slice_.rowAxis.drilledTuples=[],e.data_.dataprovider_.DataProviderFactory.dispose(),this.refresh()},r.prototype.collapseData=function(e){this.dataProvider_.collapseData(e)},r.prototype.setOptions=function(e){null!=e.localSettingsUrl&&delete e.localSettingsUrl,null!=e.zoom&&delete e.zoom,i._options.OptionsManager.setOptions(e,!1)},r.prototype.print=function(e){i.printing.PrintingManager.getInstance().print(e)},r.prototype.exportTo=function(e,t,r){void 0===t&&(t=null),void 0===r&&(r=null),i._export.ExportManager.exportTo(e,t,r)},r.prototype.getFilter=function(e){if(null==this.cube_||null==this.cube_.structure_)return[];var t=[];if((e=this.cube_.structure_.allHierarchies(!1).getItem(e))&&e.hasFilter())for(var i=e.filter,r=0;r<i.length;r++){var n=i.getItemAt(r);t.push({caption:n.caption,uniqueName:n.uniqueName,hierarchyName:e.uniqueName,parentMember:n.parent.uniqueName})}return t},r.prototype.getFilterProperties=function(t){if(null==this.cube_||null==this.cube_.structure_)return[];var i={};if(i.type=e.data_.consts.FilterType.NONE,i.members=[],(t=this.cube_.structure_.allHierarchies(!1).getItem(t))&&t.hasFilter()){if(t.hasMembersFilter()){i.type="members";for(var r=t.filterMembers,n=0;n<r.length;n++){var o=r.getItemAt(n);i.members.push({caption:o.caption,uniqueName:o.uniqueName,hierarchyName:t.uniqueName,parentMember:o.parent.uniqueName})}}t.hasValuesFilter()&&(i.type=t.filterType,i.quantity=t.filterQuantity,i.measure=t.filterMeasureName,i.measureName=t.filterMeasureName)}return i},r.prototype.setFilter=function(t,r,n){if(void 0===n&&(n=!1),t=this.cube_.structure_.allHierarchies(!1).getItem(t)){var o={};o.members=r,o.negation=n,e.data_._structure.GenericHierarchy.filterFromObject(o,t),i.JavaScriptHandlers.getInstance().dispatch(new i.APIEvent(i.JavaScriptHandlers.REPORT_CHANGE)),this.cube_.filter()}},r.prototype.clearFilter=function(e){(e=this.cube_.structure_.allHierarchies(!1).getItem(e))&&(e.clearFilter(),this.cube_.select())},r.prototype.getRows=function(){if(null==this.cube_||null==this.cube_.slice_)return[];for(var e=this.cube_.slice_.rows,t=[],i=0;i<e.length;i++){var r=e.getItemAt(i);t.push({caption:r.caption,uniqueName:r.uniqueName,sort:r.sortName,folder:r.folder})}return t},r.prototype.getColumns=function(){if(null==this.cube_||null==this.cube_.slice_)return[];for(var e=this.cube_.slice_.columns,t=[],i=0;i<e.length;i++){var r=e.getItemAt(i);t.push({caption:r.caption,uniqueName:r.uniqueName,sort:r.sortName,folder:r.folder})}return t},r.prototype.getPages=function(){if(null==this.cube_||null==this.cube_.slice_)return[];for(var e=this.cube_.slice_.pages,t=[],i=0;i<e.length;i++){var r=e.getItemAt(i);t.push({caption:r.caption,uniqueName:r.uniqueName,sort:r.sortName,folder:r.folder})}return t},r.prototype.getMeasures=function(){if(null==this.cube_||null==this.cube_.slice_)return[];var t,r,n,o=[];if(i._options.OptionsManager.flatView){var s=this.cube_.slice_.flatten();for(t=0;t<s.length;t++)r=s.getItemAt(t),(r=this.cube_.structure_.hierarchyToMeasure(r.uniqueName))&&((n=e.data_._structure.GenericMeasure.toObject(r)).availableAggregations=[],n.availableAggregationsCaptions=[],n.caption=n.grandTotalCaption=r.originalCaption,o.push(n))}else for(s=this.cube_.slice_.measures_,t=0;t<s.length;t++){r=s.getItemAt(t),n=e.data_._structure.GenericMeasure.toObject(r);var a=r.availableAggregations;0!=r.availableAggregations.length||r.calculated||(a=e.data_.consts.AggregationName.ALL_AGGREGATIONS),n.availableAggregations=a,n.availableAggregationsCaptions=e.data_.consts.AggregationName.aggregationCaptions(a),o.push(n)}return o},r.prototype.getAllMeasures=function(){if(null==this.cube_||null==this.cube_.structure_)return[];for(var t=this.cube_.structure_.measures_,r=[],n=0;n<t.length;n++){var o=t.getItemAt(n),s=e.data_._structure.GenericMeasure.toObject(o);if(i._options.OptionsManager.flatView)s.availableAggregations=[],s.availableAggregationsCaptions=[],s.caption=s.grandTotalCaption=o.originalCaption;else{var a=o.availableAggregations;0!=o.availableAggregations.length||o.calculated||(a=e.data_.consts.AggregationName.ALL_AGGREGATIONS),s.availableAggregations=a,s.availableAggregationsCaptions=e.data_.consts.AggregationName.aggregationCaptions(a)}r.push(s)}return r},r.prototype.replaceHierarchyCaption=function(e){this.cube_.structure_.allHierarchies(!1).getItem(e.name).label=e.caption},r.prototype.getAllHierarchies=function(){if(null==this.cube_||null==this.cube_.structure_)return[];for(var e=this.cube_.structure_.allHierarchies(!1),t=[],i=0;i<e.length;i++){var r=e.getItemAt(i);t.push({caption:r.caption,uniqueName:r.uniqueName,folder:r.folder})}return t},r.prototype.sortValues=function(e,t,i,r){null!=(e=this.cube_.slice_.axes.getItem(e))&&((r=this.cube_.structure_.measures_.getItem(r))&&(e.sortType=t,e.sortTuple=i,e.sortMeasure=r),this.cube_.sort())},r.prototype.setSort=function(t,r){var n=this.cube_.structure_.allHierarchies(!1).getItem(t);if(n){var o=this.cube_.slice_.axes.getItem(e.data_.consts.AxisName.COLUMNS_AXIS),s=this.cube_.slice_.axes.getItem(e.data_.consts.AxisName.ROWS_AXIS);-1!=o.hierarchies.indexOf(n.uniqueName)?this.cube_.clearSortValues(s):-1!=s.hierarchies.indexOf(n.uniqueName)&&this.cube_.clearSortValues(o),n.sortName=r,i._options.OptionsManager.flatView&&(this.dataProvider_.columnSortType=r,this.dataProvider_.columnSortTuple=this.dataProvider_.getColumnTupleByName(n.uniqueName),this.dataProvider_.columnSortMeasure=this.cube_.structure_.hierarchyToMeasure(n.uniqueName))}this.cube_.select()},r.prototype.getSort=function(e){return null==this.cube_||null==this.cube_.structure_?"":null!=(e=this.cube_.structure_.allHierarchies(!1).getItem(e))?e.sortName:""},r.prototype.setTopX=function(t,r,n){t=this.cube_.structure_.allHierarchies(!1).getItem(t);var o=i._options.OptionsManager.flatView?this.cube_.structure_.measures_.getItem(n):this.cube_.slice_.measures_.getItem(n);t&&o&&!t.isMeasures&&(t.filterType=e.data_.consts.FilterType.TOP,t.filterQuantity=r,t.filterMeasureName=n,t.sortName=e.data_.consts.SortType.UNSORTED,r=this.cube_.slice_.findAxis(e.data_.consts.AxisName.ROWS_AXIS),n=this.cube_.slice_.findAxis(e.data_.consts.AxisName.COLUMNS_AXIS),-1!=r.hierarchies.indexOf(t.uniqueName)&&(n.sortTuple=[],n.sortType=e.data_.consts.SortType.DESC,n.sortMeasure=this.cube_.slice_.measures_.getItem(t.filterMeasureName)),-1!=n.hierarchies.indexOf(t.uniqueName)&&(r.sortTuple=[],r.sortType=e.data_.consts.SortType.DESC,r.sortMeasure=this.cube_.slice_.measures_.getItem(t.filterMeasureName))),this.cube_.filter()},r.prototype.setBottomX=function(t,r,n){t=this.cube_.structure_.allHierarchies(!1).getItem(t);var o=i._options.OptionsManager.flatView?this.cube_.structure_.measures_.getItem(n):this.cube_.slice_.measures_.getItem(n);t&&o&&!t.isMeasures&&(t.filterType=e.data_.consts.FilterType.BOTTOM,t.filterQuantity=r,t.filterMeasureName=n,t.sortName=e.data_.consts.SortType.UNSORTED,r=this.cube_.slice_.findAxis(e.data_.consts.AxisName.ROWS_AXIS),n=this.cube_.slice_.findAxis(e.data_.consts.AxisName.COLUMNS_AXIS),-1!=r.hierarchies.indexOf(t.uniqueName)&&(n.sortTuple=[],n.sortType=e.data_.consts.SortType.ASC,n.sortMeasure=this.cube_.slice_.measures_.getItem(t.filterMeasureName)),-1!=n.hierarchies.indexOf(t.uniqueName)&&(r.sortTuple=[],r.sortType=e.data_.consts.SortType.ASC,r.sortMeasure=this.cube_.slice_.measures_.getItem(t.filterMeasureName))),this.cube_.filter()},r.prototype.getMembers=function(e,t,i){return null==this.cube_||null==this.cube_.structure_?[]:(t=[],(e=this.cube_.structure_.allHierarchies(!1).getItem(e))&&(t=this.getAllChildren(e.allMember),null!=i&&i(t)),t)},r.prototype.getChildrenByMember=function(e,t){for(var i=""==t?e.allMember.children:e.findMember(t).children,r=[],n=0;n<i.length;n++){var o=i.getItemAt(n);o.uniqueName!=e.allMemberName&&r.push({caption:o.caption,uniqueName:o.uniqueName,hierarchyName:e.uniqueName,parentMember:o.parent.isAll?"(All)":o.parent.uniqueName,isLeaf:o.level.num==o.hierarchy_.levels_.length-1})}return r},r.prototype.getAllChildren=function(e){e=e.hierarchy_.sortChildren(e,!1);for(var t=[],r=0;r<e.length;r++){var n=e.getItemAt(r),o=n.level.num==n.hierarchy_.levels_.length-1,s=[];1==n.children.length&&n.children.getItemAt(0).caption==i._labels.Labels.MEMBER_BLANK||(s=this.getAllChildren(n)),t.push({caption:n.caption,uniqueName:n.uniqueName,hierarchyName:n.hierarchy_.uniqueName,children:s,parentMember:n.parent.isAll?"(All)":n.parent.uniqueName,isLeaf:o})}return t},r.prototype.runQuery=function(e){this.state_.runQuery(e)},r.prototype.getOptions=function(){return i._options.OptionsManager.getOptions(!0,!0).toObject()},r.prototype.getFormat=function(e){return((e=this.cube_&&this.cube_.structure_?this.cube_.structure_.findMeasure(e):null)?e.getFormat():i.format.FormatManager.getFormat("")).toObject(!0)},r.prototype.setFormat=function(t,r){t.hasOwnProperty("name")||(t.name=s.StringUtils.generateID());try{i.format.FormatManager.setFormat(t)}catch(a){return void e.uialert("Can't add format. Component's configuration requires more parameters.")}try{var n=this.cube_.structure_.findMeasure(r);if(n&&(n.format=t.name),""!=t.name&&(""==r||null==r))for(var o=0;o<this.cube_.structure_.measures_.length;o++)(n=this.cube_.structure_.measures_.getItemAt(o)).format=t.name}catch(l){e.uialert("List of measures is empty. There is nothing to format.")}},r.prototype.refresh=function(){this.cube_.filter()},r.prototype.dispose=function(){e.data_.dataprovider_.DataProviderFactory.dispose(),this.cube_&&this.cube_.dispose(),this.state_&&this.state_.dispose(),this.dataProvider_=this.state_=this.cube_=null,r.instance=null},r.id="WebDataRocks",r}(t.EventDispatcher),i.PivotModel=r}(n||(n={})),function(e){!function(e){var i=function(e,t){void 0===t&&(t=null),this.type=e,this.data=t};e.APIEvent=i,i=function(e){function t(){var i=e.call(this)||this;if(null!=t.instance)throw Error("Singleton");return i}return a(t,e),t.getInstance=function(){return null==t.instance&&(t.instance=new t),t.instance},t.dispose=function(){t.instance=null},t.toTypes=function(e){return t.isValidType(e)?e:""},t.isValidType=function(e){return-1<t.types.indexOf(e)},t.prototype.addEventListener=function(i,r,n){void 0===n&&(n=0),i=t.toTypes(i),t.isValidType(i)&&e.prototype.addEventListener.call(this,i,r,n)},t.prototype.removeEventListener=function(i,r){i=t.toTypes(i),t.isValidType(i)&&e.prototype.removeEventListener.call(this,i,r)},t.setHandlers=function(e){t.setHandler(t.READY,e[t.READY]),t.setHandler(t.OPENING_REPORT_FILE,e[t.OPENING_REPORT_FILE]),t.setHandler(t.LOADING_REPORT_FILE,e[t.LOADING_REPORT_FILE]),t.setHandler(t.REPORT_FILE_LOADED,e[t.REPORT_FILE_LOADED]),t.setHandler(t.REPORT_FILE_ERROR,e[t.REPORT_FILE_ERROR]),t.setHandler(t.REPORT_FILE_CANCELLED,e[t.REPORT_FILE_CANCELLED]),t.setHandler(t.REPORT_CHANGE,e[t.REPORT_CHANGE]),t.setHandler(t.LOADING_DATA,e[t.LOADING_DATA]),t.setHandler(t.DATA_LOADED,e[t.DATA_LOADED]),t.setHandler(t.DATA_ERROR,e[t.DATA_ERROR]),t.setHandler(t.DATA_FILE_CANCELLED,e[t.DATA_FILE_CANCELLED]),t.setHandler(t.DATA_CHANGED,e[t.DATA_CHANGED]),t.setHandler(t.RUNNING_QUERY,e[t.RUNNING_QUERY]),t.setHandler(t.QUERY_COMPLETE,e[t.QUERY_COMPLETE]),t.setHandler(t.QUERY_ERROR,e[t.QUERY_ERROR]),t.setHandler(t.LOADING_LOCALIZATION,e[t.LOADING_LOCALIZATION]),t.setHandler(t.LOCALIZATION_LOADED,e[t.LOCALIZATION_LOADED]),t.setHandler(t.LOCALIZATION_ERROR,e[t.LOCALIZATION_ERROR]),t.setHandler(t.REPORT_COMPLETE,e[t.REPORT_COMPLETE]),t.setHandler(t.PRINT_START,e[t.PRINT_START]),t.setHandler(t.PRINT_COMPLETE,e[t.PRINT_COMPLETE]),t.setHandler(t.EXPORT_START,e[t.EXPORT_START]),t.setHandler(t.EXPORT_COMPLETE,e[t.EXPORT_COMPLETE]),t.setHandler(t.UPDATE,e[t.UPDATE]),t.setHandler(t.BEFORE_GRID_DRAW,e[t.BEFORE_GRID_DRAW]),t.setHandler(t.AFTER_GRID_DRAW,e[t.AFTER_GRID_DRAW]),t.setHandler(t.CELL_CLICK,e[t.CELL_CLICK]),t.setHandler(t.CELL_DOUBLE_CLICK,e[t.CELL_DOUBLE_CLICK]),t.setHandler(t.FILTER_OPEN,e[t.FILTER_OPEN]),t.setHandler(t.FILDS_LIST_OPEN,e[t.FILDS_LIST_OPEN]),t.setHandler(t.FILDS_LIST_CLOSE,e[t.FILDS_LIST_CLOSE]),t.setHandler(t.BEFORE_TOOLBAR_CREATED,e[t.BEFORE_TOOLBAR_CREATED])},t.setHandler=function(e,i){if(i){"string"==typeof i&&(i=t.getFunctionByName(i));var r=i;e!=t.BEFORE_TOOLBAR_CREATED&&e!=t.BEFORE_GRID_DRAW&&e!=t.AFTER_GRID_DRAW&&(r=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];s.fmSetTimeout((function(){i.apply(null,e)}),1)}),t.getInstance().addEventListener(e,r)}},t.getFunctionByName=function(e,t){void 0===t&&(t=window);for(var i=e.split("."),r=i.pop(),n=0;n<i.length;n++){if(null==t)return null;t=t[i[n]]}return t[r]},t.OPENING_REPORT_FILE="openingreportfile",t.LOADING_REPORT_FILE="loadingreportfile",t.REPORT_FILE_LOADED="reportfileloaded",t.REPORT_FILE_ERROR="reportfileerror",t.REPORT_FILE_CANCELLED="reportfilecancelled",t.LOADING_DATA="loadingdata",t.DATA_LOADED="dataloaded",t.DATA_ERROR="dataerror",t.DATA_FILE_CANCELLED="datafilecancelled",t.DATA_CHANGED="datachanged",t.RUNNING_QUERY="runningquery",t.QUERY_COMPLETE="querycomplete",t.QUERY_ERROR="queryerror",t.LOADING_LOCALIZATION="loadinglocalization",t.LOCALIZATION_LOADED="localizationloaded",t.LOCALIZATION_ERROR="localizationerror",t.REPORT_COMPLETE="reportcomplete",t.REPORT_CHANGE="reportchange",t.EXPORT_START="exportstart",t.EXPORT_COMPLETE="exportcomplete",t.PRINT_START="printstart",t.PRINT_COMPLETE="printcomplete",t.types=[t.READY="ready",t.OPENING_REPORT_FILE,t.LOADING_REPORT_FILE,t.REPORT_FILE_LOADED,t.REPORT_FILE_ERROR,t.REPORT_FILE_CANCELLED,t.LOADING_DATA,t.DATA_LOADED,t.DATA_ERROR,t.DATA_FILE_CANCELLED,t.DATA_CHANGED,t.RUNNING_QUERY,t.QUERY_COMPLETE,t.QUERY_ERROR,t.LOADING_LOCALIZATION,t.LOCALIZATION_LOADED,t.LOCALIZATION_ERROR,t.REPORT_COMPLETE,t.REPORT_CHANGE,t.PRINT_START,t.PRINT_COMPLETE,t.EXPORT_START,t.EXPORT_COMPLETE,t.UPDATE="update",t.BEFORE_GRID_DRAW="beforegriddraw",t.AFTER_GRID_DRAW="aftergriddraw",t.CELL_CLICK="cellclick",t.CELL_DOUBLE_CLICK="celldoubleclick",t.FILTER_OPEN="filteropen",t.FILDS_LIST_OPEN="fieldslistopen",t.FILDS_LIST_CLOSE="fieldslistclose",t.BEFORE_TOOLBAR_CREATED="beforetoolbarcreated"],t}(t.EventDispatcher),e.JavaScriptHandlers=i}(e.model||(e.model={}))}(n||(n={})),function(e){!function(e){var t=function(){function e(){}return e.valid=function(e){return null==e||-1==(e=e.toLowerCase()).indexOf("<script")&&-1==e.indexOf("javascript:")&&-1==e.indexOf("<iframe")&&-1==e.indexOf("<object")&&-1==e.indexOf("expression(")&&-1==e.indexOf("onmouseover")&&-1==e.indexOf("onerror")},e.validate=function(e,t){return void 0===t&&(t=!1),s.StringUtils.escapeHtml(e,t)},e}();e.XSSCheck=t}(e.model||(e.model={}))}(n||(n={})),function(e){var t,i,r;t=e.model||(e.model={}),i=t.integration||(t.integration={}),r=function(){function r(){}return r.getInstance=function(){return null==r.instance&&(r.instance=new r),r.instance},r.dispose=function(){r.instance=null},r.prototype.getData=function(){var t=e.data_.dataprovider_.DataProviderFactory.getDataProvider();return this.composeData(t)},r.prototype.selectData=function(t,i){var r=e.data_.Cube.getInstance(),n=e.data_.LocalDataStorage.clone(r.localDataStorage);n.slice_=t,n.filter(),n.select(),(r=new e.data_.dataprovider_.ChartDataProvider).reset(),r.dataStorage=n,r.slice=t,r.load(),i((n=this.composeData(r)).toObject()),r.reset()},r.prototype.composeData=function(e){var r=new i.OutputDataValueObject;if(null==e.slice)return r;r.slice=e.slice.toObject(),r.meta={vAmount:e.slice.measures_.length,formats:[]};var n=0,o=0;if(e.dataLoaded&&!e.isEmpty){var s,a;s="on"==t._options.OptionsManager.showGrandTotals||"rows"==t._options.OptionsManager.showGrandTotals?e.dataWidth-1:e.dataWidth,a="on"==t._options.OptionsManager.showGrandTotals||"columns"==t._options.OptionsManager.showGrandTotals?e.dataHeight-1:e.dataHeight;var l,c,u,h=NaN,d="";d="",r.data=[],l=[],c=[],u={};for(var A=0;A<e.measures.length;A++){h=e.measures.getItemAt(A),r.meta["v"+A+"Name"]=h.caption;var p=t.PivotModel.getInstance().getFormat(h.uniqueName);r.meta.formats.push(p),h=e.getValue(l,c,h),u["v"+A]=h}for(r.data.push(u),p=0;p<a;p++){for(u={},l=e.getRowTuple(p),n=Math.max(n,l.length),c=[],A=e.rowsOnly,h=0;h<l.length;h++){var f=h,g=(d=A.getItemAt(f)).members.getItemAt(g=l[h]);r.meta["r"+f+"Name"]=d.caption,d=this.getDataFromMember(g),u["r"+f]=d}for(A=0;A<e.measures.length;A++)h=e.measures.getItemAt(A),h=e.getValue(l,c,h),u["v"+A]=h;r.data.push(u)}for(var m=0;m<s;m++){for(u={},l=[],c=e.getColumnTuple(m),o=Math.max(o,c.length),A=e.columnsOnly,h=0;h<c.length;h++)g=(d=A.getItemAt(f=h)).members.getItemAt(g=c[h]),r.meta["c"+f+"Name"]=d.caption,d=this.getDataFromMember(g),u["c"+f]=d;for(A=0;A<e.measures.length;A++)h=e.measures.getItemAt(A),h=e.getValue(l,c,h),u["v"+A]=h;r.data.push(u)}for(p=0;p<a;p++)for(l=e.getRowTuple(p),n=Math.max(n,l.length),m=0;m<s;m++){for(c=e.getColumnTuple(m),o=Math.max(o,c.length),u={},A=e.rowsOnly,h=0;h<l.length;h++)g=(d=A.getItemAt(f=h)).members.getItemAt(g=l[h]),d=this.getDataFromMember(g),u["r"+f]=d;for(A=e.columnsOnly,h=0;h<c.length;h++)g=(d=A.getItemAt(f=h)).members.getItemAt(g=c[h]),d=this.getDataFromMember(g),u["c"+f]=d;for(A=0;A<e.measures.length;A++)h=e.measures.getItemAt(A),h=e.getValue(l,c,h),u["v"+A]=h;r.data.push(u)}}return r.meta.rAmount=n,r.meta.cAmount=o,r},r.prototype.getDataFromMember=function(t){return t.level.type==e.data_.types.LevelType.NUMBER||t.level.type==e.data_.types.LevelType.TIME?t.levelOrdinal:t.level.type==e.data_.types.LevelType.TIME_DATE?Date.parse(t.caption):t.level.type==e.data_.types.LevelType.DAY?isNaN(parseFloat(t.caption))?t.caption:parseFloat(t.caption):t.caption},r}(),i.IntegrationDataManager=r}(n||(n={})),function(e){!function(e){!function(e){var t=function(){function e(){this.slice={},this.meta={},this.data=[]}return e.prototype.toObject=function(){var e,t={};for(e in this)"slice"!=e&&"function"!=typeof this[e]&&(t[e]=this[e]);return t},e}();e.OutputDataValueObject=t}(e.integration||(e.integration={}))}(e.model||(e.model={}))}(n||(n={})),function(e){!function(e){!function(e){var t=function(){function e(){}return e.DEFAULT_EXPORT_TITLE="WebDataRocks Reporting Tool",e}();e.Labels=t}(e._labels||(e._labels={}))}(e.model||(e.model={}))}(n||(n={})),function(e){!function(e){!function(e){var t=function(){function t(){}return t.prototype.load=function(e,t,i){var r=this;this.successHandler=t,this.errorHandler=i,this.xhr=new XMLHttpRequest,this.xhr.open("GET",e,!0),this.xhr.onerror=function(e){return r.onError(e)},this.xhr.onreadystatechange=function(e){return r.onReadyStateChange(e)},this.xhr.send()},t.prototype.onReadyStateChange=function(e){null!=this.xhr&&4===this.xhr.readyState&&(200===this.xhr.status?this.success():this.errorHandler())},t.prototype.success=function(){this.xhr.response&&null==this.xhr.response.error?null!=this.successHandler&&this.onLoaded(this.xhr.response):this.errorHandler&&this.errorHandler()},t.prototype.onError=function(e){null!=this.errorHandler&&this.errorHandler()},t.prototype.onLoaded=function(t){try{var i=JSON.parse(t);this.successHandler(e.LabelsValueObject.fromObject(i))}catch(r){console.error(r),this.errorHandler()}},t}();e.LabelsLoader=t}(e._labels||(e._labels={}))}(e.model||(e.model={}))}(n||(n={})),function(e){!function(e){!function(e){var t=function(){function t(){if(null!=t.instance)throw Error("Singleton");this.defaults=new e.LabelsValueObject,this.defaults.setDefaults()}return t.getInstance=function(){return null==t.instance&&(t.instance=new t),t.instance},t.dispose=function(){e.Labels.MONTHS_LABELS=null,e.Labels.MONTHS_LABELS_SHORT=null,e.Labels.WEEKDAYS_LABELS=null,e.Labels.WEEKDAYS_LABELS_SHORT=null,e.Labels.QUARTER_LABELS=null,t.instance.defaults=null,t.instance.globals=null,t.instance.reports=null,t.instance=null},t.prototype.getReportLocalization=function(){return this.reports},t.prototype.setReportLocalization=function(e){this.reports!=e&&(this.reports=e,this.updateLabels())},t.prototype.updateLabels=function(){e.Labels.FIELDS_LIST_FLAT_HIERARCHY_BOX=this.getLabel("fieldsList/flatHierarchyBox"),e.Labels.FIELDS_LIST_HIERARCHY_BOX=this.getLabel("fieldsList/hierarchyBox"),e.Labels.FIELDS_LIST_FILTER_BOX=this.getLabel("fieldsList/filterBox"),e.Labels.FIELDS_LIST_ROW_BOX=this.getLabel("fieldsList/rowBox"),e.Labels.FIELDS_LIST_COLUMN_BOX=this.getLabel("fieldsList/columnBox"),e.Labels.FIELDS_LIST_MEASURE_BOX=this.getLabel("fieldsList/measureBox"),e.Labels.FIELDS_LIST_VALUES=this.getLabel("fieldsList/values"),e.Labels.FIELDS_LIST_ADD_CALCULATED_MEASURE=this.getLabel("fieldsList/addCalculatedMeasure"),e.Labels.FIELDS_LIST_EXPAND_ALL=this.getLabel("fieldsList/expandAll"),e.Labels.FIELDS_LIST_COLLAPSE_ALL=this.getLabel("fieldsList/collapseAll"),e.Labels.FIELDS_LIST_FORMULAS_GROUP_NAME=this.getLabel("fieldsList/formulasGroupName"),e.Labels.FIELDS_LIST_ALL_FIELDS=this.getLabel("fieldsList/allFields"),e.Labels.FIELDS_LIST_ROWS=this.getLabel("fieldsList/rows"),e.Labels.FIELDS_LIST_COLUMNS=this.getLabel("fieldsList/columns"),e.Labels.FIELDS_LIST_FILTERS=this.getLabel("fieldsList/filters"),e.Labels.FIELDS_LIST_DROP_FIELD=this.getLabel("fieldsList/dropField"),e.Labels.FIELDS_LIST_TITLE=this.getLabel("fieldsList/title"),e.Labels.FIELDS_LIST_SUBTITLE=this.getLabel("fieldsList/subtitle"),e.Labels.FILTER_ALL=this.getLabel("filter/all"),e.Labels.FILTER_MULTIPLE_ITEMS=this.getLabel("filter/multipleItems"),e.Labels.FILTER_SELECT_ALL=this.getLabel("filter/selectAll"),e.Labels.FILTER_SELECT_ALL_RESULTS=this.getLabel("filter/selectAllResults"),e.Labels.FILTER_TOP=this.getLabel("filter/top"),e.Labels.FILTER_BOTTOM=this.getLabel("filter/bottom"),e.Labels.FILTER_ASC_SORT=this.getLabel("filter/ascSort"),e.Labels.FILTER_DESC_SORT=this.getLabel("filter/descSort"),e.Labels.FILTER_TOP_X=this.getLabel("filter/topX"),e.Labels.FILTER_TOP_X_CLEAR=this.getLabel("filter/clearTopX"),e.Labels.FILTER_SEARCH=this.getLabel("filter/search"),e.Labels.FILTER_AMOUNT_SELECTED=this.getLabel("filter/amountSelected"),e.Labels.FILTER_AMOUNT_FOUND=this.getLabel("filter/amountFound"),e.Labels.FILTER_SORT=this.getLabel("filter/sort"),e.Labels.DRILL_THROUGH_TITLE=this.getLabel("drillThrough/title"),e.Labels.DRILL_THROUGH_ROW=this.getLabel("drillThrough/row"),e.Labels.DRILL_THROUGH_COLUMN=this.getLabel("drillThrough/column"),e.Labels.DRILL_THROUGH_VALUE=this.getLabel("drillThrough/value"),e.Labels.CALCULATED_VIEW_TITLE=this.getLabel("calculatedView/title"),e.Labels.CALCULATED_VIEW_MEASURE_BOX=this.getLabel("calculatedView/measureBox"),e.Labels.CALCULATED_VIEW_MEASURE_NAME=this.getLabel("calculatedView/measureName"),e.Labels.CALCULATED_VIEW_FORMULA=this.getLabel("calculatedView/formula"),e.Labels.CALCULATED_VIEW_FORMULA_PROMPT=this.getLabel("calculatedView/formulaPrompt"),e.Labels.CALCULATED_VIEW_CALCULATE_INDI_VALUES=this.getLabel("calculatedView/calculateIndividualValues"),e.Labels.CALCULATED_VIEW_REMOVE_VALUE=this.getLabel("calculatedView/removeValue"),e.Labels.CALCULATED_VIEW_REMOVE_VALUE_TITLE=this.getLabel("calculatedView/removeValueTitle"),e.Labels.CALCULATED_VIEW_REMOVE_VALUE_MESSAGE=this.getLabel("calculatedView/removeValueMessage"),e.Labels.CALCULATED_VIEW_HEADER=this.getLabel("calculatedView/header"),e.Labels.CALCULATED_VIEW_ALL_VALUES=this.getLabel("calculatedView/allValues"),e.Labels.GRID_TOTAL=this.getLabel("grid/total"),e.Labels.GRID_TOTALS=this.getLabel("grid/totals"),e.Labels.GRID_GRAND_TOTAL=this.getLabel("grid/grandTotal"),e.Labels.MEMBER_BLANK=this.getLabel("grid/blankMember"),e.Labels.INVALID_DATE=this.getLabel("grid/dateInvalidCaption"),e.Labels.TOOLTIPS_ROW=this.getLabel("tooltips/row"),e.Labels.TOOLTIPS_COLUMN=this.getLabel("tooltips/column"),e.Labels.TOOLTIPS_HEADER_RESIZE=this.getLabel("tooltips/headerResize"),e.Labels.TOOLTIPS_HEADER_FIT=this.getLabel("tooltips/headerFit"),e.Labels.TOOLTIPS_FILTER_ICON=this.getLabel("tooltips/filterIcon"),e.Labels.TOOLTIPS_FILTERED=this.getLabel("tooltips/filtered"),e.Labels.TOOLTIPS_EXPAND_ICON=this.getLabel("tooltips/expandIcon"),e.Labels.TOOLTIPS_COLLAPSE_ICON=this.getLabel("tooltips/collapseIcon"),e.Labels.TOOLTIPS_DRILL_DOWN=this.getLabel("tooltips/drillDown"),e.Labels.TOOLTIPS_DRILL_UP=this.getLabel("tooltips/drillUp"),e.Labels.TOOLTIPS_SORT_ICON=this.getLabel("tooltips/sortIcon"),e.Labels.TOOLTIPS_SORTED_DESC=this.getLabel("tooltips/sortedDescIcon"),e.Labels.TOOLTIPS_SORTED_ASC=this.getLabel("tooltips/sortedAscIcon"),e.Labels.TOOLTIPS_CLOSE=this.getLabel("tooltips/close"),e.Labels.SUM_CAPTION=this.getLabel("aggregations/sum/caption"),e.Labels.SUM_TOTAL_CAPTION=this.getLabel("aggregations/sum/totalCaption"),e.Labels.SUM_GRAND_TOTAL_CAPTION=this.getLabel("aggregations/sum/grandTotalCaption"),e.Labels.COUNT_CAPTION=this.getLabel("aggregations/count/caption"),e.Labels.COUNT_TOTAL_CAPTION=this.getLabel("aggregations/count/totalCaption"),e.Labels.COUNT_GRAND_TOTAL_CAPTION=this.getLabel("aggregations/count/grandTotalCaption"),e.Labels.DISTINCT_COUNT_CAPTION=this.getLabel("aggregations/distinctCount/caption"),e.Labels.DISTINCT_COUNT_TOTAL_CAPTION=this.getLabel("aggregations/distinctCount/totalCaption"),e.Labels.DISTINCT_COUNT_GRAND_TOTAL_CAPTION=this.getLabel("aggregations/distinctCount/grandTotalCaption"),e.Labels.DIFFERENCE_CAPTION=this.getLabel("aggregations/difference/caption"),e.Labels.DIFFERENCE_TOTAL_CAPTION=this.getLabel("aggregations/difference/totalCaption"),e.Labels.DIFFERENCE_GRAND_TOTAL_CAPTION=this.getLabel("aggregations/difference/grandTotalCaption"),e.Labels.PERCENT_DIFFERENCE_CAPTION=this.getLabel("aggregations/percentDifference/caption"),e.Labels.PERCENT_DIFFERENCE_TOTAL_CAPTION=this.getLabel("aggregations/percentDifference/totalCaption"),e.Labels.PERCENT_DIFFERENCE_GRAND_TOTAL_CAPTION=this.getLabel("aggregations/percentDifference/grandTotalCaption"),e.Labels.AVERAGE_CAPTION=this.getLabel("aggregations/average/caption"),e.Labels.AVERAGE_TOTAL_CAPTION=this.getLabel("aggregations/average/totalCaption"),e.Labels.AVERAGE_GRAND_TOTAL_CAPTION=this.getLabel("aggregations/average/grandTotalCaption"),e.Labels.PRODUCT_CAPTION=this.getLabel("aggregations/product/caption"),e.Labels.PRODUCT_TOTAL_CAPTION=this.getLabel("aggregations/product/totalCaption"),e.Labels.PRODUCT_GRAND_TOTAL_CAPTION=this.getLabel("aggregations/product/grandTotalCaption"),e.Labels.MIN_CAPTION=this.getLabel("aggregations/min/caption"),e.Labels.MIN_TOTAL_CAPTION=this.getLabel("aggregations/min/totalCaption"),e.Labels.MIN_GRAND_TOTAL_CAPTION=this.getLabel("aggregations/min/grandTotalCaption"),e.Labels.MAX_CAPTION=this.getLabel("aggregations/max/caption"),e.Labels.MAX_TOTAL_CAPTION=this.getLabel("aggregations/max/totalCaption"),e.Labels.MAX_GRAND_TOTAL_CAPTION=this.getLabel("aggregations/max/grandTotalCaption"),e.Labels.PERCENT_CAPTION=this.getLabel("aggregations/percent/caption"),e.Labels.PERCENT_TOTAL_CAPTION=this.getLabel("aggregations/percent/totalCaption"),e.Labels.PERCENT_GRAND_TOTAL_CAPTION=this.getLabel("aggregations/percent/grandTotalCaption"),e.Labels.PERCENT_COLUMN_CAPTION=this.getLabel("aggregations/percentOfColumn/caption"),e.Labels.PERCENT_COLUMN_TOTAL_CAPTION=this.getLabel("aggregations/percentOfColumn/totalCaption"),e.Labels.PERCENT_COLUMN_GRAND_TOTAL_CAPTION=this.getLabel("aggregations/percentOfColumn/grandTotalCaption"),e.Labels.PERCENT_ROW_CAPTION=this.getLabel("aggregations/percentOfRow/caption"),e.Labels.PERCENT_ROW_TOTAL_CAPTION=this.getLabel("aggregations/percentOfRow/totalCaption"),e.Labels.PERCENT_ROW_GRAND_TOTAL_CAPTION=this.getLabel("aggregations/percentOfRow/grandTotalCaption"),e.Labels.INDEX_CAPTION=this.getLabel("aggregations/index/caption"),e.Labels.INDEX_TOTAL_CAPTION=this.getLabel("aggregations/index/totalCaption"),e.Labels.INDEX_GRAND_TOTAL_CAPTION=this.getLabel("aggregations/index/grandTotalCaption"),e.Labels.NONE_CAPTION=this.getLabel("aggregations/none/caption"),e.Labels.MEDIAN_CAPTION=this.getLabel("aggregations/median/caption"),e.Labels.MEDIAN_TOTAL_CAPTION=this.getLabel("aggregations/median/totalCaption"),e.Labels.MEDIAN_GRAND_TOTAL_CAPTION=this.getLabel("aggregations/median/grandTotalCaption"),e.Labels.STDEVP_CAPTION=this.getLabel("aggregations/stdevp/caption"),e.Labels.STDEVP_TOTAL_CAPTION=this.getLabel("aggregations/stdevp/totalCaption"),e.Labels.STDEVP_GRAND_TOTAL_CAPTION=this.getLabel("aggregations/stdevp/grandTotalCaption"),e.Labels.STDEVS_CAPTION=this.getLabel("aggregations/stdevs/caption"),e.Labels.STDEVS_TOTAL_CAPTION=this.getLabel("aggregations/stdevs/totalCaption"),e.Labels.STDEVS_GRAND_TOTAL_CAPTION=this.getLabel("aggregations/stdevs/grandTotalCaption"),e.Labels.RUNNING_TOTALS_CAPTION=this.getLabel("aggregations/runningTotals/caption"),e.Labels.RUNNING_TOTALS_TOTAL_CAPTION=this.getLabel("aggregations/runningTotals/totalCaption"),e.Labels.RUNNING_TOTALS_GRAND_TOTAL_CAPTION=this.getLabel("aggregations/runningTotals/grandTotalCaption"),e.Labels.ERROR=this.getLabel("messages/error"),e.Labels.WARNING=this.getLabel("messages/warning"),e.Labels.LIMITATION=this.getLabel("messages/limitation"),e.Labels.BROWSE=this.getLabel("messages/browse"),e.Labels.CONFIRMATION=this.getLabel("messages/confirmation"),e.Labels.REPORT_FILE_TYPE=this.getLabel("messages/reportFileType"),e.Labels.MESSAGE_LOADING=this.getLabel("messages/loading"),e.Labels.MESSAGE_LOADING_CONFIGURATION=this.getLabel("messages/loadingConfiguration"),e.Labels.MESSAGE_LOADING_DATA=this.getLabel("messages/loadingData"),e.Labels.MESSAGE_LOADING_WAITING=this.getLabel("messages/waiting"),e.Labels.MESSAGE_LOADING_PROGRESS=this.getLabel("messages/progress"),e.Labels.MESSAGE_LOADING_PROGRESS_UNKNOWN=this.getLabel("messages/progressUnknown"),e.Labels.MESSAGE_ANALYZING_DATA=this.getLabel("messages/analyzing"),e.Labels.MESSAGE_ANALYZING_PROGRESS=this.getLabel("messages/analyzingProgress"),e.Labels.MESSAGE_ANALYZING_RECORDS=this.getLabel("messages/analyzingRecords"),e.Labels.MESSAGE_SAVING=this.getLabel("messages/saving"),e.Labels.MESSAGE_LOADING_DIMENSIONS=this.getLabel("messages/loadingDimensions"),e.Labels.MESSAGE_LOADING_HIERARCHIES=this.getLabel("messages/loadingHierarchies"),e.Labels.MESSAGE_LOADING_MEASURES=this.getLabel("messages/loadingMeasures"),e.Labels.MESSAGE_LOADING_MEMBERS=this.getLabel("messages/loadingMembers"),e.Labels.MESSAGE_LOADING_LEVELS=this.getLabel("messages/loadingLevels"),e.Labels.MESSAGE_FULLSCREEN=this.getLabel("messages/fullscreen"),e.Labels.MESSAGE_EXPORT_COMPLETE=this.getLabel("messages/exportComplete"),e.Labels.MESSAGE_EXPORT_PROGRESS=this.getLabel("messages/exportProgress"),e.Labels.MESSAGE_EXPORT_ERROR=this.getLabel("messages/exportError"),e.Labels.MESSAGE_GENERATING_PDF=this.getLabel("messages/generatingPDF"),e.Labels.MESSAGE_PLEASE_WAIT=this.getLabel("messages/pleaseWait"),e.Labels.MESSAGE_PAGES_WERE_GENERATED=this.getLabel("messages/pagesWereGenerated"),e.Labels.MESSAGE_UPLOADING=this.getLabel("messages/uploading"),e.Labels.MESSAGE_CANT_SAVE_FILE=this.getLabel("messages/cantSaveFile"),e.Labels.MESSAGE_CANT_WRITE_TO_CLIPBOARD=this.getLabel("messages/cantSaveToClipboard"),e.Labels.MESSAGE_SAVE_REPORT_TO_FILE=this.getLabel("messages/saveReportToFile"),e.Labels.MESSAGE_LOAD_REPORT_FROM_FILE=this.getLabel("messages/loadReportFromFile"),e.Labels.MESSAGE_INPUT_NEW_NAME=this.getLabel("messages/inputNewName"),e.Labels.MESSAGE_INPUT_REPORT_NAME=this.getLabel("messages/inputReportName"),e.Labels.MESSAGE_INVALID_DATASOURCE=this.getLabel("messages/invalidDataSource"),e.Labels.MESSAGE_DATA_STREAM_ERROR=this.getLabel("messages/dataStreamError"),e.Labels.MESSAGE_UNABLE_TO_OPEN_FILE=this.getLabel("messages/unableToOpenFile"),e.Labels.MESSAGE_DOUBLE_FILE_BROWSING_SESSION=this.getLabel("messages/unableTwoFileBrowsingSessions"),e.Labels.MESSAGE_INAPPROPRIATE_FILE_FORMAT=this.getLabel("messages/inappropriateFileFormat"),e.Labels.MESSAGE_INVALID_JSON_DATA=this.getLabel("messages/invalidJSONdata"),e.Labels.MESSAGE_WRONG_FORMULA_FORMAT=this.getLabel("messages/wrongFormulaFormat"),e.Labels.MESSAGE_EXCEL_PDF_EXPORT_LIMITATION=this.getLabel("messages/excelPdfExportLimitation"),e.Labels.MESSAGE_EXPORT_LIMITATION=this.getLabel("messages/excelExportLimitation"),e.Labels.MESSAGE_NO_DATA_AVAILABLE=this.getLabel("messages/noDataAvailable"),e.Labels.MESSAGE_SAVE_DATA_TO_FILE=this.getLabel("messages/saveDataToFile"),e.Labels.MESSAGE_DATA_WAS_UPDATED=this.getLabel("messages/dataWasUpdated"),e.Labels.MESSAGE_OCSV_INCOMPATIBLE=this.getLabel("messages/ocsvIncompatible"),e.Labels.MESSAGE_UNKNOWN_ERROR=this.getLabel("messages/unknownError"),e.Labels.MESSAGE_INVALID_REPORT_FORMAT=this.getLabel("messages/invalidReportFormat"),e.Labels.MESSAGE_CSV_HEADER_PARSING_ERROR=this.getLabel("messages/csvHeaderParsingError"),e.Labels.MESSAGE_TOO_MANY_COLUMNS_IN_CLASSIC_MODE=this.getLabel("messages/tooManyColumnsInClassicMode"),e.Labels.MESSAGE_CANT_EXPAND=this.getLabel("messages/cantExpand"),e.Labels.MESSAGE_CANT_EXPAND_TITLE=this.getLabel("messages/cantExpandTitle"),e.Labels.MESSAGE_NO_GOOGLE_CLIENT_KEY=this.getLabel("messages/noGoogleClientKey"),e.Labels.BUTTON_OK=this.getLabel("buttons/ok"),e.Labels.BUTTON_APPLY=this.getLabel("buttons/apply"),e.Labels.BUTTON_CANCEL=this.getLabel("buttons/cancel"),e.Labels.BUTTON_SAVE=this.getLabel("buttons/save"),e.Labels.BUTTON_CLEAR=this.getLabel("buttons/clear"),e.Labels.BUTTON_SELECT=this.getLabel("buttons/select"),e.Labels.BUTTON_YES=this.getLabel("buttons/yes"),e.Labels.BUTTON_NO=this.getLabel("buttons/no"),e.Labels.CONTEXT_MENU_CLEAR_SORTING=this.getLabel("contextMenu/clearSorting"),e.Labels.CONTEXT_MENU_COLLAPSE=this.getLabel("contextMenu/collapse"),e.Labels.CONTEXT_MENU_DRILL_THROUGH=this.getLabel("contextMenu/drillThrough"),e.Labels.CONTEXT_MENU_EXPAND=this.getLabel("contextMenu/expand"),e.Labels.CONTEXT_MENU_OPEN_FILTER=this.getLabel("contextMenu/openFilter"),e.Labels.CONTEXT_MENU_SORT_COLUMN_ASC=this.getLabel("contextMenu/sortColumnAsc"),e.Labels.CONTEXT_MENU_SORT_COLUMN_DESC=this.getLabel("contextMenu/sortColumnDesc"),e.Labels.CONTEXT_MENU_SORT_ROW_ASC=this.getLabel("contextMenu/sortRowAsc"),e.Labels.CONTEXT_MENU_SORT_ROW_DESC=this.getLabel("contextMenu/sortRowDesc"),e.Labels.YEAR=this.getLabel("date/year"),e.Labels.QUARTER=this.getLabel("date/quarter"),e.Labels.MONTH=this.getLabel("date/month"),e.Labels.DAY=this.getLabel("date/day"),e.Labels.QUARTER_LABELS=[this.getLabel("quarters/q1"),this.getLabel("quarters/q2"),this.getLabel("quarters/q3"),this.getLabel("quarters/q4")],e.Labels.MONTHS_LABELS=[this.getLabel("months/january"),this.getLabel("months/february"),this.getLabel("months/march"),this.getLabel("months/april"),this.getLabel("months/may"),this.getLabel("months/june"),this.getLabel("months/july"),this.getLabel("months/august"),this.getLabel("months/september"),this.getLabel("months/october"),this.getLabel("months/november"),this.getLabel("months/december")],e.Labels.MONTHS_LABELS_SHORT=[this.getLabel("monthsShort/january"),this.getLabel("monthsShort/february"),this.getLabel("monthsShort/march"),this.getLabel("monthsShort/april"),this.getLabel("monthsShort/may"),this.getLabel("monthsShort/june"),this.getLabel("monthsShort/july"),this.getLabel("monthsShort/august"),this.getLabel("monthsShort/september"),this.getLabel("monthsShort/october"),this.getLabel("monthsShort/november"),this.getLabel("monthsShort/december")],e.Labels.WEEKDAYS_LABELS=[this.getLabel("weekdays/first"),this.getLabel("weekdays/second"),this.getLabel("weekdays/third"),this.getLabel("weekdays/fourth"),this.getLabel("weekdays/fifth"),this.getLabel("weekdays/sixth"),this.getLabel("weekdays/seventh")],e.Labels.WEEKDAYS_LABELS_SHORT=[this.getLabel("weekdaysShort/first"),this.getLabel("weekdaysShort/second"),this.getLabel("weekdaysShort/third"),this.getLabel("weekdaysShort/fourth"),this.getLabel("weekdaysShort/fifth"),this.getLabel("weekdaysShort/sixth"),this.getLabel("weekdaysShort/seventh")],s.DateFormat.setDayNames(e.Labels.WEEKDAYS_LABELS,e.Labels.WEEKDAYS_LABELS_SHORT),s.DateFormat.setMonthNames(e.Labels.MONTHS_LABELS,e.Labels.MONTHS_LABELS_SHORT)},t.prototype.getLabel=function(e){if(0==s.nullOrUndefined(this.reports)){var t=this.reports.getLabel(e);if(0==s.nullOrUndefined(t))return t}return 0==s.nullOrUndefined(this.globals)&&(t=this.globals.getLabel(e),0==s.nullOrUndefined(t))?t:this.defaults.getLabel(e)},t.prototype.reset=function(){this.reports=null,this.updateLabels()},t.prototype.load=function(t,i,r){var n=this;void 0===r&&(r=!1);try{"string"==typeof t&&0==s.nullOrEmpty(t)?(new e.LabelsLoader).load(s.URLUtils.getUrl(t,!0),(function(e){n.onLoadingComplete(e,r),null!=i&&i(!0)}),(function(){null!=i&&i(!1)})):(t instanceof Object?this.onLoadingComplete(e.LabelsValueObject.fromObject(t),r):this.reset(),null!=i&&i(!0))}catch(o){console.error(o),null!=i&&i(!1)}},t.prototype.onLoadingComplete=function(e,t){void 0===t&&(t=!1),t?this.globals=e:this.reports=e,this.updateLabels()},t.prototype.generateLocalization=function(){var t=new e.LabelsValueObject;return t.setDefaults(),t.merge(this.globals),t.toObject()},t.prototype.getCurrentLocalization=function(){var t=new e.LabelsValueObject;return t.setDefaults(),t.merge(this.globals),this.reports&&t.merge(this.reports),t},t}();e.LabelsManager=t}(e._labels||(e._labels={}))}(e.model||(e.model={}))}(n||(n={})),function(e){!function(e){!function(e){var t=function(){function e(){this.fieldsList={flatHierarchyBox:null,hierarchyBox:null,filterBox:null,rowBox:null,columnBox:null,measureBox:null,values:null,addCalculatedMeasure:null,expandAll:null,collapseAll:null,formulasGroupName:null,allFields:null,rows:null,columns:null,filters:null,dropField:null,title:null,subtitle:null},this.filter={all:null,multipleItems:null,selectAll:null,selectAllResults:null,top:null,bottom:null,ascSort:null,descSort:null,topX:null,clearTopX:null,measuresPrompt:null,search:null,amountSelected:null,amountFound:null,sort:null},this.drillThrough={title:null,row:null,column:null,value:null},this.calculatedView={title:null,measureBox:null,measureName:null,formula:null,formulaPrompt:null,calculateIndividualValues:null,removeValue:null,removeValueTitle:null,removeValueMessage:null,header:null,allValues:null},this.grid={total:null,totals:null,grandTotal:null,blankMember:null,dateInvalidCaption:null},this.tooltips={row:null,column:null,headerResize:null,headerFit:null,filterIcon:null,filtered:null,expandIcon:null,collapseIcon:null,drillDown:null,drillUp:null,sortIcon:null,sortedDescIcon:null,sortedAscIcon:null,close:null},this.aggregations={sum:{caption:null,totalCaption:null,grandTotalCaption:null},count:{caption:null,totalCaption:null,grandTotalCaption:null},distinctCount:{caption:null,totalCaption:null,grandTotalCaption:null},difference:{caption:null,totalCaption:null,grandTotalCaption:null},percentDifference:{caption:null,totalCaption:null,grandTotalCaption:null},average:{caption:null,totalCaption:null,grandTotalCaption:null},product:{caption:null,totalCaption:null,grandTotalCaption:null},min:{caption:null,totalCaption:null,grandTotalCaption:null},max:{caption:null,totalCaption:null,grandTotalCaption:null},percent:{caption:null,totalCaption:null,grandTotalCaption:null},percentOfColumn:{caption:null,totalCaption:null,grandTotalCaption:null},percentOfRow:{caption:null,totalCaption:null,grandTotalCaption:null},index:{caption:null,totalCaption:null,grandTotalCaption:null},none:{caption:null},median:{caption:null,totalCaption:null,grandTotalCaption:null},stdevp:{caption:null,totalCaption:null,grandTotalCaption:null},stdevs:{caption:null,totalCaption:null,grandTotalCaption:null},runningTotals:{caption:null,totalCaption:null,grandTotalCaption:null}},this.messages={error:null,warning:null,limitation:null,browse:null,confirmation:null,reportFileType:null,loading:null,loadingConfiguration:null,loadingData:null,waiting:null,progress:null,progressUnknown:null,analyzing:null,analyzingProgress:null,analyzingRecords:null,saving:null,loadingDimensions:null,loadingHierarchies:null,loadingMeasures:null,loadingMembers:null,loadingLevels:null,loadingProperties:null,fullscreen:null,exportComplete:null,exportProgress:null,exportError:null,generatingPDF:null,pleaseWait:null,pagesWereGenerated:null,uploading:null,cantSaveFile:null,cantSaveToClipboard:null,saveReportToFile:null,loadReportFromFile:null,inputNewName:null,inputReportName:null,invalidDataSource:null,dataStreamError:null,unableToOpenFile:null,unableTwoFileBrowsingSessions:null,noGoogleClientKey:null,inappropriateFileFormat:null,invalidJSONdata:null,wrongFormulaFormat:null,excelPdfExportLimitation:null,excelExportLimitation:null,noDataAvailable:null,saveDataToFile:null,dataWasUpdated:null,ocsvIncompatible:null,unknownError:null,invalidReportFormat:null,csvHeaderParsingError:null,tooManyColumnsInClassicMode:null,cantExpand:null,cantExpandTitle:null},this.buttons={ok:null,apply:null,cancel:null,save:null,clear:null,select:null,yes:null,no:null},this.contextMenu={clearSorting:null,collapse:null,drillThrough:null,expand:null,openFilter:null,sortColumnAsc:null,sortColumnDesc:null,sortRowAsc:null,sortRowDesc:null},this.date={year:null,quarter:null,month:null,day:null},this.quarters={q1:null,q2:null,q3:null,q4:null},this.months={january:null,february:null,march:null,april:null,may:null,june:null,july:null,august:null,september:null,october:null,november:null,december:null},this.monthsShort={january:null,february:null,march:null,april:null,may:null,june:null,july:null,august:null,september:null,october:null,november:null,december:null},this.weekdays={first:null,second:null,third:null,fourth:null,fifth:null,sixth:null,seventh:null},this.weekdaysShort={first:null,second:null,third:null,fourth:null,fifth:null,sixth:null,seventh:null},this.toolbar={connect:null,connect_local_csv:null,connect_local_json:null,connect_remote_csv:null,connect_remote_csv_mobile:null,connect_remote_json:null,connect_remote_json_mobile:null,connect_google_drive:null,open:null,local_report:null,remote_report:null,remote_report_mobile:null,save:null,save_json:null,load_json:null,grid:null,grid_flat:null,grid_classic:null,grid_compact:null,format:null,format_cells:null,format_cells_mobile:null,conditional_formatting:null,conditional_formatting_mobile:null,options:null,fullscreen:null,minimize:null,export:null,export_print:null,export_html:null,export_csv:null,export_excel:null,export_image:null,export_pdf:null,fields:null,ok:null,apply:null,done:null,cancel:null,value:null,delete:null,if:null,then:null,open_remote_csv:null,open_remote_json:null,csv:null,open_remote_report:null,choose_value:null,text_align:null,align_left:null,align_right:null,none:null,space:null,thousand_separator:null,decimal_separator:null,decimal_places:null,currency_symbol:null,currency_align:null,null_value:null,is_percent:null,true_value:null,false_value:null,conditional:null,add_condition:null,less_than:null,less_than_or_equal:null,greater_than:null,greater_than_or_equal:null,equal_to:null,not_equal_to:null,between:null,is_empty:null,all_values:null,and:null,and_symbole:null,cp_text:null,cp_highlight:null,layout_options:null,layout:null,compact_view:null,classic_view:null,flat_view:null,grand_totals:null,grand_totals_off:null,grand_totals_on:null,grand_totals_on_rows:null,grand_totals_on_columns:null,subtotals:null,subtotals_off:null,subtotals_on:null,subtotals_on_rows:null,subtotals_on_columns:null,choose_page_orientation:null,landscape:null,portrait:null,message_error:null,message_no_google_client_id:null}}return e.prototype.setDefaults=function(){this.fieldsList.flatHierarchyBox="Select and arrange columns",this.fieldsList.hierarchyBox="Drag Dimensions",this.fieldsList.filterBox="Drop & Arrange Report Filter",this.fieldsList.rowBox="Drop & Arrange Rows",this.fieldsList.columnBox="Drop & Arrange Columns",this.fieldsList.measureBox="Drop & Arrange Values",this.fieldsList.values="Values",this.fieldsList.allFields="All Fields",this.fieldsList.rows="Rows",this.fieldsList.columns="Columns",this.fieldsList.filters="Report Filters",this.fieldsList.dropField="Drop field here",this.fieldsList.addCalculatedMeasure="Add calculated value",this.fieldsList.expandAll="Expand All",this.fieldsList.collapseAll="Collapse All",this.fieldsList.formulasGroupName="Calculated Values",this.fieldsList.title="Fields",this.fieldsList.subtitle="Drag and drop fields to arrange",this.filter.ascSort="Az",this.filter.descSort="zA",this.filter.topX="Top 10",this.filter.clearTopX="Clear",this.filter.top="Top",this.filter.bottom="Bottom",this.filter.measuresPrompt="Choose value",this.filter.search="Search",this.filter.selectAll="Select All",this.filter.selectAllResults="Select All Results",this.filter.amountSelected="{0} of {1} selected",this.filter.amountFound="{0} of {1} found are selected",this.filter.multipleItems="Multiple Items",this.filter.all="All",this.filter.sort="Sort:",this.drillThrough.title="Details",this.drillThrough.row="Row: <b>{0}</b>",this.drillThrough.column="Column: <b>{0}</b>",this.drillThrough.value="{0}: <b>{1}</b>",this.calculatedView.title="Calculated Value",this.calculatedView.measureBox="Drag values to formula",this.calculatedView.measureName="Value name",this.calculatedView.formula="Formula",this.calculatedView.formulaPrompt="Drop values and edit formula here",this.calculatedView.calculateIndividualValues="Calculate individual values",this.calculatedView.removeValue="Remove",this.calculatedView.removeValueTitle="Remove {0}?",this.calculatedView.removeValueMessage="Are you sure you want to remove this calculated value?",this.calculatedView.header="Add calculated value",this.calculatedView.allValues="All values",this.grid.total="Total",this.grid.totals="Totals",this.grid.grandTotal="Grand Total",this.grid.blankMember="(blank)",this.grid.dateInvalidCaption="Invalid date",this.tooltips.row="Row:",this.tooltips.column="Column:",this.tooltips.headerResize="Drag to resize",this.tooltips.headerFit="Double click to fit",this.tooltips.filterIcon="Click to filter",this.tooltips.filtered="Filtered",this.tooltips.expandIcon="Click to expand",this.tooltips.collapseIcon="Click to collapse",this.tooltips.drillDown="Click to drill down",this.tooltips.drillUp="Click to drill up",this.tooltips.sortIcon="Click to sort Desc",this.tooltips.sortedDescIcon="Click to sort Asc",this.tooltips.sortedAscIcon="Click to sort Desc",this.tooltips.close="Click to close",this.aggregations.sum.caption="Sum",this.aggregations.sum.totalCaption="Sum of {0}",this.aggregations.sum.grandTotalCaption="Total Sum of {0}",this.aggregations.count.caption="Count",this.aggregations.count.totalCaption="Count of {0}",this.aggregations.count.grandTotalCaption="Total Count of {0}",this.aggregations.distinctCount.caption="Distinct Count",this.aggregations.distinctCount.totalCaption="Distinct Count of {0}",this.aggregations.distinctCount.grandTotalCaption="Total Distinct Count of {0}",this.aggregations.average.caption="Average",this.aggregations.average.totalCaption="Average of {0}",this.aggregations.average.grandTotalCaption="Total Average of {0}",this.aggregations.product.caption="Product",this.aggregations.product.totalCaption="Product of {0}",this.aggregations.product.grandTotalCaption="Total Product of {0}",this.aggregations.min.caption="Min",this.aggregations.min.totalCaption="Min of {0}",this.aggregations.min.grandTotalCaption="Total Min of {0}",this.aggregations.max.caption="Max",this.aggregations.max.totalCaption="Max of {0}",this.aggregations.max.grandTotalCaption="Total Max of {0}",this.aggregations.percent.caption="% of Grand Total",this.aggregations.percent.totalCaption="% of Grand Total of {0}",this.aggregations.percent.grandTotalCaption="Total % of Grand Total of {0}",this.aggregations.percentOfColumn.caption="% of Column",this.aggregations.percentOfColumn.totalCaption="% of Column of {0}",this.aggregations.percentOfColumn.grandTotalCaption="Total % of Column of {0}",this.aggregations.percentOfRow.caption="% of Row",this.aggregations.percentOfRow.totalCaption="% of Row of {0}",this.aggregations.percentOfRow.grandTotalCaption="Total % of Row of {0}",this.aggregations.index.caption="Index",this.aggregations.index.totalCaption="Index of {0}",this.aggregations.index.grandTotalCaption="Index of {0}",this.aggregations.difference.caption="Difference",this.aggregations.difference.totalCaption="Difference of {0}",this.aggregations.difference.grandTotalCaption="Difference of {0}",this.aggregations.percentDifference.caption="% Difference",this.aggregations.percentDifference.totalCaption="% Difference of {0}",this.aggregations.percentDifference.grandTotalCaption="% Difference of {0}",this.aggregations.none.caption="No Calculation",this.aggregations.median.caption="Median",this.aggregations.median.totalCaption="Median of {0}",this.aggregations.median.grandTotalCaption="Total Median of {0}",this.aggregations.stdevp.caption="Population StDev",this.aggregations.stdevp.totalCaption="Population StDev of {0}",this.aggregations.stdevp.grandTotalCaption="Total Population StDev of {0}",this.aggregations.stdevs.caption="Sample StDev",this.aggregations.stdevs.totalCaption="Sample StDev of {0}",this.aggregations.stdevs.grandTotalCaption="Total Sample StDev of {0}",this.aggregations.runningTotals.caption="Running Totals",this.aggregations.runningTotals.totalCaption="Running Totals of {0}",this.aggregations.runningTotals.grandTotalCaption="Running Totals of {0}",this.messages.error="Error!",this.messages.warning="Warning!",this.messages.limitation="Limitation!",this.messages.browse="Browse",this.messages.confirmation="Confirmation",this.messages.reportFileType="WebDataRocks report file",this.messages.loading="Loading...",this.messages.loadingConfiguration="",this.messages.loadingData="Loading data...",this.messages.uploading="Uploading...",this.messages.waiting="Waiting for the response {0} sec.",this.messages.progress="{0}K",this.messages.progressUnknown="loaded {0}K",this.messages.analyzing="Analyzing data...",this.messages.analyzingProgress="{0} records of {1} ({2}%)",this.messages.analyzingRecords="{0} records",this.messages.saving="Saving...",this.messages.loadingDimensions="Loading dimensions...",this.messages.loadingHierarchies="Loading hierarchies...",this.messages.loadingMeasures="Loading measures...",this.messages.loadingMembers="Loading members...",this.messages.loadingLevels="Loading levels...",this.messages.fullscreen="Open report in full screen?",this.messages.exportComplete='Export data is created, please click "Save" button to save the _data.',this.messages.generatingPDF="Generating PDF",this.messages.pleaseWait="Please wait.",this.messages.pagesWereGenerated="pages were generated.",this.messages.exportProgress="Export in progress...",this.messages.exportError="Failed to export. An unexpected error occurred.",this.messages.cantSaveFile="Cannot save file.",this.messages.cantSaveToClipboard="Error: Cannot write to the clipboard.",this.messages.saveReportToFile='Report is ready to be saved to file, please click "Save" button to save the report.',this.messages.saveDataToFile='Data is ready to be saved to file, please click "Save" button to save the file.',this.messages.loadReportFromFile="Select report file to be loaded.",this.messages.inputNewName="Input new name",this.messages.inputReportName="Please input report name",this.messages.dataStreamError="Stream error occurred while loading '{0}'",this.messages.unableToOpenFile="Unable to open file {0}.<br/><br/>It seems that this file doesn't exist or 'Access-Control-Allow-Origin' header is absent in the resource requested.",this.messages.unableTwoFileBrowsingSessions="Browse file dialog is already opened.",this.messages.noGoogleClientKey="Please enter Google Client Key in index.html file.",this.messages.wrongFormulaFormat="Wrong formula format. Please check.",this.messages.inappropriateFileFormat="The data file is of inappropriate format.",this.messages.invalidJSONdata="JSON data is invalid.",this.messages.excelPdfExportLimitation="Export to Microsoft Excel or PDF is not available in the current edition.",this.messages.excelExportLimitation="Export is not available in the current edition.",this.messages.noDataAvailable="Data source is empty. Please check the CSV file.",this.messages.csvHeaderParsingError="CSV header parsing error.",this.messages.dataWasUpdated="Data source has been updated on the server. Refresh the report?",this.messages.ocsvIncompatible="Unable to read data source. It seems that OCSV file was compressed with a newer version. Please update the component to version {0} or newer.",this.messages.unknownError="Unknown error occurred.",this.messages.invalidReportFormat="Invalid report format or access to file is denied.",this.messages.tooManyColumnsInClassicMode="Too many columns for classic form. Switched layout to compact form.",this.messages.cantExpand="Some fields cannot be expanded. Please narrow down the data set.",this.messages.cantExpandTitle="Data set is too large",this.buttons.ok="OK",this.buttons.apply="Apply",this.buttons.cancel="Cancel",this.buttons.save="Save",this.buttons.clear="Clear",this.buttons.select="Select",this.buttons.yes="Yes",this.buttons.no="No",this.contextMenu.drillThrough="Drill through",this.contextMenu.openFilter="Open filter",this.contextMenu.collapse="Collapse",this.contextMenu.expand="Expand",this.contextMenu.sortRowDesc="Sort row desc",this.contextMenu.sortRowAsc="Sort row asc",this.contextMenu.clearSorting="Clear sorting",this.contextMenu.sortColumnDesc="Sort column desc",this.contextMenu.sortColumnAsc="Sort column asc",this.date.year="Year",this.date.quarter="Quarter",this.date.month="Month",this.date.day="Day",this.quarters.q1="Quarter 1",this.quarters.q2="Quarter 2",this.quarters.q3="Quarter 3",this.quarters.q4="Quarter 4",this.months.january="January",this.months.february="February",this.months.march="March",this.months.april="April",this.months.may="May",this.months.june="June",this.months.july="July",this.months.august="August",this.months.september="September",this.months.october="October",this.months.november="November",this.months.december="December",this.monthsShort.january="Jan",this.monthsShort.february="Feb",this.monthsShort.march="Mar",this.monthsShort.april="Apr",this.monthsShort.may="May",this.monthsShort.june="Jun",this.monthsShort.july="Jul",this.monthsShort.august="Aug",this.monthsShort.september="Sep",this.monthsShort.october="Oct",this.monthsShort.november="Nov",this.monthsShort.december="Dec",this.weekdays.first="Sunday",this.weekdays.second="Monday",this.weekdays.third="Tuesday",this.weekdays.fourth="Wednesday",this.weekdays.fifth="Thursday",this.weekdays.sixth="Friday",this.weekdays.seventh="Saturday",this.weekdaysShort.first="Sun",this.weekdaysShort.second="Mon",this.weekdaysShort.third="Tue",this.weekdaysShort.fourth="Wed",this.weekdaysShort.fifth="Thu",this.weekdaysShort.sixth="Fri",this.weekdaysShort.seventh="Sat",this.toolbar.connect="Connect",this.toolbar.connect_local_csv="To local CSV",this.toolbar.connect_local_json="To local JSON",this.toolbar.connect_google_drive="To Google Drive",this.toolbar.connect_remote_csv="To remote CSV",this.toolbar.connect_remote_csv_mobile="CSV",this.toolbar.connect_remote_json="To remote JSON",this.toolbar.connect_remote_json_mobile="JSON",this.toolbar.open="Open",this.toolbar.local_report="Local report",this.toolbar.remote_report="Remote report",this.toolbar.remote_report_mobile="Report",this.toolbar.save="Save",this.toolbar.load_json="JSON report",this.toolbar.grid="Grid",this.toolbar.grid_flat="Flat",this.toolbar.grid_classic="Classic",this.toolbar.grid_compact="Compact",this.toolbar.format="Format",this.toolbar.format_cells="Format cells",this.toolbar.format_cells_mobile="Format",this.toolbar.conditional_formatting="Conditional formatting",this.toolbar.conditional_formatting_mobile="Conditional",this.toolbar.options="Options",this.toolbar.fullscreen="Fullscreen",this.toolbar.minimize="Minimize",this.toolbar.export="Export",this.toolbar.export_print="Print",this.toolbar.export_html="To HTML",this.toolbar.export_csv="To CSV",this.toolbar.export_excel="To Excel",this.toolbar.export_image="To Image",this.toolbar.export_pdf="To PDF",this.toolbar.fields="Fields",this.toolbar.ok="OK",this.toolbar.apply="Apply",this.toolbar.done="Done",this.toolbar.cancel="Cancel",this.toolbar.value="Value",this.toolbar.delete="Delete",this.toolbar.if="If",this.toolbar.then="Then",this.toolbar.open_remote_csv="Open remote CSV",this.toolbar.open_remote_json="Open remote JSON",this.toolbar.csv="CSV",this.toolbar.credentials="credentials",this.toolbar.username="Username",this.toolbar.password="Password",this.toolbar.open_remote_report="Open remote report",this.toolbar.choose_value="Choose value",this.toolbar.text_align="Text align",this.toolbar.align_left="left",this.toolbar.align_right="right",this.toolbar.none="None",this.toolbar.space="(Space)",this.toolbar.thousand_separator="Thousand separator",this.toolbar.decimal_separator="Decimal separator",this.toolbar.decimal_places="Decimal places",this.toolbar.currency_symbol="Currency symbol",this.toolbar.currency_align="Currency align",this.toolbar.null_value="Null value",this.toolbar.is_percent="Format as percent",this.toolbar.true_value="true",this.toolbar.false_value="false",this.toolbar.conditional="Conditional",this.toolbar.add_condition="Add condition",this.toolbar.less_than="Less than",this.toolbar.less_than_or_equal="Less than or equal to",this.toolbar.greater_than="Greater than",this.toolbar.greater_than_or_equal="Greater than or equal to",this.toolbar.equal_to="Equal to",this.toolbar.not_equal_to="Not equal to",this.toolbar.between="Between",this.toolbar.is_empty="Empty",this.toolbar.all_values="All values",this.toolbar.and="and",this.toolbar.and_symbole="&",this.toolbar.cp_text="Text",this.toolbar.cp_highlight="Highlight",this.toolbar.layout_options="Layout options",this.toolbar.layout="Layout",this.toolbar.compact_view="Compact form",this.toolbar.classic_view="Classic form",this.toolbar.flat_view="Flat form",this.toolbar.grand_totals="Grand totals",this.toolbar.grand_totals_off="Do not show grand totals",this.toolbar.grand_totals_on="Show grand totals",this.toolbar.grand_totals_on_rows="Show for rows only",this.toolbar.grand_totals_on_columns="Show for columns only",this.toolbar.subtotals="Subtotals",this.toolbar.subtotals_off="Do not show subtotals",this.toolbar.subtotals_on="Show subtotals",this.toolbar.subtotals_on_rows="Show subtotal rows only",this.toolbar.subtotals_on_columns="Show subtotal columns only",this.toolbar.choose_page_orientation="Choose page orientation",this.toolbar.landscape="Landscape",this.toolbar.portrait="Portrait",this.toolbar.message_error=this.messages.error,this.toolbar.message_no_google_client_id=this.messages.noGoogleClientKey},e.prototype.getLabel=function(e){return 1==(e=e.split("/")).length?this[e[0]]:2!=e.length||s.nullOrUndefined(this[e[0]])||s.nullOrUndefined(this[e[0]][e[1]])?3!=e.length||s.nullOrUndefined(this[e[0]])||s.nullOrUndefined(this[e[0]][e[1]])||s.nullOrUndefined(this[e[0]][e[1]][e[2]])?null:this[e[0]][e[1]][e[2]]:this[e[0]][e[1]]},e.prototype.merge=function(t){e.nodeFromObject(t,this)},e.prototype.toObject=function(){var e,t={};for(e in this)this[e]instanceof Function||s.nullOrUndefined(this[e])||(t[e]=this[e]);return JSON.stringify(t,null,2)},e.fromObject=function(t){var i=new e;return e.nodeFromObject(t,i),i},e.nodeFromObject=function(t,i){if(!s.nullOrUndefined(t)&&!s.nullOrUndefined(i)&&t instanceof Object)for(var r in t){var n=t[r];s.nullOrUndefined(n)||("string"==typeof n?i[r]=n:n instanceof Object&&e.nodeFromObject(n,i[r]))}},e}();e.LabelsValueObject=t}(e._labels||(e._labels={}))}(e.model||(e.model={}))}(n||(n={})),function(e){!function(e){!function(e){var i=function(){function e(){}return e.REPORT_FILE_LOADED="load",e.REPORT_FILE_FAILED="fail",e.REPORT_FILE_CANCELLED="cancel",e}();e.ReportEvent=i;var r=function(e){function t(t){var r=e.call(this,i.REPORT_FILE_LOADED)||this;return r.report=t,r}return a(t,e),t}(t._Event);e.ReportFileLoadedEvent=r,r=function(e){function t(t){var r=e.call(this,i.REPORT_FILE_FAILED)||this;return r.message=t,r}return a(t,e),t}(t._Event),e.ReportFileFailedEvent=r}(e.report||(e.report={}))}(e.model||(e.model={}))}(n||(n={})),function(e){var i,r,n;i=e.model||(e.model={}),r=i.report||(i.report={}),n=function(l){function c(){var e=l.call(this)||this;return e.defaultFilename="report.json",e}return a(c,l),c.prototype.open=function(){var e=this;this.localReportLoader=new r.LocalReportLoader,this.localReportLoader.addEventListener(r.ReportEvent.REPORT_FILE_LOADED,(function(t){return e.onReportFileLoaded(t)})),this.localReportLoader.addEventListener(r.ReportEvent.REPORT_FILE_FAILED,(function(t){return e.onReportFileFailed(t)})),this.localReportLoader.addEventListener(r.ReportEvent.REPORT_FILE_CANCELLED,(function(){return e.onReportFileCancelled()})),this.localReportLoader.load()},c.prototype.load=function(t){var n=this;e.preloader(!0,i._labels.Labels.MESSAGE_LOADING),this.urlReportLoader=new r.UrlReportLoader,this.urlReportLoader.addEventListener(r.ReportEvent.REPORT_FILE_LOADED,(function(e){return n.onReportFileLoaded(e)})),this.urlReportLoader.addEventListener(r.ReportEvent.REPORT_FILE_FAILED,(function(e){return n.onReportFileFailed(e)})),this.urlReportLoader.load(s.URLUtils.addTimestamp(t))},c.prototype.cancel=function(){this.localReportLoader&&(this.localReportLoader.removeAllEventListeners(r.ReportEvent.REPORT_FILE_LOADED),this.localReportLoader.removeAllEventListeners(r.ReportEvent.REPORT_FILE_FAILED),this.localReportLoader=null),this.urlReportLoader&&(this.urlReportLoader.removeAllEventListeners(r.ReportEvent.REPORT_FILE_LOADED),this.urlReportLoader.removeAllEventListeners(r.ReportEvent.REPORT_FILE_FAILED),this.urlReportLoader=null),this.removeAllEventListeners(r.ReportEvent.REPORT_FILE_LOADED),this.removeAllEventListeners(r.ReportEvent.REPORT_FILE_FAILED)},c.prototype.onReportFileLoaded=function(e){this.dispatch(new r.ReportFileLoadedEvent(e.report))},c.prototype.onReportFileFailed=function(t){e.uialert(t.message,i._labels.Labels.ERROR,e.AlertType.ERROR),this.dispatchWith(r.ReportEvent.REPORT_FILE_FAILED)},c.prototype.onReportFileCancelled=function(){this.dispatchWith(r.ReportEvent.REPORT_FILE_CANCELLED)},c.prototype.save=function(t,i,n,o,s,a){var l=this;void 0===i&&(i=null),void 0===s&&(s=!1),this.saveCallbackHandler=n,n=!1;var c="string"==typeof t?t:null,u=o;switch(o=s,t instanceof Object&&(t.hasOwnProperty("filename")&&(c=t.filename),t.hasOwnProperty("destination")&&(i=t.destination),t.hasOwnProperty("url")&&(u=t.url),t.hasOwnProperty("embedData")&&(o=t.embedData)),null!=c&&""!=c||(c=this.defaultFilename),a.connectionInfo.dataSourceType==e.data_.consts.DataSourceType.CSV&&a.options.gridType!=e._view.grid.GridType.FLAT&&(a.connectionInfo instanceof e.data_.vo.FileConnectionInfo&&a.connectionInfo.browseForFile||a.connectionInfo.embedded||o)&&((t=new e.data_.vo.CSVConnectionInfo).embedded=!0,a.connectionInfo=t,n=!0),i=null==i?r.DestinationType.FILE:i.toLowerCase()){case r.DestinationType.SERVER:n?(new e.data_.csv.CSVSaver).getData((function(e){return l.saveToServer(u,c,a,e)})):this.saveToServer(u,c,a);break;case r.DestinationType.FILE:n?(new e.data_.csv.CSVSaver).getData((function(e){return l.saveToFile(c,a,e)})):this.saveToFile(c,a);break;default:n?(new e.data_.csv.CSVSaver).getData((function(e){return l.saveToFile(c,a,e)})):this.saveToFile(c,a)}return null},c.prototype.dispatchReportSaved=function(e){if(null!=this.saveCallbackHandler)try{this.saveCallbackHandler(e)}catch(c){this.saveCallbackHandler("Error! "+c)}},c.prototype.defineReportType=function(e){return JSON.stringify(e.toObject(),null,4)},c.prototype.saveToFile=function(t,r,o){void 0===o&&(o=null);var s=[this.defineReportType(r)];null!=o&&(s.push("\n"),s.push(o));try{var a=this;e.uialert(i._labels.Labels.MESSAGE_SAVE_REPORT_TO_FILE,i._labels.Labels.CONFIRMATION,e.AlertType.CONFIRMATION,[i._labels.Labels.BUTTON_SAVE,i._labels.Labels.BUTTON_CANCEL],[function(){var e=new Blob(s,{type:"text/js;charset=utf-8"});savingAs(e,t),a.dispatchReportSaved(!0)},function(){a.dispatchReportSaved(!1)}])}catch(n){e.uialert(i._labels.Labels.MESSAGE_CANT_SAVE_FILE,i._labels.Labels.ERROR,e.AlertType.ERROR),this.dispatchReportSaved(!1)}},c.prototype.saveToServer=function(r,n,a,l){var c=this;void 0===l&&(l=null),s.nullOrEmpty(r)&&e.uialert("Report cannot be saved. Save report url is empty.",i._labels.Labels.WARNING,e.AlertType.ERROR);var u=new o.URLVariables;u.data.name=n,u.data.report=null==l?this.defineReportType(a):this.defineReportType(a)+"\n"+l,u.data.type="json";var h=new o.URLStream;return h.data=u.toString(),h.contentType=o.ContentType.APPLICATION_URLENCODED,h.requestMethod=o.URLRequestMethod.POST,h.addEventListener(t._Event.COMPLETE,(function(){return c.onSaveComplete(h)})),h.addEventListener(t._Event.ERROR,(function(){return c.onError(h)})),h.load(r),e.preloader(!0,i._labels.Labels.MESSAGE_UPLOADING),null},c.prototype.onSaveComplete=function(t){e.preloader(!1),this.dispatchReportSaved(t.response)},c.prototype.onError=function(t){e.preloader(!1),this.dispatchReportSaved(!1),t=i.XSSCheck.valid(t.url)?t.url:i.XSSCheck.validate(t.url),e.uialert(i._labels.Labels.MESSAGE_CANT_SAVE_FILE+s.StringUtils.bind(' (<a href="{0}">{0}</a>)',t),i._labels.Labels.ERROR,e.AlertType.ERROR)},c}(t.EventDispatcher),r.ReportManager=n}(n||(n={})),function(e){var t,i,r;t=e.model||(e.model={}),i=t.report||(t.report={}),r=function(){function r(){this.withDefaults=!1,this.connectionInfo=new e.data_.vo.ConnectionInfo,this.slice=new i.SliceValueObject,this.options=new t._options.vo.OptionsValueObject,this.formats=[],this.conditions=[],this.columnSizes={},this.rowSizes={},this.columnHeaderSizes=[],this.rowHeaderSizes=[],this.rowFilterSizes=[],this.columnSizesByIdx={},this.rowSizesByIdx={},this.customFields=[],this.labels={},this.localization=null}return r.fromObject=function(n){if(null==n)return null;n instanceof r||(n=r.toPlainObject(n));var o=new r;return o.connectionInfo=e.data_.vo.ConnectionInfo.fromObject(null!=n.connectionInfo?n.connectionInfo:n),o.options=t._options.vo.OptionsValueObject.fromObject(null!=n.options?n.options:n),o.slice=i.SliceValueObject.fromObject(null!=n.slice?n.slice:n,o.connectionInfo,o.options.gridType==e._view.grid.GridType.FLAT),null!=n.formats&&n.formats.length&&(o.formats=n.formats),null!=n.conditions&&n.conditions.length&&(o.conditions=n.conditions),null!=n.columnSizes&&"string"!=typeof n.columnSizes&&(o.columnSizes=n.columnSizes),null!=n.rowSizes&&"string"!=typeof n.rowSizes&&(o.rowSizes=n.rowSizes),null!=n.columnHeaderSizes&&"string"!=typeof n.columnHeaderSizes&&(o.columnHeaderSizes=n.columnHeaderSizes),null!=n.rowHeaderSizes&&"string"!=typeof n.rowHeaderSizes&&(o.rowHeaderSizes=n.rowHeaderSizes),null!=n.rowFilterSizes&&"string"!=typeof n.rowFilterSizes&&(o.rowFilterSizes=n.rowFilterSizes),null!=n.columnSizesByIdx&&(o.columnSizesByIdx=n.columnSizesByIdx),null!=n.rowSizesByIdx&&(o.rowSizesByIdx=n.rowSizesByIdx),null!=n.customFields&&(o.customFields=n.customFields),null!=n.localization&&(o.localization=n.localization),o},r.prototype.toObject=function(){var e={},t=this.connectionInfo.toObject(this.withDefaults);if(s.ObjectUtils.isEmptyObject(t)||(e.dataSource=t),t=this.slice.toObject(this.withDefaults),s.ObjectUtils.isEmptyObject(t)||(e.slice=t),t=this.options.toObject(),s.ObjectUtils.isEmptyObject(t)||(e.options=t),0<(t=this.composeConditionsObject()).length&&(e.conditions=t),null!=this.formats&&0!=this.formats.length){t=[];for(var i=!this.options.saveAllFormats&&5<this.formats.length,r=0;r<this.formats.length;r++){var n=this.formats[r];""!=n.name&&(null==this.slice.formatsInUse[n.name]||i&&!this.slice.formatsInUse[n.name])||t.push(n)}e.formats=t}return t=this.composeTableSizesObject(),s.ObjectUtils.isEmptyObject(t)||(e.tableSizes=t),null!=this.customFields&&0!=this.customFields.length&&(e.customFields=this.customFields),null!=this.localization&&""!=this.localization&&(e.localization=this.localization),e},r.prototype.composeConditionsObject=function(){for(var e=[],t=0;t<this.conditions.length;t++){var i=this.conditions[t],r={};r.formula=i.formula,-1<i.row&&(r.row=i.row),-1<i.column&&(r.column=i.column),-1<i.isTotal&&(r.isTotal=1==i.isTotal),i.measure&&0<i.measure.length&&(r.measure=i.measure),i.hierarchy&&0<i.hierarchy.length&&(r.hierarchy=i.hierarchy),i.member&&0<i.member.length&&(r.member=i.member),i.format&&!s.ObjectUtils.isEmptyObject(i.format)&&(r.format=i.format),e.push(r)}return e},r.prototype.composeTableSizesObject=function(){var e,t,r,n,o={};if(null!=this.columnHeaderSizes&&!s.ObjectUtils.isEmptyObject(this.columnHeaderSizes)||null!=this.columnSizes&&!s.ObjectUtils.isEmptyObject(this.columnSizes)){if(o.columns=[],null!=this.columnHeaderSizes&&!s.ObjectUtils.isEmptyObject(this.columnHeaderSizes))for(t=0;t<this.columnHeaderSizes.length;t++)null!=this.columnHeaderSizes[t]&&o.columns.push({idx:t,width:this.columnHeaderSizes[t]});if(t=i.SliceValueObject.findMeasure(this.slice.columns),null!=this.columnSizes&&!s.ObjectUtils.isEmptyObject(this.columnSizes))for(e in this.columnSizes)r=e.split(","),0<=t?(n=r.pop(),o.columns.push({tuple:r,measure:n,width:this.columnSizes[e]})):o.columns.push({tuple:r,width:this.columnSizes[e]})}if(null!=this.rowFilterSizes&&!s.ObjectUtils.isEmptyObject(this.rowFilterSizes)||null!=this.rowHeaderSizes&&!s.ObjectUtils.isEmptyObject(this.rowHeaderSizes)||null!=this.rowSizes&&!s.ObjectUtils.isEmptyObject(this.rowSizes)){if(o.rows=[],null!=this.rowFilterSizes&&!s.ObjectUtils.isEmptyObject(this.rowFilterSizes))for(t=0;t<this.rowFilterSizes.length;t++)null!=this.rowFilterSizes[t]&&o.rows.push({idx:t,height:this.rowFilterSizes[t]});if(null!=this.rowHeaderSizes&&!s.ObjectUtils.isEmptyObject(this.rowHeaderSizes))for(t=0;t<this.rowHeaderSizes.length;t++)null!=this.rowHeaderSizes[t]&&o.rows.push({idx:t,height:this.rowHeaderSizes[t]});if(t=i.SliceValueObject.findMeasure(this.slice.rows),null!=this.rowSizes&&!s.ObjectUtils.isEmptyObject(this.rowSizes))for(e in this.rowSizes)r=e.split(","),0<=t?(n=r.pop(),o.rows.push({tuple:r,measure:n,height:this.rowSizes[e]})):o.rows.push({tuple:r,height:this.rowSizes[e]})}return o},r.toPlainObject=function(r){var n={};if(null==r)return n;if(null!=r.columnSizes&&(n.columnSizes=r.columnSizes),null!=r.rowSizes&&(n.rowSizes=r.rowSizes),null!=r.columnHeaderSizes&&(n.columnHeaderSizes=r.columnHeaderSizes),null!=r.rowHeaderSizes&&(n.rowHeaderSizes=r.rowHeaderSizes),null!=r.rowFilterSizes&&(n.rowFilterSizes=r.rowFilterSizes),null!=r.rowSizesByIdx&&(n.rowSizesByIdx=r.rowSizesByIdx),null!=r.columnSizesByIdx&&(n.columnSizesByIdx=r.columnSizesByIdx),null!=r.customFields&&(n.customFields=r.customFields),null!=r.labels&&(n.labels=r.labels),n.connectionInfo=e.data_.vo.ConnectionInfo.toPlainObject(null!=r.connectionInfo?r.connectionInfo:r),n.slice=i.SliceValueObject.toPlainObject(null!=r.slice?r.slice:r),n.options=t._options.vo.OptionsValueObject.toPlainObject(null!=r.options?r.options:r),null!=r.formats&&0<r.formats.length&&(n.formats=r.formats),null!=r.conditions&&0<r.conditions.length&&(n.conditions=r.conditions),null!=r.tableSizes){var o,s;if(null!=r.tableSizes.columns){var a=r.tableSizes.columns;for(o=0;o<a.length;o++)null!=a[o].idx&&(null==n.columnSizesByIdx&&(n.columnSizesByIdx={}),n.columnSizesByIdx[parseInt(a[o].idx)]=parseInt(a[o].width)),(null!=a[o].tuple||null!=a[o].measure)&&(null==n.columnSizes&&(n.columnSizes={}),s=null==a[o].tuple?[]:a[o].tuple.slice(),null!=a[o].measure&&s.push(a[o].measure),n.columnSizes[s.join(",")]=parseInt(a[o].width))}if(null!=r.tableSizes.rows)for(a=r.tableSizes.rows,o=0;o<a.length;o++)null!=a[o].idx&&(null==n.rowSizesByIdx&&(n.rowSizesByIdx={}),n.rowSizesByIdx[parseInt(a[o].idx)]=parseInt(a[o].height)),(null!=a[o].tuple||null!=a[o].measure)&&(null==n.rowSizes&&(n.rowSizes={}),s=null==a[o].tuple?[]:a[o].tuple.slice(),null!=a[o].measure&&s.push(a[o].measure),n.rowSizes[s.join(",")]=parseInt(a[o].height))}return null!=r.localization&&(n.localization=r.localization),n},r.prototype.merge=function(i){if(s.nullOrUndefined(i))return this;i=r.toPlainObject(i);var n,o=r.toPlainObject(this);for(n in i)i.hasOwnProperty(n)&&("connectionInfo"==n?e.data_.vo.ConnectionInfo.fromObject(i.connectionInfo).isEmpty||(o[n]=i[n]):"options"==n?(this.options.mergeWith(i[n]),o[n]=t._options.vo.OptionsValueObject.toPlainObject(this.options)):o[n]=i[n]);return r.fromObject(o)},r}(),i.ReportValueObject=r}(n||(n={})),function(e){var i,r,n;i=e.model||(e.model={}),r=i.report||(i.report={}),n=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return a(n,t),n.prototype.dispatchReportLoaded=function(e){this.dispatch(e?new r.ReportFileLoadedEvent(e):new r.ReportFileFailedEvent(i._labels.Labels.MESSAGE_INVALID_REPORT_FORMAT))},n.prototype.parseReport=function(e){try{var i=e.indexOf("/**----**");return JSON.parse(-1<i?e.substring(0,i):e)}catch(t){return console.error(t),null}},n.prototype.getStringByteLength=function(t){var i=new e.DataStream(new ArrayBuffer(0),0,e.DataStream.BIG_ENDIAN);return i.writeString(t),i.byteLength},n}(t.EventDispatcher),r.ReportLoader=n}(n||(n={})),function(e){var i,r,n;i=e.model||(e.model={}),n=function(n){function l(){var e=n.call(this)||this;return e.counter=0,e.embeddedStartDataSign="\x3c!--",e.embeddedDataJSONStartSign="/**----**",e}return a(l,n),l.prototype.load=function(e){var i=this;this.url=e,this.bytesLoaded=0,this.loader=new o.URLStream,this.loader.dataType=o.DataType.TEXT,this.loader.addEventListener(t._Event.PROGRESS,(function(e){return i.onProgress(e)})),this.loader.addEventListener(t._Event.COMPLETE,(function(){return i.onLoaded()})),this.loader.addEventListener(t._Event.ERROR,(function(){return i.onError()})),this.loader.load(e)},l.prototype.onProgress=function(e){e=0,null!=this.loader&&-1<(e=this.loader.response.indexOf("</config>"))&&e+this.embeddedDataJSONStartSign.length+1<this.loader.response.length&&this.onLoaded()},l.prototype.onLoaded=function(){if(null!=this.loader){this.loader.removeAllEventListeners(t._Event.COMPLETE);var i=this.parseReport(this.loader.response);if(i instanceof r.ReportValueObject){if(i.connectionInfo instanceof e.data_.vo.CSVConnectionInfo&&1==i.connectionInfo.embedded){var n=i.connectionInfo;n.filename=this.loader.url,n.embeddedDataOffset=this.getStringByteLength(this.loader.response.substring(0,this.loader.response.indexOf("</config>")+9)+"\n"),this.loader.response.indexOf(this.embeddedStartDataSign),i.connectionInfo=n}}else s.nullOrUndefined(i)||s.nullOrUndefined(i.dataSource)||1!=i.dataSource.embedded||(i.dataSource.filename=this.loader.url,i.dataSource.embeddedDataOffset=this.getStringByteLength(this.loader.response.substring(0,this.loader.response.indexOf(this.embeddedDataJSONStartSign))));this.dispatchReportLoaded(i),this.dispose()}},l.prototype.onError=function(){this.loader.removeAllEventListeners(t._Event.PROGRESS),this.loader.removeAllEventListeners(t._Event.COMPLETE),this.loader.removeAllEventListeners(t._Event.ERROR);var e=i.XSSCheck.valid(this.url)?this.url:i.XSSCheck.validate(this.url);e=s.StringUtils.bind(i._labels.Labels.MESSAGE_UNABLE_TO_OPEN_FILE,e),this.dispatch(new r.ReportFileFailedEvent(e)),this.dispose()},l.prototype.dispose=function(){null!=this.loader&&(this.loader.removeAllEventListeners(),this.loader.dispose(),this.loader=null)},l}((r=i.report||(i.report={})).ReportLoader),r.UrlReportLoader=n}(n||(n={})),function(e){var i,r,n;i=e.model||(e.model={}),n=function(n){function l(){return n.call(this)||this}return a(l,n),l.prototype.load=function(){var e=this;this.file=new o.FileReference,this.file.addEventListener(t._Event.SELECT,(function(){return e.onSelected()})),this.file.addEventListener(t._Event.COMPLETE,(function(){return e.onLoaded()})),this.file.addEventListener(t._Event.CANCEL,(function(){return e.onCancel()})),this.file.addEventListener(t._Event.ERROR,(function(){return e.onError()})),this.file.browse([".json",".js"])},l.prototype.onSelected=function(){null!=this.file&&this.file.load(o.ReadMethod.ARRAY_BUFFER)},l.prototype.onLoaded=function(){try{var t=new e.DataStream(this.file.response,0,e.DataStream.BIG_ENDIAN),n=t.readString(t.byteLength),o=this.parseReport(n);if(o instanceof r.ReportValueObject){if(o.connectionInfo instanceof e.data_.vo.CSVConnectionInfo&&1==o.connectionInfo.embedded){var a=o.connectionInfo;a.embeddedDataToLoad=this.file.response,a.embeddedDataOffset=this.getStringByteLength(n.substring(0,n.indexOf("</config>")+9)+"\n"),o.connectionInfo=a}}else s.nullOrUndefined(o)||s.nullOrUndefined(o.dataSource)||1!=o.dataSource.embedded||(o.dataSource.embeddedDataToLoad=this.file.response,o.dataSource.embeddedDataOffset=this.getStringByteLength(n.substring(0,n.indexOf("/**----**"))));this.dispatchReportLoaded(o),this.dispose()}catch(i){console.error(i),this.onError()}},l.prototype.onError=function(){var e=s.StringUtils.bind(i._labels.Labels.MESSAGE_UNABLE_TO_OPEN_FILE,"");this.dispatch(new r.ReportFileFailedEvent(e)),this.dispose()},l.prototype.onCancel=function(){this.dispatchWith(r.ReportEvent.REPORT_FILE_CANCELLED),this.dispose()},l.prototype.dispose=function(){null!=this.file&&(this.file.removeAllEventListeners(),this.file.dispose(),this.file=null)},l}((r=i.report||(i.report={})).ReportLoader),r.LocalReportLoader=n}(n||(n={})),function(e){!function(e){!function(e){var t=function(){function e(){}return e.validType=function(t){return t==e.FILE||t==e.SERVER||t==e.BINARY||t==e.PLAIN},e.FILE="file",e.SERVER="server",e.BINARY="binary",e.PLAIN="plain",e}();e.DestinationType=t}(e.report||(e.report={}))}(e.model||(e.model={}))}(n||(n={})),function(e){!function(e){!function(e){var t=function(){function e(){}return e.customFields=[],e}();e.CustomFieldsManager=t}(e.report||(e.report={}))}(e.model||(e.model={}))}(n||(n={})),function(e){var t,i,r;i=(t=e.model||(e.model={})).report||(t.report={}),r=function(){function i(){this.rows=[],this.columns=[],this.pages=[],this.measures=[],this.rowSorting={},this.columnSorting={},this.expandedRows=[],this.expandedColumns=[],this.drilledRows=[],this.drilledColumns=[],this.drillAll=this.expandAll=!1,this.flatOrder=[],this.formatsInUse={}}return i.prototype.normalizeSlice=function(e){if(0<=i.findMeasure(e.rows)){var t=i.findMeasure(e.columns);0<=t&&(e.columns[t]=e.columns[0],e.columns.shift())}},i.findMeasure=function(t){for(var i=e.data_.Cube.MEASURES_NAME,r=0;r<t.length;r++)if(t[r].uniqueName==i)return r;return-1},i.readExpandedFromObject=function(e){for(var t,i=[],r=0;r<e.length;r++){if((t=[]).push(null!=e[r].measure?e[r].measure:""),null!=e[r].tuple)for(var n=0;n<e[r].tuple.length;n++)t.push(e[r].tuple[n]);i.push(t)}return i},i.readDrilledFromObject=function(e){for(var t,i=[],r=0;r<e.length;r++){if((t=[]).push(null!=e[r].level?e[r].level:""),t.push(null!=e[r].measure?e[r].measure:-1),null!=e[r].tuple){t.push(e[r].tuple[e[r].tuple.length-1]);for(var n=0;n<e[r].tuple.length;n++)t.push(e[r].tuple[n])}i.push(t)}return i},i.fromObject=function(e,r,n){if(void 0===r&&(r=null),void 0===n&&(n=!1),null==e)return null;e instanceof i||(e=i.toPlainObject(e));var o=new i;return null!=e.measures&&e.measures.length&&(o.measures=e.measures),null==r&&t.PivotModel.getInstance(),null!=e.pages&&e.pages.length&&(o.pages=i.hierarchiesFromObject(e.pages)),null!=e.columns&&e.columns.length&&(o.columns=i.hierarchiesFromObject(e.columns,n)),null!=e.rows&&e.rows.length&&(o.rows=i.hierarchiesFromObject(e.rows,n)),null!=e.flatOrder&&e.flatOrder.length&&(o.flatOrder=e.flatOrder),o.normalizeSlice(o),null!=e.rowSorting&&(o.rowSorting=e.rowSorting),null!=e.columnSorting&&(o.columnSorting=e.columnSorting),null!=e.expandAll&&(o.expandAll=e.expandAll),null!=e.expandedRows&&e.expandedRows.length&&(o.expandedRows=e.expandedRows),null!=e.expandedColumns&&e.expandedColumns.length&&(o.expandedColumns=e.expandedColumns),null!=e.drillAll&&(o.drillAll=e.drillAll),null!=e.drilledRows&&e.drilledRows.length&&(o.drilledRows=e.drilledRows),null!=e.drilledColumns&&e.drilledColumns.length&&(o.drilledColumns=e.drilledColumns),o},i.hierarchiesFromObject=function(t,i){void 0===i&&(i=!1);for(var r=[],n=0;n<t.length;n++)for(var o in r[n]={},i&&!t[n].sort&&(t[n].sort=e.data_.consts.SortType.UNSORTED),t[n])"sort"==o?r[n].sortName=t[n].sort:r[n][o]=t[n][o];return r},i.prototype.toObject=function(t){void 0===t&&(t=!1);var i,r={},n=[];for(i=0;i<this.pages.length;i++)n.push(this.hierarchyToJSON(this.pages[i],t));for(0<n.length&&(r.reportFilters=n),n=[],i=0;i<this.rows.length;i++)n.push(this.hierarchyToJSON(this.rows[i],t));for(0<n.length&&(r.rows=n),n=[],i=0;i<this.columns.length;i++)n.push(this.hierarchyToJSON(this.columns[i],t));for(0<n.length&&(r.columns=n),n=[],i=0;i<this.measures.length;i++)n.push(this.measureToJSON(this.measures[i],t));return 0<n.length&&(r.measures=n),(null!=this.rowSorting&&null!=this.rowSorting.type&&this.rowSorting.type!=e.data_.consts.SortType.UNSORTED||null!=this.columnSorting&&this.columnSorting.type&&this.columnSorting.type!=e.data_.consts.SortType.UNSORTED)&&(r.sorting={},null!=this.rowSorting&&null!=this.rowSorting.type&&this.rowSorting.type!=e.data_.consts.SortType.UNSORTED&&(r.sorting.row=this.rowSorting),null!=this.columnSorting&&this.columnSorting.type&&this.columnSorting.type!=e.data_.consts.SortType.UNSORTED&&(r.sorting.column=this.columnSorting)),i={},(t||this.expandAll)&&(i.expandAll=this.expandAll),0<this.expandedRows.length&&(i.rows=this.expandedElementsToJSON(this.expandedRows)),0<this.expandedColumns.length&&(i.columns=this.expandedElementsToJSON(this.expandedColumns)),s.ObjectUtils.isEmptyObject(i)||(r.expands=i),i={},(t||this.drillAll)&&(i.drillAll=this.drillAll),0<this.drilledRows.length&&(i.rows=this.drilledElementsToJSON(this.drilledRows)),0<this.drilledColumns.length&&(i.columns=this.drilledElementsToJSON(this.drilledColumns)),s.ObjectUtils.isEmptyObject(i)||(r.drills=i),0<this.flatOrder.length&&(r.flatOrder=this.flatOrder),r},i.prototype.expandedElementsToJSON=function(e){for(var t,i,r,n=[],o=0;o<e.length;o++)t={},r=(i=e[o].slice(0)).shift(),0!=i.length&&(t.tuple=i,""!=r&&(t.measure=r),n.push(t));return n},i.prototype.drilledElementsToJSON=function(e){for(var t,i,r,n,o=[],s=0;s<e.length;s++)t={},i=(n=e[s].slice(0)).shift(),r=n.shift(),n.shift(),0!=n.length&&(t.tuple=n,""!=r&&(t.measure=r),""!=i&&(t.level=i),o.push(t));return o},i.prototype.measureToJSON=function(t,i){var r={};return r.uniqueName=t.uniqueName,null!=t.formula&&""!=t.formula?(r.formula=t.formula,t.individual&&(r.individual=!0),r.caption=t.caption):(i||t.aggregation!=e.data_.consts.AggregationName.NONE)&&(r.aggregation=t.aggregation),(i||0==t.active)&&(r.active=t.active),null!=t.format&&""!=t.format&&(r.format=t.format,this.formatsInUse[t.format]=t.active),null!=t.availableAggregations&&0<t.availableAggregations.length&&(r.availableAggregations=t.availableAggregations),r},i.prototype.hierarchyToJSON=function(t,i){var r={};if(r.uniqueName=t.uniqueName,null!=t.activeLevelName&&(r.levelName=t.activeLevelName),null!=t.filter&&(r.filter={},null!=t.filter.type&&t.filter.type!=e.data_.consts.FilterType.NONE&&(r.filter={type:t.filter.type,quantity:t.filter.quantity,measure:t.filter.measure}),null!=t.filter.members)){var n="string"==typeof t.filter.members?t.filter.members.split(","):t.filter.members;0<n.length&&(r.filter.members=n,!0===t.filter.negation&&(r.filter.negation=t.filter.negation))}return t.filterEnabled||(r.filterEnabled=!0),t.uniqueName!=e.data_.Cube.MEASURES_NAME&&t.sortName&&(i||t.sortName!=e.data_._structure.GenericHierarchy.DEFAULT_SORT_NAME)&&(r.sort=t.sortName),t.uniqueName!=e.data_.Cube.MEASURES_NAME&&t.sortAs&&(r.sortAs=t.sortAs),r},i.toPlainObject=function(e){var t={};return null==e||(null!=e.pages&&(t.pages=e.pages),null!=e.reportFilters&&(t.pages=e.reportFilters),null!=e.rows&&(t.rows=e.rows),null!=e.columns&&(t.columns=e.columns),null!=e.measures&&(t.measures=e.measures),null!=e.rowSorting&&(t.rowSorting=e.rowSorting,null!=t.rowSorting.tuple&&"string"==typeof t.rowSorting.tuple&&(t.rowSorting.tuple=t.rowSorting.tuple.split(","))),null!=e.sorting&&null!=e.sorting.row&&(t.rowSorting=e.sorting.row),null!=e.columnSorting&&(t.columnSorting=e.columnSorting,null!=t.columnSorting.tuple&&"string"==typeof t.columnSorting.tuple&&(t.columnSorting.tuple=t.columnSorting.tuple.split(","))),null!=e.sorting&&null!=e.sorting.column&&(t.columnSorting=e.sorting.column),null!=e.expandAll&&(t.expandAll=e.expandAll),null!=e.expandedRows&&(t.expandedRows=e.expandedRows),null!=e.expandedColumns&&(t.expandedColumns=e.expandedColumns),null!=e.expands&&(null!=e.expands.expandAll&&(t.expandAll=e.expands.expandAll),null!=e.expands.rows&&(t.expandedRows=i.readExpandedFromObject(e.expands.rows)),null!=e.expands.columns&&(t.expandedColumns=i.readExpandedFromObject(e.expands.columns))),null!=e.drillAll&&(t.drillAll=e.drillAll),null!=e.drilledRows&&(t.drilledRows=e.drilledRows),null!=e.drilledColumns&&(t.drilledColumns=e.drilledColumns),null!=e.drills&&(null!=e.drills.drillAll&&(t.drillAll=e.drills.drillAll),null!=e.drills.rows&&(t.drilledRows=i.readDrilledFromObject(e.drills.rows)),null!=e.drills.columns&&(t.drilledColumns=i.readDrilledFromObject(e.drills.columns))),null!=e.flatOrder&&(t.flatOrder=e.flatOrder),null!=e.slice&&(null!=(e=e.slice).pages&&e.pages.length&&(t.pages=e.pages),null!=e.reportFilters&&e.reportFilters.length&&(t.pages=e.reportFilters),null!=e.rows&&e.rows.length&&(t.rows=e.rows),null!=e.columns&&e.columns.length&&(t.columns=e.columns),null!=e.measures&&e.measures.length&&(t.measures=e.measures),null!=e.sorting&&null!=e.sorting.row&&(t.rowSorting=e.sorting.row),null!=e.sorting&&null!=e.sorting.column&&(t.columnSorting=e.sorting.column),null!=e.expands&&(null!=e.expands.expandAll&&(t.expandAll=e.expands.expandAll),null!=e.expands.rows&&(t.expandedRows=i.readExpandedFromObject(e.expands.rows)),null!=e.expands.columns&&(t.expandedColumns=i.readExpandedFromObject(e.expands.columns))),null!=e.drills&&(null!=e.drills.drillAll&&(t.drillAll=e.drills.drillAll),null!=e.drills.rows&&(t.drilledRows=i.readDrilledFromObject(e.drills.rows)),null!=e.drills.columns&&(t.drilledColumns=i.readDrilledFromObject(e.drills.columns))),null!=e.flatOrder&&e.flatOrder.length&&(t.flatOrder=e.flatOrder))),t},i}(),i.SliceValueObject=r}(n||(n={})),function(e){var t,i,r,n;r=(i=(t=e.model||(e.model={}))._state||(t._state={})).vo||(i.vo={}),n=function(){function i(){this.formats=new s.AssociativeArray,this.conditions=new s.AssociativeArray,this.customFields=[],this.rowSizes={},this.columnSizes={},this.startTableRow=0,this.rowHeaderSizes={},this.columnHeaderSizes={},this.rowFilterSizes={},this.expandedRows=[],this.expandedColumns=[],this.drilledRows=[],this.drilledColumns=[],this.localization=null,this.labels={},this.withGlobals=this.withDefaults=!1}return i.toReport=function(i){var r,n,o=new t.report.ReportValueObject;if(o.withDefaults=i.withDefaults,o.connectionInfo=i._connectionInfo,i._slice){var s,a=e.data_._structure.Axis.toObject(i._slice.findAxis(e.data_.consts.AxisName.ROWS_AXIS)),l=e.data_._structure.Axis.toObject(i._slice.findAxis(e.data_.consts.AxisName.COLUMNS_AXIS));for(r=e.data_._structure.Axis.toObject(i._slice.findAxis(e.data_.consts.AxisName.PAGES_AXIS)),o.slice=new t.report.SliceValueObject,o.slice.rows=a.hierarchies,o.slice.columns=l.hierarchies,o.slice.pages=r.hierarchies,o.slice.measures=[],r=0;r<i._slice.measures_.length;r++)s=i._slice.measures_.getItemAt(r),(s=e.data_._structure.GenericMeasure.toObject(s)).active=!0,o.slice.measures.push(s);for(r=0;r<i._structure.measures_.length;r++)s=i._structure.measures_.getItemAt(r),i._slice.measures_.keyExists(s.uniqueName)||s.hasDefaultParams()||((s=e.data_._structure.GenericMeasure.toObject(s)).active=!1,o.slice.measures.push(s));o.slice.rowSorting=a.sort,o.slice.columnSorting=l.sort,o.slice.expandAll=i._slice.expandAll,o.slice.expandedRows=i.expandedRows,o.slice.expandedColumns=i.expandedColumns,o.slice.drillAll=i._slice.drillAll,o.slice.drilledRows=i.drilledRows,o.slice.drilledColumns=i.drilledColumns,o.slice.flatOrder=i._slice.flatOrder}for(o.options=i._options,a=[],r=0;r<i.formats.length;r++)a[r]=i.formats.getItemAt(r).toObject();for(o.formats=a,a=[],r=0;r<i.conditions.length;r++)a[r]=t.condition.vo.ConditionValueObject.toObject(i.conditions.getItemAt(r));for(n in o.conditions=a,o.customFields=i.customFields,o.labels=i.labels,r={},i.columnSizes)r[n]=i.columnSizes[n];for(n in o.columnSizes=r,a=[],i.columnHeaderSizes)a[r=parseInt(n)]=i.columnHeaderSizes[n];for(n in o.columnHeaderSizes=a,r={},i.rowSizes)r[n]=i.rowSizes[n];for(n in o.rowSizes=r,a=[],i.rowHeaderSizes)a[(r=parseInt(n))+i.startTableRow]=i.rowHeaderSizes[n];if(o.rowHeaderSizes=a,a=[],0!=i.startTableRow)for(n in i.rowFilterSizes)a[r=parseInt(n)]=i.rowFilterSizes[n];return o.rowFilterSizes=a,o.localization=i.localization,o},i}(),r.StateValueObject=n}(n||(n={})),function(e){var t,i,n;i=(t=e.model||(e.model={})).printing||(t.printing={}),n=function(){function i(){var e=this;this.MARGINS=25,this._printInProgress=!1,this.printCompletedHandler=function(){return e.onPrintCompleted()},this.footerHeight=this.headerHeight=0}return i.getInstance=function(){return null==i._instance&&(i._instance=new i),i._instance},i.dispose=function(){i._instance=null},i.prototype.print=function(i){void 0===i&&(i=null),this._printInProgress||(this._printInProgress=!0,this._options=i||new t.printing.PrintOptions,t.PivotModel.getInstance().addEventListener(e.PivotEvent.PRINT_COMPLETE,this.printCompletedHandler),t.PivotModel.getInstance().dispatchWith(e.PivotEvent.PRINT))},i.prototype.onPrintCompleted=function(){t.PivotModel.getInstance().removeEventListener(e.PivotEvent.PRINT_COMPLETE,this.printCompletedHandler),this._printInProgress=!1},i.prototype.run=function(e,t){this.grid=e,this.dataProvider=t,this.gridLayout=null!=e?e.gridLayout:null,this.start()},i.prototype.start=function(){var e=this;this.pageNumber=0,this._pageWidth=576-2*this.MARGINS,this._pageHeight=756-2*this.MARGINS,this.pages=new r.UIElement("div"),this.stylesList=[],this.rowsShift=this.columnsShift=0,s.ThreadManager.addTask(this.generatePageColumn,this,null,(function(){return e.finish()}))},i.prototype.clear=function(){this._printInProgress=!1,this.columnsShift=this.pageNumber=this.rowsShift=this.columnsShift=0,this.pages=this.printSprite=null,this.footerHeight=this.headerHeight=0},i.prototype.generatePageColumn=function(){return this.addColumn()},i.prototype.addColumn=function(){if(null==this.printSprite)this.printSprite=this.createPage(),this.printTable=this.printSprite.find("table");else if(!(this.printSprite.getWidth(!0)<=this._pageWidth&&0!=this.columnsShift)&&(this.printSprite.getWidth(!0)>this._pageWidth&&(this.columnsShift--,this.printSprite.find("td:last-child").remove()),this.addPageToPJ(),this.printSprite=this.createPage(),this.printTable=this.printSprite.find("table"),0==this.grid.isFlatTable)){var e=this.columnsShift;0!=this.columnsShift&&(this.columnsShift=0,this.addColumnOnPage(),this.columnsShift=e,this.columnsShift+1<=this.dataProvider.extendedDataWidth-(this.grid.isFlatTable?1:0)&&(this.columnsShift+=1))}return this.addColumnOnPage(),1==this.shift()&&(this.addPageToPJ(),!0)},i.prototype.createPage=function(){var e=new r.UIElement("div").addClass("page");if(e.css("position","absolute").css("left","-9999px"),null!=this._options.header){var i=this.createHeaderFooter(this._options.header);e.append(i)}var n=new r.UIElement("table");if(0==this.pageNumber&&0<t._options.OptionsManager.gridTitle.length&&n.append(new r.UIElement("caption").text(t._options.OptionsManager.gridTitle)),e.append(n),null!=this._options.footer){var o=this.createHeaderFooter(this._options.footer);e.append(o)}return this.grid.container.append(e),this.headerHeight=null!=i?i.getHeight():0,this.footerHeight=null!=o?o.getHeight():0,e},i.prototype.createHeaderFooter=function(e){var t=new r.UIElement("div");return e=(e=e.replace(/##PAGE-NUMBER##/gi,(this.pageNumber+1).toString())).replace(/##CURRENT-DATE##/gi,(new Date).toLocaleString()),t.html(e),t},i.prototype.addPageToPJ=function(){return this.pageNumber++,e.preloader(!0,t._labels.Labels.MESSAGE_PLEASE_WAIT,this.pageNumber+" "+t._labels.Labels.MESSAGE_PAGES_WERE_GENERATED,!0),this.rowHeightSum>this._pageHeight&&(this._rowIdx--,this.printSprite.find("tr:last-child").remove()),this.printSprite.detach(),this.printSprite.css("position","").css("left",""),this.pages.append(this.printSprite),!1},i.prototype.shift=function(){return++this.columnsShift,this.columnsShift>this.dataProvider.extendedDataWidth-(this.grid.isFlatTable?1:0)&&(this.columnsShift=0,this.rowsShift+=this._rowIdx-this.grid.FIRST_DATA_ROW),1e3<=this.pageNumber||this.rowsShift>=this.dataProvider.extendedDataHeight},i.prototype.addColumnOnPage=function(){this.rowHeightSum=0;var e=this.grid.START_HEADERS_COLUMN+this.columnsShift,t=this._pageHeight-this.headerHeight-this.footerHeight;for(this._rowIdx=this.grid.START_TABLE_ROW;this.rowHeightSum<=t&&this._rowIdx<this.dataProvider.extendedDataHeight+this.grid.FIRST_DATA_ROW-this.rowsShift;this._rowIdx++){this.rowIndex=this._rowIdx<this.grid.FIRST_DATA_ROW?this._rowIdx:this._rowIdx+this.rowsShift;var i=this.gridLayout.getCell(this.rowIndex,e,!0,!0);if(this.rowHeightSum+=this.addCell(this._rowIdx,this.columnsShift,i),this.rowHeightSum>=t)break}},i.prototype.addCell=function(e,t,i){for(t=0<(t=this.printTable.find("tr",!0)).length?t[e]:null;null==t;)this.printTable.append(new r.UIElement("tr")),t=this.printTable.find("tr",!0)[e];if(e="<td {0}>"+(i?i.getLabel():"")+"</td>",null==i)e=s.StringUtils.bind(e,"class='cell'");else{var n="",o="";i.isCustomized&&(o=i.style.getStyleString(),n=i.style.getCustomClassString(),this.appendStylesList(i.style.customStyleNames)),""!=(n=i.isRowHeader?n+" rowHeaderCell level"+i.level:i.isColumnHeader?n+" columnHeaderCell":i.isFilterHeader?n+" filterHeaderCell":i.isTotal&&""!=i.getLabel()?n+" totalCell":n+" cell").trim()&&(n="class='"+n.trim()+"'"),""!=o.trim()&&(o="style='"+o.trim()+"maxWidth:400px'"),e=s.StringUtils.bind(e,n+" "+o)}return t.element.innerHTML+=e,t.getHeight(!0)+4},i.prototype.appendStylesList=function(e){for(var t=0;t<e.length;t++)0>this.stylesList.indexOf(e[t])&&this.stylesList.push(e[t])},i.prototype.finish=function(){e.preloader(!0,t._labels.Labels.MESSAGE_PLEASE_WAIT,"Sending pages to printer...",!1,!0),o.PrintJob.print(this.pages.html(),this.generateStyle(),t._options.OptionsManager.gridTitle),e.preloader(!1),t.PivotModel.getInstance().dispatchWith(e.PivotEvent.PRINT_COMPLETE),this.clear()},i.prototype.generateStyle=function(){var t="",i=r.UIElement.convert(this.gridLayout.element),n=i.find("#wdr-data-sheet");for(t=(t=(t=(t=(t=(t=(t=(t+=s.StringUtils.bind("table{width:100%;border-collapse:collapse;{0}}\n",e._view.grid.vo.StyleValueObject.fromItemToString(i,["font-family","font-size"])))+s.StringUtils.bind("caption{{0}}\n",e._view.grid.vo.StyleValueObject.fromClassToString(e._view.grid.vo.GridStyleName.TITLE,i)))+s.StringUtils.bind("td{white-space:nowrap;{0}}\n",s.browserVersion().isChrome?"":"border: 1px solid #eee;"))+s.StringUtils.bind(".cell{{0}}\n",e._view.grid.vo.StyleValueObject.fromClassToString(e._view.grid.vo.GridStyleName.CELL,n)))+s.StringUtils.bind(".totalCell{{0}}\n",e._view.grid.vo.StyleValueObject.fromClassToString(e._view.grid.vo.GridStyleName.CELL+" "+e._view.grid.vo.GridStyleName.TOTAL,n)))+s.StringUtils.bind(".rowHeaderCell{{0}}\n",e._view.grid.vo.StyleValueObject.fromClassToString(e._view.grid.vo.GridStyleName.CELL+" "+e._view.grid.vo.GridStyleName.HEADER+" "+e._view.grid.vo.GridStyleName.HEADER_ROW,i)))+s.StringUtils.bind(".columnHeaderCell{{0}}\n",e._view.grid.vo.StyleValueObject.fromClassToString(e._view.grid.vo.GridStyleName.CELL+" "+e._view.grid.vo.GridStyleName.HEADER+" "+e._view.grid.vo.GridStyleName.HEADER_COLUMN,i)))+s.StringUtils.bind(".filterHeaderCell{{0}}\n",e._view.grid.vo.StyleValueObject.fromClassToString(e._view.grid.vo.GridStyleName.CELL+" "+e._view.grid.vo.GridStyleName.HEADER+" "+e._view.grid.vo.GridStyleName.FILTER_HEADER,i)),n=1;20>=n;n++)t+=s.StringUtils.bind(".level{0}{{1}}\n",n,e._view.grid.vo.StyleValueObject.fromClassToString(e._view.grid.vo.GridStyleName.HEADER_ROW+" "+e._view.grid.vo.GridStyleName.LEVEL+n,i,["padding-left"]));for(n=0;n<this.stylesList.length;n++)t+=s.StringUtils.bind(".{0}{{1}}\n",this.stylesList[n],e._view.grid.vo.StyleValueObject.fromClassToString(this.stylesList[n],i));return(t=(t+".page:not(:last-child), svg { page-break-after: always; }").replace(/background-color:rgb\(33, 33, 33\)/g,"background-color:rgb(255, 255, 255)")).replace(/background-color:rgb\(66, 66, 66\)/g,"background-color:rgb(247, 247, 247)")},i}(),i.PrintingManager=n}(n||(n={})),function(e){!function(e){!function(e){var t=function(){function e(){}return e.fromObject=function(t){var i=new e;return null!=t&&(null!=t.header&&(i.header=t.header),null!=t.footer&&(i.footer=t.footer)),i},e}();e.PrintOptions=t}(e.printing||(e.printing={}))}(e.model||(e.model={}))}(n||(n={})),function(e){var i,r,n;i=e.model||(e.model={}),r=i._options||(i._options={}),n=function(n){function o(){var e=n.call(this)||this;if((o._defaults=new r.vo.OptionsValueObject).setDefaults(),o._options=new r.vo.OptionsValueObject,o.instance)throw Error("Singleton");return e}return a(o,n),o.getInstance=function(){return s.nullOrUndefined(o.instance)&&(o.instance=new o),o.instance},o.dispose=function(){o._globals._defaults=null,o._globals=null,o._options=null,o._defaults=null,o.instance=null},o.setGlobalOptions=function(e){o._globals=e},o.getOptions=function(e,t){void 0===e&&(e=!1),void 0===t&&(t=!1);var i=new r.vo.OptionsValueObject;return e&&i.mergeWith(o._defaults),t&&i.mergeWith(o._globals),i.mergeWith(o._options),e||i.cleanFromDefaults(),i},o.clear=function(){this._options=new r.vo.OptionsValueObject},o.setOptions=function(t,i){if(void 0===i&&(i=!0),s.nullOrUndefined(o._options)||i){var n=o.configuratorOpened;(o._options=new r.vo.OptionsValueObject).configuratorOpened=n}n=r.vo.OptionsValueObject.toPlainObject(t);var a=!1;o.dispatchSuspended=!0;var l,c=o.getOptions(!0,!0);for(l in n)if(null!=c[l]&&n[l]!=c[l]&&(a=!0,o.optionAffectDataProvider(l))){o.optionAffectedDataProvider=!0;break}o._options.mergeWith(n),e.data_._structure.GenericHierarchy.DEFAULT_SORT_NAME=o.defaultHierarchySortName,o.dispatchSuspended=!1,a&&o.dispatchReportChange()},o.optionAffectDataProvider=function(e){return-1<o._optionsAffectDataProvider.indexOf(e)},o.getOption=function(e){return null!=o._options[e]?o._options[e]:o._globals&&null!=o._globals[e]?o._globals[e]:o._defaults[e]},Object.defineProperty(o,"configuratorOpened",{get:function(){return o._options.configuratorOpened},set:function(e){o._options.configuratorOpened=e},enumerable:!0,configurable:!0}),Object.defineProperty(o,"configuratorActive",{get:function(){return o.getOption("configuratorActive")},set:function(e){o._options.configuratorActive!=e&&(o.configuratorOpened=o._options.configuratorActive=e,o.dispatchReportChange())},enumerable:!0,configurable:!0}),Object.defineProperty(o,"configuratorButton",{get:function(){return o.getOption("configuratorButton")},set:function(e){o._options.configuratorButton!=e&&(o._options.configuratorButton=e,o.dispatchReportChange())},enumerable:!0,configurable:!0}),Object.defineProperty(o,"classicView",{get:function(){return o.getOption("gridType")==e._view.grid.GridType.CLASSIC},set:function(t){o._options.gridType!=e._view.grid.GridType.CLASSIC&&(o._options.gridType=e._view.grid.GridType.CLASSIC,o.optionAffectedDataProvider=o.optionAffectDataProvider("gridType"),o.dispatchReportChange())},enumerable:!0,configurable:!0}),Object.defineProperty(o,"flatView",{get:function(){return o.getOption("gridType")==e._view.grid.GridType.FLAT},set:function(t){o._options.gridType!=e._view.grid.GridType.FLAT&&(o._options.gridType=e._view.grid.GridType.FLAT,o.optionAffectedDataProvider=o.optionAffectDataProvider("gridType"),o.dispatchReportChange())},enumerable:!0,configurable:!0}),Object.defineProperty(o,"gridType",{get:function(){return o.getOption("gridType")},set:function(e){o._options.gridType!=e&&(o._options.gridType=e,o.dispatchReportChange())},enumerable:!0,configurable:!0}),Object.defineProperty(o,"gridTitle",{get:function(){return o.getOption("gridTitle")},set:function(e){o._options.gridTitle!=e&&(o._options.gridTitle=e,o.dispatchReportChange())},enumerable:!0,configurable:!0}),Object.defineProperty(o,"showFilter",{get:function(){return o.getOption("showFilter")},set:function(e){o._options.showFilter!=e&&(o._options.showFilter=e,o.dispatchReportChange())},enumerable:!0,configurable:!0}),Object.defineProperty(o,"showDefaultSlice",{get:function(){return o.getOption("showDefaultSlice")},set:function(e){o._options.showDefaultSlice!=e&&(o._options.showDefaultSlice=e,o.dispatchReportChange())},enumerable:!0,configurable:!0}),Object.defineProperty(o,"showEmptyData",{get:function(){return o.getOption("showEmptyData")},set:function(e){o._options.showEmptyData!=e&&(o._options.showEmptyData=e,o.dispatchReportChange())},enumerable:!0,configurable:!0}),Object.defineProperty(o,"showAggregations",{get:function(){return o.getOption("showAggregations")},set:function(e){o._options.showAggregations!=e&&(o._options.showAggregations=e,o.dispatchReportChange())},enumerable:!0,configurable:!0}),Object.defineProperty(o,"showHierarchyCaptions",{get:function(){return o.getOption("showHierarchyCaptions")},set:function(e){o._options.showHierarchyCaptions!=e&&(o._options.showHierarchyCaptions=e,o.dispatchReportChange())},enumerable:!0,configurable:!0}),Object.defineProperty(o,"showExtraTotalLabels",{get:function(){return o.getOption("showExtraTotalLabels")},set:function(e){o._options.showExtraTotalLabels!=e&&(o._options.showExtraTotalLabels=e,o.dispatchReportChange())},enumerable:!0,configurable:!0}),Object.defineProperty(o,"showHeaders",{get:function(){return o.getOption("showHeaders")},set:function(e){o._options.showHeaders!=e&&(o._options.showHeaders=e,o.dispatchReportChange())},enumerable:!0,configurable:!0}),Object.defineProperty(o,"sorting",{get:function(){return o.getOption("sorting")},set:function(e){o._options.sorting!=e&&(o._options.sorting=e,o.dispatchReportChange())},enumerable:!0,configurable:!0}),Object.defineProperty(o,"drillThrough",{get:function(){return o.getOption("drillThrough")},set:function(e){o._options.drillThrough!=e&&(o._options.drillThrough=e,o.dispatchReportChange())},enumerable:!0,configurable:!0}),Object.defineProperty(o,"showDrillThroughConfigurator",{get:function(){return o.getOption("showDrillThroughConfigurator")},set:function(e){o._options.showDrillThroughConfigurator!=e&&(o._options.showDrillThroughConfigurator=e,o.dispatchReportChange())},enumerable:!0,configurable:!0}),Object.defineProperty(o,"showHierarchies",{get:function(){return o.getOption("showHierarchies")},set:function(e){o._options.showHierarchies!=e&&(o._options.showHierarchies=e,o.dispatchReportChange())},enumerable:!0,configurable:!0}),Object.defineProperty(o,"saveAllFormats",{get:function(){return o.getOption("saveAllFormats")},set:function(e){o._options.saveAllFormats!=e&&(o._options.saveAllFormats=e,o.dispatchReportChange())},enumerable:!0,configurable:!0}),Object.defineProperty(o,"showTotals",{get:function(){return o.getOption("showTotals")},set:function(e){o._options.showTotals!=e&&(o._options.showTotals=e,o.optionAffectedDataProvider=o.optionAffectDataProvider("showTotals"),o.dispatchReportChange())},enumerable:!0,configurable:!0}),Object.defineProperty(o,"showAutoCalculationBar",{get:function(){return o.getOption("showAutoCalculationBar")},set:function(e){if(o._options.showAutoCalculationBar!=e){var t=!s.nullOrUndefined(o._options.showAutoCalculationBar);o._options.showAutoCalculationBar=e,t&&o.dispatchReportChange()}},enumerable:!0,configurable:!0}),Object.defineProperty(o,"showGrandTotals",{get:function(){return o.getOption("showGrandTotals")},set:function(e){o._options.showGrandTotals!=e&&(o._options.showGrandTotals=e,o.optionAffectedDataProvider=o.optionAffectDataProvider("showGrandTotals"),o.dispatchReportChange())},enumerable:!0,configurable:!0}),Object.defineProperty(o,"datePattern",{get:function(){return o.getOption("datePattern")},set:function(e){o._options.datePattern!=e&&(o._options.datePattern=e,o.dispatchReportChange())},enumerable:!0,configurable:!0}),Object.defineProperty(o,"dateTimePattern",{get:function(){return o.getOption("dateTimePattern")},set:function(e){o._options.dateTimePattern!=e&&(o._options.dateTimePattern=e,o.dispatchReportChange())},enumerable:!0,configurable:!0}),Object.defineProperty(o,"showCalculatedValuesButton",{get:function(){return o.getOption("showCalculatedValuesButton")},set:function(e){o._options.showCalculatedValuesButton!=e&&(o._options.showCalculatedValuesButton=e,o.dispatchReportChange())},enumerable:!0,configurable:!0}),Object.defineProperty(o,"selectEmptyCells",{get:function(){return o.getOption("selectEmptyCells")},set:function(e){o._options.selectEmptyCells!=e&&(o._options.selectEmptyCells=e,o.dispatchReportChange())},enumerable:!0,configurable:!0}),Object.defineProperty(o,"defaultHierarchySortName",{get:function(){return o.getOption("defaultHierarchySortName")},set:function(e){o._options.defaultHierarchySortName!=e&&(o._options.defaultHierarchySortName=e,o.dispatchReportChange())},enumerable:!0,configurable:!0}),Object.defineProperty(o,"showAggregationLabels",{get:function(){return o.getOption("showAggregationLabels")},set:function(e){o._options.showAggregationLabels!=e&&(o._options.showAggregationLabels=e,o.dispatchReportChange())},enumerable:!0,configurable:!0}),Object.defineProperty(o,"grandTotalsPosition",{get:function(){return o.getOption("grandTotalsPosition")},set:function(e){o._options.grandTotalsPosition!=e&&(o._options.grandTotalsPosition=e,o.optionAffectedDataProvider=o.optionAffectDataProvider("grandTotalsPosition"),o.dispatchReportChange())},enumerable:!0,configurable:!0}),Object.defineProperty(o,"showReportFiltersArea",{get:function(){return o.getOption("showReportFiltersArea")},set:function(e){o._options.showReportFiltersArea!=e&&(o._options.showReportFiltersArea=e,o.dispatchReportChange())},enumerable:!0,configurable:!0}),o.dispatchReportChange=function(){o.dispatchSuspended||o.getInstance().dispatch(new t._Event(i._state.StateEvent.REPORT_CHANGED))},o.optionAffectedDataProvider=!1,o.dispatchSuspended=!1,o._optionsAffectDataProvider=["gridType","showTotals","showGrandTotals","grandTotalsPosition"],o.defaultDatePattern="dd/MM/yyyy",o.defaultDateTimePattern="dd/MM/yyyy HH:mm:ss",o}(t.EventDispatcher),r.OptionsManager=n}(n||(n={})),function(e){var t;!function(t){!function(t){var i=function(){function t(){this._defaults={configuratorActive:!1,configuratorOpened:!1,configuratorButton:!0,gridType:e._view.grid.GridType.COMPACT,gridTitle:"",showFilter:!0,showDefaultSlice:!0,showEmptyData:!0,showAggregations:!0,showHierarchyCaptions:!0,drillthroughMaxRows:1e3,showHeaders:!0,showReportFiltersArea:!0,showExtraTotalLabels:!1,drillThrough:!0,showDrillThroughConfigurator:!0,sorting:"on",showHierarchies:!0,saveAllFormats:!1,showTotals:"on",showGrandTotals:"on",showAutoCalculationBar:!0,datePattern:"dd/MM/yyyy",dateTimePattern:"dd/MM/yyyy HH:mm:ss",showCalculatedValuesButton:!0,selectEmptyCells:!0,defaultHierarchySortName:e.data_.consts.SortType.ASC,showAggregationLabels:!0,grandTotalsPosition:"top"}}return t.prototype.setDefaults=function(){for(var e in this._defaults)this[e]=this._defaults[e]},t.prototype.cleanFromDefaults=function(){for(var e in this._defaults)this[e]==this._defaults[e]&&(this[e]=void 0)},t.fromObject=function(e){var i=new t;return null==e||(null!=e.options&&(e=e.options),e instanceof t||(e=t.toPlainObject(e)),null!=e.configuratorActive&&(i.configuratorActive=e.configuratorActive),null!=e.configuratorButton&&(i.configuratorButton=e.configuratorButton),null!=e.gridTitle&&(i.gridTitle=e.gridTitle),null!=e.gridType&&(i.gridType=e.gridType),null!=e.showFilter&&(i.showFilter=e.showFilter),null!=e.showDefaultSlice&&(i.showDefaultSlice=e.showDefaultSlice),null!=e.showEmptyData&&(i.showEmptyData=e.showEmptyData),null!=e.showAggregations&&(i.showAggregations=e.showAggregations),null!=e.showHierarchyCaptions&&(i.showHierarchyCaptions=e.showHierarchyCaptions),null!=e.showHeaders&&(i.showHeaders=e.showHeaders),null!=e.showReportFiltersArea&&(i.showReportFiltersArea=e.showReportFiltersArea),null!=e.showExtraTotalLabels&&(i.showExtraTotalLabels=e.showExtraTotalLabels),null!=e.drillThrough&&(i.drillThrough=e.drillThrough),null!=e.showDrillThroughConfigurator&&(i.showDrillThroughConfigurator=e.showDrillThroughConfigurator),null!=e.sorting&&(i.sorting=e.sorting,"true"==i.sorting.toString().toLowerCase()&&(i.sorting="on"),"false"==i.sorting.toString().toLowerCase()&&(i.sorting="off")),null!=e.showHierarchies&&(i.showHierarchies=e.showHierarchies),null!=e.saveAllFormats&&(i.saveAllFormats=e.saveAllFormats),null!=e.showTotals&&(i.showTotals=e.showTotals,"true"==i.showTotals.toString().toLowerCase()&&(i.showTotals="on"),"false"==i.showTotals.toString().toLowerCase()&&(i.showTotals="off")),null!=e.showGrandTotals&&(i.showGrandTotals=e.showGrandTotals,"true"==i.showGrandTotals.toString().toLowerCase()&&(i.showGrandTotals="on"),"false"==i.showGrandTotals.toString().toLowerCase()&&(i.showGrandTotals="off")),null!=e.showAutoCalculationBar&&(i.showAutoCalculationBar=e.showAutoCalculationBar),null!=e.datePattern&&(i.datePattern=e.datePattern),null!=e.dateTimePattern&&(i.dateTimePattern=e.dateTimePattern),null!=e.showCalculatedValuesButton&&(i.showCalculatedValuesButton=e.showCalculatedValuesButton),null!=e.selectEmptyCells&&(i.selectEmptyCells=e.selectEmptyCells),null!=e.defaultHierarchySortName&&(i.defaultHierarchySortName=e.defaultHierarchySortName),null!=e.showAggregationLabels&&(i.showAggregationLabels=e.showAggregationLabels),null!=e.grandTotalsPosition&&(i.grandTotalsPosition=e.grandTotalsPosition)),i},t.toPlainObject=function(e){var t={};return null==e||(null!=e.configuratorActive&&(t.configuratorActive=e.configuratorActive),null!=e.configuratorButton&&(t.configuratorButton=e.configuratorButton),null!=e.showAggregations&&(t.showAggregations=e.showAggregations),null!=e.showCalculatedValuesButton&&(t.showCalculatedValuesButton=e.showCalculatedValuesButton),null!=e.drillThrough&&(t.drillThrough=e.drillThrough),null!=e.showDrillThroughConfigurator&&(t.showDrillThroughConfigurator=e.showDrillThroughConfigurator),null!=e.sorting&&(t.sorting=e.sorting),null!=e.datePattern&&(t.datePattern=e.datePattern),null!=e.dateTimePattern&&(t.dateTimePattern=e.dateTimePattern),null!=e.saveAllFormats&&(t.saveAllFormats=e.saveAllFormats),null!=e.showDefaultSlice&&(t.showDefaultSlice=e.showDefaultSlice),null!=e.showEmptyData&&(t.showEmptyData=e.showEmptyData),null!=e.defaultHierarchySortName&&(t.defaultHierarchySortName=e.defaultHierarchySortName),null!=e.selectEmptyCells&&(t.selectEmptyCells=e.selectEmptyCells),null!=e.showAggregationLabels&&(t.showAggregationLabels=e.showAggregationLabels),null!=e.classicView&&(t.classicView=e.classicView),null!=e.flatView&&(t.flatView=e.flatView),null!=e.gridType&&(t.gridType=e.gridType),null!=e.gridTitle&&(t.gridTitle=e.gridTitle),null!=e.showFilter&&(t.showFilter=e.showFilter),null!=e.showHeaders&&(t.showHeaders=e.showHeaders),null!=e.showTotals&&(t.showTotals=e.showTotals),null!=e.showGrandTotals&&(t.showGrandTotals=e.showGrandTotals),null!=e.showAutoCalculationBar&&(t.showAutoCalculationBar=e.showAutoCalculationBar),null!=e.grandTotalsPosition&&(t.grandTotalsPosition=e.grandTotalsPosition),null!=e.showExtraTotalLabels&&(t.showExtraTotalLabels=e.showExtraTotalLabels),null!=e.showHierarchies&&(t.showHierarchies=e.showHierarchies),null!=e.showHierarchyCaptions&&(t.showHierarchyCaptions=e.showHierarchyCaptions),null!=e.drillthroughMaxRows&&(t.drillthroughMaxRows=e.drillthroughMaxRows),null!=e.showReportFiltersArea&&(t.showReportFiltersArea=e.showReportFiltersArea),null!=e.grid&&(null!=(e=e.grid).type&&(t.gridType=e.type),null!=e.title&&(t.gridTitle=e.title),null!=e.showFilter&&(t.showFilter=e.showFilter),null!=e.showHeaders&&(t.showHeaders=e.showHeaders),null!=e.showAutoCalculationBar&&(t.showAutoCalculationBar=e.showAutoCalculationBar),null!=e.showTotals&&(t.showTotals=e.showTotals,"true"==t.showTotals.toString().toLowerCase()&&(t.showTotals="on"),"false"==t.showTotals.toString().toLowerCase()&&(t.showTotals="off")),null!=e.showGrandTotals&&(t.showGrandTotals=e.showGrandTotals,"true"==t.showGrandTotals.toString().toLowerCase()&&(t.showGrandTotals="on"),"false"==t.showGrandTotals.toString().toLowerCase()&&(t.showGrandTotals="off")),null!=e.grandTotalsPosition&&(t.grandTotalsPosition=e.grandTotalsPosition),null!=e.showExtraTotalLabels&&(t.showExtraTotalLabels=e.showExtraTotalLabels),null!=e.showHierarchies&&(t.showHierarchies=e.showHierarchies),null!=e.showHierarchyCaptions&&(t.showHierarchyCaptions=e.showHierarchyCaptions),null!=e.drillthroughMaxRows&&(t.drillthroughMaxRows=e.drillthroughMaxRows),null!=e.showReportFiltersArea&&(t.showReportFiltersArea=e.showReportFiltersArea))),t},t.prototype.toObject=function(){var t={},i={};return this.gridType===e._view.grid.GridType.COMPACT?i.type=e._view.grid.GridType.COMPACT:this.gridType===e._view.grid.GridType.CLASSIC?i.type=e._view.grid.GridType.CLASSIC:this.gridType===e._view.grid.GridType.FLAT&&(i.type=e._view.grid.GridType.FLAT),null!=this.gridTitle&&(i.title=this.gridTitle),null!=this.showFilter&&(i.showFilter=this.showFilter),null!=this.showHeaders&&(i.showHeaders=this.showHeaders),null!=this.showTotals&&(i.showTotals=this.showTotals),null!=this.showGrandTotals&&(i.showGrandTotals=this.showGrandTotals),null!=this.grandTotalsPosition&&(i.grandTotalsPosition=this.grandTotalsPosition),null!=this.showExtraTotalLabels&&(i.showExtraTotalLabels=this.showExtraTotalLabels),null!=this.showHierarchies&&(i.showHierarchies=this.showHierarchies),null!=this.showHierarchyCaptions&&(i.showHierarchyCaptions=this.showHierarchyCaptions),null!=this.drillthroughMaxRows&&(i.drillthroughMaxRows=this.drillthroughMaxRows),null!=this.showReportFiltersArea&&(i.showReportFiltersArea=this.showReportFiltersArea),null!=this.showAutoCalculationBar&&(i.showAutoCalculationBar=this.showAutoCalculationBar),s.ObjectUtils.isEmptyObject(i)||(t.grid=i),null!=this.configuratorActive&&(t.configuratorActive=this.configuratorActive),null!=this.configuratorButton&&(t.configuratorButton=this.configuratorButton),null!=this.showAggregations&&(t.showAggregations=this.showAggregations),null!=this.showCalculatedValuesButton&&(t.showCalculatedValuesButton=this.showCalculatedValuesButton),null!=this.drillThrough&&(t.drillThrough=this.drillThrough),null!=this.showDrillThroughConfigurator&&(t.showDrillThroughConfigurator=this.showDrillThroughConfigurator),null!=this.sorting&&(t.sorting=this.sorting),null!=this.datePattern&&(t.datePattern=this.datePattern),null!=this.dateTimePattern&&(t.dateTimePattern=this.dateTimePattern),null!=this.saveAllFormats&&(t.saveAllFormats=this.saveAllFormats),null!=this.showDefaultSlice&&(t.showDefaultSlice=this.showDefaultSlice),null!=this.showEmptyData&&(t.showEmptyData=this.showEmptyData),null!=this.defaultHierarchySortName&&(t.defaultHierarchySortName=this.defaultHierarchySortName),null!=this.selectEmptyCells&&(t.selectEmptyCells=this.selectEmptyCells),null!=this.showAggregationLabels&&(t.showAggregationLabels=this.showAggregationLabels),t},t.prototype.mergeWith=function(e){for(var t in e)this._defaults.hasOwnProperty(t)&&null!=e[t]&&(this[t]=e[t])},t}();t.OptionsValueObject=i}(t.vo||(t.vo={}))}((t=e.model||(e.model={}))._options||(t._options={}))}(n||(n={})),function(e){!function(e){var i,r;i=e.condition||(e.condition={}),r=function(t){function i(){var e=t.call(this)||this;if(null!=i.instance)throw Error("Singleton");return e}return a(i,t),i.getInstance=function(){return null==i.instance&&(i.instance=new i),i.instance},i.dispose=function(){i.conditions=null,i.instance=null},i.add=function(e){null!=e&&(i.conditions.addItem(e.id,e),this.dispatchReportChange())},i.get=function(e){return i.conditions.getItem(e)},i.remove=function(e){i.conditions.removeItem(e),this.dispatchReportChange()},i.removeAll=function(){i.conditions=new s.AssociativeArray,this.dispatchReportChange()},i.getObjects=function(){for(var e=[],t=0;t<i.conditions.length;t++){var r=i.conditions.getItemAt(t);r.isUpdate||e.push(r.toObject())}return e},i.dispatchReportChange=function(){i.getInstance().dispatchWith(e._state.StateEvent.REPORT_CHANGED)},i.conditions=new s.AssociativeArray,i}(t.EventDispatcher),i.ConditionManager=r}(e.model||(e.model={}))}(n||(n={})),function(e){var t;!function(t){!function(t){var i=function(){function t(){this.id="",this.column=this.row=-1,this.formula=this.hierarchy=this.member=this.measure="",this.params=[]}return Object.defineProperty(t.prototype,"isUpdate",{get:function(){return-1<this.formula.toLowerCase().indexOf(e.data_.consts.FunctionName.UPDATE_DIFFERENCE)||-1<this.formula.toLowerCase().indexOf(e.data_.consts.FunctionName.UPDATE_PERCENT)},enumerable:!0,configurable:!0}),t.prototype.toObject=function(){var e={};return e.id=this.id,e.row=this.row,e.column=this.column,void 0!==this.isTotal&&(e.isTotal=this.isTotal),e.measure=this.measure,e.member=this.member,e.hierarchy=this.hierarchy,e.formula=this.formula,null!=this.format&&(e.format=this.format.toObject(),e.formatCSS=this.format.toString()),e},t.toObject=function(e){return e.toObject()},t.fromObject=function(e){var i=new t;return i.id=null!=e.id?e.id:s.StringUtils.generateID(),null!=e.row&&(i.row=e.row),null!=e.column&&(i.column=e.column),null!=e.isTotal&&(1!=e.isTotal&&1!=e.isTotal||(i.isTotal=!0),0!=e.isTotal&&0!=e.isTotal||(i.isTotal=!1)),null!=e.measure&&(i.measure=e.measure),i.formula=e.formula,null!=e.trueStyle&&null==e.format&&(e.format=e.trueStyle),null!=e.format&&(i.format="string"==typeof e.format?r.fromString(e.format):r.fromObject(e.format)),e=new s.Lexer,i.params=e.parse(i.formula),null==i.params?null:i},t}();t.ConditionValueObject=i;var r=function(){function e(){}return e.fromObject=function(t){var i=new e;return null==t||(null!=t.backgroundColor&&(i.backgroundColor=e.color(t.backgroundColor)),null!=t.color&&(i.color=e.color(t.color)),null!=t.fontFamily&&(i.fontFamily=t.fontFamily),null!=t.fontSize&&(i.fontSize=e.size(t.fontSize)),null!=t.italic&&t.italic&&(i.fontStyle="italic"),null!=t.fontStyle&&(i.fontStyle=t.fontStyle),null!=t.bold&&t.bold&&(i.fontWeight="bold"),null!=t.fontWeight&&(i.fontWeight=t.fontWeight),null!=t.padding&&(i.padding=e.size(Math.round(1.5*t.padding))),null!=t.textAlign&&(i.textAlign=t.textAlign),null!=t.textIndent&&(i.textIndent=e.size(t.textIndent))),i},e.fromString=function(t){var i={};if(null!=(t=t.split(";")))for(var r=0;r<t.length;r++){var n=t[r].split(":")[0],o=t[r].split(":")[1];""!=n&&(i[n]=o)}return e.fromObject(i)},e.prototype.toObject=function(){var e={};return null!=this.backgroundColor&&(e.backgroundColor=this.backgroundColor),null!=this.color&&(e.color=this.color),null!=this.fontFamily&&(e.fontFamily=this.fontFamily),null!=this.fontSize&&(e.fontSize=this.fontSize),null!=this.fontStyle&&(e.fontStyle=this.fontStyle),null!=this.fontWeight&&(e.fontWeight=this.fontWeight),null!=this.padding&&(e.padding=this.padding),null!=this.textAlign&&(e.textAlign=this.textAlign),null!=this.textIndent&&(e.textIndent=this.textIndent),e},e.prototype.toCSSObject=function(){var e={};return null!=this.backgroundColor&&(e["background-color"]=this.backgroundColor),null!=this.color&&(e.color=this.color),null!=this.fontFamily&&(e["font-family"]=this.fontFamily),null!=this.fontSize&&(e["font-size"]=this.fontSize),null!=this.fontStyle&&(e["font-style"]=this.fontStyle),null!=this.fontWeight&&(e["font-weight"]=this.fontWeight),null!=this.padding&&(e.padding=this.padding),null!=this.textAlign&&(e["text-align"]=this.textAlign),null!=this.textIndent&&(e["text-indent"]=this.textIndent),e},e.prototype.toString=function(){var e,t="",i=this.toCSSObject();for(e in i)t+=e+":"+i[e]+";";return t},e.color=function(e){return e.replace("0x","#")},e.size=function(e){return"number"==typeof e?e+"px":"string"==typeof e&&0>e.indexOf("px")?e.trim()+"px":e},e}();t.CSSValueObject=r}(t.vo||(t.vo={}))}((t=e.model||(e.model={})).condition||(t.condition={}))}(n||(n={})),function(e){var i,r,n;r=(i=e.model||(e.model={})).sizes||(i.sizes={}),n=function(t){function r(){var e=t.call(this)||this;if(null!=r.instance)throw Error("Singleton");return e}return a(r,t),r.getInstance=function(){return null==r.instance&&(r.instance=new r),r.instance},r.dispose=function(){r.rowFilterSizes=null,r.rowHeaderSizes=null,r.rowSizes=null,r.rowSizesByIdx=null,r._rowSizesNamed=null,r._rowSizesNamedToApply=null,r.columnHeaderSizes=null,r.columnSizes=null,r.columnSizesByIdx=null,r._columnSizesNamed=null,r._columnSizesNamedToApply=null,r.instance=null},Object.defineProperty(r,"rowSizesNamed",{get:function(){return this._rowSizesNamed=r.toNamedSizes(e.data_.consts.AxisName.ROWS_AXIS)},enumerable:!0,configurable:!0}),Object.defineProperty(r,"columnSizesNamed",{get:function(){return this._columnSizesNamed=r.toNamedSizes(e.data_.consts.AxisName.COLUMNS_AXIS)},enumerable:!0,configurable:!0}),r.clear=function(){r.rowSizes={},r.columnSizes={},r._rowSizesNamedToApply={},r._rowSizesNamed={},r._columnSizesNamedToApply={},r._columnSizesNamed={},r.rowSizesByIdx={},r.columnSizesByIdx={},r.rowHeaderSizes={},r.columnHeaderSizes={},r.rowFilterSizes={}},r.applySizes=function(e,t,i,n,o,s,a){r.basedOnNamesArray(e)||r.basedOnNamesArray(t)?(r._rowSizesNamedToApply=r.convertSizes(e),r._columnSizesNamedToApply=r.convertSizes(t),r.processSizes()):(r.basedOnNamesObject(e)||r.basedOnNamesObject(t))&&(r._rowSizesNamedToApply=e,r._columnSizesNamedToApply=t,r.processSizes()),r.rowSizesByIdx=i,r.columnSizesByIdx=n,r.rowHeaderSizes=o,r.columnHeaderSizes=s,r.rowFilterSizes=a},r.processSizes=function(){i.PivotModel.getInstance().state_.reportState==i._state.StateEvent.REPORT_COMPLETE?this.onDataLoaded():e.data_.Cube.getInstance().addEventListener(e.data_.DataEvent.QUERY_COMPLETE,r.onDataLoaded,1)},r.basedOnNamesArray=function(e){var t,i=/[A-Za-z]+/;for(t in e)if(-1<e[t].toString().search(i))return!0;return!1},r.basedOnNamesObject=function(e){var t,i=/[A-Za-z]+/;for(t in e)if(-1<t.toString().search(i))return!0;return!1},r.convertSizes=function(e){var t={};if(null!=e)for(var i in e){var r=e[i];if(r instanceof Array&&0<r.length){var n=parseInt(r.pop());t[r.toString()]=n}}return t},r.onDataLoaded=function(){e.data_.Cube.getInstance().removeEventListener(e.data_.DataEvent.QUERY_COMPLETE,r.onDataLoaded),r.rowSizes=r.fromNamedSizes(e.data_.consts.AxisName.ROWS_AXIS),r._rowSizesNamedToApply={},r.columnSizes=r.fromNamedSizes(e.data_.consts.AxisName.COLUMNS_AXIS),r._columnSizesNamedToApply={}},r.fromNamedSizes=function(t){var n,o={},s=t==e.data_.consts.AxisName.ROWS_AXIS?r._rowSizesNamedToApply:r._columnSizesNamedToApply;for(n in s){var a,l=n.split(","),c=s[n],u=e.data_.Cube.getInstance().slice_.axes.getItem(t).hasMeasures;u&&!i._options.OptionsManager.flatView&&(a=l[l.length-1],l.splice(l.length-1,1));for(var h=!1,d=[],A=0;A<l.length;A++)if(i._options.OptionsManager.flatView)if(t==e.data_.consts.AxisName.ROWS_AXIS)d.push(l[A]);else{var p=l[A];if(-1==(p=e.data_.Cube.getInstance().localDataStorage.keys.indexOf(p))){h=!0;break}d.push(p)}else{if(p=l[A],null==(p=(t==e.data_.consts.AxisName.ROWS_AXIS?e.data_.Cube.getInstance().slice_.rowsOnly.getItemAt(A):e.data_.Cube.getInstance().slice_.columnsOnly.getItemAt(A)).members.getItem(p))){h=!0;break}d.push(p.isAll?"":p.ordinal.toString())}if(!h){if(u&&!i._options.OptionsManager.flatView){if(l=e.data_.Cube.getInstance().slice_.measures_.indexOf(a),""!=a&&-1==l)continue;d.push(l)}o[d.toString()]=c}}return o},r.toNamedSizes=function(t){var n,o={},s=t==e.data_.consts.AxisName.ROWS_AXIS?r.rowSizes:r.columnSizes;for(n in s){var a,l=n.split(","),c=s[n],u=e.data_.Cube.getInstance().slice_.axes.getItem(t).hasMeasures;u&&!i._options.OptionsManager.flatView&&(a=parseInt(l[l.length-1]),l.splice(l.length-1,1));for(var h=!1,d=[],A=0;A<l.length;A++)if(i._options.OptionsManager.flatView)if(t==e.data_.consts.AxisName.ROWS_AXIS)d.push(l[A]);else{var p=""===l[A]?0:parseInt(l[A]);if(null==(p=e.data_.Cube.getInstance().localDataStorage.keys[p])){h=!0;break}d.push(p)}else{p=""===l[A]?0:parseInt(l[A]);var f=t==e.data_.consts.AxisName.ROWS_AXIS?e.data_.Cube.getInstance().slice_.rowsOnly.getItemAt(A):e.data_.Cube.getInstance().slice_.columnsOnly.getItemAt(A);if(null==f){h=!0;break}if(null==(p=f.members.getItemAt(p))){h=!0;break}d.push(p.uniqueName)}if(!h){if(u&&!i._options.OptionsManager.flatView){if(a>=e.data_.Cube.getInstance().slice_.measures_.length)continue;-1==a&&1==e.data_.Cube.getInstance().slice_.measures_.length&&(a=0),d.push(e.data_.Cube.getInstance().slice_.measures_.getKeyAt(a))}o[d.toString()]=c}}return o},r.rowSizes={},r.columnSizes={},r._rowSizesNamedToApply={},r._rowSizesNamed={},r._columnSizesNamedToApply={},r._columnSizesNamed={},r.startTableRow=0,r.rowSizesByIdx={},r.columnSizesByIdx={},r.rowHeaderSizes={},r.columnHeaderSizes={},r.rowFilterSizes={},r}(t.EventDispatcher),r.SizesManager=n}(n||(n={})),function(e){var i,n,o;i=e.model||(e.model={}),n=i._export||(i._export={}),o=function(){function o(){}return o.run=function(r,n,a,l){var c=this;e.preloader(!0,i._labels.Labels.MESSAGE_PLEASE_WAIT,"...",!0,!0),o.clear(),o.grid=r,o.dataHeight=l,o.dataWidth=a,o.coords=r.gridLayout.coords,o.exportOptions=n,o.pdf=new jsPDF(n.pageOrientation,"mm","a4",!s.browserVersion().isMsie),o.pageHeight=o.fullPageHeight-2*o.PAGE_MARGIN,o.pageWidth=o.fullPageWidth-2*o.PAGE_MARGIN,o.totalColumnCount=o.grid.FIRST_DATA_COLUMN+a,o.totalRowCount=o.grid.FIRST_DATA_ROW+l,o.widthSize={},o.currentYPos=o.PAGE_MARGIN;try{o.calculateColumnCount(),o.getStyles(),o.createHeaderAndFooter(o.exportOptions.header,o.exportOptions.footer,(function(){return c.onHeaderAndFooterCreated()}))}catch(u){console.error("Export PDF error:",u),e.uialert(i._labels.Labels.MESSAGE_EXPORT_ERROR,i._labels.Labels.ERROR,e.AlertType.ERROR),e.preloader(!1),i.PivotModel.getInstance().dispatch(new t._Event(e.PivotEvent.EXPORT_COMPLETE)),o.clear()}},o.createHeaderAndFooter=function(t,i,s){try{o.headerHeight=0,o.footerHeight=0;var a=null==t,l=null==i;if(a&&l)s();else{if(!a){t=(t=t.replace(/##PAGE-NUMBER##/gi,(o.pageNumber+1).toString())).replace(/##CURRENT-DATE##/gi,(new Date).toLocaleString());var c=new r.UIElement("div");c.css("position","absolute"),c.css("background","white"),c.setWidth(o.mm2px(o.fullPageWidth-2*o.HEADER_FOOTER_MARGIN)),c.html(t),e._view.PivotView.stage.container.prepend(c),html2canvas(c.element).then((function(e){c.remove(),o.headerImage=e,o.headerHeight=o.px2mm(e.height),a=!0,l&&s()}))}if(!l){i=(i=i.replace(/##PAGE-NUMBER##/gi,(o.pageNumber+1).toString())).replace(/##CURRENT-DATE##/gi,(new Date).toLocaleString());var u=new r.UIElement("div");u.css("position","absolute"),u.css("background","white"),u.setWidth(o.mm2px(o.fullPageWidth-2*o.HEADER_FOOTER_MARGIN)),u.html(i),e._view.PivotView.stage.container.prepend(u),html2canvas(u.element).then((function(e){u.remove(),o.footerImage=e,o.footerHeight=o.px2mm(e.height),l=!0,a&&s()}))}}}catch(n){o.headerImage=null,o.headerHeight=0,o.footerImage=null,o.footerHeight=0,s()}},o.addHeader=function(e,t){e.addImage(t,"JPEG",o.HEADER_FOOTER_MARGIN,o.HEADER_FOOTER_MARGIN)},o.addFooter=function(e,t){e.addImage(t,"JPEG",o.HEADER_FOOTER_MARGIN,o.fullPageHeight-o.footerHeight-o.HEADER_FOOTER_MARGIN)},o.addHeaderAndFooter=function(){null!=o.headerImage&&o.addHeader(o.pdf,o.headerImage),null!=o.footerImage&&o.addFooter(o.pdf,o.footerImage),o.pageHeight=o.fullPageHeight,o.pageHeight-=0==o.headerHeight?o.PAGE_MARGIN:o.headerHeight+2*o.HEADER_FOOTER_MARGIN,o.pageHeight-=0==o.footerHeight?o.PAGE_MARGIN:o.footerHeight+2*o.HEADER_FOOTER_MARGIN,o.currentYPos=0==o.headerHeight?o.PAGE_MARGIN:o.headerHeight+2*o.HEADER_FOOTER_MARGIN},Object.defineProperty(o,"fullPageHeight",{get:function(){return"portrait"===o.exportOptions.pageOrientation?297:210},enumerable:!0,configurable:!0}),Object.defineProperty(o,"fullPageWidth",{get:function(){return"portrait"===o.exportOptions.pageOrientation?210:297},enumerable:!0,configurable:!0}),o.onHeaderAndFooterCreated=function(){o.addHeaderAndFooter(),o.addTitle(i._options.OptionsManager.gridTitle,o.pdf),s.nullOrEmpty(i._options.OptionsManager.gridTitle)||0!=o.pageNumber||(o.currentYPos+=5),o.preprocessData(),s.ThreadManager.addTask(o.generateRow,null,null,(function(){return o.onPdfGenerated()}))},o.addTitle=function(e,t){if(!s.nullOrEmpty(e)){t.setTextColor(0,0,0),t.setFontStyle("bold"),t.setFontSize(12);var i=12*t.getStringUnitWidth(e)/t.internal.scaleFactor;t.text(e,(t.internal.pageSize.width-i)/2,o.currentYPos)}},o.getStyles=function(){var t=o.grid.gridLayout,i=t.find("#wdr-data-sheet");o.cellStyle=e._view.grid.vo.StyleValueObject.fromClass(e._view.grid.vo.GridStyleName.CELL,i),o.totalCellStyle=e._view.grid.vo.StyleValueObject.fromClass(e._view.grid.vo.GridStyleName.CELL+" "+e._view.grid.vo.GridStyleName.TOTAL,i),o.rowHeaderCellStyle=e._view.grid.vo.StyleValueObject.fromClass(e._view.grid.vo.GridStyleName.CELL+" "+e._view.grid.vo.GridStyleName.HEADER+" "+e._view.grid.vo.GridStyleName.HEADER_ROW,r.UIElement.convert(t.element)),o.columnHeaderCellStyle=e._view.grid.vo.StyleValueObject.fromClass(e._view.grid.vo.GridStyleName.CELL+" "+e._view.grid.vo.GridStyleName.HEADER+" "+e._view.grid.vo.GridStyleName.HEADER_COLUMN,r.UIElement.convert(t.element)),o.filterHeaderCellStyle=e._view.grid.vo.StyleValueObject.fromClass(e._view.grid.vo.GridStyleName.CELL+" "+e._view.grid.vo.GridStyleName.HEADER+" "+e._view.grid.vo.GridStyleName.FILTER_HEADER,r.UIElement.convert(t.element))},o.getColumnWidth=function(e){return.9*((e=o.pixel2mm(o.grid.gridLayout.coords.getColWidth(e)))<o.pageWidth?e:o.pageWidth-1)},o.setDefaultCellStyle=function(t,i){if(null!=t&&t.isCustomized){var r=0<t.style.customStyleNames.length?e._view.grid.vo.StyleValueObject.fromClass(t.style.getCustomClassString()):e._view.grid.vo.StyleValueObject.fromString(t.style.getStyleString());r.merge(i),i=r}return i.color=i.color||"rgb(0,0,0)","rgb(33, 33, 33)"==i.backgroundColor&&(i.color="rgb(242, 242, 242)"),i.backgroundColor=i.backgroundColor||"rgb(0,0,0,0)",i.borderColor=i.borderColor||"rgb(222,222,222)",i.fontSize=i.fontSize||11,i},o.getOptionsForCell=function(t){return{fontSize:.85*t.fontSize,fontName:null==t.fontFamily?o.FONT_NAME:t.fontFamily,fontStyle:e._view.grid.vo.FontStylePDFType.getFontStyle(parseFloat(t.fontWeight))}},o.preprocessData=function(){o.heigthSize=Array(o.totalRowCount);for(var t,i=0,r=0,n=0;r<o.totalRowCount;){n=i=0;for(var s=.8*Math.max(o.px2mm(o.coords.getRowHeight(r)),6);i<o.totalColumnCount;){t=o.grid.gridLayout.getCell(r,i,!0,!0);var a=new e._view.grid.vo.StyleValueObject;if(a=o.cellStyle.clone(),a=o.setDefaultCellStyle(t,a),null!=t){var l=t.getLabel();"number"==typeof l&&(t.value=l,l+="",t.numeric=!0),l=l.replace(/<(?:.|\n)*?>/gi,""),t=null!=o.widthSize&&null!=o.widthSize[i]?o.widthSize[i]:o.getColumnWidth(i),a=o.pdf.splitTextToSize(l,t,o.getOptionsForCell(a)),n=(a=(a=1>(a=o.px2mm(1<a.length?a.length*(11+2*o.PADDING)-2*o.PADDING:11*a.length-o.PADDING)/s)?s:(a+1)*s)>o.pageHeight/2?(o.pageHeight-1)/2:a)>n?a:n}i++}o.heigthSize[r]=n,r++}},o.generateRow=function(){if(o._addingHeaderFooter)return!1;for(var t=s.getTimer(),r=0;r<o.BLOCK_SIZE;r++){if(o.pageIsFilled&&(o.addNewPage(),o._addingHeaderFooter))return!1;var n,a=0,l=o.PAGE_MARGIN,c=(a=!1,""),u=o.currentRowIdx-o.currentStartRowIdx<o.grid.FIRST_DATA_ROW&&o.currentRowIdx>o.grid.START_HEADERS_COLUMN?o.currentRowIdx-o.currentStartRowIdx:o.currentRowIdx,h=o.heigthSize[u];for(o.currentColIdx=o.currentStartColIdx;o.currentColIdx<o.currentColumnCount+o.currentStartColIdx;){if(n=(a=!i._options.OptionsManager.flatView&&o.currentColIdx==o.currentStartColIdx&&o.currentColIdx>o.grid.START_HEADERS_COLUMN)?o.grid.START_HEADERS_COLUMN:o.currentColIdx,o.allRowsGenerated()||!(o.rowsHeightSum+h<=o.pageHeight)){o.pageIsFilled=!0;break}if(.9*(l+(a=null!=o.widthSize&&null!=o.widthSize[n]?o.widthSize[n]:o.getColumnWidth(n)))>o.pageWidth)break;n=o.grid.gridLayout.getCell(u,n,!0,!0),"number"==typeof(c=s.nullOrUndefined(n)?"":n.getLabel())&&(n.value=c,c+="",n.numeric=!0);var d=(c=c.replace(/<(?:.|\n)*?>/gi,"")).match(/&#(\d{3,4});/gi);if(d)for(var A,p=0;p<d.length;p++)A=parseInt(d[p].substring(2,d[p].length-1)),c=c.replace(d[p],String.fromCharCode(A));d=[c],p=new e._view.grid.vo.StyleValueObject,null!=n&&n.isRowHeader?(p=o.rowHeaderCellStyle.clone(),p=o.setDefaultCellStyle(n,p),d=o.pdf.splitTextToSize(c,a,o.getOptionsForCell(p))):null!=n&&n.isColumnHeader?(p=o.columnHeaderCellStyle.clone(),p=o.setDefaultCellStyle(n,p),d=o.pdf.splitTextToSize(c,a,o.getOptionsForCell(p))):null!=n&&n.isFilterHeader?(p=o.filterHeaderCellStyle.clone(),p=o.setDefaultCellStyle(n,p)):null!=n&&n.isTotal&&""!=n.getLabel()?(p=o.totalCellStyle.clone(),p=o.setDefaultCellStyle(n,p)):(p=o.cellStyle.clone(),p=o.setDefaultCellStyle(n,p),d=o.pdf.splitTextToSize(c,a,o.getOptionsForCell(p)));var f=o.px2mm(1<(A=d.length)?d.length*(p.fontSize+2*o.PADDING)-2*o.PADDING:d.length*p.fontSize-o.PADDING);f>o.pageHeight/2&&(f=(o.pageHeight-20)/2,A=Math.floor(o.mm2px(f)/(p.fontSize+2*o.PADDING))),p.fontSize*=.7;var g=e._view.grid.vo.StyleValueObject.parseRGB(p.backgroundColor);if(o.pdf.setFillColor(g[0],g[1],g[2],0!=g[3]?void 0:0),g=e._view.grid.vo.StyleValueObject.parseRGB(p.borderColor),o.pdf.setDrawColor(g[0],g[1],g[2],0!=g[3]?void 0:0),g=e._view.grid.vo.StyleValueObject.parseRGB(p.color),o.pdf.setTextColor(g[0],g[1],g[2]),o.pdf.setFontStyle("bold"==p.fontWeight?"bold":"normal"),o.pdf.setFontSize(p.fontSize),o.pdf.rect(l,o.currentYPos,a,h,"FD"),f=o.currentYPos+(h-f)/2+o.PADDING,"right"==p.textAlign)if(1<d.length)for(r=0;r<A;r++)o.pdf.text(d[r],l+a-o.PADDING,f,null,null,"right"),f+=2*o.PADDING;else o.pdf.text(c,l+a-o.PADDING,f,null,null,"right");else if(1<d.length)for(r=0;r<A;r++)o.pdf.text(d[r],l+(p=!i._options.OptionsManager.classicView&&null!=n&&0<n.level?(n.level+1)*o.PADDING:o.PADDING),f),f+=2*o.PADDING;else o.pdf.text(c,l+(p=!i._options.OptionsManager.classicView&&null!=n&&0<n.level?(n.level+1)*o.PADDING:o.PADDING),f);o.currentColIdx++,l+=a}if(o.pageIsFilled||(o.currentYPos+=h,o.rowsHeightSum+=h,o.currentRowIdx++),o.allColumnsGenerated()&&o.allRowsGenerated())break}return o.BLOCK_SIZE=s.ThreadManager.adjustTaskSize(s.getTimer()-t,o.BLOCK_SIZE),o.allColumnsGenerated()&&o.allRowsGenerated()},o.allColumnsGenerated=function(){return o.currentStartColIdx+o.currentColumnCount>=o.dataWidth+o.grid.FIRST_DATA_COLUMN},o.allRowsGenerated=function(){return o.currentRowIdx>=o.dataHeight+o.grid.FIRST_DATA_ROW},o.addNewPage=function(){o.pdf.addPage(),o.pageNumber++,o.pageIsFilled=!1,o._addingHeaderFooter=!0,o.createHeaderAndFooter(o.exportOptions.header,o.exportOptions.footer,(function(){o._addingHeaderFooter=!1,o.addHeaderAndFooter()})),o.rowsHeightSum=0,1<o.pageNumber&&(o.shiftRows(),o.shiftColumns()),e.preloader(!0,i._labels.Labels.MESSAGE_PLEASE_WAIT,o.pageNumber+1+" "+i._labels.Labels.MESSAGE_PAGES_WERE_GENERATED,!0)},o.shiftRows=function(){o.allColumnsGenerated()&&!o.allRowsGenerated()?o.currentStartRowIdx=o.currentRowIdx-=o.grid.FIRST_DATA_ROW:o.currentRowIdx=o.currentStartRowIdx},o.shiftColumns=function(){o.allColumnsGenerated()?o.allRowsGenerated()||(o.currentStartColIdx=0,o.currentColIdx=0):o.currentColIdx=o.currentStartColIdx+=o.currentColumnCount,o.calculateColumnCount()},o.calculateColumnCount=function(){o.currentColumnCount=0;var e=o.currentStartColIdx,t=0,r=0;for(!i._options.OptionsManager.flatView&&o.currentStartColIdx>=o.grid.FIRST_DATA_COLUMN&&(r+=t=o.getColumnWidth(o.grid.START_HEADERS_COLUMN),o.currentColumnCount++,o.currentStartColIdx--,o.currentColIdx--);e<o.totalColumnCount;){if((t=o.getColumnWidth(e))>o.pageWidth/2-o.PAGE_MARGIN&&(o.widthSize[e]=t=(o.pageWidth+o.PAGE_MARGIN)/2),!((r+=t)<=o.pageWidth)){0==o.currentColumnCount&&(o.currentColumnCount=1);break}o.currentColumnCount++,e++}},o.onPdfGenerated=function(){0==o.exportOptions.filename.length&&(o.exportOptions.filename="pivot.pdf");var r=o.pdf.output();r=s.StringUtils.strToUint8Arr(r),n.ExportManager.save(r,o.exportOptions),o.clear(),i.PivotModel.getInstance().dispatch(new t._Event(e.PivotEvent.EXPORT_COMPLETE))},o.clear=function(){o.grid=null,o.exportOptions=null,o.pdf=null,o.dataWidth=0,o.dataHeight=0,o.totalColumnCount=0,o.totalRowCount=0,o.currentColumnCount=0,o.currentColIdx=0,o.currentStartColIdx=0,o.currentRowIdx=0,o.currentStartRowIdx=0,o.rowsHeightSum=0,o.currentYPos=0,o.pageIsFilled=!1,o.pageNumber=0,o.pageHeight=0,o.pageWidth=0,o.headerHeight=0,o.headerImage=null,o.footerHeight=0,o.footerImage=null},o.pixel2mm=function(e){return.264*e},o.mm2px=function(e){return 3.779*e},o.px2mm=function(e){return e/3.779},o.FONT_NAME="Helvetica",o.PAGE_MARGIN=15,o.pageIsFilled=!1,o.pageNumber=0,o.HEADER_FOOTER_MARGIN=5,o.headerHeight=0,o.footerHeight=0,o._addingHeaderFooter=!1,o.BLOCK_SIZE=20,o.PADDING=o.pixel2mm(8),o}(),n.ExportPDF=o}(n||(n={})),function(e){var i,n,o;i=e.model||(e.model={}),n=i._export||(i._export={}),o=function(){function o(){throw Error("Singleton")}return o.run=function(r,n,s,a){o.grid=r,o.dataWidth=s,o.dataHeight=a,o.exportOptions=n;try{o.exportToHTML()}catch(l){console.error("Export HTML error:",l),e.uialert(i._labels.Labels.MESSAGE_EXPORT_ERROR,i._labels.Labels.ERROR,e.AlertType.ERROR),e.preloader(!1),i.PivotModel.getInstance().dispatch(new t._Event(e.PivotEvent.EXPORT_COMPLETE)),o.clear()}},o.exportToHTML=function(){e.preloader(!0,i._labels.Labels.MESSAGE_EXPORT_PROGRESS),o.htmlString="",o.rowIdx=o.grid.START_TABLE_ROW,o.stylesList=[],s.ThreadManager.addTask(o.generateRow,null,null,o.onHTMLExportComplete)},o.generateStyle=function(){var t="",i=o.grid.gridLayout,n=i.find("#wdr-data-sheet");for(t=(t=(t=(t=(t=(t=(t=(t+=s.StringUtils.bind("body{{0}}\n",e._view.grid.vo.StyleValueObject.fromItemToString(r.UIElement.convert(i.element),["font-family"])))+s.StringUtils.bind(".grid{border-collapse:collapse;{0}border-top:1px solid #e9e9e9;border-left:1px solid #e9e9e9;}\n",e._view.grid.vo.StyleValueObject.fromItemToString(r.UIElement.convert(i.element),["font-family","font-size","color"])))+s.StringUtils.bind(".title{{0}}\n",e._view.grid.vo.StyleValueObject.fromClassToString(e._view.grid.vo.GridStyleName.TITLE,r.UIElement.convert(i.element))))+s.StringUtils.bind(".cell{{0}}\n",e._view.grid.vo.StyleValueObject.fromClassToString(e._view.grid.vo.GridStyleName.CELL,n)))+s.StringUtils.bind(".totalCell{{0}}\n",e._view.grid.vo.StyleValueObject.fromClassToString(e._view.grid.vo.GridStyleName.CELL+" "+e._view.grid.vo.GridStyleName.TOTAL,n)))+s.StringUtils.bind(".rowHeaderCell{{0}}\n",e._view.grid.vo.StyleValueObject.fromClassToString(e._view.grid.vo.GridStyleName.CELL+" "+e._view.grid.vo.GridStyleName.HEADER+" "+e._view.grid.vo.GridStyleName.HEADER_ROW,r.UIElement.convert(i.element))))+s.StringUtils.bind(".columnHeaderCell{{0}}\n",e._view.grid.vo.StyleValueObject.fromClassToString(e._view.grid.vo.GridStyleName.CELL+" "+e._view.grid.vo.GridStyleName.HEADER+" "+e._view.grid.vo.GridStyleName.HEADER_COLUMN,r.UIElement.convert(i.element))))+s.StringUtils.bind(".filterHeaderCell{{0}}\n",e._view.grid.vo.StyleValueObject.fromClassToString(e._view.grid.vo.GridStyleName.CELL+" "+e._view.grid.vo.GridStyleName.HEADER+" "+e._view.grid.vo.GridStyleName.FILTER_HEADER,r.UIElement.convert(i.element))),n=1;20>=n;n++)t+=s.StringUtils.bind(".level{0}{{1}}\n",n,e._view.grid.vo.StyleValueObject.fromClassToString(e._view.grid.vo.GridStyleName.HEADER_ROW+" "+e._view.grid.vo.GridStyleName.LEVEL+n,r.UIElement.convert(i.element),["padding-left"]));for(n=0;n<o.stylesList.length;n++)t+=s.StringUtils.bind(".{0}{{1}}\n",o.stylesList[n],e._view.grid.vo.StyleValueObject.fromClassToString(o.stylesList[n],r.UIElement.convert(i.element)));return t},o.appendStylesList=function(e){for(var t=0;t<e.length;t++)0>o.stylesList.indexOf(e[t])&&o.stylesList.push(e[t])},o.generateRow=function(){for(var e,t=s.getTimer(),i=Math.min(o.rowIdx+o.BLOCK_SIZE,o.dataHeight+o.grid.FIRST_DATA_ROW),r="";o.rowIdx<i;o.rowIdx++){r="";for(var n=o.grid.START_HEADERS_COLUMN;n<o.dataWidth+o.grid.FIRST_DATA_COLUMN;n++)if(r+="<td {0}>"+((e=o.grid.gridLayout.getCell(o.rowIdx,n,!0,!0))?e.getLabel():"")+"</td>",null==e)r=s.StringUtils.bind(r,"class='cell'");else{var a="",l="";e.isCustomized&&(l=e.style.getStyleString(),a=e.style.getCustomClassString(),o.appendStylesList(e.style.customStyleNames)),a=e.isRowHeader?a+" rowHeaderCell level"+e.level:e.isColumnHeader?a+" columnHeaderCell":e.isFilterHeader?a+" filterHeaderCell":e.isTotal&&""!=e.getLabel()?a+" totalCell":a+" cell",null!=e&&e.isFilterHeader&&(a+=" level"+e.level),""!=a.trim()&&(a="class='"+a.trim()+"'"),""!=(l+="width:"+o.grid.gridLayout.coords.getColWidth(n)+"px;").trim()&&(l="style='"+l.trim()+"'"),r=s.StringUtils.bind(r,a+" "+l)}o.rowsString+="<tr>"+r+"</tr>"}return o.BLOCK_SIZE=s.ThreadManager.adjustTaskSize(s.getTimer()-t,o.BLOCK_SIZE),o.showProgress(o.rowIdx),o.rowIdx>=o.dataHeight+o.grid.FIRST_DATA_ROW},o.showProgress=function(t){e.preloader(!0,i._labels.Labels.MESSAGE_EXPORT_PROGRESS,s.StringUtils.bind("{0}%",(t/(o.dataHeight+o.grid.FIRST_DATA_ROW)*100).toFixed(0)))},o.onHTMLExportComplete=function(){e.preloader(!1),o.saveHTMLExport(),o.clear()},o.saveHTMLExport=function(){0==o.exportOptions.filename.length&&(o.exportOptions.filename="pivotgrid.html");var r="";s.nullOrEmpty(o.exportOptions.header)||(r+=o.exportOptions.header.replace(/##PAGE-NUMBER##/gi,"").replace(/##CURRENT-DATE##/gi,(new Date).toLocaleString())),r+="<div class='title'>"+i._options.OptionsManager.gridTitle+"</div>",r+="<table class='grid'>"+o.rowsString+"</table>",s.nullOrEmpty(o.exportOptions.footer)||(r+=o.exportOptions.footer.replace(/##PAGE-NUMBER##/gi,"").replace(/##CURRENT-DATE##/gi,(new Date).toLocaleString())),o.htmlString="<!DOCTYPE html><html><head><meta charset='UTF-8'/>",o.htmlString+="<title>"+(s.nullOrEmpty(i._options.OptionsManager.gridTitle)?i._labels.Labels.DEFAULT_EXPORT_TITLE:i._options.OptionsManager.gridTitle)+"</title>",o.htmlString+="<style>"+o.generateStyle()+"</style></head>",n.ExportManager.save(o.htmlString+="<body>"+r+"</body></html>",o.exportOptions),i.PivotModel.getInstance().dispatch(new t._Event(e.PivotEvent.EXPORT_COMPLETE))},o.clear=function(){o.rowIdx=0,o.htmlString="",o.rowsString="",o.dataWidth=0,o.dataHeight=0,o.grid=null,o.exportOptions=null},o.rowIdx=0,o.htmlString="",o.rowsString="",o.BLOCK_SIZE=20,o}(),n.ExportHTML=o}(n||(n={})),function(e){var i,n,o;i=e.model||(e.model={}),n=i._export||(i._export={}),o=function(){function o(){throw Error("Singleton")}return o.run=function(r,n,s,a){o.grid=r,o.dataWidth=s,o.dataHeight=a,o.exportOptions=n;try{o.exportToXLS()}catch(l){console.error("Export XLS error:",l),e.uialert(i._labels.Labels.MESSAGE_EXPORT_ERROR,i._labels.Labels.ERROR,e.AlertType.ERROR),e.preloader(!1),i.PivotModel.getInstance().dispatch(new t._Event(e.PivotEvent.EXPORT_COMPLETE))}},o.exportToXLS=function(){e.preloader(!0,i._labels.Labels.MESSAGE_EXPORT_PROGRESS),o.rowIdx=o.grid.START_TABLE_ROW,o.xlsPadding=0,o.xlsDocument=new c.XLS;var t=s.nullOrEmpty(i._options.OptionsManager.gridTitle)?i._labels.Labels.DEFAULT_EXPORT_TITLE:i._options.OptionsManager.gridTitle.replace(/[^a-zA-Z\d\s\-|+@#$^&()_,.!]/g,"");30<(t=0<o.exportOptions.excelSheetName.length?o.exportOptions.excelSheetName:t).length&&(t=t.substr(0,27)+"..."),t=new c.XLSSheet(t),o.xlsDocument.sheets.push(t),o.getStyles(),o.addTitle(),o.addXLSCustomFields(),o.addFilters(),s.ThreadManager.addTask(o.generateXLSRow,null,null,(function(){return o.onXLSExportComplete()}))},o.getStyles=function(){var t=o.grid.gridLayout.element;o.cellStyle=e._view.grid.vo.StyleValueObject.fromClass(e._view.grid.vo.GridStyleName.CELL,r.UIElement.convert(t)),o.totalCellStyle=e._view.grid.vo.StyleValueObject.fromClass(e._view.grid.vo.GridStyleName.CELL+" "+e._view.grid.vo.GridStyleName.TOTAL,r.UIElement.convert(t)),o.rowHeaderCellStyle=e._view.grid.vo.StyleValueObject.fromClass(e._view.grid.vo.GridStyleName.CELL+" "+e._view.grid.vo.GridStyleName.HEADER+" "+e._view.grid.vo.GridStyleName.HEADER_ROW,r.UIElement.convert(t)),o.columnHeaderCellStyle=e._view.grid.vo.StyleValueObject.fromClass(e._view.grid.vo.GridStyleName.CELL+" "+e._view.grid.vo.GridStyleName.HEADER+" "+e._view.grid.vo.GridStyleName.HEADER_COLUMN,r.UIElement.convert(t)),o.filterHeaderCellStyle=e._view.grid.vo.StyleValueObject.fromClass(e._view.grid.vo.GridStyleName.CELL+" "+e._view.grid.vo.GridStyleName.HEADER+" "+e._view.grid.vo.GridStyleName.FILTER_HEADER,r.UIElement.convert(t));for(var i=1;20>=i;i++)o.rowHeaderLevelsCellStyle[i]=e._view.grid.vo.StyleValueObject.fromClass(e._view.grid.vo.GridStyleName.CELL+" "+e._view.grid.vo.GridStyleName.HEADER+" "+e._view.grid.vo.GridStyleName.HEADER_ROW+" "+e._view.grid.vo.GridStyleName.LEVEL+i,r.UIElement.convert(t))},o.onXLSExportComplete=function(){o.mergeTitleCells(),e.preloader(!1),o.saveXLSExport()},o.saveXLSExport=function(){o.rowIdx=o.grid.START_TABLE_ROW,0==o.exportOptions.filename.length&&(o.exportOptions.filename="pivot.xlsx"),n.ExportManager.save(o.xlsDocument.toUint8Array(),o.exportOptions),o.xlsDocument=null,o.exportOptions=null,i.PivotModel.getInstance().dispatch(new t._Event(e.PivotEvent.EXPORT_COMPLETE))},o.generateXLSRow=function(){for(var t=s.getTimer(),r=o.dataHeight+o.grid.FIRST_DATA_ROW;o.rowIdx<r;o.rowIdx++){if(100<s.getTimer()-t){if(100<(t=o.rowIdx/r*100))return!1;e.preloader(!0,i._labels.Labels.MESSAGE_EXPORT_PROGRESS,s.StringUtils.bind("{0}% ({1} rows)",t.toFixed(0),o.rowIdx.toString()));break}for(var n=o.grid.START_HEADERS_COLUMN;n<o.dataWidth+o.grid.FIRST_DATA_COLUMN;n++){var a,l=o.grid.gridLayout.getCell(o.rowIdx,n,!0,!0),u=s.nullOrUndefined(l)?"":l.getLabel();s.nullOrUndefined(l)||null!=l.measure&&(l.measure.type==e.data_.types.MeasureType.DATE?isNaN(l.value)||(a=o.convertToExcelDate(l.value)):l.measure.type==e.data_.types.MeasureType.DATETIME&&(isNaN(l.value)||(a=o.convertToExcelDateTime(l.value)))),"number"==typeof u&&(l.value=u,u+="",l.numeric=!0);var h=null!=l&&(l.isRowHeader||l.isColumnHeader);if(o.exportOptions.excelExportAll&&""==u&&null!=l&&null!=l.member&&(u=l.member.caption),""!=u.trim()||h){h=new e._view.grid.vo.StyleValueObject,h=null!=l&&l.isRowHeader?0<l.level&&o.rowHeaderLevelsCellStyle[l.level]?o.rowHeaderLevelsCellStyle[l.level].clone():o.rowHeaderCellStyle.clone():null!=l&&l.isColumnHeader?o.columnHeaderCellStyle.clone():null!=l&&l.isFilterHeader?o.filterHeaderCellStyle.clone():null!=l&&l.isTotal&&""!=l.getLabel()?o.totalCellStyle.clone():o.cellStyle.clone(),null!=l&&l.isCustomized&&((f=0<l.style.customStyleNames.length?e._view.grid.vo.StyleValueObject.fromClass(l.style.getCustomClassString()):e._view.grid.vo.StyleValueObject.fromString(l.style.getStyleString())).merge(h),h=f),h.color=h.color||"rgb(0,0,0)","rgb(33, 33, 33)"==h.backgroundColor&&(h.color="rgb(242, 242, 242)"),h.backgroundColor=h.backgroundColor||"rgb(255,255,255)",h.fontSize=h.fontSize?o.px2pt(h.fontSize):8;var d=new c.styles.fonts.XLSStyleFont("Tahoma",h.fontSize,s.StringUtils.fromRgbToHex(h.color));d.bold="bold"==h.fontWeight,d.italic=!1;var A=null,p=f=!1;if(l.numeric){if(null!=l.measure){p=""!=(A=l.measure.getFormat()).nullValue||p;var f=l.measure.aggregation==e.data_.consts.AggregationName.PERCENT||l.measure.aggregation==e.data_.consts.AggregationName.PERCENT_COLUMN||l.measure.aggregation==e.data_.consts.AggregationName.PERCENT_ROW||l.measure.aggregation==e.data_.consts.AggregationName.PERCENT_DIFFERENCE||l.measure.calculated&&-1<l.measure.formula.indexOf("percent"),g=A.toXLSFormatCode();(f||A.isPercent)&&((A=A.clone()).currencySymbol=""==A.currencySymbol?"%":A.currencySymbol,g=A.toXLSFormatCode()),A=new c.styles.format.XLSStyleFormat(""==g?0:-1,g)}}else null==l.measure||l.measure.type!=e.data_.types.MeasureType.DATE&&l.measure.type!=e.data_.types.MeasureType.DATETIME||(A=new c.styles.format.XLSStyleFormat(14,""));A&&o.xlsDocument.styleSheet.addFormat(A),d=new c.styles.XLSStyle(d,s.StringUtils.fromRgbToHex(h.backgroundColor),A,h.textAlign),!i._options.OptionsManager.classicView&&l&&l.isRowHeader&&0<l.level&&(d.textIndent=l.level),o.xlsDocument.styleSheet.addStyle(d),A=null!=l.measure?l.measure.getFormat():null,l.numeric?null==A||l.label!=A.infinityValue&&l.label!=A.divideByZeroValue?(a=null==A||!f&&"%"!=A.currencySymbol?l.value:l.value/100,o.xlsDocument.sheets[0].setCell(o.rowIdx-o.grid.START_TABLE_ROW+o.xlsPadding,n,isNaN(l.value)&&p?l.getLabel():a,d)):o.xlsDocument.sheets[0].setCell(o.rowIdx-o.grid.START_TABLE_ROW+o.xlsPadding,n,l.getLabel(),d):o.xlsDocument.sheets[0].setCell(o.rowIdx-o.grid.START_TABLE_ROW+o.xlsPadding,n,!l.isValue||null==l.measure||l.measure.type!=e.data_.types.MeasureType.DATE&&l.measure.type!=e.data_.types.MeasureType.DATETIME?l.isValue&&null!=l.measure&&l.measure.aggregation==e.data_.consts.AggregationName.NONE?l.value:u:a,d),null!=l&&(0==o.xlsDocument.sheets[0].getColumnWidth(n)&&(l=o.convertPixelsToWidth(o.grid.gridLayout.coords.getColWidth(n)),o.xlsDocument.sheets[0].setColumnWidth(n,l)),n!=o.grid.START_HEADERS_COLUMN||o.grid.gridLayout.coords.isRowHeightDefault(o.rowIdx)||(l=o.convertPixelsToPoints(o.grid.gridLayout.coords.getRowHeight(o.rowIdx)),o.xlsDocument.sheets[0].setRowHeight(o.rowIdx+o.xlsPadding,l)),u.length>h.width&&o.xlsDocument.sheets[0].setColumnWidth(n,o.convertPixelsToPoints(u.length+o.cellPadding)>o.convertPixelsToPoints(o.DEFAULT_CELL_WIDTH)?o.convertPixelsToPoints(o.DEFAULT_CELL_WIDTH):o.convertPixelsToPoints(u.length+o.cellPadding)))}}}return o.rowIdx>=r},o.convertToExcelDate=function(e){return s.DateFormat.isUTCFormat(i._options.OptionsManager.datePattern)||(e-=6e4*new Date(e).getTimezoneOffset()),e=-Date.parse("1899-12-30")+e,Math.floor(e/864e5)},o.convertToExcelDateTime=function(e){return s.DateFormat.isUTCFormat(i._options.OptionsManager.dateTimePattern)||(e-=6e4*new Date(e).getTimezoneOffset()),(-Date.parse("1899-12-30")+e)/864e5},o.px2pt=function(e){return.75*e},o.convertPixelsToPoints=function(t){return 0>=t?0:o.defaultExcelCellHeightPoints/o.defaultExcelCellHeightPixels*t*(o.defaultExcelCellHeightPixels/e._view.grid.sheet.GridCoords.CELL_HEIGHT)},o.convertPixelsToWidth=function(e){return 0>=e?0:((e-5)/7*100+.5)/100},o.addXLSCustomFields=function(){var t=i.report.CustomFieldsManager.customFields;if(0<t.length){var r=getComputedStyle(e._view.PivotView.stage.container.find("."+e._view.grid.vo.GridStyleName.HEADER_COLUMN).element),n=new c.styles.fonts.XLSStyleFont(r.fontFamily,parseInt(r.fontSize)-2,s.StringUtils.fromRgbToHex(r.color));n.bold="bold"===r.fontWeight,n.italic="italic"===r.fontStyle,(n=new c.styles.XLSStyle(n,s.StringUtils.fromRgbToHex(r.backgroundColor))).textAlign=r.textAlign,o.xlsDocument.styleSheet.addStyle(n),o.xlsDocument.sheets[0].setCell(o.xlsPadding,0,"Report Information",n),o.xlsDocument.sheets[0].setCell(o.xlsPadding,1,"",n),r=getComputedStyle(e._view.PivotView.stage.container.find("."+e._view.grid.vo.GridStyleName.CELL).element);var a=new c.styles.fonts.XLSStyleFont(r.fontFamily,parseInt(r.fontSize)-2,s.StringUtils.fromRgbToHex(r.color));for(a.bold="bold"===r.fontWeight,a.italic="italic"===r.fontStyle,(a=new c.styles.XLSStyle(a,s.StringUtils.fromRgbToHex(r.backgroundColor))).textAlign=r.textAlign,o.xlsDocument.styleSheet.addStyle(a),r=0;r<t.length;r++)o.xlsDocument.sheets[0].setCell(r+1+o.xlsPadding,0,String(t[r].name),n),o.xlsDocument.sheets[0].setCell(r+1+o.xlsPadding,1,String(t[r].value),n)}o.xlsPadding+=0==t.length?0:t.length+2},o.addTitle=function(){var t=i._options.OptionsManager.gridTitle;if(0!=t.length){var r=getComputedStyle(e._view.PivotView.stage.container.find("."+e._view.grid.vo.GridStyleName.TITLE).element),n=new c.styles.fonts.XLSStyleFont(r.fontFamily,parseInt(r.fontSize)-2,s.StringUtils.fromRgbToHex(r.color));n.bold="bold"===r.fontWeight,n.italic="italic"===r.fontStyle,(r=new c.styles.XLSStyle(n,s.StringUtils.fromRgbToHex(r.backgroundColor))).textAlign="center",o.xlsDocument.styleSheet.addStyle(r),o.xlsDocument.sheets[0].setCell(0,0,t,r),o.xlsPadding=1}},o.mergeTitleCells=function(){if(0<i._options.OptionsManager.gridTitle.length){var e=o.xlsDocument.sheets[0];e.mergeCells(0,0,Math.min(e.columnsCount,10))}},o.addFilters=function(){if(o.exportOptions.showFilters){var t,r=i.PivotModel.getInstance().cube_.slice_.allHierarchies(),n=[],a="",l=!0,u=getComputedStyle(e._view.PivotView.stage.container.find("."+e._view.grid.vo.GridStyleName.HEADER).element),h=new c.styles.fonts.XLSStyleFont(u.fontFamily,parseInt(u.fontSize)-2,s.StringUtils.fromRgbToHex(u.color));h.bold="bold"===u.fontWeight,h.italic="italic"===u.fontStyle,(h=new c.styles.XLSStyle(h,s.StringUtils.fromRgbToHex(u.backgroundColor))).textAlign=u.textAlign,o.xlsDocument.styleSheet.addStyle(h);var d=getComputedStyle(e._view.PivotView.stage.container.find("."+e._view.grid.vo.GridStyleName.CELL).element);(u=new c.styles.fonts.XLSStyleFont(d.fontFamily,parseInt(d.fontSize)-2,s.StringUtils.fromRgbToHex(d.color))).bold="bold"===d.fontWeight,u.italic="italic"===d.fontStyle,(u=new c.styles.XLSStyle(u,s.StringUtils.fromRgbToHex(d.backgroundColor))).textAlign=d.textAlign,o.xlsDocument.styleSheet.addStyle(u),d=o.xlsDocument.sheets[0],a=!1;for(var A=0,p=0;p<r.length;p++)if(a=(t=r.getItemAt(p)).dimension.type==e.data_.types.DimensionType.MD_DIMTYPE_TIME,t.hasFilter()){if(n.length=0,a)a=o.composeDateRange(t);else{for(var f=0;f<t.filterMembers.length;f++)a=t.filterMembers.getItemAt(f),n.push(a.caption);a=n.join(", ")}l&&(d.setCell(A+o.xlsPadding,0,"",h),d.setCell(A+o.xlsPadding,1,"Filters",h),A++),d.setCell(A+o.xlsPadding,0,t.caption,h),d.setCell(A+o.xlsPadding,1,a,u),A++,l=!1}if(i._options.OptionsManager.gridType==e._view.grid.GridType.FLAT)for(r=i.PivotModel.getInstance().cube_.slice_.measuresAll,p=0;p<r.length;p++)if((t=i.PivotModel.getInstance().cube_.slice_.measureToHierarchy(r.getItemAt(p))).hasFilter()){for(f=n.length=0;f<t.filterMembers.length;f++)a=t.filterMembers.getItemAt(f),n.push(a.caption);a=n.join(", "),l&&(d.setCell(A+o.xlsPadding,0,"",h),d.setCell(A+o.xlsPadding,1,"Filters",h),A++),d.setCell(A+o.xlsPadding,0,t.caption,h),d.setCell(A+o.xlsPadding,1,a,u),A++,l=!1}o.xlsPadding+=l?0:A+1}},o.composeDateRange=function(e){var t,i,r,n=!1,s=[];n=i="",null!=o.sortedMembers&&(o.sortedMembers.length=0),o.sortMembers(e.allMember);for(var a=o.composeFilteredMembers(e),l=!1,c=0;c<o.sortedMembers.length;c++)i=o.sortedMembers[c],n=c==o.sortedMembers.length-1,!l&&e.filterMembers.keyExists(i.uniqueName)&&(l=!0,t=i),l&&(e.filterMembers.keyExists(i.uniqueName)&&(r=i),-1<a.indexOf(i)&&!n||(r=null!=r?r:t,i=o.composeDate(t),n=r.uniqueName!=t.uniqueName?":"+o.composeDate(r,!0):"",r=t=null,l=!1,s.push(i+n)));return s.join(", ")},o.sortMembers=function(t){null==o.sortedMembers&&(o.sortedMembers=[]),t.isAll||o.sortedMembers.push(t);for(var i,r=(t=t.hierarchy_.sortChildren(t,!1,e.data_.consts.SortType.ASC)).length,n=0;n<r;n++)0<(i=t.getItemAt(n)).children.length?o.sortMembers(i):o.sortedMembers.push(i)},o.composeDate=function(t,i){void 0===i&&(i=!1);var r=t,n=[];for(n.push(t.caption);r&&r.uniqueName!=t.uniqueName&&!r.level.isLast&&0<r.children.length;)n.push(r.caption),r=(r=r.hierarchy_.sortChildren(r,!1,e.data_.consts.SortType.ASC)).getItemAt(i?r.length-1:0);for(r=t.parent;r&&!r.isAll;)n.unshift(r.caption),r=r.parent;return n.join("-")},o.composeFilteredMembers=function(e){var t=[];e=e.filterMembers;for(var i,r,n=0;n<e.length;n++){i=e.getItemAt(n),t.push(i),r=i.descendants;for(var o=0;o<r.length;o++)t.push(r.getItemAt(o));if(!(i.parent&&!i.parent.isAll&&-1<t.indexOf(i.parent)))for(;i.parent&&!i.parent.isAll;)t.push(i=i.parent)}return t},o.rowIdx=0,o.xlsPadding=0,o.cellPadding=3,o.DEFAULT_CELL_WIDTH=100,o.rowHeaderLevelsCellStyle=[],o.defaultExcelCellHeightPoints=14.3,o.defaultExcelCellHeightPixels=38,o}(),n.ExportXLS=o}(n||(n={})),function(e){var i;!function(r){var n=function(){function n(){}return n.exportTo=function(t,o,a){void 0===o&&(o=null),void 0===a&&(a=null),n._exportInProgress?this.delayedExports.push({type:t,options:o,callback:a}):(t=t.toLowerCase(),t=c.validType(t)?t:c.PDF,i.PivotModel.getInstance().addEventListener(e.PivotEvent.EXPORT_COMPLETE,n.exportCompleteHandler),n._exportInProgress=!0,n.callbackHandler=a,s.nullOrUndefined(o)&&(o=new r.ExportOptions),o.type=t,t=new l(t,o,a),i.PivotModel.getInstance().dispatch(t))},n.stopExport=function(){e.preloader(!1),i.PivotModel.getInstance().removeEventListener(e.PivotEvent.EXPORT_COMPLETE,n.exportCompleteHandler),n._exportInProgress=!1},n.onExportCompleted=function(e){n.stopExport(),0<n.delayedExports.length&&(e=n.delayedExports.shift(),this.exportTo(e.type,e.options,e.callback))},n.save=function(e,t){switch(t.destinationType.toLowerCase()){case i.report.DestinationType.FILE:n.saveToFile(e,t);break;case i.report.DestinationType.SERVER:n.saveToServer(e,t);break;case i.report.DestinationType.BINARY:n.saveToBinary(e,t);break;case i.report.DestinationType.PLAIN:n.saveToPlain(e,t);break;default:n.saveToFile(e,t)}},n.saveToServer=function(t,r){switch(r.type){case c.HTML:case c.EXCEL:case c.PDF:n.saveToServerAsBinary(t,r);break;default:var o=i.XSSCheck.validate(r.type);e.uialert("Unknown type of export: '"+o+"'",i._labels.Labels.ERROR)}},n.saveToFile=function(t,o){var s;switch(o.type){case c.HTML:s="text/html;charset=utf-8",o.filename=n.appendFileExtension(o.filename,".html");break;case c.EXCEL:s="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",o.filename=n.appendFileExtension(o.filename,".xlsx");break;case c.PDF:s="application/pdf",o.filename=n.appendFileExtension(o.filename,".pdf");break;default:s="text/plain;charset=utf-8"}var a=[t];try{var l=new Blob(a,{type:s});savingAs(l,o.filename),n.triggerCallback({data:t,fielname:o.filename,type:o.type})}catch(r){e.uialert(i._labels.Labels.MESSAGE_CANT_SAVE_FILE,i._labels.Labels.ERROR,e.AlertType.ERROR),n.triggerCallback(null,{message:i._labels.Labels.MESSAGE_CANT_SAVE_FILE})}},n.appendFileExtension=function(e,t){return e.indexOf(t)!=e.length-t.length&&(e+=t),e},n.saveToServerAsBinary=function(r,a){var l=new s.Timer(500);l.addEventListener(s.TimerEvent.TIMER,(function(t){e.preloader(!0,i._labels.Labels.MESSAGE_UPLOADING,(l.currentCount/10).toString()+" sec")}));var c=new o.URLStream;c.addEventListener(t._Event.ERROR,(function(t){e.uialert(i._labels.Labels.MESSAGE_CANT_SAVE_FILE,i._labels.Labels.ERROR),l.stop(),e.preloader(!1),n.triggerCallback(null,{message:i._labels.Labels.MESSAGE_CANT_SAVE_FILE})})),c.addEventListener(t._Event.COMPLETE,(function(){l.stop(),e.preloader(!1),n.triggerCallback({data:r,fielname:a.filename,type:a.type,response:c.response})}));var u=new Blob([r],{type:"application/octet-binary"}),h=new FormData;for(var d in h.append("filedata",u,a.filename),a.extendedParameters)h.append(d,a.extendedParameters[d]);c.requestMethod=o.URLRequestMethod.POST,c.data=h,c.contentType=!1,c.load(a.url),l.start()},n.saveToBinary=function(e,t){},n.saveToPlain=function(e,t){},n.triggerCallback=function(e,t){void 0===e&&(e=null),void 0===t&&(t=null),null!=n.callbackHandler&&n.callbackHandler.call(null,e,t)},n._exportInProgress=!1,n.delayedExports=[],n.exportCompleteHandler=function(e){return n.onExportCompleted(e)},n}();r.ExportManager=n;var l=function(t){function i(i,r,n){var o=t.call(this,e.PivotEvent.EXPORT)||this;return o.exportType=i,o.exportOptions=r,o.callbackHandler=n,o}return a(i,t),i}(t._Event);r.ExportEvent=l;var c=function(){function e(){}return e.validType=function(t){return t===e.EXCEL||t===e.HTML||t===e.PDF},e.EXCEL="excel",e.HTML="html",e.PDF="pdf",e}();r.ExportType=c}((i=e.model||(e.model={}))._export||(i._export={}))}(n||(n={})),function(e){var t;!function(t){var i=function(){function i(i){void 0===i&&(i="file"),this.showHeaders=!0,this.destinationType=e.model.report.DestinationType.FILE,this.filename="",this.url="()",this.type=t.ExportType.HTML,this.pageOrientation="portrait",this.excelSheetName="",this.showFilters=this.excelExportAll=!1,this.extendedParameters={},this.destinationType=i}return i.fromObject=function(t){var r=new i;return s.nullOrUndefined(t)||(t.hasOwnProperty("showHeaders")&&(r.showHeaders="true"===t.showHeaders||!0===t.showHeaders),t.hasOwnProperty("filename")&&(r.filename=t.filename),t.hasOwnProperty("url")&&(r.url=t.url),t.hasOwnProperty("excelSheetName")&&(r.excelSheetName=t.excelSheetName),t.hasOwnProperty("excelExportAll")&&(r.excelExportAll=t.excelExportAll),!t.hasOwnProperty("pageOrientation")||"portrait"!==t.pageOrientation&&"landscape"!==t.pageOrientation||(r.pageOrientation=t.pageOrientation.toLowerCase()),t.hasOwnProperty("destinationType")&&e.model.report.DestinationType.validType(t.destinationType.toString().toLowerCase())&&(r.destinationType=t.destinationType.toString().toLowerCase()),null!=t.showFilters&&(r.showFilters=t.showFilters),null!=t.extendedParameters&&(r.extendedParameters=t.extendedParameters),null!=t.header&&(r.header=t.header),null!=t.footer&&(r.footer=t.footer)),r},i}();t.ExportOptions=i}((t=e.model||(e.model={}))._export||(t._export={}))}(n||(n={})),function(e){!function(e){!function(e){var t=function(){function t(){}return t.getFormat=function(e){return t.formats.keyExists(e)?t.formats.getItem(e):""!=e&&t.formats.keyExists("")?t.formats.getItem(""):t.getDefaultFormat()},t.setFormat=function(i){var r=e.vo.FormatValueObject.fromObject(i);if(t.cleanFormats.addItem(r.name,r),null!=t.defaultFormat)r.mergeDefaults(t.defaultFormat);else if(""==r.name)for(t.defaultFormat=i,i=0;i<t.formats.length;i++)t.formats.getItemAt(i).mergeDefaults(t.defaultFormat);t.formats.addItem(r.name,r)},t.getAllFormats=function(){return t.cleanFormats.slice()},t.clear=function(){t.formats=new s.AssociativeArray,t.cleanFormats=new s.AssociativeArray,t.defaultFormat=null},t.getDefaultFormat=function(){return new e.vo.FormatValueObject},t.formatExists=function(e){return t.formats.keyExists(e)},t.dispose=function(){t.formats=null,t.cleanFormats=null,t.defaultFormat=null},t.formats=new s.AssociativeArray,t.cleanFormats=new s.AssociativeArray,t.defaultFormat=null,t}();e.FormatManager=t}(e.format||(e.format={}))}(e.model||(e.model={}))}(n||(n={})),function(e){!function(e){var t,i,r;i=(t=e.format||(e.format={})).vo||(t.vo={}),r=function(){function t(e){void 0===e&&(e=""),this.name="",this._params={},this._defaults={thousandsSeparator:" ",decimalSeparator:".",decimalPlaces:-1,maxDecimalPlaces:-1,maxSymbols:20,currencySymbol:"",currencySymbolAlign:"left",nullValue:"",infinityValue:"Infinity",divideByZeroValue:"Infinity",textAlign:"",isPercent:!1,isCount:!1},this.name=e}return Object.defineProperty(t.prototype,"params",{get:function(){return this._params},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"thousandsSeparator",{get:function(){return null!=this._params.thousandsSeparator?this._params.thousandsSeparator:this._defaults.thousandsSeparator},set:function(e){this._params.thousandsSeparator=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"decimalSeparator",{get:function(){return null!=this._params.decimalSeparator?this._params.decimalSeparator:this._defaults.decimalSeparator},set:function(e){this._params.decimalSeparator=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"decimalPlaces",{get:function(){return null!=this._params.decimalPlaces?this._params.decimalPlaces:this._defaults.decimalPlaces},set:function(e){this._params.decimalPlaces=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxDecimalPlaces",{get:function(){return null!=this._params.maxDecimalPlaces?this._params.maxDecimalPlaces:this._defaults.maxDecimalPlaces},set:function(e){this._params.maxDecimalPlaces=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxSymbols",{get:function(){return null!=this._params.maxSymbols?this._params.maxSymbols:this._defaults.maxSymbols},set:function(e){this._params.maxSymbols=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currencySymbol",{get:function(){return null!=this._params.currencySymbol?this._params.currencySymbol:this._defaults.currencySymbol},set:function(e){this._params.currencySymbol=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currencySymbolAlign",{get:function(){return null!=this._params.currencySymbolAlign?this._params.currencySymbolAlign:this._defaults.currencySymbolAlign},set:function(e){this._params.currencySymbolAlign=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"nullValue",{get:function(){return null!=this._params.nullValue?this._params.nullValue:this._defaults.nullValue},set:function(e){this._params.nullValue=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"infinityValue",{get:function(){return null!=this._params.infinityValue?this._params.infinityValue:this._defaults.infinityValue},set:function(e){this._params.infinityValue=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"divideByZeroValue",{get:function(){return null!=this._params.divideByZeroValue?this._params.divideByZeroValue:this._defaults.divideByZeroValue},set:function(e){this._params.divideByZeroValue=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"textAlign",{get:function(){return null!=this._params.textAlign?this._params.textAlign:this._defaults.textAlign},set:function(e){this._params.textAlign=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isPercent",{get:function(){return null!=this._params.isPercent?this._params.isPercent:this._defaults.isPercent},set:function(e){this._params.isPercent=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isCount",{get:function(){return null!=this._params.isCount?this._params.isCount:this._defaults.isCount},set:function(e){this._params.isCount=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currencySymbolLength",{get:function(){return 1<this.currencySymbol.length&&"&"==this.currencySymbol.charAt(0)&&";"==this.currencySymbol.charAt(this.currencySymbol.length-1)?1:this.currencySymbol.length},set:function(e){},enumerable:!0,configurable:!0}),t.prototype.applyFormat=function(e){return s.NumberFormatter.format(e,this)},t.prototype.toXLSFormatCode=function(){var e,t="";if(-1==this.decimalPlaces&&""==this.currencySymbol)return"";if("%"==this.currencySymbol){var i=-1==this.decimalPlaces?0:this.decimalPlaces;for(t=0<i?"0.":"0",e=0;e<i;e++)t+="0";return t+this.currencySymbol}if(t=""!=this.thousandsSeparator?"#,##0":"###0",0<this.decimalPlaces)for(t+=".",e=0;e<this.decimalPlaces;e++)t+="0";return""!=this.currencySymbol&&(t="left"==this.currencySymbolAlign?"\\"+this.currencySymbol+t:t+"\\"+this.currencySymbol),t},t.prototype.toObject=function(e){void 0===e&&(e=!1);var t={};if(t.name=this.name,e)t.thousandsSeparator=this.thousandsSeparator,t.decimalSeparator=this.decimalSeparator,t.decimalPlaces=this.decimalPlaces,t.maxDecimalPlaces=this.maxDecimalPlaces,t.maxSymbols=this.maxSymbols,t.currencySymbol=this.currencySymbol,t.currencySymbolAlign=this.currencySymbolAlign,t.nullValue=this.nullValue,t.infinityValue=this.infinityValue,t.divideByZeroValue=this.divideByZeroValue,t.textAlign=""!=this.textAlign?this.textAlign:"right",t.isPercent=this.isPercent,t.isCount=this.isCount;else for(var i in this._params)t[i]="textAlign"==i?""==this.textAlign?"right":this.textAlign:this._params[i];return t},t.fromObject=function(i){var r=new t;return null!=i.name&&(r.name=i.name),null!=i.thousandsSeparator&&e.XSSCheck.valid(i.thousandsSeparator)&&(r.thousandsSeparator=e.XSSCheck.validate(i.thousandsSeparator,!0)),null!=i.decimalSeparator&&e.XSSCheck.valid(i.decimalSeparator)&&(r.decimalSeparator=e.XSSCheck.validate(i.decimalSeparator)),null!=i.decimalPlaces&&-1<parseInt(i.decimalPlaces)&&(r.decimalPlaces=isNaN(parseInt(i.decimalPlaces))?-1:parseInt(i.decimalPlaces)),null!=i.maxDecimalPlaces&&-1<parseInt(i.maxDecimalPlaces)&&(r.maxDecimalPlaces=i.maxDecimalPlaces),null!=i.maxSymbols&&1<parseInt(i.maxSymbols)&&(r.maxSymbols=i.maxSymbols),null!=i.currencySymbol&&e.XSSCheck.valid(i.currencySymbol)&&(r.currencySymbol=e.XSSCheck.validate(i.currencySymbol,!0)),null!=i.currencySymbolAlign&&e.XSSCheck.valid(i.currencySymbolAlign)&&(r.currencySymbolAlign=e.XSSCheck.validate(i.currencySymbolAlign)),null!=i.nullValue&&e.XSSCheck.valid(i.nullValue)&&(r.nullValue=e.XSSCheck.validate(i.nullValue)),null!=i.infinityValue&&e.XSSCheck.valid(i.infinityValue)&&(r.infinityValue=e.XSSCheck.validate(i.infinityValue)),null!=i.divideByZeroValue&&e.XSSCheck.valid(i.divideByZeroValue)&&(r.divideByZeroValue=e.XSSCheck.validate(i.divideByZeroValue)),null!=i.textAlign&&e.XSSCheck.valid(i.textAlign)&&(r.textAlign=e.XSSCheck.validate(i.textAlign)),null!=i.isPercent&&(r.isPercent=1==i.isPercent),null!=i.isCount&&(r.isCount=1==i.isCount),r},t.prototype.clone=function(){var e=new t;e.name=this.name,this._params.hasOwnProperty("thousandsSeparator")&&(e.thousandsSeparator=this.thousandsSeparator),this._params.hasOwnProperty("decimalSeparator")&&(e.decimalSeparator=this.decimalSeparator),this._params.hasOwnProperty("decimalPlaces")&&(e.decimalPlaces=this.decimalPlaces),this._params.hasOwnProperty("maxDecimalPlaces")&&(e.maxDecimalPlaces=this.maxDecimalPlaces),this._params.hasOwnProperty("maxSymbols")&&(e.maxSymbols=this.maxSymbols),this._params.hasOwnProperty("currencySymbol")&&(e.currencySymbol=this.currencySymbol),this._params.hasOwnProperty("currencySymbolAlign")&&(e.currencySymbolAlign=this.currencySymbolAlign),this._params.hasOwnProperty("nullValue")&&(e.nullValue=this.nullValue),this._params.hasOwnProperty("infinityValue")&&(e.infinityValue=this.infinityValue),this._params.hasOwnProperty("divideByZeroValue")&&(e.divideByZeroValue=this.divideByZeroValue),this._params.hasOwnProperty("textAlign")&&(e.textAlign=this.textAlign),this._params.hasOwnProperty("isPercent")&&(e.isPercent=this.isPercent),this._params.hasOwnProperty("isPercent")&&(e.isCount=this.isCount);var i,r={};for(i in this._defaults)r[i]=this._defaults[i];return e._defaults=r,e},t.prototype.mergeDefaults=function(e){for(var t in e)this._defaults[t]=e[t]},t}(),i.FormatValueObject=r}(e.model||(e.model={}))}(n||(n={})),function(e){var t=function(){function t(){}return t.format=function(i,r,o,s,a){if(void 0===r&&(r=null),void 0===o&&(o=!1),void 0===s&&(s=!1),void 0===a&&(a=-1),null==r&&(r=t.defaultFormatVO),isNaN(i)||e.nullOrUndefined(i))return r.nullValue;if(1/0==i)return r.infinityValue;if(i==n.data_.consts.DataConsts.DIVIDE_BY_ZERO)return r.divideByZeroValue;o||(o=r.isCount),i=r.isPercent&&"%"!=r.currencySymbol?100*i:i;var l=s?"%":r.currencySymbol;l=!s&&r.isPercent&&"%"!=r.currencySymbol?"%":l,r.currencySymbolAlign=r.isPercent?"right":r.currencySymbolAlign;var c=o?0:r.decimalPlaces,u="";if(0==i&&0>c)return u="0",!o&&0<l.length&&(u=t.formatCurrency(u,l,r.currencySymbolAlign,s)),u;if(u=0>i?r.maxSymbols-1:r.maxSymbols,1<r.thousandsSeparator.length&&!e.StringUtils.isEntity(r.thousandsSeparator)&&(u-=Math.floor(u/3)*r.thousandsSeparator.length),!o&&0<r.currencySymbolLength&&(u-=r.currencySymbolLength),r.thousandsSeparator="&#39;"==r.thousandsSeparator?"'":r.thousandsSeparator,1<(h=i.toString().split(".")).length&&10<=h[1].length){for(var h,d=0,A=0,p=(h=h[1]).length-2;0<=p;p--)if("9"!=h.charAt(p)&&"0"!=h.charAt(p)||h.charAt(p)!=h.charAt(p+1)){if(!(4>d)){A=p+1;break}d=0}else d++;4<=d&&(h=Math.pow(10,A),i=Math.round(i*h)/h)}return h=4<c?Math.pow(10,u-c-1):Math.pow(10,u-4),d=Math.pow(10,-(u-4)),-1<a&&(c=a),Math.abs(i)>h?(a=Math.round(Math.log(i)/Math.LN10),a=Math.round(Math.log(a)/Math.LN10+1),20<(u=0>i?r.maxSymbols-a-5:r.maxSymbols-a-4)&&(u=20),1>u&&(u=1),u=i.toExponential(u)):Math.abs(i)<d&&0>c?(a=Math.round(Math.log(i)/Math.LN10),20<(u=u-4-(a=Math.round(Math.log(-a)/Math.LN10+1)))&&(u=20),1>u&&(u=1),u=i.toExponential(u)):0>c?(a=1,1<Math.abs(i)?(a=Math.round(Math.log(Math.abs(i))/Math.LN10),a=Math.pow(10,u-a-2)):a=Math.pow(10,u-2),u=(Math.round(Math.abs(i)*a)/a).toString(),0>i&&(u="-"+u)):u=0==c?Math.round(i).toString():i.toFixed(c),-1==u.indexOf("e")&&(u=u.split("."),a=t.formatThousands(u[0],r),h=1<u.length?u[1]:"",(1<u.length||0<c)&&0!=r.maxDecimalPlaces?(-1<r.maxDecimalPlaces&&h.length>r.maxDecimalPlaces&&(h=h.substr(0,r.maxDecimalPlaces)),u=a+r.decimalSeparator+h):u=a),!o&&0<l.length&&(u=t.formatCurrency(u,l,r.currencySymbolAlign,s)),t.checkNegativeZero(u,i)},t.formatThousands=function(e,i){void 0===i&&(i=null);var r=0>parseFloat(e);r&&(e=e.substr(1));var o=e;if(3<e.length){null==i&&(null==t.defaultFormatVO&&(t.defaultFormatVO=new n.model.format.vo.FormatValueObject("")),i=t.defaultFormatVO),o=Math.floor(e.length/3);var s=[],a=e.length%3;0<a&&s.push(e.substr(0,a));for(var l=0;l<o;l++)s.push(e.substr(a+3*l,3));o=s.join(i.thousandsSeparator)}return r&&(o="-"+o),o},t.formatCurrency=function(e,t,i,r){return"left"!=i||r?e+t:0==e.indexOf("-")?"-"+t+e.substr(1):t+e},t.checkNegativeZero=function(e,t){return 0<=t||-1==e.indexOf("-")||-1<e.search("[1-9]+")?e:e.replace("-","")},t.defaultFormatVO=new n.model.format.vo.FormatValueObject,t}();e.NumberFormatter=t}(s||(s={})),function(e){!function(e){var t=function(){function t(){}return t.getStructureLoader=function(t){var i=null;switch(t.dataSourceType){case e.consts.DataSourceType.CSV:i=1==t.embedded?new e.csv.CSVEmbeddedLoader:new e.csv.CSVLoader;break;case e.consts.DataSourceType.JSON:i=new e.json.JSONLoader}return i},t}();e.StructureLoaderFactory=t}(e.data_||(e.data_={}))}(n||(n={})),function(e){!function(e){e.Query=function(){this.mdx=this.type="",this.axisName=e.consts.AxisName.ROWS_AXIS,this.tuple=[]}}(e.data_||(e.data_={}))}(n||(n={})),function(e){!function(e){var t=function(){function e(){}return e.MEMBERS="members",e.ASCENDANTS="ascendants",e.DESCENDANTS="descendants",e.SIBLINGS="siblings",e.SEARCH="search",e}();e.MembersLoaderState=t}(e.data_||(e.data_={}))}(n||(n={})),function(e){!function(e){var i=function(){function e(){}return e.BEFORE_STRUCTURE_LOADING="BEFORE_STRUCTURE_LOADING",e.STRUCTURE_CONNECTED="STRUCTURE_CONNECTED",e.STRUCTURE_LOADED="STRUCTURE_LOADED",e.STRUCTURE_CANCELLED="STRUCTURE_CANCELLED",e.STRUCTURE_LOADING_FAILED="STRUCTURE_LOADING_FAILED",e.BEFORE_QUERY="BEFORE_QUERY",e.QUERY_COMPLETE="QUERY_COMPLETE",e.QUERY_ERROR="QUERY_ERROR",e}();e.DataEvent=i;var r=function(e){function t(t){var r=e.call(this,i.BEFORE_QUERY)||this;return r.queryType=t,r}return a(t,e),t}(t._Event);e.BeforeQueryEvent=r,r=function(t){function r(r){var n=t.call(this,i.QUERY_COMPLETE)||this;return n.queryType=e.consts.QueryType.SELECT,n.queryType=r,n}return a(r,t),r}(t._Event),e.QueryCompleteEvent=r}(e.data_||(e.data_={}))}(n||(n={})),function(e){var i,r,n;r=(i=e.data_||(e.data_={})).dataprovider_||(i.dataprovider_={}),n=function(t){function o(){var e=t.call(this)||this;return e.rowTuples=[],e._rowTuples=[],e.columnTuples=[],e._columnTuples=[],e.rowDepths=[],e.rowType=[],e.columnDepths=[],e._name="",e.queryCompleteHandler=function(){return e.onQueryComplete()},e.beforeQueryHandler=function(t){return e.onBeforeQuery(t)},e.structureLoadedHandler=function(t){return e.onStructureLoaded()},e._rows=new s.AssociativeArray,e._rowLevels=[],e._columnLevels=[],e._columns=new s.AssociativeArray,e._pages=new s.AssociativeArray,e._measures=new s.AssociativeArray,e._measuresPosition=0,e._dataLoaded=!1,e._rowMaxDepth=0,e._columnMaxDepth=0,e._measureDepth=0,e.queryType=i.consts.QueryType.SELECT,e._showUnexpandedDataAlert=!1,e._fillRowTuplesStart=0,o.counter++,e.cube_=i.Cube.getInstance(),e}return a(o,t),o.getInstance=function(){return null==o.instance&&((o.instance=new o)._name="grid"+o.counter),o.instance},o.prototype.addEventListeners=function(){this.cube_.addEventListener(i.DataEvent.QUERY_COMPLETE,this.queryCompleteHandler,1),this.cube_.addEventListener(i.DataEvent.BEFORE_QUERY,this.beforeQueryHandler),this.cube_.addEventListener(i.DataEvent.STRUCTURE_LOADED,this.structureLoadedHandler,1)},o.prototype.removeEventListeners=function(){this.cube_.removeEventListener(i.DataEvent.QUERY_COMPLETE,this.queryCompleteHandler),this.cube_.removeEventListener(i.DataEvent.BEFORE_QUERY,this.beforeQueryHandler),this.cube_.removeEventListener(i.DataEvent.STRUCTURE_LOADED,this.structureLoadedHandler)},Object.defineProperty(o.prototype,"dataStorage",{get:function(){return null!=this._dataStorage?this._dataStorage:this.cube_.localDataStorage},set:function(e){this._dataStorage=e},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"slice",{get:function(){return null!=this._slice?this._slice:this.cube_.slice_},set:function(e){this._slice=e},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"isClassic",{get:function(){return e.model._options.OptionsManager.classicView},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"rows",{get:function(){return this._rows},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"rowsOnly",{get:function(){return this.slice.rowsOnly},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"rowLevels",{get:function(){return this._rowLevels},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"columnLevels",{get:function(){return this._columnLevels},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"columns",{get:function(){return this._columns},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"columnsOnly",{get:function(){return this.slice.columnsOnly},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"pages",{get:function(){return this._pages},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"measures",{get:function(){return this._measures},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"measuresPosition",{get:function(){return this._measuresPosition},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"dataLoaded",{get:function(){return this.slice&&this._dataLoaded},set:function(e){this._dataLoaded=e},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"rowMaxDepth",{get:function(){return this._rowMaxDepth},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"columnMaxDepth",{get:function(){return this._columnMaxDepth},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"measureDepth",{get:function(){return this._measureDepth},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"rowAxis",{get:function(){return this._rowAxis},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"columnAxis",{get:function(){return this._columnAxis},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"rowCount",{get:function(){return this._rowAxis?this._rowAxis.hasMeasures?this._rowAxis.hierarchies.length-1:this._rowAxis.hierarchies.length:0},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"columnCount",{get:function(){return this._columnAxis?this._columnAxis.hasMeasures?this._columnAxis.hierarchies.length-1:this._columnAxis.hierarchies.length:0},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"multiMeasures",{get:function(){return 1<this._measures.length||this._columnAxis.hasMeasures&&e.model._options.OptionsManager.showExtraTotalLabels},set:function(e){},enumerable:!0,configurable:!0}),o.prototype.getExpandedRows=function(){return this._rowAxis&&!this.isAllExpanded()?this._rowAxis.expandedTuples:[]},o.prototype.setExpandedRows=function(e){this._rowAxis&&!this.isAllExpanded()&&(this._rowAxis.expandedTuples=e)},o.prototype.getExpandedColumns=function(){return this._columnAxis&&!this.isAllExpanded()?this._columnAxis.expandedTuples:[]},o.prototype.setExpandedColumns=function(e){this._columnAxis&&!this.isAllExpanded()&&(this._columnAxis.expandedTuples=e)},o.prototype.getCollapsedRows=function(){return this._rowAxis&&this.isAllExpanded()?this._rowAxis.expandedTuples:[]},o.prototype.setCollapsedRows=function(e){this._rowAxis&&this.isAllExpanded()&&(this._rowAxis.expandedTuples=e)},o.prototype.getCollapsedColumns=function(){return this._columnAxis&&this.isAllExpanded()?this._columnAxis.expandedTuples:[]},o.prototype.setCollapsedColumns=function(e){this._columnAxis&&this.isAllExpanded()&&(this._columnAxis.expandedTuples=e)},o.prototype.getDrilledDownRows=function(){return this._rowAxis&&!this.isAllDrilled()?this._rowAxis.drilledTuples:[]},o.prototype.setDrilledDownRows=function(e){this._rowAxis&&!this.isAllDrilled()&&(this._rowAxis.drilledTuples=e)},o.prototype.getDrilledDownColumns=function(){return this._columnAxis&&!this.isAllDrilled()?this._columnAxis.drilledTuples:[]},o.prototype.setDrilledDownColumns=function(e){this._columnAxis&&!this.isAllDrilled()&&(this._columnAxis.drilledTuples=e)},o.prototype.getDrilledUpRows=function(){return this._rowAxis&&this.isAllDrilled()?this._rowAxis.drilledTuples:[]},o.prototype.setDrilledUpRows=function(e){this._rowAxis&&this.isAllDrilled()&&(this._rowAxis.drilledTuples=e)},o.prototype.getDrilledUpColumns=function(){return this._columnAxis&&this.isAllDrilled()?this._columnAxis.drilledTuples:[]},o.prototype.setDrilledUpColumns=function(e){this._columnAxis&&this.isAllDrilled()&&(this._columnAxis.drilledTuples=e)},o.prototype.isAllDrilled=function(){return this.slice.drillAll},o.prototype.isAllExpanded=function(){return this.slice.expandAll},Object.defineProperty(o.prototype,"rowSortType",{get:function(){var e=i.consts.SortType.UNSORTED;return this._rowAxis&&(e=this._rowAxis.sortType)==i.consts.SortType.UNSORTED&&this._rowAxis.totalSortMeasure&&this._rowAxis.totalSortType!=i.consts.SortType.UNSORTED&&(e=this._rowAxis.totalSortType),e},set:function(e){this._rowAxis&&(this._rowAxis.sortType=e)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"rowSortTuple",{get:function(){var e;return this._rowAxis&&(e=this._rowAxis.sortTuple,this._rowAxis.sortType==i.consts.SortType.UNSORTED&&this._rowAxis.totalSortMeasure&&this._rowAxis.totalSortType!=i.consts.SortType.UNSORTED&&(e=[])),e},set:function(e){this._rowAxis&&(this._rowAxis.sortTuple=e)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"rowSortMeasure",{get:function(){var e;return this._rowAxis&&(e=this._rowAxis.sortMeasure,this._rowAxis.sortType==i.consts.SortType.UNSORTED&&this._rowAxis.totalSortMeasure&&this._rowAxis.totalSortType!=i.consts.SortType.UNSORTED&&(e=this._rowAxis.totalSortMeasure)),e},set:function(e){this._rowAxis&&(this._rowAxis.sortMeasure=e)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"hasRowSorting",{get:function(){if(this.rowSortType==i.consts.SortType.UNSORTED||null==this.rowSortTuple)return!1;if(1>this.rowSortTuple.length)return!0;var e=!1;try{e=this.isRowExpanded(this.rowSortTuple.slice(0,this.rowSortTuple.length-1))}catch(o){}return e},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"columnSortType",{get:function(){var e=i.consts.SortType.UNSORTED;return this._columnAxis&&(e=this._columnAxis.sortType)==i.consts.SortType.UNSORTED&&this._columnAxis.totalSortMeasure&&this._columnAxis.totalSortType!=i.consts.SortType.UNSORTED&&(e=this._columnAxis.totalSortType),e},set:function(e){this._columnAxis&&(this._columnAxis.sortType=e)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"columnSortTuple",{get:function(){var e;return this._columnAxis&&(e=this._columnAxis.sortTuple,this._columnAxis.sortType==i.consts.SortType.UNSORTED&&this._columnAxis.totalSortMeasure&&this._columnAxis.totalSortType!=i.consts.SortType.UNSORTED&&(e=[])),e},set:function(e){this._columnAxis&&(this._columnAxis.sortTuple=e)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"columnSortMeasure",{get:function(){var e;return this._columnAxis&&(e=this._columnAxis.sortMeasure,this._columnAxis.sortType==i.consts.SortType.UNSORTED&&this._columnAxis.totalSortMeasure&&this._columnAxis.totalSortType!=i.consts.SortType.UNSORTED&&(e=this._columnAxis.totalSortMeasure)),e},set:function(e){this._columnAxis&&(this._columnAxis.sortMeasure=e)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"hasColumnSorting",{get:function(){if(this.columnSortType==i.consts.SortType.UNSORTED||null==this.columnSortTuple)return!1;if(1>this.columnSortTuple.length)return!0;var e=!1;try{e=this.isColumnExpanded(this.columnSortTuple.slice(0,this.columnSortTuple.length-1))}catch(o){}return e},set:function(e){},enumerable:!0,configurable:!0}),o.prototype.reset=function(e){void 0===e&&(e=!0),this.dataLoaded=!1,this._measures=new s.AssociativeArray,this._rows=new s.AssociativeArray,this._columns=new s.AssociativeArray,this._pages=new s.AssociativeArray,this._rowLevels=[],this._columnLevels=[],this._rowTuples=[],this._columnTuples=[],this.rowTuples=[],this.columnTuples=[],this.rowDepths=[],this.columnDepths=[],this._columnMaxDepth=this._rowMaxDepth=0,this.rowType=[],e&&(this._columnAxis&&(this._columnAxis.expandedTuples=[]),this._rowAxis&&(this._rowAxis.expandedTuples=[]),this._columnAxis&&(this._columnAxis.drilledTuples=[]),this._rowAxis&&(this._rowAxis.drilledTuples=[]))},o.prototype.onBeforeQuery=function(e){this.queryType=e.queryType,this.dataLoaded=!1,e.queryType==i.consts.QueryType.SELECT&&this.reset(),e.queryType!=i.consts.QueryType.DRILL_UP&&e.queryType!=i.consts.QueryType.DRILL_DOWN||this.reset(!1)},o.prototype.onQueryComplete=function(){this.load()},o.prototype.onStructureLoaded=function(){this.dataLoaded=!1,this.reset()},o.prototype.load=function(){if(null!=this.dataStorage||(this.dataStorage=this.cube_.localDataStorage,null!=this.dataStorage))if(this.slice){if(this._columnAxis=this.slice.findAxis(i.consts.AxisName.COLUMNS_AXIS),this._rowAxis=this.slice.findAxis(i.consts.AxisName.ROWS_AXIS),0==this.columnTuples.length&&0==this.rowTuples.length||this.queryType==i.consts.QueryType.FILTER){var e,t,o;if(this.isAllExpanded()?this.dataStorage.expandAll(this.slice.drillAll):(this.dataStorage.expand([],i.consts.AxisName.ROWS_AXIS,null),this.dataStorage.expand([],i.consts.AxisName.COLUMNS_AXIS,null)),(0<this.getDrilledDownRows().length||0<this.getDrilledUpRows().length)&&this._drillRows(),(0<this.getDrilledDownColumns().length||0<this.getDrilledUpColumns().length)&&this._drillColumns(),this.queryType==i.consts.QueryType.FILTER)if(this.slice.expandAll){var s=this.getCollapsedRows();if(0<s.length)for(e=0;e<s.length;e++)try{t=this.slice.measures_.getItemAt(s[e][0]),o=s[e].slice(1),this.dataStorage.collapse(o,i.consts.AxisName.ROWS_AXIS,t)}catch(a){}if(s=this.getCollapsedColumns(),0<this.getCollapsedColumns().length)for(e=0;e<this.getCollapsedColumns().length;e++)try{t=this.slice.measures_.getItemAt(s[e][0]),o=s[e].slice(1),this.dataStorage.collapse(o,i.consts.AxisName.COLUMNS_AXIS,t)}catch(n){}}else{if(0<(s=this.getExpandedRows()).length)for(e=0;e<s.length;e++)try{t=this.slice.measures_.getItemAt(s[e][0]),o=s[e].slice(1),this.dataStorage.expand(o,i.consts.AxisName.ROWS_AXIS,t)}catch(r){}if(0<(s=this.getExpandedColumns()).length)for(e=0;e<s.length;e++)try{t=this.slice.measures_.getItemAt(s[e][0]),o=s[e].slice(1),this.dataStorage.expand(o,i.consts.AxisName.COLUMNS_AXIS,t)}catch(l){}}(0<this.getDrilledDownRows().length||0<this.getDrilledUpRows().length)&&this._drillRows(),(0<this.getDrilledDownColumns().length||0<this.getDrilledUpColumns().length)&&this._drillColumns()}this.prepare(),this.dataLoaded=!0}else this._rowAxis=this._columnAxis=null},o.prototype._drillRows=function(){var e,t,r,n,o,s=this.rowAxis.hierarchies.slice();if(s.removeItem(i.Cube.MEASURES_NAME),this.isAllDrilled())for(var a=this.getDrilledUpRows(),l=0;l<a.length;l++)try{e=this.slice.measures_.getItemAt(a[l][0]),r=a[l].slice(2),o=(n=s.getItemAt(r.length-1)).members.getItem(a[l][1]),this.dataStorage.isRowDrilledDown(r,o,e)&&this.dataStorage.drillUp(r,o,i.consts.AxisName.ROWS_AXIS,e)}catch(u){}else for(a=this.getDrilledDownRows(),l=0;l<a.length;l++)try{if("string"==typeof a[l][0]?(t=a[l][0],e=this.slice.measures_.getItemAt(a[l][1]),r=a[l].slice(3),o=(n=s.getItemAt(r.length-1)).members.getItem(a[l][2])):(e=this.slice.measures_.getItemAt(a[l][0]),r=a[l].slice(2),o=(n=s.getItemAt(r.length-1)).members.getItem(a[l][1])),void 0!==t)if(n.findLevel(t).num<o.level.num){var c=this.ascendantByLevel(o,t);r[r.length-1]=c.ordinal,n.drillUpMember(c),this.dataStorage.drillUp(r,c,i.consts.AxisName.ROWS_AXIS,e)}else this.dataStorage.drillDownTo(r,o,i.consts.AxisName.ROWS_AXIS,t);else this.dataStorage.isRowDrilledDown(r,o,e)||(this.dataStorage.hierarchize(r,o,i.consts.AxisName.ROWS_AXIS),this.dataStorage.drillDown(r,o,i.consts.AxisName.ROWS_AXIS,e))}catch(h){}},o.prototype._drillColumns=function(){var e,t,r,n=this.columnAxis.hierarchies.slice();if(n.removeItem(i.Cube.MEASURES_NAME),this.isAllDrilled())for(var o=this.getDrilledUpColumns(),s=0;s<o.length;s++)try{e=this.slice.measures_.getItemAt(o[s][0]),t=o[s].slice(2),r=n.getItemAt(t.length-1).members.getItem(o[s][1]),this.dataStorage.isColumnDrilledDown(t,r,e)&&this.dataStorage.drillUp(t,r,i.consts.AxisName.COLUMNS_AXIS,e)}catch(a){}else for(o=this.getDrilledDownColumns(),s=0;s<o.length;s++)try{e=this.slice.measures_.getItemAt(o[s][0]),t=o[s].slice(2),r=n.getItemAt(t.length-1).members.getItem(o[s][1]),this.dataStorage.isColumnDrilledDown(t,r,e)||(this.dataStorage.hierarchize(t,r,i.consts.AxisName.COLUMNS_AXIS),this.dataStorage.drillDown(t,r,i.consts.AxisName.COLUMNS_AXIS,e))}catch(l){}},o.prototype.prepare=function(){this._showUnexpandedDataAlert=!1,this.slice?(this._measures=this.slice.measures_,this._measuresPosition=this._rowAxis.hasMeasures?this._rowAxis.measuresPosition:this._columnAxis.measuresPosition,this._rows=this.slice.rows,this._columns=this.slice.columns,this._pages=this.slice.pages):(this._measures=new s.AssociativeArray,this._measuresPosition=0,this._rows=new s.AssociativeArray,this._columns=new s.AssociativeArray,this._pages=new s.AssociativeArray),this._rowLevels=[],this._columnLevels=[],this._rowTuples=[],this._columnTuples=[],this.rowTuples=[],this.columnTuples=[],this.rowDepths=[],this.columnDepths=[],this.rowType=[],this._columnMaxDepth=this._rowMaxDepth=0;var t,i=this.dataStorage.result[0],r=this.dataStorage.result[1];if(!s.nullOrUndefined(this.slice)&&!this.slice.isEmpty){if((!this._rowAxis.hasMeasures||1<this._rows.length||this.isClassic)&&this.fillRowTuples(i,[],0),("on"==e.model._options.OptionsManager.showGrandTotals||"columns"==e.model._options.OptionsManager.showGrandTotals||this._rowAxis.hasMeasures&&1==this._rows.length)&&(this.rowTuples.push([]),this.rowDepths.push(0)),!this.isClassic)if(this._rowAxis.hasMeasures&&this.multiMeasures){if(this.rowDepths=[],this.rowType=[],1<this._rows.length)for(0!=this.measuresPosition&&this.fillRowTuples1(i,[],-1,0),t=0;t<this._measures.length;t++)"on"==e.model._options.OptionsManager.showGrandTotals||"columns"==e.model._options.OptionsManager.showGrandTotals?(this._rowTuples.push([[],t]),this.rowDepths.push(0)):0!=this._measuresPosition||"off"!=e.model._options.OptionsManager.showGrandTotals&&"rows"!=e.model._options.OptionsManager.showGrandTotals||(this._rowTuples.push([[],t]),this.rowDepths.push(0)),0==this.measuresPosition&&this.fillRowTuples1(i,[],t,1);if(0==this.measuresPosition&&("on"==e.model._options.OptionsManager.showGrandTotals||"columns"==e.model._options.OptionsManager.showGrandTotals||this._rowAxis.hasMeasures&&1==this._rows.length))for(t=0;t<this._measures.length;t++)this._rowTuples.push([[],t]),this.rowDepths.push(0)}else this._rowTuples=this.rowTuples;if((!this._columnAxis.hasMeasures||1<this._columns.length)&&this.fillColumnTuples(r,[],0),this._measureDepth=-1,("on"==e.model._options.OptionsManager.showGrandTotals||"rows"==e.model._options.OptionsManager.showGrandTotals||this._columnAxis.hasMeasures&&1==this._columns.length)&&(this.columnTuples.push([]),this.columnDepths.push(0)),this._columnAxis.hasMeasures&&this.multiMeasures){if(this.columnDepths=[],1<this._columns.length)for(0!=this._measuresPosition&&this.fillColumnTuples1(r,[],-1,0),t=0;t<this._measures.length;t++)"on"==e.model._options.OptionsManager.showGrandTotals||"rows"==e.model._options.OptionsManager.showGrandTotals?(this._columnTuples.push([[],t]),this.columnDepths.push(0)):0!=this._measuresPosition||"off"!=e.model._options.OptionsManager.showGrandTotals&&"columns"!=e.model._options.OptionsManager.showGrandTotals||(this._columnTuples.push([[],t]),this.columnDepths.push(0)),0==this._measuresPosition&&this.fillColumnTuples1(r,[],t,0);if(0==this._measuresPosition&&("on"==e.model._options.OptionsManager.showGrandTotals||"rows"==e.model._options.OptionsManager.showGrandTotals||this._columnAxis.hasMeasures&&1==this._columns.length))for(t=0;t<this._measures.length;t++)this._columnTuples.push([[],t]),this.columnDepths.push(0)}else this._columnTuples=this.columnTuples;for(i=0;i<this.rowDepths.length;i++)this.rowDepths[i]>this._rowMaxDepth&&(this._rowMaxDepth=this.rowDepths[i]);for(this._rowMaxDepth++,i=0;i<this.columnDepths.length;i++)this.columnDepths[i]>this._columnMaxDepth&&(this._columnMaxDepth=this.columnDepths[i]);this._columnMaxDepth++,0<this.slice.columnsOnly.length&&this._columnAxis.hasMeasures&&this.multiMeasures&&this._columnMaxDepth++,-1==this._measureDepth?this._measureDepth=0==this.measuresPosition?0:this._columnMaxDepth:this._measureDepth++,this._showUnexpandedDataAlert&&e.uialert(e.model._labels.Labels.MESSAGE_CANT_EXPAND,e.model._labels.Labels.MESSAGE_CANT_EXPAND_TITLE,e.AlertType.ALERT)}},o.prototype.showRowTuples=function(){for(var e=0;e<this.rowTuples.length;e++);},o.prototype.showRowTuples1=function(){for(var e=0;e<this._rowTuples.length;e++)this.getRowTuple(e,!0),this.getRowMeasure(e)},o.prototype.showColumnTuples=function(){for(var e=0;e<this.columnTuples.length;e++);},o.prototype.showColumnTuples1=function(){for(var e=0;e<this._columnTuples.length;e++)this.getColumnTuple(e,!0),this.getColumnMeasure(e)},o.prototype.fillRowTuples=function(e,t,i){var r=t.length;(r=this._rows.getItemAt(this._rowAxis.hasMeasures&&t.length>=this._measuresPosition?r+1:r))&&(0==i&&(this._fillRowTuplesStart=Date.now()),this.isClassic?this._fillRowChildren(r.allMember,e,t,i):this.fillRowChildren(r.allMember,e,t,i))},o.prototype.isEmptyOnRows=function(e){for(var t=0;t<this.measures.length;t++)if(!isNaN(this.getValue(e,[],this.measures.getItemAt(t))))return!1;return!0},o.prototype.isEmptyOnColumns=function(e){for(var t=0;t<this.measures.length;t++)if(!isNaN(this.getValue([],e,this.measures.getItemAt(t))))return!1;return!0},o.prototype.fillRowChildren=function(e,t,i,r){if(null!=e){var n;n=e.hierarchy_.sortChildren(e,!1,""),n=this.sortRowsByValue(n,t,i),e=this.rowsOnly.indexOf(e.hierarchy_.uniqueName)<this.rowsOnly.length-1;for(var s=0;s<n.length;s++){var a=n.getItemAt(s);if(0==s&&this.fillRowLevels(a),null!=t[a.ordinal]&&!a.isAll){var l=i.slice(0);if(l.push(a.ordinal),!this.isEmptyOnRows(l)){var c=!a.isLeaf&&this.dataStorage.isRowDrilledDown(l,a),u=e&&this.dataStorage.isRowExpanded(l);this.rowTuples.push(l),this.rowDepths.push(r),Date.now()-this._fillRowTuplesStart<o.SCRIPT_EXECUTION_TIMEOUT&&(c?this.fillRowChildren(a,t,i,r+1):u&&this.fillRowTuples(t[a.ordinal],l,r+1))}}}}},o.prototype.fillRowTuples1=function(e,t,i,r){if(!this.isClassic){var n=t.length;(n=this._rows.getItemAt(this._rowAxis.hasMeasures&&t.length>=this._measuresPosition?n+1:n))&&this.fillRowChildren1(n.allMember,e,t,i,r)}},o.prototype.fillRowChildren1=function(e,t,i,r,n){if(null!=e){var o=i.length;e=e.hierarchy_.sortChildren(e,!1,""),e=this.sortRowsByValue(e,t,i);for(var s,a=0;a<e.length;a++){var l=e.getItemAt(a);if(null!=t[l.ordinal]&&!l.isAll){var c=i.slice(0);if(c.push(l.ordinal),!this.isEmptyOnRows(c))if(o<this._measuresPosition)if(this._rowTuples.push([c,-1]),this.rowDepths.push(n),o==this._measuresPosition-1&&this.dataStorage.isRowExpanded(c,r))for(s=0;s<this._measures.length;s++)this.dataStorage.isRowDrilledDown(c,l,s)?this.fillRowChildren1(l,t,i,s,n+2):(this._rowTuples.push([c,s]),this.rowDepths.push(n+1),this.dataStorage.isRowExpanded(c)&&this.fillRowTuples1(t[l.ordinal],c,s,n+2));else{for(s=0;s<this._measures.length;s++)this._rowTuples.push([c,s]),this.rowDepths.push(n+1);this.dataStorage.isRowDrilledDown(c,l,r)?this.fillRowChildren1(l,t,i,r,n+2):this.dataStorage.isRowExpanded(c,r)&&this.fillRowTuples1(t[l.ordinal],c,r,n+2)}else this._rowTuples.push([c,r]),this.rowDepths.push(n),this.dataStorage.isRowDrilledDown(c,l,r)?this.fillRowChildren1(l,t,i,r,n+1):this.dataStorage.isRowExpanded(c,r)&&this.fillRowTuples1(t[l.ordinal],c,r,n+1)}}}},o.prototype._fillRowChildren=function(t,i,r,n){if(null!=t){t=t.hierarchy_.sortChildren(t,!1,""),t=this.sortRowsByValue(t,i,r);for(var s=0;s<t.length;s++){var a=t.getItemAt(s);if(0==s&&this.fillRowLevels(a),null!=i[a.ordinal]&&!a.isAll){var l=r.slice(0);if(l.push(a.ordinal),!this.isEmptyOnRows(l)){var c=this.dataStorage.isRowDrilledDown(l,a),u=this.dataStorage.isRowExpanded(l),h=this.rowTuples.length;this.rowCount>l.length&&(this.rowType[h]=1,null==this.rowDepths[h]&&(this.rowDepths[h]=n)),Date.now()-this._fillRowTuplesStart<o.SCRIPT_EXECUTION_TIMEOUT?c?this._fillRowChildren(a,i,r,n+1):u&&this.fillRowTuples(i[a.ordinal],l,n+1):(c||u)&&(this._showUnexpandedDataAlert=!0),c||u?("on"!=e.model._options.OptionsManager.showTotals&&"rows"!=e.model._options.OptionsManager.showTotals||(this.rowTuples.push(l),this.rowType[this.rowTuples.length-1]=2,this.rowDepths[this.rowTuples.length-1]=n),c&&this.rowDepths[h]>n&&(this.rowDepths[h]=n,this.rowType[h]=0)):(this.rowTuples.push(l),null==this.rowType[this.rowTuples.length-1]&&(this.rowType[this.rowTuples.length-1]=0,this.rowDepths[this.rowTuples.length-1]=n))}}}}},o.prototype.fillRowLevels=function(e){this.fillLevels(this._rowLevels,e)},o.prototype.fillColumnLevels=function(e){this.fillLevels(this._columnLevels,e)},o.prototype.fillLevels=function(e,t){if(-1==e.indexOf(t.level.uniqueName))if(1>=t.level.num)e.push(t.level.uniqueName);else{var i=e.indexOf(t.parent.level.uniqueName);e.splice(i+1,0,t.level.uniqueName)}},o.prototype.isValidSortTuple=function(e,t){for(var i=0;i<e.length;i++){var r=t.getItemAt(i);if(r.hasFilter()){var n=r.members.getItemAt(e[i]);if(!r.filter.keyExists(n.uniqueName))return!1}}return!0},o.prototype.sortRowsByValue=function(e,t,r){if(!this.hasColumnSorting)return e;var n=this.columnSortTuple;if(!this.isValidSortTuple(n,this.columnsOnly))return e;for(var o,a=[],l=[],c=[],u=new s.AssociativeArray,h=0;h<e.length;h++)if(null!=t[(o=e.getItemAt(h)).ordinal]&&!o.isAll){var d=r.slice(0);d.push(o.ordinal),d=this.getValue(d,n,this.columnSortMeasure),isNaN(d)?c.push(o):(a.push(d),l.push(o))}for(e=s.ArrayUtils.sort(a,this.columnSortType!=i.consts.SortType.DESC?s.ArrayUtils.NUMERIC|s.ArrayUtils.RETURNINDEXEDARRAY:s.ArrayUtils.NUMERIC|s.ArrayUtils.DESCENDING|s.ArrayUtils.RETURNINDEXEDARRAY),h=0;h<e.length;h++)null!=(o=l[e[h]])&&u.addItem(o.uniqueName,o);for(h=0;h<c.length;h++)o=c[h],this.columnSortType==i.consts.SortType.DESC?u.addItem(o.uniqueName,o):u.addItemAt(o.uniqueName,o,h);return u},o.prototype.sortColumnsByValue=function(e,t,r){if(!this.hasRowSorting)return e;var n=this.rowSortTuple;if(!this.isValidSortTuple(n,this.rowsOnly))return e;for(var o,a=[],l=[],c=[],u=new s.AssociativeArray,h=0;h<e.length;h++)if(null!=t[(o=e.getItemAt(h)).ordinal]&&!o.isAll){var d=r.slice(0);d.push(o.ordinal),d=this.getValue(n,d,this.rowSortMeasure),isNaN(d)?c.push(o):(a.push(d),l.push(o))}for(e=s.ArrayUtils.sort(a,this.rowSortType!=i.consts.SortType.DESC?s.ArrayUtils.NUMERIC|s.ArrayUtils.RETURNINDEXEDARRAY:s.ArrayUtils.NUMERIC|s.ArrayUtils.DESCENDING|s.ArrayUtils.RETURNINDEXEDARRAY),h=0;h<e.length;h++)null!=(o=l[e[h]])&&u.addItem(o.uniqueName,o);for(h=0;h<c.length;h++)o=c[h],this.rowSortType==i.consts.SortType.DESC?u.addItem(o.uniqueName,o):u.addItemAt(o.uniqueName,o,h);return u},o.prototype.fillColumnTuples=function(e,t,i){var r=t.length;(r=this._columns.getItemAt(this._columnAxis.hasMeasures&&t.length>=this._measuresPosition?r+1:r))&&this.fillColumnChildren(r.allMember,e,t,i)},o.prototype.fillColumnChildren=function(e,t,i,r){e=e.hierarchy_.sortChildren(e,!1,""),e=this.sortColumnsByValue(e,t,i);for(var n=0;n<e.length;n++){var o=e.getItemAt(n);if(0==n&&this.fillColumnLevels(o),null!=t[o.ordinal]&&!o.isAll){var s=i.slice(0);if(s.push(o.ordinal),!this.isEmptyOnColumns(s)){var a=this.dataStorage.isColumnExpanded(s);this.columnTuples.push(s),this.columnDepths.push(r),this.dataStorage.isColumnDrilledDown(s,o)?this.fillColumnChildren(o,t,i,r+1):a&&this.fillColumnTuples(t[o.ordinal],s,r+1)}}}},o.prototype.fillColumnTuples1=function(e,t,i,r){var n=t.length;(n=this._columns.getItemAt(this._columnAxis.hasMeasures&&t.length>=this._measuresPosition?n+1:n))&&this.fillColumnChildren1(n.allMember,e,t,i,r)},o.prototype.fillColumnChildren1=function(e,t,i,r,n){var o=i.length;e=e.hierarchy_.sortChildren(e,!1,""),e=this.sortColumnsByValue(e,t,i);for(var s,a=0;a<e.length;a++){var l=e.getItemAt(a);if(null!=t[l.ordinal]&&!l.isAll){var c=i.slice(0);if(c.push(l.ordinal),!this.isEmptyOnColumns(c)){var u=this.dataStorage.isColumnExpanded(c,r);if(o<this._measuresPosition)if(this._columnAxis.hasMeasures&&this._measureDepth<n+1&&(this._measureDepth=n+1),o==this._measuresPosition-1&&u)if(this.dataStorage.isColumnDrilledDown(c,l)){for(s=0;s<this._measures.length;s++)this._columnTuples.push([c,s]),this.columnDepths.push(n);this.fillColumnChildren1(l,t,i,r,n+1)}else for(s=0;s<this._measures.length;s++)this._columnTuples.push([c,s]),this.columnDepths.push(n),this.dataStorage.isColumnExpanded(c,s)&&this.fillColumnTuples1(t[l.ordinal],c,s,n+1);else{for(s=0;s<this._measures.length;s++)this._columnTuples.push([c,s]),this.columnDepths.push(n);this.dataStorage.isColumnDrilledDown(c,l,r)?this.fillColumnChildren1(l,t,i,r,n+1):u&&this.fillColumnTuples1(t[l.ordinal],c,r,n+1)}else this._columnTuples.push([c,r]),this.columnDepths.push(n),this.dataStorage.isColumnDrilledDown(c,l,r)?this.fillColumnChildren1(l,t,i,r,n+1):u&&this.fillColumnTuples1(t[l.ordinal],c,r,n+1)}}}},Object.defineProperty(o.prototype,"isEmpty",{get:function(){return 0==this.columnTuples.length&&0==this.rowTuples.length},set:function(e){},enumerable:!0,configurable:!0}),o.prototype.getRowDepth=function(e){return this.isClassic?this.rowDepths[this._rowAxis.hasMeasures?Math.floor(e/this._measures.length):e]:this.rowDepths[e]},o.prototype.getRowType=function(e){return this.isClassic?this.rowType[this._rowAxis.hasMeasures?Math.floor(e/this._measures.length):e]:this.rowType[e]},o.prototype.getColumnType=function(e){return 1},o.prototype.getColumnDepth=function(e){return this.columnDepths[e]},o.prototype.getRowHierarchyIdx=function(e){return this._rowAxis.hasMeasures&&(e.length>this._measuresPosition||0==this._measuresPosition)?e.length:e.length-1},o.prototype.getRowHierarchy=function(e){return e=this.getRowHierarchyIdx(e),this._rows.getItemAt(e)},o.prototype.getColumnHierarchyIdx=function(e){return this._columnAxis.hasMeasures&&(e.length>this._measuresPosition||0==this._measuresPosition)?e.length:e.length-1},o.prototype.getColumnHierarchy=function(e){return e=this.getColumnHierarchyIdx(e),this._columns.getItemAt(e)},Object.defineProperty(o.prototype,"dataWidth",{get:function(){return this.columnTuples.length},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"dataHeight",{get:function(){return this.rowTuples.length},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"extendedDataWidth",{get:function(){return this._columnTuples.length},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"extendedDataHeight",{get:function(){return this.isClassic?(this.rowAxis&&this.rowAxis.hasMeasures?this._measures.length:1)*this.rowTuples.length:this._rowTuples.length},set:function(e){},enumerable:!0,configurable:!0}),o.prototype.isRowExpanded=function(e,t){return void 0===t&&(t=null),this.dataStorage.isRowExpanded(e,t)},o.prototype.isColumnExpanded=function(e,t){return void 0===t&&(t=null),this.dataStorage.isColumnExpanded(e,t)},o.prototype.isRowDrilledDown=function(e,t,i){return void 0===i&&(i=null),this.dataStorage.isRowDrilledDown(e,t,i)},o.prototype.isColumnDrilledDown=function(e,t,i){return void 0===i&&(i=null),this.dataStorage.isColumnDrilledDown(e,t,i)},o.prototype.isAggregated=function(e,t){return this.dataStorage.isAggregated(e,t)},o.prototype.getColumnTupleIndex=function(e){e=e.slice(0);for(var t=this._columnAxis.hasMeasures,i=t?e.pop():-1,r=this._columnTuples,n=0;n<r.length;n++){var o,s=!0;if(t&&this.multiMeasures){if(i!=r[n][1])continue;o=r[n][0]}else o=r[n];if(o.length==e.length){for(var a=0;a<o.length;a++)if(o[a]!=e[a]){s=!1;break}if(s)return n}}return-1},o.prototype.getRowTupleIndex=function(e){e=e.slice(0);for(var t=this._rowAxis.hasMeasures,i=t?e.pop():-1,r=this.isClassic?this.rowTuples:this._rowTuples,n=0;n<r.length;n++){var o,s=!0;if(t&&this.multiMeasures){if(i!=r[n][1])continue;o=r[n][0]}else o=r[n];if(o.length==e.length){for(var a=0;a<o.length;a++)if(o[a]!=e[a]){s=!1;break}if(s)return n}}return-1},o.prototype.getRowTuple=function(e,t){if(void 0===t&&(t=!1),0>e||null==this._rowAxis||null==this._measures)return null;if(t&&this._rowAxis.hasMeasures&&this.multiMeasures){if(this.isClassic){var i=Math.floor(e/this._measures.length);return null==this.rowTuples[i]?null:this.rowTuples[i].slice(0)}return null==this._rowTuples[e]?null:this._rowTuples[e][0].slice(0)}return null==this.rowTuples[e]?null:this.rowTuples[e].slice(0)},o.prototype.getColumnTuple=function(e,t){return void 0===t&&(t=!1),0>e||null==this._columnAxis||null==this._measures?null:t&&this._columnAxis.hasMeasures&&this.multiMeasures?null==this._columnTuples[e]?null:this._columnTuples[e][0].slice():null==this.columnTuples[e]?null:this.columnTuples[e].slice()},o.prototype.getColumnTupleByName=function(e,t){return null},o.prototype.getColumnTupleForExport=function(e){return this._columnAxis.hasMeasures&&this.multiMeasures?this._columnTuples[e]:this.columnTuples[e]},o.prototype.getRowMeasure=function(e){return null==this._rowTuples[e]?null:this._rowAxis.hasMeasures&&this.multiMeasures?this._measures.getItemAt(this._rowTuples[e][1]):null},o.prototype.getRowMeasureIndex=function(e){return null==this._rowTuples[e]?-1:this._rowAxis.hasMeasures&&this.multiMeasures?this._rowTuples[e][1]:-1},o.prototype.getColumnMeasure=function(e){return null==this._columnTuples[e]?null:this._columnAxis.hasMeasures&&this.multiMeasures?this._measures.getItemAt(this._columnTuples[e][1]):null},o.prototype.getColumnMeasureIndex=function(e){return null==this._columnTuples[e]?-1:this._columnAxis.hasMeasures&&this.multiMeasures?this._columnTuples[e][1]:-1},o.prototype.getMeasure=function(e,t){if(null==this._measures||null==this._rowAxis||null==this._columnAxis)return null;if(this.multiMeasures){if(this._rowAxis.hasMeasures){if(this.isClassic){var i=e%this._measures.length;return null==this.rowTuples[Math.floor(e/this.measures.length)]?this._measures.getItemAt(0):this._measures.getItemAt(i)}return this._measures.getItemAt(null==this._rowTuples[e]?0:this._rowTuples[e][1])}return this._measures.getItemAt(null==this._columnTuples[t]?0:this._columnTuples[t][1])}return this._measures.getItemAt(0)},o.prototype.drillThrough=function(e,t,i){return this.dataStorage.drillThrough(e,t,i)},o.prototype.save=function(e,t,i,r,n){this.dataStorage.save(e,t,i,r,n)},o.prototype.getUpdatedValue=function(e,t,i){return this.dataStorage.getUpdatedValue(e,t,i)},o.prototype.getRecordId=function(e,t,i){return null},o.prototype.getValue=function(e,t,r){var n;if(r.aggregation==i.consts.AggregationName.PERCENT)return n=this.dataStorage.getValue([],[],r),e=this.dataStorage.getValue(e,t,r),Math.abs(100*e/n);if(r.aggregation==i.consts.AggregationName.PERCENT_COLUMN)return n=this.dataStorage.getValue([],t,r),100*(e=this.dataStorage.getValue(e,t,r))/n;if(r.aggregation==i.consts.AggregationName.PERCENT_ROW)return n=this.dataStorage.getValue(e,[],r),100*(e=this.dataStorage.getValue(e,t,r))/n;if(r.aggregation==i.consts.AggregationName.INDEX){n=this.dataStorage.getValue([],[],r);var o=this.dataStorage.getValue(e,[],r),s=this.dataStorage.getValue([],t,r);return e=this.dataStorage.getValue(e,t,r),Math.abs(n*e/(s*o))}return r.aggregation==i.consts.AggregationName.DIFFERENCE?this.getDifference(e,t,r,!1):r.aggregation==i.consts.AggregationName.PERCENT_DIFFERENCE?this.getDifference(e,t,r,!0):r.aggregation==i.consts.AggregationName.RUNNING_TOTALS?this.dataStorage.getRunningTotals(e,t,r,this.rowAxis.hasMeasures?i.consts.AxisName.ROWS_AXIS:i.consts.AxisName.COLUMNS_AXIS):this.dataStorage.getValue(e,t,r)},o.prototype.getDifference=function(e,t,i,r){return this.rowAxis.hasMeasures?this.getDifferenceColumn(e,t,i,r):this.getDifferenceRow(e,t,i,r)},o.prototype.getDifferenceColumn=function(e,t,i,r){var n;if(0<this.columns.length){if(0>(n=this.getColumnTupleIndex(t)))return 0;if(0==n||0==t.length)return NaN;if(n=this.getColumnTuple(n-1),t.length!=n.length)return NaN;n=this.dataStorage.getValue(e,n,i)}else{if(e.slice(0),e.push(-1),n=this.getRowTupleIndex(e),e.pop(),0==n||0==e.length)return NaN;if(0>n)return 0;if(n=this.getRowTuple(n-1,!0),e.length!=n.length)return NaN;n=this.dataStorage.getValue(n,t,i)}return e=this.dataStorage.getValue(e,t,i),r?(e-n)/n*100:e-n},o.prototype.getDifferenceRow=function(e,t,i,r){var n;if(0<this.rows.length){if(0==(n=this.getRowTupleIndex(e))||0==e.length)return NaN;if(0>n)return 0;if(n=this.getRowTuple(n-1),e.length!=n.length)return NaN;n=this.dataStorage.getValue(n,t,i)}else{if((t=t.slice(0)).push(0),n=this.getColumnTupleIndex(t),t.pop(),0==n||0==t.length)return NaN;if(0>n)return 0;if(n=this.getColumnTuple(n-1,!0),t.length!=n.length)return NaN;n=this.dataStorage.getValue(e,n,i)}return e=this.dataStorage.getValue(e,t,i),r?(e-n)/n*100:e-n},o.prototype.calculate=function(e,t,i,r){return this.dataStorage.calculate(e,t,i,r)},o.prototype.expandData=function(e){this.dataLoaded&&null!=(e=this.slice.allHierarchies().getItem(e))&&this.expandHierarchy(e)},o.prototype.expandHierarchy=function(e){var t=this.slice.rows.keyExists(e.uniqueName)?i.consts.AxisName.ROWS_AXIS:i.consts.AxisName.COLUMNS_AXIS,r=t==i.consts.AxisName.ROWS_AXIS?this.slice.rowsOnly.length:this.slice.columnsOnly.length;if((e=t==i.consts.AxisName.ROWS_AXIS?this.slice.rowsOnly.indexOf(e.uniqueName):this.slice.columnsOnly.indexOf(e.uniqueName))+1!=r){r=[];var n=(t==i.consts.AxisName.ROWS_AXIS?this.slice.rowsOnly:this.slice.columnsOnly).slice(0,e+1);this.getTuples([],n,r),n=t==this.slice.axisWithMeasures.uniqueName?this.slice.axisWithMeasures.measuresPosition:-1;for(var o=0;o<r.length;o++)if(0<=n&&n<=e&&1<this.slice.measures_.length)for(var s=0;s<this.slice.measures_.length;s++){var a=this.slice.measures_.getItemAt(s);this.expand(r[o],t,r[o].length>n?a:null,!1)}else this.expand(r[o],t,null,!1);this.cube_.dispatch(new i.QueryCompleteEvent(i.consts.QueryType.EXPAND))}},o.prototype.getTuples=function(e,t,i,r){if(void 0===r&&(r=!0),0!=t.length)for(var n=(n=t.getItemAt(0)).hasFilter()?n.filter:n.members,o=0;o<n.length;o++){var s=n.getItemAt(o);if(!s.isAll){var a=e.slice(0);a.push(s.ordinal),(r||!r&&1==t.length)&&i.push(a.slice(0)),this.getTuples(a.slice(0),t.slice(1),i,r)}}},o.prototype.collapseData=function(e){this.dataLoaded&&null!=(e=this.slice.allHierarchies().getItem(e))&&this.collapseHierarchy(e)},o.prototype.collapseHierarchy=function(e){var t=this.slice.rows.keyExists(e.uniqueName)?i.consts.AxisName.ROWS_AXIS:i.consts.AxisName.COLUMNS_AXIS,r=t==i.consts.AxisName.ROWS_AXIS?this.slice.rowsOnly.length:this.slice.columnsOnly.length;if((e=t==i.consts.AxisName.ROWS_AXIS?this.slice.rowsOnly.indexOf(e.uniqueName):this.slice.columnsOnly.indexOf(e.uniqueName))+1!=r){r=[];var n=(t==i.consts.AxisName.ROWS_AXIS?this.slice.rowsOnly:this.slice.columnsOnly).slice(0,e+1);this.getTuples([],n,r,!1),n=t==this.slice.axisWithMeasures.uniqueName?this.slice.axisWithMeasures.measuresPosition:-1;for(var o=0;o<r.length;o++)if(0<=n&&n<=e&&1<this.slice.measures_.length)for(var s=0;s<this.slice.measures_.length;s++){var a=this.slice.measures_.getItemAt(s);this.collapse(r[o],t,r[o].length>n?a:null,!1)}else this.collapse(r[o],t,null,!1);this.cube_.dispatch(new i.QueryCompleteEvent(i.consts.QueryType.COLLAPSE))}},o.prototype.expandAll=function(){this.dataLoaded&&(this.reset(),this.slice.expandAll?this.dataStorage.expandAll(this.slice.drillAll):this.cube_.select())},o.prototype.sort=function(){this.prepare(),this.cube_.dispatchWith(e.model._state.StateEvent.REPORT_CHANGED)},Object.defineProperty(o.prototype,"lastRowsTupleInteracted",{get:function(){return this._lastRowsTupleInteracted},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"lastColsTupleInteracted",{get:function(){return this._lastColsTupleInteracted},enumerable:!0,configurable:!0}),o.prototype.expand=function(t,r,n,o){void 0===n&&(n=null),void 0===o&&(o=!0),r==i.consts.AxisName.ROWS_AXIS&&(this._lastRowsTupleInteracted=t),r==i.consts.AxisName.COLUMNS_AXIS&&(this._lastColsTupleInteracted=t);var s=this.slice.findAxis(r),a=t.slice(0);s=n&&s.hasMeasures?this._measures.indexOf(n.uniqueName):-1,a.unshift(s);var l=[];if(this.isAllExpanded())if(r==i.consts.AxisName.ROWS_AXIS){l=[];var c=this.getCollapsedRows();for(s=0;s<c.length;s++)a.toString()!=c[s].toString()&&l.push(c[s]);this.setCollapsedRows(l)}else{for(l=[],c=this.getCollapsedColumns(),s=0;s<c.length;s++)a.toString()!=c[s].toString()&&l.push(c[s]);this.setCollapsedColumns(l)}else r==i.consts.AxisName.ROWS_AXIS?((l=this.getExpandedRows().slice(0)).push(a),this.setExpandedRows(l)):((l=this.getExpandedColumns().slice(0)).push(a),this.setExpandedColumns(l));this.cube_.expand(t,r,n,o),this.cube_.dispatchWith(e.model._state.StateEvent.REPORT_CHANGED)},o.prototype.collapse=function(t,r,n,o){void 0===n&&(n=null),void 0===o&&(o=!0),r==i.consts.AxisName.ROWS_AXIS&&(this._lastRowsTupleInteracted=t.slice(0,t.length-1)),r==i.consts.AxisName.COLUMNS_AXIS&&(this._lastColsTupleInteracted=t.slice(0,t.length-1));var s=this.slice.findAxis(r),a=t.slice(0);s=n&&s.hasMeasures?this._measures.indexOf(n.uniqueName):-1,a.unshift(s);var l=[];if(this.isAllExpanded())r==i.consts.AxisName.ROWS_AXIS?((l=this.getCollapsedRows().slice(0)).push(a),this.setCollapsedRows(l)):((l=this.getCollapsedColumns().slice(0)).push(a),this.setCollapsedColumns(l));else if(r==i.consts.AxisName.ROWS_AXIS){l=[];var c=this.getExpandedRows();for(s=0;s<c.length;s++)a.toString()!=c[s].toString()&&l.push(c[s]);this.setExpandedRows(l)}else{for(l=[],c=this.getExpandedColumns(),s=0;s<c.length;s++)a.toString()!=c[s].toString()&&l.push(c[s]);this.setExpandedColumns(l)}this.cube_.collapse(t,r,n,o),this.cube_.dispatchWith(e.model._state.StateEvent.REPORT_CHANGED)},o.prototype.drillUp=function(t,r,n,o,s){if(void 0===o&&(o=null),void 0!==s)return this.drillUpTo(t,r,n,o,s);var a=this.slice.findAxis(n);s=[];var l=t.slice(0);if(l.unshift(r.uniqueName),a=o&&a.hasMeasures?this._measures.indexOf(o.uniqueName):-1,l.unshift(a),this.isAllDrilled())n==i.consts.AxisName.ROWS_AXIS?((s=this.getDrilledUpRows().slice(0)).push(l),this.setDrilledUpRows(s)):((s=this.getDrilledUpColumns().slice(0)).push(l),this.setDrilledUpColumns(s));else if(n==i.consts.AxisName.ROWS_AXIS){var c,u=this.getDrilledDownRows();for(c in u)"string"==typeof(a=u[c])[0]&&(a=a.slice(1)),a.toString()!=l.toString()&&s.push(a);this.setDrilledDownRows(s)}else{for(c in u=this.getDrilledDownColumns())"string"==typeof(a=u[c])[0]&&(a=a.slice(1)),a.toString()!=l.toString()&&s.push(a);this.setDrilledDownColumns(s)}this.cube_.drillUp(t,r,n,o),this.cube_.dispatchWith(e.model._state.StateEvent.REPORT_CHANGED)},o.prototype.ascendantByLevel=function(e,t){for(var i=e;void 0!==i&&i.level.uniqueName!=t;)i=i.parent;return i},o.prototype.drillUpTo=function(e,t,r,n,o){void 0===n&&(n=null);var s,a=this.ascendantByLevel(t,o),l=this.slice.findAxis(r),c=[],u=e.slice(0);if(u.unshift(t.uniqueName),l=n&&l.hasMeasures?this._measures.indexOf(n.uniqueName):-1,u.unshift(l),u.unshift(o),c.push(u),r==i.consts.AxisName.ROWS_AXIS){var h=this.getDrilledDownRows();for(l=h.length-1;0<=l;l--)s=t.hierarchy_.findMember("string"==typeof(u=h[l])[0]?u[2]:u[1]),void 0!==(s=this.ascendantByLevel(s,o))&&s.uniqueName==a.uniqueName||c.unshift(u);this.setDrilledDownRows(c)}else{for(l=(h=this.getDrilledDownColumns()).length-1;0<=l;l--)s=t.hierarchy_.findMember("string"==typeof(u=h[l])[0]?u[2]:u[1]),void 0!==(s=this.ascendantByLevel(s,o))&&s.uniqueName==a.uniqueName||c.unshift(u);this.setDrilledDownColumns(c)}(u=e.slice(0))[u.length-1]=a.ordinal,this.cube_.drillUp(u,a,r,n)},o.prototype.drillDown=function(t,r,n,o,s){if(void 0===o&&(o=null),void 0!==s)return this.drillDownTo(t,r,n,o,s);var a=this.slice.findAxis(n);s=[];var l=t.slice(0);if(l.unshift(r.uniqueName),a=o&&a.hasMeasures?this._measures.indexOf(o.uniqueName):-1,l.unshift(a),this.isAllDrilled())if(n==i.consts.AxisName.ROWS_AXIS){var c,u=this.getDrilledUpRows();for(c in u)(a=u[c]).toString()!=l.toString()&&s.push(a);this.setDrilledUpRows(s)}else{for(c in u=this.getDrilledUpColumns())(a=u[c]).toString()!=l.toString()&&s.push(a);this.setDrilledUpColumns(s)}else n==i.consts.AxisName.ROWS_AXIS?((s=this.getDrilledDownRows().slice(0)).push(l),this.setDrilledDownRows(s)):((s=this.getDrilledDownColumns().slice(0)).push(l),this.setDrilledDownColumns(s));this.cube_.drillDown(t,r,n,o),this.cube_.dispatchWith(e.model._state.StateEvent.REPORT_CHANGED)},o.prototype.drillDownTo=function(e,t,r,n,o){var s=this.slice.findAxis(r),a=[];(e=e.slice(0)).unshift(t.uniqueName),t=n&&s.hasMeasures?this._measures.indexOf(n.uniqueName):-1,e.unshift(t),e.unshift(o),r==i.consts.AxisName.ROWS_AXIS?((a=this.getDrilledDownRows().slice(0)).push(e),this.setDrilledDownRows(a)):((a=this.getDrilledDownColumns().slice(0)).push(e),this.setDrilledDownColumns(a))},o.dispose=function(){o.instance&&(o.instance.removeEventListeners(),o.instance.removeAllEventListeners()),o.instance=null},o.counter=0,o.SCRIPT_EXECUTION_TIMEOUT=9e3,o}(t.EventDispatcher),r.ViewDataProvider=n}(n||(n={})),function(e){var t;!function(t){var i=function(){function i(){}return i.getDataProvider=function(n){void 0===n&&(n=""),""==n&&(n=e.model._options.OptionsManager.flatView?r.FLAT:r.PIVOT);var o=null;return(o=n==r.FLAT?t.FlatViewDataProvider.getInstance():t.ViewDataProvider.getInstance()).addEventListeners(),i.dataProvider_!=o?(i.dataProvider_&&i.dataProvider_.removeEventListeners(),o.load()):e.model._options.OptionsManager.optionAffectedDataProvider&&(o.load(),e.model._options.OptionsManager.optionAffectedDataProvider=!1),i.dataProvider_=o},i.dispose=function(){t.FlatViewDataProvider.dispose(),t.ViewDataProvider.dispose(),i.dataProvider_=null},i.dataProvider_=null,i}();t.DataProviderFactory=i;var r=function(){function e(){}return e.PIVOT="pivot",e.FLAT="flat",e}();t.DataProviderType=r}((t=e.data_||(e.data_={})).dataprovider_||(t.dataprovider_={}))}(n||(n={})),function(e){!function(e){var i,r;i=e.dataprovider_||(e.dataprovider_={}),r=function(t){function i(){var i=t.call(this)||this;return i._measures=new s.AssociativeArray,i._dataLoaded=!1,i.queryCompleteHandler=function(){return i.onQueryComplete()},i._columnSortType=e.consts.SortType.UNSORTED,i._columnSortTuple=null,i.indices=[],i.colIndices=[],i.cube_=e.Cube.getInstance(),i}return a(i,t),Object.defineProperty(i.prototype,"dataStorage",{get:function(){return null!=this._dataStorage?this._dataStorage:this.cube_.localDataStorage},set:function(e){this._dataStorage=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"slice",{get:function(){return null!=this._slice?this._slice:this.cube_.slice_},set:function(e){this._slice=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"measures",{get:function(){return this._measures},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"multiMeasures",{get:function(){return 1<this._measures.length},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"dataLoaded",{get:function(){return this.slice&&this._dataLoaded},set:function(e){},enumerable:!0,configurable:!0}),i.getInstance=function(){return null==i.instance&&(i.instance=new i),i.instance},i.prototype.addEventListeners=function(){this.cube_.addEventListener(e.DataEvent.QUERY_COMPLETE,this.queryCompleteHandler,1)},i.prototype.removeEventListeners=function(){this.cube_.removeEventListener(e.DataEvent.QUERY_COMPLETE,this.queryCompleteHandler)},i.prototype.load=function(){null==this.dataStorage&&(this.dataStorage=this.cube_.localDataStorage,null==this.dataStorage)||this.slice&&(this.dataStorage.expand([],e.consts.AxisName.ROWS_AXIS,null),this.dataStorage.expand([],e.consts.AxisName.COLUMNS_AXIS,null),this.prepare(),this._dataLoaded=!0)},i.prototype.onQueryComplete=function(){this.load()},i.prototype.prepare=function(){var t,i,r,n=this.slice?this.slice.flatten(!0):new s.AssociativeArray;for(this.colIndices.length=0,this.colNames=new s.AssociativeArray,this._measures=new s.AssociativeArray,t=0;t<n.length;t++)r=n.getItemAt(t),null==(i=this.cube_.structure_.hierarchyToMeasure(r.uniqueName))&&(i=this.cube_.structure_.calculatedMeasures.getItem(r.uniqueName)),i&&this._measures.addItem(i.uniqueName,i),i=this.dataStorage.factKeys.indexOf(r.uniqueName),this.colIndices.push(i),this.colNames.addItem(r.uniqueName,this.colIndices.length-1);if(this.hasColumnSorting)this._sort();else for(t=0;t<n.length;t++)if((r=n.getItemAt(t)).sortName!=e.consts.SortType.UNSORTED){this._columnSortType=r.sortName,this._columnSortTuple=this.getColumnTuple(t),this._columnSortMeasure=this.cube_.structure_.hierarchyToMeasure(r.uniqueName),null==this._columnSortMeasure&&(this._columnSortMeasure=this.cube_.structure_.calculatedMeasures.getItem(r.uniqueName)),this.sort();break}},Object.defineProperty(i.prototype,"measuresPosition",{get:function(){return 0},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rowMaxDepth",{get:function(){return 0},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"columnMaxDepth",{get:function(){return 0},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"measureDepth",{get:function(){return 0},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rows",{get:function(){return new s.AssociativeArray},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rowsOnly",{get:function(){return new s.AssociativeArray},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rowLevels",{get:function(){return[]},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"columnLevels",{get:function(){return[]},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"columns",{get:function(){return new s.AssociativeArray},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"columnsOnly",{get:function(){return new s.AssociativeArray},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"pages",{get:function(){return new s.AssociativeArray},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rowAxis",{get:function(){return new e._structure.Axis(e.consts.AxisName.ROWS_AXIS)},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"columnAxis",{get:function(){return new e._structure.Axis(e.consts.AxisName.COLUMNS_AXIS)},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rowCount",{get:function(){return 1},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"columnCount",{get:function(){return 0},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rowSortType",{get:function(){return null},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rowSortTuple",{get:function(){return null},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rowSortMeasure",{get:function(){return null},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"hasRowSorting",{get:function(){return!1},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"columnSortType",{get:function(){return this._columnSortType},set:function(t){t=t.toLowerCase(),this._columnSortType=t==e.consts.SortType.ASC||t==e.consts.SortType.DESC?t:e.consts.SortType.UNSORTED},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"columnSortTuple",{get:function(){return this._columnSortTuple},set:function(e){this._columnSortTuple=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"columnSortMeasure",{get:function(){return this._columnSortMeasure},set:function(e){this._columnSortMeasure=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"hasColumnSorting",{get:function(){return this._columnSortType!=e.consts.SortType.UNSORTED&&null!=this._columnSortTuple},set:function(e){},enumerable:!0,configurable:!0}),i.prototype.reset=function(t){this._dataLoaded=!1,this._sortedHierarchy=null,this._measures=new s.AssociativeArray,this.indices.length=0,this.colIndices.length=0,this.colNames=new s.AssociativeArray,this._columnSortTuple=this._columnSortMeasure=null,this._columnSortType=e.consts.SortType.UNSORTED},Object.defineProperty(i.prototype,"isEmpty",{get:function(){return 0==this.colIndices.length},set:function(e){},enumerable:!0,configurable:!0}),i.prototype.getRowDepth=function(e){return 0},i.prototype.getRowType=function(e){return 0},i.prototype.getColumnType=function(e){return 0},i.prototype.getColumnDepth=function(e){return 1},i.prototype.getRowHierarchyIdx=function(e){return 0},i.prototype.getRowHierarchy=function(e){return this.getColumnHierarchy(e)},i.prototype.getColumnHierarchyIdx=function(e){return 0},i.prototype.getColumnHierarchy=function(e){return this.cube_.structure_.allHierarchies().getItem(this.dataStorage.keys[e[0]])},Object.defineProperty(i.prototype,"dataWidth",{get:function(){return this.colIndices.length},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"dataHeight",{get:function(){return this.dataStorage?this.dataStorage.result[0]:0},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"extendedDataWidth",{get:function(){return this.colIndices.length},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"extendedDataHeight",{get:function(){return this.dataStorage.getRowCount()},set:function(e){},enumerable:!0,configurable:!0}),i.prototype.isRowExpanded=function(e,t){return!1},i.prototype.isColumnExpanded=function(e,t){return!1},i.prototype.isRowDrilledDown=function(e,t,i){return!1},i.prototype.isColumnDrilledDown=function(e,t,i){return!1},i.prototype.isAggregated=function(e,t){return!1},i.prototype.getColumnTupleIndex=function(e){for(var t=0;t<this.colIndices.length;t++)if(this.colIndices[t].toString()==e.toString())return t;return-1},i.prototype.getRowTupleIndex=function(e){if(!(0<this.indices.length&&e[0]<this.indices.length))return e[0];for(var t=0;t<this.indices.length;t++)if(this.indices[t].toString()==e.toString())return t;return-1},i.prototype.getRowTuple=function(e,t){return 0>e?null:0<this.indices.length&&e<this.indices.length?[this.indices[e]]:[e]},i.prototype.getColumnTuple=function(e,t){return 0>e?null:0<this.colIndices.length&&e<this.colIndices.length?[this.colIndices[e]]:[e]},i.prototype.getColumnTupleByName=function(e,t){void 0===t&&(t=!1);var i=this.colNames.getItem(e);return this.getColumnTuple(i,t)},i.prototype.getColumnTupleForExport=function(e){return null},i.prototype.getRowMeasure=function(e){return null},i.prototype.getRowMeasureIndex=function(e){return 0},i.prototype.getColumnMeasure=function(e){return null},i.prototype.getColumnMeasureIndex=function(e){return 0},i.prototype.getMeasure=function(e,t){var i=this.getColumnTuple(t);return this._measures.getItem(this.dataStorage.factKeys[i[0]])},i.prototype.getUpdatedValue=function(e,t,i){return this.dataStorage.getFlatUpdatedValue(null==e?null:e[0],i)},i.prototype.getValue=function(t,i,r){return null==i&&null==t?this.dataStorage.getValue([],[],r):this.dataStorage.getFlatValue(t[0],i[0],r,r.type!=e.types.MeasureType.COUNT)},i.prototype.getRecordId=function(e,t,i){return null==t&&null==e?null:this.dataStorage.getRecordId(e[0],t[0],i)},i.prototype.sort=function(){this._sort()},i.prototype._sort=function(){if(this.hasColumnSorting){this._columnSortMeasure.type!=e.types.MeasureType.COUNT?this.sortRowsByValue():this.sortRowsByMembers(),this._sortedHierarchy&&(this._sortedHierarchy.sortName=e.consts.SortType.UNSORTED);var t=this.getColumnHierarchy(this._columnSortTuple);t&&(t.sortName=this._columnSortType,this._sortedHierarchy=t)}},i.prototype.sortRowsByValue=function(){var t,i,r=[];for(t=0;t<this.extendedDataHeight;t++)i=this.getValue([t],this._columnSortTuple,this._columnSortMeasure),r[t]=isNaN(i)?Number.NEGATIVE_INFINITY:i;this.indices=s.ArrayUtils.sort(r,this._columnSortType!=e.consts.SortType.DESC?s.ArrayUtils.NUMERIC|s.ArrayUtils.RETURNINDEXEDARRAY:s.ArrayUtils.NUMERIC|s.ArrayUtils.DESCENDING|s.ArrayUtils.RETURNINDEXEDARRAY)},i.prototype.sortRowsByMembers=function(){var t=this,i=this.getColumnHierarchy(this._columnSortTuple);if(null!=i){var r,n,o=[],a=(r=i.levels_.getItemAt(1).type)==e.types.LevelType.YEAR||r==e.types.LevelType.MONTH||r==e.types.LevelType.DAY;for(r=0;r<this.extendedDataHeight;r++)n=this.getValue([r],this._columnSortTuple,this._columnSortMeasure),n=i.members.getItemAt(n),o.push(a?n.uniqueName:n.caption);if(a){for(this.sortedIndex={},a=i.sortChildren(i.allMember,!1,this._columnSortType),r=0;r<i.members.length;r++)n=i.members.getItemAt(r),this.sortedIndex[n.uniqueName]=a.indexOf(n.uniqueName);this.indices=s.ArrayUtils.sort(o,s.ArrayUtils.RETURNINDEXEDARRAY,(function(e,i){return t.sortFunction(e,i)}))}else this.indices=s.ArrayUtils.sort(o,this._columnSortType!=e.consts.SortType.DESC?s.ArrayUtils.RETURNINDEXEDARRAY:s.ArrayUtils.DESCENDING|s.ArrayUtils.RETURNINDEXEDARRAY)}},i.prototype.sortFunction=function(e,t){var i=this.sortedIndex[e],r=this.sortedIndex[t];return i>r?1:i<r?-1:0},i.prototype.calculate=function(e,t,i,r){return this.dataStorage.calculateFlat(e,t,i,r)},i.prototype.expandData=function(e){},i.prototype.collapseData=function(e){},i.prototype.expandAll=function(){},Object.defineProperty(i.prototype,"lastRowsTupleInteracted",{get:function(){return null},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"lastColsTupleInteracted",{get:function(){return null},enumerable:!0,configurable:!0}),i.prototype.expand=function(e,t,i,r){},i.prototype.collapse=function(e,t,i,r){},i.prototype.drillUp=function(e,t,i,r){},i.prototype.drillDown=function(e,t,i,r){},i.prototype.drillThrough=function(e,t,i){return[]},i.prototype.save=function(e,t,i,r,n){this.dataStorage.saveFlat(e,t,i,r,n)},Object.defineProperty(i.prototype,"isClassic",{get:function(){return!1},set:function(e){},enumerable:!0,configurable:!0}),i.dispose=function(){i.instance&&(i.instance.removeAllEventListeners(),i.instance.removeEventListeners()),i.instance=null},i}(t.EventDispatcher),i.FlatViewDataProvider=r}(e.data_||(e.data_={}))}(n||(n={})),function(e){!function(e){!function(e){var t=function(t){function i(){return t.call(this)||this}return a(i,t),i.getInstance=function(){return null==i._instance&&((i._instance=new i)._name="chart"+e.ViewDataProvider.counter),i._instance},Object.defineProperty(i.prototype,"isClassic",{get:function(){return!1},set:function(e){},enumerable:!0,configurable:!0}),i.dispose=function(){i._instance&&(i._instance.removeEventListeners(),i._instance.removeAllEventListeners()),i._instance=null},i}(e.ViewDataProvider);e.ChartDataProvider=t}(e.dataprovider_||(e.dataprovider_={}))}(e.data_||(e.data_={}))}(n||(n={})),function(e){var t;!function(t){var i=function(){function t(e,t){void 0===t&&(t=""),this.data={},this.uniqueName=e,this.caption=t}return Object.defineProperty(t.prototype,"caption",{get:function(){return this._caption},set:function(t){null==t&&(t=""),t=t.toString(),this._caption="number"==typeof t?""+t:""==t.trim()?e.model._labels.Labels.MEMBER_BLANK:t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"uniqueName",{get:function(){return this._uniqueName},set:function(e){this._uniqueName=e},enumerable:!0,configurable:!0}),t.prototype._getProperty=function(e){if(this._hasProperty(e))return this.data[e]},t.prototype._setProperty=function(e,t){this.data[e]=t},t.prototype._hasProperty=function(e){return this.data.hasOwnProperty(e)},t.prototype.toString=function(){return this.uniqueName},t.prototype.toObject=function(){var e={};return e.caption=this.caption,e.uniqueName=this.uniqueName,e},t.prototype.fromObject=function(e){for(var t in e)null!=this[t]&&(this[t]=e[t])},t}();t.GenericElement=i}((t=e.data_||(e.data_={}))._structure||(t._structure={}))}(n||(n={})),function(e){var t,i,r;t=e.data_||(e.data_={}),r=function(r){function n(e,o){void 0===o&&(o="");var a=r.call(this,e,o)||this;a._type=1,a._origin=0,a._folder="",a._allMemberName="",a._sortName=n.DEFAULT_SORT_NAME,a._sortAs=null,a._filter=new s.AssociativeArray,a._filterMembers=new s.AssociativeArray,a.__filterMembersChanged=!1,a._filterMembersNegated=new s.AssociativeArray,a.__filterMembersNegatedChanged=!1,a._members=new s.AssociativeArray,a._drilledDownMembers=new s.AssociativeArray,a._levels=new s.AssociativeArray,a._isHierarchy=!1,a._filterEnabled=!0,a._predefinedDrillDowns=[],a.cache=[],a.cacheWithDescendants=[],a._filterType=t.consts.FilterType.NONE,a._filterQuantity=-1,a._filterMeasureName="";var l=e+".(All)",c=new i.GenericLevel(l,"All",0);a.addLevel(c);var u=new i.GenericMember(c=e+".(All Member)","All");return a.addMember(u,l),a.allMemberName=c,a}return a(n,r),Object.defineProperty(n.prototype,"dimension",{get:function(){return this._dimension},set:function(e){this._dimension=e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"type",{get:function(){return this._type},set:function(e){this._type=e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"origin",{get:function(){return this._origin},set:function(e){this._origin=e,this._isHierarchy=1==(1&e)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"quantity",{get:function(){return this.members.length},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"folder",{get:function(){return this._folder},set:function(e){this._folder="undefined"==e?"":e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"levels_",{get:function(){return this._levels},set:function(e){},enumerable:!0,configurable:!0}),n.prototype.addLevel=function(e){e.hierarchy=this,this._levels.addItem(e.uniqueName,e),this._drilledDownMembers.addItemAt(e.uniqueName,new s.AssociativeArray,e.num)},n.prototype.addLevelAt=function(e,t){e.hierarchy=this,this._levels.addItemAt(e.uniqueName,e,t);for(var i=2;i<this._levels.length;i++)this._levels.getItemAt(i).num++;this._drilledDownMembers.addItemAt(e.uniqueName,new s.AssociativeArray,e.num)},n.prototype.findLevel=function(e){return this._levels.getItem(e)},Object.defineProperty(n.prototype,"isHierarchy",{get:function(){return 2<this.levels_.length},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isMeasures",{get:function(){return this.uniqueName==t.Cube.MEASURES_NAME},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"filterEnabled",{get:function(){return this._filterEnabled},set:function(e){this._filterEnabled=e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"members",{get:function(){return this._members},set:function(e){},enumerable:!0,configurable:!0}),n.prototype.clear=function(){this._members=new s.AssociativeArray},n.prototype.addMember=function(t,i,r){void 0===i&&(i=""),void 0===r&&(r=""),""==i&&(i=this.levels_&&1<this.levels_.length?this.levels_.getItemAt(1).uniqueName:this.uniqueName+"."+this.caption,this.caption==e.model._labels.Labels.MEMBER_BLANK&&(i=this.uniqueName+".[]")),null==this.findMember(t.uniqueName)&&(t.hierarchy_=this,t.parent=this.findMember(r)||this.allMember,t.level=this.findLevel(i),null!=t.parent&&t.parent.addChild(t),t.ordinal=this._members.length,this._members.addItem(t.uniqueName,t),this.cache=[],this.cacheWithDescendants=[])},n.prototype.drillDownMember=function(e){null!=e&&(e.isDrilledDown=!0,this._drilledDownMembers.getItem(e.level.uniqueName).addItem(e.uniqueName,e))},n.prototype.drillUpMember=function(e){e.isDrilledDown=!1,this._drilledDownMembers.getItem(e.level.uniqueName).removeItem(e.uniqueName),e=e.descendants;for(var t=0;t<e.length;t++){var i=e.getItemAt(t);i.isDrilledDown&&this.drillUpMember(i)}},n.prototype.drilledDownMembers=function(e){return this._drilledDownMembers.getItem(e.uniqueName)},Object.defineProperty(n.prototype,"drillDownDepth",{get:function(){for(var e=1;e<this.levels_.length;e++){var t=this.levels_.getItemAt(e);if(0==this.drilledDownMembers(t).length)return e}return 1},set:function(e){},enumerable:!0,configurable:!0}),n.prototype.findMemberByCaption=function(e){for(var t=0;t<this.members.length;t++)if(this.members.getItemAt(t).caption==e)return this.members.getItemAt(t);return null},n.prototype.findMember=function(e){return this.members.getItem(e)},n.prototype.clearSort=function(e){void 0===e&&(e=!1),this.sortName=e?t.consts.SortType.UNSORTED:n.DEFAULT_SORT_NAME},n.prototype.clearSortCache=function(){this.cache=[]},Object.defineProperty(n.prototype,"sortName",{get:function(){return this._sortName},set:function(e){this._sortName=e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"sortAs",{get:function(){return this._sortAs},set:function(e){this._sortAs=e},enumerable:!0,configurable:!0}),n.prototype.sort=function(){return this.sortChildren(this.allMember)},n.prototype.sortChildren=function(e,i,r){if(void 0===i&&(i=!0),void 0===r&&(r=""),null==e)return new s.AssociativeArray;if(t.consts.SortType.isValid(r)||(r=this._sortName),i){if(null!=this.cacheWithDescendants[e.ordinal]){if(null!=this.cacheWithDescendants[e.ordinal][r])return this.cacheWithDescendants[e.ordinal][r];if(!this.isHierarchy){if(r==t.consts.SortType.DESC&&null!=this.cacheWithDescendants[e.ordinal][t.consts.SortType.ASC])return this.cacheWithDescendants[e.ordinal][t.consts.SortType.DESC]=this.cacheWithDescendants[e.ordinal][t.consts.SortType.ASC].reverse(),this.cacheWithDescendants[e.ordinal][t.consts.SortType.DESC];if(r==t.consts.SortType.ASC&&null!=this.cacheWithDescendants[e.ordinal][t.consts.SortType.DESC])return this.cacheWithDescendants[e.ordinal][t.consts.SortType.ASC]=this.cacheWithDescendants[e.ordinal][t.consts.SortType.DESC].reverse(),this.cacheWithDescendants[e.ordinal][t.consts.SortType.ASC]}}}else if(null!=this.cache[e.ordinal]){if(null!=this.cache[e.ordinal][r])return this.cache[e.ordinal][r];if(!this.isHierarchy){if(r==t.consts.SortType.DESC&&null!=this.cache[e.ordinal][t.consts.SortType.ASC])return this.cache[e.ordinal][t.consts.SortType.DESC]=this.cache[e.ordinal][t.consts.SortType.ASC].reverse(),this.cache[e.ordinal][t.consts.SortType.DESC];if(r==t.consts.SortType.ASC&&null!=this.cache[e.ordinal][t.consts.SortType.DESC])return this.cache[e.ordinal][t.consts.SortType.ASC]=this.cache[e.ordinal][t.consts.SortType.DESC].reverse(),this.cache[e.ordinal][t.consts.SortType.ASC]}}var n,o=this._sortName;return this._sortName=r,1e6<(n=i?e.descendants:e.children).length?n=i?e.descendants:e.children:this._sortName==t.consts.SortType.UNSORTED?0<(n=i?e.descendants:e.children).length&&n.getItemAt(0).isAll&&n.removeItemAt(0):n=this.sortByCaption(e,i),i?(null==this.cacheWithDescendants[e.ordinal]&&(this.cacheWithDescendants[e.ordinal]=[]),this.cacheWithDescendants[e.ordinal][r]=n):(null==this.cache[e.ordinal]&&(this.cache[e.ordinal]=[]),this.cache[e.ordinal][r]=n),this._sortName=o,n},n.prototype._sortByCaptionOptimized=function(e,i){var r=(n=e.getChildrenCaptions()).captions,n=n.members;this._sortName==t.consts.SortType.DESC&&(r=r.reverse(),n=n.reverse());for(var o=new s.AssociativeArray,a=0;a<r.length;a++)if(null!=r[a]){var l;this._sortName==t.consts.SortType.ASC&&(l=s.ArrayUtils.sort(r[a],s.ArrayUtils.CASEINSENSITIVE|s.ArrayUtils.RETURNINDEXEDARRAY)),this._sortName==t.consts.SortType.DESC&&(l=s.ArrayUtils.sort(r[a],s.ArrayUtils.DESCENDING|s.ArrayUtils.CASEINSENSITIVE|s.ArrayUtils.RETURNINDEXEDARRAY));for(var c=0;c<l.length;c++){var u=n[a][l[c]];o.addUniqueItem(u.uniqueName,u),i&&0<(u=this.sortChildren(u)).length&&o.concat(u,!1)}}return o},n.prototype.checkIfMonth=function(i){try{if("month"==i.level.caption.toLowerCase())return!0;if(12<i.children.length)return!1;for(var r=0;r<i.children.length;r++){var n=i.children.getItemAt(r).caption.split(" ")[0];if(-1==e.model._labels.Labels.MONTHS_LABELS.indexOf(n)&&-1==e.model._labels.Labels.MONTHS_LABELS_SHORT.indexOf(n))return!1}var o=i.hierarchy_.levels_.indexOf(i.level.uniqueName);return!(i.hierarchy_.levels_.length<o+2||(i.hierarchy_.levels_.getItemAt(o+1).type=t.types.LevelType.MONTH,i.hierarchy_.levels_.getItemAt(o+2).type=t.types.LevelType.DAY,0))}catch(s){}return!1},n.prototype.sortByCaption=function(e,i){var r=this.levels_.getItemAt(e.level.num+1),n=r&&r.type==t.types.LevelType.YEAR,o=r&&r.type==t.types.LevelType.HALFYEAR,a=r&&r.type==t.types.LevelType.QUARTER,l=r&&r.type==t.types.LevelType.MONTH,c=r&&r.type==t.types.LevelType.WEEK,u=r&&r.type==t.types.LevelType.DAY,h=r&&r.type==t.types.LevelType.HOUR,d=r&&r.type==t.types.LevelType.MINUTE,A=r&&r.type==t.types.LevelType.NUMBER,p=r&&r.type==t.types.LevelType.TIME||r&&r.type==t.types.LevelType.DATE,f=r&&r.type==t.types.LevelType.TIME_DATE,g=this.sortAs==t.consts.SortType.NUMERIC_RANGE;if(!(a||l||c||p||u||h||d||A||f)){if(1e3<e.children.length)return this._sortByCaptionOptimized(e,i);this.checkIfMonth(e)&&(l=!0)}var m=e.children.toArray();for(a||l||c||u||h||d||f||o||n?m=this.sortOrdinal(m,r?r.type:-1):p?m=this.sortDate(m):A?(this._sortName==t.consts.SortType.ASC&&s.ArrayUtils.sortOn(m,"levelOrdinal",s.ArrayUtils.NUMERIC),this._sortName==t.consts.SortType.DESC&&s.ArrayUtils.sortOn(m,"levelOrdinal",s.ArrayUtils.DESCENDING|s.ArrayUtils.NUMERIC)):g?m.sort(this.numericRangeSort):(this._sortName==t.consts.SortType.ASC&&s.ArrayUtils.sortOn(m,"caption",s.ArrayUtils.CASEINSENSITIVE),this._sortName==t.consts.SortType.DESC&&s.ArrayUtils.sortOn(m,"caption",s.ArrayUtils.DESCENDING|s.ArrayUtils.CASEINSENSITIVE)),r=new s.AssociativeArray,n=0;n<m.length;n++)r.addUniqueItem((o=m[n]).uniqueName,o),i&&!e.isLeaf&&0<(o=this.sortChildren(o,i)).length&&r.concat(o,!1);return r},n.prototype.sortOrdinal=function(e,i){return i==t.types.LevelType.MONTH?e=this.sortMonths(e):i==t.types.LevelType.DAY?e=this.sortWeekdays(e):i==t.types.LevelType.QUARTER||i==t.types.LevelType.HALFYEAR||i==t.types.LevelType.YEAR?e=s.ArrayUtils.sortOn(e,"caption",s.ArrayUtils.CASEINSENSITIVE|(this.sortName==t.consts.SortType.DESC?s.ArrayUtils.DESCENDING:0)):(this.sortName==t.consts.SortType.ASC&&s.ArrayUtils.sortOn(e,"levelOrdinal",s.ArrayUtils.NUMERIC),this.sortName==t.consts.SortType.DESC&&s.ArrayUtils.sortOn(e,"levelOrdinal",s.ArrayUtils.DESCENDING|s.ArrayUtils.NUMERIC)),e},n.prototype.sortMonths=function(e){for(var i=this,r=[],n=[],o=0;o<e.length;++o){var a=e[o];this._checkIfMonth(a.caption)?n.push(a):r.push(a)}return this.sortName==t.consts.SortType.ASC&&s.ArrayUtils.sortOn(r,"caption",s.ArrayUtils.CASEINSENSITIVE),this.sortName==t.consts.SortType.DESC&&s.ArrayUtils.sortOn(r,"caption",s.ArrayUtils.DESCENDING|s.ArrayUtils.CASEINSENSITIVE),n.sort((function(e,t){return i.dateTimeMonthSort(e,t)})),n.concat(r)},n.prototype.sortWeekdays=function(e){for(var i=this,r=[],n=[],o=0;o<e.length;++o){var a=e[o];this._checkIfWeekday(a.caption)?n.push(a):r.push(a)}return this.sortName==t.consts.SortType.ASC&&s.ArrayUtils.sortOn(r,"caption",s.ArrayUtils.CASEINSENSITIVE|s.ArrayUtils.NUMERIC),this.sortName==t.consts.SortType.DESC&&s.ArrayUtils.sortOn(r,"caption",s.ArrayUtils.DESCENDING|s.ArrayUtils.CASEINSENSITIVE|s.ArrayUtils.NUMERIC),n.sort((function(e,t){return i.weekDaySort(e,t)})),n.concat(r)},n.prototype._checkIfMonth=function(t){return-1!=e.model._labels.Labels.MONTHS_LABELS.indexOf(t)||-1!=e.model._labels.Labels.MONTHS_LABELS_SHORT.indexOf(t)},n.prototype._checkIfWeekday=function(t){return-1!=e.model._labels.Labels.WEEKDAYS_LABELS.indexOf(t)||-1!=e.model._labels.Labels.WEEKDAYS_LABELS_SHORT.indexOf(t)},n.prototype.dateTimeMonthSort=function(i,r){var n=e.model._labels.Labels.MONTHS_LABELS.indexOf(this.sortName==t.consts.SortType.ASC?i.caption:r.caption);-1==n&&(n=e.model._labels.Labels.MONTHS_LABELS_SHORT.indexOf(this.sortName==t.consts.SortType.ASC?i.caption:r.caption));var o=e.model._labels.Labels.MONTHS_LABELS.indexOf(this.sortName==t.consts.SortType.ASC?r.caption:i.caption);return-1==o&&(o=e.model._labels.Labels.MONTHS_LABELS_SHORT.indexOf(this.sortName==t.consts.SortType.ASC?r.caption:i.caption)),n>o?1:n<o?-1:0},n.prototype.weekDaySort=function(i,r){var n=e.model._labels.Labels.WEEKDAYS_LABELS.indexOf(this.sortName==t.consts.SortType.ASC?i.caption:r.caption);-1==n&&(n=e.model._labels.Labels.WEEKDAYS_LABELS_SHORT.indexOf(this.sortName==t.consts.SortType.ASC?i.caption:r.caption));var o=e.model._labels.Labels.WEEKDAYS_LABELS.indexOf(this.sortName==t.consts.SortType.ASC?r.caption:i.caption);return-1==o&&(o=e.model._labels.Labels.WEEKDAYS_LABELS_SHORT.indexOf(this.sortName==t.consts.SortType.ASC?r.caption:i.caption)),n>o?1:n<o?-1:0},n.prototype.sortDate=function(e){return this._sortName==t.consts.SortType.ASC&&s.ArrayUtils.sortOn(e,"levelOrdinal",s.ArrayUtils.NUMERIC),this._sortName==t.consts.SortType.DESC&&s.ArrayUtils.sortOn(e,"levelOrdinal",s.ArrayUtils.DESCENDING|s.ArrayUtils.NUMERIC),e},n.prototype.numericRangeSort=function(e,t){var i=e.caption.match(/(?:\d*\.)?\d+/),r=t.caption.match(/(?:\d*\.)?\d+/);return(i=i&&0<i.length?parseFloat(i[0]):Number.POSITIVE_INFINITY)>(r=r&&0<r.length?parseFloat(r[0]):Number.POSITIVE_INFINITY)?1:i<r?-1:0},n.prototype.membersByLevel=function(e){e=this._levels.getItem(e).num;for(var t=new s.AssociativeArray,i=this.sort(),r=0;r<i.length;r++){var n=i.getItemAt(r);n&&n.level.num==e&&t.addItem(n.uniqueName,n)}return t},Object.defineProperty(n.prototype,"filter",{get:function(){return 0<this._filter.length?this._filter:this.filterMembers},set:function(e){this._filter=e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"filterMembers",{get:function(){return this.__filterMembersNegatedChanged&&(this._filterMembers=new s.AssociativeArray,0<this._filterMembersNegated.length&&(this._filterMembers=this.createOpposite(this._filterMembersNegated)),this.__filterMembersNegatedChanged=!1),this._filterMembers},set:function(e){e.length+1==this.members.length&&(e=new s.AssociativeArray),this.__filterMembersChanged=!0,this._filterMembers=e,this._filterMembersNegated=new s.AssociativeArray},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"filterMembersNegated",{get:function(){return this.__filterMembersChanged&&(this._filterMembersNegated=new s.AssociativeArray,0<this._filterMembers.length&&(this._filterMembersNegated=this.createOpposite(this._filterMembers)),this.__filterMembersChanged=!1),this._filterMembersNegated},set:function(e){e.length+1==this.members.length&&(e=new s.AssociativeArray),this.__filterMembersNegatedChanged=!0,this._filterMembersNegated=e,this._filterMembers=new s.AssociativeArray},enumerable:!0,configurable:!0}),n.prototype.createOpposite=function(e){for(var t=this.members.slice(1),i=0;i<e.length;i++){var r=e.getItemAt(i);t.removeItem(r.uniqueName),this.removeMemberChildren(t,r),r.parent&&this.removeMemberParent(t,r.parent)}return this.checkMemberChildren(t,this.allMember),t},n.prototype.checkMemberChildren=function(e,t){for(var i=0;i<t.children.length;i++){var r=t.children.getItemAt(i);0<r.children.length&&(e.getItem(r.uniqueName)?e.getItem(r.children.getItemAt(0).uniqueName)&&this.removeMemberChildren(e,r):this.checkMemberChildren(e,r))}},n.prototype.removeMemberChildren=function(e,t){if(t)for(var i=t.children,r=0;r<i.length;r++)e.removeItem(i.getItemAt(r).uniqueName),this.removeMemberChildren(e,i.getItemAt(r))},n.prototype.removeMemberParent=function(e,t){t&&(e.removeItem(t.uniqueName),t.parent&&this.removeMemberParent(e,t.parent))},Object.defineProperty(n.prototype,"filterType",{get:function(){return-1==this._filterQuantity?t.consts.FilterType.NONE:this._filterType},set:function(e){e=e.toLowerCase(),this._filterType=e==t.consts.FilterType.TOP||e==t.consts.FilterType.BOTTOM?e:t.consts.FilterType.NONE},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"filterQuantity",{get:function(){return this._filterQuantity},set:function(e){isNaN(e)||1>e?(this._filterQuantity=-1,this._filterType=t.consts.FilterType.NONE):this._filterQuantity=e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"filterMeasureName",{get:function(){return this._filterMeasureName},set:function(e){this._filterMeasureName=e},enumerable:!0,configurable:!0}),n.prototype.clearFilter=function(){this.clearMembersFilter(),this.clearValuesFilter()},n.prototype.clearMembersFilter=function(){this._filter=new s.AssociativeArray,this._filterMembers=new s.AssociativeArray,this._filterMembersNegated=new s.AssociativeArray},n.prototype.clearValuesFilter=function(){this._filter=new s.AssociativeArray,this._filterQuantity=-1,this._filterType=t.consts.FilterType.NONE,this._filterMeasureName=""},n.prototype.hasFilter=function(){return this.hasMembersFilter()||this.hasValuesFilter()},n.prototype.hasMembersFilter=function(){return 0<this._filterMembers.length||0<this._filterMembersNegated.length},n.prototype.hasValuesFilter=function(){return this._filterType&&this.filterType!=t.consts.FilterType.NONE},n.prototype.filterByLevel=function(e){for(var t=new s.AssociativeArray,i=0<this._filter.length?this._filter:this._filterMembers,r=0;r<i.length;r++){var n=i.getItemAt(r);n.level.num==e&&t.addItem(n.uniqueName,n)}return t},Object.defineProperty(n.prototype,"allMemberName",{get:function(){return this._allMemberName},set:function(e){this._allMemberName=e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"allMember",{get:function(){return this._allMember||(this._allMember=this.findMember(this._allMemberName),this.drillDownMember(this._allMember)),this._allMember},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"predefinedDrillDowns",{get:function(){return this._predefinedDrillDowns},set:function(e){this._predefinedDrillDowns=e},enumerable:!0,configurable:!0}),n.toObject=function(e){var t={};return t.uniqueName=e.uniqueName,t.caption=e.caption,t.filterEnabled=e.filterEnabled,t.sortName=e.sortName,t.sortAs=e.sortAs,t.type=e.type,t.filter=n.filterToObject(e),t},n.filterToObject=function(e){if(0==e.hasFilter())return null;var t={};return e.hasValuesFilter()&&(t={type:e.filterType,quantity:e.filterQuantity,measure:e.filterMeasureName,measureName:e.filterMeasureName}),e.hasMembersFilter()&&(e.filterMembers.length<e.members.length/2?t.members=e.filterMembers.toArray(!0):(t.negation=!0,t.members=e.filterMembersNegated.toArray(!0))),t},n.fromObject=function(e,t){return void 0===t&&(t=null),null==t&&(t=new n(e.uniqueName)),e.hasOwnProperty("caption")&&(t.caption=e.caption),e.hasOwnProperty("sortName")&&(t.sortName=e.sortName),e.hasOwnProperty("sortAs")&&(t.sortAs=e.sortAs),e.hasOwnProperty("filterEnabled")&&(t.filterEnabled=e.filterEnabled),e.hasOwnProperty("type")&&(t.type=e.type),e.hasOwnProperty("origin")&&(t.origin=e.origin),e.hasOwnProperty("folder")&&(t.folder=e.folder),e.hasOwnProperty("filter")&&n.filterFromObject(e.filter,t),e.hasOwnProperty("allMemberName")&&(t.allMemberName=e.allMemberName),t},n.filterFromObject=function(e,i){if(null!=e){if(e.hasOwnProperty("members")){for(var r,n,o=new s.AssociativeArray,a=0;a<e.members.length;a++)null!=(n=i.findMember(r="string"==typeof e.members[a]?e.members[a]:e.members[a].uniqueName))&&o.addItem(r,n);e.negation?i.filterMembersNegated=o:i.filterMembers=o}r=e.hasOwnProperty("type")?e.type:t.consts.FilterType.NONE,n=e.hasOwnProperty("quantity")?Number(e.quantity):-1,o="",e.hasOwnProperty("measureName")&&(o=e.measureName),e.hasOwnProperty("measure")&&(o=e.measure),r!=t.consts.FilterType.NONE&&(i.filterType=r,i.filterQuantity=n,i.filterMeasureName=o)}},n.DEFAULT_SORT_NAME="asc",n}((i=t._structure||(t._structure={})).GenericElement),i.GenericHierarchy=r}(n||(n={})),function(e){!function(e){!function(e){var t=function(e){function t(t,i,r){return void 0===i&&(i=""),void 0===r&&(r=0),(t=e.call(this,t,i)||this)._type=1,t._properties=new s.AssociativeArray,t._number=r,t}return a(t,e),Object.defineProperty(t.prototype,"num",{get:function(){return this._number},set:function(e){this._number=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"type",{get:function(){return this._type},set:function(e){this._type=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isLast",{get:function(){return this._hierarchy.levels_.length-1==this._number},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hierarchy",{get:function(){return this._hierarchy},set:function(e){this._hierarchy=e},enumerable:!0,configurable:!0}),t}(e.GenericElement);e.GenericLevel=t}(e._structure||(e._structure={}))}(e.data_||(e.data_={}))}(n||(n={})),function(e){!function(e){var t,i;i=function(t){function i(e,i){var r=t.call(this,e,i)||this;return r._ordinal=1,r._levelOrdinal=0,r._isDrilledDown=!1,r._numDescendants=-1,r._hasCaptionSorting=-1,r}return a(i,t),Object.defineProperty(i.prototype,"ordinal",{get:function(){return this._ordinal},set:function(e){this._ordinal=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"levelOrdinal",{get:function(){return this._levelOrdinal},set:function(e){this._levelOrdinal=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"hierarchy_",{get:function(){return this._hierarchy},set:function(e){this._hierarchy=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"parent",{get:function(){return this._parent},set:function(e){this._parent=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"root",{get:function(){if(2>this._level.num)return this;var e=this;do{e=e.parent}while(1<e.level.num);return e},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"level",{get:function(){return this._level},set:function(e){this._level=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"isAll",{get:function(){return null!=this.hierarchy_.allMember&&this.hierarchy_.allMember.uniqueName==this.uniqueName},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"isDrilledDown",{get:function(){return this._isDrilledDown},set:function(e){this._isDrilledDown=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"children",{get:function(){return this._hasProperty("_children_")?this._getProperty("_children_"):new s.AssociativeArray},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"descendants",{get:function(){if(this._hasProperty("_descendants_"))return this._getProperty("_descendants_");var e=new s.AssociativeArray;if(e.addItem(this.uniqueName,this),0==this.numDescendants)return e;for(var t=this.children.length,i=0;i<t;i++){var r=this.children.getItemAt(i);r.isLeaf?e.addItem(r.uniqueName,r):0<r.numDescendants?e.concat(r.descendants,!1):e.addItem(r.uniqueName,r)}return 0<e.length&&this._setProperty("descendants",e),e},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"numDescendants",{get:function(){if(-1<this._numDescendants)return this._numDescendants;if(!this._hasProperty("_children_"))return this._numDescendants=0;for(var e=this.children.length,t=e,i=0;i<e;i++)t+=this.children.getItemAt(i).numDescendants;return t},set:function(e){},enumerable:!0,configurable:!0}),i.prototype.getChildrenCaptions=function(){return{captions:this.captions,members:this.captionMembers}},i.prototype.clearDescendantsCache=function(){this._hasProperty("_descendants_")&&delete this._descendants_,this.parent&&this.parent.clearDescendantsCache()},Object.defineProperty(i.prototype,"captions",{get:function(){return this._hasProperty("_captions_")||(this.captions=[]),this._getProperty("_captions_")},set:function(e){this._setProperty("_captions_",e)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"captionMembers",{get:function(){return this._hasProperty("_captionMembers_")||(this.captionMembers=[]),this._getProperty("_captionMembers_")},set:function(e){this._setProperty("_captionMembers_",e)},enumerable:!0,configurable:!0}),i.prototype.addChild=function(e){var t=this.children;t.addItem(e.uniqueName,e),this._setProperty("_children_",t),e.parent=this,this._numDescendants=-1,this.clearDescendantsCache(),1==this.hasCaptionSorting(e)&&(t=e.caption.charAt(0).toLowerCase().charCodeAt(0),null==this.captions[t]&&(this.captions[t]=[],this.captionMembers[t]=[]),this.captions[t].push(e.caption),this.captionMembers[t].push(e)),1e6<this.children.length&&(this._hasCaptionSorting=0,this.captions=[],this.captionMembers=[])},i.prototype.removeChild=function(e){if(this.children.removeItem(e.uniqueName),this.clearDescendantsCache(),1==this.hasCaptionSorting(e)){var t=e.caption.charAt(0).toLowerCase().charCodeAt(0);e=this.captions[t].indexOf(e.caption),this.captions[t].splice(e,1),this.captionMembers[t].splice(e,1)}},i.prototype.hasCaptionSorting=function(t){return-1!=this._hasCaptionSorting?this._hasCaptionSorting:this._hasCaptionSorting=t.level.type==e.types.LevelType.HOUR||t.level.type==e.types.LevelType.MINUTE||t.level.type==e.types.LevelType.DAY||t.level.type==e.types.LevelType.NUMBER?0:1},i.prototype.toString=function(){return this.uniqueName+" : "+this._ordinal},Object.defineProperty(i.prototype,"isLeaf",{get:function(){return!this._hasProperty("_children_")||0==this.children.length},set:function(e){},enumerable:!0,configurable:!0}),i.toObject=function(e){var t={};return t.uniqueName=e.uniqueName,t.caption=e.caption,t.hierarchyName=e.hierarchy_.uniqueName,t},i}((t=e._structure||(e._structure={})).GenericElement),t.GenericMember=i}(e.data_||(e.data_={}))}(n||(n={})),function(e){var t,i,r;t=e.data_||(e.data_={}),r=function(r){function n(e,i){void 0===i&&(i="");var n=r.call(this,e,i)||this;return n._folder="",n._format="",n._type=t.types.MeasureType.NUMBER,n._grandTotalCaption="",n._defaultAggregation=t.consts.AggregationName.SUM,n._aggregation="",n._availableAggregations=[],n._params=[],n._formula="",n._individual=!1,n._hidden=!1,n._defaultAggregation=t.consts.AggregationName.SUM,n}return a(n,r),Object.defineProperty(n.prototype,"caption",{get:function(){if(this._customCaption)return this._customCaption;if(0==e.model._options.OptionsManager.showAggregationLabels)return this._caption;switch(this.aggregation){case t.consts.AggregationName.COUNT:return s.StringUtils.bind(e.model._labels.Labels.COUNT_TOTAL_CAPTION,this._caption);case t.consts.AggregationName.PRODUCT:return s.StringUtils.bind(e.model._labels.Labels.PRODUCT_TOTAL_CAPTION,this._caption);case t.consts.AggregationName.DISTINCT_COUNT:return s.StringUtils.bind(e.model._labels.Labels.DISTINCT_COUNT_TOTAL_CAPTION,this._caption);case t.consts.AggregationName.AVERAGE:return s.StringUtils.bind(e.model._labels.Labels.AVERAGE_TOTAL_CAPTION,this._caption);case t.consts.AggregationName.MAX:return s.StringUtils.bind(e.model._labels.Labels.MAX_TOTAL_CAPTION,this._caption);case t.consts.AggregationName.MIN:return s.StringUtils.bind(e.model._labels.Labels.MIN_TOTAL_CAPTION,this._caption);case t.consts.AggregationName.PERCENT:return s.StringUtils.bind(e.model._labels.Labels.PERCENT_TOTAL_CAPTION,this._caption);case t.consts.AggregationName.PERCENT_COLUMN:return s.StringUtils.bind(e.model._labels.Labels.PERCENT_COLUMN_TOTAL_CAPTION,this._caption);case t.consts.AggregationName.PERCENT_ROW:return s.StringUtils.bind(e.model._labels.Labels.PERCENT_ROW_TOTAL_CAPTION,this._caption);case t.consts.AggregationName.INDEX:return s.StringUtils.bind(e.model._labels.Labels.INDEX_TOTAL_CAPTION,this._caption);case t.consts.AggregationName.DIFFERENCE:return s.StringUtils.bind(e.model._labels.Labels.DIFFERENCE_TOTAL_CAPTION,this._caption);case t.consts.AggregationName.PERCENT_DIFFERENCE:return s.StringUtils.bind(e.model._labels.Labels.PERCENT_DIFFERENCE_TOTAL_CAPTION,this._caption);case t.consts.AggregationName.MEDIAN:return s.StringUtils.bind(e.model._labels.Labels.MEDIAN_TOTAL_CAPTION,this._caption);case t.consts.AggregationName.STDEVP:return s.StringUtils.bind(e.model._labels.Labels.STDEVP_TOTAL_CAPTION,this._caption);case t.consts.AggregationName.STDEVS:return s.StringUtils.bind(e.model._labels.Labels.STDEVS_TOTAL_CAPTION,this._caption);case t.consts.AggregationName.RUNNING_TOTALS:return s.StringUtils.bind(e.model._labels.Labels.RUNNING_TOTALS_TOTAL_CAPTION,this._caption);case t.consts.AggregationName.NONE:return this._caption}return s.StringUtils.bind(e.model._labels.Labels.SUM_TOTAL_CAPTION,this._caption)},set:function(t){this._caption=""==t.trim()?e.model._labels.Labels.MEMBER_BLANK:t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"originalCaption",{get:function(){return this._caption},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"customCaption",{get:function(){return this._customCaption},set:function(e){this._customCaption=e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"folder",{get:function(){return this._folder},set:function(e){this._folder=e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"format",{get:function(){return this._format},set:function(e){this._format=e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"individual",{get:function(){return this._individual},set:function(e){this._individual=e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"hidden",{get:function(){return this._hidden},set:function(e){this._hidden=e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"type",{get:function(){return this._type},set:function(e){this._type=e,this._type!=t.types.MeasureType.NUMBER&&this._type!=t.types.MeasureType.TIME&&(this._type==t.types.MeasureType.DATE||this._type==t.types.MeasureType.DATETIME?(this.availableAggregations=[t.consts.AggregationName.COUNT,t.consts.AggregationName.DISTINCT_COUNT,t.consts.AggregationName.MAX,t.consts.AggregationName.MIN],this._defaultAggregation=t.consts.AggregationName.MAX):(this.availableAggregations=[t.consts.AggregationName.COUNT,t.consts.AggregationName.DISTINCT_COUNT],this._defaultAggregation=t.consts.AggregationName.COUNT))},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"grandTotalCaption",{get:function(){if(this.calculated)return this._caption;if(this._grandTotalCaption)return this._grandTotalCaption;if(0==e.model._options.OptionsManager.showAggregationLabels)return this._caption;switch(this.aggregation){case t.consts.AggregationName.SUM:return s.StringUtils.bind(e.model._labels.Labels.SUM_GRAND_TOTAL_CAPTION,this._caption);case t.consts.AggregationName.COUNT:return s.StringUtils.bind(e.model._labels.Labels.COUNT_GRAND_TOTAL_CAPTION,this._caption);case t.consts.AggregationName.PRODUCT:return s.StringUtils.bind(e.model._labels.Labels.PRODUCT_GRAND_TOTAL_CAPTION,this._caption);case t.consts.AggregationName.DISTINCT_COUNT:return s.StringUtils.bind(e.model._labels.Labels.DISTINCT_COUNT_GRAND_TOTAL_CAPTION,this._caption);case t.consts.AggregationName.AVERAGE:return s.StringUtils.bind(e.model._labels.Labels.AVERAGE_GRAND_TOTAL_CAPTION,this._caption);case t.consts.AggregationName.MAX:return s.StringUtils.bind(e.model._labels.Labels.MAX_GRAND_TOTAL_CAPTION,this._caption);case t.consts.AggregationName.MIN:return s.StringUtils.bind(e.model._labels.Labels.MIN_GRAND_TOTAL_CAPTION,this._caption);case t.consts.AggregationName.PERCENT:return s.StringUtils.bind(e.model._labels.Labels.PERCENT_GRAND_TOTAL_CAPTION,this._caption);case t.consts.AggregationName.PERCENT_COLUMN:return s.StringUtils.bind(e.model._labels.Labels.PERCENT_COLUMN_GRAND_TOTAL_CAPTION,this._caption);case t.consts.AggregationName.PERCENT_ROW:return s.StringUtils.bind(e.model._labels.Labels.PERCENT_ROW_GRAND_TOTAL_CAPTION,this._caption);case t.consts.AggregationName.INDEX:return s.StringUtils.bind(e.model._labels.Labels.INDEX_GRAND_TOTAL_CAPTION,this._caption);case t.consts.AggregationName.DIFFERENCE:return s.StringUtils.bind(e.model._labels.Labels.DIFFERENCE_GRAND_TOTAL_CAPTION,this._caption);case t.consts.AggregationName.PERCENT_DIFFERENCE:return s.StringUtils.bind(e.model._labels.Labels.PERCENT_DIFFERENCE_GRAND_TOTAL_CAPTION,this._caption);case t.consts.AggregationName.MEDIAN:return s.StringUtils.bind(e.model._labels.Labels.MEDIAN_GRAND_TOTAL_CAPTION,this._caption);case t.consts.AggregationName.STDEVP:return s.StringUtils.bind(e.model._labels.Labels.STDEVP_GRAND_TOTAL_CAPTION,this._caption);case t.consts.AggregationName.STDEVS:return s.StringUtils.bind(e.model._labels.Labels.STDEVS_GRAND_TOTAL_CAPTION,this._caption);case t.consts.AggregationName.RUNNING_TOTALS:return s.StringUtils.bind(e.model._labels.Labels.RUNNING_TOTALS_GRAND_TOTAL_CAPTION,this._caption)}return this._caption},set:function(e){this._grandTotalCaption=e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"aggregation",{get:function(){return""==this._aggregation?this._defaultAggregation:this._aggregation},set:function(e){e&&e.toLowerCase()!=this._aggregation?(e=e.toLowerCase(),t.consts.AggregationName.deprecatedType(e)&&(e=t.consts.AggregationName.fromDeprecatedToValid(e)),t.consts.AggregationName.validType(e)||this.calculated&&e==t.consts.AggregationName.NONE?(this._grandTotalCaption=this._customCaption=void 0,this._aggregation=e,!this.calculated&&0<this.availableAggregations.length&&-1==this.availableAggregations.indexOf(e)&&(this._aggregation=this._availableAggregations[0])):this.resolveColisionsForAggregations()):""==e&&this.resolveColisionsForAggregations()},enumerable:!0,configurable:!0}),n.prototype.resolveColisionsForAggregations=function(){this._grandTotalCaption=this._customCaption=void 0,this._aggregation=0<this._availableAggregations.length?this._availableAggregations[0]:this._defaultAggregation},Object.defineProperty(n.prototype,"availableAggregations",{get:function(){return this._availableAggregations},set:function(e){if(this._availableAggregations=[],null==e)this._availableAggregations=[];else if(this.type!=t.types.MeasureType.NUMBER&&this._type!=t.types.MeasureType.TIME&&0==this._availableAggregations.length)this._availableAggregations=this._type==t.types.MeasureType.DATE||this._type==t.types.MeasureType.DATETIME?[t.consts.AggregationName.COUNT,t.consts.AggregationName.DISTINCT_COUNT,t.consts.AggregationName.MAX,t.consts.AggregationName.MIN]:[t.consts.AggregationName.COUNT,t.consts.AggregationName.DISTINCT_COUNT];else for(var i=0;i<e.length;i++){var r=e[i].trim().toLowerCase();t.consts.AggregationName.deprecatedType(r)&&(r=t.consts.AggregationName.fromDeprecatedToValid(r)),(this.type==t.types.MeasureType.NUMBER||this._type==t.types.MeasureType.TIME||r==t.consts.AggregationName.COUNT||r==t.consts.AggregationName.DISTINCT_COUNT)&&t.consts.AggregationName.validType(r)&&this._availableAggregations.push(r)}},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"params",{get:function(){return this._params},set:function(e){this._params=e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"calculated",{get:function(){return null!=this.formula&&""!=this.formula},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"formula",{get:function(){return this._formula},set:function(e){this._formula=e},enumerable:!0,configurable:!0}),n.toObject=function(e){var t={};return t.uniqueName=e.uniqueName,t.name=e.originalCaption,e.calculated&&(t.formula=e.formula),t.format=e.format,t.individual=e.individual,t.availableAggregations=e.availableAggregations,t.aggregation=e.aggregation,t.caption=e.caption,t.originalCaption=e.originalCaption,t.grandTotalCaption=e.grandTotalCaption,t.folder=e.folder,t.type=e.type,t.calculated=e.calculated,t},n.fromObject=function(e,r){void 0===r&&(r=null);var n=e.uniqueName;return null==r&&(r=new i.GenericMeasure(n)),e.hasOwnProperty("type")&&(r.type="string"==typeof e.type?t.types.MeasureType.fromColumnType(parseInt(e.type)):e.type),e.hasOwnProperty("individual")&&(r.individual=e.individual),e.hasOwnProperty("formula")&&(r.formula=e.formula),e.hasOwnProperty("format")&&(r.format=e.format),e.hasOwnProperty("availableAggregations")&&(r.availableAggregations=e.availableAggregations),r.aggregation=e.hasOwnProperty("aggregation")?e.aggregation:r.calculated?t.consts.AggregationName.NONE:"",e.hasOwnProperty("caption")&&(r.caption=e.caption),e.hasOwnProperty("name")&&(r.caption=e.name),e.hasOwnProperty("grandTotalCaption")&&(r.grandTotalCaption=e.grandTotalCaption),e.hasOwnProperty("folder")&&(r.folder=e.folder),r.calculated&&(n=new s.Lexer,r.params=n.parse(r.formula)),r},n.prototype.hasDefaultParams=function(){var e=new n("","");return!(this.individual!=e.individual||this.formula!=e.formula||this.format!=e.format||this.type==t.types.MeasureType.COUNT&&this.aggregation!=t.consts.AggregationName.COUNT&&this.aggregation!=t.consts.AggregationName.NONE||this.type==t.types.MeasureType.NUMBER&&this.aggregation!=t.consts.AggregationName.SUM&&this.aggregation!=t.consts.AggregationName.NONE)},n.prototype.getFormat=function(i){var r;return void 0===i&&(i=!1),r=e.model.format.FormatManager.formatExists(this.format)?e.model.format.FormatManager.getFormat(this.format):""!=this.format&&e.model.format.FormatManager.formatExists("")?e.model.format.FormatManager.getFormat(""):e.model.format.FormatManager.getDefaultFormat(),i&&s.nullOrUndefined(r.params.textAlign)&&this.type!=t.types.MeasureType.NUMBER&&this.type!=t.types.MeasureType.TIME&&this.type!=t.types.MeasureType.DATETIME&&((r=r.clone()).textAlign="left"),r},n}((i=t._structure||(t._structure={})).GenericElement),i.GenericMeasure=r}(n||(n={})),function(e){!function(e){!function(e){var t=function(e){function t(t,i){void 0===i&&(i="");var r=e.call(this,t,i)||this;return r.hierarchies=new s.AssociativeArray,r}return a(t,e),Object.defineProperty(t.prototype,"hierarchies",{get:function(){return this._hierarchies},set:function(e){this._hierarchies=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"type",{get:function(){return this._type},set:function(e){this._type=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"structure",{get:function(){return this._structure},set:function(e){this._structure=e},enumerable:!0,configurable:!0}),t.prototype.addHierarchy=function(e){e.dimension=this,this._hierarchies.addItem(e.uniqueName,e)},t.prototype.findHierarchy=function(e){return this._hierarchies.getItem(e)},t.fromObject=function(e,i){return void 0===i&&(i=null),null==i&&(i=new t(e.uniqueName)),void 0!==e.caption&&(i.caption=e.caption),void 0!==e.type&&(i.type=e.type),i},t}(e.GenericElement);e.GenericDimension=t}(e._structure||(e._structure={}))}(e.data_||(e.data_={}))}(n||(n={})),function(e){var t,i,r;t=e.data_||(e.data_={}),i=t._structure||(t._structure={}),r=function(){function r(){this._isComplete=!1,this.id=this.deleteId="",this.levels=[],this._dimensions=new s.AssociativeArray,this._measures=new s.AssociativeArray,this._measureToHierarchyMap={},this._hierarchyToMeasureMap={};var e=new i.GenericHierarchy(t.Cube.MEASURES_NAME,t.Cube.MEASURES_NAME),r=new i.GenericDimension(t.Cube.MEASURES_NAME,t.Cube.MEASURES_NAME);r.type=t.types.DimensionType.MD_DIMTYPE_MEASURE,r.addHierarchy(e),this.addDimension(r),this.fields=new s.AssociativeArray,this.types=[],this.id=this.deleteId=""}return Object.defineProperty(r.prototype,"isComplete",{get:function(){return this._isComplete},set:function(e){this._isComplete=e},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"dimensions",{get:function(){return this._dimensions},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"measures_",{get:function(){return this._measures},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"calculatedMeasures",{get:function(){for(var e=new s.AssociativeArray,t=0;t<this._measures.length;t++){var i=this._measures.getItemAt(t);i.calculated&&e.addItem(i.uniqueName,i)}return e},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"regularMeasures",{get:function(){for(var e=new s.AssociativeArray,t=0;t<this._measures.length;t++){var i=this._measures.getItemAt(t);i.calculated||e.addItem(i.uniqueName,i)}return e},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"measuresHierarchy",{get:function(){if(null==(e=this.findDimension(t.Cube.MEASURES_NAME))){var e,r=new i.GenericHierarchy(t.Cube.MEASURES_NAME,t.Cube.MEASURES_NAME);(e=new i.GenericDimension(t.Cube.MEASURES_NAME,t.Cube.MEASURES_NAME)).type=t.types.DimensionType.MD_DIMTYPE_MEASURE,e.addHierarchy(r),this.addDimension(e)}return e.findHierarchy(t.Cube.MEASURES_NAME)},set:function(e){},enumerable:!0,configurable:!0}),r.prototype.addDimension=function(e){null==this.findDimension(e.uniqueName)&&(e.structure=this,this.dimensions.addItem(e.uniqueName,e))},r.prototype.findDimension=function(e){return this.dimensions.getItem(e)},r.prototype.allHierarchies=function(e){void 0===e&&(e=!1);for(var i=new s.AssociativeArray,r=0;r<this.dimensions.length;r++){var n=this.dimensions.getItemAt(r);(e||n.type!=t.types.DimensionType.MD_DIMTYPE_MEASURE)&&(i=i.concat(n.hierarchies))}return i},r.prototype.findHierarchy=function(e){return this.allHierarchies(!0).getItem(e)},r.prototype.addMeasure=function(e){this.measures_.addItem(e.uniqueName,e)},r.prototype.findMeasure=function(e){return this.measures_.getItem(e)},r.prototype.removeMeasure=function(e){return this.measures_.removeItem(e)},r.prototype.clear=function(){this._measureToHierarchyMap={},this._hierarchyToMeasureMap={},this.fields=new s.AssociativeArray,this.types=[],this.id=this.deleteId="",this._dimensions=new s.AssociativeArray,this._measures=new s.AssociativeArray,this.isComplete=!1},r.prototype.measureToHierarchy=function(e){return this._measureToHierarchyMap[e]},r.prototype.hierarchyToMeasure=function(e){return this._hierarchyToMeasureMap[e]},r.prototype.getDataType=function(e){return this.types[e]},r.prototype.getDataField=function(e){return this.fields.getItem(e)},r.prototype.getDataKeys=function(){return this.fields.toArray(!0)},r.prototype.addKeys=function(e,t){this._measureToHierarchyMap[e]=this.findHierarchy(t),this._hierarchyToMeasureMap[t]=this.findMeasure(e)},r.prototype._addMeasure=function(e,t){var r=new i.GenericMeasure(e.uniqueName,e.caption);r.type=t,this.addMeasure(r),this.addKeys(r.uniqueName,e.uniqueName),this.localDataStorage.addFactKey(r.uniqueName)},r.prototype.addStringHierarchy=function(r,n,o){var s=n.uniqueName;n=new i.GenericHierarchy(s,n.caption),r.addHierarchy(n),this.localDataStorage.addKey(s),r=new i.GenericLevel(n.caption==e.model._labels.Labels.MEMBER_BLANK?s+".[]":s,n.caption,1),n.addLevel(r),this._addMeasure(n,t.types.MeasureType.COUNT),this.fields.addItem(o,n)},r.prototype.addHierarchicalDateHierarchy=function(r,n,o){var s=n.uniqueName,a=n.caption;r.type=t.types.DimensionType.MD_DIMTYPE_TIME,a=new i.GenericHierarchy(s,a),r.addHierarchy(a),(r=new i.GenericLevel(s+".Year",e.model._labels.Labels.YEAR,a.levels_.length)).type=t.types.LevelType.YEAR,a.addLevel(r),this.localDataStorage.addKey(a.uniqueName),n.type==t.types.DataFieldType.HIERARCHICAL_DATE_WITH_QUARTERS&&((r=new i.GenericLevel(n=s+".Quarter",e.model._labels.Labels.QUARTER,a.levels_.length)).type=t.types.LevelType.QUARTER,a.addLevel(r),this.localDataStorage.addKey(n,a.uniqueName)),(r=new i.GenericLevel(n=s+".Month",e.model._labels.Labels.MONTH,a.levels_.length)).type=t.types.LevelType.MONTH,a.addLevel(r),this.localDataStorage.addKey(n,a.uniqueName),(r=new i.GenericLevel(s+=".Day",e.model._labels.Labels.DAY,a.levels_.length)).type=t.types.LevelType.DAY,a.addLevel(r),this.localDataStorage.addKey(s,a.uniqueName),this._addMeasure(a,t.types.MeasureType.COUNT),this.fields.addItem(o,a)},r.prototype.addLevelOfHierarchy=function(e,r,n){var o=r.hasOwnProperty("hierarchy")?r.hierarchy:r.uniqueName,s=r.hasOwnProperty("hierarchy")?r.hierarchy:r.caption,a=e.findHierarchy(o);if(null==a&&(a=new i.GenericHierarchy(o,s),e.addHierarchy(a)),s=0,r.hasOwnProperty("parent")){if(null==(o=a.findLevel(r.parent)))return null==this.levels[a.uniqueName]&&(this.levels[a.uniqueName]=[]),void(this.levels[a.uniqueName][r.parent]=[r,n]);s=a.levels_.indexOf(o.uniqueName)}o=r.hasOwnProperty("level")?r.level:n,r=r.hasOwnProperty("level")?r.level:n,r=new i.GenericLevel(o,r,s+1),a.addLevel(r),1==r.num?this.localDataStorage.addKey(a.uniqueName):this.localDataStorage.addKey(o,a.uniqueName),this._addMeasure(a,t.types.MeasureType.COUNT),this.fields.addItem(n,r),this.levels[a.uniqueName]&&this.levels[a.uniqueName][o]&&this.addLevelOfHierarchy(e,this.levels[a.uniqueName][o][0],this.levels[a.uniqueName][o][1])},r.prototype.addDateHierarchy=function(r,n,o){var s=n.uniqueName,a=n.caption;r.type=t.types.DimensionType.MD_DIMTYPE_TIME;var l=s+".Year",c=a+"."+e.model._labels.Labels.YEAR;(n=new i.GenericHierarchy(l,c)).type=t.types.DataFieldType.typeNum(t.types.DataFieldType.DATE),r.addHierarchy(n),(c=new i.GenericLevel(l+"."+c,c,1)).type=t.types.LevelType.YEAR,n.addLevel(c),this.localDataStorage.addKey(l),this._addMeasure(n,t.types.MeasureType.COUNT),n=new i.GenericHierarchy(l=s+".Month",c=a+"."+e.model._labels.Labels.MONTH),r.addHierarchy(n),(c=new i.GenericLevel(l+"."+c,c,1)).type=t.types.LevelType.MONTH,n.addLevel(c),this.localDataStorage.addKey(l),this._addMeasure(n,t.types.MeasureType.COUNT),n=new i.GenericHierarchy(s+=".Day",a=a+"."+e.model._labels.Labels.DAY),r.addHierarchy(n),(a=new i.GenericLevel(s+"."+a,a,1)).type=t.types.LevelType.DAY,n.addLevel(a),this.localDataStorage.addKey(s),this._addMeasure(n,t.types.MeasureType.COUNT),this.fields.addItem(o,r)},r.prototype.addNumberHierarchy=function(e,r,n){var o=r.uniqueName,s=r.caption;r=new i.GenericHierarchy(o,s),e.addHierarchy(r),this.localDataStorage.addKey(o),(e=new i.GenericLevel(o+"."+s,s,1)).type=t.types.LevelType.NUMBER,r.addLevel(e),this._addMeasure(r,t.types.MeasureType.NUMBER),this.fields.addItem(n,r)},r.prototype.addMonthHierarchy=function(e,r,n){var o=r.uniqueName,s=r.caption;r=new i.GenericHierarchy(o,s),e.addHierarchy(r),this.localDataStorage.addKey(o),(e=new i.GenericLevel(o+"."+s,s,1)).type=t.types.LevelType.MONTH,r.addLevel(e),this._addMeasure(r,t.types.MeasureType.COUNT),this.fields.addItem(n,r)},r.prototype.addWeekdayHierarchy=function(e,r,n){var o=r.uniqueName,s=r.caption;r=new i.GenericHierarchy(o,s),e.addHierarchy(r),this.localDataStorage.addKey(o),(e=new i.GenericLevel(o+"."+s,s,1)).type=t.types.LevelType.DAY,r.addLevel(e),this._addMeasure(r,t.types.MeasureType.COUNT),this.fields.addItem(n,r)},r.prototype.addDateStringHierarchy=function(e,r,n){var o=r.uniqueName,s=r.caption;r=new i.GenericHierarchy(o,s),e.addHierarchy(r),this.localDataStorage.addKey(o),(e=new i.GenericLevel(o+"."+s,s,1)).type=t.types.LevelType.TIME,r.addLevel(e),this._addMeasure(r,t.types.MeasureType.DATE),this.fields.addItem(n,r)},r.prototype.addTimeHierarchy=function(e,r,n){var o=r.uniqueName,s=r.caption;r=new i.GenericHierarchy(o,s),e.addHierarchy(r),this.localDataStorage.addKey(o),(e=new i.GenericLevel(o+"."+s,s,1)).type=t.types.LevelType.NUMBER,r.addLevel(e),this._addMeasure(r,t.types.MeasureType.TIME),this.fields.addItem(n,r)},r.prototype.addDateTimeHierarchy=function(e,r,n){var o=r.uniqueName,s=r.caption;r=new i.GenericHierarchy(o,s),e.addHierarchy(r),this.localDataStorage.addKey(o),(e=new i.GenericLevel(o+"."+s,s,1)).type=t.types.LevelType.NUMBER,r.addLevel(e),this._addMeasure(r,t.types.MeasureType.DATETIME),this.fields.addItem(n,r)},r.prototype.isMetaObject=function(e){return e.hasOwnProperty("type")||e.hasOwnProperty("caption")||e.hasOwnProperty("hierarchy")||e.hasOwnProperty("level")||e.hasOwnProperty("parent")||e.hasOwnProperty("dimensionCaption")},r.prototype.addDataStructure=function(e){var i,r=!1;for(i in e)null==e[i]&&(e[i]=""),"string"==typeof e[i]||"number"==typeof e[i]?this.addDataFieldString(i,t.types.DataFieldType.typeFromValue(e[i])):e[i]instanceof Date?this.addDataFieldString(i,t.types.DataFieldType.DATE):e[i]instanceof Array||(this.isMetaObject(e[i])&&(r=!0),e[i].hasOwnProperty("formula")?0==s.nullOrEmpty(e[i].formula)&&this.addCalculatedMeasure(e[i],i):this.addDataField(e[i],i));return this.isComplete=!0,r},r.prototype.addCalculatedMeasure=function(i,r){var n;(n=new t._structure.GenericMeasure(r,null==i.caption?r:i.caption)).formula=i.formula,n.grandTotalCaption=null==i.grandTotalCaption?e.model._labels.Labels.GRID_GRAND_TOTAL:i.grandTotalCaption,e.model.PivotModel.getInstance().addCalculatedMeasure(n)},r.prototype.addDataFieldString=function(e,t){this.addDataField({uniqueName:e,caption:e,type:t},e)},r.prototype.addDataField=function(e,i){void 0===i&&(i="");var r,n,o={};for(r in e)o[r]=e[r];switch(o.hasOwnProperty("uniqueName")||(o.uniqueName=i),o.hasOwnProperty("caption")&&""!=o.caption||(o.caption=i),""==i&&(i=o.uniqueName),r=t.types.DataFieldType.STRING,o.hasOwnProperty("type")&&(r=String(o.type).trim().toLowerCase()),o.type=r,(o.hasOwnProperty("hierarchy")||r==t.types.DataFieldType.LEVEL&&o.hasOwnProperty("hierarchy"))&&(n=this.findDimension(o.hierarchy)),null==n&&(n=t._structure.GenericDimension.fromObject(o),o.hasOwnProperty("hierarchy")&&(n.uniqueName=o.hierarchy),n.caption=o.hasOwnProperty("caption")?o.caption:o.hasOwnProperty("hierarchy")?o.hierarchy:n.caption,r==t.types.DataFieldType.LEVEL&&o.hasOwnProperty("hierarchy")&&(n.uniqueName=o.hierarchy),this.addDimension(n)),this.types[i]=r,r){case t.types.DataFieldType.STRING:this.addStringHierarchy(n,o,i);break;case t.types.DataFieldType.NUMBER:this.addNumberHierarchy(n,o,i);break;case t.types.DataFieldType.MONTH:this.addMonthHierarchy(n,o,i);break;case t.types.DataFieldType.WEEKDAY:this.addWeekdayHierarchy(n,o,i);break;case t.types.DataFieldType.DATE:this.addDateHierarchy(n,o,i);break;case t.types.DataFieldType.DATETIME:this.addDateTimeHierarchy(n,o,i);break;case t.types.DataFieldType.TIME:this.addTimeHierarchy(n,o,i);break;case t.types.DataFieldType.LEVEL:this.addLevelOfHierarchy(n,o,i);break;case t.types.DataFieldType.HIERARCHICAL_DATE:case t.types.DataFieldType.HIERARCHICAL_DATE_WITH_QUARTERS:this.addHierarchicalDateHierarchy(n,o,i);break;case t.types.DataFieldType.DATE_STRING:this.addDateStringHierarchy(n,o,i);break;case t.types.DataFieldType.ID:this.id=i,this.fields.addItem(i,null);break;case t.types.DataFieldType.DELETE:this.deleteId=i;break;case t.types.DataFieldType.HIDDEN:break;default:this.addStringHierarchy(n,o,i)}},r}(),i.GenericStructure=r}(n||(n={})),function(e){!function(e){var t,i;t=e._structure||(e._structure={}),i=function(){function i(t){this._hierarchies=new s.AssociativeArray,this.totalSortType=e.consts.SortType.UNSORTED,this._sortTuple=this.__sortTuple=null,this._expandedTuples=[],this._drilledTuples=[],this._sortType=e.consts.SortType.UNSORTED,this._name=t}return Object.defineProperty(i.prototype,"sortTuple",{get:function(){if(null!=this.__sortTuple)return this.__sortTuple;var e=null;if(null!=this._sortTuple)for(var t=0,i=(e=[],0);i<this._hierarchies.length;i++){var r=this.hierarchies.getItemAt(i);if(!r.isMeasures){if(!this._sortTuple[t])break;if("number"==typeof this._sortTuple[t]){e=this._sortTuple;break}var n=this._sortTuple[t].toString().trim();if(!/\D/.test(n)){e=this._sortTuple;break}if(null!=(r=r.findMember(this._sortTuple[t].toString().trim())))e.push(r.ordinal);else if(this._sortTuple[t]){e=null;break}}t++}return this.__sortTuple=e},set:function(e){this._sortTuple=e,this.__sortTuple=null},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"sortNamedTuple",{get:function(){var e=null,t=this.sortTuple;if(null!=t)for(var i=0,r=(e=[],0);r<this._hierarchies.length;r++){if(!(n=this.hierarchies.getItemAt(r)).isMeasures){if(!t[i])break;var n,o=""===t[r]?0:parseInt(t[r]);if(null!=(n=n.members.getItemAt(o)))e.push(n.uniqueName);else if(t[i]){e=null;break}}i++}return e},set:function(e){this.sortTuple=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"expandedTuples",{get:function(){return this._expandedTuples},set:function(e){if(null==e)this._expandedTuples=[];else if(this.hasMeasures)this._expandedTuples=e;else{this._expandedTuples=[];for(var t=0;t<e.length;t++){var i=e[t];i[0]=-1,this._expandedTuples.push(i)}}},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"expandedTuplesBasedOnUniqueNames",{get:function(){for(var e,t,i,r,n,o,s=[],a=0;a<this.expandedTuples.length;a++){t=[],i=(e=this.expandedTuples[a].slice(0)).shift(),r="";for(var l=n=0;l<e.length;l++)(o=this.hierarchies.getItemAt(n)).isMeasures&&(-1<i&&(r=o.members.getItemAt(i).uniqueName),n++,o=this.hierarchies.getItemAt(n)),null!=o.members.getItemAt(e[l])&&t.push(o.members.getItemAt(e[l]).uniqueName),n++;t.unshift(r),s.push(t)}return s},enumerable:!0,configurable:!0}),i.prototype.parseExpandedTuplesBasedOnUniqueNames=function(e,t){void 0===t&&(t=null);for(var i,r,n,o,a,l,c=[],u=0;u<e.length;u++){if(i=e[u].slice(0),isNaN(parseInt(i[0]))){if(r=[],o=-1,n=i.shift(),a=0,0<this.hierarchies.length)for(var h=0;h<i.length;h++){if(l=this.hierarchies.getItemAt(a),s.nullOrUndefined(l))return[];l.isMeasures&&(""!=n&&(o=t?t.indexOf(n):l.members.indexOf(n)),a++,l=this.hierarchies.getItemAt(a)),r.push(l.members.indexOf(i[h])),a++}r.unshift(o)}else r=i;c.push(r)}return c},Object.defineProperty(i.prototype,"drilledTuples",{get:function(){return this._drilledTuples},set:function(e){if(s.nullOrUndefined(e))this._drilledTuples=[];else{var t;if(this.hasMeasures)this._drilledTuples=e;else{this._drilledTuples=[];for(var i=0;i<e.length;i++)"string"==typeof(t=e[i])[0]?t[1]=-1:t[0]=-1,this._drilledTuples.push(t)}this.setPredefinedDrillDowns(e)}},enumerable:!0,configurable:!0}),i.prototype.setPredefinedDrillDowns=function(t){var i,r=this._hierarchies.slice();r.removeItem(e.Cube.MEASURES_NAME);for(var n,o=0;o<t.length;o++){"string"==typeof(i=t[o].slice(0))[0]&&(n=i.shift());var s=r.getItemAt(i.length-3);if(null==s)break;var a=i[1];isNaN(parseFloat(i[1]))||null!=(i=s.members.getItemAt(i[1]))&&(a=i.uniqueName),-1==s.predefinedDrillDowns.indexOf(a)&&s.predefinedDrillDowns.push([n,a])}},Object.defineProperty(i.prototype,"drilledTuplesBasedOnUniqueNames",{get:function(){for(var e,t,i,r,n,o,s,a,l=[],c=0;c<this.drilledTuples.length;c++){t=[],n=i="","string"==typeof(e=this.drilledTuples[c].slice(0))[0]&&(i=e.shift()),r=e.shift(),o=e.shift();for(var u=s=0;u<e.length;u++)(a=this.hierarchies.getItemAt(s)).isMeasures&&(-1<r&&(n=a.members.getItemAt(r).uniqueName),s++,a=this.hierarchies.getItemAt(s)),null!=a.members.getItemAt(e[u])&&t.push(a.members.getItemAt(e[u]).uniqueName),s++;t.unshift(o),t.unshift(n),t.unshift(i),l.push(t)}return l},enumerable:!0,configurable:!0}),i.prototype.parseDrilledTuplesBasedOnUniqueNames=function(e,t){void 0===t&&(t=null);for(var i,r,n,o,a,l,c,u,h=[],d=0;d<e.length;d++){if(i=e[d].slice(0),isNaN(parseInt(i[i.length-1]))){if(r=[],o=-1,n=i.shift(),a=i.shift(),l=i.shift(),c=0,0<this.hierarchies.length)for(var A=0;A<i.length;A++){if(u=this.hierarchies.getItemAt(c),s.nullOrUndefined(u))return[];u.isMeasures&&(""!=a&&(o=t?t.indexOf(a):u.members.indexOf(a)),c++,u=this.hierarchies.getItemAt(c)),r.push(u.members.indexOf(i[A])),c++}r.unshift(l),r.unshift(o),""!=n&&r.unshift(n)}else r=i;h.push(r)}return h},Object.defineProperty(i.prototype,"sortType",{get:function(){return this._sortType},set:function(t){t=t.toLowerCase(),this._sortType=t==e.consts.SortType.ASC||t==e.consts.SortType.DESC?t:e.consts.SortType.UNSORTED},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"uniqueName",{get:function(){return this._name},set:function(e){this._name=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"caption",{get:function(){return this._caption},set:function(e){this._caption=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"hierarchies",{get:function(){return this._hierarchies},set:function(t){this.expandedTuples=[],this.drilledTuples=[],this._sortTuple=null,this._sortType=e.consts.SortType.UNSORTED,this.sortMeasure=null,this._hierarchies=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"size",{get:function(){for(var e=1,t=0;t<this._hierarchies.length;t++)e*=this._hierarchies.getItemAt(t).size;return e},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"measuresPosition",{get:function(){return this._hierarchies.indexOf(e.Cube.MEASURES_NAME)},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"measuresHierarchy",{get:function(){return this._hierarchies.getItem(e.Cube.MEASURES_NAME)},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"hasMeasures",{get:function(){return-1<this.measuresPosition},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"depth",{get:function(){for(var e=0,t=0;t<this._hierarchies.length;t++)e+=this._hierarchies.getItemAt(t).drillDownDepth;return e},set:function(e){},enumerable:!0,configurable:!0}),i.prototype.toString=function(){return"[Axis:"+this._name+" ]"},i.fromObject=function(t,r,n,o,a,l,c){var u;if(void 0===c&&(c=null),(t=new i(t)).hierarchies=new s.AssociativeArray,r)for(u=0;u<r.length;u++)if(null!=r[u].uniqueName){var h=l.findHierarchy(r[u].uniqueName);null!=h&&(e._structure.GenericHierarchy.fromObject(r[u],h),h.isMeasures&&t.uniqueName==e.consts.AxisName.PAGES_AXIS||t.hierarchies.addItem(h.uniqueName,h))}if(n&&(null!=(u=l.findMeasure(n.measure?n.measure:""))&&null!=n.tuple?t.setSort(u,n.tuple,n.type):t.sortToSet=n),o&&0<o.length){for(h=[],u=0;u<o.length;u++){for(l=[],0<(r=o[u]).length&&l.push((isNaN(parseInt(r[0])),r[0])),n=1;n<r.length;n++)l.push((isNaN(parseInt(r[n])),r[n]));h.push(l)}o=h}if(t.expandedTuples=o?t.parseExpandedTuplesBasedOnUniqueNames(o,c):[],a&&0<a.length){for(o=[],u=0;u<a.length;u++){for(l=[],0<(r=a[u]).length&&l.push((isNaN(parseInt(r[0])),r[0])),n=1;n<r.length;n++)l.push((isNaN(parseInt(r[n])),r[n]));o.push(l)}a=o}return t.drilledTuples=a?t.parseDrilledTuplesBasedOnUniqueNames(a,c):[],t},i.toObject=function(i){for(var r={},n=[],o=0;o<i.hierarchies.length;o++){var a=t.GenericHierarchy.toObject(i.hierarchies.getItemAt(o));n.push(a)}return r.hierarchies=n,i.sortType==e.consts.SortType.UNSORTED||s.nullOrUndefined(i.sortTuple)||s.nullOrUndefined(i.sortMeasure)||(r.sort={type:i.sortType,tuple:i.sortNamedTuple,measure:i.sortMeasure.uniqueName}),r},i.prototype.setSort=function(e,t,i){this.sortMeasure=e,this.sortTuple=t,this.sortType=i,0==t.length&&(this.totalSortType=this.sortType,this.totalSortMeasure=this.sortMeasure)},i}(),t.Axis=i}(e.data_||(e.data_={}))}(n||(n={})),function(e){var t,i,r,n;t=e.data_||(e.data_={}),r=i=t._structure||(t._structure={}),n=function(){function n(e){this._axes=new s.AssociativeArray,this._measures=new s.AssociativeArray,this._drillAll=this._expandAll=!1,this._flatOrder=[],this.structure=e,this.addAxis(new t._structure.Axis(t.consts.AxisName.ROWS_AXIS)),this.addAxis(new t._structure.Axis(t.consts.AxisName.COLUMNS_AXIS)),this.addAxis(new t._structure.Axis(t.consts.AxisName.PAGES_AXIS))}return Object.defineProperty(n.prototype,"axes",{get:function(){return this._axes},set:function(e){},enumerable:!0,configurable:!0}),n.prototype.addAxis=function(e){this._axes.addItem(e.uniqueName,e),e.hasMeasures&&(this._axisWithMeasures=e)},n.prototype.findAxis=function(e){return this._axes.getItem(e)},Object.defineProperty(n.prototype,"axisWithMeasures",{get:function(){if(null==this._axisWithMeasures){for(var e=0;e<this._axes.length;e++){var i=this._axes.getItemAt(e);if(i.hasMeasures){this._axisWithMeasures=i;break}}null==this._axisWithMeasures&&(this._axisWithMeasures=this.findAxis(t.consts.AxisName.COLUMNS_AXIS))}return this._axisWithMeasures.hasMeasures||(e=this.structure.measuresHierarchy)&&this._axisWithMeasures.hierarchies.addItem(e.uniqueName,e),this._axisWithMeasures},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"regularMeasures",{get:function(){for(var e=new s.AssociativeArray,t=0;t<this._measures.length;t++){var i=this._measures.getItemAt(t);i.calculated||e.addItem(i.uniqueName,i)}return e},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"calculatedMeasures",{get:function(){for(var e=new s.AssociativeArray,t=0;t<this._measures.length;t++){var i=this._measures.getItemAt(t);i.calculated&&e.addItem(i.uniqueName,i)}return e},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"measuresAll",{get:function(){return this._measures},set:function(e){this.measures_=e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"measures_",{get:function(){for(var e=new s.AssociativeArray,t=0;t<this._measures.length;t++){var i=this._measures.getItemAt(t);i.hidden||e.addItem(i.uniqueName,i)}return e},set:function(e){if(this._measures=e,null!=(e=this.axisWithMeasures.measuresHierarchy)&&(e.clear(),null!=this._measures))for(var t=0;t<this._measures.length;t++){var r=this._measures.getItemAt(t);r=new i.GenericMember(r.uniqueName,r.caption),e.addMember(r,"","",!1)}},enumerable:!0,configurable:!0}),n.prototype.allHierarchies=function(e,t,i){void 0===e&&(e=!0),void 0===t&&(t=!0),void 0===i&&(i=!1);for(var r=new s.AssociativeArray,n=0;n<this._axes.length;n++){var o=this._axes.getItemAt(n);r=r.concat(o.hierarchies)}if(e||r.removeItem(this.structure.measuresHierarchy.uniqueName),!t)for(e=0;e<this.pages.length;e++)r.removeItem(this.pages.getKeyAt(n));if(i)for(n=0;n<this.measures_.length;n++)(i=this.measures_.getItemAt(n)).calculated||(i=this.structure.measureToHierarchy(i.uniqueName),r.addItem(i.uniqueName,i));return r},n.prototype.clear=function(){for(var e=0;e<this._axes.length;e++)this._axes.getItemAt(e).hierarchies=new s.AssociativeArray;this._measures=new s.AssociativeArray},Object.defineProperty(n.prototype,"rows",{get:function(){return this.findAxis(t.consts.AxisName.ROWS_AXIS).hierarchies},set:function(e){var i=this.findAxis(t.consts.AxisName.ROWS_AXIS);null==i&&(i=new r.Axis(t.consts.AxisName.ROWS_AXIS)),i.hierarchies=e,null==e&&(i.hierarchies=new s.AssociativeArray),this.addAxis(i)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"columns",{get:function(){return this.findAxis(t.consts.AxisName.COLUMNS_AXIS).hierarchies},set:function(e){var i=this.findAxis(t.consts.AxisName.COLUMNS_AXIS);null==i&&(i=new r.Axis(t.consts.AxisName.COLUMNS_AXIS)),i.hierarchies=e,null==e&&(i.hierarchies=new s.AssociativeArray),this.addAxis(i)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"pages",{get:function(){return this.findAxis(t.consts.AxisName.PAGES_AXIS).hierarchies},set:function(e){var i=this.findAxis(t.consts.AxisName.PAGES_AXIS);null==i&&(i=new r.Axis(t.consts.AxisName.PAGES_AXIS)),i.hierarchies=e,null==e&&(i.hierarchies=new s.AssociativeArray),this.addAxis(i)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"rowsOnly",{get:function(){return this.axisWithMeasures.uniqueName==t.consts.AxisName.ROWS_AXIS?this.rows.splice(this.axisWithMeasures.measuresPosition,1):this.rows},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"columnsOnly",{get:function(){return this.axisWithMeasures.uniqueName==t.consts.AxisName.COLUMNS_AXIS?this.columns.splice(this.axisWithMeasures.measuresPosition,1):this.columns},set:function(e){},enumerable:!0,configurable:!0}),n.prototype.clone=function(){var e=new n(this.structure);return e.rows=this.rows.slice(),e.columns=this.columns.slice(),e.pages=this.pages.slice(),e.measures_=this.measures_.slice(),e.flatOrder=this.flatOrder.slice(0),e},n.areRowsDiffer=function(e,i,r){if(void 0===r&&(r=!0),null==i)return!0;var o=e.rows.length!=i.rows.length;if(!o)for(var s=0;s<e.rows.length;s++)if(e.rows.getItemAt(s).uniqueName!=i.rows.getItemAt(s).uniqueName){o=!0;break}return!o&&r&&e.findAxis(t.consts.AxisName.ROWS_AXIS).hasMeasures&&i.findAxis(t.consts.AxisName.ROWS_AXIS).hasMeasures&&(o=n.areMeasuresDiffer(e,i)),o},n.areColumnsDiffer=function(e,i,r){if(void 0===r&&(r=!0),null==i)return!0;var o=e.columns.length!=i.columns.length;if(!o)for(var s=0;s<e.columns.length;s++)if(e.columns.getItemAt(s).uniqueName!=i.columns.getItemAt(s).uniqueName){o=!0;break}return!o&&r&&e.findAxis(t.consts.AxisName.COLUMNS_AXIS).hasMeasures&&i.findAxis(t.consts.AxisName.COLUMNS_AXIS).hasMeasures&&(o=n.areMeasuresDiffer(e,i)),o},n.areMeasuresDiffer=function(e,t){if(null==t)return!0;var i=e.measures_.length!=t.measures_.length;if(!i)for(var r=0;r<e.measures_.length;r++)if(e.measures_.getItemAt(r).uniqueName!=t.measures_.getItemAt(r).uniqueName){i=!0;break}return i},n.fromObject=function(e,i){for(var r=new n(i),o=new s.AssociativeArray,a=0;a<e.measures.length;a++)if(e.measures[a].hasOwnProperty("uniqueName")){var l=i.measures_.getItem(e.measures[a].uniqueName);null==l&&s.nullOrEmpty(e.measures[a].formula)||((l=t._structure.GenericMeasure.fromObject(e.measures[a],l)).calculated&&!i.measures_.keyExists(l.uniqueName)&&i.addMeasure(l),(s.nullOrUndefined(e.measures[a].active)||e.measures[a].active)&&o.addItem(l.uniqueName,l))}return a=t._structure.Axis.fromObject(t.consts.AxisName.ROWS_AXIS,e.rows,e.rowSorting,e.expandedRows,e.drilledRows,i,o.toArray(!0)),l=t._structure.Axis.fromObject(t.consts.AxisName.COLUMNS_AXIS,e.columns,e.columnSorting,e.expandedColumns,e.drilledColumns,i,o.toArray(!0)),r.rows=a.hierarchies,r.columns=l.hierarchies,r.pages=t._structure.Axis.fromObject(t.consts.AxisName.PAGES_AXIS,e.pages,null,[],[],i).hierarchies,r.measures_=o,r.expandAll=e.expandAll,r.drillAll=e.drillAll,r.flatOrder=e.flatOrder,r.addAxis(a),r.addAxis(l),r},n.prototype.toObject=function(){for(var e={rows:[]},t=0;t<this.rows.length;t++){var i=this.rows.getItemAt(t).toObject();e.rows[t]=i}for(e.columns=[],t=0;t<this.columns.length;t++)i=this.columns.getItemAt(t).toObject(),e.columns[t]=i;for(e.pages=[],t=0;t<this.pages.length;t++)i=this.pages.getItemAt(t).toObject(),e.pages[t]=i;for(e.measures=[],t=0;t<this.measures_.length;t++)i=this.measures_.getItemAt(t).toObject(),e.measures[t]=i;return e},n.prototype.parseExpandedTuples=function(){for(var e=0;e<this._axes.length;e++)this._axes.getItemAt(e).parseExpandedTuples()},n.prototype.flatten=function(e){void 0===e&&(e=!1);for(var t=this.allHierarchies(!1),i=0;i<this.measures_.length;i++){var n=this.measures_.getItemAt(i),o=this.measureToHierarchy(n.uniqueName);null!=o&&t.addItem(o.uniqueName,o),n.calculated&&e&&(o=new r.GenericHierarchy(n.uniqueName,n.caption),t.addItem(n.uniqueName,o))}for(e=new s.AssociativeArray,i=0;i<this.flatOrder.length;i++)t.keyExists(n=this.flatOrder[i])&&(e.addItem(n,t.getItem(n)),t.removeItem(n));for(i=0;i<t.length;i++)e.addItem(t.getKeyAt(i),t.getItemAt(i));return e},n.prototype.isEqual=function(e){if(null==e||this.pages.length!=e.pages.length||this.rows.length!=e.rows.length||this.columns.length!=e.columns.length||this.measures_.length!=e.measures_.length)return!1;for(var t=0;t<this.pages.length;t++)if(this.pages.getKeyAt(t)!=e.pages.getKeyAt(t))return!1;for(t=0;t<this.rows.length;t++)if(this.rows.getKeyAt(t)!=e.rows.getKeyAt(t))return!1;for(t=0;t<this.columns.length;t++)if(this.columns.getKeyAt(t)!=e.columns.getKeyAt(t))return!1;for(t=0;t<this.measures_.length;t++)if(this.measures_.getKeyAt(t)!=e.measures_.getKeyAt(t)||this.measures_.getItemAt(t).aggregation!=e.measures_.getItemAt(t).aggregation)return!1;return!0},n.prototype.measureToHierarchy=function(e){return this.structure.measureToHierarchy(e)},n.prototype.hierarchyToMeasure=function(e){return this.structure.hierarchyToMeasure(e)},Object.defineProperty(n.prototype,"isEmpty",{get:function(){return 0==this.allHierarchies(!1).length&&0==this.measures_.length},set:function(e){},enumerable:!0,configurable:!0}),n.prototype.makeDefault=function(){var i;if(e.model._options.OptionsManager.flatView){this.rows=new s.AssociativeArray,this.columns=new s.AssociativeArray,this.pages=new s.AssociativeArray;for(var r=new s.AssociativeArray,n=[],o=0;o<this.structure.measures_.length;o++)i=this.structure.measures_.getItemAt(o),n.push(i.uniqueName),i.type==t.types.MeasureType.COUNT?(i=this.structure.measureToHierarchy(i.uniqueName))&&this.rows.addItem(i.uniqueName,i):r.addItem(i.uniqueName,i);this._flatOrder=n,this.measures_=r}else{for(o=0;o<this.structure.measures_.length&&((i=this.structure.measures_.getItemAt(o)).type!=t.types.MeasureType.NUMBER?null==r&&(r=this.structure.measureToHierarchy(i.uniqueName)):null==n&&(n=i),null==r||null==n);o++);null==n?n=this.structure.measures_.getItemAt(0):null==r?(i=this.structure.measures_.getItemAt(0),r=this.structure.measureToHierarchy(i.uniqueName)):null==r&&null==n&&0<this.structure.measures_.length&&(n=this.structure.measures_.getItemAt(0),r=this.structure.measureToHierarchy(n.uniqueName)),null!=r&&null!=n&&(this.pages=new s.AssociativeArray,this.rows=new s.AssociativeArray,this.columns=new s.AssociativeArray,this.rows.addItem(r.uniqueName,r),(r=new s.AssociativeArray).addItem(n.uniqueName,n),this.measures_=r)}},Object.defineProperty(n.prototype,"expandAll",{get:function(){return this._expandAll},set:function(e){this._expandAll=e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"drillAll",{get:function(){return this._drillAll},set:function(e){this._drillAll=e},enumerable:!0,configurable:!0}),n.prototype.clearExpands=function(){this.rowAxis.expandedTuples=[],this.columnAxis.expandedTuples=[]},n.prototype.clearDrills=function(){this.rowAxis.drilledTuples=[],this.columnAxis.drilledTuples=[]},Object.defineProperty(n.prototype,"flatOrder",{get:function(){return null==this._flatOrder&&(this._flatOrder=[]),this._flatOrder},set:function(e){this._flatOrder=e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"rowAxis",{get:function(){return this.axes.getItem(t.consts.AxisName.ROWS_AXIS)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"columnAxis",{get:function(){return this.axes.getItem(t.consts.AxisName.COLUMNS_AXIS)},enumerable:!0,configurable:!0}),n.prototype.mergeExpandsAndDrills=function(e){s.nullOrUndefined(e)||(this.expandAll=e.expandAll,this.drillAll=e.drillAll,n.areRowsDiffer(this,e,!1)?(this.rowAxis.expandedTuples=this.cutTuples(e.rowAxis.expandedTuples,this.getCommonFieldsCount(this.rowAxis.hierarchies,e.rowAxis.hierarchies)),this.rowAxis.drilledTuples=this.cutTuples(e.rowAxis.drilledTuples,this.getCommonFieldsCount(this.rowAxis.hierarchies,e.rowAxis.hierarchies)+2)):(this.rowAxis.expandedTuples=this.cloneTuples(e.rowAxis.expandedTuples),this.rowAxis.drilledTuples=this.cloneTuples(e.rowAxis.drilledTuples)),n.areColumnsDiffer(this,e,!1)?(this.columnAxis.expandedTuples=this.cutTuples(e.columnAxis.expandedTuples,this.getCommonFieldsCount(this.columnAxis.hierarchies,e.columnAxis.hierarchies)),this.columnAxis.drilledTuples=this.cutTuples(e.columnAxis.drilledTuples,this.getCommonFieldsCount(this.columnAxis.hierarchies,e.columnAxis.hierarchies)+2)):(this.columnAxis.expandedTuples=this.cloneTuples(e.columnAxis.expandedTuples),this.columnAxis.drilledTuples=this.cloneTuples(e.columnAxis.drilledTuples)))},n.prototype.removeMeasure=function(e){this._measures.removeItem(e)},n.prototype.getCommonFieldsCount=function(e,t){for(var i=0,r=Math.min(e.length,t.length),n=0;n<r;n++){var o=e.getItemAt(n),s=t.getItemAt(n);if(o.uniqueName!=s.uniqueName)break;o.isMeasures||i++}return i},n.prototype.cutTuples=function(e,t){var i=[];if(1<t)for(var r=0;r<e.length;r++){var n=e[r];n.length<=t&&i.push(n.slice())}return i},n.prototype.cloneTuples=function(e){for(var t=[],i=0;i<e.length;i++)t.push(e[i].slice());return t},n}(),r.Slice=n}(n||(n={})),function(e){var i;!function(r){var n=function(){function r(){var e=this;this.beforeBeforeLastByte=this.beforeLastByte=this.lastByte=0,this.fileExtensions=[".csv"],this.onAuthApiLoadHandler=function(){return e.onAuthApiLoad()},this.onhandleAuthResultHandler=function(t){return e.handleAuthResult(t)},this.tickHandler=function(){return e.onTick()},this.timerCompleteHandler=function(){return e.onTimerComplete()},this.lastPosition=0,this.isStarted=!1,this.preloaderTime=0,this.cube_=i.Cube.getInstance(),this.fileExtensions=[".csv"]}return r.prototype.clear=function(){this.data=[],this.dataLoadedLength=this.bytesLoaded=0,this.connected=!1,this.chunkIndex=this.lastPosition=0,this.recordsetDelimiter="\n",this.fieldEnclosureToken='"',this.columnType=[],this.hasSizeHeader=this.isFileFailed=this.isFileLoaded=this.isHeaderParsed=!1,this.lastByte=0,this.lastRow="",this.rowIdx=this.beforeBeforeLastByte=this.beforeLastByte=0,this.BLOCK_SIZE=100,null!=this.loader&&(this.loader.removeAllEventListeners(),this.loader.dispose(),this.loader=null),this.stopTimer()},r.prototype.load=function(t,i,r,o,a){try{this.clear(),this.filename=t.filename,this.successHandler=i,this.errorHandler=r,this.connectedHandler=o,this.cancelledHandler=a,this.fieldSeparator=t.fieldSeparator,this.ignoreQuotedLineBreaks=t.ignoreQuotedLineBreaks,t.isDemo?this.generate():(void 0!==this.filename&&""!=this.filename&&"()"!=this.filename.substr(-2)||!1!==t.browseForFile?this.filename=s.URLUtils.getUrl(this.filename,!0):this.onFileError(),!0===t.browseForFile?this.browseFile():this.isGooggleDrive(t.filename)&&s.nullOrUndefined(t.requestHeader)?this.authorizeGoogleDrive():(e.preloader(!0,e.model._labels.Labels.MESSAGE_LOADING_DATA),this.loadFile(this.filename,t.requestHeader)))}catch(n){console.error(n.stack),this.onFileError()}},r.prototype.generate=function(){},r.prototype.authorizeGoogleDrive=function(){window.gapi&&window.gapi.load("auth",{callback:this.onAuthApiLoadHandler})},r.prototype.onAuthApiLoad=function(){""==e._view.PivotView.stage.getToolbar().googleClientId||null==e._view.PivotView.stage.getToolbar().googleClientId?this.onGoogleClientIdNotSet():window.gapi.auth.authorize({client_id:e._view.PivotView.stage.getToolbar().googleClientId,scope:e._view.PivotView.stage.getToolbar().googleScope,immediate:!1},this.onhandleAuthResultHandler)},r.prototype.handleAuthResult=function(t){var i={};t&&!t.error?(i.Authorization="Bearer "+t.access_token,e.preloader(!0,e.model._labels.Labels.MESSAGE_LOADING_DATA),this.loadFile(this.filename,i)):(e.preloader(!1),this.onFileError())},r.prototype.isGooggleDrive=function(e){return-1<e.indexOf("www.googleapis.com/drive")},r.prototype.onGoogleClientIdNotSet=function(){e.uialert(e.model._labels.Labels.MESSAGE_NO_GOOGLE_CLIENT_KEY,e.model._labels.Labels.ERROR,e.AlertType.ERROR)},r.prototype.browseFile=function(){var e=this;this.fileReference=new o.FileReference,this.fileReference.addEventListener(t._Event.SELECT,(function(){return e.onFileSelected()})),this.fileReference.addEventListener(t._Event.COMPLETE,(function(){return e.onFileComplete()})),this.fileReference.addEventListener(t._Event.PROGRESS,(function(t){return e.onFileProgress(t)})),this.fileReference.addEventListener(t._Event.CANCEL,(function(){return e.onFileCancelled()})),this.fileReference.addEventListener(t._Event.ERROR,(function(){return e.onFileError()})),this.fileReference.browse(this.fileExtensions)},r.prototype.onFileSelected=function(){e.preloader(!0,e.model._labels.Labels.MESSAGE_LOADING_DATA,"",!0,!0),this.loader=this.fileReference,this.fileReference.load(),this.fileReference=null},r.prototype.loadFile=function(e,i){var r=this;void 0===i&&(i=null);var n=new o.URLStream;n.dataType=o.DataType.TEXT,n.addEventListener(t._Event.COMPLETE,(function(){return r.onFileComplete()})),n.addEventListener(t._Event.CONNECTED,(function(){return r.onFileConnected()})),n.addEventListener(t._Event.PROGRESS,(function(e){return r.onFileProgress(e)})),n.addEventListener(t._Event.ERROR,(function(){return r.onFileError()})),n.load(e,i),this.loader=n,this.timer=new s.Timer(100,1e3),this.timer.addEventListener(s.TimerEvent.TIMER,this.tickHandler),this.timer.addEventListener(s.TimerEvent.TIMER_COMPLETE,this.timerCompleteHandler),this.timer.start()},r.prototype.onTick=function(){0<this.bytesLoaded||this.isFileLoaded||this.isFileFailed?this.stopTimer():null!=this.timer&&e.preloader(!0,e.model._labels.Labels.MESSAGE_LOADING_DATA,s.StringUtils.bind(e.model._labels.Labels.MESSAGE_LOADING_WAITING,s.NumberFormatter.format(this.timer.currentCount/10,new e.model.format.vo.FormatValueObject,!1,!1,1)))},r.prototype.onTimerComplete=function(){this.timer.running&&this.stopTimer()},r.prototype.stopTimer=function(){this.timer&&this.timer.running&&(this.timer.stop(),this.timer.removeEventListener(s.TimerEvent.TIMER,this.tickHandler),this.timer.removeEventListener(s.TimerEvent.TIMER_COMPLETE,this.timerCompleteHandler))},r.prototype.onFileCancelled=function(){null!=this.cancelledHandler&&(this.cancelledHandler(),this.cancelledHandler=null),this.clear()},r.prototype.onFileError=function(){if(e.preloader(!1),0==this.isFileFailed){this.isFileFailed=!0;var t=e.model.XSSCheck.valid(this.filename)?this.filename:e.model.XSSCheck.validate(this.filename);e.uialert(s.StringUtils.bind(e.model._labels.Labels.MESSAGE_UNABLE_TO_OPEN_FILE,t),e.model._labels.Labels.ERROR,e.AlertType.ERROR)}null!=this.errorHandler&&(this.errorHandler(),this.errorHandler=null),this.stopTimer()},r.prototype.onHeaderParsingError=function(){e.preloader(!1),e.uialert(s.StringUtils.bind(e.model._labels.Labels.MESSAGE_CSV_HEADER_PARSING_ERROR),e.model._labels.Labels.ERROR,e.AlertType.ERROR)},r.prototype.onFileProgress=function(t){if(404==t.target.status)this.onFileError();else if(!s.nullOrUndefined(this.loader))try{var i=this.loader.response;if(null!=i&&0!=i.length&&(this.bytesLoaded!=t.loaded||this.dataLoadedLength!=i.length)&&(this.hasSizeHeader=0<t.total&&t.lengthComputable,this.dataLoadedLength=i.length,this.bytesLoaded=t.loaded,1e4<i.length-this.lastPosition||t.loaded==t.total))if(this.bytesLoaded>e.model.license.Limitations.MAX_CSV)e.uialert(e.model.license.LicenseLabels.getLabel(e.model.license.LicenseLabels.betaversion),e.model.license.LicenseLabels.getLabel(e.model.license.LicenseLabels.tooLarge)),e.preloader(!1),null!=this.errorHandler&&(this.errorHandler(),this.errorHandler=null),this.stopTimer();else{this.isFileLoaded=t.loaded==t.total,void 0!==i&&this.parseChunk(i.substring(this.lastPosition,i.length)),this.lastPosition=i.length;var r=s.StringUtils.bind(e.model._labels.Labels.MESSAGE_LOADING_PROGRESS,s.NumberFormatter.formatThousands(t.loaded.toFixed(0)),s.NumberFormatter.formatThousands(t.total.toFixed(0)));e.preloader(!0,e.model._labels.Labels.MESSAGE_LOADING_DATA,r)}}catch(n){console.error(n.stack),this.onFileError()}},r.prototype.onFileConnected=function(){this.connected=!0,e.preloader(!0,e.model._labels.Labels.MESSAGE_LOADING_DATA,"")},r.prototype.setConnected=function(){null!=this.connectedHandler&&(this.connectedHandler(),this.connectedHandler=null)},r.prototype.onFileComplete=function(){if(!s.nullOrUndefined(this.loader))try{if(0==this.lastPosition||!this.hasSizeHeader){var t=this.loader.response;this.connected=!0,t.length>e.model.license.Limitations.MAX_CSV?(e.uialert(e.model.license.LicenseLabels.getLabel(e.model.license.LicenseLabels.betaversion),e.model.license.LicenseLabels.getLabel(e.model.license.LicenseLabels.tooLarge)),e.preloader(!1),null!=this.errorHandler&&(this.errorHandler(),this.errorHandler=null),this.clear()):(this.isFileLoaded=!0,this.isStarted?this.hasSizeHeader||(this.lastPosition<t.length?(this.parseChunk(t.substring(this.lastPosition,t.length)),this.lastPosition=t.length):this.data.push(this.lastRow)):this.parseChunk(t),this.parseAllDataRows(),this.onDataParsed())}}catch(r){console.error(r.stack),this.onFileError()}},r.isCSVValid=function(t){return-1==(t=t.toLowerCase()).indexOf("<html>")&&-1==t.indexOf("<config>")&&0!=t.trim().length&&-1==t.indexOf("<!doctype")||(e.uialert(e.model._labels.Labels.MESSAGE_INAPPROPRIATE_FILE_FORMAT,e.model._labels.Labels.ERROR,e.AlertType.ERROR),!1)},r.prototype.parseChunk=function(t){this.isStarted=!0,this.setConnected(),0==this.chunkIndex&&-1==t.indexOf("\n")&&-1!=t.indexOf("\r")&&(this.recordsetDelimiter="\r"),void 0===this.fieldSeparator&&(this.fieldSeparator=this.chooseSeparator(-1==t.indexOf("\n")&&-1==t.indexOf("\r")?t:t.substring(0,t.indexOf(this.recordsetDelimiter)))),this.appendData(t),0==this.isHeaderParsed&&(1<this.data.length||e.model._options.OptionsManager.showEmptyData)&&(this.parseHeader(this.data.shift(),this.data[0]),this.isHeaderParsed=!0)},r.prototype.onDataParsed=function(){e.preloader(!1),this.isHeaderParsed?null!=this.successHandler&&this.successHandler():(e.uialert(e.model._labels.Labels.MESSAGE_NO_DATA_AVAILABLE,e.model._labels.Labels.ERROR,e.AlertType.ALERT),null!=this.errorHandler&&(this.errorHandler(),this.errorHandler=null)),this.clear()},r.prototype.parseHeader=function(t,n){if(r.isCSVValid(t))try{s.nullOrUndefined(this.fieldSeparator)&&(this.fieldSeparator=",");var o=r.splitRow(t,this.fieldSeparator),a=r.splitRow(n,this.fieldSeparator);this.columnNames=[];for(var l=0;l<o.length;l++){var c,u=this.getColumnValue(a[l]),h=o[l],d=null;if(0<o[l].length&&-1<o[l].indexOf("{")){var A=o[l].substr(o[l].indexOf(":")+1,o[l].length);if(0<A.length){h=o[l].substring(0,o[l].indexOf(":"));try{d=JSON.parse(A)}catch(y){console.error("The following JSON meta object for the field '"+o[l].substring(0,o[l].indexOf(":"))+"' in CSV is invalid: "+A),console.error(y.stack),o[l]=h}}}if(s.nullOrUndefined(d)){var p=this.getColumnType(o[l],u,0==a.length);c=this.getColumnName(o[l]);var f=this.getColumnCaption(c),g=this.getColumnAlias(o[l])||f;if(this.columnType[l]=p,this.columnNames.push(c),d={type:p,caption:g,uniqueName:c},p==i.types.DataFieldType.LEVEL){var m=c.split(":");if(d.hierarchy=m[0],d.level=m.pop(),0<m.length){var w=m.pop();d.parent=w}}}else!s.nullOrUndefined(d.type)&&i.types.DataFieldType.valid(d.type)||(""==u||void 0===u?d.type=i.types.DataFieldType.STRING:isNaN(Number(u))?isNaN(Number(u))&&(d.type=s.StringUtils.isDate(u)&&e.model._options.OptionsManager.datePattern==e.model._options.OptionsManager.defaultDatePattern?i.types.DataFieldType.DATE:i.types.DataFieldType.STRING):d.type=i.types.DataFieldType.NUMBER),c=this.getColumnName(h),(s.nullOrUndefined(d.caption)||""==d.caption.length)&&(d.caption=this.getColumnCaption(c)),this.columnType[l]=d.type,this.columnNames.push(c);this.cube_.structure_.addDataField(d,c)}}catch(v){console.error(v.stack),this.onHeaderParsingError()}else this.onFileError()},r.prototype.getColumnValue=function(e){return null!=e&&(e=e.replace(",",".")),e},r.prototype.getColumnCaption=function(e){var t=e.split(a.ALIAS_DELIMITER);return 1<t.length?t[1]:(this.hasParentHierarchy(e)&&(t=e.split(":")),t[t.length-1])},r.prototype.getColumnName=function(e){if(e=e.trim().split(a.ALIAS_DELIMITER)[0],e=this.removeColumnFlags(e),-1<this.columnNames.indexOf(e)){for(var t=1,i=e;-1<this.columnNames.indexOf(i);)i=e+t,t++;e=i}return e},r.prototype.getColumnAlias=function(e){return 1<(e=e.split(a.ALIAS_DELIMITER)).length?e[1]:null},r.prototype.removeColumnFlags=function(e){return e.replace(/^(\+|dt\+|t\+|n\+|-|ds\+|d\+|m\+|w\+|D\+|D4\+|url\+|img\+|id\+)/,"")},r.prototype.getColumnType=function(t,r,n){var o=i.types.DataFieldType.NUMBER;return t=t.trim(),s.nullOrUndefined(r)&&!n?i.types.DataFieldType.STRING:("+"==t.charAt(0)?o=i.types.DataFieldType.STRING:"t+"==t.substr(0,2)?o=i.types.DataFieldType.TIME:"dt+"==t.substr(0,3)?o=i.types.DataFieldType.DATETIME:"n+"==t.substr(0,2)||"-"==t.charAt(0)?o=i.types.DataFieldType.NUMBER:"ds+"==t.substr(0,3)?o=i.types.DataFieldType.DATE_STRING:"d+"==t.substr(0,2)?o=i.types.DataFieldType.DATE:"m+"==t.substr(0,2)?o=i.types.DataFieldType.MONTH:"w+"==t.substr(0,2)?o=i.types.DataFieldType.WEEKDAY:"D+"==t.substr(0,2)?o=i.types.DataFieldType.HIERARCHICAL_DATE:"D4+"==t.substr(0,3)?o=i.types.DataFieldType.HIERARCHICAL_DATE_WITH_QUARTERS:"id+"==t.substr(0,3)?o=i.types.DataFieldType.ID:""==r||void 0===r?o=i.types.DataFieldType.STRING:isNaN(Number(r))&&(o=s.StringUtils.isDate(r)&&e.model._options.OptionsManager.datePattern==e.model._options.OptionsManager.defaultDatePattern?i.types.DataFieldType.DATE:i.types.DataFieldType.STRING),o==i.types.DataFieldType.STRING&&this.hasParentHierarchy(t)&&(o=i.types.DataFieldType.LEVEL),o)},r.prototype.hasParentHierarchy=function(e){return"+"==e.charAt(0)&&(e=e.substr(1)),1<e.split(":").length&&-1<this.columnNames.indexOf(e.split(":")[0].trim())},r.prototype.parseDataRows=function(){for(var t=s.getTimer(),i=this.data.length;50>s.getTimer()-t&&this.rowIdx!=i;)this.parseDataRow(this.data[this.rowIdx++]);return 500<s.getTimer()-this.preloaderTime&&this.isFileLoaded&&(t=e.model._labels.Labels.MESSAGE_ANALYZING_DATA,i=(this.rowIdx/this.data.length*100).toFixed(0),i=s.StringUtils.bind(e.model._labels.Labels.MESSAGE_ANALYZING_PROGRESS,s.NumberFormatter.formatThousands(this.rowIdx.toFixed(0)),s.NumberFormatter.formatThousands(this.data.length.toFixed(0)),i),e.preloader(!0,t,i),this.preloaderTime=s.getTimer()),this.isFileLoaded&&this.rowIdx>=this.data.length},r.prototype.parseAllDataRows=function(){for(e.preloader(!0,e.model._labels.Labels.MESSAGE_ANALYZING_DATA,s.StringUtils.bind(e.model._labels.Labels.MESSAGE_ANALYZING_RECORDS,s.NumberFormatter.formatThousands(this.data.length.toFixed(0))));this.rowIdx<this.data.length;this.rowIdx++)this.parseDataRow(this.data[this.rowIdx])},r.prototype.parseDataRow=function(t){if(!s.nullOrEmpty(t)&&void 0!==this.columnNames){if((t=s.StringUtils.trim(t,this.fieldSeparator)).split(this.fieldSeparator).length<this.columnNames.length)for(var r=t.split(this.fieldSeparator).length;r<this.columnNames.length;r++)t=t.concat(this.fieldSeparator);t+=" ";var n=!1,o=!1,a="",l=0,c=[],u=[],h="";for(r=0;r<t.length;r++){var d=t.charAt(r);r==t.length-1||d==this.fieldSeparator&&!n?(r==t.length-1&&(a+=d),(a=(a=a.trim()).replace("\r","")).charAt(0)==this.fieldEnclosureToken&&a.charAt(a.length-1)==this.fieldEnclosureToken&&(a=a.slice(1,a.length-1)),this.columnType[l]==i.types.DataFieldType.ID&&(h=a),e.model.XSSCheck.valid(a)||(a=e.model.XSSCheck.validate(a)),null!=this.columnNames[l]&&this.cube_.localDataStorage.addMember(this.columnNames[l],a,this.columnType[l],c,u),n=o=!1,a="",l++):d==this.fieldEnclosureToken?(o||(a+=d),n=!n,o=!0):(a+=d,o=!1)}this.cube_.localDataStorage.insert(c,u,h)}},r.prototype.appendData=function(e){void 0!==this.lastRow&&0<this.lastRow.length&&(e=s.StringUtils.concat(this.lastRow,e)),e=this.splitLines(e);for(var t=0;t<e.length;t++)this.data.push(e[t]);1!=this.isFileLoaded&&(this.lastRow=this.data.pop())},r.prototype.splitLines=function(e){var t=!1;if(e=e.split(this.recordsetDelimiter),0==this.ignoreQuotedLineBreaks)for(var i=0;i<e.length;i++)t?(this.isQuoteOpen(e[i])&&(t=!1),e[i-1]+="<br/>"+e[i],e.splice(i,1),i--):this.isQuoteOpen(e[i])&&(t=!0);return e},r.prototype.isQuoteOpen=function(e){return 1==this.countChar(e,this.fieldEnclosureToken)%2},r.prototype.countChar=function(e,t){var i=0;if(e)for(var r=0;r<e.length;r++)e.charAt(r)==t&&i++;return i},r.prototype.chooseSeparator=function(e){if(null==this.fieldSeparator)return e.split(",").length>(e=e.split(";").length)?",":";"},r.splitRow=function(e,t,i){if(void 0===i&&(i='"'),null==e)return[];for(var r="",n=!1,o=!1,s=[],a=0;a<e.length;a++){var l=e.charAt(a);a==e.length-1||l==t&&!n?(a==e.length-1&&l==t?(s.push(r),r=""):a==e.length-1&&(r+=l),(r=r.trim()).charAt(0)==i&&r.charAt(r.length-1)==i&&(r=r.slice(1,r.length-1)),n=o=!1,s.push(r),r=""):l==i?(o||(r+=l),n=!n,o=!0):(r+=l,o=!1)}return s},r.splitRowWithMeta=function(e,t,i,r,n){if(void 0===i&&(i='"'),void 0===r&&(r="{"),void 0===n&&(n="}"),null==e)return[];for(var o="",s=!1,a=!1,l=!1,c=[],u=0;u<e.length;u++){var h=e.charAt(u);u==e.length-1||h==t&&!s&&!l?(u==e.length-1&&h==t?(c.push(o),o=""):u==e.length-1&&(o+=h),(o=o.trim()).charAt(0)==i&&o.charAt(o.length-1)==i&&(o=o.slice(1,o.length-1)),l=s=a=!1,c.push(o),o=""):h==i?(a||(o+=h),s=!s,a=!0):(a=!1,h==r?l=!0:h==n&&(l=!1),o+=h)}return c},r.timeCaption=function(t){return t&&0<t.length?t:e.model._labels.Labels.INVALID_DATE},r.prototype.loadMembers=function(e,t,i){},r.prototype.loadMemberChildren=function(e,t,i,r){},r.prototype.loadMemberDescendants=function(e,t,i,r){},r.prototype.searchMembers=function(e,t,i,r){},r.prototype.cancel=function(){this.clear(),this.connectedHandler=this.errorHandler=this.successHandler=null},r}();r.CSVLoader=n;var a=function(){function e(){}return e.NAN="N",e.FLOAT="F",e.DELIMITER="|",e.NEW_LINE="\n",e.ALIAS_DELIMITER="+T+",e}();r.Consts=a}((i=e.data_||(e.data_={})).csv||(i.csv={}))}(n||(n={})),function(e){var t,i,r;t=e.data_||(e.data_={}),i=t.csv||(t.csv={}),r=function(){function r(){this._embedded=!1,this._dataOffset=0,this.FIELD_DELIMITER=",",this.RECORDSET_DELIMITER="\n",this._cube=t.Cube.getInstance(),this._isStarted=!1,this._embeddedDataStartSign="\x3c!--",this._embeddedDataStopSign="--\x3e",this._embeddedDataJSONStartSign="/**----**",this._embeddedDataJSONStopSign="**--!--**/",this._currentDataStopSign=this._currentDataStartSign="",this._preloaderTime=0,this.regDelimiter=RegExp("%d%","g"),this.regQuote=RegExp("%q%","g"),this.regNewline=RegExp("%n%","g")}return r.prototype.load=function(e,i,r,n,o){try{this.clear(),this._connectionInfo=e,this._successHandler=i,this.connectedHandler=n,this.cancelledHandler=o,this._errorHandler=r,this._embedded=this._connectionInfo.embedded,this._dataOffset=this._connectionInfo.embeddedDataOffset,this._dataToLoad=this._connectionInfo.embeddedDataToLoad,this._embeddedDataStarted=!1,this._embedded&&null!=this._dataToLoad&&this.loadEmbedded(this._dataToLoad)}catch(t){console.error(t.stack),this.onFileError()}},r.prototype.defineCurrentDataSigns=function(e){this._currentDataStartSign=-1<e.indexOf(this._embeddedDataJSONStartSign)?this._embeddedDataJSONStartSign:this._embeddedDataStartSign,this._currentDataStopSign=this._currentDataStartSign==this._embeddedDataJSONStartSign?this._embeddedDataJSONStopSign:this._embeddedDataStopSign},r.prototype.loadEmbedded=function(i){var r=this;this.BLOCK_SIZE=2e3,this._bytesLoaded=0;try{var n=new e.DataStream(i,this._dataOffset,e.DataStream.BIG_ENDIAN);s.getTimer();var o=n.byteLength>this.BLOCK_SIZE?this.BLOCK_SIZE:n.byteLength,a=n.readString(o);this.defineCurrentDataSigns(a),this._dataStrFromBytes="",this._dataStrFromBytes+=a.substring(this._currentDataStartSign.length),this._bytesLoaded+=o,this._bytesToLoad=n.byteLength,this._bytesLoaded<this._bytesToLoad?s.ThreadManager.addTask(this.loadBytes,this,n,(function(){return r.onComplete()})):this.onComplete()}catch(t){console.error(t.stack),this.onFileError()}},r.prototype.loadBytes=function(e){var t=this._bytesToLoad-this._bytesLoaded>this.BLOCK_SIZE?this.BLOCK_SIZE:this._bytesToLoad-this._bytesLoaded;return e=e.readString(t),this._bytesLoaded+=t,this._dataStrFromBytes+=e,this.showLoadingProgress(this._bytesLoaded,this._bytesToLoad),this._bytesLoaded>=this._bytesToLoad},r.prototype.showLoadingProgress=function(t,i){var r=s.StringUtils.bind(e.model._labels.Labels.MESSAGE_ANALYZING_RECORDS,(t/i*100).toFixed(0)+"%");e.preloader(!0,e.model._labels.Labels.MESSAGE_LOADING,r)},r.prototype.onComplete=function(){e.preloader(!1),this._isFileLoaded=!0,this.processStringFromBytes(this._dataStrFromBytes)},r.prototype.setConnected=function(){null!=this.connectedHandler&&(this.connectedHandler(),this.connectedHandler=null)},r.prototype.processStringFromBytes=function(e){e=s.StringUtils.trimLeft(e),this.parseChunk(e)},r.prototype.onTick=function(){if(this._timerCount++,0<this._bytesLoaded||this._isFileLoaded||this._isFileFailed)s.fmClearInterval(this._timer),this._timerCount=0;else{var t=this._timerCount/10;this._isConnected?(196<t&&(t=196),t=s.NumberFormatter.format(t/2,new e.model.format.vo.FormatValueObject,!1,!1,1)+"%"):t=s.StringUtils.bind(e.model._labels.Labels.MESSAGE_LOADING_WAITING,s.NumberFormatter.format(t,new e.model.format.vo.FormatValueObject,!1,!1,1)),e.preloader(!0,e.model._labels.Labels.MESSAGE_LOADING_DATA,t)}},r.prototype.onFileError=function(){s.fmClearInterval(this._timer),e.preloader(!1),0==this._isFileFailed&&(this._isFileFailed=!0,e.uialert(s.StringUtils.bind(e.model._labels.Labels.MESSAGE_UNABLE_TO_OPEN_FILE,""),e.model._labels.Labels.ERROR,e.AlertType.ERROR)),null!=this.errorHandler&&(this.errorHandler(),this.errorHandler=null),this.clear()},r.prototype.parseChunk=function(e){this._isStarted=!0,this.setConnected(),this.appendData(e),0==this._isHeaderParsed&&1<this._data.length&&(this._data.shift(),this.parseHeader(this._data.shift()),this._isHeaderParsed=!0,this.parseAllDataRows(),this.onDataParsed())},r.prototype.appendData=function(e){void 0!==this._lastRow&&0<this._lastRow.length&&(e=s.StringUtils.concat(this._lastRow,e)),e=0<=e.indexOf(this.RECORDSET_DELIMITER)?e.split(this.RECORDSET_DELIMITER):[];for(var t=0;t<e.length;t++)this._data.push(e[t]);1!=this._isFileLoaded&&(this._lastRow=this._data.pop(),this._lastRow=this._lastRow==this._currentDataStopSign?this._data.pop():this._lastRow)},r.prototype.parseHeader=function(e){e=i.CSVLoader.splitRowWithMeta(e,this.FIELD_DELIMITER),this._columnNames=[];for(var r=0;r<e.length;r++){var n=e[r],o={};if(0<e[r].length&&-1<e[r].indexOf("{")){var a=e[r].substr(e[r].indexOf(":")+1,e[r].length);if(0<a.length){n=e[r].substring(0,e[r].indexOf(":"));try{o=JSON.parse(a)}catch(t){console.error("The following JSON meta object for the field '"+e[r].substring(0,e[r].indexOf(":"))+"' in CSV is invalid: "+a),console.error(t.stack)}}}n=this.getColumnName(n),(s.nullOrUndefined(o.caption)||""==o.caption.length)&&(o.caption=this.getColumnCaption(n)),this._columnType[r]=o.type,this._columnNames.push(n),this._cube.structure_.addDataField(o,n)}},r.prototype.getColumnCaption=function(e){var t=e.split(i.Consts.ALIAS_DELIMITER);return 1<t.length?t[1]:(this.hasParentHierarchy(e)&&(t=e.split(":")),t[t.length-1])},r.prototype.hasParentHierarchy=function(e){return"+"==e.charAt(0)&&(e=e.substr(1)),1<e.split(":").length&&-1<this._columnNames.indexOf(e.split(":")[0].trim())},r.prototype.getColumnName=function(e){if(e=e.trim().split(i.Consts.ALIAS_DELIMITER)[0],e=this.removeColumnFlags(e),e=this.decodeChars(e),-1<this._columnNames.indexOf(e)){for(var t=1,r=e;-1<this._columnNames.indexOf(r);)r=e+t,t++;e=r}return e},r.prototype.removeColumnFlags=function(e){return e.replace(/^(\+|dt\+|t\+|n\+|-|ds\+|d\+|m\+|w\+|D\+|D4\+|url\+|img\+|id\+)/,"")},r.prototype.parseAllDataRows=function(){for(e.preloader(!0,e.model._labels.Labels.MESSAGE_ANALYZING_DATA,s.StringUtils.bind(e.model._labels.Labels.MESSAGE_ANALYZING_RECORDS,s.NumberFormatter.formatThousands(this._data.length.toFixed(0))));this._rowIdx<this._data.length;this._rowIdx++)this.parseDataRow(this._data[this._rowIdx])},r.prototype.parseDataRows=function(){var t=s.getTimer(),i=this._rowIdx+this.BLOCK_SIZE;for(i>this._data.length&&(i=this._data.length);this._rowIdx<i;this._rowIdx++)this.parseDataRow(this._data[this._rowIdx]);return this.BLOCK_SIZE=s.ThreadManager.adjustTaskSize(s.getTimer()-t,this.BLOCK_SIZE),1e3<s.getTimer()-this._preloaderTime&&this._isFileLoaded&&(t=e.model._labels.Labels.MESSAGE_ANALYZING_DATA,i=(this._rowIdx/this._data.length*100).toFixed(0),i=s.StringUtils.bind(e.model._labels.Labels.MESSAGE_ANALYZING_PROGRESS,s.NumberFormatter.formatThousands(this._rowIdx.toFixed(0)),s.NumberFormatter.formatThousands(this._data.length.toFixed(0)),i),e.preloader(!0,t,i),this._preloaderTime=s.getTimer()),this._isFileLoaded&&this._rowIdx>=this._data.length},r.prototype.parseDataRow=function(e){if(!s.nullOrEmpty(e)&&void 0!==this._columnNames&&e!=this._currentDataStopSign){if(e.split(this.FIELD_DELIMITER).length<this._columnNames.length)for(var t=e.split(this.FIELD_DELIMITER).length;t<this._columnNames.length;t++)e=e.concat(this.FIELD_DELIMITER);var i=[],r=[];for(e=e.split(this.FIELD_DELIMITER),t=0;t<e.length;t++)this.parseDataValue(e[t],t,i,r);this._cube.localDataStorage.insert(i,r)}},r.prototype.parseDataValue=function(i,r,n,o){var s=!0;if(null!=this._columnNames[r]){if(this._columnType[r]==t.types.DataFieldType.STRING||this._columnType[r]==t.types.DataFieldType.WEEKDAY||this._columnType[r]==t.types.DataFieldType.MONTH){if("^"==i.charAt(0)){var a=parseInt(i.substring(1));if(0==isNaN(a)){var l=this._cube.structure_.getDataField(this._columnNames[r]);null!=(a=l.members.getItemAt(a+1))&&(i=a.caption==e.model._labels.Labels.MEMBER_BLANK?"":a.caption,s=!1)}}}else this._columnType[r]==t.types.DataFieldType.LEVEL?"^"==i.charAt(0)&&(a=parseInt(i.substring(1)),0==isNaN(a)&&(null==(l=this._cube.structure_.getDataField(this._columnNames[r])).members&&(l=this._cube.structure_.getDataField(this._columnNames[r]).hierarchy),null!=(a=l.members.getItemAt(a+1))&&(i=a.caption==e.model._labels.Labels.MEMBER_BLANK?"":a.caption,s=!1))):this._columnType[r]!=t.types.DataFieldType.DATE&&this._columnType[r]!=t.types.DataFieldType.DATE_STRING&&this._columnType[r]!=t.types.DataFieldType.HIERARCHICAL_DATE&&this._columnType[r]!=t.types.DataFieldType.HIERARCHICAL_DATE_WITH_QUARTERS||(i=1e3*parseInt(i),s=!1);1==s&&(i=this.decodeChars(i)),this._cube.localDataStorage.addMember(this._columnNames[r],i,this._columnType[r],n,o)}},r.prototype.decodeChars=function(e){return e.replace(this.regDelimiter,",").replace(this.regQuote,'"').replace(this.regNewline,"\n")},r.prototype.onDataParsed=function(){e.preloader(!1),this._isHeaderParsed?this.successHandler():(e.uialert(e.model._labels.Labels.MESSAGE_NO_DATA_AVAILABLE,e.model._labels.Labels.ERROR,e.AlertType.ALERT),this.errorHandler(),this._errorHandler=null),this.clear()},r.prototype.clear=function(){this._data=[],this._currentDataStopSign=this._currentDataStartSign="",this._bytesLoaded=0,this._isConnected=!1,this._columnType=[],this._hasSizeHeader=this._isFileFailed=this._isFileLoaded=this._isHeaderParsed=!1,this._lastRow="",this._rowIdx=0,this.BLOCK_SIZE=100,s.fmClearInterval(this._timer)},r.prototype.successHandler=function(){null!=this._successHandler&&this._successHandler()},r.prototype.errorHandler=function(){null!=this._errorHandler&&this._errorHandler()},r.prototype.loadDimensions=function(e){},r.prototype.loadHierarchies=function(e){},r.prototype.loadLevels=function(e){},r.prototype.loadMeasures=function(e){},r.prototype.loadMembers=function(e,t,i){},r.prototype.loadMemberChildren=function(e,t,i,r){},r.prototype.loadMemberDescendants=function(e,t,i,r){},r.prototype.searchMembers=function(e,t,i,r){},r.prototype.cancel=function(){this.connectedHandler=this.errorHandler=this.successHandler=null},r}(),i.CSVEmbeddedLoader=r}(n||(n={})),function(e){var t;!function(i){var r=function(){function i(){this.NaN="NaN",this._embeddedJSONDataStart="/**----**",this._embeddedJSONDataFinish="**--!--**/"}return i.prototype.getData=function(t){this._callback=t,e.preloader(!0,e.model._labels.Labels.MESSAGE_SAVING),this.preprocessHeader(),this.composeData()},i.prototype.preprocessHeader=function(){var e;for(this._allHierarchies=t.Cube.getInstance().structure_.allHierarchies(),this._columnsList=[],this._colIdx=0;this._colIdx<this._allHierarchies.length;){e=this._allHierarchies.getItemAt(this._colIdx);var i=t.Cube.getInstance().structure_.hierarchyToMeasure(e.uniqueName).type;i!=t.types.MeasureType.COUNT&&i!=t.types.MeasureType.DATE?this.processMeasureColumn(t.Cube.getInstance().structure_.hierarchyToMeasure(e.uniqueName)):this.processHierarchyColumn(e),this._colIdx++}},i.prototype.composeData=function(){var e=this;this._rowIdx=0,this._data="",this._facts=t.Cube.getInstance().localDataStorage.getFacts(),this._tuples=t.Cube.getInstance().localDataStorage.getTuples(),s.ThreadManager.addTask(this.composeLine,this,null,(function(){return e.onDataCreated()}))},i.prototype.composeLine=function(){var e=s.getTimer();for(this._colIdxDifference=this._colIdx=0;this._rowIdx<this._tuples.length;){for(;this._colIdx+this._colIdxDifference<this._tuples[this._rowIdx].length;)this.addMember(this.composeMember()),this._colIdx++;if(this._rowIdx++,this._data+="\n",this._colIdxDifference=this._colIdx=0,100<s.getTimer()-e)break}return this.showSavingProgress(this._rowIdx,this._tuples.length),this._rowIdx>=this._tuples.length},i.prototype.composeMember=function(){var e,i=this._columnsList[this._colIdx].type;if(i!=t.types.DataFieldType.DATE&&i!=t.types.DataFieldType.DATE_STRING&&i!=t.types.DataFieldType.LEVEL&&i!=t.types.DataFieldType.HIERARCHICAL_DATE&&i!=t.types.DataFieldType.HIERARCHICAL_DATE_WITH_QUARTERS&&i!=t.types.DataFieldType.TIME&&i!=t.types.DataFieldType.DATETIME&&(e=this._allHierarchies.getItem(this._columnsList[this._colIdx].uniqueName).members.getItemAt(this._tuples[this._rowIdx][this._colIdx+this._colIdxDifference]).caption),i==t.types.DataFieldType.NUMBER)return null!=e?e.toString():"";if(i!=t.types.DataFieldType.STRING&&i!=t.types.DataFieldType.WEEKDAY&&i!=t.types.DataFieldType.MONTH){if(i==t.types.DataFieldType.LEVEL){e=(i=this._allHierarchies.getItem(this._columnsList[this._colIdx].hierarchy)).members.getItemAt(this._tuples[this._rowIdx][this._colIdx+this._colIdxDifference]).caption;for(var r=this._colIdx,n=0;n<i.levels_.length-2;n++)this.addMember(this.composeStringData(e,r)),this._colIdx++,e=null==this._tuples[this._rowIdx][this._colIdx+this._colIdxDifference]||""==this._tuples[this._rowIdx][this._colIdx+this._colIdxDifference]+""?"":i.members.getItemAt(this._tuples[this._rowIdx][this._colIdx+this._colIdxDifference]).caption;return this.composeStringData(e,r)}if(i==t.types.DataFieldType.DATE_STRING)return this._allHierarchies.getItem(this._columnsList[this._colIdx].uniqueName).members.getItemAt(this._tuples[this._rowIdx][this._colIdx+this._colIdxDifference]).levelOrdinal/1e3+"";if(i==t.types.DataFieldType.DATE)return e="",e+=(i=this._allHierarchies.getItem(this._columnsList[this._colIdx].uniqueName+".Year").members.getItemAt(this._tuples[this._rowIdx][this._colIdx+this._colIdxDifference])).caption+"-",this._colIdxDifference++,e+=(i=this._allHierarchies.getItem(this._columnsList[this._colIdx].uniqueName+".Month").members.getItemAt(this._tuples[this._rowIdx][this._colIdx+this._colIdxDifference])).caption+"-",this._colIdxDifference++,e+=(i=this._allHierarchies.getItem(this._columnsList[this._colIdx].uniqueName+".Day").members.getItemAt(this._tuples[this._rowIdx][this._colIdx+this._colIdxDifference])).caption,new Date(e).getTime()/1e3+Math.abs(60*(new Date).getTimezoneOffset())+"";if(i==t.types.DataFieldType.HIERARCHICAL_DATE||i==t.types.DataFieldType.HIERARCHICAL_DATE_WITH_QUARTERS)return this.composeHierarchicalDateData(i);if(i==t.types.DataFieldType.TIME||i==t.types.DataFieldType.DATETIME)return this._facts[this._rowIdx][this._colIdx+this._colIdxDifference]+""}return this.composeStringData(e)},i.prototype.addMember=function(t){this._data+=t==this.NaN||t==e.model._labels.Labels.MEMBER_BLANK?"":t,this._data+=this._colIdx+this._colIdxDifference<this._tuples[this._rowIdx].length-1?",":""},i.prototype.composeStringData=function(e,t){return void 0===t&&(t=this._colIdx),""==e?e:(this._columnsList[t].members.keyExists(e)||this._columnsList[t].members.addItem(e,this._columnsList[t].members.length),this.encodeChars(e))},i.prototype.encodeChars=function(e){return e.replace(/,/g,"%d%").replace(/\"/g,"%q%").replace(/\n/g,"%n%")},i.prototype.composeHierarchicalDateData=function(e){return this._colIdxDifference+=2,this._colIdxDifference=e==t.types.DataFieldType.HIERARCHICAL_DATE_WITH_QUARTERS?this._colIdxDifference+1:this._colIdxDifference,this._allHierarchies.getItem(this._columnsList[this._colIdx].uniqueName).members.getItemAt(this._tuples[this._rowIdx][this._colIdx+this._colIdxDifference]).levelOrdinal/1e3+""},i.prototype.onDataCreated=function(){e.preloader(!1),null!=this._callback&&this._callback(this.getResult())},i.prototype.processHierarchyColumn=function(e){var i=this.getHierarchyType(e);i==t.types.DataFieldType.LEVEL?this.processLevelsColumn(e):i==t.types.DataFieldType.DATE?(this._columnsList.push(this.createColumn(i,e.dimension.uniqueName,e.dimension.caption)),this._colIdx+=2):this._columnsList.push(this.createColumn(i,e.uniqueName,e.caption))},i.prototype.getResult=function(){for(var t=this._embeddedJSONDataStart+"\n___csv___WDR___"+e.Pivot.BUILD_VERSION+"\n",i=0;i<this._columnsList.length;i++)t+=this._columnsList[i].uniqueName,t+=":{",t+='"type": "'+this._columnsList[i].type+'"',this._columnsList[i].isLevel?(t+=', "hierarchy": "'+this._columnsList[i].hierarchy+'"',t+=', "level": "'+this._columnsList[i].uniqueName+'"',s.nullOrUndefined(this._columnsList[i].parent)||(t+=', "parent": "'+this._columnsList[i].parent+'"')):this._columnsList[i].uniqueName!=this._columnsList[i].caption&&(t+=', "caption": "'+this._columnsList[i].caption+'"'),t+="}",t+=i<this._columnsList.length-1?",":"";return t+"\n"+this._data+this._embeddedJSONDataFinish},i.prototype.processMeasureColumn=function(e){this._columnsList.push(this.createColumn(t.types.MeasureType.toDataFieldType(e.type),e.uniqueName,e.originalCaption,!0))},i.prototype.processLevelsColumn=function(e){var i=e.uniqueName;e=e.levels_;for(var r,n,o=1;o<e.length;o++){var a;n=o,r=e.getItem(e.getKeyAt(o)),1<n&&(a=e.getItem(e.getKeyAt(n-1)).uniqueName),(r=this.createColumn(t.types.DataFieldType.LEVEL,r.uniqueName,r.caption)).isLevel=!0,r.hierarchy=i,s.nullOrUndefined(a)||(r.parent=a),this._columnsList.push(r)}},i.prototype.getHierarchyType=function(e){if(e.dimension.type.toString()==t.types.DataFieldType.DATE_STRING)return t.types.DataFieldType.DATE_STRING;var i=t.types.DataFieldType.typeName(e.type);return 2<e.levels_.length&&(i=4==e.levels_.length&&e.levels_.getItemAt(1).uniqueName==e.uniqueName+".Year"?t.types.DataFieldType.HIERARCHICAL_DATE:5==e.levels_.length&&e.levels_.getItemAt(1).uniqueName==e.uniqueName+".Year"?t.types.DataFieldType.HIERARCHICAL_DATE_WITH_QUARTERS:t.types.DataFieldType.LEVEL),i},i.prototype.showSavingProgress=function(t,i){var r=s.StringUtils.bind(e.model._labels.Labels.MESSAGE_ANALYZING_RECORDS,(t/i*100).toFixed(0)+"%");e.preloader(!0,e.model._labels.Labels.MESSAGE_SAVING,r)},i.prototype.createColumn=function(e,t,i,r){void 0===r&&(r=!1);var o=new n;return o.type=e,o.uniqueName=t,o.caption=i,o.isMeasure=r,o},i}();i.CSVSaver=r;var n=function(){function e(){this._isLevel=!1,this._members=new s.AssociativeArray}return Object.defineProperty(e.prototype,"members",{get:function(){return this._members},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return this._type},set:function(e){this._type=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"uniqueName",{get:function(){return this._uniqueName},set:function(e){this._uniqueName=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"caption",{get:function(){return this._caption},set:function(e){this._caption=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isMeasure",{get:function(){return this._isMeasure},set:function(e){this._isMeasure=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isLevel",{get:function(){return this._isLevel},set:function(e){this._isLevel=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hierarchy",{get:function(){return this._hierarchyUniqueName},set:function(e){this._hierarchyUniqueName=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this._parentUniqueName},set:function(e){this._parentUniqueName=e},enumerable:!0,configurable:!0}),e}();i.Column=n}((t=e.data_||(e.data_={})).csv||(t.csv={}))}(n||(n={})),function(e){var t,i,r;i=(t=e.data_||(e.data_={})).json||(t.json={}),r=function(t){function i(){var e=t.call(this)||this;return e.CHUNK_SIZE=1e4,e.factsCounter=0,e.fileExtensions=[".js",".json"],e}return a(i,t),i.prototype.load=function(e,i,r,n,o){this.clear(),this.successHandler=i,this.errorHandler=r,this.connectedHandler=n,this.cancelledHandler=o,!0===e.browseForFile?this.browseFile():void 0!==e.filename&&""!=e.filename&&"()"!=e.filename.substr(-2)?t.prototype.load.call(this,e,i,r,n,o):this.addData(e.data)},i.prototype.onFileProgress=function(i){if(!s.nullOrUndefined(this.loader))try{if(1e4<i.loaded-this.bytesLoaded){var r=s.StringUtils.bind(e.model._labels.Labels.MESSAGE_LOADING_PROGRESS,s.NumberFormatter.formatThousands((i.loaded/1e3).toFixed(0)),s.NumberFormatter.formatThousands((i.total/1e3).toFixed(0)));e.preloader(!0,e.model._labels.Labels.MESSAGE_LOADING_DATA,r)}this.bytesLoaded=i.loaded}catch(t){console.error(t.stack),this.onFileError()}},i.prototype.onFileComplete=function(){if(!s.nullOrUndefined(this.loader)){var t=this.loader.response;this.connected=!0,t.length>e.model.license.Limitations.MAX_JSON?(e.uialert(e.model.license.LicenseLabels.getLabel(e.model.license.LicenseLabels.betaversion),e.model.license.LicenseLabels.getLabel(e.model.license.LicenseLabels.tooLarge)),e.preloader(!1),null!=this.errorHandler&&(this.errorHandler(),this.errorHandler=null),this.clear()):(this.isFileLoaded=!0,this.parseChunk(t))}},i.prototype.parseChunk=function(i){try{var r=JSON.parse(i);if(s.nullOrUndefined(r.items)||(r=r.items),s.nullOrUndefined(r.length))return void this.invalidFormat()}catch(t){return void this.invalidFormat()}e.preloader(!1),this.addData(r)},i.prototype.addData=function(t){if(s.nullOrUndefined(t.items)||(t=t.items),!(s.nullOrUndefined(t)||1>t.length))if(JSON.stringify(t).length>e.model.license.Limitations.MAX_JSON&&15649632e5<Date.now()||t.toString().length>e.model.license.Limitations.MAX_JSON)e.uialert(e.model.license.LicenseLabels.getLabel(e.model.license.LicenseLabels.betaversion),e.model.license.LicenseLabels.getLabel(e.model.license.LicenseLabels.tooLarge));else{this.setConnected();var i=!1,r=t[0]&&t[0]instanceof Array;r?this.parseHeader(t[0].toString(),t[1].toString()):i=this.cube_.structure_.addDataStructure(t[0]),this.data=t.slice(),this.factsCounter=0,(i||r)&&this.data.shift(),this.parseAllDataRows(),this.onParseComplete()}},i.prototype.updateData=function(t){if(!(s.nullOrUndefined(t)||1>t.length))if(JSON.stringify(t).length>e.model.license.Limitations.MAX_JSON&&15649632e5<Date.now()||t.toString().length>e.model.license.Limitations.MAX_JSON)e.uialert(e.model.license.LicenseLabels.getLabel(e.model.license.LicenseLabels.betaversion),e.model.license.LicenseLabels.getLabel(e.model.license.LicenseLabels.tooLarge));else{this.cube_.localDataStorage.clearUpdates();for(var i=t[1]&&t[1]instanceof Array,r=0;r<t.length;r++)i?this.cube_.localDataStorage.insertArray(t[r],!0):this.cube_.localDataStorage.insertObject(t[r],!0)}},i.prototype.onParseComplete=function(){e.preloader(!1),this.successHandler()},i.prototype.parseDataRow=function(t){var i=this.factsCounter;t=i+this.CHUNK_SIZE;for(var r=this.data[1]&&this.data[1]instanceof Array;i<t;i++){if(i==this.data.length)return!0;r?this.cube_.localDataStorage.insertArray(this.data[i]):this.cube_.localDataStorage.insertObject(this.data[i]),this.factsCounter++}return 100<(t=Math.round(this.factsCounter/this.data.length*100))&&(t=100),e.preloader(!0,e.model._labels.Labels.MESSAGE_ANALYZING_DATA,s.StringUtils.bind(e.model._labels.Labels.MESSAGE_ANALYZING_PROGRESS,s.NumberFormatter.formatThousands(this.factsCounter.toString()),s.NumberFormatter.formatThousands(this.data.length.toString()),t.toString())),!1},i.prototype.parseAllDataRows=function(){e.preloader(!0,e.model._labels.Labels.MESSAGE_ANALYZING_DATA,s.StringUtils.bind(e.model._labels.Labels.MESSAGE_ANALYZING_RECORDS,s.NumberFormatter.formatThousands(this.data.length.toFixed(0))));for(var t=this.data[1]&&this.data[1]instanceof Array;this.factsCounter<this.data.length;this.factsCounter++)t?this.cube_.localDataStorage.insertArray(this.data[this.factsCounter]):this.cube_.localDataStorage.insertObject(this.data[this.factsCounter])},i.prototype.invalidFormat=function(){e.preloader(!1),e.uialert(e.model._labels.Labels.MESSAGE_INVALID_JSON_DATA,e.model._labels.Labels.ERROR),this.errorHandler(),this.stopTimer()},i}(t.csv.CSVLoader),i.JSONLoader=r}(n||(n={})),function(e){!function(e){!function(e){var t=function(){function e(){}return e.valid=function(t){return t==e.JSON||t==e.CSV||t==e.EMPTY},e.CSV="csv",e.JSON="json",e.EMPTY="",e}();e.DataSourceType=t}(e.consts||(e.consts={}))}(e.data_||(e.data_={}))}(n||(n={})),function(e){!function(e){!function(e){var t=function(){function e(){}return e.TOP="top",e.BOTTOM="bottom",e.NONE="none",e}();e.FilterType=t}(e.consts||(e.consts={}))}(e.data_||(e.data_={}))}(n||(n={})),function(e){!function(e){!function(e){var t=function(){function e(){}return e.isValid=function(t){return t==e.UNSORTED||t==e.ASC||t==e.DESC},e.UNSORTED="unsorted",e.ASC="asc",e.DESC="desc",e.NUMERIC_RANGE="numericRange",e}();e.SortType=t}(e.consts||(e.consts={}))}(e.data_||(e.data_={}))}(n||(n={})),function(e){!function(e){!function(e){var t=function(){function e(){}return e.ROWS_AXIS="rows",e.COLUMNS_AXIS="columns",e.PAGES_AXIS="pages",e}();e.AxisName=t}(e.consts||(e.consts={}))}(e.data_||(e.data_={}))}(n||(n={})),function(e){!function(e){!function(e){var t=function(){function e(){}return e.MD_DIMTYPE_UNKNOWN=0,e.MD_DIMTYPE_TIME=1,e.MD_DIMTYPE_MEASURE=2,e.MD_DIMTYPE_OTHER=3,e}();e.DimensionType=t}(e.types||(e.types={}))}(e.data_||(e.data_={}))}(n||(n={})),function(e){!function(e){!function(e){var t=function(){function t(){}return t.fromDataFieldType=function(i){var r=t.DEFAULT;switch(i){case e.DataFieldType.NUMBER:r=t.MEASURE;break;case e.DataFieldType.DATE:r=t.DATE}return r},t.toDataFieldType=function(i){var r=e.DataFieldType.STRING;switch(i){case t.MEASURE:r=e.DataFieldType.NUMBER;break;case t.DATE:r=e.DataFieldType.DATE}return r},t.DEFAULT=0,t.DATE=1,t.MEASURE=2,t}();e.HierarchyType=t}(e.types||(e.types={}))}(e.data_||(e.data_={}))}(n||(n={})),function(e){!function(e){!function(e){var t=function(){function t(){}return t.fromColumnType=function(e){switch(e){case 13:return t.TIME;case 15:return t.DATETIME;case 3:return t.BOOLEAN;case 12:return t.NUMBER}return t.COUNT},t.fromDataType=function(e){var i=t.COUNT;switch(e){case"number":i=t.NUMBER;break;case"string":i=t.STRING;break;case"boolean":i=t.BOOLEAN;break;case"date":i=t.DATE;break;case"timestamp":i=t.TIME;break;case"count":i=t.COUNT}return i},t.toDataFieldType=function(i){switch(i){case t.STRING:return e.DataFieldType.STRING;case t.BOOLEAN:return e.DataFieldType.BOOLEAN;case t.DATE:return e.DataFieldType.DATE;case t.DATETIME:return e.DataFieldType.DATETIME;case t.TIME:return e.DataFieldType.TIME}return e.DataFieldType.NUMBER},t.NUMBER=1,t.STRING=2,t.BOOLEAN=3,t.DATE=4,t.TIME=5,t.DATETIME=6,t.COUNT=7,t}();e.MeasureType=t}(e.types||(e.types={}))}(e.data_||(e.data_={}))}(n||(n={})),function(e){!function(e){!function(e){var t=function(){function e(){}return e.ALL=0,e.STRING=1,e.NUMBER=2,e.BOOLEAN=3,e.DATE=4,e.TIME=5,e.YEAR=6,e.HALFYEAR=7,e.QUARTER=8,e.MONTH=9,e.WEEK=10,e.WEEKDAY=11,e.DAY=12,e.HOUR=13,e.MINUTE=14,e.SECOND=15,e.MILLISECOND=16,e.TIME_DATE=17,e}();e.LevelType=t}(e.types||(e.types={}))}(e.data_||(e.data_={}))}(n||(n={})),function(e){!function(e){!function(e){var t=function(){function e(){}return e.typeName=function(t){return e.allStrings[t]},e.typeNum=function(t){return e.allStrings.indexOf(t)},e.valid=function(t){return-1<e.allStrings.indexOf(t)},e.typeFromValue=function(t){return""===t?e.STRING:"number"!=typeof t&&isNaN(Number(t))?0<Date.parse(t)?s.detectBrowser().isChrome&&!t.match(/^([\+-]?\d{4}(?!\d{2}\b))((-?)((0[1-9]|1[0-2])(\3([12]\d|0[1-9]|3[01]))?|W([0-4]\d|5[0-2])(-?[1-7])?|(00[1-9]|0[1-9]\d|[12]\d{2}|3([0-5]\d|6[1-6])))([T\s]((([01]\d|2[0-3])((:?)[0-5]\d)?|24\:?00)([\.,]\d+(?!:))?)?(\17[0-5]\d([\.,]\d+)?)?([zZ]|([\+-])([01]\d|2[0-3]):?([0-5]\d)?)?)?)?$/i)?e.STRING:e.DATE:e.STRING:e.NUMBER},e.STRING="string",e.allStrings=[e.NUMBER="number",e.STRING,e.BOOLEAN="boolean",e.LEVEL="level",e.MONTH="month",e.WEEKDAY="weekday",e.DATE="date",e.DATE_STRING="date string",e.HIERARCHICAL_DATE="year/month/day",e.HIERARCHICAL_DATE_WITH_QUARTERS="year/quarter/month/day",e.TIME="time",e.DATETIME="datetime",e.ID="id",e.DELETE="delete",e.HIDDEN="hidden"],e}();e.DataFieldType=t}(e.types||(e.types={}))}(e.data_||(e.data_={}))}(n||(n={})),function(e){var t;!function(t){var i=function(){function t(){}return t.aggregationCaption=function(i){return i==t.SUM?e.model._labels.Labels.SUM_CAPTION:i==t.COUNT?e.model._labels.Labels.COUNT_CAPTION:i==t.DISTINCT_COUNT||i==t.DISTINCT_COUNT_DEPRECATED?e.model._labels.Labels.DISTINCT_COUNT_CAPTION:i==t.AVERAGE?e.model._labels.Labels.AVERAGE_CAPTION:i==t.PRODUCT?e.model._labels.Labels.PRODUCT_CAPTION:i==t.MIN?e.model._labels.Labels.MIN_CAPTION:i==t.MAX?e.model._labels.Labels.MAX_CAPTION:i==t.PERCENT?e.model._labels.Labels.PERCENT_CAPTION:i==t.PERCENT_COLUMN||i==t.PERCENT_COLUMN_DEPRECATED?e.model._labels.Labels.PERCENT_COLUMN_CAPTION:i==t.PERCENT_ROW?e.model._labels.Labels.PERCENT_ROW_CAPTION:i==t.INDEX?e.model._labels.Labels.INDEX_CAPTION:i==t.DIFFERENCE?e.model._labels.Labels.DIFFERENCE_CAPTION:i==t.PERCENT_DIFFERENCE?e.model._labels.Labels.PERCENT_DIFFERENCE_CAPTION:i==t.NONE?e.model._labels.Labels.NONE_CAPTION:i==t.MEDIAN?e.model._labels.Labels.MEDIAN_CAPTION:i==t.STDEVP?e.model._labels.Labels.STDEVP_CAPTION:i==t.STDEVS?e.model._labels.Labels.STDEVS_CAPTION:i==t.RUNNING_TOTALS?e.model._labels.Labels.RUNNING_TOTALS_CAPTION:i},t.aggregationCaptions=function(e){void 0===e&&(e=null);var i=[];e=e||t.ALL_AGGREGATIONS;for(var r=0;r<e.length;r++)i.push(t.aggregationCaption(e[r]));return i},t.aggregationTotalCaptions=function(i){void 0===i&&(i=null);var r=[];i=i||t.ALL_AGGREGATIONS;for(var n=0;n<i.length;n++)i[n]==t.SUM&&r.push(e.model._labels.Labels.SUM_TOTAL_CAPTION),i[n]==t.COUNT&&r.push(e.model._labels.Labels.COUNT_TOTAL_CAPTION),i[n]!=t.DISTINCT_COUNT&&i[n]!=t.DISTINCT_COUNT_DEPRECATED||r.push(e.model._labels.Labels.DISTINCT_COUNT_TOTAL_CAPTION),i[n]==t.AVERAGE&&r.push(e.model._labels.Labels.AVERAGE_TOTAL_CAPTION),i[n]==t.PRODUCT&&r.push(e.model._labels.Labels.PRODUCT_TOTAL_CAPTION),i[n]==t.MIN&&r.push(e.model._labels.Labels.MIN_TOTAL_CAPTION),i[n]==t.MAX&&r.push(e.model._labels.Labels.MAX_TOTAL_CAPTION),i[n]==t.PERCENT&&r.push(e.model._labels.Labels.PERCENT_TOTAL_CAPTION),i[n]!=t.PERCENT_COLUMN&&i[n]!=t.PERCENT_COLUMN_DEPRECATED||r.push(e.model._labels.Labels.PERCENT_COLUMN_TOTAL_CAPTION),i[n]==t.PERCENT_ROW&&r.push(e.model._labels.Labels.PERCENT_ROW_TOTAL_CAPTION),i[n]==t.INDEX&&r.push(e.model._labels.Labels.INDEX_TOTAL_CAPTION),i[n]==t.DIFFERENCE&&r.push(e.model._labels.Labels.DIFFERENCE_TOTAL_CAPTION),i[n]==t.PERCENT_DIFFERENCE&&r.push(e.model._labels.Labels.PERCENT_DIFFERENCE_TOTAL_CAPTION),i[n]==t.NONE&&r.push("{0}"),i[n]==t.MEDIAN&&r.push(e.model._labels.Labels.MEDIAN_TOTAL_CAPTION),i[n]==t.STDEVP&&r.push(e.model._labels.Labels.STDEVP_TOTAL_CAPTION),i[n]==t.STDEVS&&r.push(e.model._labels.Labels.STDEVS_TOTAL_CAPTION),i[n]==t.RUNNING_TOTALS&&r.push(e.model._labels.Labels.RUNNING_TOTALS_TOTAL_CAPTION);return r},t.validType=function(e){return-1!=t.ALL_AGGREGATIONS.indexOf(e)||e==t.NONE},t.validForDateTimeFormatting=function(e){return-1!=t.AGGREGATIONS_COMPATIBLE_WITH_DATETIME_FORMATTING.indexOf(e)||e==t.NONE},t.validForTimeFormatting=function(e){return-1!=t.AGGREGATIONS_COMPATIBLE_WITH_TIME_FORMATTING.indexOf(e)||e==t.NONE},t.isCount=function(e){return-1!=t.AGGREGATIONS_WITH_COUNT_FORMATTING.indexOf(e)},t.isPercent=function(e){return-1!=t.AGGREGATIONS_WITH_PERCENT_FORMATTING.indexOf(e)},t.deprecatedType=function(e){return e==t.DISTINCT_COUNT_DEPRECATED||e==t.PERCENT_COLUMN_DEPRECATED},t.fromDeprecatedToValid=function(e){switch(e){case t.DISTINCT_COUNT_DEPRECATED:return t.DISTINCT_COUNT;case t.PERCENT_COLUMN_DEPRECATED:return t.PERCENT_COLUMN;default:return""}},t.SUM="sum",t.COUNT="count",t.DISTINCT_COUNT="distinctcount",t.DISTINCT_COUNT_DEPRECATED="distinct count",t.AVERAGE="average",t.PERCENT="percent",t.PERCENT_COLUMN="percentofcolumn",t.PERCENT_ROW="percentofrow",t.PERCENT_COLUMN_DEPRECATED="percent of column",t.PRODUCT="product",t.INDEX="index",t.MIN="min",t.MAX="max",t.NONE="none",t.DIFFERENCE="difference",t.PERCENT_DIFFERENCE="%difference",t.ALL_AGGREGATIONS=[t.SUM,t.COUNT,t.DISTINCT_COUNT,t.AVERAGE,t.MEDIAN="median",t.PRODUCT,t.MIN,t.MAX,t.PERCENT,t.PERCENT_COLUMN,t.PERCENT_ROW,t.INDEX,t.DIFFERENCE,t.PERCENT_DIFFERENCE,t.STDEVP="stdevp",t.STDEVS="stdevs",t.RUNNING_TOTALS="runningtotals"],t.AGGREGATIONS_COMPATIBLE_WITH_DATETIME_FORMATTING=[t.SUM,t.AVERAGE,t.MEDIAN,t.PRODUCT,t.MIN,t.MAX],t.AGGREGATIONS_COMPATIBLE_WITH_TIME_FORMATTING=[t.SUM,t.AVERAGE,t.MEDIAN,t.PRODUCT,t.MIN,t.MAX,t.DIFFERENCE,t.STDEVP,t.STDEVS,t.RUNNING_TOTALS],t.AGGREGATIONS_WITH_COUNT_FORMATTING=[t.COUNT,t.DISTINCT_COUNT],t.AGGREGATIONS_WITH_PERCENT_FORMATTING=[t.PERCENT,t.PERCENT_COLUMN,t.PERCENT_ROW,t.PERCENT_DIFFERENCE],t}();t.AggregationName=i}((t=e.data_||(e.data_={})).consts||(t.consts={}))}(n||(n={})),function(e){!function(e){!function(e){var t=function(){function e(){}return e.ADD="+",e.SUBTRACT="-",e.MULTIPLY="*",e.DIVIDE="/",e.POWER="^",e.LESS="<",e.GREATER=">",e.EQUAL="=",e.EQUAL_2="==",e.NOT_EQUAL="!=",e.LESS_OR_EQUAL="<=",e.GREATER_OR_EQUAL=">=",e.OR="or",e.AND="and",e.IF="if",e.ABS="abs",e.MIN="min",e.MAX="max",e.BLANK="isnan",e.NOT_BLANK="!isnan",e.VALUE="value",e.UPDATE_DIFFERENCE="updatedifference",e.UPDATE_PERCENT="updatepercent",e}();e.FunctionName=t}(e.consts||(e.consts={}))}(e.data_||(e.data_={}))}(n||(n={})),function(e){!function(e){!function(e){var t=function(){function e(){}return e.SELECT="select",e.EXPAND="expand",e.COLLAPSE="collapse",e.DRILL_UP="drillUp",e.DRILL_DOWN="drillDown",e.DRILL_DOWN_TO="drillDownTo",e.DRILL_THROUGH="drillThrough",e.FILTER="filter",e.SEARCH="search",e}();e.QueryType=t}(e.consts||(e.consts={}))}(e.data_||(e.data_={}))}(n||(n={})),function(e){!function(e){!function(e){var t=function(){function e(){}return e.DIVIDE_BY_ZERO=.001122334400556678,e}();e.DataConsts=t}(e.consts||(e.consts={}))}(e.data_||(e.data_={}))}(n||(n={})),function(e){!function(e){var t,i;t=e.vo||(e.vo={}),i=function(){function i(){this._dataSourceType=e.consts.DataSourceType.EMPTY,this.isUpdateData=!1}return Object.defineProperty(i.prototype,"dataSourceType",{get:function(){return this._dataSourceType},set:function(e){this._dataSourceType=e.toLowerCase()},enumerable:!0,configurable:!0}),i.prototype.isEqual=function(e){return e&&this.dataSourceType==e.dataSourceType},Object.defineProperty(i.prototype,"isEmpty",{get:function(){return this._dataSourceType==e.consts.DataSourceType.EMPTY},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"isDemo",{get:function(){return this._dataSourceType==e.consts.DataSourceType.CSV&&"this"==this.filename},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"isInlineData",{get:function(){return!1},set:function(e){},enumerable:!0,configurable:!0}),i.fromObject=function(r){if(null==r)return new i;if(s.nullOrUndefined(r.connectionInfo)||(r=r.connectionInfo),r instanceof i||r instanceof t.CSVConnectionInfo||r instanceof t.JSONConnectionInfo||(r=i.toPlainObject(r)),s.nullOrUndefined(r.dataSourceType)||(r.dataSourceType=r.dataSourceType.toLowerCase()),!s.nullOrUndefined(r.filename)&&s.nullOrUndefined(r.dataSourceType)){var n=r.filename.split("?")[0].toLowerCase();r.dataSourceType=".csv"==n.substr(-4)?e.consts.DataSourceType.CSV:".json"==n.substr(-5)||".js"==n.substr(-3)?e.consts.DataSourceType.JSON:e.consts.DataSourceType.CSV}switch(!s.nullOrUndefined(r.data)&&r.data instanceof Array&&(r.dataSourceType=e.consts.DataSourceType.JSON,r.data=r.data.slice()),r.dataSourceType){case e.consts.DataSourceType.CSV:return t.CSVConnectionInfo.fromObject(r);case e.consts.DataSourceType.JSON:return t.JSONConnectionInfo.fromObject(r);default:return new i}},i.toPlainObject=function(e){var t={};return null!=e.dataSourceType&&(t.dataSourceType=e.dataSourceType),null!=e.filename&&(t.filename=e.filename),null!=e.requestHeader&&(t.requestHeader=e.requestHeader),null!=e.browseForFile&&(t.browseForFile=e.browseForFile),null!=e.fieldSeparator&&(t.fieldSeparator=e.fieldSeparator),null!=e.recordsetDelimiter&&(t.recordsetDelimiter=e.recordsetDelimiter),null!=e.ignoreQuotedLineBreaks&&(t.ignoreQuotedLineBreaks=e.ignoreQuotedLineBreaks),null!=e.embedded&&(t.embedded=e.embedded),null!=e.embeddedDataOffset&&(t.embeddedDataOffset=e.embeddedDataOffset),null!=e.embeddedDataToLoad&&(t.embeddedDataToLoad=e.embeddedDataToLoad),null!=e.data&&(t.data=e.data),null!=e.checkUpdates&&(t.checkUpdates=e.checkUpdates),null!=e.url&&(t.url=e.url),null!=e.hash&&(t.hash=e.hash),null!=e.username&&(t.username=e.username),null!=e.password&&(t.password=e.password),null!=e.dataSource&&(null!=(e=e.dataSource).dataSourceType&&(t.dataSourceType=e.dataSourceType),null!=e.filename&&(t.filename=e.filename),null!=e.browseForFile&&(t.browseForFile=e.browseForFile),null!=e.fieldSeparator&&(t.fieldSeparator=e.fieldSeparator),null!=e.recordsetDelimiter&&(t.recordsetDelimiter=e.recordsetDelimiter),null!=e.ignoreQuotedLineBreaks&&(t.ignoreQuotedLineBreaks=e.ignoreQuotedLineBreaks),null!=e.embedded&&(t.embedded=e.embedded),null!=e.embeddedDataOffset&&(t.embeddedDataOffset=e.embeddedDataOffset),null!=e.embeddedDataToLoad&&(t.embeddedDataToLoad=e.embeddedDataToLoad),null!=e.isOCSV2Data&&(t.isOCSV2Data=e.isOCSV2Data),null!=e.data&&(t.data=e.data),null!=e.url&&(t.url=e.url),null!=(e=e.credentials)&&(null!=e.hash&&(t.hash=e.hash),null!=e.username&&(t.username=e.username),null!=e.password&&(t.password=e.password))),t},i.prototype.toObject=function(t){return t={},this.dataSourceType!=e.consts.DataSourceType.EMPTY&&(t.dataSourceType=this.dataSourceType),t},i}(),t.ConnectionInfo=i}(e.data_||(e.data_={}))}(n||(n={})),function(e){!function(e){!function(e){var t=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.browseForFile=!1,t.requestHeader=null,t}return a(t,e),t.prototype.isEqual=function(t){return e.prototype.isEqual.call(this,t)&&this.filename==t.filename&&0==this.browseForFile&&0==t.browseForFile},t}(e.ConnectionInfo);e.FileConnectionInfo=t}(e.vo||(e.vo={}))}(e.data_||(e.data_={}))}(n||(n={})),function(e){!function(e){var t,i;i=function(t){function i(){var i=t.call(this)||this;return i.checkUpdates=!1,i.dataSourceType=e.consts.DataSourceType.JSON,i}return a(i,t),Object.defineProperty(i.prototype,"isEmpty",{get:function(){return s.nullOrEmpty(this.filename)&&(null==this.browseForFile||0==this.browseForFile)&&s.nullOrUndefined(this.data)},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"isInlineData",{get:function(){return!s.nullOrUndefined(this.data)},set:function(e){},enumerable:!0,configurable:!0}),i.prototype.isEqual=function(e){return e==this||t.prototype.isEqual.call(this,e)&&s.nullOrUndefined(e.data)},i.fromObject=function(e){var t=new i;return void 0!==e.browseForFile&&(t.browseForFile=e.browseForFile),void 0!==e.filename&&""!=e.filename&&(t.filename=e.filename),void 0!==e.data&&(t.data=e.data),void 0!==e.checkUpdates&&(t.checkUpdates=e.checkUpdates),void 0!==e.requestHeader&&(t.requestHeader=e.requestHeader),t},i.prototype.toObject=function(e){void 0===e&&(e=!1);var t={};return t.dataSourceType=this.dataSourceType,(e||this.browseForFile)&&(t.browseForFile=this.browseForFile),this.filename&&(t.filename=this.filename),s.nullOrUndefined(this.data)||(t.data=this.data),t},i}((t=e.vo||(e.vo={})).FileConnectionInfo),t.JSONConnectionInfo=i}(e.data_||(e.data_={}))}(n||(n={})),function(e){!function(e){var t,i;i=function(t){function i(){var i=t.call(this)||this;return i.recordsetDelimiter="\n",i.ignoreQuotedLineBreaks=!0,i.embedded=!1,i.embeddedDataOffset=0,i.dataSourceType=e.consts.DataSourceType.CSV,i}return a(i,t),Object.defineProperty(i.prototype,"isEmpty",{get:function(){return s.nullOrEmpty(this.filename)&&(null==this.browseForFile||0==this.browseForFile)&&(null==this.embedded||0==this.embedded)},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"isInlineData",{get:function(){return!s.nullOrUndefined(this.data)},set:function(e){},enumerable:!0,configurable:!0}),i.prototype.isEqual=function(e){return t.prototype.isEqual.call(this,e)&&0==this.embedded&&0==e.embedded},i.fromObject=function(e){var t=new i;return void 0!==e.browseForFile&&(t.browseForFile=e.browseForFile),void 0!==e.filename&&""!=e.filename&&(t.filename=e.filename),void 0!==e.fieldSeparator&&(t.fieldSeparator=e.fieldSeparator),void 0!==e.recordsetDelimiter&&(t.recordsetDelimiter=e.recordsetDelimiter),void 0!==e.ignoreQuotedLineBreaks&&(t.ignoreQuotedLineBreaks=e.ignoreQuotedLineBreaks),void 0!==e.embedded&&(t.embedded=e.embedded),void 0!==e.embeddedDataOffset&&(t.embeddedDataOffset=e.embeddedDataOffset),void 0!==e.embeddedDataToLoad&&(t.embeddedDataToLoad=e.embeddedDataToLoad),void 0!==e.requestHeader&&(t.requestHeader=e.requestHeader),t},i.prototype.toObject=function(e){void 0===e&&(e=!1);var t={};return t.dataSourceType=this.dataSourceType,(e||this.browseForFile&&!this.embedded)&&(t.browseForFile=this.browseForFile),this.filename&&(t.filename=this.filename),this.fieldSeparator&&(t.fieldSeparator=this.fieldSeparator),this.recordsetDelimiter&&"\n"!=this.recordsetDelimiter&&(t.recordsetDelimiter=this.recordsetDelimiter),(e||0==this.ignoreQuotedLineBreaks)&&(t.ignoreQuotedLineBreaks=this.ignoreQuotedLineBreaks),this.embedded&&(t.embedded=this.embedded),t},i}((t=e.vo||(e.vo={})).FileConnectionInfo),t.CSVConnectionInfo=i}(e.data_||(e.data_={}))}(n||(n={})),function(e){var i,n;i=e._view||(e._view={}),n=function(n){function o(t,r){var a=n.call(this)||this;a.isUIReady=!1,a.model_=e.model.PivotModel.getInstance(),a.width=0,a.height=0,a.lastWidth=0,a.lastHeight=0,a.delayedDraws=[],a.notReadyCount=0,a.drawn=!1,a.drillthroughClosedHandler=function(){return a.onDrillThroughClosed()},a.isFocused=!0,a.setId("wdr-pivot-view"),null!=a.parentContainer&&a.parentContainer.dispose(),t.empty(),a.parentContainer=t,o.stage=a;var l=r.width?"number"==typeof r.width?r.width+"px":-1<r.width.indexOf("px")||r.width.indexOf("%")==r.width.length-1?r.width:r.width+"px":"100%",c=r.height?"number"==typeof r.height?r.height+"px":-1<r.height.indexOf("px")||r.height.indexOf("%")==r.height.length-1?r.height:r.height+"px":"500px",u=/\d+(?=px|%)/;return l=l.match(u)?l:"100%",c=c.match(u)?c:"500px",a.parentContainer.css("width",l),a.parentContainer.css("height",c),a.container.css("width",l),a.container.css("height",c),a.parentContainer.append(a.container),a.container.requestAnimationFrame((function(){a.toolbar=r.toolbar?new WebDataRocksToolbar(a.parentContainer.element,e.Pivot.instance.api,"html5",l,e.model._labels.LabelsManager.getInstance().getCurrentLocalization().toolbar):null,e.model.JavaScriptHandlers.getInstance().dispatch(new e.model.APIEvent(e.model.JavaScriptHandlers.BEFORE_TOOLBAR_CREATED,a.toolbar)),a.toolbar&&null!=a.toolbar.create&&a.toolbar.create(),a.setControls(),a.draw()})),a.model_.state_.addEventListener(e.model._state.StateEvent.LOADING_REPORT_FILE,(function(){return a.onLoadingReportFile()})),a.model_.state_.addEventListener(e.model._state.StateEvent.EMPTY_SLICE,(function(){return a.onEmptySlice()})),a.model_.state_.addEventListener(e.model._state.StateEvent.LOADING_DATA,(function(){return a.onLoadingData()})),a.model_.state_.addEventListener(e.model._state.StateEvent.RUNNING_QUERY,(function(){return a.onBeforeDataQuery()})),a.model_.state_.addEventListener(e.model._state.StateEvent.QUERY_COMPLETE,(function(){return a.onDataQueryComplete()})),a.model_.state_.addEventListener(e.model._state.StateEvent.REPORT_COMPLETE,(function(){return a.onReportComplete()})),a.model_.state_.addEventListener(e.model._state.StateEvent.LOCALIZATION_LOADED,(function(){return a.onLocalizationLoaded()})),a.model_.addEventListener(e.PivotEvent.EXPORT,(function(e){return a.onExport(e)})),a.model_.addEventListener(e.PivotEvent.PRINT,(function(){return a.onPrint()})),a.model_.addEventListener(i.ViewEvent.CALCULATED_VIEW_OPEN,(function(e){return a.onOpenCalculatedView(e)})),a.model_.addEventListener(i.ViewEvent.CONTEXT_MENU_OPEN,(function(e){return a.onOpenContextMenu(e)})),a.addEventListener(i.ViewEvent.AFTER_GRID_DRAW,(function(){return a.onAfterGridDraw()})),s.fmdocument.addEventListener("fullscreenchange",(function(e){return a.onDocumentFullScreen(e)}),!1),s.fmdocument.addEventListener("mozfullscreenchange",(function(e){return a.onDocumentFullScreen(e)}),!1),s.fmdocument.addEventListener("webkitfullscreenchange",(function(e){return a.onDocumentFullScreen(e)}),!1),s.fmdocument.addEventListener("MSFullscreenChange",(function(e){return a.onDocumentFullScreen(e)}),!1),a.parentContainer.addEventListener("fullscreenchange",(function(e){return a.onFullScreen(e)}),!1),a.parentContainer.addEventListener("mozfullscreenchange",(function(e){return a.onFullScreen(e)}),!1),a.parentContainer.addEventListener("webkitfullscreenchange",(function(e){return a.onFullScreen(e)}),!1),a.parentContainer.addEventListener("MSFullscreenChange",(function(e){return a.onFullScreen(e)}),!1),a}return a(o,n),Object.defineProperty(o.prototype,"toolbarHeight",{get:function(){if(this.toolbar){var e=r.UIElement.convert(document.getElementById("wdr-toolbar-wrapper"));return null==e?0:e.height}return 0},enumerable:!0,configurable:!0}),Object.defineProperty(o,"stageWidth",{get:function(){var e=o.stage.container.borderWidth;return o.stage.parentContainer.getWidth(s.isFullscreen())-e.left-e.right},enumerable:!0,configurable:!0}),Object.defineProperty(o,"stageHeight",{get:function(){var e=o.stage.container.borderWidth;return o.stage.parentContainer.getHeight(s.isFullscreen())-e.top-e.bottom},enumerable:!0,configurable:!0}),Object.defineProperty(o,"gridWidth",{get:function(){return o.stageWidth},enumerable:!0,configurable:!0}),Object.defineProperty(o,"gridHeight",{get:function(){return o.stage.pivotHeight()},enumerable:!0,configurable:!0}),o.prototype.pivotHeight=function(){return o.stageHeight-o.stage.toolbarHeight},o.prototype.draw=function(e){var t=this;if(void 0===e&&(e=!1),this.clearDelays(),this.drawn||this.isUIReady){var i=this.container.requestAnimationFrame((function(i){t.clearDelays(),t._draw(e)}));this.delayedDraws.push(i)}else 1e3>this.notReadyCount++?this.notReadyTimeout=s.fmSetTimeout((function(){t.draw(e)}),10):this.parentContainer.visible&&(console.error("WebDataRocks:\nPivot cannot be drawn."),console.error("document.visibilityState:",document.visibilityState),"hidden"!=document.visibilityState&&alert("WebDataRocks:\nPivot cannot be drawn."))},o.prototype.clearDelays=function(){for(;0<this.delayedDraws.length;)this.container.cancelAnimationFrame(this.delayedDraws.pop());this.delayedDraws=[],s.fmClearTimeout(this.notReadyTimeout),s.fmClearTimeout(this.renderCompleteTimeout)},o.prototype.updateContainerSize=function(){if(!this.parentContainer)return!1;var e=s.isFullscreen(),t=this.parentContainer.getWidth();e&&(t=window.screen.width);var i=this.parentContainer.getHeight();return e&&(i=window.screen.height),i-=this.toolbarHeight,this.lastWidth===t&&this.lastHeight===i||(this.container.css("width",t+"px"),this.container.css("height",i+"px")),this.lastWidth!==t||this.lastHeight!==i},o.prototype.onWindowResize=function(e){this.toolbar&&null!=this.toolbar.applyToolbarLayoutClasses&&this.toolbar.applyToolbarLayoutClasses(),this.draw(!0)},o.prototype.onLoadingReportFile=function(){this.model_.state_.reportType==e.model._state.ReportType.INIT&&this.drawEmptyView()},o.prototype.onEmptySlice=function(){this.draw()},o.prototype.onLoadingData=function(){this.model_.state_.reportType!=e.model._state.ReportType.UPDATE_DATA&&this.model_.state_.reportType!=e.model._state.ReportType.CONNECT_TO&&this.drawEmptyView()},o.prototype.onBeforeDataQuery=function(){},o.prototype.onDataQueryComplete=function(){this.model_.state_.reportType!=e.model._state.ReportType.INIT&&this.model_.state_.reportType!=e.model._state.ReportType.LOAD&&this.draw()},o.prototype.onLocalizationLoaded=function(){null!=this.toolbar&&this.toolbar.updateLabels(e.model._labels.LabelsManager.getInstance().getCurrentLocalization().toolbar)},o.prototype.onReportComplete=function(){this.model_.state_.reportType==e.model._state.ReportType.CLEAR?this.drawEmptyView():this.parentContainer&&this.draw()},o.prototype.onDocumentFullScreen=function(e){this.handleFullScreen()},o.prototype.onFullScreen=function(e){e.stopPropagation(),this.handleFullScreen()},o.prototype.handleFullScreen=function(){var t=this,i=s.isFullscreen();null!=e.model.JavaScriptHandlers.jsFullScreenHandler&&e.model.JavaScriptHandlers.jsFullScreenHandler.call(null,i),i=this.container.requestAnimationFrame((function(){t.updateContainerSize()&&t.draw(!0)})),this.delayedDraws.push(i)},o.prototype.setControls=function(){var e=this;this.toolbar&&(this.container.height-=this.toolbarHeight),this.gridView=new i.grid.GridView,this.gridView.addEventListener(i.ViewEvent.FILTER_OPEN,(function(t){return e.onFilterOpenGrid(t)})),this.gridView.addEventListener(i.ViewEvent.DRILL_THROUGH_OPEN,(function(t){return e.onDrillThroughOpen(t)})),this.addChild(this.gridView),this.fieldsView=new i.config.FieldsView,this.fieldsView.addEventListener(t._Event.OPENED,(function(t){return e.onWindowOpenClose(t)})),this.fieldsView.addEventListener(t._Event.CLOSED,(function(t){return e.onWindowOpenClose(t)})),this.fieldsView.addEventListener(i.config.FieldsView.EVENT_OPEN,(function(t){return e.onFieldsViewOpen(t)})),this.fieldsView.addEventListener(i.config.FieldsView.EVENT_APPLY_SLICE,(function(t){return e.onFieldsViewApplySlice(t)})),this.addChild(this.fieldsView);var n=new r.UILabel;n.html('<a href="https://webdatarocks.com/?r=wdr" target="_blank">WebDataRocks.com</a>'),n.addClass("wdr-credits"),this.addChild(n),s.fmdocument.addEventListener("keydown",(function(t){return e.onKeyDown(t)})),this.container.attr("tabindex",0),this.container.addEventListener("focusin",(function(t){e.isFocused=!0})),this.container.addEventListener("focusout",(function(t){e.isFocused=!1})),this._resizeListener=new s.ResizeListener(this.parentContainer.parent),this._resizeListener.addEventListener(t._Event.RESIZE,(function(t){return e.onWindowResize(t)})),this.isUIReady=!0},o.prototype._draw=function(t){void 0===t&&(t=!1),null!=this.model_&&(this.drawn=!0,this.updateContainerSize(),null!=this.filterView&&this.filterView.draw(),s.nullOrUndefined(this.model_.state_.connectionInfo_)||this.model_.state_.connectionInfo_.isEmpty||!e.model._options.OptionsManager.configuratorButton?this.fieldsView.hide():this.fieldsView.show(),t||e.model._options.OptionsManager.configuratorActive||i.calculated.CalculatedView.addingMeasureFlag||(e.model._options.OptionsManager.configuratorOpened=!1),null!=this.model_.cube_.slice_&&this.model_.cube_.slice_.isEmpty&&(e.model._options.OptionsManager.configuratorOpened=!0),e.model._options.OptionsManager.configuratorOpened&&null!=this.model_.state_.connectionInfo_&&!this.model_.state_.connectionInfo_.isEmpty?this.fieldsView.open(this.model_.cube_.structure_,this.model_.cube_.slice_,this.model_.state_.connectionInfo_.dataSourceType):this.fieldsView.close(),this.drawGrid(t),null!=this.drillThroughView&&this.drillThroughView.isVisible()&&(e.model._options.OptionsManager.flatView?this.drillThroughView.close():this.drillThroughView.redraw()),this.lastWidth=this.getWidth(),this.lastHeight=this.getHeight())},o.prototype.drawEmptyView=function(){this.drawGrid(!1,!0),s.nullOrUndefined(this.fieldsView)||this.fieldsView.close()},o.prototype.drawGrid=function(t,i){void 0===t&&(t=!1),void 0===i&&(i=!1),null!=this.gridView&&(t||null==this.filterView||this.filterView.close(),this.gridView.dataProvider=i?null:this.model_.dataProvider_=e.data_.dataprovider_.DataProviderFactory.getDataProvider(),this.gridView.container.css("top","").css("left","").css("right","").css("bottom",""),this.gridView.container.css("position","absolute"),this.gridView.show(),this.gridView.container.css("height",o.gridHeight+"px"),this.gridView.container.css("width",o.stageWidth+"px"),t||this.model_.cube_.connectionInfo_&&this.model_.cube_.connectionInfo_.isUpdateData||this.gridView.clearSizes(),this.gridView.draw(),e.model._options.OptionsManager.flatView&&this.fieldsView.isOpen&&this.fieldsView.open(this.model_.cube_.structure_,this.model_.cube_.slice_,this.model_.state_.connectionInfo_.dataSourceType))},o.prototype.onDrillThroughOpen=function(e){null==this.drillThroughView&&this.addDrillThroughView(),this.drillThroughView.addEventListener(i.grid.GridEvent.DRILLTHROUGH_CLOSED,this.drillthroughClosedHandler);var t=this.model_.cube_.structure_.findMeasure(e.data.measure);this.drillThroughView.openView(this.model_.dataProvider_,this.model_.cube_.slice_,e.data.columnTuple,e.data.rowTuple,t)},o.prototype.onDrillThroughClosed=function(){this.drillThroughView.removeEventListener(i.grid.GridEvent.DRILLTHROUGH_CLOSED,this.drillthroughClosedHandler),this.model_.cube_.refresh()},o.prototype.openFieldsList=function(){null!=this.model_.state_.connectionInfo_&&this.fieldsView.open(this.model_.cube_.structure_,this.model_.cube_.slice_,this.model_.state_.connectionInfo_.dataSourceType)},o.prototype.onFieldsViewApplySlice=function(t){e.Pivot.instance.runQuery(t.data)},o.prototype.onFilterOpenGrid=function(e){null==this.filterView&&this.addFilterView(),this.onFilterOpen(e)},o.prototype.onFilterOpen=function(t){var i={hierarchy:e.data_._structure.GenericHierarchy.toObject(t.hierarchy)};e.model.JavaScriptHandlers.getInstance().dispatch(new e.model.APIEvent(e.model.JavaScriptHandlers.FILTER_OPEN,i)),this.openFilter(t.hierarchy)},o.prototype.openFilter=function(e){null==this.filterView&&this.addFilterView(),this.filterView.openView(e)},o.prototype.closeFieldsList=function(){this.fieldsView.close()},o.prototype.onFieldsViewOpen=function(e){this.openFieldsList()},o.prototype.onWindowOpenClose=function(e){},o.prototype.onKeyDown=function(e){this.isFocused&&(73===e.keyCode&&e.ctrlKey&&e.altKey&&this.showLicenseInfo(),27===e.keyCode&&(null!=this.filterView&&this.filterView.close(),null!=this.drillThroughView&&this.drillThroughView.close(),null!=this.calculatedView&&this.calculatedView.isVisible()?this.calculatedView.close():this.fieldsView.close()))},o.prototype.onExport=function(e){this.drillThroughView&&this.drillThroughView.isVisible()?this.drillThroughView.exportTo(e.exportType,e.exportOptions,e.callbackHandler):this.gridView.exportTo(e.exportType,e.exportOptions,e.callbackHandler)},o.prototype.onPrint=function(){this.gridView.print()},o.prototype.showLicenseInfo=function(){var t=new Date(parseFloat(e.Pivot.BUILD_DATE)/61);t=(t=e.Pivot.BUILD_VERSION+" (build "+s.StringUtils.toDateTime(t.getTime())+") <br/><br/>")+e.model.license.LicenseLabels.getLabel(e.model.license.LicenseLabels.info),e.uialert(t,e.model.license.LicenseLabels.getLabel(e.model.license.LicenseLabels.componentInfo),e.AlertType.INFO)},o.prototype.getCell=function(e,t){return this.gridView.getCell(e,t)},o.prototype.getSelectedCell=function(){return this.gridView.getSelectedCell()},o.prototype.setSelectedCell=function(e,t){this.gridView.setSelectedCell(e,t)},o.prototype.removeSelection=function(){this.gridView.removeSelection()},o.prototype.onOpenCalculatedView=function(e){null==this.calculatedView&&this.addCalculatedView(),this.calculatedView.openView(e.data?e.data.measureName:"")},o.prototype.onOpenContextMenu=function(e){null==this.contextMenu&&this.addContextMenu(),this.contextMenu.showWith(this.container,e.data.menuItems,e.data.coords)},o.prototype.onAfterGridDraw=function(){var e=this;0==this.delayedDraws.length&&(this.renderCompleteTimeout=s.fmSetTimeout((function(){e.dispatchWith(i.ViewEvent.RENDER_COMPLETE)}),1))},o.prototype.addCalculatedView=function(){this.calculatedView=new i.calculated.CalculatedView,this.addChild(this.calculatedView)},o.prototype.addDrillThroughView=function(){this.drillThroughView=new i.grid.DrillThroughView,this.addChild(this.drillThroughView)},o.prototype.addFilterView=function(){var e=this;this.filterView=new i.filter.FilterView,this.filterView.addEventListener(t._Event.OPENED,(function(t){return e.onWindowOpenClose(t)})),this.filterView.addEventListener(t._Event.CLOSED,(function(t){return e.onWindowOpenClose(t)})),this.addChild(this.filterView)},o.prototype.getToolbar=function(){return this.toolbar},o.prototype.addContextMenu=function(){this.contextMenu=new i.ContextMenuView,this.contextMenu.hide(),this.addChild(this.contextMenu)},o.prototype.dispose=function(){this.model_=null,this.gridView.dispose(),this.container.dispose(),this.parentContainer.dispose(),i.AlertView.dispose(),i.filter.FilterModel.dispose(),i.PreloaderView.dispose(),r.dragndrop.DragManager.dispose(),o.stage=null,this._resizeListener&&(this._resizeListener.dispose(),this._resizeListener=null)},o}(r.containers.UIContainer),i.PivotView=n}(n||(n={})),function(e){!function(e){var t=function(){function t(){this._timer=0,this._show=!1,this._details=this._message="",this._transparent=!1}return t.prototype.show=function(e,i,r,n,o){var a=this;void 0===n&&(n=!0),void 0===o&&(o=!1),e?(o&&this.showImmediately(e,i,r,n),0==this._show?(this._show=e,this._message=i,this._details=r,this._transparent=n,this._timer=s.fmSetTimeout((function(){return a.timerHandler()}),t.DELAY)):0==this._timer?this.showImmediately(e,i,r,n):(this._show=e,this._message=i,this._details=r,this._transparent=n)):(o&&this.showImmediately(e,i,r,n),1==this._show&&(this._show=e,this._timer=s.fmSetTimeout((function(){return a.timerHandler()}),t.DELAY)))},t.prototype.showImmediately=function(e,t,i,r){this.resetTimer(),this.preloaderFunction(e,t,i,r)},t.prototype.timerHandler=function(){this.resetTimer(),this.preloaderFunction(this._show,this._message,this._details,this._transparent)},t.prototype.resetTimer=function(){s.fmClearTimeout(this._timer),this._timer=0},t.prototype.preloaderFunction=function(t,i,r,n){e.PreloaderView.getInstance()&&e.PreloaderView.getInstance().openView(t,i,r,n)},t.getInstance=function(){return null==t._instance&&(t._instance=new t),t._instance},t.dispose=function(){t._instance=null},t.DELAY=250,t}();e.Preloader=t}(e._view||(e._view={}))}(n||(n={})),function(e){!function(e){var t=function(t){function i(){var r=this;if(null!=i._instance)throw Error("Singleton");return(r=t.call(this,e.PivotView.stage.container)||this).setId("wdr-preloader-view"),r.setControls(),r}return a(i,t),i.prototype.openView=function(e,t,i,r){void 0===e&&(e=!0),void 0===t&&(t=""),void 0===i&&(i=""),void 0===r&&(r=!0),this._message=t,this._details=i,this._transparent=r,e?this.open():this.close()},i.prototype.open=function(){t.prototype.open.call(this),this.draw()},i.prototype.setControls=function(){this.overlay.addClass("wdr-overlay-preloader"),this.overlay.removeEventListener("click",this._overlayClickHandler),this._imgSpinner=new r.UIComponentBase("div"),this._imgSpinner.setId("wdr-spinner"),this.addChild(this._imgSpinner),this._txtMessage=new r.UILabel,this._txtMessage.setId("wdr-message-label"),this.addChild(this._txtMessage),this._txtDetails=new r.UILabel,this._txtDetails.setId("wdr-details-label"),this.addChild(this._txtDetails),this.hide(),e.PivotView.stage.addChild(this)},i.prototype.draw=function(){this.overlay.setOpaque(!this._transparent),this.setMessage(this._message),this.setDetails(this._details),this.validate()},i.prototype.setMessage=function(e){this._txtMessage.setLabel(e)},i.prototype.setDetails=function(e){this._txtDetails.setLabel(e)},i.prototype.close=function(){t.prototype.close.call(this),this.clear()},i.prototype.clear=function(){this.setMessage(""),this.setMessage("")},i.getInstance=function(){return null==e.PivotView.stage?null:(null==i._instance&&(i._instance=new i),i._instance)},i.dispose=function(){i._instance=null},i}(r.containers.UIPopup);e.PreloaderView=t}(e._view||(e._view={}))}(n||(n={})),function(e){!function(e){var i=function(i){function n(){var e=i.call(this)||this;return e.setId("wdr-context-menu"),e.list=new r.lists.UIList,e.list.setItemRendererFactory(e.itemRendererFactory),e.list.setLabelField("caption"),e.list.addEventListener(t._Event.CHANGE,(function(t){return e.onListChange(t)})),e.addChild(e.list),e.container.disableSelection(),e}return a(n,i),n.prototype.showWith=function(t,i,r){var n=this;0!=i.length&&(this.setData(i),this.show(),t=t.getOffset(),r.top-=t.top+5,r.left-=t.left+5,this.container.offset(r),this.container.addEventListener("mouseleave",(function(){return n.hide()})),s.browserVersion().isMobile?e.PivotView.stage.container.addEventListener("touchstart",(function(e){return n.onStageMouseDown(e)})):e.PivotView.stage.container.addEventListener("mousedown",(function(e){return n.onStageMouseDown(e)})))},n.prototype.onStageMouseDown=function(e){null==r.UIElement.convert(e.target).closest("#wdr-context-menu")&&this.hide()},n.prototype.setData=function(e){for(var t=[],i=0;i<e.length;i++)t.push(e[i]);this.list.setDataProvider(t)},n.prototype.onListChange=function(e){null!=e.data.selectedItem.handler&&e.data.selectedItem.handler(e.data.selectedItem.data),this.hide()},n.prototype.itemRendererFactory=function(e,t){var i=new r.renderers.SelectItemRenderer;return i.setData(e),i.setIndex(t),i},n}(r.containers.UIBorderContainer);e.ContextMenuView=i}(e._view||(e._view={}))}(n||(n={})),function(e){var t,i,n;t=e._view||(e._view={}),i=t.grid||(t.grid={}),n=function(n){function o(){var t=n.call(this)||this;return t.START_TABLE_ROW=0,t.START_HEADERS_ROW=0,t.START_HEADERS_COLUMN=0,t.FIRST_DATA_ROW=0,t.FIRST_DATA_COLUMN=0,t._model=e.model.PivotModel.getInstance(),t.conditions=[],t.setId("wdr-grid-view"),s.browserVersion().isMobile?new r._utils.LongPressListener(t.container).listen((function(e,i){return t.onLongPress(e,i)})):s.fmdocument.addEventListener("contextmenu",(function(e){return t.onContextMenu(e)})),t}return a(o,n),o.prototype.dispose=function(){this._model=this.dataProvider=null,this.gridLayout&&this.gridLayout.dispose(),this._gridLayout=null},o.prototype.createCompactLayout=function(){var e=this,t=new i.sheet.CompactGridLayout;return t.id="wdr-grid-layout",t.getDataFunction=function(t,i){return e.getData(t,i)},t.addEventListener(i.GridEvent.MOUSE_CLICK,(function(t){return e.onGridClick(t)})),t.addEventListener(i.GridEvent.MOUSE_SINGLE_DOUBLE_CLICK,(function(t){return e.onGridSingleDoubleClick(t)})),t.addEventListener(i.GridEvent.FILTER_CLICK,(function(t){return e.onFilterClick(t)})),t.addEventListener(i.GridEvent.RESIZE_COLUMN,(function(t){return e.onResizeColumn(t)})),t.addEventListener(i.GridEvent.RESIZE_ROW,(function(t){return e.onResizeRow(t)})),this.container.append(t),t},o.prototype.createClassicLayout=function(){var e=this,t=new i.sheet.classic.ClassicGridLayout;return t.id="wdr-grid-layout",t.getDataFunction=function(t,i){return e.getData(t,i)},t.addEventListener(i.GridEvent.MOUSE_CLICK,(function(t){return e.onGridClick(t)})),t.addEventListener(i.GridEvent.MOUSE_SINGLE_DOUBLE_CLICK,(function(t){return e.onGridSingleDoubleClick(t)})),t.addEventListener(i.GridEvent.FILTER_CLICK,(function(t){return e.onFilterClick(t)})),t.addEventListener(i.GridEvent.RESIZE_COLUMN,(function(t){return e.onResizeColumn(t)})),t.addEventListener(i.GridEvent.RESIZE_ROW,(function(t){return e.onResizeRow(t)})),this.container.append(t),t},o.prototype.createFlatLayout=function(){var e=this,t=new i.sheet.flat.FlatGridLayout;return t.id="wdr-grid-layout",t.getDataFunction=function(t,i){return e.getData(t,i)},t.addEventListener(i.GridEvent.MOUSE_CLICK,(function(t){return e.onGridClick(t)})),t.addEventListener(i.GridEvent.MOUSE_SINGLE_DOUBLE_CLICK,(function(t){return e.onGridSingleDoubleClick(t)})),t.addEventListener(i.GridEvent.FILTER_CLICK,(function(t){return e.onFilterClick(t)})),t.addEventListener(i.GridEvent.RESIZE_COLUMN,(function(t){return e.onResizeColumn(t)})),t.addEventListener(i.GridEvent.RESIZE_ROW,(function(t){return e.onResizeRow(t)})),this.container.append(t),t},o.prototype.getCurrentLayout=function(){return e.model._options.OptionsManager.classicView?this.gridLayout&&this.gridLayout.type==i.sheet.classic.ClassicGridLayout.TYPE?this.gridLayout:(null!=this.gridLayout&&this.gridLayout.removeFromParent(!0),this.createClassicLayout()):e.model._options.OptionsManager.flatView?this.gridLayout&&this.gridLayout.type==i.sheet.flat.FlatGridLayout.TYPE?this.gridLayout:(null!=this.gridLayout&&this.gridLayout.removeFromParent(!0),this.createFlatLayout()):this.gridLayout&&this.gridLayout.type==i.sheet.CompactGridLayout.TYPE?this.gridLayout:(null!=this.gridLayout&&this.gridLayout.removeFromParent(!0),this.createCompactLayout())},o.prototype.draw=function(){if(this._gridLayout=this.getCurrentLayout(),null!=this.gridLayout){if(this.gridLayout.smoothTimeout=this._model.state_.updateActive?100:1e3,this.dataProvider&&this.dataProvider.dataLoaded&&!this.dataProvider.isEmpty){this.gridLayout.clearData(),this.START_HEADERS_ROW=this.START_HEADERS_COLUMN=this.START_TABLE_ROW=0;var r,n,o,s,a=this.dataProvider.columnMaxDepth,l=e.model._options.OptionsManager.classicView?0<this.dataProvider.rowsOnly.length?1:0:this.dataProvider.rowCount;l>=a+1?(n=(r=0)+l,o=r+(l-a)-1):(o=0,r=0<this.dataProvider.columnCount?o+(a-l)+1:o,0==this.dataProvider.columnsOnly.length&&0==this.dataProvider.rowsOnly.length&&(r+=1),n=r+l),s=o,this.START_TABLE_ROW=Math.min(r,s),this.START_HEADERS_ROW=s,this.START_HEADERS_COLUMN=0,this.FIRST_DATA_ROW=n,this.FIRST_DATA_COLUMN=this.isFlatTable?0:e.model._options.OptionsManager.classicView?this.dataProvider.rowAxis.hasMeasures&&this.dataProvider.multiMeasures?this.dataProvider.rowLevels.length+1:this.dataProvider.rowLevels.length:0==this.dataProvider.rows.length?0:1,e.model._options.OptionsManager.showHierarchyCaptions||(this.START_HEADERS_ROW=1==l&&0==this.dataProvider.columnCount?0:-1,this.FIRST_DATA_ROW=a),this.isFlatTable&&"on"==e.model._options.OptionsManager.showGrandTotals&&"top"==e.model._options.OptionsManager.grandTotalsPosition&&this.FIRST_DATA_ROW++,this.gridLayout.setDataSize(this.dataProvider.extendedDataHeight+(this.isFlatTable&&"on"==e.model._options.OptionsManager.showGrandTotals&&"bottom"==e.model._options.OptionsManager.grandTotalsPosition?1:0),this.dataProvider.extendedDataWidth),this.gridLayout.freezeColumns(this.FIRST_DATA_COLUMN),this.gridLayout.freezeRows(this.FIRST_DATA_ROW),this.gridLayout instanceof i.sheet.CompactGridLayout&&(this.gridLayout.colsFilter.rowIndex=this.FIRST_DATA_ROW-this.dataProvider.columnMaxDepth-1,this.gridLayout.colsFilter.setHierarchies(this.dataProvider.columnsOnly),this.gridLayout.rowsFilter.setHierarchies(this.dataProvider.rowsOnly),this.gridLayout.pageFilter.setHierarchies(this.dataProvider.pages)),this.gridLayout instanceof i.sheet.classic.ClassicGridLayout&&(this.gridLayout.colsFilter.rowIndex=this.FIRST_DATA_ROW-this.dataProvider.columnMaxDepth-1,this.gridLayout.colsFilter.setHierarchies(this.dataProvider.columnsOnly),this.gridLayout.rowsFilter.setHierarchies(this.dataProvider.rowsOnly),this.gridLayout.pageFilter.setHierarchies(this.dataProvider.pages)),(1<this.dataProvider.columns.length||!this.dataProvider.columnAxis.hasMeasures)&&e.model._options.OptionsManager.showHierarchyCaptions&&this.addFilterCell(o,this.FIRST_DATA_COLUMN,e.data_.consts.AxisName.COLUMNS_AXIS),(1<this.dataProvider.rows.length||!this.dataProvider.rowAxis.hasMeasures)&&e.model._options.OptionsManager.showHierarchyCaptions&&(e.model._options.OptionsManager.classicView?this._addFilterCell(r,0):this.addFilterCell(r,0,e.data_.consts.AxisName.ROWS_AXIS)),this.resizeColumnsByIdx(),this.resizeHeaderColumns(),this.resizeColumns(),this.resizeRowsByIdx(),this.resizeHeaderRows(),this.resizeRows()}else this.gridLayout.clearAll();this.conditions=e.model.condition.ConditionManager.conditions.toArray(),this.gridLayout.resize(t.PivotView.gridWidth,t.PivotView.gridHeight),this.gridLayout.draw()}},o.prototype.clearSizes=function(){null!=this.gridLayout&&(this.gridLayout.clearColSizes(0),this.gridLayout.clearRowSizes(0))},o.prototype.getData=function(t,i,r){if(void 0===r&&(r=!1),null==this.dataProvider||!this.dataProvider.dataLoaded||t<this.START_HEADERS_ROW||i<this.START_HEADERS_COLUMN)return null;var n=t-this.FIRST_DATA_ROW,o=i-this.FIRST_DATA_COLUMN;if((n>this.dataProvider.extendedDataHeight-1||o>this.dataProvider.extendedDataWidth-1)&&!(this.isFlatTable&&"on"==e.model._options.OptionsManager.showGrandTotals&&"bottom"==e.model._options.OptionsManager.grandTotalsPosition&&n==this.dataProvider.extendedDataHeight&&o<=this.dataProvider.extendedDataWidth-1))return null;var s=this.dataProvider.getRowTuple(n,!0),a=this.dataProvider.getColumnTuple(o,!0);if(null==s&&null==a)return null;var l=this.dataProvider.getMeasure(n,o);return this.isFlatTable&&"on"==e.model._options.OptionsManager.showGrandTotals&&"top"==e.model._options.OptionsManager.grandTotalsPosition&&(e.model._options.OptionsManager.showHierarchyCaptions&&1==t||!e.model._options.OptionsManager.showHierarchyCaptions&&0==t)||this.isFlatTable&&"on"==e.model._options.OptionsManager.showGrandTotals&&"bottom"==e.model._options.OptionsManager.grandTotalsPosition&&(e.model._options.OptionsManager.showHierarchyCaptions&&t==this.dataProvider.extendedDataHeight+1||!e.model._options.OptionsManager.showHierarchyCaptions&&t==this.dataProvider.extendedDataHeight)?this.getFlatGrandTotal(s,a,l):null==s?(r=1==(e.model._options.OptionsManager.classicView?1:this.dataProvider.rowsOnly.length)&&0==this.dataProvider.columnCount?t-this.START_HEADERS_ROW:t-this.START_HEADERS_ROW-1,0==this.dataProvider.rowsOnly.length&&0==this.dataProvider.columnsOnly.length&&(r=t-this.START_HEADERS_ROW),t=this.dataProvider.getColumnDepth(o),this.getColumnCell(a,l,t,r,i)):(o=this.dataProvider.getRowDepth(n),n=this.dataProvider.getRowType(n),null==a?e.model._options.OptionsManager.classicView?this._getRowCell(s,l,o,i,n):this.getRowCell(s,l,o):this.getDataCell(s,a,l,t,i,r,o,n))},o.prototype.getDataCell=function(t,r,n,o,a,l,c,u){if(void 0===l&&(l=!1),void 0===c&&(c=NaN),void 0===u&&(u=-1),null==n)return null;var h=n.getFormat().clone();n.aggregation!=e.data_.consts.AggregationName.PERCENT&&n.aggregation!=e.data_.consts.AggregationName.PERCENT_COLUMN&&n.aggregation!=e.data_.consts.AggregationName.PERCENT_ROW&&n.aggregation!=e.data_.consts.AggregationName.PERCENT_DIFFERENCE||(h.currencySymbol="%",h.currencySymbolAlign="right");var d=new i.vo.GridCell;if(d.isValue=!0,d.columnTuple=r,d.measure=n,d.hierarchy=this._model.cube_.structure_.measureToHierarchy(n.uniqueName),d.rowTuple=t,e.model._options.OptionsManager.classicView?0==t.length?d.level=0:-1<(c=this.getLevelIdxByTuple(t))&&(d.level=c):e.model._options.OptionsManager.flatView||(d.level=c),c=this.dataProvider.getValue(t,r,n),d.value=c,this.isFlatTable){if(h=n.getFormat(!0).clone(),n.type==e.data_.types.MeasureType.COUNT){var A=this.dataProvider.getColumnHierarchy(r).members.getItemAt(c);null!=A&&(d.member=A,d.label=A.caption)}else n.type==e.data_.types.MeasureType.NUMBER?"string"==typeof c?d.label=c:(d.label=s.NumberFormatter.format(c,h),d.numeric=!0):n.type==e.data_.types.MeasureType.DATE?d.label=s.StringUtils.toDate(c,e.model._options.OptionsManager.datePattern):n.type==e.data_.types.MeasureType.TIME?isNaN(c)||(d.label=s.StringUtils.toTime(c)):n.type!=e.data_.types.MeasureType.DATETIME||isNaN(c)||(d.label=s.StringUtils.toDateTime(c,e.model._options.OptionsManager.dateTimePattern));d.recordId=this.dataProvider.getRecordId(t,r,n)}else n.type==e.data_.types.MeasureType.NUMBER||n.type==e.data_.types.MeasureType.COUNT?"string"==typeof c?d.label=c:(d.label=s.NumberFormatter.format(c,h),d.numeric=!0):n.type==e.data_.types.MeasureType.DATE?d.label=e.data_.consts.AggregationName.validForDateTimeFormatting(n.aggregation)?s.StringUtils.toDate(d.value,e.model._options.OptionsManager.datePattern):s.NumberFormatter.format(c,h):n.type==e.data_.types.MeasureType.TIME?isNaN(c)||(d.label=e.data_.consts.AggregationName.validForDateTimeFormatting(n.aggregation)?s.StringUtils.toTime(c):s.NumberFormatter.format(c,h)):n.type==e.data_.types.MeasureType.DATETIME?isNaN(d.value)||(d.label=e.data_.consts.AggregationName.validForDateTimeFormatting(n.aggregation)?s.StringUtils.toDateTime(c,e.model._options.OptionsManager.dateTimePattern):s.NumberFormatter.format(c,h)):d.label=c;if(l)return d;if(l=!1,this.dataProvider.rowCount>t.length||this.dataProvider.columnCount>r.length){if(l=!0,d.isTotalRow=this.dataProvider.rowCount>t.length,d.isTotalColumn=this.dataProvider.columnCount>r.length,"on"!=e.model._options.OptionsManager.showTotals){if(A=this.dataProvider.measureDepth,0!=t.length&&(this.dataProvider.isRowExpanded(t)||this.dataProvider.isRowExpanded(t,n))&&("off"==e.model._options.OptionsManager.showTotals||"columns"==e.model._options.OptionsManager.showTotals)||0!=r.length&&(this.dataProvider.isColumnExpanded(r)||this.dataProvider.isColumnExpanded(r,n))&&("off"==e.model._options.OptionsManager.showTotals||"rows"==e.model._options.OptionsManager.showTotals))return null;if(0==A&&1<this.dataProvider.measures.length)if(!this.dataProvider.rowAxis.hasMeasures||"off"!=e.model._options.OptionsManager.showTotals&&"columns"!=e.model._options.OptionsManager.showTotals){if(this.dataProvider.columnAxis.hasMeasures&&("off"==e.model._options.OptionsManager.showTotals||"rows"==e.model._options.OptionsManager.showTotals)&&a<("on"==e.model._options.OptionsManager.showGrandTotals||"rows"==e.model._options.OptionsManager.showGrandTotals?this.FIRST_DATA_COLUMN+this.dataProvider.extendedDataWidth-this.dataProvider.measures.length:this.FIRST_DATA_COLUMN+this.dataProvider.extendedDataWidth)&&this.dataProvider.isColumnExpanded(r,n))return null}else if(o<("on"==e.model._options.OptionsManager.showGrandTotals||"columns"==e.model._options.OptionsManager.showGrandTotals?this.FIRST_DATA_ROW+this.dataProvider.extendedDataHeight-this.dataProvider.measures.length:this.FIRST_DATA_ROW+this.dataProvider.extendedDataHeight)&&this.dataProvider.isRowExpanded(t,n))return null}d.isGrandTotalRow=0==t.length,d.isGrandTotalColumn=0==r.length,d.isClassicTotalRow=d.isTotalRow&&2==u&&!d.isGrandTotalRow}if(""!=h.textAlign&&d.customize({"text-align":h.textAlign}),0<this.conditions.length&&d.measure)for(u=0;u<this.conditions.length;u++)if(!((h=this.conditions[u]).row!=o&&-1!=h.row||h.column!=a&&-1!=h.column||h.measure!=n.uniqueName&&""!=h.measure&&h.measure!=n.uniqueName||h.isTotal!==l&&void 0!==h.isTotal||""!=h.hierarchy&&!this.checkHierarchyCondition(t,r,h.hierarchy,h.member)))if(A=h.params.slice(0),h.isUpdate){if(this._model.state_.updateActive){var p=this.dataProvider.getUpdatedValue(t,r,n);p&&(-1<h.formula.toLowerCase().indexOf(e.data_.consts.FunctionName.UPDATE_DIFFERENCE)?c=p.difference:-1<h.formula.toLowerCase().indexOf(e.data_.consts.FunctionName.UPDATE_PERCENT)&&(c=100*p.percent),null!=(A=this.dataProvider.calculate(t,r,A,c))&&d.customizeWithClass(A))}}else 1!=(A=this.dataProvider.calculate(t,r,A,c))&&"truestyle"!=A||null==h.format?null!=A&&0!=A&&d.customizeWithClass(A):(d.customize(h.format.toCSSObject()),d.conditions.push(h.id)),d.showTooltip=!0;return d},o.prototype.getFlatGrandTotal=function(t,r,n){if(null==n)return null;var o=new i.vo.GridCell;if(o.isValue=!0,o.columnTuple=r,o.measure=n,o.hierarchy=this._model.cube_.structure_.measureToHierarchy(n.uniqueName),o.rowTuple=t,n.type==e.data_.types.MeasureType.NUMBER||n.type==e.data_.types.MeasureType.TIME||n.type==e.data_.types.MeasureType.DATETIME){var a=n.getFormat().clone();if((n.aggregation==e.data_.consts.AggregationName.PERCENT||n.aggregation==e.data_.consts.AggregationName.PERCENT_COLUMN||n.aggregation==e.data_.consts.AggregationName.PERCENT_ROW||n.aggregation==e.data_.consts.AggregationName.PERCENT_DIFFERENCE||n.calculated&&-1<n.formula.indexOf("percent"))&&(a.currencySymbol="%",a.currencySymbolAlign="right"),o.value=this.dataProvider.getValue(null,null,n),n.type==e.data_.types.MeasureType.NUMBER?(o.label=s.NumberFormatter.format(o.value,a),o.numeric=!0):n.type==e.data_.types.MeasureType.TIME?isNaN(o.value)||(o.label=e.data_.consts.AggregationName.validForDateTimeFormatting(n.aggregation)?s.StringUtils.toTime(o.value):s.NumberFormatter.format(o.value,a)):n.type!=e.data_.types.MeasureType.DATETIME||isNaN(o.value)||(o.label=e.data_.consts.AggregationName.validForDateTimeFormatting(n.aggregation)?s.StringUtils.toDateTime(o.value,e.model._options.OptionsManager.dateTimePattern):s.NumberFormatter.format(o.value,a)),o.isGrandTotalRow=!0,""!=a.textAlign&&o.customize({"text-align":a.textAlign}),0<this.conditions.length)for(a=0;a<this.conditions.length;a++){var l=this.conditions[a],c=l.params.slice(0);if(l.measure==n.uniqueName&&l.isUpdate&&this._model.state_.updateActive){var u,h=this.dataProvider.getUpdatedValue(t,r,n);h&&(-1<l.formula.toLowerCase().indexOf(e.data_.consts.FunctionName.UPDATE_DIFFERENCE)?u=h.difference:-1<l.formula.toLowerCase().indexOf(e.data_.consts.FunctionName.UPDATE_PERCENT)&&(u=100*h.percent),null!=(l=this.dataProvider.calculate(t,r,c,u))&&o.customizeWithClass(l))}}}return o},o.prototype.checkHierarchyCondition=function(e,t,i,r){var n=this.dataProvider.columns.indexOf(i);if(-1<n){if(n<t.length)return e=this.dataProvider.columns.getItem(i),t[n]&&e.members.getItemAt(t[n]).uniqueName==r}else if(-1<(t=this.dataProvider.rows.indexOf(i))&&t<e.length)return i=this.dataProvider.rows.getItem(i),e[t]&&i.members.getItemAt(e[t]).uniqueName==r;return!1},o.prototype.getColumnCell=function(e,t,i,r,n){return this.isFlatTable?this._getFlatTableColumnCell(e,t,i,r):this._getColumnCell(e,t,i,r,n)},o.prototype._getColumnCell=function(t,r,n,o,s){if(0==t.length)return this.dataProvider.rowAxis.hasMeasures&&o==this.dataProvider.columnMaxDepth-1?this.getGrandTotalCell(r,e.data_.consts.AxisName.COLUMNS_AXIS):(t=this.dataProvider.extendedDataWidth-this.dataProvider.measures.length+1,this.dataProvider.columnAxis.hasMeasures&&o==this.dataProvider.columnMaxDepth-1&&s>=t&&1==this.dataProvider.measures.length?this.getGrandTotalCell(r,e.data_.consts.AxisName.COLUMNS_AXIS):(t="on"==e.model._options.OptionsManager.showGrandTotals||"rows"==e.model._options.OptionsManager.showGrandTotals?this.FIRST_DATA_COLUMN+this.dataProvider.extendedDataWidth-this.dataProvider.measures.length:this.FIRST_DATA_COLUMN+this.dataProvider.extendedDataWidth,this.dataProvider.columnAxis.hasMeasures&&0==o&&s>=t&&1<this.dataProvider.columnMaxDepth?s==t?((s=this.getHeaderCell()).label=e.model._labels.Labels.GRID_TOTALS,s):this.getEmptyHeaderCell():this.dataProvider.columnAxis.hasMeasures&&0==o&&1<this.dataProvider.columnMaxDepth?this.getGrandTotalCell(r,e.data_.consts.AxisName.COLUMNS_AXIS):this.dataProvider.columnAxis.hasMeasures&&o==this.dataProvider.columnMaxDepth-1?s>=t||1==this.dataProvider.columnAxis.hierarchies.length?this.getGrandTotalCell(r,e.data_.consts.AxisName.COLUMNS_AXIS):this.getHeaderCell():this.dataProvider.columnAxis.hasMeasures&&0<o&&s<=t?this.getHeaderCell():0<=o?this.getEmptyHeaderCell():null));var a=this.dataProvider.columnAxis.hasMeasures&&(t.length>this.dataProvider.measuresPosition||0==this.dataProvider.measuresPosition)?t.length:t.length-1,l=this.dataProvider.columns.getItemAt(a);if(this.dataProvider.columnAxis.hasMeasures&&a>this.dataProvider.measuresPosition&&(1==this.dataProvider.measures.length?a--:n++),n>o)return 0<=o?this.getEmptyHeaderCell():null;(s=new i.vo.GridCell).isColumnHeader=!0,s.measure=this.dataProvider.columnAxis.hasMeasures&&(1<this.dataProvider.measures.length||e.model._options.OptionsManager.showExtraTotalLabels)?r:null;var c=!1,u=l.members.getItemAt(t[t.length-1]),h=this.dataProvider.measureDepth;if(this.dataProvider.columnAxis.hasMeasures&&1<this.dataProvider.measures.length&&o==h-1||this.dataProvider.columnAxis.hasMeasures&&e.model._options.OptionsManager.showExtraTotalLabels&&o==h-1&&1!=h||this.dataProvider.columnAxis.hasMeasures&&e.model._options.OptionsManager.showExtraTotalLabels&&o==h&&1==h&&2>this.dataProvider.measures.length)s.label=r.caption,s.isMeasureHeader=!0,u=null;else{if(this.dataProvider.columnAxis.hasMeasures&&0<this.dataProvider.measures.indexOf(r.uniqueName)&&o<h)return this.getEmptyHeaderCell();n<o?a==o?(c=t.length-1!=this.dataProvider.columnCount-1&&!u.isAll,s.label=u.caption):(s.label=this.dataProvider.columnMaxDepth-1==o&&e.model._options.OptionsManager.showExtraTotalLabels?null!=r?r.caption:e.model._labels.Labels.GRID_TOTAL:"",u=null):(c=t.length-1!=this.dataProvider.columnCount-1&&!u.isAll,s.label=u.caption,this.dataProvider.columnAxis.hasMeasures&&o<h&&(s.measure=r=null))}return o=null!=u&&this.dataProvider.isColumnDrilledDown(t,u,r),u&&(1!=u.children.length||u.children.getItemAt(0).caption!=e.model._labels.Labels.MEMBER_BLANK&&u.children.getItemAt(0).caption!=e.model._labels.Labels.INVALID_DATE)&&!u.isAll&&u.hierarchy_.isHierarchy&&!u.level.isLast&&(c||e.model._options.OptionsManager.showHierarchies?o?s.drilledDown=!0:s.drilledUp=!0:o?s.expanded=!0:s.collapsed=!0),c&&!o&&(this.dataProvider.isColumnExpanded(t,r)?s.expanded=!0:s.collapsed=!0),"on"!=e.model._options.OptionsManager.sorting&&"columns"!=e.model._options.OptionsManager.sorting||""==s.label||(s.sortable=!0,!this.dataProvider.columnSortTuple||this.dataProvider.columnSortTuple.toString()!=t.toString()||null!=r&&this.dataProvider.columnSortMeasure.uniqueName!=r.uniqueName||(this.dataProvider.columnSortType==e.data_.consts.SortType.DESC?s.sortedDesc=!0:this.dataProvider.columnSortType==e.data_.consts.SortType.ASC&&(s.sortedAsc=!0))),s.isTotalColumn=this.dataProvider.columnCount>t.length,s.tuple=t,s.url=void 0,s.hierarchy=l,s.member=u,s},o.prototype._getFlatTableColumnCell=function(t,r,n,o){return null==(o=this.dataProvider.getColumnHierarchy(t))?null==r?null:((n=new i.vo.GridCell).isColumnHeader=!0,n.label=r.caption,n):((n=new i.vo.GridCell).isColumnHeader=!0,n.isFilterHeader=!0,n.hasHierarchyName=o.filterEnabled,n.filtered=o.hasFilter(),n.label=o.caption,n.tuple=t,n.hierarchy=o,n.member=null,n.measure=r,n.draggable=!0,"on"!=e.model._options.OptionsManager.sorting&&"columns"!=e.model._options.OptionsManager.sorting||(n.sortable=!0,!this.dataProvider.columnSortTuple||this.dataProvider.columnSortTuple.toString()!=t.toString()||this.dataProvider.columnSortMeasure!=r&&null!=r||((t=this.dataProvider.columnSortType)==e.data_.consts.SortType.DESC?n.sortedDesc=!0:t==e.data_.consts.SortType.ASC&&(n.sortedAsc=!0))),n)},o.prototype.getHeaderCell=function(){var e=new i.vo.GridCell;return e.isColumnHeader=!0,e},o.prototype.getEmptyHeaderCell=function(){var e=this.getHeaderCell();return e.isEmpty=!0,e},o.prototype.getGrandTotalCell=function(t,r){var n=new i.vo.GridCell;return n.label=null==t?e.model._labels.Labels.GRID_GRAND_TOTAL:t.grandTotalCaption,n.isMeasureHeader=null!=t,r==e.data_.consts.AxisName.COLUMNS_AXIS?(n.isColumnHeader=!0,n.isTotalColumn=n.isGrandTotalColumn=!0,"on"!=e.model._options.OptionsManager.sorting&&"columns"!=e.model._options.OptionsManager.sorting||(n.sortable=!0,!this.dataProvider.columnSortTuple||""!=this.dataProvider.columnSortTuple.toString()||this.dataProvider.columnSortMeasure!=t&&null!=t||(this.dataProvider.columnSortType==e.data_.consts.SortType.DESC?n.sortedDesc=!0:this.dataProvider.columnSortType==e.data_.consts.SortType.ASC&&(n.sortedAsc=!0))),this.dataProvider.columnAxis.hasMeasures?n.measure=t:n.label=e.model._labels.Labels.GRID_GRAND_TOTAL):(n.isRowHeader=!0,n.isTotalRow=n.isGrandTotalRow=!0,"on"!=e.model._options.OptionsManager.sorting&&"rows"!=e.model._options.OptionsManager.sorting||(n.sortable=!0,!this.dataProvider.rowSortTuple||""!=this.dataProvider.rowSortTuple.toString()||this.dataProvider.rowSortMeasure!=t&&null!=t||(this.dataProvider.rowSortType==e.data_.consts.SortType.DESC?n.sortedDesc=!0:this.dataProvider.rowSortType==e.data_.consts.SortType.ASC&&(n.sortedAsc=!0))),this.dataProvider.rowAxis.hasMeasures?n.measure=t:n.label=e.model._labels.Labels.GRID_GRAND_TOTAL,n.level=0),n.tuple=[],n},o.prototype.getRowCell=function(t,r,n){if(0==t.length)return this.getGrandTotalCell(r,e.data_.consts.AxisName.ROWS_AXIS);var o=this.dataProvider.rowAxis.hasMeasures&&t.length>this.dataProvider.measuresPosition?t.length:t.length-1,s=t[t.length-1],a=this.dataProvider.rows.getItemAt(o),l=new i.vo.GridCell;l.isRowHeader=!0;var c=!1;return s=a.members.getItemAt(s),l.level=n,null!=r&&this.dataProvider.rowAxis.hasMeasures&&this.dataProvider.multiMeasures&&o<=this.dataProvider.measuresPosition?(l.label=r.caption,s=null):s&&(l.label=s.caption,c=t.length!=this.dataProvider.rowCount&&!s.isAll),n=null!=s&&this.dataProvider.isRowDrilledDown(t,s,r),s&&!s.isAll&&s.hierarchy_.isHierarchy&&!s.isLeaf&&(1!=s.children.length||s.children.getItemAt(0).caption!=e.model._labels.Labels.MEMBER_BLANK&&s.children.getItemAt(0).caption!=e.model._labels.Labels.INVALID_DATE)&&(e.model._options.OptionsManager.showHierarchies?n?l.drilledDown=!0:l.drilledUp=!0:n?l.expanded=!0:l.collapsed=!0),c&&!n&&(this.dataProvider.isRowExpanded(t,r)?l.expanded=!0:l.collapsed=!0),"on"!=e.model._options.OptionsManager.sorting&&"rows"!=e.model._options.OptionsManager.sorting||(l.sortable=!0,this.dataProvider.rowSortTuple&&this.dataProvider.rowSortTuple.toString()==t.toString()&&this.dataProvider.rowSortMeasure==r&&(this.dataProvider.rowSortType==e.data_.consts.SortType.DESC?l.sortedDesc=!0:this.dataProvider.rowSortType==e.data_.consts.SortType.ASC&&(l.sortedAsc=!0))),l.isTotalRow=this.dataProvider.rowCount>t.length,l.tuple=t,l.url=void 0,l.hierarchy=a,l.member=s,l.measure=this.dataProvider.rowAxis.hasMeasures&&1<this.dataProvider.measures.length?r:null,l},o.prototype._getRowCell=function(t,r,n,o,a){if(0==t.length)return 0==o?this.getGrandTotalCell(r,e.data_.consts.AxisName.ROWS_AXIS):((d=new i.vo.GridCell).isRowHeader=!0,d.isTotalRow=d.isGrandTotalRow=!0,d.isEmpty=!0,d.level=n,d);for(var l,c,u,h=o,d=this.dataProvider.rowLevels[o],A=0;A<this.dataProvider.rowsOnly.length;A++)if(null!=(c=(f=this.dataProvider.rowsOnly.getItemAt(A)).findLevel(d))){l=f,h=A;break}A=null==t[h]?0:t[h],(d=new i.vo.GridCell).isRowHeader=!0,d.isTotalRow=this.dataProvider.rowCount>t.length,d.isClassicTotalRow=d.isTotalRow&&2==a,c=!1,n>o&&(c=!0),n>o&&2==a&&(c=!0),n+1<o&&2==a&&(c=!0),d.level=Math.min(t.length-1,o);var p=t.slice(0),f=!1;if(o==this.dataProvider.rowLevels.length)d.label=r.caption,f=!0;else{var g=!1,m=(p=null==r?0:this.dataProvider.measures.indexOf(r.uniqueName),l.members.getItemAt(A)),w=null!=m&&2!=a;if(0>(u=this.dataProvider.rowLevels.indexOf(m.level.uniqueName)-o)){if(!m.isAll)return d;f=!0}else if(0<u)for(A=0;A<u;A++)m=m.parent;if(m&&-1<(A=this.dataProvider.rowLevels.indexOf(m.level.uniqueName))&&(d.level=A),d.member=m,2==a)m&&n==o&&(d.label=this.dataProvider.rowAxis.hasMeasures&&1<this.dataProvider.measures.length?m.caption+" "+r.caption:m.caption+" "+e.model._labels.Labels.GRID_TOTAL,f=!0);else{if(0>u)return s.nullOrEmpty(d.label)&&(d.isEmpty=!0),-1<(A=this.getLevelIdxByTuple(t))&&(d.level=A),d;0<p&&(m=null),m&&0!=m.ordinal&&(d.label=m.caption),g=1==a&&h<this.dataProvider.rowsOnly.length-1&&0==p}if(p=t.slice(0,h+1),w&&m){p[h]=m.ordinal;var y=this.dataProvider.isRowDrilledDown(p,m,r);m.isAll||!m.hierarchy_.isHierarchy||m.isLeaf||2==a||1==m.children.length&&(m.children.getItemAt(0).caption==e.model._labels.Labels.MEMBER_BLANK||m.children.getItemAt(0).caption==e.model._labels.Labels.INVALID_DATE)||(e.model._options.OptionsManager.showHierarchies?y?d.drilledDown=!0:d.drilledUp=!0:y?d.expanded=!0:d.collapsed=!0)}g&&!y&&(this.dataProvider.isRowExpanded(p,r)?d.expanded=!0:d.collapsed=!0)}return c?(d.label="",d.sortedAsc=d.sortedDesc=d.collapsed=d.expanded=d.drilledDown=d.drilledUp=!1):(d.tuple=p,d.url=void 0,d.hierarchy=l,d.measure=r,("on"==e.model._options.OptionsManager.sorting||"rows"==e.model._options.OptionsManager.sorting)&&(d.sortable=!0,this.dataProvider.rowSortTuple&&this.dataProvider.rowSortTuple.toString()==p.toString()&&this.dataProvider.rowSortMeasure==r&&(this.dataProvider.rowSortType==e.data_.consts.SortType.DESC?d.sortedDesc=!0:this.dataProvider.rowSortType==e.data_.consts.SortType.ASC&&(d.sortedAsc=!0)))),f&&-1<(A=this.getLevelIdxByTuple(t))&&(d.level=A),s.nullOrEmpty(d.label)&&(d.isEmpty=!0,d.isExpandedArea=!(2==a&&m&&o-1>n)),d},o.prototype.getLevelIdxByTuple=function(e){return(e=this.dataProvider.getRowHierarchy(e).members.getItemAt(e[e.length-1]))?this.dataProvider.rowLevels.indexOf(e.level.uniqueName):-1},o.prototype.onGridClick=function(t){s.nullOrUndefined(t.cell)||!t.cell.isColumnHeader&&!t.cell.isRowHeader||(t.cell.activeElementType==i.vo.GridCellElementType.DRILL?this.drill(t.cell):t.cell.activeElementType==i.vo.GridCellElementType.LINK&&t.cell.isLink||(s.nullOrUndefined(t.cell.member)||t.cell.activeElementType==i.vo.GridCellElementType.RIGHT_ICON?t.cell.activeElementType==i.vo.GridCellElementType.RIGHT_ICON&&(t.cell.isColumnHeader&&this.sortColumn(t.cell),t.cell.isRowHeader&&this.sortRow(t.cell)):e.model._options.OptionsManager.showHierarchies||t.cell.member.isLeaf?this.expandCollapse(t.cell):this.drill(t.cell)))},o.prototype.onFilterClick=function(i){e.model._options.OptionsManager.showFilter&&this.dispatch(new t.FilterOpenEvent(i.hierarchy))},o.prototype.drill=function(t){if(t.drilledUp||t.drilledDown||t.expanded||t.collapsed){var i,r=t.tuple,n=e.model._options.OptionsManager.classicView?null:t.measure,o=t.member;null==o||o.isAll||o.isLeaf||(t.isRowHeader?(t=e.data_.consts.AxisName.ROWS_AXIS,i=this.dataProvider.isRowDrilledDown(r,o,n)):(t=e.data_.consts.AxisName.COLUMNS_AXIS,i=this.dataProvider.isColumnDrilledDown(r,o,n)),i?this.dataProvider.drillUp(r,o,t,n):this.dataProvider.drillDown(r,o,t,n))}},o.prototype.expandCollapse=function(t){if(t.expanded||t.collapsed){var i=t.tuple,r=t.isColumnHeader?e.data_.consts.AxisName.COLUMNS_AXIS:e.data_.consts.AxisName.ROWS_AXIS,n=e.model._options.OptionsManager.classicView&&r==e.data_.consts.AxisName.ROWS_AXIS?null:t.measure;t.expanded?(this.gridLayout.clearData(),this.dataProvider.collapse(i,r,n)):t.collapsed&&(this.gridLayout.clearData(),this.dataProvider.expand(i,r,n)),t.isColumnHeader?this.gridLayout.clearColSizes(t.colIdx+1):this.gridLayout.clearRowSizes(t.rowIdx+1)}},o.prototype.onGridSingleDoubleClick=function(t){t.isSingleClick?this.singleClick(t.cell):(this.isDrillThroughAvailable&&e.model._options.OptionsManager.drillThrough&&!this.isFlatTable&&this.drillThrough(t.cell),this.doubleClick(t.cell))},o.prototype.drillThrough=function(e){e.isValue&&!e.measure.calculated&&this.dispatchWith(t.ViewEvent.DRILL_THROUGH_OPEN,this,{measure:e.measure.uniqueName,columnTuple:e.columnTuple,rowTuple:e.rowTuple})},o.prototype.singleClick=function(t){var i=t.toObject();this.setCoordsToCell(i,t.colIdx,t.rowIdx),e.model.JavaScriptHandlers.getInstance().dispatch(new e.model.APIEvent(e.model.JavaScriptHandlers.CELL_CLICK,i))},o.prototype.doubleClick=function(t){var i=t.toObject();this.setCoordsToCell(i,t.colIdx,t.rowIdx),e.model.JavaScriptHandlers.getInstance().dispatch(new e.model.APIEvent(e.model.JavaScriptHandlers.CELL_DOUBLE_CLICK,i))},o.prototype.setCoordsToCell=function(e,t,i){e.x=this.gridLayout.coords.getRelativeColX(t,this.gridLayout.isSmooth),e.y=this.gridLayout.coords.getRelativeRowY(i,this.gridLayout.isSmooth),e.width=this.gridLayout.coords.getColWidth(t),e.height=this.gridLayout.coords.getRowHeight(i)},o.prototype.sortRow=function(t,i){void 0===i&&(i="");var r=t.tuple,n=t.measure;null==n&&(n=this.dataProvider.measures.getItemAt(0)),this.dataProvider.rowSortTuple&&this.dataProvider.rowSortTuple.toString()==r.toString()&&this.dataProvider.rowSortMeasure==n?this.dataProvider.rowSortType=this.dataProvider.rowSortType==e.data_.consts.SortType.DESC?e.data_.consts.SortType.ASC:e.data_.consts.SortType.DESC:(this.dataProvider.rowSortType=e.data_.consts.SortType.DESC,this.dataProvider.rowSortTuple=r,this.dataProvider.rowSortMeasure=n),""!=i&&(this.dataProvider.rowSortType=i),this.dataProvider.sort(),this.gridLayout.clearColSizes(0),this.draw()},o.prototype.sortColumn=function(t,i){void 0===i&&(i="");var r=t.tuple,n=t.measure;null==n&&(n=this.dataProvider.measures.getItemAt(0)),r&&this.dataProvider.columnSortTuple&&this.dataProvider.columnSortTuple.toString()==r.toString()&&this.dataProvider.columnSortMeasure==n?this.dataProvider.columnSortType=this.dataProvider.columnSortType==e.data_.consts.SortType.DESC?e.data_.consts.SortType.ASC:e.data_.consts.SortType.DESC:(this.dataProvider.columnSortType=n.type==e.data_.types.MeasureType.COUNT?e.data_.consts.SortType.ASC:e.data_.consts.SortType.DESC,this.dataProvider.columnSortTuple=r,this.dataProvider.columnSortMeasure=n),""!=i&&(this.dataProvider.columnSortType=i),this.dataProvider.sort(),this.gridLayout.clearRowSizes(0),this.draw()},o.prototype.clearColumnSorting=function(){this.dataProvider.columnSortType=e.data_.consts.SortType.UNSORTED,this.dataProvider.columnSortTuple=null,this.dataProvider.columnSortMeasure=null,this._model.cube_.clearSortValues(this.dataProvider.rowAxis),this.dataProvider.sort(),this.gridLayout.clearRowSizes(0),this.draw()},o.prototype.clearRowSorting=function(){this.dataProvider.rowSortType=e.data_.consts.SortType.UNSORTED,this.dataProvider.rowSortTuple=null,this.dataProvider.rowSortMeasure=null,this._model.cube_.clearSortValues(this.dataProvider.columnAxis),this.dataProvider.sort(),this.gridLayout.clearColSizes(0),this.draw()},o.prototype.onLongPress=function(e,t){var i=this.gridLayout.getCellByElement(e.target);null==i||s.nullOrEmpty(i.label)&&isNaN(i.value)||(this.showContextMenu(i,{left:t.clientX,top:t.clientY}),this.gridLayout.deselect())},o.prototype.onContextMenu=function(e){var t=this.gridLayout.selectedCells[0]||this.gridLayout.getCellByElement(e.target);null==t||s.nullOrEmpty(t.label)&&isNaN(t.value)||(e.preventDefault(),this.showContextMenu(t,{left:e.clientX,top:e.clientY}),this.gridLayout.deselect())},o.prototype.showContextMenu=function(i,r){var n=this;if(null!=i){var o=[];!i.isValue||isNaN(i.value)||this.isFlatTable||i.measure.calculated||!e.model._options.OptionsManager.drillThrough||o.push({caption:e.model._labels.Labels.CONTEXT_MENU_DRILL_THROUGH,handler:function(){n.drillThrough(i)}}),i.isFilterHeader&&e.model._options.OptionsManager.showFilter&&o.push({caption:e.model._labels.Labels.CONTEXT_MENU_OPEN_FILTER,handler:function(){n.dispatch(new t.FilterOpenEvent(i.hierarchy))}}),(i.isRowHeader||i.isColumnHeader)&&(i.expanded&&o.push({caption:e.model._labels.Labels.CONTEXT_MENU_COLLAPSE,handler:function(){n.expandCollapse(i)}}),i.collapsed&&o.push({caption:e.model._labels.Labels.CONTEXT_MENU_EXPAND,handler:function(){n.expandCollapse(i)}})),i.isRowHeader&&!i.isFilterHeader&&(i.sortedDesc||o.push({caption:e.model._labels.Labels.CONTEXT_MENU_SORT_ROW_DESC,handler:function(){n.sortRow(i,e.data_.consts.SortType.DESC)}}),i.sortedAsc||o.push({caption:e.model._labels.Labels.CONTEXT_MENU_SORT_ROW_ASC,handler:function(){n.sortRow(i,e.data_.consts.SortType.ASC)}}),(i.sortedAsc||i.sortedDesc)&&o.push({caption:e.model._labels.Labels.CONTEXT_MENU_CLEAR_SORTING,handler:function(){n.clearRowSorting()}})),i.isColumnHeader&&!i.isFilterHeader&&(i.sortedDesc||o.push({caption:e.model._labels.Labels.CONTEXT_MENU_SORT_COLUMN_DESC,handler:function(){n.sortColumn(i,e.data_.consts.SortType.DESC)}}),i.sortedAsc||o.push({caption:e.model._labels.Labels.CONTEXT_MENU_SORT_COLUMN_ASC,handler:function(){n.sortColumn(i,e.data_.consts.SortType.ASC)}}),(i.sortedAsc||i.sortedDesc)&&o.push({caption:e.model._labels.Labels.CONTEXT_MENU_CLEAR_SORTING,handler:function(){n.clearColumnSorting()}})),0<o.length&&this._model.dispatchWith(t.ViewEvent.CONTEXT_MENU_OPEN,this,{menuItems:o,coords:r})}},o.prototype.addFilterCell=function(t,r,n){for(var o,s=n==e.data_.consts.AxisName.COLUMNS_AXIS?this.dataProvider.columnsOnly:this.dataProvider.rowsOnly,a=0,l=0;l<s.length;l++){var c=s.getItemAt(l);c.isMeasures||((o=new i.vo.GridCell).label=c.caption,o.isFilterHeader=!0,o.draggable=!0,o.hasHierarchyName=!0,o.filtered=c.hasFilter(),o.level=a,o.hierarchy=c,n==e.data_.consts.AxisName.COLUMNS_AXIS?(o.isFrozen=!this.isFlatTable,this.gridLayout.dataProvider.setDataFrozen(t,r+l,o)):(o.isRowHeader=!0,this.gridLayout.dataProvider.setDataFrozen(t+a,r,o),a++))}},o.prototype._addFilterCell=function(e,t){for(var r,n=this.dataProvider.rowsOnly,o=0,s=this.dataProvider.rowAxis.hasMeasures&&1<this.dataProvider.measures.length?this.FIRST_DATA_COLUMN-1:this.FIRST_DATA_COLUMN,a=0;a<n.length;a++){var l,c=n.getItemAt(a);if((r=new i.vo.GridCell).label=c.caption,r.isFilterHeader=!0,r.draggable=!0,r.hasHierarchyName=!0,r.filtered=c.hasFilter(),r.hierarchy=c,this.gridLayout.dataProvider.setDataFrozen(e,t+o,r),o++,2<c.levels_.length)for(var u=2;u<c.levels_.length&&(l=c.levels_.getItemAt(u),-1!=this.dataProvider.rowLevels.indexOf(l.uniqueName)&&((r=new i.vo.GridCell).label=l.caption,r.isRowHeader=!0,r.hasHierarchyName=!0,this.gridLayout.dataProvider.setDataFrozen(e,t+o,r),o++),!(o>=s));u++);if(o>=s)break}},Object.defineProperty(o.prototype,"isFlatTable",{get:function(){return e.model._options.OptionsManager.flatView},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"isDrillThroughAvailable",{get:function(){return!e.model._options.OptionsManager.flatView},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"gridLayout",{get:function(){return this._gridLayout},enumerable:!0,configurable:!0}),o.prototype.exportTo=function(t,i,r){t==e.model._export.ExportType.HTML&&e.model._export.ExportHTML.run(this,i,this.dataProvider.extendedDataWidth,this.dataProvider.extendedDataHeight),t==e.model._export.ExportType.PDF&&e.model._export.ExportPDF.run(this,i,this.dataProvider.extendedDataWidth,this.dataProvider.extendedDataHeight),t==e.model._export.ExportType.EXCEL&&e.model._export.ExportXLS.run(this,i,this.dataProvider.extendedDataWidth,this.dataProvider.extendedDataHeight)},o.prototype.print=function(){e.model.printing.PrintingManager.getInstance().run(this,this.dataProvider)},o.prototype.getCell=function(e,t){var r=this.gridLayout.getCell(e,t,!0,!0);if(null==r){(r=new i.vo.GridCell).rowIdx=e,r.colIdx=t;var n=this.getData(e,t,!0);r.value=n?n.value:NaN,isNaN(r.value)||(r.label=s.NumberFormatter.format(r.value))}return-1==r.rowIdx&&(r.rowIdx=e),-1==r.colIdx&&(r.colIdx=t),n=r.toObject(),this.setCoordsToCell(n,r.colIdx,r.rowIdx),n},o.prototype.getSelectedCell=function(){if(s.nullOrUndefined(this.gridLayout))return null;var e=this.gridLayout.selectedCells.map((function(e){return e.toObject()}));return 0==e.length?null:(1<e.length||this.setCoordsToCell(e=e[0],e.columnIndex,e.rowIndex),e)},o.prototype.setSelectedCell=function(e,t){this.gridLayout.select(e,t,e,t)},o.prototype.removeSelection=function(){this.gridLayout.deselect()},Object.defineProperty(o.prototype,"gridRowCount",{get:function(){return this.dataProvider.dataLoaded?this.dataProvider.extendedDataHeight+this.FIRST_DATA_ROW:0},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"gridColumnCount",{get:function(){return this.dataProvider.dataLoaded?this.dataProvider.extendedDataWidth+this.FIRST_DATA_COLUMN:0},enumerable:!0,configurable:!0}),o.prototype.onResizeColumn=function(e){this._onResizeColumn(e.data.colIdx,e.data.width)},o.prototype.onResizeRow=function(e){this._onResizeRow(e.data.rowIdx,e.data.height)},o.prototype._onResizeColumn=function(t,i){if(t<this.FIRST_DATA_COLUMN)0<i?e.model.sizes.SizesManager.columnHeaderSizes[t]=i:delete e.model.sizes.SizesManager.columnHeaderSizes[t];else{var r=this.dataProvider.getColumnTuple(t-this.FIRST_DATA_COLUMN,!0);if(null!=r){var n=this.dataProvider.getColumnMeasureIndex(t-this.FIRST_DATA_COLUMN);this.dataProvider.columnAxis.hasMeasures&&r.push(n),0<i?e.model.sizes.SizesManager.columnSizes[r.join(",")]=i:delete e.model.sizes.SizesManager.columnSizes[r.join(",")]}}},o.prototype.resizeColumnsByIdx=function(){var t=e.model.sizes.SizesManager.columnSizesByIdx;e.model.sizes.SizesManager.columnSizesByIdx={};var i,r=[];for(i in t)t[i]&&(r[parseInt(i)]=t[i]);for(var n in r)this.gridLayout.resizeColumn(parseInt(n),r[n]),this._onResizeColumn(parseInt(n),r[n])},o.prototype.resizeHeaderColumns=function(){var t,i=e.model.sizes.SizesManager.columnHeaderSizes,r=[];for(t in i)i[t]&&(r[t]=i[t]);for(var n in r)(i=parseInt(n))<this.FIRST_DATA_COLUMN&&this.gridLayout.resizeColumn(i,r[i])},o.prototype.resizeColumns=function(){var t,i=e.model.sizes.SizesManager.columnSizes,r=[];for(t in i)if(i[t]){var n=""==t?[]:t.split(",");-1!=(n=this.dataProvider.getColumnTupleIndex(n))&&(r[n+=this.FIRST_DATA_COLUMN]=i[t])}for(var o in r)this.gridLayout.resizeColumn(parseInt(o),r[o])},o.prototype.resizeRowsByIdx=function(){var t=e.model.sizes.SizesManager.rowSizesByIdx;e.model.sizes.SizesManager.rowSizesByIdx={};var i,r=[];for(i in t)t[i]&&(r[parseInt(i)]=t[i]);for(var n in r)this.gridLayout.resizeRow(parseInt(n),r[n]),this._onResizeRow(parseInt(n),r[n])},o.prototype.resizeHeaderRows=function(){e.model.sizes.SizesManager.startTableRow=this.START_TABLE_ROW;var t,i=e.model.sizes.SizesManager.rowHeaderSizes,r=[];for(t in i)i[t]&&(r[parseInt(t)+this.START_TABLE_ROW]=i[t]);for(var n in r)parseInt(n)<this.FIRST_DATA_ROW&&this.gridLayout.resizeRow(parseInt(n),r[n])},o.prototype.resizeRows=function(){var t,i=e.model.sizes.SizesManager.rowSizes,r=[];for(t in i)if(i[t]){var n=""==t?[]:t.split(",");-1!=(n=this.dataProvider.getRowTupleIndex(n))&&(r[n+=this.FIRST_DATA_ROW]=i[t])}for(var o in r)this.gridLayout.resizeRow(parseInt(o),r[o])},o.prototype._onResizeRow=function(t,i){if(e.model.sizes.SizesManager.startTableRow=this.START_TABLE_ROW,t<this.START_TABLE_ROW)0<i?e.model.sizes.SizesManager.rowFilterSizes[t]=i:delete e.model.sizes.SizesManager.rowFilterSizes[t];else if(t<this.FIRST_DATA_ROW)0<i?e.model.sizes.SizesManager.rowHeaderSizes[t-this.START_TABLE_ROW]=i:delete e.model.sizes.SizesManager.rowHeaderSizes[t-this.START_TABLE_ROW];else{var r=this.dataProvider.getRowTuple(t-this.FIRST_DATA_ROW,!0);if(null!=r){var n=this.dataProvider.getRowMeasureIndex(t-this.FIRST_DATA_ROW);this.dataProvider.rowAxis.hasMeasures&&r.push(n),0<i?e.model.sizes.SizesManager.rowSizes[r.join(",")]=i:delete e.model.sizes.SizesManager.rowSizes[r.join(",")]}}},o}(r.containers.UIContainer),i.GridView=n}(n||(n={})),function(e){!function(e){!function(e){var i=function(){function e(){}return e.MOUSE_CLICK="mclick",e.MOUSE_DOUBLE_CLICK="dblclick",e.MOUSE_SINGLE_DOUBLE_CLICK="singledoubleclick",e.MOUSE_UP="mup",e.MOUSE_DOWN="mdown",e.MOUSE_MOVE="mmove",e.MOUSE_LEAVE="mleave",e.HEADER_RESIZED="hresized",e.HEADER_RESIZING="hresizing",e.SHRINK_TO_FIT="shrink",e.DRILLTHROUGH_CLOSED="dthclosed",e.LONG_PRESS="long",e.FILTER_CLICK="filter_click",e.RESIZE_COLUMN="resize_c",e.RESIZE_ROW="resize_r",e}();e.GridEvent=i;var r=function(e){function t(t,r){void 0===r&&(r=null);var n=e.call(this,i.MOUSE_CLICK)||this;return n.cell=t,n.element=r,n}return a(t,e),t}(t._Event);e.GridClickEvent=r,r=function(e){function t(t){var r=e.call(this,i.MOUSE_DOUBLE_CLICK)||this;return r.cell=t,r}return a(t,e),t}(t._Event),e.GridDoubleClickEvent=r,r=function(e){function t(t,r,n){void 0===n&&(n=null);var o=e.call(this,i.MOUSE_SINGLE_DOUBLE_CLICK)||this;return o.cell=t,o.isSingleClick=r,o.element=n,o}return a(t,e),t}(t._Event),e.GridSingleDoubleClickEvent=r,r=function(e){function t(t){var r=e.call(this,i.MOUSE_DOWN)||this;return r.cell=t,r}return a(t,e),t}(t._Event),e.GridMouseDownEvent=r,r=function(e){function t(t){var r=e.call(this,i.MOUSE_MOVE)||this;return r.cell=t,r}return a(t,e),t}(t._Event),e.GridMouseMoveEvent=r,r=function(e){function t(t){var r=e.call(this,i.MOUSE_UP)||this;return r.cell=t,r}return a(t,e),t}(t._Event),e.GridMouseUpEvent=r,r=function(e){function t(t,r){var n=e.call(this,i.LONG_PRESS)||this;return n.cell=t,n.coords=r,n}return a(t,e),t}(t._Event),e.GridLongPressEvent=r,r=function(e){function t(t,r,n){void 0===n&&(n=null);var o=e.call(this,i.FILTER_CLICK)||this;return o.hierarchy=t,o.cell=r,o.element=n,o}return a(t,e),t}(t._Event),e.FilterClickEvent=r}(e.grid||(e.grid={}))}(e._view||(e._view={}))}(n||(n={})),function(e){!function(e){!function(e){var t=function(){function e(){}return e.validate=function(t){return t==e.COMPACT||t==e.CLASSIC||t==e.FLAT?t:e.COMPACT},e.COMPACT="compact",e.CLASSIC="classic",e.FLAT="flat",e}();e.GridType=t}(e.grid||(e.grid={}))}(e._view||(e._view={}))}(n||(n={})),function(e){var t,i;t=e._view||(e._view={}),i=function(i){function n(){var e=this;if(null!=n._instance)throw Error("Singleton");return(e=i.call(this,t.PivotView.stage.container)||this).setId("wdr-alert-view"),e.setControls(),e}return a(n,i),n.getInstance=function(){return null==n._instance&&(n._instance=new n),n._instance},n.dispose=function(){n._instance=null},n.prototype.setControls=function(){this.overlay.addClass("wdr-overlay-alert"),this._buttons=[];var e=new r.UIComponentBase("div","wdr-content");this.addChild(e),this._txtTitle=new r.UILabel,this._txtTitle.addClass("wdr-popup-title"),e.addChild(this._txtTitle),this._txtMessage=new r.UILabel,e.addChild(this._txtMessage),this._toolbar=new r.UIComponentBase("div","wdr-ui-btns-row"),e.addChild(this._toolbar),this._icon=new r.UIComponentBase("div","wdr-alert-icon"),this.addChild(this._icon)},n.prototype.openView=function(i,r,n,o,s,a){void 0===i&&(i=""),void 0===r&&(r=""),void 0===n&&(n=e.AlertType.ALERT),void 0===o&&(o=null),void 0===s&&(s=null),void 0===a&&(a=!1),this.clear(),this.setTitle(r),this.setMessage(i),this.setIcon(n),this.setButtons(o,s),t.PivotView.stage.addChild(this),this.isOpaque=a,this.open(),this.centerPosition()},n.prototype.clear=function(){for(this.setTitle(""),this.setMessage("");0<this._buttons.length;)this._buttons.pop().removeFromParent();this.container.toggleClass("wdr-alert",!1),this.container.toggleClass("wdr-confirmation",!1),this.container.toggleClass("wdr-error",!1),this.container.toggleClass("wdr-info",!1),this.container.toggleClass("wdr-question",!1)},n.prototype.setTitle=function(e){this._txtTitle.setSelectable(!1),this._txtTitle.setLabel(e)},n.prototype.setMessage=function(e){this._txtMessage.setLabel(e,!0)},n.prototype.setButtons=function(t,i){var n=this;null==t&&(t=[e.model._labels.Labels.BUTTON_OK]),t.reverse(),null!=i&&i.reverse(),this._handlers=i;for(var o,a=0;a<t.length;a++)(o=new r.UIButton).setLabel(t[a]),o.addEventListener(r.UIButton.CLICK_EVENT,(function(e){return n.buttonClickHandler(e)})),this._buttons.push(o),this.isPrimary(t[a])&&o.addClass("wdr-ui-btn-dark"),this.isPrimary(t[a])&&(s.OSUtil.isMac||s.OSUtil.isIOS)?this._toolbar.addChild(o):this.isPrimary(t[a])?this._toolbar.container.prepend(o.container):this._toolbar.addChild(o)},n.prototype.isPrimary=function(t){switch(t){case e.model._labels.Labels.BUTTON_OK:case e.model._labels.Labels.BUTTON_SAVE:case e.model._labels.Labels.BUTTON_YES:return!0}return!1},n.prototype.buttonClickHandler=function(e){e=e.target;for(var t=-1,i=0;i<this._buttons.length;i++)if(this._buttons[i]==e){t=i;break}0>t||(this.close(),null==this._handlers||null==this._handlers[t])||this._handlers[t]()},n.prototype.setIcon=function(t){this._icon.container.removeAllChildren(),t==e.AlertType.ALERT?this._icon.container.addChild(this.createIconAlert()):t==e.AlertType.CONFIRMATION?this._icon.container.addChild(this.createIconConfirmation()):t==e.AlertType.ERROR?this._icon.container.addChild(this.createIconError()):t==e.AlertType.INFO&&this._icon.container.addChild(this.createIconInfo())},n.prototype.createIconConfirmation=function(){var e=new r.UIElement("span","wdr-circle");return e.addChild(new r.UIElement("span","wdr-ui-icon wdr-icon-notif_confirm")),e},n.prototype.createIconInfo=function(){var e=new r.UIElement("span","wdr-circle");return e.addChild(new r.UIElement("span","wdr-ui-icon wdr-icon-notif_info")),e},n.prototype.createIconAlert=function(){var e=new r.UIElement("span","wdr-triangle-wrap");return e.addChild(new r.UIElement("span","wdr-triangle")),e.addChild(new r.UIElement("span","wdr-ui-icon wdr-icon-notif_warning")),e},n.prototype.createIconError=function(){var e=new r.UIElement("span","wdr-hexagon");return e.addChild(new r.UIElement("span","wdr-ui-icon wdr-icon-notif_arrow")),e},n.prototype.close=function(){i.prototype.close.call(this),this.clear()},n.prototype.onOverlayClick=function(){this.isOpaque||i.prototype.onOverlayClick.call(this)},n}(r.containers.UIPopup),t.AlertView=i}(n||(n={})),function(e){var t,i,n;t=e._view||(e._view={}),i=t.grid||(t.grid={}),n=function(n){function o(){var e=n.call(this,t.PivotView.stage.container)||this;return e.slice=null,e.originalSlice=null,e.columnTuple=null,e.rowTuple=null,e.measure=null,e.START_TABLE_ROW=0,e.START_HEADERS_ROW=0,e.START_HEADERS_COLUMN=0,e.FIRST_DATA_ROW=0,e.FIRST_DATA_COLUMN=0,e.setId("wdr-drillthrough-view"),e.setControls(),e}return a(o,n),o.prototype.setControls=function(){var e=this;this.headerGroup=new r.containers.UIContainer("wdr-header-container"),this.addChild(this.headerGroup),this._txtTitle=new r.UILabel,this._txtTitle.addClass("wdr-popup-title"),this._txtTitle.setSelectable(!1),this.headerGroup.addChild(this._txtTitle),this._btnClose=new r.UIButton,this._btnClose.addClass("wdr-ui-btn-close"),this._btnClose.addEventListener(r.UIButton.CLICK_EVENT,(function(){return e.close()})),this.headerGroup.addChild(this._btnClose),this.detailsGroup=new r.containers.UIContainer("wdr-details-container"),this.addChild(this.detailsGroup),this._txtRowDetails=new r.UILabel,this._txtRowDetails.addClass("wdr-ui-label-light"),this.detailsGroup.addChild(this._txtRowDetails),this._txtColDetails=new r.UILabel,this._txtColDetails.addClass("wdr-ui-label-light"),this.detailsGroup.addChild(this._txtColDetails),this._txtMeasureDetails=new r.UILabel,this._txtMeasureDetails.addClass("wdr-ui-label-light"),this.detailsGroup.addChild(this._txtMeasureDetails),this.sheetGroup=new r.containers.UIContainer("wdr-grid-container"),this.addChild(this.sheetGroup),this.gridLayout=new i.sheet.flat.FlatGridLayout,this.gridLayout.isDrillThrough=!0,this.gridLayout.getDataFunction=function(t,i){return e.getData(t,i)},this.sheetGroup.container.addChild(this.gridLayout)},o.prototype.openView=function(i,r,n,o,s){var a=this;void 0===i&&(i=null),void 0===r&&(r=null),void 0===n&&(n=null),void 0===o&&(o=null),void 0===s&&(s=null),this.dataProvider=i,this.setSlice(r.clone()),this.originalSlice=r,this.rowTuple=o,this.columnTuple=n,this.measure=s,this.tmpShowHeaders=e.model._options.OptionsManager.showHeaders,e.model._options.OptionsManager.showHeaders=!0,this.data=this.dataProvider.drillThrough(this.rowTuple,this.columnTuple,this.measure),this.keys=this.data.shift(),e.model._options.OptionsManager.showDrillThroughConfigurator&&null==this._fieldsView&&(this._fieldsView=new t.config.FieldsView,this._fieldsView.modalParent=t.PivotView.stage.container,this._fieldsView.isForDillThrough=!0,this._fieldsView.containtment=this.gridLayout.element,this._fieldsView.addEventListener(t.config.FieldsView.EVENT_OPEN,(function(){return a.onFieldsViewOpen()})),this._fieldsView.addEventListener(t.config.FieldsView.EVENT_APPLY_SLICE,(function(e){return a.onFieldsViewApplySlice(e)})),this.sheetGroup.addChild(this._fieldsView)),this.gridLayout.addEventListener(t.config.FieldsView.EVENT_APPLY_SLICE,(function(e){return a.onFieldsViewApplySlice(e)})),this.open(),this.redraw()},o.prototype.onDataLoaded=function(t){this.data=t,e.preloader(!1),null!=this.data&&(this.open(),this.redraw())},o.prototype.setSlice=function(e){this.slice=e},o.prototype.redraw=function(){this._txtTitle.setLabel(e.model._labels.Labels.DRILL_THROUGH_TITLE),this._txtRowDetails.setLabel(this.getRowDetails(),!0),this._txtColDetails.setLabel(this.getColDetails(),!0),this._txtMeasureDetails.setLabel(this.getMeasureDetails(),!0),this.setWidth(t.PivotView.stageWidth-80);var i=t.PivotView.stage.container.getHeight(!0)-this.detailsGroup.container.getHeight(!0)-this.headerGroup.container.getHeight(!0)-30-this.container.padding.top-this.container.padding.bottom-40,r=this.getWidth()-2;this.gridLayout.clearAll(),this.gridLayout.resize(r,i),this.gridLayout.width=r,this.gridLayout.height=i,this.gridLayout.freezeRows(1),this.gridLayout.setDataSize(this.data.length,this.slice.flatten().length),this.gridLayout.draw(),this.centerPosition()},o.prototype.close=function(){n.prototype.close.call(this),0==s.nullOrUndefined(this.tmpShowHeaders)&&(e.model._options.OptionsManager.showHeaders=this.tmpShowHeaders),this.dispatchWith(i.GridEvent.DRILLTHROUGH_CLOSED)},o.prototype.getData=function(t,r){if(0==t)return this.getHeaderCell(r);var n,o=new i.vo.GridCell;if(o.isDrillThrough=!0,o.isValue=!0,null==this.data||null==this.data[t-1])return null;if(n=this.slice.flatten(),!(r<this.data[t-1].length))return null;var a=n.getItemAt(r);if(null==a)return null;n=this.keys.indexOf(a.uniqueName),2<a.levels_.length&&(n=this.keys.indexOf(a.levels_.getKeyAt(a.levels_.length-1)));var l=this.getNotNullMemberIdx(t,n);o.hierarchy=a,o.label=this.getMemberFullCaption(a.members.getItemAt(l));var c=this.slice.hierarchyToMeasure(a.uniqueName);return null==c?null:(n=c.getFormat(!0).clone(),this.originalSlice.measures_.keyExists(c.uniqueName)&&null!=(a=a.members.getItemAt(l))&&(o.value=a.levelOrdinal,o.label=c.type==e.data_.types.MeasureType.NUMBER?s.NumberFormatter.format(o.value,n):a.caption),""!=n.textAlign&&o.customize({"text-align":n.textAlign}),o.measure=c,o)},o.prototype.getNotNullMemberIdx=function(e,t){for(;null==this.data[e-1][t];)t--;return this.data[e-1][t]},o.prototype.getMemberFullCaption=function(e){for(var t=[];e&&e.parent;)t.unshift(e.caption),e=e.parent;return t.join(" / ")},o.prototype.getHeaderCell=function(e){var t=new i.vo.GridCell;return t.isDrillThrough=!0,t.isColumnHeader=!0,null==(e=this.slice.flatten().getItemAt(e))?null:(t.label=e.caption,t)},o.prototype.getRowDetails=function(){for(var t,i=[],r=0;r<this.rowTuple.length;r++){if(null==(t=this.originalSlice.rowsOnly.getItemAt(r)))return null;t=t.members.getItemAt(this.rowTuple[r]),i.push(t.caption)}return(i=0<i.length?s.StringUtils.bind(e.model._labels.Labels.DRILL_THROUGH_ROW,i.join(" - ")):"").replace(/<br\s*[\/]?>/gi," ")},o.prototype.getColDetails=function(){for(var t,i=[],r=0;r<this.columnTuple.length;r++){if(null==(t=this.originalSlice.columnsOnly.getItemAt(r)))return null;t=t.members.getItemAt(this.columnTuple[r]),i.push(t.caption)}return(i=0<i.length?s.StringUtils.bind(e.model._labels.Labels.DRILL_THROUGH_COLUMN,i.join(" - ")):"").replace(/<br\s*[\/]?>/gi," ")},o.prototype.getMeasureDetails=function(){var t=this.measure.getFormat().clone(),i=this.dataProvider.getValue(this.rowTuple,this.columnTuple,this.measure);return t=s.NumberFormatter.format(i,t),t=(t=s.StringUtils.bind(e.model._labels.Labels.DRILL_THROUGH_VALUE,this.measure.caption,t)).replace(/<br\s*[\/]?>/gi," "),this.value=i,t},o.prototype.onFieldsViewOpen=function(){this._fieldsView&&this._fieldsView.open(e.data_.Cube.getInstance().structure_,this.slice)},o.prototype.onFieldsViewApplySlice=function(t){t=t.data instanceof e.data_._structure.Slice?t.data:e.data_._structure.Slice.fromObject(e.model.report.SliceValueObject.fromObject(t.data),e.data_.Cube.getInstance().structure_),this.setSlice(t),this.redraw()},o.prototype.exportTo=function(t,i,r){r=this.slice?this.slice.flatten().length:this.data[0]?this.data[0].length:0;var n=this.data?this.data.length+1:0;t==e.model._export.ExportType.HTML&&e.model._export.ExportHTML.run(this,i,r,n),t==e.model._export.ExportType.PDF&&e.model._export.ExportPDF.run(this,i,r,n),t==e.model._export.ExportType.EXCEL&&e.model._export.ExportXLS.run(this,i,r,n)},o.prototype.saveData=function(e,t,i){var r=this;this.timer&&this.timer.running&&this.timer.stop(),null==this.timer&&(this.timer=new s.Timer(1e3,1)),this.timer.addEventListener(s.TimerEvent.TIMER_COMPLETE,(function(){return r.onTimeComplete()})),this.timer.start(),(t=this.getData(e,t))&&t.label!=i&&t.value!=i&&this.dataProvider.save(this.rowTuple,this.columnTuple,t.hierarchy,i,e-1),this.draw()},o.prototype.onTimeComplete=function(){this._txtRowDetails.setLabel(this.getRowDetails(),!0),this._txtColDetails.setLabel(this.getColDetails(),!0),this._txtMeasureDetails.setLabel(this.getMeasureDetails(),!0),this.timer.stop()},o}(r.containers.UIPopup),i.DrillThroughView=n}(n||(n={})),function(e){var t;!function(t){!function(t){var i=function(){function i(){this.value=NaN,this.label="",this.level=NaN,this.sortedDesc=this.sortedAsc=this.sortable=this.drilledDown=this.drilledUp=this.draggable=this.collapsed=this.expanded=this.filtered=this.hasHierarchyName=this.showTooltip=this.isLink=this.isValue=this.isClassicTotalRow=this.isGrandTotalColumn=this.isGrandTotalRow=this.isTotalColumn=this.isTotalRow=this.isMeasureHeader=this.isColumnHeader=this.isRowHeader=this.isFrozen=this.isFilterHeader=this.isCustomized=this.numeric=!1,this.colIdx=this.rowIdx=-1,this.recordId=null,this.isDrillThrough=this.isExpandedArea=this.isEmpty=!1,this.conditions=[],this.url="",this.isKPIStatus=this.isKPITrend=!1,this.activeElementType=t.GridCellElementType.BACKGROUND}return Object.defineProperty(i.prototype,"isTotal",{get:function(){return this.isTotalRow||this.isTotalColumn},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"isGrandTotal",{get:function(){return this.isGrandTotalRow||this.isGrandTotalColumn},enumerable:!0,configurable:!0}),i.prototype.getDrillLabel=function(){return this.drilledDown||this.drilledUp?this.hierarchy.levels_.getItemAt(this.member.level.num+1).caption:""},i.prototype.getLabel=function(){if(null!=i.customizeCellFunction){var t=new h;t.clear(),t.tag="div",t.text+=this.label,i.customizeCellFunction(t.node,this.toObject());var r=e.model.XSSCheck.valid(r=t.text)?r:e.model.XSSCheck.validate(r);return t.clear(),(t=document.createElement("div")).innerHTML=r,t.textContent?t.textContent.trim():r}return this.label},i.prototype.customize=function(e){this.isCustomized=!0,null==this.style&&(this.style=new t.CellStyle),this.style.addCSS(e)},i.prototype.customizeWithClass=function(e){this.isCustomized=!0,null==this.style&&(this.style=new t.CellStyle),this.style.addStyle(e),this.style.addCustomStyle(e)},i.prototype.toObject=function(){if(this.obj)return this.obj;var t,i,r=e.model.PivotModel.getInstance(),n=[];if(!e.model._options.OptionsManager.flatView&&(i=this.isColumnHeader&&this.tuple?this.tuple:this.columnTuple))for(var o=r.cube_.slice_?r.cube_.slice_.columnsOnly:new s.AssociativeArray,a=0;a<i.length;a++)t=(t=o.getItemAt(a)).members.getItemAt(i[a]),n.push({caption:t.caption,uniqueName:t.uniqueName,hierarchyCaption:t.hierarchy_.caption,hierarchyUniqueName:t.hierarchy_.uniqueName});if(o=[],!e.model._options.OptionsManager.flatView&&(i=this.isRowHeader&&this.tuple?this.tuple:this.rowTuple))for(r=r.cube_.slice_?r.cube_.slice_.rowsOnly:new s.AssociativeArray,a=0;a<i.length;a++)t=(t=r.getItemAt(a)).members.getItemAt(i[a]),o.push({caption:t.caption,uniqueName:t.uniqueName,hierarchyCaption:t.hierarchy_.caption,hierarchyUniqueName:t.hierarchy_.uniqueName});return i={columnIndex:this.colIdx,columns:n,label:this.label,measure:this.measure?e.data_._structure.GenericMeasure.toObject(this.measure):null,hierarchy:this.hierarchy?e.data_._structure.GenericHierarchy.toObject(this.hierarchy):null,member:this.member?e.data_._structure.GenericMember.toObject(this.member):null,rowIndex:this.rowIdx,rows:o,type:this.isColumnHeader||this.isRowHeader||this.isFilterHeader?"header":"value",value:this.value,recordId:this.recordId,isTotal:this.isTotal,isTotalRow:this.isTotalRow,isTotalColumn:this.isTotalColumn,isClassicTotalRow:this.isClassicTotalRow,isGrandTotal:this.isGrandTotal,isGrandTotalRow:this.isGrandTotalRow,isGrandTotalColumn:this.isGrandTotalColumn,isDrillThrough:this.isDrillThrough},isNaN(this.level)||(i.level=this.level),0<this.conditions.length&&(i.conditions=this.conditions),this.obj=i},i.customizeCellFunction=null,i}();t.GridCell=i}(t.vo||(t.vo={}))}((t=e._view||(e._view={})).grid||(t.grid={}))}(n||(n={})),function(e){!function(e){!function(e){!function(e){var t=function(){function e(){this.styleNames=[],this.customStyleNames=[],this.css={}}return e.prototype.addStyle=function(e){-1==this.styleNames.indexOf(e)&&this.styleNames.push(e)},e.prototype.addCustomStyle=function(e){-1==this.customStyleNames.indexOf(e)&&this.customStyleNames.push(e)},e.prototype.addCSS=function(e){for(var t in e)this.css[t]=e[t]},e.prototype.getClassString=function(){return this.styleNames.join(" ")},e.prototype.getCustomClassString=function(){return this.customStyleNames.join(" ")},e.prototype.getStyleString=function(){var e,t="";for(e in this.css)t+=e+":"+this.css[e]+";";return t},e}();e.CellStyle=t}(e.vo||(e.vo={}))}(e.grid||(e.grid={}))}(e._view||(e._view={}))}(n||(n={})),function(e){!function(e){var t,i,n;i=(t=e.grid||(e.grid={})).vo||(t.vo={}),n=function(){function e(){}return e.getFontStyle=function(t){return 500<t?e.BOLD:e.NORMAL},e.NORMAL="",e.BOLD="Bold",e}(),i.FontStylePDFType=n,n=function(){function t(){}return t.prototype.merge=function(e){this.color=this.color||e.color,this.backgroundColor=this.backgroundColor||e.backgroundColor,this.backgroundImage=this.backgroundImage||e.backgroundImage,this.borderColor=this.borderColor||e.borderColor,this.fontSize=this.fontSize||e.fontSize,this.fontWeight=this.fontWeight||e.fontWeight,this.textAlign=this.textAlign||e.textAlign,this.fontFamily=this.fontFamily||e.fontFamily,this.width=this.width||e.width,this.maxWidth=this.maxWidth||e.maxWidth,this.height=this.height||e.height,this.maxHeight=this.maxHeight||e.maxHeight},t.prototype.clone=function(){var e=new t;return e.color=this.color,e.backgroundColor=this.backgroundColor,e.backgroundImage=this.backgroundImage,e.borderColor=this.borderColor,e.fontSize=this.fontSize,e.fontWeight=this.fontWeight,e.textAlign=this.textAlign,e.fontFamily=this.fontFamily,e.width=this.width,e.maxWidth=this.maxWidth,e.height=this.height,e.maxHeight=this.maxHeight,e},t.fromItem=function(e,i){void 0===i&&(i=null);var r=new t;return(null==i||null!=i&&i.css("color")!=e.css("color"))&&(r.color=e.css("color")),(null==i||null!=i&&i.css("background-color")!=e.css("background-color"))&&(r.backgroundColor=e.css("background-color")),(null==i||null!=i&&i.css("background-image")!=e.css("background-image"))&&(r.backgroundImage=e.css("background-image")),(null==i||null!=i&&i.css("border-color")!=e.css("border-color"))&&(r.borderColor=e.css("border-color")),(null==i||null!=i&&i.css("font-size")!=e.css("font-size"))&&(r.fontSize=parseInt(e.css("font-size"))),(null==i||null!=i&&i.css("font-weight")!=e.css("font-weight"))&&(r.fontWeight=e.css("font-weight")),(null==i||null!=i&&i.css("fill")!=e.css("fill"))&&(r.fill=e.css("fill")),(null==i||null!=i&&i.css("text-align")!=e.css("text-align"))&&(r.textAlign=e.css("text-align")),(null==i||null!=i&&i.css("font-family")!=e.css("font-family"))&&(r.fontFamily=e.css("font-family")),(null==i||null!=i&&i.css("width")!=e.css("width"))&&(r.width=parseInt(e.css("width"))),(null==i||null!=i&&i.css("max-width")!=e.css("max-width"))&&(r.maxWidth=parseInt(e.css("max-width"))),(null==i||null!=i&&i.css("height")!=e.css("height"))&&(r.height=parseInt(e.css("height"))),(null==i||null!=i&&i.css("max-height")!=e.css("max-height"))&&(r.maxHeight=parseInt(e.css("max-height"))),r},t.fromClass=function(i,n,o){void 0===n&&(n=null),void 0===o&&(o=!0);var s=new r.UIElement("div");return s.addClass(i).hide(),i=new r.UIElement("div"),null==n?e.PivotView.stage.container.append(s).append(i):n.append(s).append(i),n=t.fromItem(s,o?i:null),s.remove(),i.remove(),n},t.fromString=function(e){var i=new t,r=0;for(e=e.replace(/ /g,";");-1<(r=e.indexOf(";"));)this.defineStyle(e.substring(0,r),i),e=e.substring(r+1);return i},t.hexToRgb=function(e){return e=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(function(e,t,i,r){return t+t+i+i+r+r})),null==(e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e))?"":"rgb("+parseInt(e[1],16)+","+parseInt(e[2],16)+","+parseInt(e[3],16)+")"},t.defineStyle=function(e,t){-1<e.indexOf("background-color")?t.backgroundColor=this.hexToRgb(e.substring(17,e.length)):-1<e.indexOf("background-image")?t.backgroundImage=e.substring(17,e.length):-1<e.indexOf("border-color")?t.borderColor=this.hexToRgb(e.substring(13,e.length)):-1<e.indexOf("color")?t.color=this.hexToRgb(e.substring(6,e.length)):-1<e.indexOf("font-size")?t.fontSize=parseInt(e.substring(10,e.length)):-1<e.indexOf("fill")?t.fill=this.hexToRgb(e.substring(5,e.length)):-1<e.indexOf("text-align")?t.textAlign=e.substring(11,e.length):-1<e.indexOf("max-width")?t.maxWidth=parseInt(e.substring(10,e.length)):-1<e.indexOf("max-height")?t.maxHeight=parseInt(e.substring(11,e.length)):-1<e.indexOf("width")&&(t.width=parseInt(e.substring(6,e.length)))},t.fromItemToString=function(e,i,r){void 0===i&&(i=null),void 0===r&&(r=null);var n="";null==i&&(i=t.DEFAULT_CSS_PROPERIES);for(var o=0;o<i.length;o++)(null==r||null!=r&&e.css(i[o])!=r.css(i[o]))&&(n+=i[o]+":"+e.css(i[o])+";");return n},t.fromClassToString=function(i,n,o,s){void 0===n&&(n=null),void 0===o&&(o=null),void 0===s&&(s=void 0);var a=new r.UIElement("div");return a.addClass(i).hide(),void 0===s&&(s=new r.UIElement("div")).hide(),null==n?e.PivotView.stage.container.append(a).append(s):n.append(a).append(s),i=t.fromItemToString(a,o,s),a.remove(),null!=s&&s.remove(),i},t.parseRGB=function(e){var t=[],i=e.split("rgb");for(2<i.length&&(e=i[2]),e=(e=e.replace(/[^\d,]/g,"")).split(","),i=0;i<e.length;i++)t[i]=parseInt(e[i]);return null==t[3]&&(t[3]=1),t},t.DEFAULT_CSS_PROPERIES="background-color background-image color font-family font-size font-weight text-align padding-top padding-left padding-right padding-bottom border border-top-width border-top-color border-top-style border-bottom-width border-bottom-color border-bottom-style border-left-width border-left-color border-left-style border-right-width border-right-color border-right-style".split(" "),t}(),i.StyleValueObject=n}(e._view||(e._view={}))}(n||(n={})),function(e){!function(e){!function(e){!function(e){var t=function(){function e(){}return e.TITLE="wdr-pivot-title",e.CELL="wdr-cell",e.CELL_EMPTY="wdr-empty",e.SHEET_HEADER="wdr-sheet-header",e.HEADER="wdr-header",e.HEADER_COLUMN="wdr-header-c",e.HEADER_ROW="wdr-header-r",e.MEASURE_HEADER="wdr-measure-header",e.FILTER_HEADER="wdr-filter-header",e.PAGE_HEADER="wdr-page-header",e.PAGE_HEADER_ITEMS="wdr-page-header-items",e.FILTER_ICON="wdr-filter-icon",e.FILTERED="wdr-filtered",e.FILTERED_ICON="wdr-filtered-icon",e.HEADER_DRAGGABLE="wdr-draggable",e.HEADER_DROPPABLE="wdr-droppable",e.TOTAL="wdr-total",e.GRAND_TOTAL="wdr-grand-total",e.HIERARCHY="wdr-hierarchy-link",e.LINK="wdr-link",e.V_SORT="wdr-v-sort",e.V_SORT_ICON="wdr-v-sort-icon",e.V_SORT_ASC="wdr-v-sort-asc",e.V_SORT_DESC="wdr-v-sort-desc",e.H_SORT="wdr-h-sort",e.H_SORT_ICON="wdr-h-sort-icon",e.H_SORT_ASC="wdr-h-sort-asc",e.H_SORT_DESC="wdr-h-sort-desc",e.SORT_ICON="wdr-sort-icon",e.EXPANDED="wdr-expanded",e.EXPANDED_ICON="wdr-expanded-icon",e.COLLAPSED="wdr-collapsed",e.COLLAPSED_ICON="wdr-collapsed-icon",e.LEVEL="wdr-level-",e.DRILLED_UP="wdr-drilled-up",e.DRILLED_DOWN="wdr-drilled-down",e.ICON="wdr-icon",e}();e.GridStyleName=t}(e.vo||(e.vo={}))}(e.grid||(e.grid={}))}(e._view||(e._view={}))}(n||(n={})),function(e){!function(e){!function(e){!function(e){var t=function(){function e(){}return e.LEFT_ICON="left icon",e.MAIN_ICON="main icon",e.RIGHT_ICON="right icon",e.LABEL="label",e.DRILL="drill",e.LINK="link",e.BACKGROUND="backgroud",e}();e.GridCellElementType=t}(e.vo||(e.vo={}))}(e.grid||(e.grid={}))}(e._view||(e._view={}))}(n||(n={})),function(e){var t,i,r,n;r=(i=(t=e._view||(e._view={})).grid||(t.grid={})).sheet||(i.sheet={}),n=function(){function i(){this._cellMaxHeight=this._cellMaxWidth=this._dataContentHeight=this._dataContentWidth=-1,this.filtersHeight=this.titleHeight=this.scrollLeft=this.scrollTop=this.firstDataColIdx=this.firstDataRowIdx=this.frozenRowsCount=this.frozenColsCount=this.dataRowsCount=this.dataColsCount=this._sheetHeaderHeight=this._sheetHeaderWidth=0,this._scaleTreshold=15e5,this._scaleY=this._scaleX=1,this._colsWidth=[],this._rowsHeight=[],this._colsWidthPending=[],this._rowsHeightPending=[],this._colsWidthExplicit=[],this._rowsHeightExplicit=[],this._scrollBarSize=i.getScrollBarSize(),this._scaleTreshold=i.getScaleTreshold(),this._sheetHeaderWidth=i.SHEET_HEADER_WIDTH,this._sheetHeaderHeight=i.SHEET_HEADER_HEIGHT,this.setDefaults()}return Object.defineProperty(i.prototype,"gridStartY",{get:function(){return this.titleHeight+this.filtersHeight},enumerable:!0,configurable:!0}),i.getScrollBarSize=function(){return s.browserVersion().isMobile||s.OSUtil.isMac?0:s.browserVersion().isEdge?12:17},i.getScaleTreshold=function(){return s.detectBrowser().isChrome||s.detectBrowser().isFirefox?1e7:15e5},i.prototype.clearColSizes=function(e){this._colsWidth.length>e&&(this._colsWidth.length=e),this._colsWidthPending.length>e&&(this._colsWidthPending.length=e),this._colsWidthExplicit.length>e&&(this._colsWidthExplicit.length=e),this._dataContentWidth=-1},i.prototype.clearRowSizes=function(e){this._rowsHeight.length>e&&(this._rowsHeight.length=e),this._rowsHeightPending.length>e&&(this._rowsHeightPending.length=e),this._rowsHeightExplicit.length>e&&(this._rowsHeightExplicit.length=e),this._dataContentHeight=-1},i.prototype.reset=function(){this._colsWidth.length=0,this._rowsHeight.length=0,this._colsWidthPending.length=0,this._rowsHeightPending.length=0,this._colsWidthExplicit.length=0,this._rowsHeightExplicit.length=0,this._dataContentHeight=this._dataContentWidth=-1,this.filtersHeight=this.titleHeight=this.scrollLeft=this.scrollTop=this.firstDataColIdx=this.firstDataRowIdx=this.frozenRowsCount=this.frozenColsCount=this.dataRowsCount=this.dataColsCount=0,this._sheetHeaderWidth=i.SHEET_HEADER_WIDTH,this._sheetHeaderHeight=i.SHEET_HEADER_HEIGHT,this._scaleY=this._scaleX=1,this._cellMaxHeight=this._cellMaxWidth=-1,this.setDefaults()},i.prototype.setDefaults=function(){var e=t.grid.vo.StyleValueObject.fromClass(s.browserVersion().isMobile?"wdr-grid-column-mobile":"wdr-grid-column");i.CELL_WIDTH=isNaN(e.width)?100:Math.max(i.CELL_MIN_WIDTH,e.width),isNaN(e.maxWidth)||(this._cellMaxWidth=Math.max(i.CELL_MIN_WIDTH,e.maxWidth)),e=t.grid.vo.StyleValueObject.fromClass(s.browserVersion().isMobile?"wdr-grid-row-mobile":"wdr-grid-row"),i.CELL_HEIGHT=isNaN(e.height)?30:Math.max(i.CELL_MIN_HEIGHT,e.height),isNaN(e.maxHeight)||(this._cellMaxHeight=Math.max(i.CELL_MIN_HEIGHT,e.maxHeight))},Object.defineProperty(i.prototype,"cellMaxWidth",{get:function(){return this._cellMaxWidth},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"cellMaxHeight",{get:function(){return this._cellMaxHeight},enumerable:!0,configurable:!0}),i.prototype.setScale=function(){var e=this.calcRangeHeight(this.frozenRowsCount,this.frozenRowsCount+this.dataRowsCount);this._scaleY=e>this._scaleTreshold?this._scaleTreshold/e:1,e=this.calcRangeWidth(this.frozenColsCount,this.frozenColsCount+this.dataColsCount),this._scaleX=e>this._scaleTreshold?this._scaleTreshold/e:1},i.prototype.resize=function(e,t,i){void 0===i&&(i=!1),this._layoutWidth=e,this._layoutHeight=t,i&&(this._originalWidth=e,this._originalHeight=t)},Object.defineProperty(i.prototype,"scrollBarWidth",{get:function(){return this.hasVerticalScroll?this._scrollBarSize:0},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"scrollBarHeight",{get:function(){return this.hasHorizontalScroll?this._scrollBarSize:0},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"scrollBarSize",{get:function(){return this._scrollBarSize},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"originalWidth",{get:function(){return this._originalWidth},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"originalHeight",{get:function(){return this._originalHeight},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"layoutWidth",{get:function(){return this._layoutWidth},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"layoutHeight",{get:function(){return this._layoutHeight},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"availableHeight",{get:function(){return this._layoutHeight-this.scrollBarHeight-this.gridStartY},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"availableWidth",{get:function(){return this._layoutWidth-this.scrollBarWidth},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"dataWidth",{get:function(){return this._layoutWidth-this.rowHeadersWidth},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"dataHeight",{get:function(){return this._layoutHeight-this.colHeadersHeight-this.gridStartY},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"maxColsCount",{get:function(){return this.frozenColsCount+this.dataColsCount},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"maxRowsCount",{get:function(){return this.frozenRowsCount+this.dataRowsCount},enumerable:!0,configurable:!0}),i.prototype.getRowHeight=function(e){var t=isNaN(this._rowsHeight[e])?i.CELL_HEIGHT:this._rowsHeight[e];return 0<this.cellMaxHeight&&!this.isRowHeightExplicit(e)?Math.min(this.cellMaxHeight,t):t},i.prototype.setRowHeight=function(e,t,r,n){void 0===r&&(r=!1),void 0===n&&(n=!1),t=Math.max(t,i.CELL_MIN_HEIGHT),r?(isNaN(this._rowsHeightPending[e])||t>this._rowsHeightPending[e])&&(this._rowsHeightPending[e]=t):(this._rowsHeight[e]=t,this._dataContentHeight=-1),n&&(this._rowsHeightExplicit[e]=!0)},i.prototype.resetRowHeight=function(e){this.isRowHeightExplicit(e)&&(delete this._rowsHeight[e],delete this._rowsHeightPending[e],delete this._rowsHeightExplicit[e],this._dataContentHeight=-1)},i.prototype.getColWidth=function(e){if(-1==e)return this.getSheetHeaderWidth();if(e>=this.maxColsCount)return Math.max(100,i.CELL_WIDTH);var t=isNaN(this._colsWidth[e])?i.CELL_WIDTH:this._colsWidth[e];return 0<this.cellMaxWidth&&!this.isColWidthExplicit(e)?Math.min(this.cellMaxWidth,t):t},i.prototype.setColWidth=function(e,t,r,n){void 0===r&&(r=!1),void 0===n&&(n=!1),t=Math.max(t,i.CELL_MIN_WIDTH),r?(isNaN(this._colsWidthPending[e])||t>this._colsWidthPending[e])&&(this._colsWidthPending[e]=t):(-1==e?this._sheetHeaderWidth=t:this._colsWidth[e]=t,this._dataContentWidth=-1),n&&(this._colsWidthExplicit[e]=!0)},i.prototype.resetColWidth=function(e){this.isColWidthExplicit(e)&&(delete this._colsWidth[e],delete this._colsWidthPending[e],delete this._colsWidthExplicit[e],this._dataContentWidth=-1)},i.prototype.isColWidthExplicit=function(e){return!0===this._colsWidthExplicit[e]},i.prototype.isRowHeightExplicit=function(e){return!0===this._rowsHeightExplicit[e]},i.prototype.applyPendingSizes=function(){for(var e=0;e<this._rowsHeightPending.length;e++)if(!this.isRowHeightExplicit(e)){var t=this._rowsHeightPending[e];!isNaN(t)&&t>this.getRowHeight(e)&&this.setRowHeight(e,t)}for(this._rowsHeightPending.length=0,e=-1;e<this._colsWidthPending.length;e++)this.isColWidthExplicit(e)||(t=this._colsWidthPending[e],!isNaN(t)&&t>this.getColWidth(e)&&this.setColWidth(e,t));this._colsWidthPending.length=0},i.prototype.getRowIndexAtPosition=function(e,t){void 0===t&&(t=!1);var i=e/this.dataContentHeight*(this.layoutHeight/this._scaleY-this.layoutHeight)*this._scaleY;if(1!=this._scaleY&&e+i>=this.dataContentHeight-this.layoutHeight){var r=this.maxRowsCount;for(i=this.dataContentHeight;i>e;)i-=this.getRowHeight(r),r--;return r+1}r=t?0:this.frozenRowsCount;for(var n=0;n<e+i;)n+=this.getRowHeight(r)*this._scaleY,r++;return r},i.prototype.getColIndexAtPosition=function(e,t){void 0===t&&(t=!1);var i=e/this.dataContentWidth*(this.layoutWidth/this._scaleX-this.layoutWidth)*this._scaleX;if(1!=this._scaleX&&e+i>=this.dataContentWidth-this.layoutWidth){var r=this.maxColsCount;for(i=this.dataContentWidth;i>e;)i-=this.getColWidth(r),r--;return r+1}r=t?0:this.frozenColsCount;for(var n=0;n<e+i;)n+=this.getColWidth(r)*this._scaleX,r++;return r},i.prototype.getVisibleRowsCount=function(e){for(var t=0,i=0,r=this.dataHeight;i<r;)i+=this.getRowHeight(e+t),t++;return t},i.prototype.getVisibleColsCount=function(e){for(var t=0,i=0,r=this.dataWidth;i<r;)i+=this.getColWidth(e+t),t++;return t},Object.defineProperty(i.prototype,"dataContentWidth",{get:function(){return 0<=this._dataContentWidth?this._dataContentWidth:this._dataContentWidth=1>this._scaleX?this._scaleTreshold:this.calcRangeWidth(this.frozenColsCount,this.frozenColsCount+this.dataColsCount)},enumerable:!0,configurable:!0}),i.prototype.calcRangeWidth=function(e,t){if(e>=t)return 0;var r,n=0,o=0,s=0;for(r in this._colsWidth)s=parseInt(r),!isNaN(s)&&!isNaN(this._colsWidth[s])&&s>=e&&s<t&&(o++,n+=this.getColWidth(s));return n+=((s=Math.min(t,this.maxColsCount))-e-o)*(0<this.cellMaxWidth?Math.min(this.cellMaxWidth,i.CELL_WIDTH):i.CELL_WIDTH),t>=this.maxColsCount&&(n+=(t-this.maxColsCount)*this.getColWidth(t)),n},Object.defineProperty(i.prototype,"dataContentHeight",{get:function(){return 0<=this._dataContentHeight?this._dataContentHeight:this._dataContentHeight=1>this._scaleY?this._scaleTreshold:this.calcRangeHeight(this.frozenRowsCount,this.frozenRowsCount+this.dataRowsCount)},enumerable:!0,configurable:!0}),i.prototype.calcRangeHeight=function(e,t){if(e>=t)return 0;var r,n=0,o=0,s=0;for(r in this._rowsHeight)s=parseInt(r),!isNaN(s)&&!isNaN(this._rowsHeight[s])&&s>=e&&s<t&&(o++,n+=this.getRowHeight(s));return n+(t-e-o)*(0<this.cellMaxHeight?Math.min(this.cellMaxHeight,i.CELL_HEIGHT):i.CELL_HEIGHT)},i.prototype.clearCache=function(){this._dataContentWidth=this._dataContentHeight=-1},Object.defineProperty(i.prototype,"minDataWidth",{get:function(){for(var e=0,t=this.frozenColsCount+this.dataColsCount,r=this.frozenColsCount;r<t;r++)if((e+=this.getColWidth(r))>i.MIN_DATA_WIDTH)return i.MIN_DATA_WIDTH;return e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rowHeadersWidth",{get:function(){for(var e=this.getSheetHeaderWidth(),t=0;t<this.frozenColsCount;t++)e+=this.getColWidth(t);return e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"colHeadersHeight",{get:function(){for(var e=this.getSheetHeaderHeight(),t=0;t<this.frozenRowsCount;t++)e+=this.getRowHeight(t);return e},enumerable:!0,configurable:!0}),i.prototype.getSheetHeaderWidth=function(){return e.model._options.OptionsManager.showHeaders?this._sheetHeaderWidth:0},i.prototype.getSheetHeaderHeight=function(){return e.model._options.OptionsManager.showHeaders?this._sheetHeaderHeight:0},i.prototype.getColIndexWithUndefinedWidth=function(){for(var e=this.frozenColsCount;e<this.dataColsCount;e++)if(!this.isColWidthDefined(e))return e;return null},i.prototype.getColIndicesWithUndefinedWidth=function(e){for(var t=[],i=this.frozenColsCount;i<this.dataColsCount&&(this.isColWidthDefined(i)||(t.push(i),!(t.length>=e)));i++);return t},i.prototype.isColWidthDefined=function(e,t){return void 0===t&&(t=!0),!isNaN(this._colsWidth[e])||!!t&&!isNaN(this._colsWidthPending[e])},Object.defineProperty(i.prototype,"hasHorizontalScroll",{get:function(){return this.dataContentWidth+(this.dataContentHeight>this.dataHeight?this.scrollBarSize:0)>this.dataWidth},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"hasVerticalScroll",{get:function(){return this.dataContentHeight+(this.dataContentWidth>this.dataWidth?this.scrollBarSize:0)>this.dataHeight},enumerable:!0,configurable:!0}),i.prototype.getRowY=function(t,i){return void 0===i&&(i=!1),(e.model._options.OptionsManager.showHeaders&&i?this.getSheetHeaderHeight():0)+this.calcRangeHeight(i?0:this.frozenRowsCount,t)},i.prototype.getColX=function(t,i){return void 0===i&&(i=!1),(e.model._options.OptionsManager.showHeaders&&i?this.getSheetHeaderWidth():0)+this.calcRangeWidth(i?0:this.frozenColsCount,t)},Object.defineProperty(i.prototype,"canDrawAll",{get:function(){return!s.browserVersion().isEdge&&!s.browserVersion().isMsie&&500>this.maxColsCount*this.maxRowsCount},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"canDrawSmooth",{get:function(){return!s.browserVersion().isEdge&&!s.browserVersion().isMsie&&(this.hasVerticalScroll||this.hasHorizontalScroll)&&1e5>this.maxColsCount*this.maxRowsCount},enumerable:!0,configurable:!0}),i.prototype.getBoundTop=function(e){return void 0===e&&(e=!1),this.canDrawAll?this.frozenRowsCount:e?Math.max(this.frozenRowsCount,this.firstDataRowIdx-i.ROWS_OFFSET):Math.max(this.frozenRowsCount,this.firstDataRowIdx)},i.prototype.getBoundLeft=function(e){return void 0===e&&(e=!1),this.canDrawAll?this.frozenColsCount:e?Math.max(this.frozenColsCount,this.firstDataColIdx-i.COLS_OFFSET):Math.max(this.frozenColsCount,this.firstDataColIdx)},i.prototype.getBoundBottom=function(e){void 0===e&&(e=!1);var t=this.getVisibleRowsCount(this.firstDataRowIdx);return this.canDrawAll?this.hasVerticalScroll?this.maxRowsCount:this.firstDataRowIdx+t:e?Math.min(this.firstDataRowIdx+t+(this.hasVerticalScroll?i.ROWS_OFFSET:0),this.hasVerticalScroll?this.maxRowsCount:Number.MAX_VALUE):this.firstDataRowIdx+t},i.prototype.getBoundRight=function(e){void 0===e&&(e=!1);var t=this.getVisibleColsCount(this.firstDataColIdx);return this.canDrawAll?this.hasHorizontalScroll?this.maxColsCount:this.firstDataColIdx+t:e?Math.min(this.firstDataColIdx+t+(this.hasHorizontalScroll?i.COLS_OFFSET:0),this.hasHorizontalScroll?this.maxColsCount:Number.MAX_VALUE):this.firstDataColIdx+t},i.prototype.isOnColEdge=function(e){return void 0===e&&(e=NaN),isNaN(e)&&(e=this.getBoundRight()),0<this.scrollLeft&&e>=this.maxColsCount},i.prototype.isOnRowEdge=function(e){return void 0===e&&(e=NaN),isNaN(e)&&(e=this.getBoundBottom()),0<this.scrollTop&&e>=this.maxRowsCount},i.prototype.getColEdgeOffset=function(e){return void 0===e&&(e=NaN),isNaN(e)&&(e=this.firstDataColIdx),this.isOnColEdge()?this.dataContentWidth-this.scrollLeft-this.calcRangeWidth(e,this.maxColsCount):0},i.prototype.getRowEdgeOffset=function(e){return void 0===e&&(e=NaN),isNaN(e)&&(e=this.firstDataRowIdx),this.isOnRowEdge()?this.dataContentHeight-this.scrollTop-this.calcRangeHeight(e,this.maxRowsCount):0},i.prototype.getRowIdxByRelativePosition=function(t,i){if(t<this.gridStartY)return NaN;if(e.model._options.OptionsManager.showHeaders&&t<this.gridStartY+this.getSheetHeaderHeight())return-1;var r=0,n=this.gridStartY+this.getSheetHeaderHeight();if(t>this.colHeadersHeight)if(r=this.firstDataRowIdx,n=this.gridStartY+this.colHeadersHeight,i&&r>this.frozenRowsCount){var o=this.scrollTop-this.getRowY(r-1);0<o&&(n-=o,r--)}else i||(t-=this.getRowEdgeOffset());for(;n<t;)n+=this.getRowHeight(r),r++;return r-1},i.prototype.getColIdxByRelativePosition=function(t,i){if(e.model._options.OptionsManager.showHeaders&&t<this.getSheetHeaderWidth())return-1;var r=0,n=this.getSheetHeaderWidth();if(t>this.rowHeadersWidth)if(r=this.firstDataColIdx,n=this.rowHeadersWidth,i&&r>this.frozenColsCount){var o=this.scrollLeft-this.getColX(r-1);0<o&&(n-=o,r--)}else i||(t-=this.getColEdgeOffset());for(;n<t;)n+=this.getColWidth(r),r++;return r-1},i.prototype.getRelativeRowY=function(e,t,i){void 0===i&&(i=!0);var r=0,n=(i?this.gridStartY:0)+this.getSheetHeaderHeight();return e>this.frozenRowsCount&&(n=(i?this.gridStartY:0)+this.colHeadersHeight,(r=this.firstDataRowIdx)<=e&&(n+=t?this.getRowY(this.firstDataRowIdx)-this.scrollTop:this.getRowEdgeOffset())),n+this.calcRangeHeight(r,e)},i.prototype.getRelativeColX=function(e,t){var i=0,r=this.getSheetHeaderWidth();return e>this.frozenColsCount&&(r=this.rowHeadersWidth,(i=this.firstDataColIdx)<=e&&(r+=t?this.getColX(this.firstDataColIdx)-this.scrollLeft:this.getColEdgeOffset())),r+this.calcRangeWidth(i,e)},i.prototype.isRowHeightDefault=function(e){return isNaN(this._rowsHeight[e])},Object.defineProperty(i.prototype,"freeSpaceRight",{get:function(){return this.scrollLeft+this.dataWidth-this.dataContentWidth-this.scrollBarWidth},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"freeSpaceTop",{get:function(){return this.scrollTop+this.dataHeight-this.dataContentHeight-this.scrollBarHeight},enumerable:!0,configurable:!0}),i.ROWS_OFFSET=5,i.COLS_OFFSET=5,i.CELL_WIDTH=100,i.CELL_HEIGHT=30,i.CELL_MIN_WIDTH=50,i.CELL_MIN_HEIGHT=30,i.SHEET_HEADER_HEIGHT=25,i.SHEET_HEADER_WIDTH=25,i.MIN_DATA_WIDTH=200,i}(),r.GridCoords=n}(n||(n={})),function(e){var t;!function(t){var i,n;i=t.sheet||(t.sheet={}),n=function(n){function o(e,t){var i=n.call(this,"div")||this;return i._isDirty=!1,i.cell=new h,i._coords=e,i._getDataFunc=t,i.element.addEventListener("click",(function(e){return i.onMouseEvent(e)})),i}return a(o,n),o.prototype.calculateSizes=function(e){void 0===e&&(e=!1);for(var t=!1,i=this.element.children,r=0;r<i.length;r++)for(var n=i.item(r),o=(t=this.updateRowHeight(n,!0)||t,n=n.children,0);o<n.length;o++)t=this.updateColWidth(n.item(o),e)||t;this._isDirty=t},Object.defineProperty(o.prototype,"isDirty",{get:function(){return this._isDirty},enumerable:!0,configurable:!0}),o.prototype.updateRowHeight=function(e,t){if(void 0===t&&(t=!1),null!=this._coords){var r=!1,n=parseInt(e.getAttribute("data-r"));if(isNaN(n)||this._coords.isRowHeightExplicit(n))return!1;var o=e.clientHeight;return this._coords.getRowHeight(n)<o?(this._coords.setRowHeight(n,Math.round(o+1),t),r=!0):o<=i.GridCoords.CELL_HEIGHT&&this._coords.setRowHeight(n,i.GridCoords.CELL_HEIGHT,t),r}},o.prototype.updateColWidth=function(e,r){if(void 0===r&&(r=!1),null!=this._coords){var n=!1,o=parseInt(e.getAttribute("data-c"));if(isNaN(o)||e.classList.contains(t.vo.GridStyleName.SHEET_HEADER)&&0<=o||this._coords.isColWidthExplicit(o))return!1;var s=e.clientWidth;return this._coords.getColWidth(o)<s?(this._coords.setColWidth(o,Math.round(s+2),r),n=!0):-1!=o&&s<=i.GridCoords.CELL_WIDTH&&this._coords.setColWidth(o,i.GridCoords.CELL_WIDTH,r),n}},o.prototype.createCell=function(i,r,n){void 0===n&&(n=!1);var o=this._getDataFunc?this._getDataFunc(i,r):null;this.cell.clear(),this.cell.tag="div",this.cell.addClass(t.vo.GridStyleName.CELL);var s=i>=this._coords.maxRowsCount||r>=this._coords.maxColsCount;if(!o&&s&&this.cell.addClass(t.vo.GridStyleName.CELL_EMPTY),o&&o.isRowHeader&&(this.cell.addClass(t.vo.GridStyleName.HEADER),this.cell.addClass(t.vo.GridStyleName.HEADER_ROW),this.cell.addClass(t.vo.GridStyleName.LEVEL+o.level)),o&&o.isColumnHeader&&(this.cell.addClass(t.vo.GridStyleName.HEADER),this.cell.addClass(t.vo.GridStyleName.HEADER_COLUMN)),o&&o.isMeasureHeader&&this.cell.addClass(t.vo.GridStyleName.MEASURE_HEADER),o&&o.isTotal&&this.cell.addClass(t.vo.GridStyleName.TOTAL),o&&o.isGrandTotal&&this.cell.addClass(t.vo.GridStyleName.GRAND_TOTAL),o&&o.expanded&&(this.cell.addClass(t.vo.GridStyleName.EXPANDED),this.cell.text+=this.createIcon(t.vo.GridStyleName.EXPANDED_ICON,e.model._labels.Labels.TOOLTIPS_COLLAPSE_ICON)),o&&o.collapsed&&(this.cell.addClass(t.vo.GridStyleName.COLLAPSED),this.cell.text+=this.createIcon(t.vo.GridStyleName.COLLAPSED_ICON,e.model._labels.Labels.TOOLTIPS_EXPAND_ICON)),this.cell.text+=o?o.label:"",o&&(o.drilledUp||o.drilledDown)&&(this.cell.text+='<span class="'+t.vo.GridStyleName.HIERARCHY+'" title="'+(o.drilledUp?e.model._labels.Labels.TOOLTIPS_DRILL_DOWN:e.model._labels.Labels.TOOLTIPS_DRILL_UP)+'">'+o.getDrillLabel()+"</span>",o.drilledUp&&this.cell.addClass(t.vo.GridStyleName.DRILLED_UP),o.drilledDown&&this.cell.addClass(t.vo.GridStyleName.DRILLED_DOWN)),o&&o.isColumnHeader&&(o.sortable&&!o.isEmpty&&(this.cell.text=o.sortedAsc?this.cell.text+this.createIcon([t.vo.GridStyleName.SORT_ICON,t.vo.GridStyleName.V_SORT_ASC],e.model._labels.Labels.TOOLTIPS_SORTED_ASC):o.sortedDesc?this.cell.text+this.createIcon([t.vo.GridStyleName.SORT_ICON,t.vo.GridStyleName.V_SORT_DESC],e.model._labels.Labels.TOOLTIPS_SORTED_DESC):this.cell.text+this.createIcon([t.vo.GridStyleName.SORT_ICON,t.vo.GridStyleName.V_SORT_ICON],e.model._labels.Labels.TOOLTIPS_SORT_ICON)),o.isEmpty&&this.cell.addClass(t.vo.GridStyleName.CELL_EMPTY),o.isEmpty||this.cell.addClass(t.vo.GridStyleName.V_SORT)),o&&o.isRowHeader&&(o.sortable&&!o.isEmpty&&(this.cell.text=o.sortedAsc?this.cell.text+this.createIcon([t.vo.GridStyleName.SORT_ICON,t.vo.GridStyleName.H_SORT_ASC],e.model._labels.Labels.TOOLTIPS_SORTED_ASC):o.sortedDesc?this.cell.text+this.createIcon([t.vo.GridStyleName.SORT_ICON,t.vo.GridStyleName.H_SORT_DESC],e.model._labels.Labels.TOOLTIPS_SORTED_DESC):this.cell.text+this.createIcon([t.vo.GridStyleName.SORT_ICON,t.vo.GridStyleName.H_SORT_ICON],e.model._labels.Labels.TOOLTIPS_SORT_ICON)),this.cell.addClass(t.vo.GridStyleName.H_SORT)),this.cell.attr["data-c"]=r,this.cell.attr["data-r"]=i,0!=r||e.model._options.OptionsManager.showHeaders||(this.cell.style.height=this._coords.getRowHeight(i)+"px"),o&&o.style){for(var a=0;a<o.style.styleNames.length;a++)this.cell.addClass(o.style.styleNames[a]);var l;for(l in a=o.style.css)this.cell.style[l]=a[l]}return this.setCellSize(this.cell,i,r,o&&o.isValue),n&&(this.cell.style.top=this._coords.getRowY(i,i<this._coords.frozenRowsCount)+"px",this.cell.style.left=this._coords.getColX(r,r<this._coords.frozenColsCount)+"px"),null==t.vo.GridCell.customizeCellFunction||s||(null==o&&((o=new t.vo.GridCell).rowIdx=i,o.colIdx=r),t.vo.GridCell.customizeCellFunction(this.cell.node,o.toObject())),this.cell},o.prototype.isCellEmpty=function(e,t){if(this._getDataFunc){var i=this._getDataFunc(e,t);return s.nullOrUndefined(i)||s.nullOrEmpty(i.label)}return!0},o.prototype.setCellSize=function(e,t,i,r){void 0===r&&(r=!1),this._coords.isColWidthExplicit(i)||this._coords.isRowHeightExplicit(t)?(e.style.width=this._coords.getColWidth(i)+"px",e.style.height=this._coords.getRowHeight(t)+"px"):(e.style["min-width"]=this._coords.getColWidth(i)+"px",e.style[r?"height":"min-height"]=this._coords.getRowHeight(t)+"px"),!this._coords.isColWidthExplicit(i)&&0<this._coords.cellMaxWidth&&(e.style["max-width"]=this._coords.cellMaxWidth+"px"),!this._coords.isRowHeightExplicit(t)&&0<this._coords.cellMaxHeight&&(e.style["max-height"]=this._coords.cellMaxHeight+"px")},o.prototype.createIcon=function(e,i){void 0===i&&(i=null),e instanceof Array&&(e=e.join(" "));var r='<i class="'+t.vo.GridStyleName.ICON+" "+e+'"';return i&&(r+='title="'+i+'"'),r+"></i>"},o.prototype.createSheetHeaderCell=function(){return this.cell.clear(),this.cell.tag="div",this.cell.addClass(t.vo.GridStyleName.CELL),this.cell.addClass(t.vo.GridStyleName.SHEET_HEADER),this.cell.style.width=this._coords.getSheetHeaderWidth()+"px",this.cell.style.height=this._coords.getSheetHeaderHeight()+"px",this.cell},o.prototype.createColumnSheetHeaderCell=function(e,i){return void 0===i&&(i=!1),this.cell.clear(),this.cell.tag="div",this.cell.addClass(t.vo.GridStyleName.CELL),this.cell.addClass(t.vo.GridStyleName.SHEET_HEADER),this.cell.text+=e+1,this.cell.style.width=this._coords.getColWidth(e)+"px",0<this._coords.cellMaxWidth&&!this._coords.isColWidthExplicit(e)&&(this.cell.style["max-width"]=this._coords.cellMaxWidth+"px"),this.cell.style.height=this._coords.getSheetHeaderHeight()+"px",this.cell.attr["data-r"]=-1,this.cell.attr["data-c"]=e,i&&(this.cell.style.left=this._coords.getColX(e,!1)+"px"),this.cell},o.prototype.createRowSheetHeaderCell=function(e,i){return void 0===i&&(i=!1),this.cell.clear(),this.cell.tag="div",this.cell.addClass(t.vo.GridStyleName.CELL),this.cell.addClass(t.vo.GridStyleName.SHEET_HEADER),this.cell.text+=e+1,this.cell.style["min-width"]=this._coords.getSheetHeaderWidth()+"px",this.cell.style.height=this._coords.getRowHeight(e)+"px",this.cell.style["line-height"]=this._coords.getRowHeight(e)-2+"px",0<this._coords.cellMaxHeight&&!this._coords.isRowHeightExplicit(e)&&(this.cell.style["max-height"]=this._coords.cellMaxHeight+"px"),this.cell.attr["data-r"]=e,this.cell.attr["data-c"]=-1,i&&(this.cell.style.top=this._coords.getRowY(e,!1)+"px"),this.cell},o.prototype.getCellByPosition=function(e,i){var r=this._coords.getColIndexAtPosition(e)-1,n=this._coords.getRowIndexAtPosition(i)-1,o=null;return null!=this._getDataFunc&&(o=this._getDataFunc(n,r)),null==o&&((o=new t.vo.GridCell).rowIdx=n,o.colIdx=r),o},o.prototype.getCellByElement=function(e){for(;!e.hasClass(t.vo.GridStyleName.CELL);)if(null==(e=e.parent))return null;var i=parseInt(e.attr("data-c"));e=parseInt(e.attr("data-r"));var r=null;return null!=this._getDataFunc&&(r=this._getDataFunc(e,i)),null==r&&((r=new t.vo.GridCell).rowIdx=e,r.colIdx=i),r},o.prototype.onMouseEvent=function(e){var i,n=r.UIElement.convert(e.target),o=this.getCellByElement(n)||this.getCellByPosition(e.offsetX,e.offsetY);switch(e.type){case"click":i=new t.GridClickEvent(o,n)}i&&this.dispatch(i)},o.prototype.dispose=function(){n.prototype.dispose.call(this),this._coords=this._getDataFunc=null},o}(r.UIElement),i.AbstractSheet=n}((t=e._view||(e._view={})).grid||(t.grid={}))}(n||(n={})),function(e){!function(e){!function(e){var t,i;i=function(i){function n(e,r){var n=i.call(this,e,r)||this;return n.SWITCH_TO_SMOOTH_DELAY=1e3,n._isSmooth=!1,n.addClass("wdr-sheet-canvas"),n._scrollPane=new l,n.addChild(n._scrollPane),n._bounds=new t.Bounds,n._boundsSmooth=new t.Bounds,n}return a(n,i),n.prototype.draw=function(){},n.prototype.drawSmooth=function(){},Object.defineProperty(n.prototype,"isSmooth",{get:function(){return this._isSmooth},set:function(e){this._isSmooth!=e&&(this._isSmooth=e,this.dispatchWith(this.isSmooth?n.EVENT_SWITCHED_TO_SMOOTH:n.EVENT_SWITCHED_TO_SIMPLE))},enumerable:!0,configurable:!0}),n.prototype.switchToSimple=function(){0!=this.isSmooth&&(this._bounds.reset(),this._boundsSmooth.reset(),this.draw())},n.prototype.clearBounds=function(){this._bounds.reset()},n.prototype.clearBoundsSmooth=function(){this._boundsSmooth.reset()},n.prototype.clearAllBounds=function(){this.clearBounds(),this.clearBoundsSmooth()},n.prototype.calculateSizes=function(e){void 0===e&&(e=!1);for(var t=!1,i=this._scrollPane.content.element.children,r=0;r<i.length;r++)for(var n=i.item(r),o=(t=this.updateRowHeight(n,e)||t,n=n.children,0);o<n.length;o++){var s=n.item(o);t=this.updateColWidth(s,e)||t}this._isDirty=t},n.prototype.calculateSizesSmooth=function(e){void 0===e&&(e=!1);for(var t=!1,i=this.scrollPane.placeholder.element.children,r=0;r<i.length;r++){var n=i.item(r);t=this.updateColWidth(n,e)||t,t=this.updateRowHeight(n,e)||t}this._isDirty=t},n.prototype.setContentSize=function(){this._scrollPane.content.width=this._width-this._coords.scrollBarWidth,this._scrollPane.content.height=this._height-this._coords.scrollBarHeight},Object.defineProperty(n.prototype,"scrollPane",{get:function(){return this._scrollPane},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"width",{get:function(){return this._width},set:function(e){this._width!=e&&(this.element.style.minWidth=e+"px",this._width=e,this._scrollPane.width=e)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"height",{get:function(){return this._height},set:function(e){this._height!=e&&(this.element.style.height=e+"px",this._height=e,this._scrollPane.height=e)},enumerable:!0,configurable:!0}),n.prototype.onMouseEvent=function(t){var i,n=null,o=null;if(t.target==this.scrollPane.placeholder.element?n=this.getCellByPosition(t.offsetX,t.offsetY):(o=r.UIElement.convert(t.target),n=this.getCellByElement(o)||this.getCellByPosition(t.offsetX,t.offsetY)),null!=n&&null!=o){var s=e.vo.GridCellElementType.BACKGROUND;o.hasClass(e.vo.GridStyleName.HIERARCHY)?s=e.vo.GridCellElementType.DRILL:o.hasClass(e.vo.GridStyleName.EXPANDED_ICON)||o.hasClass(e.vo.GridStyleName.COLLAPSED_ICON)?s=e.vo.GridCellElementType.LEFT_ICON:o.hasClass(e.vo.GridStyleName.SORT_ICON)?s=e.vo.GridCellElementType.RIGHT_ICON:o.hasClass(e.vo.GridStyleName.LINK)&&(s=e.vo.GridCellElementType.LINK),n.activeElementType=s}switch(t.type){case"click":i=new e.GridClickEvent(n,o);break;case"mousedown":i=new e.GridMouseDownEvent(n);break;case"mouseup":i=new e.GridMouseUpEvent(n);break;case"mousemove":i=new e.GridMouseMoveEvent(n)}i&&this.dispatch(i)},n.EVENT_SWITCHED_TO_SMOOTH="switched_to_smooth",n.EVENT_SWITCHED_TO_SIMPLE="switched_to_simple",n}((t=e.sheet||(e.sheet={})).AbstractSheet),t.BaseSheet=i}(e.grid||(e.grid={}))}(e._view||(e._view={}))}(n||(n={})),function(e){!function(e){!function(e){!function(e){var t=function(){function e(e,t,i,r){void 0===e&&(e=0),void 0===t&&(t=0),void 0===i&&(i=0),void 0===r&&(r=0),this.left=e,this.top=t,this.right=i,this.bottom=r}return e.prototype.set=function(e){this.left=e.left,this.top=e.top,this.right=e.right,this.bottom=e.bottom},e.prototype.reset=function(){this.bottom=this.right=this.top=this.left=0},e.prototype.contains=function(e){return this.left<=e.left&&this.top<=e.top&&this.right>=e.right&&this.bottom>=e.bottom},e.prototype.clone=function(){return new e(this.left,this.top,this.right,this.bottom)},e}();e.Bounds=t}(e.sheet||(e.sheet={}))}(e.grid||(e.grid={}))}(e._view||(e._view={}))}(n||(n={})),function(e){var t;!function(t){!function(t){var i=function(t){function i(e){void 0===e&&(e=null);var i=t.call(this,"div","wdr-auto-calculation-bar")||this;return i._listOfAggregations=["average","count","sum"],i.aggregationLables={},i._coordinates={right:-1e3,bottom:1e3},i._aggregationsElements=new s.AssociativeArray,i._listOfAggregations=null==e?i._listOfAggregations:e,i.initAggregationLabels(),i.setControls(),i}return a(i,t),i.prototype.initAggregationLabels=function(){this.aggregationLables.average=e.model._labels.Labels.AVERAGE_CAPTION,this.aggregationLables.sum=e.model._labels.Labels.SUM_CAPTION,this.aggregationLables.count=e.model._labels.Labels.COUNT_CAPTION},Object.defineProperty(i.prototype,"aggregationsElements",{get:function(){return this._aggregationsElements},enumerable:!0,configurable:!0}),i.prototype.setControls=function(){this._relativeContainer=new r.UIElement("div"),this._relativeContainer.css("position","relative"),this.addChild(this.relativeContainer),this._absoluteContainer=new r.UIElement("div","wdr-auto-calculation-bar-conainer"),this.absoluteContainer.css("position","absolute"),this._relativeContainer.addChild(this.absoluteContainer);for(var e=null,t=0;t<this.listOfAggregations.length;t++)(e=new n).setAggregationLabel(this.aggregationLables[this.listOfAggregations[t]]),this.absoluteContainer.addChild(e),this.aggregationsElements.addItem(this.listOfAggregations[t],e)},i.prototype.isCoordinationChanged=function(){return-1e3!=this._coordinates.right&&1e3!=this._coordinates.bottom},i.prototype.setValue=function(e,t){this.aggregationsElements.getItem(e).setAggregationResult(t)},i.prototype.hideAggregationElement=function(e){this.aggregationsElements.getItem(e).hide()},Object.defineProperty(i.prototype,"absoluteContainer",{get:function(){return this._absoluteContainer},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"relativeContainer",{get:function(){return this._relativeContainer},enumerable:!0,configurable:!0}),i.prototype.makeAggregationsVissible=function(){for(var e=null,t=0;t<this.aggregationsElements.length;t++)(e=this.aggregationsElements.getItemAt(t)).visible||e.show()},i.prototype.isAllAggregationsHidden=function(){for(var e=0;e<this.aggregationsElements.length;e++)if(this.aggregationsElements.getItemAt(e).visible)return!1;return!0},Object.defineProperty(i.prototype,"coordinates",{get:function(){return this._coordinates},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"listOfAggregations",{get:function(){return this._listOfAggregations},enumerable:!0,configurable:!0}),i.prototype.resetCoordinates=function(){this._coordinates={right:-1e3,bottom:1e3}},i.prototype.clear=function(){for(;0<this.aggregationsElements.length;)this.aggregationsElements.getItemAt(0).dispose(),this.aggregationsElements.removeItemAt(0);this.dispose()},i}(r.UIElement);t.AutoCalculationBar=i;var n=function(e){function t(){var t=e.call(this,"div","wdr-auto-calculation-bar-content")||this;return t.display="inline-block",t.setControls(),t}return a(t,e),t.prototype.setControls=function(){this.aggregationLabel=new r.UIElement("div","wdr-auto-calculation-bar-content-text"),this.addChild(this.aggregationLabel),this.aggregationResult=new r.UIElement("div","wdr-auto-calculation-bar-content-results"),this.addChild(this.aggregationResult)},t.prototype.show=function(){this.element.style.display=this.display},t.prototype.setAggregationLabel=function(e){this.aggregationLabel.text(e+":")},t.prototype.setAggregationResult=function(e){this.aggregationResult.text(e)},t}(r.UIElement);t.AutoCalculationBarContent=n}(t.sheet||(t.sheet={}))}((t=e._view||(e._view={})).grid||(t.grid={}))}(n||(n={})),function(e){var t;!function(t){!function(t){var i=function(){function t(){this._generalMeasure=null}return t.prototype.recalculateAutoCalculationBar=function(t,i){var r=0;this.generalMeasure=this.findGeneralMeasure(i);var n=null==this.generalMeasure?e.model.format.FormatManager.getFormat("").clone():this.generalMeasure.getFormat().clone();n.decimalPlaces=n.decimalPlaces==e.model.format.FormatManager.getDefaultFormat().decimalPlaces?2:n.decimalPlaces;for(var o=0;o<t.listOfAggregations.length;o++)0!=(r=this.calculateSelectedCells(t.listOfAggregations[o],i))?t.setValue(t.listOfAggregations[o],this.getFormatedValue(r,t.listOfAggregations[o],n.clone())):t.hideAggregationElement(t.listOfAggregations[o]);this.generalMeasure=null},t.prototype.getFormatedValue=function(t,i,r){var n="count"==i||null!=this.generalMeasure&&e.data_.consts.AggregationName.isCount(this.generalMeasure.aggregation),o="count"!=i&&null!=this.generalMeasure&&e.data_.consts.AggregationName.isPercent(this.generalMeasure.aggregation),a=null!=this.generalMeasure&&this.generalMeasure.type==e.data_.types.MeasureType.TIME&&e.data_.consts.AggregationName.validForTimeFormatting(this.generalMeasure.aggregation);return r.isPercent="count"!=i&&r.isPercent,r.currencySymbol=null!=this.generalMeasure&&this.generalMeasure.aggregation==e.data_.consts.AggregationName.INDEX?"":r.currencySymbol,a&&!isNaN(t)&&"count"!=i?s.StringUtils.toTime(t):s.NumberFormatter.format(t,r,n,o)},t.prototype.calculateSelectedCells=function(e,t){switch(e){case"sum":return this.calculateSelectedCellsSum(t);case"average":return this.calculateSelectedCellsAverage(t);case"count":return this.calculateSelectedCellsCount(t)}return 0},t.prototype.calculateSelectedCellsSum=function(e){for(var t=0,i=0;i<e.length;i++)t+=e[i].isValue&&!isNaN(e[i].value)&&this.isNumericType(e[i])?e[i].value:0;return t},t.prototype.calculateSelectedCellsAverage=function(e){for(var t=0,i=0,r=0;r<e.length;r++)e[r].isValue&&!isNaN(e[r].value)&&this.isNumericType(e[r])&&(t+=e[r].value,i++);return 0==i?0:t/i},t.prototype.calculateSelectedCellsCount=function(e){for(var t=0,i=0;i<e.length;i++)(e[i].isValue&&!isNaN(e[i].value)||e[i].isDrillThrough&&""!=e[i].label)&&t++;return t},t.prototype.findGeneralMeasure=function(e){for(var t=null,i=0;i<e.length;i++)if(this.isNumericType(e[i])&&null==t&&!s.nullOrUndefined(e[i].measure))t=e[i].measure;else if(this.isNumericType(e[i])&&null!=t&&t.uniqueName!=e[i].measure.uniqueName){t=null;break}return t},t.prototype.isNumericType=function(t){return t.isValue&&null!=t.measure&&(null==t.member||e.data_.types.MeasureType.COUNT!=t.measure.type)&&e.data_.types.MeasureType.DATE!=t.measure.type&&e.data_.types.MeasureType.DATETIME!=t.measure.type||!isNaN(t.value)},Object.defineProperty(t.prototype,"generalMeasure",{get:function(){return this._generalMeasure},set:function(e){this._generalMeasure=e},enumerable:!0,configurable:!0}),t}();t.AutoCalculationManager=i}(t.sheet||(t.sheet={}))}((t=e._view||(e._view={})).grid||(t.grid={}))}(n||(n={})),function(e){!function(e){!function(e){!function(e){var t=function(){function e(e){this.frozenCells=[],this.data=[],this.coords=e}return e.prototype.reset=function(){this.data=[],this.frozenCells=[]},e.prototype.setData=function(e,t,i,r){void 0===r&&(r=!1),i.rowIdx=e,i.colIdx=t,(t<this.coords.frozenColsCount||r)&&(null==this.data[e]&&(this.data[e]=[]),this.data[e][t]=i)},e.prototype.setDataFrozen=function(e,t,i){null==this.frozenCells[e]&&(this.frozenCells[e]=[]),this.frozenCells[e][t]=i},e.prototype.positionFrozenCells=function(e){if(null!=this.frozenCells[e]){for(var t=[],i=!1,r=0;r<this.frozenCells[e].length;r++){if(null!=this.frozenCells[e][r]||!i){var n=this.frozenCells[e][r];null!=n&&(n.colIdx=t.length),t.push(n)}null!=this.frozenCells[e][r]&&(i=!0)}this.frozenCells[e]=t}},e.prototype.cellExists=function(e,t){return void 0===this.data[e]&&(this.data[e]=[]),void 0!==this.data[e][t]},e.prototype.getData=function(e,t,i){if(void 0===i&&(i=!0),0==this.cellExists(e,t)){var r=this.getDataFunction(e,t);if(null!=r&&(r.rowIdx=e,r.colIdx=t),!i)return r;this.data[e][t]=r}return null===this.data[e][t]?void 0:this.data[e][t]},e.prototype.clearDataRow=function(e){if(e<this.coords.frozenRowsCount)for(var t=this.data[e]?this.data[e].length:0,i=1;i<t;i++)this.data[e]&&(this.data[e][i]=null);else this.data[e]&&(this.data[e]=null)},e.prototype.clearDataColumn=function(e){for(var t=this.data.length,i=0;i<t;i++)0==e&&i<this.coords.frozenRowsCount||this.data[i]&&(this.data[i][e]=null)},e.prototype.getDataFrozen=function(e,t){return this.frozenCells[e]&&this.frozenCells[e][t]?this.frozenCells[e][t]:null},e.prototype.clearCell=function(e,t){null!=this.data[e]&&(this.data[e][t]=this.getData(e,t))},e.prototype.dispose=function(){this.reset(),this.getDataFunction=null},e}();e.SheetDataProvider=t}(e.sheet||(e.sheet={}))}(e.grid||(e.grid={}))}(e._view||(e._view={}))}(n||(n={})),function(e){var t;!function(t){!function(t){var i=function(){function i(e){var i=this;this._to=this._from=null,this._isFocused=!1,this.listOfSelectedCells=new s.AssociativeArray,this._rowsSelectedSet={},this._columnsSelectedSet={},this.focusHandler=function(){i._isFocused=!0},this.blurHandler=function(){i._isFocused=!1},this.keydownHandler=function(e){return i.onKeyDown(e)},this.gridLayout=e,this.gridLayout.element.setAttribute("tabindex","0"),this.gridLayout.element.addEventListener("focus",this.focusHandler),this.gridLayout.element.addEventListener("focusin",this.focusHandler),this.gridLayout.element.addEventListener("blur",this.blurHandler),this.gridLayout.element.addEventListener("focusout",this.blurHandler),this.coords=this.gridLayout.coords,this.selectionCanvas=new t.SelectionCanvas(this,this.gridLayout),this.selectedCellsCalculator=new t.AutoCalculationManager,this.keyboardListener=s.KeyboardListener.getInstance(),this.keyboardListener.addEventListener(s.KeyboardEvent.KEY_DOWN,this.keydownHandler)}return i.prototype.dispose=function(){this.gridLayout.element&&this.gridLayout.element.removeEventListener("focus",this.focusHandler),this.gridLayout.element&&this.gridLayout.element.removeEventListener("blur",this.blurHandler),null!=this.listOfSelectedCells&&0<this.listOfSelectedCells.length&&this.clearMultySelect(),this.keyboardListener.removeEventListener(s.KeyboardEvent.KEY_DOWN,this.keydownHandler),this.keyboardListener=this.gridLayout=null,this.selectionCanvas.dispose()},i.prototype.draw=function(){this.selectionCanvas.redraw()},i.prototype.preDraw=function(e,t){this.runSelect(e,t),this.draw()},i.prototype.preDrawHeader=function(e,i){this.selectionCanvas.isCtrlPressed||(null==this.selectionCanvas.selectedHeader&&(this.selectionCanvas.selectedHeader=new t.SelectionCanvasElement(this.gridLayout)),this.selectionCanvas.selectedHeader.cellKey=e.toString()+"|"+i.toString(),this.draw())},i.prototype.select=function(e,t){this.deselect(),this._from=e,this._to=t,this.preDraw(e,t)},i.prototype.runSelect=function(e,i){if(null!=this.selectionCanvas.selectedHeader&&(this.selectionCanvas.selectedHeader.remove(),this.selectionCanvas.selectedHeader=null),!this.selectionCanvas.isCtrlPressed||this.isCoordinatesValid(e,i))if(this.listOfSelectedCells.keyExists(this.composeCellKey(e,i)))null!=(r=this.listOfSelectedCells.getItem(this.composeCellKey(e,i))).rowOverlay&&delete this._rowsSelectedSet[e.y.toString()],null!=r.colOverlay&&delete this._columnsSelectedSet[e.x.toString()],r.remove(),this.listOfSelectedCells.removeItem(this.composeCellKey(e,i));else if(null!=e&&null!=i){var r=new t.SelectionCanvasElement(this.gridLayout);r.cellKey=this.composeCellKey(e,i),this.listOfSelectedCells.addItem(r.cellKey,r)}},i.prototype.clearMultySelect=function(){for(;0<this.listOfSelectedCells.length;)this.listOfSelectedCells.getItemAt(0).remove(),this.listOfSelectedCells.removeItemAt(0);this._rowsSelectedSet={},this._columnsSelectedSet={}},i.prototype.composeCellKey=function(e,t){return e.x.toString()+"|"+e.y.toString()+"|"+t.x.toString()+"|"+t.y.toString()},i.prototype.decomposeCellKey=function(t){var i={};return 4==(t=t.split("|")).length?(i.from=new e._view.grid.sheet.Point(parseInt(t[0]),parseInt(t[1])),i.to=new e._view.grid.sheet.Point(parseInt(t[2]),parseInt(t[3]))):2==t.length&&(i.row=parseInt(t[0]),i.column=parseInt(t[1])),i},i.prototype.isArea=function(e){return!(e=this.decomposeCellKey(e.cellKey)).from.equals(e.to)},i.prototype.isPointInArea=function(e){return this._rowsSelectedSet.hasOwnProperty(e.y.toString())&&this._columnsSelectedSet.hasOwnProperty(e.x.toString())&&this._rowsSelectedSet[e.y.toString()]==t.CellType.AREA&&this._columnsSelectedSet[e.x.toString()]==t.CellType.AREA},i.prototype.isCoordinatesValid=function(e,t){return!(null==e||null==t||!e.equals(t)||this.isPointInArea(e)||this.isPointInArea(t)||0>e.x*e.y||0>t.x*t.y)},i.prototype.selectAll=function(){this.select(new r(0,0),new r(this.coords.getBoundRight(),this.coords.getBoundBottom()))},i.prototype.selectTo=function(e){if(null!=this._from&&!this._from.equals(e)){var t=this._from;this.deselect(),this._from=t,this._to=e,this.preDraw(t,e)}},i.prototype.selectRow=function(e){this.deselect(),this.preDrawHeader(e,-1)},i.prototype.selectColumn=function(e){this.deselect(),this.preDrawHeader(-1,e)},i.prototype.deselect=function(){!this.selectionCanvas.isCtrlPressed&&0<this.listOfSelectedCells.length&&this.clearMultySelect(),null!=this.selectionCanvas.selectedHeader&&(this.selectionCanvas.selectedHeader.remove(),this.selectionCanvas.selectedHeader=null),this._to=this._from=null},i.prototype.clear=function(){this.deselect(),this.draw()},i.prototype.isAutoCalculationBarAvailable=function(){return 1<this.selectedCells.length||null!=this.selectedCells.getItemAt(0)&&this.isArea(this.selectedCells.getItemAt(0))},Object.defineProperty(i.prototype,"selectedCells",{get:function(){return this.listOfSelectedCells},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"to",{get:function(){return this._to},set:function(e){this._to=e},enumerable:!0,configurable:!0}),i.prototype.fromCol=function(e,t){return e&&t?Math.min(e.x,t.x):-1},i.prototype.toCol=function(e,t){return e&&t?Math.max(e.x,t.x):-1},i.prototype.fromRow=function(e,t){return e&&t?Math.min(e.y,t.y):-1},i.prototype.toRow=function(e,t){return e&&t?Math.max(e.y,t.y):-1},i.prototype.move=function(e,t,i){switch(void 0===t&&(t=!1),void 0===i&&(i=!1),e){case 37:this.moveLeft(t,i);break;case 38:this.moveUp(t,i);break;case 39:this.moveRight(t,i);break;case 40:this.moveDown(t,i)}},Object.defineProperty(i.prototype,"rowsSelectedSet",{get:function(){return this._rowsSelectedSet},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"columnsSelectedSet",{get:function(){return this._columnsSelectedSet},enumerable:!0,configurable:!0}),i.prototype.moveLeft=function(e,t){void 0===t&&(t=!1),this.moveHorizontal(-1,t)},i.prototype.moveRight=function(e,t){void 0===t&&(t=!1),this.moveHorizontal(1,t)},i.prototype.moveUp=function(e,t){void 0===t&&(t=!1),this.moveVertical(-1,t)},i.prototype.moveDown=function(e,t){void 0===t&&(t=!1),this.moveVertical(1,t)},i.prototype.moveHorizontal=function(e,t){if(void 0===t&&(t=!1),1==this.listOfSelectedCells.length){var i=(o=this.decomposeCellKey(this.listOfSelectedCells.getItemAt(0).cellKey)).from,n=o.to,o=t?n.x:i.x,s=t?n.x:i.x,a=0;(o=Math.max(0,Math.min(o+e,this.coords.maxColsCount-1)))<this.coords.firstDataColIdx?(a=Math.max(o,this.coords.frozenColsCount),this.gridLayout.scrollToColumn(a)):o>=this.coords.getVisibleColsCount(this.coords.firstDataColIdx)+this.coords.firstDataColIdx-1&&this.gridLayout.scrollToColumn((a=this.coords.firstDataColIdx+(o-s))+1),n=t?n.y:i.y,s=o,this.select(new r(t?i.x:o,i.y),new r(s,n))}},i.prototype.moveVertical=function(e,t){if(void 0===t&&(t=!1),1==this.listOfSelectedCells.length){var i=(o=this.decomposeCellKey(this.listOfSelectedCells.getItemAt(0).cellKey)).from,n=o.to,o=t?n.y:i.y,s=t?n.y:i.y,a=0;(o=Math.max(0,Math.min(o+e,this.coords.maxRowsCount-1)))<this.coords.firstDataRowIdx?(a=Math.max(o,this.coords.frozenRowsCount),this.gridLayout.scrollToRow(a)):o>=this.coords.getVisibleRowsCount(this.coords.firstDataRowIdx)+this.coords.firstDataRowIdx-1&&this.gridLayout.scrollToRow((a=this.coords.firstDataRowIdx+(o-s))+1),s=o,n=t?n.x:i.x,this.select(new r(i.x,t?i.y:o),new r(n,s))}},Object.defineProperty(i.prototype,"autoCalculationManager",{get:function(){return this.selectedCellsCalculator},enumerable:!0,configurable:!0}),i.prototype.onKeyDown=function(e){if(null!=this.keyboardListener&&(this._isFocused||this.keyboardListener.isFocused)){var t=e.ctrlKey||e.metaKey;switch(e.keyCode){case 32:t||this.gridLayout.triggerCellAction(this.gridLayout.selectedCells[0]);break;case 65:t&&this.selectAll();break;case 37:case 38:case 39:case 40:this.move(e.keyCode,e.ctrlKey,e.shiftKey),e.originalEvent.preventDefault()}!t||e.altKey||e.shiftKey||this.keyboardListener.isFocused||this.copy()}},i.prototype.copy=function(){var e="";if(0<this.listOfSelectedCells.length)for(var t=null,i=(t=null,0);i<this.listOfSelectedCells.length;i++)null!=(t=this.listOfSelectedCells.getItemAt(i)).cellElement&&(t=this.decomposeCellKey(t.cellKey),e+=this.copyElement(t.from,t.to),i<this.listOfSelectedCells.length-1&&(e+="\n"));0<e.length&&this.keyboardListener.copy(e)},i.prototype.copyElement=function(e,t){var i="";if(null==e||null==t)return i;var r,n=Math.min(e.x,t.x),o=Math.max(e.x,t.x);r=Math.min(e.y,t.y);for(var s=Math.max(e.y,t.y),a=r;a<=s;a++){for(var l=n;l<=o;l++)l>n&&(i+="\t"),null==(r=this.gridLayout.getCell(a,l,!0,!0))&&null==(r=a<this.coords.firstDataRowIdx&&l>=this.coords.firstDataColIdx?this.gridLayout.getCell(a,l-this.coords.firstDataColIdx+this.coords.frozenColsCount,!0,!0):null)||(i+=null==r?"":r.label);a<s&&(i+="\n")}return i},i}();t.SelectionManager=i;var r=function(){function e(e,t){void 0===e&&(e=0),void 0===t&&(t=0),this.x=e,this.y=t}return e.prototype.equals=function(e){return e.x==this.x&&e.y==this.y},e}();t.Point=r}(t.sheet||(t.sheet={}))}((t=e._view||(e._view={})).grid||(t.grid={}))}(n||(n={})),function(e){var t;!function(t){!function(i){var n=function(){function n(e,t){var r=this;this._started=this.isCtrlPressed=!1,this._calculatedArea=this._selectedHeader=null,this.autoCalculationBarMargin=5,this.scrollbarSize=17,this.mouseEventHandler=function(e){return r.onMouseEvent(e)},this.mouseLeaveHandler=function(e){return r.onMouseLeave(e)},this.manager=e,this.gridLayout=t,this.coords=this.gridLayout.coords,this._calculatedArea=new i.AutoCalculationBar,this._calculatedArea.hide(),this.gridLayout.addChild(this._calculatedArea),this.gridLayout.element.addEventListener("mousedown",this.mouseEventHandler),this.gridLayout.element.addEventListener("mouseup",this.mouseEventHandler)}return Object.defineProperty(n.prototype,"started",{get:function(){return this._started},set:function(e){this._started=e,this.started||(this.gridLayout.element.removeEventListener("mousemove",this.mouseEventHandler),document.removeEventListener("mousemove",this.mouseLeaveHandler))},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"selectedHeader",{get:function(){return this._selectedHeader},set:function(e){this._selectedHeader=e},enumerable:!0,configurable:!0}),n.prototype.onMouseEvent=function(e){if(1==e.which){var i=r.UIElement.convert(e.target);if("mousedown"!=e.type||!(i.hasClass(t.vo.GridStyleName.FILTER_HEADER)||i.hasClass(t.vo.GridStyleName.FILTER_ICON)||i.hasClass(t.vo.GridStyleName.FILTERED_ICON)||null!=i.closest(".wdr-filters"))){var n=this.gridLayout.getOffset();if(i=e.clientX-n.left,n=e.clientY-n.top,!(i>this.coords.availableWidth||n>this.coords.gridStartY+this.coords.availableHeight||(n=this.coords.getRowIdxByRelativePosition(n,this.gridLayout.isSmooth),i=this.coords.getColIdxByRelativePosition(i,this.gridLayout.isSmooth),isNaN(n)||isNaN(i))))switch(this.isCtrlPressed=s.OSUtil.isWin&&e.ctrlKey||s.OSUtil.isMac&&e.metaKey,e.type){case"mousedown":this.onMouseDown(n,i);break;case"mousemove":this.onMouseMove(n,i);break;case"mouseup":this.onMouseUp(n,i)}}}},n.prototype.onMouseLeave=function(e){var t=r.UIElement.convert(this.gridLayout.element),i=e.clientX;e=e.clientY,(i<t.left||e<t.top||i>t.left+this.gridLayout.width||e>t.top+this.gridLayout.height)&&this.stopSelection()},n.prototype.select=function(e,t,r,n){this.started=!1,this.manager.select(new i.Point(t,e),new i.Point(n,r))},n.prototype.stopSelection=function(){this.started=!1},n.prototype.onMouseDown=function(e,t){this.started=!0,this.manager.select(new i.Point(t,e),new i.Point(t,e)),this.gridLayout.element.addEventListener("mousemove",this.mouseEventHandler),s.fmdocument.addEventListener("mousemove",this.mouseLeaveHandler)},n.prototype.onMouseUp=function(e,t){this.started&&(this.started=!1,-1==e?this.manager.selectColumn(t):-1==t?this.manager.selectRow(e):this.manager.selectTo(new i.Point(t,e)))},n.prototype.onMouseMove=function(e,t){this.started&&(!this.manager.to||this.manager.to.x==t&&this.manager.to.y==e||this.manager.selectTo(new i.Point(t,e)))},n.prototype.dispose=function(){this.gridLayout.element&&this.gridLayout.element.removeEventListener("mousedown",this.mouseEventHandler),this.gridLayout.element&&this.gridLayout.element.removeEventListener("mouseup",this.mouseEventHandler),this._calculatedArea.dispose(),this.coords=this.gridLayout=this.manager=null,null!=this.selectedHeader&&(this.selectedHeader.remove(),this.selectedHeader=null)},n.prototype.redraw=function(){var e=null,t=null;this._calculatedArea.resetCoordinates();for(var i=0;i<this.manager.selectedCells.length;i++)e=this.manager.selectedCells.getItemAt(i),t=this.manager.decomposeCellKey(this.manager.selectedCells.getKeyAt(i)),this._redraw(e,t.from,t.to);this._redrawAutoCalculationBar(this._calculatedArea),this.drawHeader(this.selectedHeader)},n.prototype.drawHeader=function(e){if(null!=e){e.hide();var t=this.manager.decomposeCellKey(e.cellKey);-1!=t.row&&this.drawSelectedRow(t.row,e),-1!=t.column&&this.drawSelectedColumn(t.column,e)}},n.prototype._redrawAutoCalculationBar=function(t){if(t.hide(),this.manager.isAutoCalculationBarAvailable()&&e.model._options.OptionsManager.showAutoCalculationBar&&t.isCoordinationChanged()&&null!=e.data_.Cube.getInstance()&&null!=e.data_.Cube.getInstance().structure_&&(t.makeAggregationsVissible(),this.updateAutoCalculationBar(t),!t.isAllAggregationsHidden())){t.show(),t.top=t.coordinates.bottom;for(var i=this.coords.getRelativeColX(this.coords.frozenColsCount,this.gridLayout.isSmooth),r=0,n=0;n<t.aggregationsElements.length;n++)r+=t.aggregationsElements.getItemAt(n).width;t.absoluteContainer.width=r=r+2*this.autoCalculationBarMargin+2*(t.aggregationsElements.length-1)*this.autoCalculationBarMargin,i-t.coordinates.right+r>this.coords.scrollLeft?t.coordinates.right=t.coordinates.left+r:i>t.coordinates.right-r?(t.absoluteContainer.css("left","auto"),t.absoluteContainer.right=0,r=t.coordinates.right-i):t.coordinates.rightRaw>=this.coords.availableWidth&&(t.absoluteContainer.css("left","right"),t.absoluteContainer.left=0,r=0>(r=r-(t.coordinates.rightRaw-this.coords.availableWidth)-1)?0:r),this.coords.gridStartY+this.coords.availableHeight<=t.coordinates.bottom+t.height&&(t.top=t.coordinates.bottom-this.scrollbarSize),t.left=t.coordinates.right-r,t.relativeContainer.width=r,t.width=r}},n.prototype.updateAutoCalculationBar=function(e){this.manager.isAutoCalculationBarAvailable()&&this.manager.autoCalculationManager.recalculateAutoCalculationBar(e,this.gridLayout.selectedCells)},n.prototype._redraw=function(t,i,r){t.hide();var n=Math.min(i.x,r.x),o=Math.min(i.y,r.y),s=Math.max(i.x,r.x);i=Math.max(i.y,r.y),e.model._options.OptionsManager.showHeaders&&this.drawHeaderSelection(n,s,o,i,t),r=this.coords.availableWidth;var a=this.coords.gridStartY+this.coords.availableHeight,l=Math.max(this.coords.gridStartY,this.coords.getRelativeRowY(o,this.gridLayout.isSmooth)-1),c=this.coords.getRelativeRowY(i+1,this.gridLayout.isSmooth),u=Math.min(a,c),h=Math.max(0,this.coords.getRelativeColX(n,this.gridLayout.isSmooth)-1),d=this.coords.getRelativeColX(s+1,this.gridLayout.isSmooth),A=Math.min(r,d),p=u-l,f=A-h;2>=f||2>=p?null!=t.cellElement&&t.cellElement.hide():h<r&&l<a?(null!=t.cellElement&&(t.cellElement.show(),t.cellElement.top=l,t.cellElement.left=h,t.cellElement.width=f,t.cellElement.height=p,this._calculatedArea.coordinates.bottom*this._calculatedArea.coordinates.right<=A*u&&(this._calculatedArea.coordinates.left=h,this._calculatedArea.coordinates.right=A,this._calculatedArea.coordinates.bottom=u,this._calculatedArea.coordinates.rightRaw=d)),o<this.coords.frozenRowsCount&&d>A&&(t.createColFix(),t.colFix.top=l,t.colFix.left=A,t.colFix.width=Math.min(d,this.coords.layoutWidth)-A,t.colFix.height=Math.min(u,this.coords.gridStartY+this.coords.colHeadersHeight)-l,t.colFix.toggleClass("wdr-clear-border-bottom",i>this.coords.frozenRowsCount),t.colFix.toggleClass("wdr-clear-border-right",d>this.coords.layoutWidth),t.colFix.removeClass("wdr-clear-border"),t.colFix.show()),n<this.coords.frozenColsCount&&c>u&&(t.createRowFix(),t.rowFix.top=u,t.rowFix.left=h,t.rowFix.width=Math.min(A,this.coords.rowHeadersWidth)-h,t.rowFix.height=Math.min(c,this.coords.layoutHeight)-u,t.rowFix.toggleClass("wdr-clear-border-bottom",c>this.coords.layoutHeight),t.rowFix.toggleClass("wdr-clear-border-right",s>this.coords.frozenColsCount),t.rowFix.removeClass("wdr-clear-border"),t.rowFix.show()),null!=t.cellElement&&(t.cellElement.toggleClass("wdr-clear-border-right",d>A),t.cellElement.toggleClass("wdr-clear-border-bottom",c>u))):null!=t.cellElement&&t.cellElement.hide()},n.prototype.drawSelectedRow=function(e,t){if(!isNaN(e)){null==t.rowOverlay&&t.createRowOverlay();var i=this.coords.getRelativeRowY(e,this.gridLayout.isSmooth),r=this.coords.getRelativeRowY(e+1,this.gridLayout.isSmooth),n=Math.min(this.coords.gridStartY+this.coords.availableHeight,r);i<this.coords.gridStartY+this.coords.availableHeight?(t.rowOverlay.left=0,t.rowOverlay.top=i,t.rowOverlay.width=this.coords.availableWidth,t.rowOverlay.height=n-i,t.rowOverlay.show(),r>n&&(t.createRowFix(),t.rowFix.top=n,t.rowFix.left=0,t.rowFix.width=this.coords.rowHeadersWidth,t.rowFix.height=Math.min(r,this.coords.layoutHeight)-n,t.rowFix.addClass("wdr-clear-border"),t.rowFix.show())):t.rowOverlay.hide()}},n.prototype.drawSelectedColumn=function(e,t){if(!isNaN(e)){null==t.colOverlay&&t.createColOverlay();var i=this.coords.getRelativeColX(e,this.gridLayout.isSmooth),r=this.coords.getRelativeColX(e+1,this.gridLayout.isSmooth),n=Math.min(this.coords.availableWidth,r);i<this.coords.availableWidth?(t.colOverlay.left=i,t.colOverlay.top=this.coords.gridStartY,t.colOverlay.width=n-i,t.colOverlay.height=this.coords.availableHeight,t.colOverlay.show(),r>n&&(t.createColFix(),t.colFix.top=this.coords.gridStartY,t.colFix.left=n,t.colFix.width=Math.min(r,this.coords.layoutWidth)-n,t.colFix.height=this.coords.colHeadersHeight,t.colFix.addClass("wdr-clear-border"),t.colFix.show())):t.colOverlay.hide()}},n.prototype.drawHeaderSelection=function(e,t,i,r,n){this.processHeaders(e,t,i,r,n),this.drawHeaderColumn(n.colOverlay,e,t),this.drawHeaderRow(n.rowOverlay,i,r)},n.prototype.processHeaders=function(e,t,i,r,n){if(!this.manager.rowsSelectedSet.hasOwnProperty(i.toString())){n.createRowOverlay();for(var s=i;s<=r;s++)this.manager.rowsSelectedSet[s.toString()]=i==r&&e==t?o.ONE_CELL:o.AREA}if(!this.manager.columnsSelectedSet.hasOwnProperty(e.toString()))for(n.createColOverlay(),s=e;s<=t;s++)this.manager.columnsSelectedSet[s.toString()]=i==r&&e==t?o.ONE_CELL:o.AREA},n.prototype.drawHeaderColumn=function(e,t,i){null!=e&&(t=this.coords.getRelativeColX(t,this.gridLayout.isSmooth),i=Math.min(this.coords.layoutWidth,this.coords.getRelativeColX(i+1,this.gridLayout.isSmooth)),t<this.coords.layoutWidth?(e.left=t,e.top=this.coords.gridStartY,e.width=i-t,e.height=this.coords.getSheetHeaderHeight(),e.show()):e.hide())},n.prototype.drawHeaderRow=function(e,t,i){null!=e&&(t=this.coords.getRelativeRowY(t,this.gridLayout.isSmooth),i=Math.min(this.coords.layoutHeight,this.coords.getRelativeRowY(i+1,this.gridLayout.isSmooth)),e.left=0,e.top=t,e.width=this.coords.getSheetHeaderWidth(),e.height=i-t,e.show())},n}();i.SelectionCanvas=n;var o=function(){function e(){}return e.ONE_CELL=1,e.AREA=2,e}();i.CellType=o,n=function(){function e(e){this.gridLayout=this._rowFix=this._colFix=this._rowOverlay=this._colOverlay=this._cellElement=null,this.gridLayout=e,this._cellElement=this.createUIElement()}return e.prototype.createUIElement=function(){var e=new r.UIElement("div","wdr-sheet-selection-canvas");return e.hide(),this.gridLayout.addChild(e),e},e.prototype.createCellElement=function(){null==this._cellElement&&(this._cellElement=this.createUIElement())},e.prototype.createColOverlay=function(){null==this._colOverlay&&(this._colOverlay=this.createUIElement(),this._colOverlay.addClass("wdr-sheet-selection-header"))},e.prototype.createRowOverlay=function(){null==this._rowOverlay&&(this._rowOverlay=this.createUIElement(),this._rowOverlay.addClass("wdr-sheet-selection-header"))},e.prototype.createRowFix=function(){null==this._rowFix&&(this._rowFix=this.createUIElement(),this._rowFix.addClass("wdr-clear-border-top"))},e.prototype.createColFix=function(){null==this._colFix&&(this._colFix=this.createUIElement(),this._colFix.addClass("wdr-clear-border-left"))},Object.defineProperty(e.prototype,"cellKey",{get:function(){return this._cellKey},set:function(e){this._cellKey=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rowFix",{get:function(){return this._rowFix},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"colFix",{get:function(){return this._colFix},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rowOverlay",{get:function(){return this._rowOverlay},set:function(e){this._rowOverlay=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"colOverlay",{get:function(){return this._colOverlay},set:function(e){this._colOverlay=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cellElement",{get:function(){return this._cellElement},set:function(e){this._cellElement=e},enumerable:!0,configurable:!0}),e.prototype.hide=function(){this.colOverlay&&this.colOverlay.hide(),this.rowOverlay&&this.rowOverlay.hide(),this.colFix&&this.colFix.hide(),this.rowFix&&this.rowFix.hide(),this.cellElement&&this.cellElement.hide()},e.prototype.remove=function(){null!=this.cellElement&&(this.cellElement.remove(),this._cellElement=null),null!=this.colOverlay&&(this.colOverlay.remove(),this._colOverlay=null),null!=this.rowOverlay&&(this.rowOverlay.remove(),this._rowOverlay=null),null!=this.colFix&&(this.colFix.remove(),this._colFix=null),null!=this.rowFix&&(this.rowFix.remove(),this._rowFix=null),this.gridLayout=null},e}(),i.SelectionCanvasElement=n}(t.sheet||(t.sheet={}))}((t=e._view||(e._view={})).grid||(t.grid={}))}(n||(n={}));var l=function(e){function t(){var t=e.call(this,"div","wdr-scroll-pane")||this;return t._placeholder=new r.UIElement("div","wdr-scroll-placeholder"),t._content=new r.UIElement("div","wdr-scroll-content"),t.addChild(t._content),t.addChild(t._placeholder),t}return a(t,e),Object.defineProperty(t.prototype,"contentWidth",{get:function(){return this._placeholder.width},set:function(e){this._placeholder.width=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"contentHeight",{get:function(){return this._placeholder.height},set:function(e){this._placeholder.height=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scrollLeft",{get:function(){return this.element.scrollLeft},set:function(e){this.element.scrollLeft=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scrollTop",{get:function(){return this.element.scrollTop},set:function(e){this.element.scrollTop=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"content",{get:function(){return this._content},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"placeholder",{get:function(){return this._placeholder},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"horizontalScroll",{set:function(e){this.element.style.overflowX=e?"scroll":"hidden"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"verticalScroll",{set:function(e){this.element.style.overflowY=e?"scroll":"hidden"},enumerable:!0,configurable:!0}),t}(r.UIElement);!function(e){var t;!function(t){!function(t){var i=function(t){function i(e){var i=t.call(this,e,null)||this;return i._coords=e,i}return a(i,t),i.prototype.draw=function(){var t=[],i=new h;if(e.model._options.OptionsManager.showHeaders){i.tag="div",i.addClass("wdr-row"),i.text+=this.createSheetHeaderCell().toHtml();for(var r=0;r<this._coords.frozenColsCount;r++)i.text+=this.createColumnSheetHeaderCell(r).toHtml();for(t.push(i.toHtml()),r=0;r<this._coords.frozenRowsCount;r++)i.text=this.createRowSheetHeaderCell(r).toHtml(),t.push(i.toHtml())}t=t.join(""),this.element.innerHTML!=t&&this.html(t)},i.prototype.clear=function(){},i}(t.AbstractSheet);t.SheetHeaders=i}(t.sheet||(t.sheet={}))}((t=e._view||(e._view={})).grid||(t.grid={}))}(n||(n={}));var c,u=function(){function e(e){void 0===e&&(e="div"),this.text=this.tag="",this.style={},this.attr={},this.classes=[],this.tag=e}return e.prototype.addClass=function(e){0>this.classes.indexOf(e)&&this.classes.push(e)},e.prototype.toHtml=function(){var e,t="<"+this.tag,i=[];for(e in this.style)i.push(e+":"+this.style[e]);for(var r in 0<i.length&&(t+=' style="'+i.join(";")+';"'),0<this.classes.length&&(t+=' class="'+this.classes.join(" ")+'"'),this.attr)t+=" "+r+'="'+this.attr[r]+'"';return t+">"+(this.text||"")+"</"+this.tag+">"},e}(),h=function(){function e(e){void 0===e&&(e="div"),this._node=new u,this.clear(),this.tag=e}return Object.defineProperty(e.prototype,"node",{get:function(){return this._node},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tag",{get:function(){return this.node.tag},set:function(e){this.node.tag=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this.node.text},set:function(e){this.node.text=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"style",{get:function(){return this.node.style},set:function(e){this.node.style=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"attr",{get:function(){return this.node.attr},set:function(e){this.node.attr=e},enumerable:!0,configurable:!0}),e.prototype.addClass=function(e){this.node.addClass(e)},e.prototype.clear=function(){this.tag="div",this.text="",this.style={},this.attr={},this.node.classes=[]},e.prototype.toHtml=function(e){void 0===e&&(e=!0);var t=this.node.toHtml();return e&&this.clear(),null!=n._view.grid.vo.GridCell.customizeCellFunction&&(t=n.model.XSSCheck.valid(t)?t:n.model.XSSCheck.validate(t)),t},e}();return function(e){!function(e){!function(e){!function(e){var t=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return a(i,t),i.prototype.draw=function(){this.setContentSize();var e=this.getBounds();if(this.isSmooth||this._coords.isOnRowEdge(e.bottom)||this._coords.isOnColEdge(e.right)||!this._bounds.contains(e)){var t=e.clone();if(0!=this._coords.maxColsCount&&(t.right=Math.min(t.right,this._coords.maxColsCount)),0!=this._coords.maxRowsCount&&(t.bottom=Math.min(t.bottom,this._coords.maxRowsCount)),!this.isSmooth||!this._boundsSmooth.contains(t)||!this._coords.canDrawAll&&(e.left>this._coords.frozenColsCount&&e.left<=this._boundsSmooth.left||e.top>this._coords.frozenRowsCount&&e.top<=this._boundsSmooth.top)){this._coords.isOnColEdge(e.right)&&(e.left=Math.max(e.left-1,this._coords.frozenColsCount)),this._coords.isOnRowEdge(e.bottom)&&(e.top=Math.max(e.top-1,this._coords.frozenRowsCount)),t=[];for(var i=new h,r=e.top;r<e.bottom;r++){i.tag="div",i.addClass("wdr-row"),i.attr["data-r"]=r;for(var n=e.left;n<e.right;++n)i.text+=this.createCell(r,n).toHtml();t.push(i.toHtml())}this.scrollPane.placeholder.html(""),this.scrollPane.placeholder.visible=this._coords.hasHorizontalScroll||this._coords.hasVerticalScroll,this.scrollPane.content.html(t.join("")),this.scrollPane.content.show(),t.length=0,this.isSmooth=!1,this._bounds.set(e)}}},i.prototype.adjustScrollPaneOffset=function(){this.scrollPane.content.left=this._coords.getColEdgeOffset(this._bounds.left),this.scrollPane.content.top=this._coords.getRowEdgeOffset(this._bounds.top)},i.prototype.drawSmooth=function(){var e=this.getBounds(!0);if(!(this.isSmooth&&this._coords.canDrawAll&&this._boundsSmooth.contains(e))){this._boundsSmooth=e,e=[];for(var t=this._boundsSmooth.top;t<this._boundsSmooth.bottom;t++){this._coords.getRowHeight(t);for(var i=this._boundsSmooth.left;i<this._boundsSmooth.right;++i)e.push(this.createCell(t,i,!0).toHtml())}this.scrollPane.placeholder.html(e.join("")),this.scrollPane.placeholder.show(),this.scrollPane.content.hide(),this.scrollPane.content.html(""),e=this.getBounds(),this.isSmooth||this._coords.isOnRowEdge(e.bottom)||(this.scrollPane.scrollTop=this._coords.getRowY(this._coords.firstDataRowIdx,!1)),this.isSmooth||this._coords.isOnColEdge(e.right)||(this.scrollPane.scrollLeft=this._coords.getColX(this._coords.firstDataColIdx,!1)),this.isSmooth=!0}},i.prototype.getBounds=function(t){void 0===t&&(t=!1);var i=new e.Bounds;return i.top=this._coords.getBoundTop(t),i.left=this._coords.getBoundLeft(t),i.bottom=this._coords.getBoundBottom(t),i.right=this._coords.getBoundRight(t),i},i.prototype.setContentSize=function(){this.scrollPane.contentWidth=Math.max(this._coords.dataContentWidth,this._coords.dataWidth-this._coords.scrollBarWidth),this.scrollPane.contentHeight=Math.max(this._coords.dataContentHeight,this._coords.dataHeight-this._coords.scrollBarHeight),this.scrollPane.content.right=this._coords.scrollBarWidth,this.scrollPane.content.bottom=this._coords.scrollBarHeight,this.scrollPane.horizontalScroll=this._coords.hasHorizontalScroll,this.scrollPane.verticalScroll=this._coords.hasVerticalScroll},i}(e.BaseSheet);e.DataSheet=t}(e.sheet||(e.sheet={}))}(e.grid||(e.grid={}))}(e._view||(e._view={}))}(n||(n={})),function(e){var t;!function(t){var i,r;r=function(r){function n(){return null!==r&&r.apply(this,arguments)||this}return a(n,r),n.prototype.draw=function(){this.setContentSize();var t=this.getBounds();if(this.isSmooth||this._coords.isOnRowEdge(t.bottom)||!this._bounds.contains(t)){var i=t.clone();if(0!=this._coords.maxRowsCount&&(i.bottom=Math.min(i.bottom,this._coords.maxRowsCount)),!this.isSmooth||!this._boundsSmooth.contains(i)){this._coords.isOnRowEdge(t.bottom)&&(t.top=Math.max(t.top-1,this._coords.frozenRowsCount)),i=[];for(var r=new h,n=t.top;n<t.bottom;n++){r.tag="div",r.addClass("wdr-row"),r.attr["data-r"]=n,e.model._options.OptionsManager.showHeaders&&(r.text+=this.createRowSheetHeaderCell(n).toHtml());for(var o=t.left;o<t.right;++o)r.text+=this.createCell(n,o).toHtml();i.push(r.toHtml())}this.scrollPane.placeholder.html(""),this.scrollPane.placeholder.hide(),this.scrollPane.content.html(i.join("")),this.scrollPane.content.show(),i.length=0,this._isSmooth=!1,this._bounds.set(t)}}},n.prototype.createRowSheetHeaderCell=function(e,t){return void 0===t&&(t=!1),this.cell=r.prototype.createRowSheetHeaderCell.call(this,e,t),t||(this.cell.style["min-height"]=this.cell.style.height,delete this.cell.style.height,delete this.cell.style["line-height"]),this.cell},n.prototype.adjustScrollPaneOffset=function(){this.scrollPane.content.top=this._coords.getRowEdgeOffset(this._bounds.top)},n.prototype.getBounds=function(e){void 0===e&&(e=!1);var t=new i.Bounds;return t.top=this._coords.getBoundTop(e),t.left=0,t.bottom=this._coords.getBoundBottom(e),t.right=this._coords.frozenColsCount,e&&t.bottom==this._coords.maxRowsCount&&t.bottom++,t},n.prototype.drawSmooth=function(){var t=this.getBounds(!0);if(!(this.isSmooth&&this._coords.canDrawAll&&this._boundsSmooth.contains(t))){this._boundsSmooth=t,t=[];for(var i=this._boundsSmooth.top;i<this._boundsSmooth.bottom;i++){e.model._options.OptionsManager.showHeaders&&t.push(this.createRowSheetHeaderCell(i,!0).toHtml());for(var r=this._boundsSmooth.left;r<this._boundsSmooth.right;++r)t.push(this.createCell(i,r,!0).toHtml())}this.scrollPane.placeholder.html(t.join("")),this.scrollPane.content.hide(),this.scrollPane.content.html(""),this.scrollPane.placeholder.show(),this.isSmooth||this._coords.isOnRowEdge(this._bounds.bottom)?this._scrollPane.scrollTop=this._coords.scrollTop:this.scrollPane.scrollTop=this._coords.getRowY(this._coords.firstDataRowIdx,!1),this.isSmooth=!0}},n.prototype.setContentSize=function(){this.scrollPane.contentHeight=this._coords.dataContentHeight+this._coords.scrollBarHeight,this.scrollPane.content.bottom=0,this.scrollPane.scrollTop=this._coords.scrollTop},n.prototype.getCellByPosition=function(e,i){var r=this._coords.getColIndexAtPosition(e,!0)-1,n=this._coords.getRowIndexAtPosition(i)-1,o=this._getDataFunc(n,r);return null==o&&((o=new t.vo.GridCell).rowIdx=n,o.colIdx=r),o},n}((i=t.sheet||(t.sheet={})).BaseSheet),i.RowHeadersSheet=r}((t=e._view||(e._view={})).grid||(t.grid={}))}(n||(n={})),function(e){var t;!function(t){var i,r;r=function(r){function n(){return null!==r&&r.apply(this,arguments)||this}return a(n,r),n.prototype.draw=function(){s.fmClearTimeout(this._bgTimeout),this.setContentSize();var t=this.getBounds();if(this.isSmooth||this._coords.isOnColEdge(t.right)||!this._bounds.contains(t)){var i=t.clone();if(0!=this._coords.maxColsCount&&(i.right=Math.min(i.right,this._coords.maxColsCount)),!this.isSmooth||!this._boundsSmooth.contains(i)){this._coords.isOnColEdge(t.right)&&(t.left=Math.max(t.left-1,this._coords.frozenColsCount)),i=[],e.model._options.OptionsManager.showHeaders&&i.push(this.createSheetHeaders(t));for(var r=new h,n=t.top;n<t.bottom;n++){r.tag="div",r.addClass("wdr-row"),r.attr["data-r"]=n;for(var o=t.left;o<t.right;++o)r.text+=this.createCell(n,o).toHtml();i.push(r.toHtml())}this.scrollPane.placeholder.html(""),this.scrollPane.placeholder.hide(),this.scrollPane.content.html(i.join("")),this.scrollPane.content.show(),i.length=0,this.isSmooth=!1,this._bounds.set(t)}}},n.prototype.adjustScrollPaneOffset=function(){this.scrollPane.content.left=this._coords.getColEdgeOffset(this._bounds.left)},n.prototype.getBounds=function(e){void 0===e&&(e=!1);var t=new i.Bounds;return t.top=0,t.left=this._coords.getBoundLeft(e),t.bottom=this._coords.frozenRowsCount,t.right=this._coords.getBoundRight(e),e&&t.right==this._coords.maxColsCount&&t.right++,t},n.prototype.drawSmooth=function(){var t=this.getBounds(!0);if(!(this.isSmooth&&this._coords.canDrawAll&&this._boundsSmooth.contains(t))){this._boundsSmooth=t,s.fmClearTimeout(this._bgTimeout),t=[];for(var i=this._boundsSmooth.top;i<this._boundsSmooth.bottom;i++)for(var r=this._boundsSmooth.left;r<this._boundsSmooth.right;++r)t.push(this.createCell(i,r,!0).toHtml());i="",e.model._options.OptionsManager.showHeaders&&(i+=this.createSheetHeaders(this._boundsSmooth,!0)),i+=t.join(""),this.scrollPane.placeholder.html(i),this.scrollPane.content.hide(),this.scrollPane.content.html(""),this.scrollPane.placeholder.show(),this.scrollPane.scrollLeft=this.isSmooth||this._coords.isOnColEdge(this._bounds.right)?this._coords.scrollLeft:this._coords.getColX(this._coords.firstDataColIdx,!1),this.isSmooth=!0}},n.prototype.setContentSize=function(){this.scrollPane.contentWidth=this._coords.dataContentWidth+this._coords.scrollBarWidth,this.scrollPane.content.right=0},n.prototype.backgroundProcess=function(){var e=this;s.fmClearTimeout(this._bgTimeout);for(var t=[],i=this._coords.getColIndicesWithUndefinedWidth(50),r=0;r<this._coords.frozenRowsCount;r++)for(var n=0;n<i.length;n++){var o=i[n];this.isCellEmpty(r,o)||t.push(this.createCell(r,o,!0).toHtml())}if(0<t.length){var a=this._scrollPane.placeholder.element,l=a.children.length,c=a.innerHTML;a.innerHTML=c+t.join(),this.requestAnimationFrame((function(){for(;l<a.children.length;l++)e.updateColWidth(a.children.item(l));a.innerHTML=c,e._bgTimeout=s.fmSetTimeout((function(){return e.backgroundProcess()}),500)}))}},n.prototype.createSheetHeaders=function(e,t){void 0===t&&(t=!1);for(var i="",r=e.left;r<e.right;++r)i+=this.createColumnSheetHeaderCell(r,t).toHtml();return t||((r=new h).tag="div",r.addClass("wdr-row"),r.text=i,i=r.toHtml()),i},n.prototype.getCellByPosition=function(e,i){var r=this._coords.getColIndexAtPosition(e)-1,n=this._coords.getRowIndexAtPosition(i,!0)-1,o=this._getDataFunc(n,r);return null==o&&((o=new t.vo.GridCell).rowIdx=n,o.colIdx=r),o},n.prototype.clearDrawings=function(){s.fmClearTimeout(this._bgTimeout)},n.prototype.dispose=function(){this.clearDrawings(),r.prototype.dispose.call(this)},n}((i=t.sheet||(t.sheet={})).BaseSheet),i.ColumnHeadersSheet=r}((t=e._view||(e._view={})).grid||(t.grid={}))}(n||(n={})),function(e){var t,i,n,o;t=e._view||(e._view={}),i=t.grid||(t.grid={}),n=i.sheet||(i.sheet={}),o=function(o){function l(){var e=o.call(this,"div","wdr-grid-layout")||this;return e.smoothTimeout=1e3,e.animationDraws=[],e._isHeadersDirty=!1,e.colsScrollHandler=function(t){return e.onColsScroll(t)},e.rowsScrollHandler=function(t){return e.onRowsScroll(t)},e.dataScrollHandler=function(){return e.onDataScroll()},e.sheetHeaderDbClickHandler=function(t){return e.onSheetHeaderDbClick(t)},e.clicks=0,e.disableSelection(),e._coords=new n.GridCoords,e._dataProvider=new n.SheetDataProvider(e._coords),e._selectionManager=new n.SelectionManager(e),e.setControls(),e}return a(l,o),l.prototype.setControls=function(){this.createTitle(),this.createSheetHeaders(),this.createColsSheet(),this.createRowsSheet(),this.createDataSheet(),this.createResizeHandles()},l.prototype.createTitle=function(){this._title=new r.UILabel,this._title.container.display="block",this._title.setId("wdr-grid-title"),this._title.addClass("wdr-pivot-title"),this._title.setSelectable(!0),this._title.container.css("position","relative"),this._title.hide(),this.addComponent(this._title)},l.prototype.createSheetHeaders=function(){this._sheetHeaders=new n.SheetHeaders(this._coords),this._sheetHeaders.id="wdr-sheet-headers",this.addChild(this._sheetHeaders)},l.prototype.createColsSheet=function(){var e=this;this._colsSheet=new n.ColumnHeadersSheet(this._coords,(function(t,i){return e.getCell(t,i)})),this._colsSheet.id="wdr-cols-sheet",this._colsSheet.scrollPane.element.addEventListener("wheel",this.colsScrollHandler),this._colsSheet.addEventListener(i.GridEvent.MOUSE_CLICK,(function(t){return e.onClick(t)})),this.addChild(this._colsSheet)},l.prototype.createRowsSheet=function(){var e=this;this._rowsSheet=new n.RowHeadersSheet(this._coords,(function(t,i){return e.getCell(t,i)})),this._rowsSheet.id="wdr-rows-sheet",this._rowsSheet.scrollPane.element.addEventListener("wheel",this.rowsScrollHandler),this._rowsSheet.addEventListener(i.GridEvent.MOUSE_CLICK,(function(t){return e.onClick(t)})),this.addChild(this._rowsSheet)},l.prototype.createDataSheet=function(){var e=this;this._dataSheet=new n.DataSheet(this._coords,(function(t,i){return e.getCell(t,i)})),this._dataSheet.id="wdr-data-sheet",this._dataSheet.scrollPane.element.addEventListener("scroll",this.dataScrollHandler,!0),this._dataSheet.addEventListener(n.BaseSheet.EVENT_SWITCHED_TO_SIMPLE,(function(t){return e.onModeSwitched(t)})),this._dataSheet.addEventListener(n.BaseSheet.EVENT_SWITCHED_TO_SMOOTH,(function(t){return e.onModeSwitched(t)})),this._dataSheet.addEventListener(i.GridEvent.MOUSE_CLICK,(function(t){return e.onClick(t)})),this.addChild(this._dataSheet)},l.prototype.createResizeHandles=function(){var e=this;this._colResizeHandles=new n.ColumnResizeHandles(this),this._colResizeHandles.id="wdr-cols-resize",this._colResizeHandles.addEventListener(i.GridEvent.RESIZE_COLUMN,(function(t){return e.onColResize(t)})),this.addChild(this._colResizeHandles),this._rowResizeHandles=new n.RowResizeHandles(this),this._rowResizeHandles.id="wdr-rows-resize",this._rowResizeHandles.addEventListener(i.GridEvent.RESIZE_ROW,(function(t){return e.onRowResize(t)})),this.addChild(this._rowResizeHandles),this.element.addEventListener("dblclick",this.sheetHeaderDbClickHandler)},l.prototype.draw=function(){var e=this;this._coords.clearCache(),this._dataSheet.width&&this._dataSheet.height||this.drawLayout(),this._coords.setScale(),this.adjustScrollPosition()||(s.fmClearTimeout(this._drawSmoothTimer),this.disposeAnimationDraws(),this.animationDraws.push(this.requestAnimationFrame((function(){return e._draw()}))))},l.prototype.disposeAnimationDraws=function(){for(;0<this.animationDraws.length;)this.cancelAnimationFrame(this.animationDraws.pop())},l.prototype._draw=function(){var i=this;t.PivotView.stage.dispatchWith(t.ViewEvent.BEFORE_GRID_DRAW,this,{smooth:!1}),this._coords.applyPendingSizes(),this.drawFirst(),this._isHeadersDirty&&(this.calculateSizesFirst()&&(this._coords.applyPendingSizes(),this._colsSheet.clearBounds(),this._rowsSheet.clearBounds(),this.drawFirst()),this._isHeadersDirty=!1),this.drawLast(),e.model.JavaScriptHandlers.getInstance().dispatch(new e.model.APIEvent(e.model.JavaScriptHandlers.AFTER_GRID_DRAW,{smooth:!1})),this.animationDraws.push(this.requestAnimationFrame((function(){i.drawLayout(),i._selectionManager.draw()}))),this.animationDraws.push(this.requestAnimationFrame((function(){var e=i.calculateSizesAll();e?(i._colsSheet.clearBounds(),i._rowsSheet.clearBounds(),i._dataSheet.clearBounds(),i.draw()):i._coords.canDrawSmooth&&(s.fmClearTimeout(i._drawSmoothTimer),i._drawSmoothTimer=s.fmSetTimeout((function(){return i.drawSmooth()}),i.smoothTimeout)),e||i.makeFieldsDraggable()}))),this.animationDraws.push(this.requestAnimationFrame((function(){t.PivotView.stage.dispatchWith(t.ViewEvent.AFTER_GRID_DRAW,i,{smooth:!1})})))},l.prototype.drawFirst=function(){this._coords.titleHeight=s.nullOrEmpty(e.model._options.OptionsManager.gridTitle)?0:this._title.getHeight(!0),this._colsSheet.draw(),this._colsSheet.adjustScrollPaneOffset(),this._rowsSheet.draw(),this._rowsSheet.adjustScrollPaneOffset()},l.prototype.drawLast=function(){this._sheetHeaders.draw(),this._selectionManager.draw(),this._colResizeHandles.draw(),this._rowResizeHandles.draw(),this._dataSheet.draw(),this._dataSheet.adjustScrollPaneOffset()},l.prototype.calculateSizesFirst=function(){return this._colsSheet.calculateSizes(!0),this._rowsSheet.calculateSizes(!0),this._colsSheet.isDirty||this._rowsSheet.isDirty},l.prototype.calculateSizesAll=function(){return this._dataSheet.calculateSizes(!0),this._colsSheet.calculateSizes(!0),this._rowsSheet.calculateSizes(!0),this._dataSheet.isDirty||this._colsSheet.isDirty||this._rowsSheet.isDirty},l.prototype.drawSmooth=function(){var e=this;this.disposeAnimationDraws(),this.animationDraws.push(this.requestAnimationFrame((function(){return e._drawSmooth()})))},l.prototype._drawSmooth=function(){var i=this;t.PivotView.stage.dispatchWith(t.ViewEvent.BEFORE_GRID_DRAW,this,{smooth:!0}),this._colsSheet.drawSmooth(),this._rowsSheet.drawSmooth(),this._dataSheet.drawSmooth(),e.model.JavaScriptHandlers.getInstance().dispatch(new e.model.APIEvent(e.model.JavaScriptHandlers.AFTER_GRID_DRAW,{smooth:!0})),this.type==n.flat.FlatGridLayout.TYPE&&this.makeFieldsDraggable(),this.animationDraws.push(this.requestAnimationFrame((function(){i._colsSheet.calculateSizesSmooth(!0),i._rowsSheet.calculateSizesSmooth(!0),i._dataSheet.calculateSizesSmooth(!0),(i._colsSheet.isDirty||i._rowsSheet.isDirty||i._dataSheet.isDirty)&&(i._colsSheet.clearBoundsSmooth(),i._rowsSheet.clearBoundsSmooth(),i._dataSheet.clearBoundsSmooth()),i._coords.canDrawAll||i._colsSheet.backgroundProcess()}))),this.animationDraws.push(this.requestAnimationFrame((function(){t.PivotView.stage.dispatchWith(t.ViewEvent.AFTER_GRID_DRAW,i,{smooth:!0})})))},l.prototype.onModeSwitched=function(e){var t=this;e.type==n.BaseSheet.EVENT_SWITCHED_TO_SIMPLE&&this.animationDraws.push(this.requestAnimationFrame((function(){t._colsSheet.switchToSimple(),t._rowsSheet.switchToSimple()})))},l.prototype.onDataScroll=function(){this.setScroll(this._dataSheet.scrollPane.scrollTop,this._dataSheet.scrollPane.scrollLeft)},l.prototype.onRowsScroll=function(e){this.coords.hasVerticalScroll&&(e=e.wheelDeltaY||e.deltaY||e.wheelDelta||0,s.browserVersion().isFirefox&&(e*=-40),s.browserVersion().isMsie&&(e*=-1),isNaN(e)||0==e||(this._dataSheet.scrollPane.scrollTop=this._coords.scrollTop-e))},l.prototype.onColsScroll=function(e){this.coords.hasHorizontalScroll&&(e=e.wheelDeltaX||e.deltaX||0,s.browserVersion().isFirefox&&(e*=-40),s.browserVersion().isMsie&&(e*=-1),0!=e&&(this._dataSheet.scrollPane.scrollLeft=this._coords.scrollLeft-e))},Object.defineProperty(l.prototype,"type",{get:function(){return this._type},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"coords",{get:function(){return this._coords},enumerable:!0,configurable:!0}),l.prototype.drawLayout=function(){this.width=this.coords.layoutWidth,this.height=this.coords.layoutHeight,s.nullOrEmpty(e.model._options.OptionsManager.gridTitle)?this._title.hide():(this._title.setLabel(e.model._options.OptionsManager.gridTitle),this._title.show()),this._colResizeHandles.left=0,this._colResizeHandles.top=this.coords.gridStartY,this._colResizeHandles.right=0,this._colResizeHandles.height=this.coords.getSheetHeaderHeight(),this._rowResizeHandles.left=0,this._rowResizeHandles.top=this.coords.gridStartY,this._rowResizeHandles.bottom=0,this._rowResizeHandles.width=this.coords.getSheetHeaderWidth()},l.prototype.triggerCellAction=function(e){null!=e&&this.dispatch(new i.GridClickEvent(e))},Object.defineProperty(l.prototype,"selectedCells",{get:function(){var e=[];if(0<this.selectionManager.selectedCells.length)for(var t=null,i=0;i<this._selectionManager.selectedCells.length;i++)null!=this._selectionManager.selectedCells.getItemAt(i).cellElement&&(t=this._selectionManager.decomposeCellKey(this._selectionManager.selectedCells.getItemAt(i).cellKey),this.getSelectedCells(e,t.from,t.to));return e},enumerable:!0,configurable:!0}),l.prototype.getSelectedCells=function(e,t,r){var n=null;if(t&&r)for(var o=this._selectionManager.fromRow(t,r);o<=this._selectionManager.toRow(t,r);o++)for(var s=this._selectionManager.fromCol(t,r);s<=this._selectionManager.toCol(t,r);s++)null==(n=this.getCell(o,s,!0,!0))&&((n=new i.vo.GridCell).rowIdx=o,n.colIdx=s),e.push(n)},l.prototype.getCell=function(e,t,i,r){return void 0===r&&(r=!1),i=this._dataProvider.getData(e,t,!r),r&&null==i?this._dataProvider.getDataFrozen(e,t):i},l.prototype.insertCell=function(e,t,i,r){void 0===r&&(r=!1),this._dataProvider.setData(e,t,i,r)},l.prototype.resize=function(e,t){this._coords.resize(e,t,!0)},Object.defineProperty(l.prototype,"getDataFunction",{set:function(e){this._dataProvider.getDataFunction=e},enumerable:!0,configurable:!0}),l.prototype.setDataSize=function(e,t){this._coords.dataRowsCount=e,this._coords.dataColsCount=t},l.prototype.freezeRows=function(e){e!=this._coords.frozenRowsCount&&(this._coords.firstDataRowIdx=e+(this._coords.firstDataRowIdx-this._coords.frozenRowsCount)),this._coords.frozenRowsCount=e},l.prototype.freezeColumns=function(e){e!=this._coords.frozenColsCount&&(this._coords.firstDataColIdx=e+(this._coords.firstDataColIdx-this._coords.frozenColsCount)),this._coords.firstDataColIdx<e&&(this._coords.firstDataColIdx=e),this._coords.frozenColsCount=e},l.prototype.clearAll=function(){this._isHeadersDirty=!0,this._dataProvider.reset(),this._coords.reset(),this._colsSheet.clearAllBounds(),this._rowsSheet.clearAllBounds(),this._dataSheet.clearAllBounds(),this._selectionManager.clear(),this._dataSheet.scrollPane.scrollTop=0,this._dataSheet.scrollPane.scrollLeft=0,this.clearDrawings()},l.prototype.clearData=function(){this._dataProvider.reset(),this._colsSheet.clearAllBounds(),this._rowsSheet.clearAllBounds(),this._dataSheet.clearAllBounds(),this._coords.clearCache()},l.prototype.clearColSizes=function(e){this._isHeadersDirty=!0,this._coords.clearColSizes(e)},l.prototype.clearRowSizes=function(e){this._isHeadersDirty=!0,this._coords.clearRowSizes(e)},l.prototype.select=function(e,t,i,r){this._selectionManager.select(new n.Point(t,e),new n.Point(r,i))},l.prototype.deselect=function(){this._selectionManager.clear()},l.prototype.clearDrawings=function(){this.disposeAnimationDraws(),s.fmClearTimeout(this._drawSmoothTimer),s.fmClearTimeout(this.clickTimeout),this._colsSheet.clearDrawings()},l.prototype.dispose=function(){this._dataProvider.dispose(),this._selectionManager.dispose(),this.clearDrawings(),this._colsSheet.removeAllEventListeners(),this._colsSheet.scrollPane.element&&this._colsSheet.scrollPane.element.removeEventListener("wheel",this.colsScrollHandler),this._colsSheet.dispose(),this._rowsSheet.removeAllEventListeners(),this._rowsSheet.scrollPane.element&&this._rowsSheet.scrollPane.element.removeEventListener("wheel",this.rowsScrollHandler),this._rowsSheet.dispose(),this._dataSheet.removeAllEventListeners(),this._dataSheet.scrollPane.element&&this._dataSheet.scrollPane.element.removeEventListener("scroll",this.dataScrollHandler),this._dataSheet.dispose(),this._colResizeHandles.removeAllEventListeners(),this._colResizeHandles.dispose(),this._rowResizeHandles.removeAllEventListeners(),this._rowResizeHandles.dispose(),this.element&&this.element.removeEventListener("dbclick",this.sheetHeaderDbClickHandler),o.prototype.dispose.call(this)},l.prototype.onClick=function(e){null!=e.cell&&this.dispatch(e),this.onClickForApi(e)},l.prototype.onFilterClick=function(e){this.dispatch(e)},l.prototype.onClickForApi=function(e){var t=this;this.clicks++,1==this.clicks&&(this.clickTimeout=s.fmSetTimeout((function(){if(1==t.clicks){if(e.cell){var r=new i.GridSingleDoubleClickEvent(e.cell,!0,e.element);t.dispatch(r)}}else e.cell&&(r=new i.GridSingleDoubleClickEvent(e.cell,!1,e.element),t.dispatch(r));t.clicks=0}),300))},l.prototype.setScroll=function(e,t){void 0===e&&(e=NaN),void 0===t&&(t=NaN);var i=!1;isNaN(e)||e==this.coords.scrollTop||(this.coords.scrollTop=e,this.coords.firstDataRowIdx=this.coords.getRowIndexAtPosition(e),this._rowsSheet.scrollPane.scrollTop=e,i=!0),isNaN(t)||t==this.coords.scrollLeft||(this.coords.scrollLeft=t,this.coords.firstDataColIdx=this.coords.getColIndexAtPosition(t),this._colsSheet.scrollPane.scrollLeft=t,i=!0),i&&this.draw()},l.prototype.onColResize=function(e){this.dispatch(e),this._coords.applyPendingSizes(),0<e.data.width?this._coords.setColWidth(e.data.colIdx,e.data.width,!1,!0):this._coords.resetColWidth(e.data.colIdx),this.drawAfterResize()},l.prototype.onRowResize=function(e){this.dispatch(e),this._coords.applyPendingSizes(),0<e.data.height?this._coords.setRowHeight(e.data.rowIdx,e.data.height,!1,!0):this._coords.resetRowHeight(e.data.rowIdx),this.drawAfterResize()},l.prototype.onSheetHeaderDbClick=function(t){if(0!=e.model._options.OptionsManager.showHeaders){var r=this.getOffset(),n=t.clientX-r.left;t=t.clientY-r.top,n>this.coords.getSheetHeaderWidth()&&t>this.coords.gridStartY+this.coords.getSheetHeaderHeight()||(t=this.coords.getRowIdxByRelativePosition(t,this.isSmooth),n=this.coords.getColIdxByRelativePosition(n,this.isSmooth),-1!=t||isNaN(n)||this._colResizeHandles.dispatchWith(i.GridEvent.RESIZE_COLUMN,this,{width:-1,colIdx:n}),-1!=n||isNaN(t)||this._rowResizeHandles.dispatchWith(i.GridEvent.RESIZE_ROW,this,{height:-1,rowIdx:t}))}},l.prototype.drawAfterResize=function(){this._colsSheet.clearAllBounds(),this._rowsSheet.clearAllBounds(),this._dataSheet.clearAllBounds(),this.adjustScrollPosition()||this.draw()},l.prototype.adjustScrollPosition=function(){var e=!1;return 0<this._coords.scrollLeft&&this._coords.freeSpaceRight>this._coords.scrollLeft&&(this._dataSheet.scrollPane.scrollLeft=0,e=!0),0<this._coords.scrollTop&&this._coords.freeSpaceTop>this._coords.scrollTop&&(this._dataSheet.scrollPane.scrollTop=0,e=!0),e},l.prototype.getCellByElement=function(e){var t=r.UIElement.convert(e).closest(".wdr-cell");return null!=t?(e=parseInt(t.attr("data-r")),t=parseInt(t.attr("data-c")),this.getCell(e,t,!0,!0)):null},Object.defineProperty(l.prototype,"isSmooth",{get:function(){return this._dataSheet.isSmooth},enumerable:!0,configurable:!0}),l.prototype.scrollToRow=function(e){this._dataSheet.scrollPane.scrollTop=this.coords.getRowY(e)},l.prototype.scrollToColumn=function(e){this._dataSheet.scrollPane.scrollLeft=this.coords.getColX(e)},Object.defineProperty(l.prototype,"dataProvider",{get:function(){return this._dataProvider},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"selectionManager",{get:function(){return this._selectionManager},enumerable:!0,configurable:!0}),l.prototype.resizeColumn=function(e,t){this.coords.setColWidth(e,t,!1,!0)},l.prototype.resizeRow=function(e,t){this.coords.setRowHeight(e,t,!1,!0)},l.prototype.makeFieldsDraggable=function(){var e=this;this.droppable({onDrop:function(t,i,r,n){return e.onDrop(t,i,r,n)},onDragOver:function(t,i,r,n){return e.onDragOver(t,i,r,n)},onDragLeave:function(t,i,r,n){return e.onDragLeave(t,i,r,n)}})},l.prototype.createHeaderDragHelper=function(e){var t=new r.UIElement("span");return t.addClass("wdr-helper"),t.addClass("wdr-draggable"),t.addClass("wdr-header-helper"),t.css("position","absolute"),t.css("z-index",100),t.text(e.element.firstChild.textContent),t},l.prototype.onDragOver=function(e,t,i,n){(e=r.UIElement.convert(n.target)).hasClass("wdr-header-drop-indicator")||this.showIndicator(e,e)},l.prototype.onDragLeave=function(e,t,i,r){this.removeDropIndicator()},l.prototype.onDrop=function(e,t,i,r){},l.prototype.showIndicator=function(e,t){},l.prototype.createDropIndicator=function(){return this._dropIndicator?this._dropIndicator:new r.UIElement("div","wdr-header-drop-indicator")},l.prototype.removeDropIndicator=function(){this._dropIndicator&&(this._dropIndicator.removeFromParent(!0),this._dropIndicator=null)},l}(r.UIElement),n.BaseGridLayout=o}(n||(n={})),function(e){var t;!function(t){var i,r;r=function(i){function r(e){var r=i.call(this,e,null)||this;return r._coords=e,r._hierarchies=[],r.addClass("wdr-filters"),r.addEventListener(t.GridEvent.MOUSE_CLICK,(function(e){return r.onClick(e)})),r}return a(r,i),r.prototype.draw=function(){for(var t=[],i=new h,r=0;r<this._coords.frozenRowsCount;r++){i.tag="div",i.addClass("wdr-row");for(var n=0;n<this._coords.frozenColsCount;n++)if(e.model._options.OptionsManager.showHierarchyCaptions){var o=r-this._coords.frozenRowsCount+this._hierarchies.length;i.text+=this.createFilterCell(r,n,0<=o?this._hierarchies[o]:null).toHtml()}else i.text+=this.createCell(r,n).toHtml();t.push(i.toHtml())}t=t.join(""),this.element.innerHTML!=t&&this.html(t)},r.prototype.createFilterCell=function(i,r,n){var o=this._hierarchies.indexOf(n);return this.cell.clear(),this.cell.tag="div",this.cell.addClass(t.vo.GridStyleName.CELL),this.cell.addClass(t.vo.GridStyleName.HEADER),this.cell.addClass(t.vo.GridStyleName.HEADER_ROW),n?(this.cell.addClass(t.vo.GridStyleName.LEVEL+o),this.cell.text=n.caption,e.model._options.OptionsManager.showFilter&&(this.cell.addClass(t.vo.GridStyleName.FILTER_HEADER),n.hasFilter()&&(this.cell.addClass(t.vo.GridStyleName.FILTERED),this.cell.text+=this.createIcon(t.vo.GridStyleName.FILTERED_ICON,e.model._labels.Labels.TOOLTIPS_FILTERED)),this.cell.attr.title=e.model._labels.Labels.TOOLTIPS_FILTER_ICON,this.cell.text+=this.createIcon(t.vo.GridStyleName.FILTER_ICON))):this.cell.addClass(t.vo.GridStyleName.CELL_EMPTY),this.setCellSize(this.cell,i,r),this.cell.attr["data-c"]=r,this.cell.attr["data-r"]=i,0<=o&&(this.cell.attr["data-h"]=o),this.cell},r.prototype.setHierarchies=function(e){for(var t=this._hierarchies.length=0;t<e.length;t++){var i=e.getItemAt(t);0==i.isMeasures&&this._hierarchies.push(i)}},r.prototype.onClick=function(e){var i=e.element;i.hasClass(t.vo.GridStyleName.FILTER_HEADER)&&(i=parseInt(i.attr("data-h")),isNaN(i)||this.dispatch(new t.FilterClickEvent(this._hierarchies[i],e.cell)))},r.prototype.clear=function(){this._hierarchies.length=0,this.draw()},r}((i=t.sheet||(t.sheet={})).AbstractSheet),i.RowsFilter=r}((t=e._view||(e._view={})).grid||(t.grid={}))}(n||(n={})),function(e){var t;!function(t){var i,r;r=function(i){function r(e){var r=i.call(this,e,null)||this;return r.rowIndex=0,r._coords=e,r._hierarchies=[],r.addClass("wdr-filters"),r.hide(),r.addEventListener(t.GridEvent.MOUSE_CLICK,(function(e){return r.onClick(e)})),r}return a(r,i),r.prototype.draw=function(){if(this.removeAllChildren(),e.model._options.OptionsManager.showHierarchyCaptions){var t=new h("div");t.addClass("wdr-row"),t.style.height=this._coords.getRowHeight(this.rowIndex)+"px";for(var i=0;i<this._hierarchies.length;i++)t.text+=this.createFilterCell(this.rowIndex,i,this._hierarchies[i]).toHtml();this.html(t.toHtml()),0==this._hierarchies.length?this.hide():this.show()}else this.hide()},r.prototype.createFilterCell=function(i,r,n){return this.cell.clear(),this.cell.tag="div",this.cell.addClass(t.vo.GridStyleName.CELL),this.cell.addClass(t.vo.GridStyleName.HEADER),n&&(this.cell.text=n.caption,e.model._options.OptionsManager.showFilter&&(this.cell.addClass(t.vo.GridStyleName.FILTER_HEADER),this.cell.attr.title=e.model._labels.Labels.TOOLTIPS_FILTER_ICON,n.hasFilter()&&(this.cell.addClass(t.vo.GridStyleName.FILTERED),this.cell.text+=this.createIcon(t.vo.GridStyleName.FILTERED_ICON,e.model._labels.Labels.TOOLTIPS_FILTERED)),this.cell.text+=this.createIcon(t.vo.GridStyleName.FILTER_ICON))),this.cell.style["min-height"]=this._coords.getRowHeight(i)+"px",this.cell.attr["data-r"]=i,this.cell.attr["data-h"]=r,this.cell},r.prototype.setHierarchies=function(e){for(var t=this._hierarchies.length=0;t<e.length;t++){var i=e.getItemAt(t);0==i.isMeasures&&this._hierarchies.push(i)}0==this._hierarchies.length?this.hide():this.show()},r.prototype.onClick=function(e){if((e=e.element).hasClass(t.vo.GridStyleName.FILTER_HEADER)){var i=parseInt(e.attr("data-h"));isNaN(i)||this.dispatch(new t.FilterClickEvent(this._hierarchies[i],null,e))}},r.prototype.clear=function(){this._hierarchies.length=0,this.draw()},r}((i=t.sheet||(t.sheet={})).AbstractSheet),i.ColumnsFilter=r}((t=e._view||(e._view={})).grid||(t.grid={}))}(n||(n={})),function(e){var t;!function(t){!function(i){var n=function(i){function n(){var e=i.call(this)||this;return e._hierarchies=[],e.addClass("wdr-ui-hgroup"),e.addClass("wdr-filters"),e.hide(),e}return a(n,i),n.prototype.draw=function(){var t=this;if(this.removeAllChildren(),e.model._options.OptionsManager.showFilter&&e.model._options.OptionsManager.showReportFiltersArea){for(var i=0;i<this._hierarchies.length;i++){var n=new o(this._hierarchies[i],!0);n.container.attr("data-h",i),n.addEventListener(r.UIButton.CLICK_EVENT,(function(e){return t.onClick(e)})),this.addChild(n.container)}0==this._hierarchies.length?this.hide():this.show()}else this.hide()},n.prototype.setHierarchies=function(e){for(var t=this._hierarchies.length=0;t<e.length;t++){var i=e.getItemAt(t);0==i.isMeasures&&this._hierarchies.push(i)}this.draw()},n.prototype.onClick=function(e){this.dispatch(new t.FilterClickEvent((e=e.target).hierarchy,null,e.container))},n.prototype.clear=function(){this._hierarchies.length=0,this.draw()},Object.defineProperty(n.prototype,"isEmpty",{get:function(){return 0==this._hierarchies.length},enumerable:!0,configurable:!0}),n}(r.UIElement);i.PagesFilter=n;var o=function(i){function n(e,n){void 0===n&&(n=!1);var o=i.call(this)||this;return o._isPage=!1,o._hierarchy=e,o._isPage=n,o.setLabel(o._hierarchy.caption),o.removeClass("wdr-ui-btn"),o.addClass(t.vo.GridStyleName.FILTER_HEADER),o.addClass(t.vo.GridStyleName.HEADER),o._filterIcon=new r.UIElement("i",t.vo.GridStyleName.ICON),o._filterIcon.addClass(t.vo.GridStyleName.FILTER_ICON),o.container.append(o._filterIcon),o._filteredIcon=new r.UIElement("i",t.vo.GridStyleName.ICON),o._filteredIcon.addClass(t.vo.GridStyleName.FILTERED_ICON),o.container.append(o._filteredIcon),o.isFiltered=o._hierarchy.hasFilter(),o._isPage&&(o._description=new r.UILabel,o._description.setLabel(o.getFilterDescription()),o._description.addClass("wdr-filter-desc"),o.addChild(o._description)),o}return a(n,i),Object.defineProperty(n.prototype,"hierarchy",{get:function(){return this._hierarchy},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isFiltered",{get:function(){return this.container.hasClass("wdr-filtered")},set:function(e){this.container.toggleClass("wdr-filtered",e)},enumerable:!0,configurable:!0}),n.prototype.getFilterDescription=function(){var t=e.model._labels.Labels.FILTER_ALL;return this.hierarchy.hasFilter()&&(t=1==this.hierarchy.filter.length?this.hierarchy.filter.getItemAt(0).caption:e.model._labels.Labels.FILTER_MULTIPLE_ITEMS),t},n}(r.UIButton);i.FilterCell=o}(t.sheet||(t.sheet={}))}((t=e._view||(e._view={})).grid||(t.grid={}))}(n||(n={})),function(e){var t;!function(t){var i,r;r=function(r){function n(){var e=r.call(this)||this;return e._type=n.TYPE,e.addClass("wdr-compact-view"),e}return a(n,r),n.prototype.setControls=function(){r.prototype.setControls.call(this),this.createColsFilter(),this.createRowsFilter(),this.createPageFilter()},n.prototype.createColsFilter=function(){var e=this;this._colsFilter=new i.ColumnsFilter(this._coords),this._colsFilter.id="wdr-cols-filter",this._colsFilter.addEventListener(t.GridEvent.FILTER_CLICK,(function(t){return e.onFilterClick(t)})),this.addChild(this._colsFilter)},n.prototype.createRowsFilter=function(){var e=this;this._rowsFilter=new i.RowsFilter(this._coords),this._rowsFilter.id="wdr-rows-filter",this._rowsFilter.addEventListener(t.GridEvent.FILTER_CLICK,(function(t){return e.onFilterClick(t)})),this._rowsFilter.addEventListener(t.GridEvent.MOUSE_CLICK,(function(t){return e.onClick(t)})),this.addChild(this._rowsFilter)},n.prototype.createPageFilter=function(){var e=this;this._pageFilter=new i.PagesFilter,this._pageFilter.id="wdr-page-filter",this._pageFilter.addEventListener(t.GridEvent.FILTER_CLICK,(function(t){return e.onFilterClick(t)})),this.addChild(this._pageFilter)},n.prototype.drawFirst=function(){this._coords.filtersHeight=this._pageFilter.isEmpty?0:this._pageFilter.element.offsetHeight,r.prototype.drawFirst.call(this),this._rowsFilter.draw()},n.prototype.drawLast=function(){r.prototype.drawLast.call(this),this._colsFilter.draw()},n.prototype.calculateSizesFirst=function(){return this._rowsFilter.calculateSizes(!0),r.prototype.calculateSizesFirst.call(this)||this._rowsFilter.isDirty},n.prototype.calculateSizesAll=function(){return this._rowsFilter.calculateSizes(!0),r.prototype.calculateSizesAll.call(this)||this._rowsFilter.isDirty},n.prototype.drawLayout=function(){r.prototype.drawLayout.call(this),this._pageFilter.isEmpty||(this._pageFilter.top=this._coords.titleHeight,this._pageFilter.left=0,this._pageFilter.right=0),this._colResizeHandles.top=this._coords.gridStartY,this._rowResizeHandles.top=this._coords.gridStartY,this._sheetHeaders.top=this._coords.gridStartY,this._sheetHeaders.left=0,this._sheetHeaders.width=this._coords.rowHeadersWidth,this._sheetHeaders.height=this._coords.colHeadersHeight,this._rowsFilter.left=this._coords.getColX(0,!0),this._rowsFilter.top=this._coords.gridStartY+this._coords.getRowY(0,!0),this._colsFilter.top=this._coords.gridStartY+this._coords.getRowY(this._colsFilter.rowIndex,!0),this._colsFilter.left=this._coords.rowHeadersWidth,this._colsFilter.right=Math.max(0,this._coords.layoutWidth-this._coords.getRelativeColX(this._coords.maxColsCount,this.isSmooth)),this._colsSheet.left=this._coords.rowHeadersWidth,this._colsSheet.top=this._coords.gridStartY,this._colsSheet.width=this._coords.dataWidth,this._colsSheet.height=this._coords.layoutHeight-this._coords.gridStartY,this._rowsSheet.left=0,this._rowsSheet.top=this._coords.colHeadersHeight+this._coords.gridStartY,this._rowsSheet.width=this._coords.layoutWidth,this._rowsSheet.height=this._coords.dataHeight,this._dataSheet.left=this._coords.rowHeadersWidth-1,this._dataSheet.top=this._coords.colHeadersHeight+this._coords.gridStartY-1,this._dataSheet.width=this._coords.dataWidth,this._dataSheet.height=this._coords.dataHeight+1},n.prototype.drawAfterResize=function(){r.prototype.drawAfterResize.call(this),this._rowsFilter.draw(),this._colsFilter.draw()},n.prototype.makeFieldsDraggable=function(){var e=this;r.prototype.makeFieldsDraggable.call(this);for(var t={createHelper:function(t){return e.createHeaderDragHelper(t)}},i=this._colsFilter.find(".wdr-header:not(.wdr-empty)",!0),n=0;n<i.length;n++)i[n].draggable(t);for(i=this._rowsFilter.find(".wdr-header:not(.wdr-empty)",!0),n=0;n<i.length;n++)i[n].draggable(t);for(i=this._pageFilter.find(".wdr-header:not(.wdr-empty)",!0),n=0;n<i.length;n++)i[n].draggable(t)},n.prototype.onDrop=function(t,i,r,n){if(null==(r=this.getDropTargetFilter(r)))this.removeDropIndicator();else if(n=this.getDropPosition(r,this._dropIndicator),this.removeDropIndicator(),!isNaN(n)){var o,s=parseInt(t.attr("data-h")),a=t.closest(".wdr-filters");i=e.data_.Cube.getInstance().slice_.clone(),a==this._colsFilter?(o=i.columnsOnly.getItemAt(s),s=i.columns.indexOf(o.uniqueName)):a==this._rowsFilter?(o=i.rowsOnly.getItemAt(s),s=i.rows.indexOf(o.uniqueName)):a==this._pageFilter&&(o=i.pages.getItemAt(s),s=i.pages.indexOf(o.uniqueName)),null==o||r==a&&s==n||(t.hide(),r==a?r==this._colsFilter?i.columns.moveItemAt(s,n):r==this._rowsFilter?i.rows.moveItemAt(s,n):r==this._pageFilter&&i.pages.moveItemAt(s,n):(i.columns.removeItem(o.uniqueName),i.rows.removeItem(o.uniqueName),i.pages.removeItem(o.uniqueName),r==this._colsFilter?i.columns.addItemAt(o.uniqueName,o,n):r==this._rowsFilter?i.rows.addItemAt(o.uniqueName,o,n):r==this._pageFilter&&i.pages.addItemAt(o.uniqueName,o,n)),1<i.columns.length&&i.columns.getItemAt(0).isMeasures&&(t=i.columns.getItemAt(0),i.columns.splice(0,1),i.columns.addItemAt(t.uniqueName,t,i.columns.length)),e.model.PivotModel.getInstance().runQuery(i))}},n.prototype.getDropPosition=function(e,t){return e==this._colsFilter?this.getColumnDropPosition(t):e==this._rowsFilter?this.getRowDropPosition(t):e==this._pageFilter?this.getPageDropPosition(t):NaN},n.prototype.getColumnDropPosition=function(t){var i=e.data_.Cube.getInstance().slice_;return null!=t?(t=t.index())>i.columns.length?i.columns.length:(0<=(i=i.columns.indexOf("[Measures]"))&&i<=t&&0!=t&&t++,t):NaN},n.prototype.getRowDropPosition=function(t){var i=e.data_.Cube.getInstance().slice_;return null!=t?(t=t.parent.hasClass("wdr-filters")?i.rows.length:(t=t.parent.find(".wdr-header"))?parseInt(t.attr("data-h")):0)>i.rows.length?i.rows.length:(0<=(i=i.rows.indexOf("[Measures]"))&&i<=t&&0!=t&&t++,t):NaN},n.prototype.getPageDropPosition=function(t){var i=e.data_.Cube.getInstance().slice_;return null!=t?(t=t.index())>i.columns.length?i.columns.length:t:NaN},n.prototype.getDropTargetFilter=function(e){var t=e.closest(".wdr-filters");if(null==t){var i=e.closest(".wdr-cell");null!=i?(e=parseInt(i.attr("data-r")),i=parseInt(i.attr("data-c")),this.isOverColumns(e,i)?t=this._colsFilter:this.isOverRows(e,i)&&(t=this._rowsFilter)):null!=(i=e.closest(".wdr-resize-handles"))&&("wdr-cols-resize"==i.id?t=this._colsFilter:"wdr-rows-resize"==i.id&&(t=this._rowsFilter))}return t},n.prototype.isOverColumns=function(e,t){return t>=this.coords.frozenColsCount},n.prototype.isOverRows=function(e,t){return t<=this.coords.frozenColsCount},n.prototype.showIndicator=function(e,t){if(null==(e=this.getDropTargetFilter(e)))this.removeDropIndicator();else{var r=t.closest(".wdr-header:not(.wdr-empty)");null!=t.closest(".wdr-filters")&&null!=r?(this._dropIndicator=this.createDropIndicator(),e==this._pageFilter?r.before(this._dropIndicator):t.before(this._dropIndicator)):(this._dropIndicator=this.createDropIndicator(),e==this._colsFilter?this._colsFilter.find(".wdr-row").append(this._dropIndicator):e==this._rowsFilter?null!=t.closest(".wdr-filters")?this._rowsFilter.find(".wdr-header").before(this._dropIndicator):this._type==i.classic.ClassicGridLayout.TYPE?this._rowsFilter.find(".wdr-header").parent.append(this._dropIndicator):this._rowsFilter.append(this._dropIndicator):e==this._pageFilter&&this._pageFilter.append(this._dropIndicator))}},n.prototype.clearAll=function(){r.prototype.clearAll.call(this),this._colsFilter.clear(),this._pageFilter.clear(),this._rowsFilter.clear()},Object.defineProperty(n.prototype,"colsFilter",{get:function(){return this._colsFilter},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"rowsFilter",{get:function(){return this._rowsFilter},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"pageFilter",{get:function(){return this._pageFilter},enumerable:!0,configurable:!0}),n.prototype.dispose=function(){this._colsFilter.removeAllEventListeners(),this._colsFilter.dispose(),this._rowsFilter.removeAllEventListeners(),this._rowsFilter.dispose(),this._pageFilter.removeAllEventListeners(),r.prototype.dispose.call(this)},n.TYPE="compact",n}((i=t.sheet||(t.sheet={})).BaseGridLayout),i.CompactGridLayout=r}((t=e._view||(e._view={})).grid||(t.grid={}))}(n||(n={})),function(e){var t;!function(t){!function(t){var i=function(t){function i(i){var n=t.call(this,"div","wdr-resize-handles")||this;return n._mouseDownHandler=function(e){return n.onMouseDown(e)},n._mouseUpHandler=function(e){return n.onMouseUp(e)},n._mouseMoveHandler=function(e){return n.onMouseMove(e)},n._handle=new h,n._gridLayout=i,n._coords=i.coords,n.element.addEventListener("mousedown",n._mouseDownHandler),document.body.addEventListener("mouseup",n._mouseUpHandler),n._indicator=new r.UIElement("div","wdr-indicator"),n._indicator.hide(),n.addChild(n._indicator),n._wrapper=new r.UIElement("div","wdr-wrapper"),n._wrapper.attr("title",e.model._labels.Labels.TOOLTIPS_HEADER_FIT),n.addChild(n._wrapper),n}return a(i,t),i.prototype.draw=function(){this._wrapper.attr("title",e.model._labels.Labels.TOOLTIPS_HEADER_FIT)},i.prototype.createHandle=function(t){return this._handle.tag="div",this._handle.addClass("wdr-handle"),this._handle.attr["data-idx"]=t,this._handle.attr.title=e.model._labels.Labels.TOOLTIPS_HEADER_RESIZE,this._handle},i.prototype.onMouseDown=function(e){if(e.target.classList.contains("wdr-handle")){this._currentHandle=e.target,this._currentHandle.classList.add("wdr-active"),this._baseOffset=this.getOffset(),document.body.addEventListener("mousemove",this._mouseMoveHandler),e.stopImmediatePropagation();var t=parseInt(this._currentHandle.getAttribute("data-idx"));this.startResizing(this._currentHandle,t),e.preventDefault(),e.stopImmediatePropagation()}},i.prototype.startResizing=function(e,t){},i.prototype.onMouseUp=function(e){document.body.removeEventListener("mousemove",this._mouseMoveHandler),this._currentHandle&&(this._currentHandle.classList.remove("wdr-active"),e=parseInt(this._currentHandle.getAttribute("data-idx")),this.stopResizing(this._currentHandle,e),this._currentHandle=null,this._indicator.hide())},i.prototype.stopResizing=function(e,t){},i.prototype.onMouseMove=function(e){var t=e.clientX-this._baseOffset.left,i=e.clientY-this._baseOffset.top;0>t||0>i||t>this._coords.layoutWidth||i>this._coords.layoutHeight?this.onMouseUp(e):(this.positionHandle(this._currentHandle,t,i),this._indicator.show())},i.prototype.positionHandle=function(e,t,i){},i.prototype.dispose=function(){this.element&&this.element.removeEventListener("mousedown",this._mouseDownHandler),document.body.removeEventListener("mousemove",this._mouseMoveHandler),document.body.removeEventListener("mouseup",this._mouseUpHandler),t.prototype.dispose.call(this)},i}(r.UIElement);t.ResizeHandles=i}(t.sheet||(t.sheet={}))}((t=e._view||(e._view={})).grid||(t.grid={}))}(n||(n={})),function(e){!function(e){!function(e){var t,i;i=function(i){function r(){return null!==i&&i.apply(this,arguments)||this}return a(r,i),r.prototype.draw=function(){i.prototype.draw.call(this),this._wrapper.removeAllChildren();for(var e="",t=0;t<this._coords.frozenRowsCount;t++)e+=this.createHandle(t).toHtml(!0);t=this._coords.getBoundTop();for(var r=Math.min(this._coords.maxRowsCount,this._coords.getBoundBottom());t<r;t++)e+=this.createHandle(t).toHtml(!0);this._wrapper.html(e)},r.prototype.createHandle=function(e){return i.prototype.createHandle.call(this,e),this._handle.style.top=this._coords.getRelativeRowY(e,this._gridLayout.isSmooth,!1)+this._coords.getRowHeight(e)+"px",this._handle},r.prototype.startResizing=function(e,t){this._startY=this._coords.getRelativeRowY(t,this._gridLayout.isSmooth,!1)},r.prototype.stopResizing=function(i,r){var n=Math.round(i.offsetTop+i.clientHeight/2-this._startY);n=Math.max(t.GridCoords.CELL_MIN_HEIGHT,n),this.dispatchWith(e.GridEvent.RESIZE_ROW,this,{height:n,rowIdx:r})},r.prototype.positionHandle=function(e,i,r){r=Math.max(this._startY+t.GridCoords.CELL_MIN_HEIGHT,r),e.style.top=r+"px",this._indicator.top=r,this._indicator.width=this._coords.availableWidth},r}((t=e.sheet||(e.sheet={})).ResizeHandles),t.RowResizeHandles=i}(e.grid||(e.grid={}))}(e._view||(e._view={}))}(n||(n={})),function(e){!function(e){!function(e){var t,i;i=function(i){function r(){return null!==i&&i.apply(this,arguments)||this}return a(r,i),r.prototype.draw=function(){i.prototype.draw.call(this),this._wrapper.removeAllChildren();for(var e="",t=0;t<this._coords.frozenColsCount;t++)e+=this.createHandle(t).toHtml(!0);var r=Math.min(this._coords.maxColsCount,this._coords.getBoundRight());for(t=this._coords.getBoundLeft();t<r;t++)e+=this.createHandle(t).toHtml(!0);this._wrapper.html(e)},r.prototype.createHandle=function(e){return i.prototype.createHandle.call(this,e),this._handle.style.left=this._coords.getRelativeColX(e,this._gridLayout.isSmooth)+this._coords.getColWidth(e)+"px",this._handle},r.prototype.startResizing=function(e,t){this._startX=this._coords.getRelativeColX(t,this._gridLayout.isSmooth)},r.prototype.stopResizing=function(i,r){var n=Math.round(i.offsetLeft+i.clientWidth/2-this._startX);n=Math.max(t.GridCoords.CELL_MIN_WIDTH,n),this.dispatchWith(e.GridEvent.RESIZE_COLUMN,this,{width:n,colIdx:r})},r.prototype.positionHandle=function(e,i,r){i=Math.max(this._startX+t.GridCoords.CELL_MIN_WIDTH,i),e.style.left=i+"px",this._indicator.left=i,this._indicator.height=this._coords.availableHeight},r}((t=e.sheet||(e.sheet={})).ResizeHandles),t.ColumnResizeHandles=i}(e.grid||(e.grid={}))}(e._view||(e._view={}))}(n||(n={})),function(e){var t;!function(t){var i;!function(r){var n=function(i){function n(){var e=i.call(this)||this;return e._type=n.TYPE,e.removeClass("wdr-compact-view"),e.addClass("wdr-classic-view"),e}return a(n,i),n.prototype.createRowsFilter=function(){var e=this;this._rowsFilter=new r.ClassicRowsFilter(this._coords),this._rowsFilter.id="wdr-rows-filter",this._rowsFilter.addEventListener(t.GridEvent.FILTER_CLICK,(function(t){return e.onFilterClick(t)})),this._rowsFilter.addEventListener(t.GridEvent.MOUSE_CLICK,(function(t){return e.onClick(t)})),this.addChild(this._rowsFilter)},n.prototype.drawFirst=function(){this.isClassicViewOk?i.prototype.drawFirst.call(this):(e.uialert(e.model._labels.Labels.MESSAGE_TOO_MANY_COLUMNS_IN_CLASSIC_MODE,e.model._labels.Labels.CONFIRMATION,e.AlertType.CONFIRMATION),e.model.PivotModel.getInstance().setOptions({gridType:t.GridType.COMPACT}),e.model.PivotModel.getInstance().refresh())},Object.defineProperty(n.prototype,"isClassicViewOk",{get:function(){return this._coords.dataWidth>this._coords.minDataWidth},enumerable:!0,configurable:!0}),n.prototype.clearDrawings=function(){i.prototype.clearDrawings.call(this),this._rowsFilter.clearDrawings()},n.prototype.getRowDropPosition=function(t){var i=e.data_.Cube.getInstance().slice_;return null!=t?(t=t.index())>i.rows.length?i.rows.length:(0<=(i=i.rows.indexOf("[Measures]"))&&i<=t&&0!=t&&t++,t):NaN},n.TYPE="classic",n}(i.CompactGridLayout);r.ClassicGridLayout=n}((i=t.sheet||(t.sheet={})).classic||(i.classic={}))}((t=e._view||(e._view={})).grid||(t.grid={}))}(n||(n={})),function(e){var t;!function(t){!function(t){!function(i){var r=function(t){function i(e){return t.call(this,e)||this}return a(i,t),i.prototype.dispose=function(){s.fmClearTimeout(this._timeout),t.prototype.dispose.call(this)},i.prototype.draw=function(){for(var t=this,i=[],r=new h,n=0;n<this._coords.frozenRowsCount;n++){r.tag="div",r.addClass("wdr-row");for(var o=0;o<this._coords.frozenColsCount;o++)r.text=e.model._options.OptionsManager.showHierarchyCaptions?r.text+this.createFilterCell(n,o,n==this._coords.frozenRowsCount-1?this._hierarchies[o]:null).toHtml():r.text+this.createCell(n,o).toHtml();i.push(r.toHtml())}this.html(i.join("")),this._timeout=s.fmSetTimeout((function(){return t.calculateSizes(!0)}),0)},i.prototype.clearDrawings=function(){s.fmClearTimeout(this._timeout)},i}(t.RowsFilter);i.ClassicRowsFilter=r}(t.classic||(t.classic={}))}(t.sheet||(t.sheet={}))}((t=e._view||(e._view={})).grid||(t.grid={}))}(n||(n={})),function(e){var t,i,r;t=e._view||(e._view={}),i=t.grid||(t.grid={}),function(n){var o=function(r){function o(){var e=r.call(this)||this;return e._isDrillThrough=!1,e._hierachiesList=null,e.colsScrollHander=function(t){return e.onColsScroll(t)},e._type=o.TYPE,e.addClass("wdr-flat-view"),e}return a(o,r),o.prototype.createColsSheet=function(){var e=this;this._colsSheet=new n.FlatColumnsSheet(this._coords,(function(t,i){return e.getCell(t,i)})),this._colsSheet.id="wdr-cols-sheet",this._colsSheet.scrollPane.element.addEventListener("wheel",this.colsScrollHander),this._colsSheet.addEventListener(i.GridEvent.MOUSE_CLICK,(function(t){return e.onClick(t)})),this._colsSheet.addEventListener(i.GridEvent.MOUSE_CLICK,(function(t){return e.onClickForApi(t)})),this._colsSheet.addEventListener(i.GridEvent.FILTER_CLICK,(function(t){return e.onFilterClick(t)})),this.addChild(this._colsSheet)},o.prototype.drawLayout=function(){r.prototype.drawLayout.call(this),this._sheetHeaders.top=this._coords.gridStartY,this._sheetHeaders.left=0,this._sheetHeaders.width=this._coords.rowHeadersWidth,this._sheetHeaders.height=this._coords.colHeadersHeight,this._colsSheet.left=this._coords.rowHeadersWidth,this._colsSheet.top=this._coords.gridStartY,this._colsSheet.width=this._coords.dataWidth,this._colsSheet.height=this._coords.layoutHeight-this._coords.gridStartY,this._rowsSheet.left=0,this._rowsSheet.top=this._coords.colHeadersHeight+this._coords.gridStartY,this._rowsSheet.width=this._coords.layoutWidth,this._rowsSheet.height=this._coords.dataHeight,this._dataSheet.left=this._coords.rowHeadersWidth-1,this._dataSheet.top=this._coords.colHeadersHeight+this._coords.gridStartY-1,this._dataSheet.width=this._coords.dataWidth,this._dataSheet.height=this._coords.dataHeight+1},o.prototype.drawLast=function(){r.prototype.drawLast.call(this)},Object.defineProperty(o.prototype,"isDrillThrough",{get:function(){return this._isDrillThrough},set:function(e){this._isDrillThrough=e},enumerable:!0,configurable:!0}),o.prototype.makeFieldsDraggable=function(){var e=this;r.prototype.makeFieldsDraggable.call(this);for(var t={createHelper:function(t){return e.createHeaderDragHelper(t)}},i=this._colsSheet.find(".wdr-header",!0),n=0;n<i.length;n++)i[n].draggable(t)},o.prototype.showIndicator=function(e,t){var i=t.closest(".wdr-cell");null!=i?(i=parseInt(i.attr("data-c")),i=Math.min(i,this.coords.dataColsCount),this._dropIndicator=this.createDropIndicator(),this._dropIndicator.left=this.coords.getRelativeColX(i,this.isSmooth)-(i==this.coords.dataColsCount?0:this._dropIndicator.width),this._dropIndicator.top=this._coords.gridStartY+this.coords.getRelativeRowY(0,this.isSmooth)-1,this._dropIndicator.height=this.coords.getRowHeight(0)+1,this.append(this._dropIndicator)):this.removeDropIndicator()},o.prototype.onDrop=function(i,r,n,o){this.removeDropIndicator(),null!=(o=n.closest(".wdr-cell"))&&(r=e.data_.Cube.getInstance().slice_.clone(),n=this.isDrillThrough&&null!=this._hierachiesList?this._hierachiesList:r.flatten(),o=parseInt(o.attr("data-c")),(i=parseInt(i.attr("data-c")))!=(o=Math.max(0,Math.min(o,n.length-1)))&&(n.moveItemAt(i,o),0<r.flatOrder.length&&(r.flatOrder=n.toKeyArray()),this.isDrillThrough?(this._hierachiesList=n,r.flatOrder=n.toKeyArray(),this.dispatchWith(t.config.FieldsView.EVENT_APPLY_SLICE,this,r)):(r.rows=n,e.model.PivotModel.getInstance().runQuery(r))))},o.TYPE="flat",o}(r.BaseGridLayout);n.FlatGridLayout=o}((r=i.sheet||(i.sheet={})).flat||(r.flat={}))}(n||(n={})),function(e){var t;!function(t){var i;!function(r){var n=function(i){function r(e,r){var n=i.call(this,e,r)||this;return n.addEventListener(t.GridEvent.MOUSE_CLICK,(function(e){return n.onFilterClick(e)})),n}return a(r,i),r.prototype.onFilterClick=function(e){null!=e.cell&&e.cell.isFilterHeader&&null!=e.cell.hierarchy&&e.cell.activeElementType!=t.vo.GridCellElementType.RIGHT_ICON&&this.dispatch(new t.FilterClickEvent(e.cell.hierarchy,e.cell))},r.prototype.createCell=function(r,n,o){return void 0===o&&(o=!1),this.cell=i.prototype.createCell.call(this,r,n,o),(r=this._getDataFunc?this._getDataFunc(r,n):null)&&r.isFilterHeader&&(this.cell.addClass(t.vo.GridStyleName.FILTER_HEADER),r.filtered&&(this.cell.addClass(t.vo.GridStyleName.FILTERED),this.cell.text+=this.createIcon(t.vo.GridStyleName.FILTERED_ICON,e.model._labels.Labels.TOOLTIPS_FILTERED)),this.cell.attr.title=e.model._labels.Labels.TOOLTIPS_FILTER_ICON,this.cell.text+=this.createIcon(t.vo.GridStyleName.FILTER_ICON)),this.cell},r}(i.ColumnHeadersSheet);r.FlatColumnsSheet=n}((i=t.sheet||(t.sheet={})).flat||(i.flat={}))}((t=e._view||(e._view={})).grid||(t.grid={}))}(n||(n={})),function(e){!function(e){!function(e){var i=function(e){function i(){var i=e.call(this,"div")||this;i.leaveHandler=function(e){return i.onMouseLeave(e)},i.list=new r.lists.UIList,i.list.markSelected=!0,i.list.setItemRendererFactory(i.itemRendererFactory),i.list.setLabelField("caption"),i.list.addEventListener(t._Event.CHANGE,(function(e){return i.onListChange(e)})),i.addChild(i.list),i.container.disableSelection();var n=new r.UIElement("div","wdr-arrow");return i.container.addChild(n),i}return a(i,e),i.prototype.showWith=function(e,t){this.origin=t,this.fieldData=e,this.setData(e),this.show(),this.container.addEventListener("mouseleave",this.leaveHandler),document.body.addEventListener("mousedown",this.leaveHandler);var i=t.getOffset(this.container.element.offsetParent);this.container.css("right",this.container.element.offsetParent.clientWidth-i.left+"px"),this.container.css("top",i.top-this.getHeight()/2+t.getHeight()/2+"px")},i.prototype.onMouseLeave=function(e){"mousedown"==e.type&&null!=r.UIElement.convert(event.target).closest("#wdr-aggregations-view")||(this.container.removeEventListener("mouseleave",this.leaveHandler),document.body.removeEventListener("mousedown",this.leaveHandler),this.hide())},i.prototype.onStageMouseDown=function(e){null==r.UIElement.convert(e.target).closest("#wdr-aggregations-view")&&this.hide()},i.prototype.setData=function(e){for(var t,i=0,r=[],n=0;n<e.availableAggregations.length;n++)t={caption:e.availableAggregationsCaptions[n],aggregation:e.availableAggregations[n]},null!=e.availableAggregationsTotalCaptions&&(t.totalCaption=e.availableAggregationsTotalCaptions[n]),r.push(t),e.availableAggregations[n]==e.aggregation&&(i=n);this.list.setDataProvider(r),this.list.setSelectedIndex(i),this.list.container.setScrollTop(0)},i.prototype.onListChange=function(e){this.dispatchWith(t._Event.CHANGE,this,{fieldData:this.fieldData,aggrData:e.data.selectedItem,origin:this.origin}),this.hide()},i.prototype.itemRendererFactory=function(e,t){var i=new r.renderers.SelectItemRenderer;return i.setData(e),i.setIndex(t),i},i}(r.UIComponentBase);e.AggregationsView=i}(e.config||(e.config={}))}(e._view||(e._view={}))}(n||(n={})),function(e){var t;!function(t){!function(t){var i=function(){function t(){}return t.prototype.update=function(e,t,i){this._structure=e,this._slice=t,this._dataSourceType=i,this.clearSearch(),this.updateSlice(),this.updateStructure()},t.prototype.updateSlice=function(){this.pages=this.getPages(),this.rows=this.getRows(),this.markValues(this.rows),this.columns=this.getColumns(),this.markValues(this.columns),this.measures=this.getMeasures(),this.markMeasures(this.measures)},t.prototype.updateStructure=function(){if(this._hierarchies=[],this.allHierarchies=[],this.addHierarchies(this._hierarchies,this.getAllHierarchies()),this.removeSingleDimensions(this._hierarchies),this.addMeasures(this._hierarchies,this.getAllMeasures()),this.sortHierarchies(this._hierarchies),t.expandFormulas){t.expandFormulas=!1;var i=s.ArrayUtils.find(this._hierarchies,"/"+e.model._labels.Labels.FIELDS_LIST_FORMULAS_GROUP_NAME,"uniqueName");null!=i&&this.expandField(i)}this.markSelected(this.pages),this.markSelected(this.columns),this.markSelected(this.rows),this.markSelected(this.measures)},t.prototype.onCalculatedValueAdded=function(e){if(null!=this._structure){var t=s.ArrayUtils.find(this.getAllMeasures(),e,"uniqueName");null!=t&&(t.isMeasure=!0,t.showAggregations=this.isMeasuresAsHierarchies,0<=(e=s.ArrayUtils.findIndex(this.measures,e,"uniqueName"))?(t.isChanged=!0,this.measures[e]=t):this.measures.push(t)),this.updateStructure()}},t.prototype.onCalculatedValueRemoved=function(e){null!=this._slice&&null!=this._structure&&(this.updateSlice(),this.updateStructure())},t.prototype.removeItemByName=function(e,t){for(var i=0;i<e.length;i++)if(e[i].uniqueName==t){e.splice(i,1);break}},t.prototype.markValues=function(t){null!=(t=s.ArrayUtils.find(t,e.data_.Cube.MEASURES_NAME,"uniqueName"))&&(t.caption=e.model._labels.Labels.FIELDS_LIST_VALUES,t.isValues=!0)},t.prototype.markMeasures=function(t){for(var i=0;i<t.length;i++)t[i].isMeasure=!0,t[i].showAggregations=e.model._options.OptionsManager.showAggregations},t.prototype.markSelected=function(e){for(var t,i=0;i<e.length;i++)e[i].isSelected=!0,t=this.findItem(e[i].uniqueName,e[i].isMeasure),this._slice.allHierarchies().getItem(e[i].uniqueName),null!=t&&this.selectField(t,!0)},t.prototype.selectField=function(e,t){if(e.isSelected=t,null!=e.parent&&e.parent.isSelected!=t&&(1==t||0==this.hasSelected(e.parent.children))&&this.selectField(e.parent,t),e.isLevelFolder&&0==t)for(var i=0;i<e.children.length;i++)this.selectField(e.children[i],t)},t.prototype.hasSelected=function(e){for(var t=0;t<e.length;t++)if(!0===e[t].isSelected)return!0;return!1},t.prototype.addHierarchies=function(t,i){for(var r,n,o=0;o<i.length;o++)null!=(r=this._structure.hierarchyToMeasure(i[o].uniqueName))&&r.type!=e.data_.types.MeasureType.COUNT&&""!=i[o].folder?(null==(n=s.ArrayUtils.find(this.allHierarchies,"Folder."+i[o].folder,"uniqueName"))&&((n={isFolder:!0}).uniqueName="Folder."+i[o].folder,n.caption=i[o].folder,n.children=[],t.push(n),this.allHierarchies.push(n)),i[o].level=1,i[o].parent=n,n.children.push(i[o])):(null==(r=s.ArrayUtils.find(t,i[o].dimensionUniqueName,"uniqueName"))&&((r={isFolder:!0}).uniqueName=i[o].dimensionUniqueName,r.caption=i[o].dimensionCaption,r.children=[],r.level=0,t.push(r),this.allHierarchies.push(r)),i[o].isLevel?(r=s.ArrayUtils.find((r=""==i[o].folder?r:n).children,i[o].hierarchyName,"uniqueName"),i[o].level=r.level+1,i[o].parent=r,null==r.children&&(r.children=[]),r.children.push(i[o]),r.isLevelFolder=!0):""!=i[o].folder?(null==(n=s.ArrayUtils.find(r.children,r.uniqueName+i[o].folder,"uniqueName"))&&((n={isFolder:!0}).uniqueName=r.uniqueName+i[o].folder,n.caption=i[o].folder,n.children=[],n.level=1,n.parent=r,r.children.push(n),this.allHierarchies.push(n)),i[o].level=2,i[o].parent=n,n.children.push(i[o])):(i[o].level=1,i[o].parent=r,r.children.push(i[o]))),this.allHierarchies.push(i[o])},t.prototype.addMeasures=function(t,i){for(var r,n={},o=0;o<i.length;o++){if(i[o].isMeasure=!0,i[o].showAggregations=e.model._options.OptionsManager.showAggregations,i[o].calculated&&(i[o].groupName=e.model._labels.Labels.FIELDS_LIST_FORMULAS_GROUP_NAME),this.isMeasuresAsHierarchies&&(r=this.toHierarchyUniqueName(i[o].uniqueName),r=s.ArrayUtils.find(this.allHierarchies,r,"uniqueName")),this.isMeasuresAsHierarchies&&null!=r)r.measureItem=i[o],r.measureItem.hierarchyItem=r,i[o].parent=r.parent;else if(""!=i[o].groupName){var a=this.addMeasureFolders(n,i[o].groupName,i[o].folder.split("\\"),i[o].calculated),l=a.folder;null!=l&&0>l.children.indexOf(i[o])&&l.children.push(i[o]),null!=a.root&&0>t.indexOf(a.root)&&t.push(a.root),i[o].level=a.folder.level+1,i[o].parent=l}else i[o].level=0,t.push(i[o]);this.allHierarchies.push(i[o])}},t.prototype.addMeasureFolders=function(e,t,i,r){void 0===r&&(r=!1),i.unshift(t),t="";for(var n,o,a,l=0,c=0;c<i.length;c++){var u=t+"/"+i[c];s.nullOrEmpty(i[c])||(null==(o=e[u])&&((o={}).caption=i[c],o.uniqueName=u,o.folder=t,o.children=[],o.level=l,o.isFolder=!0,o.isMeasuresFolder=!0,o.isCalculatedMeasuresFolder=r,this.allHierarchies.push(o),e[o.uniqueName]=o),(o.parent=n)&&n.children&&0>n.children.indexOf(o)&&n.children.push(o),null==a&&(a=o),e=e[t+="/"+i[c]],n=o,l++)}return{folder:o,root:a}},t.prototype.removeSingleDimensions=function(e){for(var t,i=0;i<e.length;i++)if(!0===e[i].isFolder&&1==e[i].children.length&&!0!==e[i].children[0].isFolder&&!e[i].children[0].calculated&&((t=e[i].children[0]).level=0,t.parent=null,e.splice(i,1,t),t.children))for(var r=0;r<t.children.length;r++)t.children[r].level-=1},t.prototype.sortHierarchies=function(e){var t=this;e.sort((function(e,i){var r=t.getFieldRank(e),n=t.getFieldRank(i);return r==n?e.caption.localeCompare(i.caption):n-r}))},t.prototype.getFieldRank=function(e){return!0===e.isLevel?0:!0===e.isFolder&&!0!==e.isMeasuresFolder?3:!0!==e.isFolder&&!0!==e.isMeasure?2:!0===e.isFolder&&!0===e.isMeasuresFolder?1:0},t.prototype.collapseField=function(e){if(!this.isSearch){for(var t=this._hierarchies.indexOf(e)+1,i=0;i<e.children.length;i++)!0===e.children[i].isExpanded&&this.collapseField(e.children[i]);this._hierarchies.splice(t,e.children.length),e.isExpanded=!1}},t.prototype.expandField=function(e){if(!this.isSearch){var t=this._hierarchies.indexOf(e)+1;e.isLevelFolder||this.sortHierarchies(e.children),s.ArrayUtils.insert(this._hierarchies,e.children,t),e.isExpanded=!0}},t.prototype.toHierarchyUniqueName=function(e){return null!=(e=this._structure.measureToHierarchy(e))?e.uniqueName:""},t.prototype.toMeasureUniqueName=function(e){return null!=(e=this._structure.hierarchyToMeasure(e))?e.uniqueName:""},t.prototype.findHierarchy=function(e){for(var t=0;t<this.allHierarchies.length;t++)if(!this.allHierarchies[t].isMeasure&&!this.allHierarchies[t].isFolder&&this.allHierarchies[t].uniqueName==e)return this.allHierarchies[t]},t.prototype.findMeasure=function(e){for(var t=0;t<this.allHierarchies.length;t++)if(this.allHierarchies[t].isMeasure&&!this.allHierarchies[t].isFolder&&this.allHierarchies[t].uniqueName==e)return this.allHierarchies[t]},t.prototype.findItem=function(e,t){return void 0===t&&(t=!1),t?this.findMeasure(e):this.findHierarchy(e)},t.prototype.isValidSlice=function(){return 0<this.measures.length},t.prototype.getSlice=function(){return{pages:this.toPlainArray(this.pages),rows:this.toPlainArray(this.rows),columns:this.toPlainArray(this.columns),measures:this.toPlainArray(this.measures),flatOrder:this._slice?this._slice.flatOrder:[]}},t.prototype.isSliceDifferent=function(e){return null==this._slice||this.isDifferent(e.pages,this._slice.pages.toArray())||this.isDifferent(e.rows,this._slice.rows.toArray())||this.isDifferent(e.columns,this._slice.columns.toArray())||this.isDifferent(e.measures,this._slice.measures_.toArray())},t.prototype.toPlainArray=function(e){for(var t,i=[],r=0;r<e.length;r++)t={uniqueName:e[r].uniqueName},e[r].isMeasure&&(t.aggregation=e[r].aggregation,t.isChanged=e[r].isChanged),e[r].isLevel&&(t.activeLevelName=e[r].uniqueName,t.uniqueName=e[r].hierarchyName),i.push(t);return i},t.prototype.isDifferent=function(e,t){if(e.length!=t.length)return!0;for(var i=0;i<t.length;i++)if(e[i].uniqueName!=t[i].uniqueName||e[i].aggregation!=t[i].aggregation||e[i].activeLevelName!=t[i].activeLevelName||e[i].isChanged)return!0;return!1},Object.defineProperty(t.prototype,"isMeasuresAsHierarchies",{get:function(){var t=this._dataSourceType;return t==e.data_.consts.DataSourceType.CSV||t==e.data_.consts.DataSourceType.JSON},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isExpandAll",{get:function(){for(var e=0;e<this._hierarchies.length;e++)if((this._hierarchies[e].isFolder||this._hierarchies[e].isMeasuresFolder||this._hierarchies[e].isLevelFolder)&&!this._hierarchies[e].isExpanded)return!0;return!1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hasFolders",{get:function(){for(var e=0;e<this._hierarchies.length;e++)if(this._hierarchies[e].isFolder||this._hierarchies[e].isMeasuresFolder||this._hierarchies[e].isLevelFolder)return!0;return!1},enumerable:!0,configurable:!0}),t.prototype.collapseAll=function(){if(!this.isSearch){for(var e=0;e<this._hierarchies.length;e++)(this._hierarchies[e].isFolder||this._hierarchies[e].isMeasuresFolder||this._hierarchies[e].isLevelFolder)&&(this._hierarchies[e].isExpanded=!1);var t=[];for(e=0;e<this._hierarchies.length;e++)0==this._hierarchies[e].level&&t.push(this._hierarchies[e]);this._hierarchies.splice(0,this._hierarchies.length),s.ArrayUtils.insert(this._hierarchies,t,0)}},t.prototype.expandAll=function(){if(!this.isSearch){this.collapseAll();for(var e=0;e<this._hierarchies.length;e++)(this._hierarchies[e].isFolder||this._hierarchies[e].isLevelFolder)&&this._expandField(this._hierarchies[e],e+1)}},t.prototype._expandField=function(e,t){e.isExpanded=!0,null!=e.children&&0<e.children.length&&(this.sortHierarchies(e.children),s.ArrayUtils.insert(this._hierarchies,e.children,t))},t.prototype.getPages=function(){return null!=this._slice?this.convertHierarchies(this._slice.pages):[]},t.prototype.getRows=function(){return null!=this._slice?this.convertHierarchies(this._slice.rows):[]},t.prototype.getColumns=function(){return null!=this._slice?this.convertHierarchies(this._slice.columns):[]},t.prototype.getMeasures=function(){return null!=this._slice?this.convertMeasures(this._slice.measures_):[]},t.prototype.getAllHierarchies=function(){return null!=this._structure?this.convertHierarchies(this._structure.allHierarchies(!1),!0):[]},t.prototype.getAllMeasures=function(){return null!=this._structure?this.convertMeasures(this._structure.measures_):[]},t.prototype.convertHierarchies=function(e,t){void 0===t&&(t=!1);for(var i=[],r=0;r<e.length;r++){var n=e.getItemAt(r);if(i.push({caption:n.caption,uniqueName:n.uniqueName,dimensionUniqueName:n.dimension.uniqueName,dimensionCaption:n.dimension.caption,folder:n.folder,isLevel:!1,isLevelFolder:n.isHierarchy&&t}),n.isHierarchy&&t)for(var o=0;o<n.levels_.length;o++)if(0!=o){var s=n.levels_.getItemAt(o);i.push({caption:s.caption,uniqueName:s.uniqueName,dimensionUniqueName:n.dimension.uniqueName,dimensionCaption:n.dimension.caption,folder:n.folder,hierarchyName:n.uniqueName,hierarchyCaption:n.caption,isLevel:!0,isLevelFolder:!1})}}return i},t.prototype.convertMeasures=function(t){for(var i=[],r=0;r<t.length;r++){var n=t.getItemAt(r),o=e.data_._structure.GenericMeasure.toObject(n),s=n.availableAggregations;0!=n.availableAggregations.length||n.calculated||(s=e.data_.consts.AggregationName.ALL_AGGREGATIONS),o.availableAggregations=s,o.availableAggregationsCaptions=e.data_.consts.AggregationName.aggregationCaptions(s),o.availableAggregationsTotalCaptions=e.data_.consts.AggregationName.aggregationTotalCaptions(s),i.push(o)}return i},t.prototype.search=function(e){if(e=e.toLowerCase(),this.searchPhrase!=e){this.searchPhrase=e,this.searchedHierarchies=[];for(var t=this.allHierarchies.length,i=0;i<t;i++){var r=this.allHierarchies[i];r.isFolder||r.isMeasure&&this.isMeasuresAsHierarchies||!s.StringUtils.contains(r.caption,e)||(this.addParents(r,this.searchedHierarchies),this.searchedHierarchies.push(r))}}},t.prototype.addParents=function(e,t){if(e.parent&&0>t.indexOf(e.parent)){for(var i=[];null!=e.parent;)i.push(e.parent),e=e.parent;i=i.reverse();for(var r=0;r<i.length;r++)0>t.indexOf(i[r])&&t.push(i[r])}},t.prototype.clearSearch=function(){this.searchPhrase="",this.searchedHierarchies=null},Object.defineProperty(t.prototype,"isSearch",{get:function(){return!s.nullOrEmpty(this.searchPhrase)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isSearchNeeded",{get:function(){return this.allHierarchies&&50<this.allHierarchies.length},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isCalculatedAvailable",{get:function(){return e.model._options.OptionsManager.showCalculatedValuesButton},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hierarchies",{get:function(){return this.isSearch?this.searchedHierarchies:this._hierarchies},enumerable:!0,configurable:!0}),t.expandFormulas=!1,t}();t.PivotFieldsModel=i}(t._pivot||(t._pivot={}))}((t=e._view||(e._view={})).config||(t.config={}))}(n||(n={})),function(e){var i,n,o,l;i=e._view||(e._view={}),n=i.config||(i.config={}),o=n._pivot||(n._pivot={}),l=function(l){function c(e){var i=l.call(this)||this;return i.type="pivot",i.calculatedValueAddedHandler=function(e){return i.onCalculatedValueAdded(e)},i.calculatedValueRemovedHandler=function(e){return i.onCalculatedValueRemoved(e)},i.model=new o.PivotFieldsModel,i.view=new o.PivotFieldsView(i,e),i.view.addEventListener(t._Event.CLOSED,(function(e){return i.dispatch(e)})),i.lists=[i.view.lstPages,i.view.lstRows,i.view.lstColumns,i.view.lstMeasures],i.view.btnOk&&i.view.btnOk.addEventListener(r.UIButton.CLICK_EVENT,(function(){return i.onOkClick()})),i.view.btnCancel&&i.view.btnCancel.addEventListener(r.UIButton.CLICK_EVENT,(function(){return i.onCancelClick()})),null!=i.view.aggrView&&i.view.aggrView.addEventListener(t._Event.CHANGE,(function(e){return i.onAggregationChange(e)})),i.view.lstHierarchies&&(i.view.lstHierarchies.container.addEventListener("click",(function(e){return i.onHierarchyFieldClick(e)})),i.view.lstHierarchies.droppable({onDrop:function(e,t,r,n){return i.onHierarchiesDrop(e,t,r,n)},onDragEnter:function(e,t,r,n){return i.onHierarchiesDragEnterOrOver(e,t,r,n)},onDragOver:function(e,t,r,n){return i.onHierarchiesDragEnterOrOver(e,t,r,n)},onDragLeave:function(e,t,r,n){return i.onDragLeave(e,t,r,n)},itemSelector:"li"}),i.view.lstHierarchies.container.disableSelection()),e={onDrop:function(e,t,r,n){return i.onDrop(e,t,r,n)},onDragEnter:function(e,t,r,n){return i.onDragEnterOrOver(e,t,r,n)},onDragOver:function(e,t,r,n){return i.onDragEnterOrOver(e,t,r,n)},onDragLeave:function(e,t,r,n){return i.onDragLeave(e,t,r,n)},itemSelector:"li"},i.view.lstPages&&(i.view.lstPages.droppable(e),i.view.lstPages.container.addEventListener("dblclick",(function(e){return i.onFieldDoubleClick(e)})),i.view.lstPages.container.disableSelection()),i.view.lstRows&&(i.view.lstRows.droppable(e),i.view.lstRows.container.addEventListener("dblclick",(function(e){return i.onFieldDoubleClick(e)})),i.view.lstRows.container.disableSelection()),i.view.lstColumns&&(i.view.lstColumns.droppable(e),i.view.lstColumns.container.addEventListener("dblclick",(function(e){return i.onFieldDoubleClick(e)})),i.view.lstColumns.container.disableSelection()),i.view.lstMeasures&&(i.view.lstMeasures.container.addEventListener("click",(function(e){return i.onMeasureFieldClick(e)})),i.view.lstMeasures.container.addEventListener("dblclick",(function(e){return i.onFieldDoubleClick(e)})),i.view.lstMeasures.droppable(e),i.view.lstMeasures.container.disableSelection()),i.view.btnAddMeasure&&i.view.btnAddMeasure.addEventListener(r.UIButton.CLICK_EVENT,(function(){return i.onAddMeasureClick()})),i.view.btnCollapseExpand&&i.view.btnCollapseExpand.addEventListener(r.UIButton.CLICK_EVENT,(function(){return i.onCollapseExpandClick()})),i.view.inpSearch&&(i.view.inpSearch.setChangeDelay(500),i.view.inpSearch.addEventListener(r.UITextInput.CHANGE_EVENT,(function(){return i.onSearchChange()}))),i}return a(c,l),c.prototype.onCancelClick=function(){this.view.close()},c.prototype.onOkClick=function(){this.applySlice(),this.view.close()},c.prototype.onSearchChange=function(){this.model.search(this.view.inpSearch.getText()),this.view.lstHierarchies.container.toggleClass("wdr-searched",this.model.isSearch),this.view.lstHierarchies.setDataProvider(this.model.hierarchies),this.validateList(this.view.lstHierarchies),this.view.btnCollapseExpand&&this.view.btnCollapseExpand.isVisible(this.model.hasFolders&&!this.model.isSearch)},c.prototype.applySlice=function(){var e=this.model.getSlice();this.model.isSliceDifferent(e)&&this.dispatchWith(n.FieldsView.EVENT_APPLY_SLICE,this,e)},c.prototype.onCalculatedValueAdded=function(t){e.model.PivotModel.getInstance().removeEventListener(i.calculated.CalculatedView.EVENT_CALCULATED_VALUE_ADDED,this.calculatedValueAddedHandler),this.model.onCalculatedValueAdded(t.data.measureUniqueName),this.updateView()},c.prototype.onCalculatedValueRemoved=function(t){e.model.PivotModel.getInstance().removeEventListener(i.calculated.CalculatedView.EVENT_CALCULATED_VALUE_REMOVED,this.calculatedValueRemovedHandler),this.model.onCalculatedValueRemoved(t.data),this.updateView()},c.prototype.onAddMeasureClick=function(){e.model.PivotModel.getInstance().dispatchWith(i.ViewEvent.CALCULATED_VIEW_OPEN),e.model.PivotModel.getInstance().addEventListener(i.calculated.CalculatedView.EVENT_CALCULATED_VALUE_ADDED,this.calculatedValueAddedHandler)},c.prototype.onCollapseExpandClick=function(){this.model.isExpandAll?this.model.expandAll():this.model.collapseAll(),this.validateList(this.view.lstHierarchies),this.view.setLabels()},c.prototype.onFieldDoubleClick=function(e){var t=r.UIElement.convert(e.target).closest("ul");null!=t&&(t=this.getListById(t.attr("id")),null!=(e=r.UIElement.convert(e.target).closest("li"))&&(e=parseInt(e.attr("data-index")),this.removeField(t,e)))},c.prototype.onMeasureFieldClick=function(e){var t=r.UIElement.convert(e.target).closest("li");null!=t&&(t=parseInt(t.attr("data-index")),t=this.model.measures[t],"wdr-aggr-display"==r.UIElement.convert(e.target).attr("id")&&this.view.aggrView.showWith(t,r.UIElement.convert(e.target)))},c.prototype.onAggregationChange=function(t){var i=t.data.fieldData,n=t.data.aggrData;r.UIElement.convert(t.data.origin),i.aggregation=n.aggregation,i.caption=e.model._options.OptionsManager.showAggregationLabels?s.StringUtils.bind(n.totalCaption,i.name):i.name,this.view.lstMeasures.validateItem(i),null!=(t=s.ArrayUtils.find(this.model.hierarchies,i.uniqueName,"uniqueName"))&&(this.model.isMeasuresAsHierarchies&&null!=t.measureItem&&(t=t.measureItem),t.aggregation=i.aggregation,t.caption=i.caption,this.view.lstHierarchies.validateItem(t))},c.prototype.onHierarchyFieldClick=function(t){if(null!=(n=r.UIElement.convert(t.target).closest("li"))){var n=parseInt(n.attr("data-index")),o=this.model.hierarchies[n];if("wdr-aggr-display"==r.UIElement.convert(t.target).attr("id"))this.view.aggrView.showWith(o,r.UIElement.convert(t.target));else if("wdr-calc-display"==r.UIElement.convert(t.target).attr("id"))e.model.PivotModel.getInstance().dispatchWith(i.ViewEvent.CALCULATED_VIEW_OPEN,null,{measureName:o.uniqueName}),e.model.PivotModel.getInstance().addEventListener(i.calculated.CalculatedView.EVENT_CALCULATED_VALUE_ADDED,this.calculatedValueAddedHandler),e.model.PivotModel.getInstance().addEventListener(i.calculated.CalculatedView.EVENT_CALCULATED_VALUE_REMOVED,this.calculatedValueRemovedHandler);else if(o.isFolder||o.isLevelFolder&&"wdr-moreicon-display"!=r.UIElement.convert(t.target).attr("id"))!0===o.isExpanded?this.model.collapseField(o):this.model.expandField(o),this.validateList(this.view.lstHierarchies),this.view.setLabels();else{if(1==o.isSelected||null!=o.measureItem&&1==o.measureItem.isSelected)1==o.isSelected&&(this.model.selectField(o,!1),this.findAndRemoveField(o)),null!=o.measureItem&&1==o.measureItem.isSelected&&(this.model.selectField(o.measureItem,!1),this.findAndRemoveField(o.measureItem));else if(o.isMeasure)this.model.selectField(o,!0),this.model.measures.push(o),this.validateList(this.view.lstMeasures);else if(o.measureItem&&o.measureItem.type!=e.data_.types.MeasureType.COUNT&&o.measureItem.type!=e.data_.types.MeasureType.DATE)this.model.selectField(o.measureItem,!0),this.model.measures.push(o.measureItem),this.validateList(this.view.lstMeasures);else{if(o.isLevel)for(o.parent.isSelected&&this.findAndRemoveField(o.parent),t=0;t<o.parent.children.length;t++){var s=o.parent.children[t];s.uniqueName!=o.uniqueName&&(s.isSelected&&this.findAndRemoveField(s),s.isSelected=!1)}this.model.selectField(o,!0),this.model.rows.push(o),this.validateList(this.view.lstRows)}this.validateItemRecursivelyAt(this.view.lstHierarchies,n),this.validateSlice()}}},c.prototype.validateItemRecursivelyAt=function(e,t){e.validateItemAt(t);var i=e.getDataProvider()[t];if(null!=i.parent&&this.validateItemRecursively(e,i.parent),i.isLevelFolder)for(var r=0;r<i.children.length;r++)e.validateItem(i.children[r]);if(i.isLevel)for(r=0;r<i.parent.children.length;r++)e.validateItem(i.parent.children[r])},c.prototype.validateItemRecursively=function(e,t){if(e.validateItem(t),t.parent&&this.validateItemRecursively(e,t.parent),t.isLevelFolder)for(var i=0;i<t.children.length;i++)e.validateItem(t.children[i]);if(t.isLevel)for(i=0;i<t.parent.children.length;i++)e.validateItem(t.parent.children[i])},c.prototype.onDragStart=function(e){return!0},c.prototype.onHierarchiesDrop=function(e,t,i,r){e&&e.closest("ul")&&(t=parseInt(e.attr("data-index")),(e=this.getListById(e.closest("ul").attr("id")))!=this.view.lstHierarchies&&this.removeField(e,t))},c.prototype.onHierarchiesDragEnterOrOver=function(e,t,i,r){e&&e.closest("ul")&&(e=this.getListById(e.closest("ul").attr("id")))!=this.view.lstHierarchies&&(e.container.hasClass("wdr-droppable")?t&&t.addClass("wdr-droppable-valid"):t&&t.addClass("wdr-droppable-invalid"))},c.prototype.onDragEnterOrOver=function(e,t,i,n){this.removeDropIndicator(),e&&e.closest("ul")&&(i instanceof r.lists.UIList||(i=this.getListById(i.attr("id"))),(t=this.getListById(e.closest("ul").attr("id"))).container.hasClass("wdr-droppable")&&this.isDropAllowed(this.getDataByElement(e,t),t,i)&&(n instanceof MouseEvent?this.showIndicator(r.UIElement.convert(n.target)):(e=n.changedTouches[0],this.showIndicator(r.UIElement.convert(document.elementFromPoint(e.clientX,e.clientY))))))},c.prototype.isDropAllowed=function(e,t,i){return!(e.isValues&&i!=this.view.lstColumns&&i!=this.view.lstRows||0==this.model.isMeasuresAsHierarchies&&(i!=this.view.lstMeasures&&e.isMeasure||i==this.view.lstMeasures&&!e.isMeasure)||e.calculated&&i!=this.view.lstMeasures||t==this.view.lstHierarchies&&null!=s.ArrayUtils.find(i.getDataProvider(),e.uniqueName,"uniqueName"))},c.prototype.getDataByElement=function(e,t){var i=parseInt(e.attr("data-index"));return t.getDataProvider()[i]},c.prototype.onDragLeave=function(e,t,i,r){this.removeDropIndicator(),e&&e.closest("ul")&&t&&(t.removeClass("wdr-droppable-valid"),t.removeClass("wdr-droppable-invalid"))},c.prototype.onDrop=function(e,t,i,n){this.removeDropIndicator(),e&&e.closest("ul")&&(t instanceof r.lists.UIList||(t=this.getListById(t.attr("id"))),n=this.getListById(e.closest("ul").attr("id")),0!=this.isDropAllowed(this.getDataByElement(e,n),n,t)&&(i=i?parseFloat(i.attr("data-index")):t.getDataProvider().length,e=parseInt(e.attr("data-index")),n!=t||e!=i))&&(n==this.view.lstHierarchies&&t!=this.view.lstHierarchies?this.addField(n,t,e,i):this.moveField(n,t,e,i),this.validateView())},c.prototype.showIndicator=function(e){var t=e.closest("li");null!=t?(this._dropIndicator=this.createDropIndicator(),t.before(this._dropIndicator)):null!=(e=e.closest("ul"))&&(this._dropIndicator=this.createDropIndicator(),0<e.element.children.length?e.append(this._dropIndicator):e.prepend(this._dropIndicator))},c.prototype.createDropIndicator=function(){return new r.UIElement("div","wdr-drop-indicator")},c.prototype.removeDropIndicator=function(){this._dropIndicator&&(this._dropIndicator.removeFromParent(!0),this._dropIndicator=null)},c.prototype.moveField=function(e,t,i,r){var n=e.getDataProvider()[i];e==t?(i<r&&(r-=1),(e=t.getDataProvider()).splice(r,0,e.splice(i,1)[0])):(n=e.getDataProvider()[i],e.getDataProvider().splice(i,1),e.validateNow(),t==this.view.lstMeasures&&(this.model.selectField(n,!1),n=this.model.findMeasure(this.model.toMeasureUniqueName(n.uniqueName))),e==this.view.lstMeasures&&(this.model.selectField(n,!1),n=this.model.findHierarchy(this.model.toHierarchyUniqueName(n.uniqueName))),null!=n&&(this.model.selectField(n,!0),this.findAndRemoveField(n),t.getDataProvider().splice(r,0,n))),this.validateList(t),this.validateSlice()},c.prototype.addField=function(e,t,i,r){if((i=e.getDataProvider()[i]).isLevel){i.parent.isSelected&&this.findAndRemoveField(i.parent);for(var n=0;n<i.parent.children.length;n++){var o=i.parent.children[n];o.uniqueName!=i.uniqueName&&(o.isSelected&&this.findAndRemoveField(o),o.isSelected=!1)}this.validateItemRecursively(this.view.lstHierarchies,i)}this.model.isMeasuresAsHierarchies&&t==this.view.lstMeasures&&null!=i.measureItem&&(i=i.measureItem),i.isSelected?(this.model.selectField(i,!1),this.findAndRemoveField(i,e,!0),this.model.selectField(i,!0)):(this.model.selectField(i,!0),e=s.ArrayUtils.findIndex(this.view.lstHierarchies.getDataProvider(),i.uniqueName,"uniqueName"),this.validateItemRecursivelyAt(this.view.lstHierarchies,e),this.view.lstHierarchies.validateItemAt(e)),t.getDataProvider().splice(r,0,i),this.validateList(t),this.validateSlice()},c.prototype.removeField=function(e,t){if(!(e.getDataProvider().length<=t)){var i=e.getDataProvider()[t];i.isValues||(e.getDataProvider().splice(t,1),this.validateList(e),null!=(i=this.model.findItem(i.uniqueName,i.isMeasure))&&(this.model.selectField(i,!1),this.validateItemRecursively(this.view.lstHierarchies,null!=i.hierarchyItem?i.hierarchyItem:i),i.isLevel&&(this.model.selectField(i.parent,!1),this.validateItemRecursively(this.view.lstHierarchies,i.parent))),this.validateSlice())}},c.prototype.findAndRemoveField=function(e,t,i){void 0===t&&(t=null),void 0===i&&(i=!1);for(var r=-1,n=0;n<this.lists.length;n++)this.lists[n]==t||this.lists[n]==this.view.lstMeasures&&i||(-1==(r=s.ArrayUtils.findIndex(this.lists[n].getDataProvider(),e.uniqueName,"uniqueName"))&&(r=s.ArrayUtils.findIndex(this.lists[n].getDataProvider(),e.uniqueName,"hierarchyName")),-1<r&&(this.lists[n].getDataProvider().splice(r,1),this.validateList(this.lists[n])))},c.prototype.getListById=function(e){switch(e){case this.view.lstHierarchies.getId():return this.view.lstHierarchies;case this.view.lstPages.getId():return this.view.lstPages;case this.view.lstRows.getId():return this.view.lstRows;case this.view.lstColumns.getId():return this.view.lstColumns;case this.view.lstMeasures.getId():return this.view.lstMeasures}return null},c.prototype.update=function(e,t,i,r){void 0===i&&(i=""),void 0===r&&(r=!0),r&&this.model.update(e,t,i),this.updateView()},c.prototype.validateSlice=function(){this.view.btnOk&&this.view.btnOk.setEnabled(this.model.isValidSlice())},Object.defineProperty(c.prototype,"isExpandAll",{get:function(){return this.model.isExpandAll},enumerable:!0,configurable:!0}),c.prototype.updateView=function(){var e=this;this.view.reset&&this.view.reset(),this.view.btnAddMeasure&&this.view.btnAddMeasure.isVisible(this.model.isCalculatedAvailable),this.view.lstHierarchies&&this.view.lstHierarchies.setDataProvider(this.model.hierarchies,!1),this.view.lstPages&&this.view.lstPages.setDataProvider(this.model.pages,!1),this.view.lstRows&&this.view.lstRows.setDataProvider(this.model.rows,!1),this.view.lstColumns&&this.view.lstColumns.setDataProvider(this.model.columns,!1),this.view.lstMeasures&&this.view.lstMeasures.setDataProvider(this.model.measures,!1),this.view.btnCollapseExpand&&this.view.btnCollapseExpand.isVisible(this.model.hasFolders),this.view.searchWrap&&this.view.searchWrap.isVisible(this.model.isSearchNeeded),this.view.inpSearch&&(this.view.inpSearch.clear(!1),this.model.clearSearch()),this.view.setLabels(),this.view.container.requestAnimationFrame((function(){e.validateView()}))},c.prototype.validateList=function(e){var t=this;e.validateNow();var i={onDragStart:function(e){return t.onDragStart(e)},createHelper:function(e){return t.view.createHelper(e)}};s.browserVersion().isMobile&&(i.handle="#wdr-drag-handle");var r=e.container.find("li",!0);if(e==this.view.lstHierarchies)for(e=0;e<r.length;e++)r[e].hasClass("wdr-folder")&&!r[e].hasClass("wdr-level-folder")||r[e].draggable(i);else for(e.droppable({onDrop:function(e,i,r,n){return t.onDrop(e,i,r,n)},onDragEnter:function(e,i,r,n){return t.onDragEnterOrOver(e,i,r,n)},onDragOver:function(e,i,r,n){return t.onDragEnterOrOver(e,i,r,n)},onDragLeave:function(e,i,r,n){return t.onDragLeave(e,i,r,n)},itemSelector:"li"}),e=0;e<r.length;e++)r[e].draggable(i)},c.prototype.validateView=function(){try{this.validateSlice(),this.validateList(this.view.lstHierarchies),this.validateList(this.view.lstPages),this.validateList(this.view.lstRows),this.validateList(this.view.lstColumns),this.validateList(this.view.lstMeasures)}catch(l){}},c}(t.EventDispatcher),o.PivotFieldsController=l}(n||(n={})),function(e){var t;!function(t){var i,n;i=t._pivot||(t._pivot={}),n=function(i){function n(e,t){var r=i.call(this,t)||this;return r.toolbarHeight=0,r.controller=e,r.addClass("wdr-pivot-fields"),r.setControls(),r.container.disableSelection(),r.container.resizable({sides:["left","right"],resize:function(e){return r.onViewResize(e)}}),r}return a(n,i),n.prototype.onViewResize=function(e){this.setWidth(e.size.width+(e.size.width-e.originalSize.width)),this.addLayoutClasses(),this.centerPosition()},n.prototype.setControls=function(){var i=this,n=new r.UIComponentBase("div","wdr-popup-header wdr-ui-row");this.addChild(n);var o=new r.UIComponentBase("div","wdr-ui-col wdr-vam");n.addChild(o),this.lblTitle=new r.UILabel(e.model._labels.Labels.FIELDS_LIST_TITLE),this.lblTitle.addClass("wdr-popup-title"),o.addChild(this.lblTitle),this.lblSubtitle=new r.UILabel(e.model._labels.Labels.FIELDS_LIST_SUBTITLE),this.lblSubtitle.addClass("wdr-popup-subtitle"),o.addChild(this.lblSubtitle),o=new r.UIComponentBase("div","wdr-ui-col wdr-vam wdr-tar wdr-ui-btns-row"),n.addChild(o),this.btnAddMeasure=new r.UIButton("wdr-ui-btn-light wdr-icon-act_calc"),this.btnAddMeasure.setId("wdr-btn-add-measure"),this.btnAddMeasure.setLabel(e.model._labels.Labels.FIELDS_LIST_ADD_CALCULATED_MEASURE),o.addChild(this.btnAddMeasure),this.btnCancel=new r.UIButton,this.btnCancel.setLabel(e.model._labels.Labels.BUTTON_CANCEL),this.btnOk=new r.UIButton("wdr-ui-btn-dark"),this.btnOk.setLabel(e.model._labels.Labels.BUTTON_APPLY),s.OSUtil.isIOS||s.OSUtil.isMac?(o.addChild(this.btnCancel),o.addChild(this.btnOk)):(o.addChild(this.btnOk),o.addChild(this.btnCancel)),n=new r.UIComponentBase("div","wdr-popup-content"),this.addChild(n);var a=new r.UIComponentBase("div","wdr-ui-row");n.addChild(a),o=new r.UIComponentBase("div","wdr-ui-col-3"),a.addChild(o);var l=new r.UIComponentBase("div","wdr-list-wrap wdr-list-wrap-all");o.addChild(l);var c=new r.UIComponentBase("div","wdr-list-header wdr-list-header-wide");l.addChild(c),o=new r.UIComponentBase("div","wdr-list-header-label-wrap"),c.addChild(o),this.lblHierarchies=new r.UILabel(e.model._labels.Labels.FIELDS_LIST_ALL_FIELDS),o.addChild(this.lblHierarchies),this.btnCollapseExpand=new r.UIButton("wdr-ui-link-btn"),this.btnCollapseExpand.removeClass("wdr-ui-btn"),this.btnCollapseExpand.setId("wdr-btn-collapse-expand-all"),this.btnCollapseExpand.setLabel(e.model._labels.Labels.FIELDS_LIST_COLLAPSE_ALL),o.addChild(this.btnCollapseExpand),this.searchWrap=new r.UIComponentBase("div","wdr-search-wrap"),c.addChild(this.searchWrap),(o=new r.UIComponentBase("button","wdr-search-btn")).addEventListener("click",(function(){return i.onSearchClick()})),this.searchWrap.addChild(o),c=new r.UIComponentBase("span","wdr-ui-icon wdr-icon-act_search"),o.addChild(c),this.inpSearch=new r.UITextInput,this.inpSearch.addClass("wdr-search-inp"),this.searchWrap.addChild(this.inpSearch),(o=new r.UIComponentBase("span","wdr-close-search wdr-ui-icon wdr-icon-act_close")).addEventListener("click",(function(){return i.onSearchCloseClick()})),this.searchWrap.addChild(o),c=new r.UIComponentBase("div","wdr-list-content"),l.addChild(c),this.lstHierarchies=new r.lists.UIList,this.lstHierarchies.setId("wdr-lst-hierarchies"),this.lstHierarchies.setItemRendererFactory((function(e,t){return i.selectableItemRendererFactory(e,t)})),this.lstHierarchies.setLabelField("caption"),c.addChild(this.lstHierarchies),o=new r.UIComponentBase("div","wdr-ui-col-3"),a.addChild(o),(l=new r.UIComponentBase("div","wdr-list-wrap wdr-list-wrap-pages")).setId("wdr-wrap-pages"),o.addChild(l),c=new r.UIComponentBase("div","wdr-list-header"),l.addChild(c),this.lblPages=new r.UILabel(e.model._labels.Labels.FIELDS_LIST_FILTERS),c.addChild(this.lblPages),c=new r.UIComponentBase("div","wdr-list-content"),l.addChild(c),this.lstPages=new r.lists.UIList,this.lstPages.setId("wdr-lst-pages"),this.lstPages.setItemRendererFactory((function(e,t){return i.fieldItemRendererFactory(e,t)})),this.lstPages.setLabelField("caption"),c.addChild(this.lstPages),this.lblPagesPrompt=new r.UILabel(e.model._labels.Labels.FIELDS_LIST_DROP_FIELD),this.lblPagesPrompt.addClass("wdr-prompt"),l.addChild(this.lblPagesPrompt),(l=new r.UIComponentBase("div","wdr-list-wrap wdr-list-wrap-rows")).setId("wdr-wrap-rows"),o.addChild(l),c=new r.UIComponentBase("div","wdr-list-header"),l.addChild(c),this.lblRows=new r.UILabel(e.model._labels.Labels.FIELDS_LIST_ROWS),c.addChild(this.lblRows),c=new r.UIComponentBase("div","wdr-list-content"),l.addChild(c),this.lstRows=new r.lists.UIList,this.lstRows.setId("wdr-lst-rows"),this.lstRows.setItemRendererFactory((function(e,t){return i.fieldItemRendererFactory(e,t)})),this.lstRows.setLabelField("caption"),c.addChild(this.lstRows),this.lblRowsPrompt=new r.UILabel(e.model._labels.Labels.FIELDS_LIST_DROP_FIELD),this.lblRowsPrompt.addClass("wdr-prompt"),l.addChild(this.lblRowsPrompt),o=new r.UIComponentBase("div","wdr-ui-col-3"),a.addChild(o),(l=new r.UIComponentBase("div","wdr-list-wrap wdr-list-wrap-cols")).setId("wdr-wrap-columns"),o.addChild(l),c=new r.UIComponentBase("div","wdr-list-header"),l.addChild(c),this.lblColumns=new r.UILabel(e.model._labels.Labels.FIELDS_LIST_COLUMNS),c.addChild(this.lblColumns),c=new r.UIComponentBase("div","wdr-list-content"),l.addChild(c),this.lstColumns=new r.lists.UIList,this.lstColumns.setId("wdr-lst-columns"),this.lstColumns.setItemRendererFactory((function(e,t){return i.fieldItemRendererFactory(e,t)})),this.lstColumns.setLabelField("caption"),c.addChild(this.lstColumns),this.lblColumnsPrompt=new r.UILabel(e.model._labels.Labels.FIELDS_LIST_DROP_FIELD),this.lblColumnsPrompt.addClass("wdr-prompt"),l.addChild(this.lblColumnsPrompt),(l=new r.UIComponentBase("div","wdr-list-wrap wdr-list-wrap-measures")).setId("wdr-wrap-measures"),o.addChild(l),c=new r.UIComponentBase("div","wdr-list-header"),l.addChild(c),this.lblMeasures=new r.UILabel(e.model._labels.Labels.FIELDS_LIST_VALUES),c.addChild(this.lblMeasures),c=new r.UIComponentBase("div","wdr-list-content"),l.addChild(c),this.lstMeasures=new r.lists.UIList,this.lstMeasures.setId("wdr-lst-measures"),this.lstMeasures.setItemRendererFactory((function(e,t){return i.fieldItemRendererFactory(e,t)})),this.lstMeasures.setLabelField("caption"),c.addChild(this.lstMeasures),this.lblMeasuresPrompt=new r.UILabel(e.model._labels.Labels.FIELDS_LIST_DROP_FIELD),this.lblMeasuresPrompt.addClass("wdr-prompt"),l.addChild(this.lblMeasuresPrompt),this.aggrView=new t.AggregationsView,this.aggrView.setId("wdr-aggregations-view"),this.aggrView.hide(),n.addChild(this.aggrView)},n.prototype.setLabels=function(){this.lblTitle.setLabel(e.model._labels.Labels.FIELDS_LIST_TITLE),this.lblSubtitle.setLabel(e.model._labels.Labels.FIELDS_LIST_SUBTITLE),this.btnCancel.setLabel(e.model._labels.Labels.BUTTON_CANCEL),this.btnOk.setLabel(e.model._labels.Labels.BUTTON_APPLY),this.lblHierarchies.setLabel(e.model._labels.Labels.FIELDS_LIST_ALL_FIELDS),this.lblPages.setLabel(e.model._labels.Labels.FIELDS_LIST_FILTERS),this.lblRows.setLabel(e.model._labels.Labels.FIELDS_LIST_ROWS),this.lblColumns.setLabel(e.model._labels.Labels.FIELDS_LIST_COLUMNS),this.lblMeasures.setLabel(e.model._labels.Labels.FIELDS_LIST_VALUES),this.btnAddMeasure.setLabel(e.model._labels.Labels.FIELDS_LIST_ADD_CALCULATED_MEASURE),this.lblPagesPrompt.setLabel(e.model._labels.Labels.FIELDS_LIST_DROP_FIELD),this.lblRowsPrompt.setLabel(e.model._labels.Labels.FIELDS_LIST_DROP_FIELD),this.lblColumnsPrompt.setLabel(e.model._labels.Labels.FIELDS_LIST_DROP_FIELD),this.lblMeasuresPrompt.setLabel(e.model._labels.Labels.FIELDS_LIST_DROP_FIELD),this.btnCollapseExpand.setLabel(this.controller.isExpandAll?e.model._labels.Labels.FIELDS_LIST_EXPAND_ALL:e.model._labels.Labels.FIELDS_LIST_COLLAPSE_ALL)},n.prototype.fieldItemRendererFactory=function(e,i){var r=new t.renderers.FieldItemRenderer;return r.setData(e),r.setIndex(i),r},n.prototype.selectableItemRendererFactory=function(e,i){var r=new t.renderers.SelectableItemRenderer(e,i);return r.setIndex(i),r},n.prototype.onSearchClick=function(){this.searchWrap.addClass("wdr-search-opened"),this.inpSearch.container.focus()},n.prototype.onSearchCloseClick=function(){this.searchWrap.removeClass("wdr-search-opened"),this.inpSearch.clear()},n.prototype.reset=function(){this.searchWrap.removeClass("wdr-search-opened"),this.inpSearch.clear(!1)},n.prototype.createHelper=function(e){var t=new r.UIElement("span");return t.attr("id","wdr-drag-handle"),t.addClass("wdr-helper"),t.addClass("wdr-draggable"),t.toggleClass("wdr-values",e.hasClass("wdr-values")),t.css("width",e.css("width")),t.css("position","absolute"),t.css("z-index",100),t.attr("data-index",e.attr("data-index")),t.text(e.text()),t},n.prototype.addLayoutClasses=function(e){i.prototype.addLayoutClasses.call(this,!0)},n}(r.containers.UIPopup),i.PivotFieldsView=n}((t=e._view||(e._view={})).config||(t.config={}))}(n||(n={})),function(e){var i,n,o;i=e._view||(e._view={}),n=i.config||(i.config={}),o=function(o){function s(){var e=o.call(this)||this;return e.addClass("wdr-fields-view-wrap"),e.setControls(),e}return a(s,o),s.prototype.setControls=function(){var e=this;this.openBtn=new r.UIButton,this.openBtn.setId("wdr-btn-open-fields"),this.openBtn.addEventListener(r.UIButton.CLICK_EVENT,(function(t){return e.onOpenClick()})),this.addChild(this.openBtn)},s.prototype.open=function(t,i,r){void 0===r&&(r=""),this.container.toggleClass("wdr-fields-opened",!0),this.isForDillThrough||(e.model.JavaScriptHandlers.getInstance().dispatch(new e.model.APIEvent(e.model.JavaScriptHandlers.FILDS_LIST_OPEN)),e.model._options.OptionsManager.configuratorOpened=!0),this._isFlat=e.model._options.OptionsManager.flatView,this.controller=this.getController(),this.controller.update(t,i,r,this.hasChanged),this.controller.view.setId("wdr-fields-view"),this.controller.view.container.toggleClass("wdr-dt-fields",this.isForDillThrough),this.controller.view.overlay.container.toggleClass("wdr-dt-fields-overlay",this.isForDillThrough),this._modalParent?this._modalParent.addChild(this.controller.view.container):this.addChild(this.controller.view),this.isVisible()||this.show(),this.controller.view.open(),this._isActive=!0,this._prevSlice=e.data_.Cube.getInstance().slice_?e.data_.Cube.getInstance().slice_.clone():null,this._connectionInfo=e.data_.Cube.getInstance().connectionInfo_},Object.defineProperty(s.prototype,"isFlatChange",{get:function(){return this._isFlat!=e.model._options.OptionsManager.flatView},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"isActiveChange",{get:function(){return this._isActive!=e.model._options.OptionsManager.configuratorOpened},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"isDataSourceChange",{get:function(){return null==this._connectionInfo||null==e.data_.Cube.getInstance().structure_||!this._connectionInfo.isEqual(e.data_.Cube.getInstance().connectionInfo_)},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"isSliceChange",{get:function(){return null==e.data_.Cube.getInstance().slice_&&null!=this._prevSlice||null!=e.data_.Cube.getInstance().slice_&&null==this._prevSlice||e.data_.Cube.getInstance().slice_&&this._prevSlice&&!e.data_.Cube.getInstance().slice_.isEqual(this._prevSlice)},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"hasChanged",{get:function(){return this.isActiveChange||this.isDataSourceChange||this.isSliceChange||this.isFlatChange},enumerable:!0,configurable:!0}),s.prototype.getController=function(){var e=this,r=null,o=this._isFlat||this._isForDillThrough,a=this._modalParent||i.PivotView.stage.container;return null==this.controller?r=o?new n.flat.FlatFieldsController(a):new n._pivot.PivotFieldsController(a):o&&"flat"!=this.controller.type?r=new n.flat.FlatFieldsController(a):o||"pivot"==this.controller.type||(r=new n._pivot.PivotFieldsController(a)),null==r?this.controller:(this.controller&&this.controller.removeAllEventListeners(),r.addEventListener(t._Event.CLOSED,(function(){return e.onViewClosed()})),r.addEventListener(s.EVENT_APPLY_SLICE,(function(t){return e.onApplySlice(t)})),r)},s.prototype.onApplySlice=function(e){this.dispatch(e)},s.prototype.onViewClosed=function(){this._isActive=void 0,this._connectionInfo=null,this._isFlat=void 0,this.isForDillThrough||(e.model.JavaScriptHandlers.getInstance().dispatch(new e.model.APIEvent(e.model.JavaScriptHandlers.FILDS_LIST_CLOSE)),e.model._options.OptionsManager.getInstance(),e.model._options.OptionsManager.configuratorButton?this.show():this.hide(),e.model._options.OptionsManager.configuratorOpened=!1,this.dispatchWith(t._Event.CLOSED)),this.container.toggleClass("wdr-fields-opened",!1)},s.prototype.close=function(){this.controller&&this.controller.view.close()},s.prototype.onOpenClick=function(){this.dispatchWith(s.EVENT_OPEN)},Object.defineProperty(s.prototype,"isForDillThrough",{get:function(){return this._isForDillThrough},set:function(e){this._isForDillThrough=e},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"modalParent",{set:function(e){this._modalParent=e},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"containtment",{set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"isOpen",{get:function(){return this._isActive},enumerable:!0,configurable:!0}),s.EVENT_APPLY_SLICE="EVENT_APPLY_SLICE",s.EVENT_OPEN="EVENT_OPEN",s}(r.UIComponentBase),n.FieldsView=o}(n||(n={})),function(e){var t;!function(t){!function(t){var i=function(t){function i(){var e=t.call(this)||this;return e.createTextDisplay(),e}return a(i,t),i.prototype.createTextDisplay=function(){null==this.textDisplay&&(this.textDisplay=new r.UIElement("span"),this.textDisplay.attr("id","wdr-text-display"))},i.prototype.createArrgDisplay=function(){null==this.aggrDisplay&&(this.aggrDisplay=new r.UIElement("span"),this.aggrDisplay.attr("id","wdr-aggr-display"))},i.prototype.createDragHandle=function(){null==this.dragHandle&&(this.dragHandle=new r.UIElement("span"),this.dragHandle.attr("id","wdr-drag-handle"))},i.prototype.draw=function(){var t=this.getData();this.container.empty();var i=null!=this.getLabelFunction()?this.getLabelFunction()(t):t.isLevel?t.hierarchyCaption+" / "+t[this.getLabelField()]:t[this.getLabelField()];this.textDisplay.text(i),this.textDisplay.attr("title",i),this.container.append(this.textDisplay),1==t.isMeasure&&1==t.showAggregations&&1<t.availableAggregations.length&&e.model._options.OptionsManager.showAggregations&&(this.createArrgDisplay(),this.container.append(this.aggrDisplay)),this.createDragHandle(),this.container.append(this.dragHandle),this.container.toggleClass("wdr-measure",!0===t.isMeasure),this.container.toggleClass("wdr-values",!0===t.isValues),this.container.toggleClass("wdr-selected",!0===t.isSelected),this.container.toggleClass("wdr-level",!0===t.isLevel)},i}(r.renderers.UIItemRenderer);t.FieldItemRenderer=i}(t.renderers||(t.renderers={}))}((t=e._view||(e._view={})).config||(t.config={}))}(n||(n={})),function(e){!function(e){var t,i,n;i=(t=e.config||(e.config={})).renderers||(t.renderers={}),n=function(t){function i(e,i){void 0===e&&(e=null);var r=t.call(this)||this;return r.data=e,r.createIconDisplay(),r.createTextDisplay(),r}return a(i,t),i.prototype.createIconDisplay=function(){null==this.iconDisplay&&(this.iconDisplay=new r.UIElement("span"),this.iconDisplay.attr("id","wdr-icon-display"))},i.prototype.createMoreIconDisplay=function(){null==this.moreIconDisplay&&(this.moreIconDisplay=new r.UIElement("span"),this.moreIconDisplay.attr("id","wdr-moreicon-display"))},i.prototype.createTextDisplay=function(){null==this.textDisplay&&(this.textDisplay=new r.UIElement("span"),this.textDisplay.attr("id","wdr-text-display"))},i.prototype.createArrgDisplay=function(){null==this.aggrDisplay&&(this.aggrDisplay=new r.UIElement("span"),this.aggrDisplay.attr("id","wdr-aggr-display"))},i.prototype.createCalcDisplay=function(){null==this.calcDisplay&&(this.calcDisplay=new r.UIElement("span"),this.calcDisplay.attr("id","wdr-calc-display"))},i.prototype.createDragHandle=function(){null==this.dragHandle&&(this.dragHandle=new r.UIElement("span"),this.dragHandle.attr("id","wdr-drag-handle"))},i.prototype.draw=function(){var t=this.getData();this.container.empty(),this.container.append(this.iconDisplay),t.isLevelFolder&&(this.createMoreIconDisplay(),this.container.append(this.moreIconDisplay)),this.textDisplay.text(t[this.getLabelField()]),this.textDisplay.attr("title",t[this.getLabelField()]),this.container.append(this.textDisplay),!0===t.isMeasure&&!0===t.calculated&&!0===t.showAggregations&&(this.createCalcDisplay(),this.container.append(this.calcDisplay)),t.isFolder||t.isMeasuresFolder?null!=this.dragHandle&&this.dragHandle.remove():(this.createDragHandle(),this.container.append(this.dragHandle));for(var i=!0===t.isSelected||null!=t.measureItem&&!0===t.measureItem.isSelected,r=1;10>r;r++)this.container.toggleClass("wdr-level-"+r,t.level===r);this.container.toggleClass("wdr-selected",!0===i),this.container.toggleClass("wdr-checked",!0!==t.isFolder&&!0!==t.isLevel&&!0===i),this.container.toggleClass("wdr-unchecked",!0!==t.isFolder&&!0!==t.isLevel&&!0!==i),this.container.toggleClass("wdr-measure",!0===t.isMeasure),this.container.toggleClass("wdr-folder",!0===t.isFolder||!0===t.isLevelFolder),this.container.toggleClass("wdr-level-folder",!0===t.isLevelFolder),this.container.toggleClass("wdr-level",!0===t.isLevel),this.container.toggleClass("wdr-measures-folder",!0===t.isMeasuresFolder),this.container.toggleClass("wdr-measures-calculated-folder",!0===t.isMeasuresFolder&&!0===t.isCalculatedMeasuresFolder),this.container.toggleClass("wdr-calculated",!0===t.calculated),this.container.toggleClass(e.grid.vo.GridStyleName.COLLAPSED,(!0===t.isFolder||!0===t.isLevelFolder)&&!0!==t.isExpanded),this.container.toggleClass(e.grid.vo.GridStyleName.EXPANDED,(!0===t.isFolder||!0===t.isLevelFolder)&&!0===t.isExpanded)},i}(r.renderers.UIItemRenderer),i.SelectableItemRenderer=n}(e._view||(e._view={}))}(n||(n={})),function(e){var t;!function(t){!function(t){var i=function(){function t(){this.newCalculated=[]}return t.prototype.update=function(t,i){this._structure=t,this._slice=i,this.hierarchies=[];var r,n=null,o=this._structure.calculatedMeasures;if(null!=this._slice){n=this._slice.flatten(!0);for(var s=0;s<n.length;s++)r=n.getItemAt(s),o.keyExists(r.uniqueName)&&((r=o.getItem(r.uniqueName)).showAggregations=e.model._options.OptionsManager.showAggregations,r.isMeasure=!0),r.isSelected=!0,this.hierarchies.push(r)}var a=[],l=this._structure.allHierarchies(!1);for(s=0;s<l.length;s++)r=l.getItemAt(s),null==n||n.keyExists(r.uniqueName)||(r.isSelected=!1,a.push(r));for(s=0;s<o.length;s++)r=o.getItemAt(s),null==n||n.keyExists(r.uniqueName)||(r.isSelected=i.measures_.keyExists(r.uniqueName)||-1<this.newCalculated.indexOf(r.uniqueName),r.showAggregations=e.model._options.OptionsManager.showAggregations,r.isMeasure=!0,a.push(r));for(a.sort((function(e,t){return e.caption<t.caption?-1:e.caption>t.caption?1:0})),s=0;s<a.length;s++)this.hierarchies.push(r=a[s])},t.prototype.isValidSlice=function(){return!0},t.prototype.toPlainArray=function(e,t){for(var i=[],r=0;r<t.length;r++){var n=e[t[r]];n.isSelected&&i.push(n.uniqueName)}return i},t.prototype.getSlice=function(e){var t=this._slice.clone();e=this.toPlainArray(this.hierarchies,e),t.flatOrder=e;for(var i,r=t.flatten(!0),n=t.measures_,o=0;o<e.length;o++){var s=e[o];r.keyExists(s)||((i=this._structure.allHierarchies().getItem(s))?t.rows.addItem(s,i):this._structure.calculatedMeasures.keyExists(s)&&(n.addItem(s,this._structure.calculatedMeasures.getItem(s)),t.measures_=n))}for(o=0;o<r.length;o++)i=r.getItemAt(o),-1==e.indexOf(i.uniqueName)&&(t.columns.keyExists(i.uniqueName)&&t.columns.removeItem(i.uniqueName),t.rows.keyExists(i.uniqueName)&&t.rows.removeItem(i.uniqueName),null==(s=this._structure.hierarchyToMeasure(i.uniqueName))&&(s=this._structure.calculatedMeasures.getItem(i.uniqueName)),n.keyExists(s.uniqueName)&&n.removeItem(s.uniqueName));return t.measures_=n,this.newCalculated=[],t},t.prototype.onCalculatedValueAdded=function(e){if(null!=this._slice&&null!=this._structure){this.update(this._structure,this._slice);var t=s.ArrayUtils.find(this.hierarchies,e,"uniqueName");null!=t&&(t.isSelected=!0),this.newCalculated.push(e)}},t.prototype.onCalculatedValueRemoved=function(e){null!=this._slice&&null!=this._structure&&this.update(this._structure,this._slice)},t.prototype.isSliceDifferent=function(e){e=e.flatten(!0);var t=this._slice.flatten(!0);if(e.length!=t.length)return!0;for(var i=0;i<e.length;i++)if(e.getKeyAt(i)!=t.getKeyAt(i))return!0;return!1},t.prototype.getSelectAllSelection=function(){for(var e=0,t=0;t<this.hierarchies.length;t++)this.hierarchies[t].isSelected&&e++;return 0==e?r.UICheckBox.UNSELECTED:e==this.hierarchies.length?r.UICheckBox.SELECTED:r.UICheckBox.SEMI_SELECTED},t}();t.FlatFieldsModel=i}(t.flat||(t.flat={}))}((t=e._view||(e._view={})).config||(t.config={}))}(n||(n={})),function(e){var i,n,o,l;i=e._view||(e._view={}),n=i.config||(i.config={}),o=n.flat||(n.flat={}),l=function(l){function c(e){var i=l.call(this)||this;return i.type="flat",i.calculatedValueAddedHandler=function(e){return i.onCalculatedValueAdded(e)},i.calculatedValueRemovedHandler=function(e){return i.onCalculatedValueRemoved(e)},i.model_=new o.FlatFieldsModel,i.view=new o.FlatFieldsView(i,e),i.view.addEventListener(t._Event.CLOSED,(function(e){return i.dispatch(e)})),i.view.btnOk&&i.view.btnOk.addEventListener(r.UIButton.CLICK_EVENT,(function(){return i.onOkClick()})),i.view.btnCancel&&i.view.btnCancel.addEventListener(r.UIButton.CLICK_EVENT,(function(){return i.onCancelClick()})),i.view.lstHierarchies&&(i.view.lstHierarchies.container.addEventListener("click",(function(e){return i.onHierarchyFieldClick(e)})),i.view.lstHierarchies.container.droppable({onDrop:function(e,t,r,n){return i.onDrop(e,t,r,n)},onDragEnter:function(e,t,r,n){return i.onDragEnterOrOver(e,t,r,n)},onDragOver:function(e,t,r,n){return i.onDragEnterOrOver(e,t,r,n)},onDragLeave:function(e,t,r,n){return i.onDragLeave(e,t,r,n)},itemSelector:"li"})),i.view.selectAllCbx&&i.view.selectAllCbx.addEventListener(t._Event.CHANGE,(function(){return i.onSelectAllChange()})),i.view.btnAddMeasure&&i.view.btnAddMeasure.addEventListener(r.UIButton.CLICK_EVENT,(function(){return i.onAddMeasureClick()})),i}return a(c,l),c.prototype.onDragEnterOrOver=function(e,t,i,n){this.removeDropIndicator(),e&&e.closest("ul")&&(t&&t.addClass("wdr-droppable-valid"),e.addClass("wdr-drag-over"),this.showIndicator(r.UIElement.convert(n.target)))},c.prototype.onDragLeave=function(e,t,i,r){this.removeDropIndicator(),e&&e.closest("ul")&&(t&&t.removeClass("wdr-droppable-valid"),t&&t.removeClass("wdr-droppable-invalid"),e.removeClass("wdr-drag-over"))},c.prototype.onDrop=function(e,t,i,r){this.removeDropIndicator(),e&&e.closest("ul")&&(e=parseInt(e.attr("data-index")))!=(i=i?parseFloat(i.attr("data-index")):this.view.lstHierarchies.getDataProvider().length)&&(e<i&&(i-=1),(t=this.view.lstHierarchies.getDataProvider()).splice(i,0,t.splice(e,1)[0]),this.updateView())},c.prototype.onCancelClick=function(){this.view.close()},c.prototype.onOkClick=function(){this.applySlice(),this.view.close()},c.prototype.onSelectAllChange=function(){for(var e=this.view.selectAllCbx.checked,t=this.model_.hierarchies,i=0;i<t.length;i++)t[i].isSelected=e;this.view.lstHierarchies.validateNow()},c.prototype.onHierarchyFieldClick=function(t){if(null!=(n=r.UIElement.convert(t.target).closest("li"))){var n=parseInt(n.attr("data-index")),o=this.model_.hierarchies[n];"wdr-calc-display"==r.UIElement.convert(t.target).attr("id")?e.model.PivotModel.getInstance().dispatchWith(i.ViewEvent.CALCULATED_VIEW_OPEN,null,{measureName:o.uniqueName}):(o.isSelected=!o.isSelected,this.view.lstHierarchies&&this.view.lstHierarchies.validateItemAt(n),this.view.selectAllCbx&&this.view.selectAllCbx.setSelection(this.model_.getSelectAllSelection()))}},c.prototype.onAddMeasureClick=function(){e.model.PivotModel.getInstance().dispatchWith(i.ViewEvent.CALCULATED_VIEW_OPEN),e.model.PivotModel.getInstance().addEventListener(i.calculated.CalculatedView.EVENT_CALCULATED_VALUE_ADDED,this.calculatedValueAddedHandler),e.model.PivotModel.getInstance().addEventListener(i.calculated.CalculatedView.EVENT_CALCULATED_VALUE_REMOVED,this.calculatedValueRemovedHandler)},c.prototype.onCalculatedValueAdded=function(t){e.model.PivotModel.getInstance().removeEventListener(i.calculated.CalculatedView.EVENT_CALCULATED_VALUE_ADDED,this.calculatedValueAddedHandler),this.model_.onCalculatedValueAdded(t.data.measureUniqueName),this.updateView()},c.prototype.onCalculatedValueRemoved=function(t){e.model.PivotModel.getInstance().removeEventListener(i.calculated.CalculatedView.EVENT_CALCULATED_VALUE_REMOVED,this.calculatedValueRemovedHandler),this.model_.onCalculatedValueRemoved(t.data),this.updateView()},c.prototype.updateView=function(){var e=this;if(this.view.lstHierarchies){this.view.lstHierarchies.setDataProvider(this.model_.hierarchies),this.validateSlice(),this.view.lstHierarchies.validateNow();var t={createHelper:function(t){return e.view.createHelper(t)}};s.browserVersion().isMobile&&(t.handle="#wdr-drag-handle");for(var i=this.view.lstHierarchies.container.find("li",!0),r=0;r<i.length;r++)i[r].draggable(t)}},c.prototype.update=function(e,t){this.model_.update(e,t),this.updateView(),this.view.selectAllCbx&&this.view.selectAllCbx.setSelection(this.model_.getSelectAllSelection()),this.view.setLabels()},c.prototype.validateSlice=function(){this.view.btnOk&&this.view.btnOk.setEnabled(this.model_.isValidSlice())},c.prototype.applySlice=function(){for(var e=[],t=this.view.lstHierarchies.container.find("li",!0),i=0;i<t.length;i++){var r=parseInt(t[i].attr("data-index"));e.push(r)}e=this.model_.getSlice(e),this.model_.isSliceDifferent(e)&&this.dispatchWith(n.FieldsView.EVENT_APPLY_SLICE,this,e)},c.prototype.showIndicator=function(e){var t=e.closest("li");null!=t?(this._dropIndicator=this.createDropIndicator(),t.before(this._dropIndicator)):null!=(e=e.closest("ul"))&&(this._dropIndicator=this.createDropIndicator(),0<e.element.children.length?e.append(this._dropIndicator):e.prepend(this._dropIndicator))},c.prototype.createDropIndicator=function(){return new r.UIElement("div","wdr-drop-indicator")},c.prototype.removeDropIndicator=function(){this._dropIndicator&&(this._dropIndicator.removeFromParent(!0),this._dropIndicator=null)},c}(t.EventDispatcher),o.FlatFieldsController=l}(n||(n={})),function(e){var t;!function(t){var i,n;i=t.flat||(t.flat={}),n=function(i){function n(e,t){var r=i.call(this,t)||this;return r.addClass("wdr-flat-fields"),r.controller=e,r.setControls(),r}return a(n,i),n.prototype.setControls=function(){var t=new r.UIComponentBase("div","wdr-popup-header wdr-ui-row");this.addChild(t);var i=new r.UIComponentBase("div","wdr-ui-col wdr-vam");t.addChild(i),this.lblTitle=new r.UILabel(e.model._labels.Labels.FIELDS_LIST_TITLE),this.lblTitle.addClass("wdr-popup-title"),i.addChild(this.lblTitle),this.lblSubtitle=new r.UILabel(e.model._labels.Labels.FIELDS_LIST_FLAT_HIERARCHY_BOX),this.lblSubtitle.addClass("wdr-popup-subtitle"),i.addChild(this.lblSubtitle),i=new r.UIComponentBase("div","wdr-ui-col wdr-vam wdr-tar wdr-ui-btns-row"),t.addChild(i),this.btnAddMeasure=new r.UIButton("wdr-ui-btn-light wdr-icon-act_calc"),this.btnAddMeasure.setId("wdr-btn-add-measure"),i.addChild(this.btnAddMeasure),this.btnCancel=new r.UIButton,this.btnCancel.setLabel(e.model._labels.Labels.BUTTON_CANCEL),this.btnOk=new r.UIButton("wdr-ui-btn-dark"),this.btnOk.setLabel(e.model._labels.Labels.BUTTON_APPLY),s.OSUtil.isIOS||s.OSUtil.isMac?(i.addChild(this.btnCancel),i.addChild(this.btnOk)):(i.addChild(this.btnOk),i.addChild(this.btnCancel)),i=new r.UIComponentBase("div","wdr-popup-content"),this.addChild(i),t=new r.UIComponentBase("div","wdr-list-wrap"),i.addChild(t),i=new r.UIComponentBase("div","wdr-list-header"),t.addChild(i),this.selectAllCbx=new r.UICheckBox,this.selectAllCbx.setId("wdr-select-all-cbx"),this.selectAllCbx.setLabel(e.model._labels.Labels.FILTER_SELECT_ALL),i.addChild(this.selectAllCbx),i=new r.UIComponentBase("div","wdr-list-content"),t.addChild(i),this.lstHierarchies=new r.lists.UIList,this.lstHierarchies.setId("wdr-lst-hierarchies"),this.lstHierarchies.setItemRendererFactory(this.selectableItemRendererFactory),this.lstHierarchies.setLabelField("caption"),i.addChild(this.lstHierarchies)},n.prototype.selectableItemRendererFactory=function(e,i){var r=new t.renderers.SelectableItemRenderer(e,i);return r.setData(e),r.setIndex(i),r},n.prototype.setLabels=function(){this.lblTitle.setLabel(e.model._labels.Labels.FIELDS_LIST_TITLE),this.lblSubtitle.setLabel(e.model._labels.Labels.FIELDS_LIST_FLAT_HIERARCHY_BOX),this.btnCancel.setLabel(e.model._labels.Labels.BUTTON_CANCEL),this.btnOk.setLabel(e.model._labels.Labels.BUTTON_APPLY),this.selectAllCbx.setLabel(e.model._labels.Labels.FILTER_SELECT_ALL)},n.prototype.createHelper=function(e){var t=new r.UIElement("span");return t.attr("id","wdr-drag-handle"),t.addClass("wdr-helper"),t.addClass("wdr-draggable"),t.toggleClass("wdr-values",e.hasClass("wdr-values")),t.css("width",e.css("width")),t.css("position","absolute"),t.css("z-index",100),t.attr("data-index",e.attr("data-index")),t.text(e.text()),t},n}(r.containers.UIPopup),i.FlatFieldsView=n}((t=e._view||(e._view={})).config||(t.config={}))}(n||(n={})),function(e){!function(e){var i,n;i=e.calculated||(e.calculated={}),n=function(r){function n(){var n=r.call(this,e.PivotView.stage.container)||this;return n.setId("wdr-calculated-view"),n.container.disableSelection(),n.overlay.addClass("wdr-calculated-view-overlay"),n.controller=new i.CalculatedController,n.controller.addEventListener(t._Event.CLOSE,(function(){return n.close()})),n.addChild(n.controller.view),n}return a(n,r),n.prototype.openView=function(e){this.controller.update(e),this.open()},n.prototype.close=function(){r.prototype.close.call(this),this.controller.clear()},n.EVENT_CALCULATED_VALUE_ADDED="EVENT_CALCULATED_VALUE_ADDED",n.EVENT_CALCULATED_VALUE_REMOVED="EVENT_CALCULATED_VALUE_REMOVED",n.addingMeasureFlag=!1,n}(r.containers.UIPopup),i.CalculatedView=n}(e._view||(e._view={}))}(n||(n={})),function(e){var t,i,r;t=e._view||(e._view={}),i=t.calculated||(t.calculated={}),r=function(){function r(){this.model_=e.model.PivotModel.getInstance(),this.funcButtonsDataProvider=[{name:"_addBtn",label:"+",func:e.data_.consts.FunctionName.ADD},{name:"_subtractBtn",label:"-",func:e.data_.consts.FunctionName.SUBTRACT},{name:"_multiplyBtn",label:"",func:e.data_.consts.FunctionName.MULTIPLY},{name:"_divideBtn",label:"",func:e.data_.consts.FunctionName.DIVIDE},{name:"_powerBtn",label:"^",func:e.data_.consts.FunctionName.POWER},{name:"_equalBtn",label:"=",func:e.data_.consts.FunctionName.EQUAL},{name:"_lessBtn",label:"<",func:e.data_.consts.FunctionName.LESS},{name:"_greaterBtn",label:">",func:e.data_.consts.FunctionName.GREATER},{name:"_lessOrEqualBtn",label:"",func:e.data_.consts.FunctionName.LESS_OR_EQUAL},{name:"_greaterOrEqualBtn",label:"",func:e.data_.consts.FunctionName.GREATER_OR_EQUAL},{name:"_equalBtn2",label:"==",func:e.data_.consts.FunctionName.EQUAL_2},{name:"_notEqualBtn",label:"!=",func:e.data_.consts.FunctionName.NOT_EQUAL},{name:"_orBtn",label:"OR",func:e.data_.consts.FunctionName.OR},{name:"_andBtn",label:"AND",func:e.data_.consts.FunctionName.AND},{name:"_ifBtn",label:"IF",func:e.data_.consts.FunctionName.IF},{name:"_absBtn",label:"ABS",func:e.data_.consts.FunctionName.ABS},{name:"_minBtn",label:"MIN",func:e.data_.consts.FunctionName.MIN},{name:"_maxBtn",label:"MAX",func:e.data_.consts.FunctionName.MAX}]}return r.prototype.update=function(e){s.nullOrEmpty(e)||(this.currentMeasure=this.model_.cube_.structure_.findMeasure(e))},Object.defineProperty(r.prototype,"showAggregations",{get:function(){return!0},enumerable:!0,configurable:!0}),r.prototype.getAllMeasures=function(){return this.model_.getAllMeasures()},r.prototype.removeMeasure=function(e){i.CalculatedView.addingMeasureFlag=!0,this.model_.removeCalculatedMeasure(e.uniqueName),this.model_.dispatchWith(i.CalculatedView.EVENT_CALCULATED_VALUE_REMOVED,null,e.uniqueName),s.fmSetTimeout((function(){i.CalculatedView.addingMeasureFlag=!1}),1e3)},r.prototype.addMeasure=function(r,n,o){var a;void 0===n&&(n=""),void 0===o&&(o=!1),n=0<n.length?n:this.generateMeasureName(),null!=this.currentMeasure?this.currentMeasure.caption==n&&this.currentMeasure.formula==r&&this.currentMeasure.individual==o||((a=new e.data_._structure.GenericMeasure(this.currentMeasure.uniqueName,n)).formula=r,a.individual=o):((a=new e.data_._structure.GenericMeasure(n,n)).formula=r,a.individual=o),null!=a&&(i.CalculatedView.addingMeasureFlag=!0,t.config._pivot.PivotFieldsModel.expandFormulas=!0,this.model_.addCalculatedMeasure(a),this.model_.dispatchWith(i.CalculatedView.EVENT_CALCULATED_VALUE_ADDED,null,{measureUniqueName:a.uniqueName}),s.fmSetTimeout((function(){i.CalculatedView.addingMeasureFlag=!1}),1e3))},r.prototype.isValidFormula=function(e){return null!=(e=(new s.Lexer).parse(e))&&null!=e.length},r.prototype.generateMeasureName=function(){for(var t=e.model._labels.Labels.CALCULATED_VIEW_FORMULA+" #",i=0,r=this.model_.cube_.structure_.calculatedMeasures,n=RegExp(e.model._labels.Labels.CALCULATED_VIEW_FORMULA+" #"),o=0;o<r.length;o++){var s=r.getItemAt(o).caption;n.test(s)&&(i=Math.max(i,parseInt(s.substr(e.model._labels.Labels.CALCULATED_VIEW_FORMULA.length+2))))}return t+(i+1)},r}(),i.CalculatedModel=r}(n||(n={})),function(e){var i,n,o;i=e._view||(e._view={}),n=i.calculated||(i.calculated={}),o=function(o){function l(){var e=o.call(this)||this;if(e.model_=new n.CalculatedModel,e.view=new n.CalculatedViewContent(e),e.view.removeButton&&e.view.removeButton.addEventListener(r.UIButton.CLICK_EVENT,(function(t){return e.onRemoveBtnClick(t)})),e.view.measuresDragList&&e.view.measuresDragList.setItemRendererFactory((function(t,i){return e.fieldItemRendererFactory(t,i)})),e.view.formulaInput&&e.view.formulaInput.container.droppable({onDrop:function(t){return e.onMeasureDrop(t)},onDragEnter:function(){return e.onFormulaDragEnterOrOver()},onDragOver:function(){return e.onFormulaDragEnterOrOver()},onDragLeave:function(){return e.onFormulaDragLeave()},itemSelector:"li"}),e.view.btnOk&&e.view.btnOk.addEventListener(r.UIButton.CLICK_EVENT,(function(){return e.onOkClick()})),e.view.btnCancel&&e.view.btnCancel.addEventListener(r.UIButton.CLICK_EVENT,(function(){return e.onCancelClick()})),e.view.aggrView&&e.view.aggrView.addEventListener(t._Event.CHANGE,(function(t){return e.onAggrChange(t)})),e.view.funcBtns)for(var i=0;i<e.view.funcBtns.length;i++)e.view.funcBtns[i].addEventListener(r.UIButton.CLICK_EVENT,(function(t){return e.onFuncBtnClick(t)}));return e}return a(l,o),l.prototype.onFormulaDragEnterOrOver=function(){this.view.formulaInput.addClass("wdr-droppable-over")},l.prototype.onFormulaDragLeave=function(){this.view.formulaInput.removeClass("wdr-droppable-over")},l.prototype.onMeasureDrop=function(e){this.view.formulaInput.removeClass("wdr-droppable-over"),e=parseInt(e.attr("data-index")),e=this.view.measuresDragList.getDataProvider()[e],this.addNewFieldToFormula(e)},l.prototype.fieldItemRendererFactory=function(t,r){var n=this,o=new i.config.renderers.FieldItemRenderer;return o.setData(t),o.setIndex(r),o.setLabelFunction((function(t){return t.name+" ("+e.data_.consts.AggregationName.aggregationCaption(t.aggregation)+")"})),o.addEventListener("click",(function(e){return n.onAggrClick(e)})),o.addEventListener("dblclick",(function(e){return n.onItemDblClick(e)})),o},Object.defineProperty(l.prototype,"funcButtonsDataProvider",{get:function(){return this.model_.funcButtonsDataProvider},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"isFormulaEmpty",{get:function(){return 0==this.view.formulaInput.getText().length},enumerable:!0,configurable:!0}),l.prototype.update=function(e){this.model_.update(e),null!=this.model_.currentMeasure?(this.view.nameInput&&(this.view.nameInput.setText(this.model_.currentMeasure.caption),this.view.nameInput.container.toggleClass("wdr-compact",!0)),this.view.formulaInput&&this.view.formulaInput.setText(this.model_.currentMeasure.formula),this.view.removeButton&&this.view.removeButton.isVisible(!0)):(this.view.nameInput&&this.view.nameInput.container.toggleClass("wdr-compact",!1),this.view.cbxIndiValues&&(this.view.cbxIndiValues.checked=!1),this.view.removeButton&&this.view.removeButton.isVisible(!1)),this.view.cbxIndiValues&&(this.view.cbxIndiValues.checked=!!this.model_.currentMeasure&&this.model_.currentMeasure.individual),this.view.setLabels(),this.updateMeasuresList()},l.prototype.updateMeasuresList=function(){for(var t=this,i=this.model_.getAllMeasures(),r=[],n=0;n<i.length;n++)null!=this.model_.currentMeasure&&this.model_.currentMeasure.uniqueName==i[n].uniqueName||(i[n].isMeasure=!0,i[n].showAggregations=this.model_.showAggregations&&!i[n].calculated&&i[n].type!=e.data_.types.MeasureType.COUNT,r.push(i[n]));if(r.sort(this.compareFunction),this.view.measuresDragList)for(this.view.measuresDragList.setDataProvider(r),i={createHelper:function(e){return t.view.createHelper(e)}},s.browserVersion().isMobile&&(i.handle="#wdr-drag-handle"),r=this.view.measuresDragList.container.find("li",!0),n=0;n<r.length;n++)r[n].draggable(i)},l.prototype.clear=function(){this.view.nameInput&&this.view.nameInput.setText(""),this.view.formulaInput&&this.view.formulaInput.setText(""),this.model_.currentMeasure=null},l.prototype.compareFunction=function(e,t){return e.name>t.name?1:-1},l.prototype.onRemoveBtnClick=function(e){s.browserVersion().isMobile?this.onRemoveMeasure():this.showRemoveAlert()},l.prototype.showRemoveAlert=function(){var t,i,r=this;s.OSUtil.isIOS||s.OSUtil.isMac?(t=[e.model._labels.Labels.BUTTON_NO,e.model._labels.Labels.BUTTON_YES],i=[null,function(){return r.onRemoveMeasure()}]):(t=[e.model._labels.Labels.BUTTON_YES,e.model._labels.Labels.BUTTON_NO],i=[function(){return r.onRemoveMeasure()},null]);var n=e.model.XSSCheck.valid(this.model_.currentMeasure.caption)?this.model_.currentMeasure.caption:e.model.XSSCheck.validate(this.model_.currentMeasure.caption);e.uialert(e.model._labels.Labels.CALCULATED_VIEW_REMOVE_VALUE_MESSAGE,s.StringUtils.bind(e.model._labels.Labels.CALCULATED_VIEW_REMOVE_VALUE_TITLE,n),e.AlertType.ALERT,t,i)},l.prototype.onRemoveMeasure=function(){this.model_.removeMeasure(this.model_.currentMeasure),this.close()},l.prototype.onAggrClick=function(e){if("wdr-aggr-display"==e.target.id){var t=parseInt(r.UIElement.convert(e.target).closest("li").attr("data-index"));t=this.view.measuresDragList.getDataProvider()[t],this.view.aggrView.showWith(t,r.UIElement.convert(e.target))}},l.prototype.onItemDblClick=function(e){e=parseInt(r.UIElement.convert(e.target).closest("li").attr("data-index")),e=this.view.measuresDragList.getDataProvider()[e],this.addNewFieldToFormula(e)},l.prototype.addNewFieldToFormula=function(t){null!=t&&this.insertText(t.aggregation==e.data_.consts.AggregationName.NONE?s.StringUtils.bind('"{0}"',t.uniqueName):s.StringUtils.bind('{0}("{1}")',t.aggregation,t.uniqueName))},l.prototype.onAggrChange=function(e){var t=e.data.fieldData;t.aggregation=(e=e.data.aggrData).aggregation,t.caption=e.caption+" of "+t.name,this.view.measuresDragList.validateItem(t)},l.prototype.onFuncBtnClick=function(t){t=parseInt(t.target.container.attr("data-index")),(t=this.funcButtonsDataProvider[t].func)==e.data_.consts.FunctionName.IF||t==e.data_.consts.FunctionName.ABS||t==e.data_.consts.FunctionName.MIN||t==e.data_.consts.FunctionName.MAX||t==e.data_.consts.FunctionName.VALUE?this.addSpecialOperation(t):this.addOperation(t)},l.prototype.onCancelClick=function(){this.close()},l.prototype.onOkClick=function(){var t=this.view.formulaInput.getText();0==t.length?this.close():0==this.model_.isValidFormula(t)?e.uialert(e.model._labels.Labels.MESSAGE_WRONG_FORMULA_FORMAT):(this.model_.addMeasure(t,this.view.nameInput.getText(),this.view.cbxIndiValues.checked),this.close())},l.prototype.close=function(){this.dispatchWith(t._Event.CLOSE)},l.prototype.insertText=function(e,t){void 0===t&&(t=0);var i=this.view.formulaInput.getSelectionBeginIndex();this.view.formulaInput.getSelectionEndIndex();var r=this.view.formulaInput.getText();-1==i&&(i=this.lastPosition),0==i||" "==r.charAt(i-1)?(this.view.formulaInput.insertText(e+" "),this.lastPosition=i+e.length+1):(this.view.formulaInput.insertText(" "+e+" "),this.lastPosition=i+e.length+2),this.lastPosition-=t,this.view.formulaInput.setSelection(this.lastPosition)},l.prototype.addOperation=function(e){this.insertText(e)},l.prototype.addSpecialOperation=function(e){var t=this.view.formulaInput.getSelectionBeginIndex(),i=this.view.formulaInput.getSelectionEndIndex(),r=this.view.formulaInput.getText();"if"==e?this.insertText(e+"("+r.slice(t,i)+", , )",6):this.insertText(e+"("+r.slice(t,i)+")",2)},l}(t.EventDispatcher),n.CalculatedController=o}(n||(n={})),function(e){var t,i,n;i=(t=e._view||(e._view={})).calculated||(t.calculated={}),n=function(i){function n(e){var t=i.call(this)||this;return t.controller=e,t.setControls(),t}return a(n,i),n.prototype.setControls=function(){var i=this,n=new r.UIComponentBase("div","wdr-popup-header wdr-ui-row");this.addChild(n);var o=new r.UIComponentBase("div","wdr-ui-col wdr-vam");n.addChild(o),this.titleLabel=new r.UILabel(e.model._labels.Labels.CALCULATED_VIEW_TITLE),this.titleLabel.addClass("wdr-popup-title"),o.addChild(this.titleLabel),this.subtitleLabel=new r.UILabel(e.model._labels.Labels.CALCULATED_VIEW_MEASURE_BOX),this.subtitleLabel.addClass("wdr-popup-subtitle"),o.addChild(this.subtitleLabel),o=new r.UIComponentBase("div","wdr-ui-col wdr-vam wdr-tar wdr-ui-btns-row"),n.addChild(o),this.removeButton=new r.UIButton("wdr-ui-btn-light wdr-icon-act_trash"),this.removeButton.setId("wdr-remove-btn"),this.removeButton.container.attr("title",e.model._labels.Labels.CALCULATED_VIEW_REMOVE_VALUE),o.addChild(this.removeButton),this.btnCancel=new r.UIButton("wdr-ui-btn"),this.btnCancel.setLabel(e.model._labels.Labels.BUTTON_CANCEL),this.btnOk=new r.UIButton("wdr-ui-btn-dark"),this.btnOk.setLabel(e.model._labels.Labels.BUTTON_APPLY),s.OSUtil.isIOS||s.OSUtil.isMac?(o.addChild(this.btnCancel),o.addChild(this.btnOk)):(o.addChild(this.btnOk),o.addChild(this.btnCancel)),n=new r.UIComponentBase("div","wdr-popup-content"),this.addChild(n),this.nameInput=new r.UITextInput,this.nameInput.setId("wdr-name-input"),this.nameInput.setPrompt(e.model._labels.Labels.CALCULATED_VIEW_MEASURE_NAME),n.addChild(this.nameInput),this.measuresDragList=new r.lists.UIList,this.measuresDragList.setId("wdr-lst-measures"),this.measuresDragList.useCache=!1,this.measuresDragList.setLabelField("caption"),n.addChild(this.measuresDragList),this.cbxIndiValues=new r.UICheckBox,this.cbxIndiValues.setLabel(e.model._labels.Labels.CALCULATED_VIEW_CALCULATE_INDI_VALUES),n.addChild(this.cbxIndiValues),this.funcBtnsContainer=new r.UIComponentBase("div","wdr-ui-row"),this.funcBtnsContainer.setId("wdr-func-btn-group"),n.addChild(this.funcBtnsContainer),this.funcBtns=[],o=this.controller.funcButtonsDataProvider;for(var a=0;a<o.length;a++){var l=new r.UIButton("wdr-ui-col-9 wdr-calc-action");l.removeClass("wdr-ui-btn"),l.setName(o[a].name),l.setLabel(o[a].label),l.container.attr("data-index",a),this.funcBtnsContainer.addChild(l),this.funcBtns.push(l)}o=new r.UIComponentBase("div","wdr-formula-wrap"),n.addChild(o),this.formulaInput=new r.UITextArea,this.formulaInput.setId("wdr-formula-input"),this.formulaInput.addEventListener(r.UITextInput.CHANGE_EVENT,(function(){return i.onFormulaChange()})),o.addChild(this.formulaInput),this.lblFormulaPrompt=new r.UILabel(e.model._labels.Labels.CALCULATED_VIEW_FORMULA_PROMPT),this.lblFormulaPrompt.addClass("wdr-prompt"),o.addChild(this.lblFormulaPrompt),this.aggrView=new t.config.AggregationsView,this.aggrView.setId("wdr-aggregations-view"),this.aggrView.hide(),n.addChild(this.aggrView)},n.prototype.setLabels=function(){this.titleLabel.setLabel(e.model._labels.Labels.CALCULATED_VIEW_TITLE),this.subtitleLabel.setLabel(e.model._labels.Labels.CALCULATED_VIEW_MEASURE_BOX),this.btnOk.setLabel(e.model._labels.Labels.BUTTON_APPLY),this.btnCancel.setLabel(e.model._labels.Labels.BUTTON_CANCEL),this.nameInput.setPrompt(e.model._labels.Labels.CALCULATED_VIEW_MEASURE_NAME),this.cbxIndiValues.setLabel(e.model._labels.Labels.CALCULATED_VIEW_CALCULATE_INDI_VALUES),this.lblFormulaPrompt.setLabel(e.model._labels.Labels.CALCULATED_VIEW_FORMULA_PROMPT),this.removeButton.container.attr("title",e.model._labels.Labels.CALCULATED_VIEW_REMOVE_VALUE)},n.prototype.createHelper=function(e){var t=new r.UIElement("span");return t.attr("id","wdr-drag-handle"),t.addClass("wdr-helper"),t.addClass("wdr-draggable"),t.css("width",e.css("width")),t.css("position","absolute"),t.css("z-index",100),t.attr("data-index",e.attr("data-index")),t.text(e.text()),t},n.prototype.onFormulaChange=function(){this.lblFormulaPrompt.isVisible(0==this.formulaInput.getText().length)},n}(r.UIComponentBase),i.CalculatedViewContent=n}(n||(n={})),function(e){!function(e){var i=function(){function e(){}return e.FILTER_OPEN="FILTER_OPEN",e.FILTER_CLOSE="FILTER_CLOSE",e.FILTER_SELECTION_CHANGE="FILTER_SELECTION_CHANGE",e.FILTER_COLLAPSE_EXPAND="FILTER_COLLAPSE_EXPAND",e.CALCULATED_VIEW_OPEN="CALCULATED_VIEW_OPEN",e.CALCULATED_VIEW_CLOSE="CALCULATED_VIEW_CLOSE",e.DRILL_THROUGH_OPEN="DRILL_THROUGH_OPEN",e.DRILL_THROUGH_CLOSE="DRILL_THROUGH_CLOSE",e.CONTEXT_MENU_OPEN="CONTEXT_MENU_OPEN",e.CLASSIC_TO_COMPACT="CLASSIC_TO_COMPACT",e.RENDER_COMPLETE="RENDER_COMPLETE",e.BEFORE_GRID_DRAW="beforegriddraw",e.AFTER_GRID_DRAW="aftergriddraw",e}();e.ViewEvent=i;var r=function(e){function t(t){var r=e.call(this,i.FILTER_OPEN)||this;return r.hierarchy=t,r}return a(t,e),t}(t._Event);e.FilterOpenEvent=r}(e._view||(e._view={}))}(n||(n={})),function(e){!function(e){!function(e){var t=function(){function e(){this.allMembers=[],this.selectedMembers=[],this.searchedMembers=[],this.searchPhrase="",this.isAllSelected=!0}return e.prototype.setHierarchy=function(e){this.currentHierarchy=e},e.prototype.getHierarchy=function(){return this.currentHierarchy},e.prototype.setSortType=function(e){this.sortType=e,this.allMembers=this.currentHierarchy.sortChildren(this.currentHierarchy.allMember,!1,this.sortType).toArray()},e.prototype.getSortType=function(){return this.sortType},e.prototype.select=function(e,t){if(this.isAllSelected!=t)this.selectedMembers.push(e);else{var i=this.selectedMembers.indexOf(e);-1<i&&this.selectedMembers.splice(i,1)}this.selectedMembers.length==this.allMembers.length&&this.selectAll(!this.isAllSelected)},e.prototype.search=function(e,t){if(e=e.toLowerCase(),this.searchPhrase===e)t();else if(this.searchPhrase=e,0==this.searchPhrase.length)t();else{this.searchedMembers.length=0;var i=this.allMembers.length,r=0;for(r=0;r<i;r++)s.StringUtils.contains(this.allMembers[r].caption,e)&&this.searchedMembers.push(this.allMembers[r]);t(this.searchedMembers)}},e.prototype.setSearchedMembers=function(e){null!=e?this.searchedMembers=e:this.searchedMembers.length=0},e.prototype.selectAll=function(e){if(this.isSearched())for(var t=this.searchedMembers.length,i=0;i<t;i++)s.StringUtils.contains(this.searchedMembers[i].caption,this.searchPhrase)&&this.select(this.searchedMembers[i],e);else this.isAllSelected=e,this.selectedMembers.length=0},e.prototype.selectDescendants=function(e){},e.prototype.getTotalSelectedLength=function(){var e;return 0<(e=this.isAllSelected||this.isSearched()?this.isAllSelected&&this.isSearched()?this.searchedMembers.length+this.countTheDifference()-this.selectedMembers.length:this.isAllSelected||0!=this.selectedMembers.length?this.allMembers.length-this.selectedMembers.length:this.selectedMembers.length:this.selectedMembers.length)?e:0},e.prototype.countTheDifference=function(){for(var e=0,t=0,i=0;t<this.selectedMembers.length;){for(;i<this.searchedMembers.length&&this.searchedMembers[i].uniqueName!=this.selectedMembers[t].uniqueName;)i++;this.searchedMembers.length==i&&e++,i=0,t++}return e},e.prototype.getSelectedLength=function(){if(this.isSearched()){for(var e=0,t=0;t<this.searchedMembers.length;t++)0>s.ArrayUtils.findIndex(this.selectedMembers,this.searchedMembers[t].uniqueName,"uniqueName")==this.isAllSelected&&e++;return e}return this.getTotalSelectedLength()},e.prototype.setFilterItems=function(e){this.selectedMembers.length=0;var t=e.length;if(this.isAllSelected=0==t,!this.isAllSelected)for(var i=0;i<t;i++)this.selectedMembers.push(e[i])},e.prototype.getFilterItems=function(){var e=0,t=[],i=[],r=(i=this.isSearched()&&this.isAllSelected?this.searchedMembers:this.selectedMembers).length;if(this.isSearched()&&this.isAllSelected)for(i=e=0;e<this.searchedMembers.length;){for(;i<this.selectedMembers.length&&this.searchedMembers[e].uniqueName!=this.selectedMembers[i].uniqueName;)i++;i==this.selectedMembers.length&&t.push(this.searchedMembers[e]),i=0,e++}else for(;e<r;e++)t[e]=i[e];return{items:t,negation:e=(!this.isSearched()||!this.isAllSelected)&&0!=t.length&&this.isAllSelected}},e.prototype.setItems=function(e){this.allMembers=e,this.searchPhrase="",this.searchedMembers.length=0},e.prototype.getItems=function(e,t){for(var i,r=[],n=e,o=RegExp("("+this.searchPhrase+")","i"),s=this.isSearched()?this.searchedMembers:this.allMembers;n<t&&!(n>s.length-1);n++)i={member:i=s[n],label:this.isSearched()?i.caption.replace(o,"<b>$1</b>"):i.caption,isSelected:(-1==this.selectedMembers.indexOf(i)?this.isAllSelected:!this.isAllSelected)?1:0,levelNum:0,rightMargin:t-e<s.length-1?15:0},r.push(i);return r},e.prototype.getLength=function(){return this.isSearched()?this.searchedMembers.length:this.allMembers.length},e.prototype.getTotalLength=function(){return this.getLength()},e.prototype.isSearched=function(){return 0<this.searchPhrase.length},e.prototype.expand=function(e){},e.prototype.collapse=function(e){},e}();e.MembersFilterDataProvider=t}(e.filter||(e.filter={}))}(e._view||(e._view={}))}(n||(n={})),function(e){var t;!function(t){var i=function(){function t(){this.numParentsInSearch=0,this.members=[],this.selectedMembers=[],this.searchedMembers=[],this.partlySelectedMembers=[],this.expandedMembers=[],this.searchPhrase="",this.isAllSelected=!0,this.sortType=e.data_.consts.SortType.UNSORTED}return t.prototype.setHierarchy=function(e){this.currentHierarchy=e,this.members.length=0},t.prototype.getHierarchy=function(){return this.currentHierarchy},t.prototype.setSortType=function(e){this.sortType=e,this.members.length=0,this.insertDescendants(this.currentHierarchy.allMember,-1)},t.prototype.getSortType=function(){return this.sortType},t.prototype.setItems=function(t){for(var i,r=0,n=t.length;r<n;r++)(i=t[r]).isAll||(this.members.push(i),i.isDrilledDown&&i.children&&0<i.children.length&&(this.expandedMembers.push(i),this.setItems(this.sortType===e.data_.consts.SortType.UNSORTED?i.children.toArray():this.currentHierarchy.sortChildren(i,!1,this.sortType).toArray())))},t.prototype.getItems=function(e,t){for(var i,r=e,n=[],o=RegExp("("+this.searchPhrase+")","i"),s=this.isSearched()?this.searchedMembers:this.members;r<t&&!(r>s.length-1);r++)i={member:i=s[r],levelNum:i.level.num,label:this.isSearched()?i.caption.replace(o,"<b>$1</b>"):i.caption,isSelected:this.isSelected(i),isSearched:this.isSearched(),isExpanded:this.isExpanded(i),rightMargin:t-e<s.length-1?17:0},n.push(i);return n},t.prototype.isSelected=function(e){var t=(-1==this.selectedMembers.indexOf(e)?this.isAllSelected:!this.isAllSelected)?1:0;return 0<this.selectedMembers.length&&-1!=this.partlySelectedMembers.indexOf(e)&&(t=-1),t},t.prototype.isExpanded=function(e){return this.isSearched()||e.isLeaf?-1:-1!=this.expandedMembers.indexOf(e)?1:0},t.prototype.getLength=function(){return this.isSearched()?this.searchedMembers.length:this.members.length},t.prototype.getTotalLength=function(){return this.isSearched()?this.searchedMembers.length-this.numParentsInSearch:this.currentHierarchy?this.currentHierarchy.members.length-1:0},t.prototype.select=function(e,t){var i=-1;i=this.selectedMembers.indexOf(e),this.isAllSelected!==t?(-1==i&&this.selectedMembers.push(e),0<e.children.length&&this.pushDescendantsToSelected(e)):(-1!=i&&this.selectedMembers.splice(i,1),0<e.children.length&&this.removeDescendantsFromSelected(e)),-1!=(i=s.ArrayUtils.findIndex(this.partlySelectedMembers,e.uniqueName,"uniqueName"))&&this.partlySelectedMembers.splice(i,1),this.selectParents(e),this.selectedMembers.length===this.currentHierarchy.members.length-1&&(this.selectedMembers.length=0,this.partlySelectedMembers.length=0,this.isAllSelected=!this.isAllSelected)},t.prototype.selectDescendants=function(e){-1==this.partlySelectedMembers.indexOf(e)&&(-1==this.selectedMembers.indexOf(e)?this.removeDescendantsFromSelected(e):this.pushDescendantsToSelected(e))},t.prototype.selectParents=function(e){var t,i=e.parent;if(i&&!i.isAll){e=s.ArrayUtils.findIndex(this.selectedMembers,i.uniqueName,"uniqueName"),t=s.ArrayUtils.findIndex(this.partlySelectedMembers,i.uniqueName,"uniqueName");var r=-1!=e;this.hasSelectedChildren(i,!1)?(this.hasSelectedChildren(i)?(-1==t&&this.partlySelectedMembers.push(i),this.isAllSelected&&r&&this.selectedMembers.splice(e,1)):(-1!=t&&this.partlySelectedMembers.splice(t,1),this.isAllSelected&&!r&&this.selectedMembers.push(i)),!this.isAllSelected&&r&&this.selectedMembers.splice(e,1)):(-1!=t&&this.partlySelectedMembers.splice(t,1),this.isAllSelected&&r?this.selectedMembers.splice(e,1):this.isAllSelected||r||this.selectedMembers.push(i)),this.selectParents(i)}},t.prototype.hasSelectedChildren=function(e,t){void 0===t&&(t=!0);for(var i,r=0,n=e.children.toArray(),o=n.length;r<o;r++)if(-1==s.ArrayUtils.findIndex(this.selectedMembers,(i=n[r]).uniqueName,"uniqueName")==this.isAllSelected==t||-1!=s.ArrayUtils.findIndex(this.partlySelectedMembers,i.uniqueName,"uniqueName"))return!0;return!1},t.prototype.pushDescendantsToSelected=function(e){for(var t,i,r=0,n=e.children.toArray(),o=n.length;r<o;r++)e=s.ArrayUtils.findIndex(this.selectedMembers,(i=n[r]).uniqueName,"uniqueName"),t=s.ArrayUtils.findIndex(this.partlySelectedMembers,i.uniqueName,"uniqueName"),-1==e&&this.selectedMembers.push(i),-1!=t&&this.partlySelectedMembers.splice(t,1),0<i.children.length&&this.pushDescendantsToSelected(i)},t.prototype.removeDescendantsFromSelected=function(e){for(var t,i,r=0,n=e.children.toArray(),o=n.length;r<o;r++)e=s.ArrayUtils.findIndex(this.selectedMembers,(i=n[r]).uniqueName,"uniqueName"),t=s.ArrayUtils.findIndex(this.partlySelectedMembers,i.uniqueName,"uniqueName"),-1!=e&&this.selectedMembers.splice(e,1),-1!=t&&this.partlySelectedMembers.splice(t,1),0<i.children.length&&this.removeDescendantsFromSelected(i)},t.prototype.selectAll=function(e){if(this.isSearched())for(var t=this.searchedMembers.length,i=0;i<t;i++)s.StringUtils.contains(this.searchedMembers[i].caption,this.searchPhrase)&&this.select(this.searchedMembers[i],e);else this.isAllSelected=e,this.selectedMembers.length=0,this.partlySelectedMembers.length=0},t.prototype.getSelectedLength=function(){if(this.isSearched()){for(var e=0,t=this.searchedMembers.length,i=0;i<t;i++)s.StringUtils.contains(this.searchedMembers[i].caption,this.searchPhrase)&&0>s.ArrayUtils.findIndex(this.selectedMembers,this.searchedMembers[i].uniqueName,"uniqueName")==this.isAllSelected&&e++;return e}return this.getTotalSelectedLength()},t.prototype.getTotalSelectedLength=function(){var e=this.isAllSelected?this.currentHierarchy.members.length-this.selectedMembers.length-this.partlySelectedMembers.length-1:this.selectedMembers.length;return 0>e?0:e},t.prototype.setFilterItems=function(e){var t=e.length;if(this.selectedMembers.length=0,this.partlySelectedMembers.length=0,0==t)this.isAllSelected=!0;else{this.isAllSelected=!1;for(var i,r,n=0;n<t;n++)for(r=(r=(i=e[n]).children.toArray()).length,this.selectedMembers.push(i),0<r&&this.pushDescendantsToSelected(i);i.parent&&!i.parent.isAll;)-1==s.ArrayUtils.findIndex(this.partlySelectedMembers,(i=i.parent).uniqueName,"uniqueName")&&this.partlySelectedMembers.push(i)}},t.prototype.getFilterItems=function(){for(var e,t,i,r,n=0,o=[],a=(r=this.isSearched()&&this.isAllSelected?this.searchedMembers:this.selectedMembers).length;n<a;n++)i=-1,s.nullOrUndefined(t=(e=r[n]).parent)||(i=s.ArrayUtils.findIndex(r,t.uniqueName,"uniqueName")),-1===i&&o.push(e);return{items:o,negation:n=(!this.isSearched()||!this.isAllSelected)&&0!=o.length&&this.isAllSelected}},t.prototype.search=function(e,t){if(e=e.toLowerCase(),this.searchPhrase===e)t();else if(this.searchPhrase=e,0==this.searchPhrase.length)t();else{this.numParentsInSearch=this.searchedMembers.length=0,this.fillSearchTree(this.currentHierarchy.allMember,e);var i=0,r=0;for(r=0;r<this.searchedMembers.length;r++)i=this.insertParentsToSearch(this.searchedMembers[r],r),this.numParentsInSearch+=i,r+=i;t(this.searchedMembers)}},t.prototype.setSearchedMembers=function(e){null!=e?this.searchedMembers=e:this.searchedMembers.length=0},t.prototype.insertParentsToSearch=function(e,t){var i=e.parent,r=0;return s.nullOrUndefined(i)||i.isAll||(-1==s.ArrayUtils.findIndex(this.searchedMembers,i.uniqueName,"uniqueName")&&(r++,this.searchedMembers.splice(t,0,i)),r+=this.insertParentsToSearch(i,t)),r},t.prototype.fillSearchTree=function(e,t){for(var i,r=e.children,n=r.length,o=0;o<n;o++)i=r.getItemAt(o),s.StringUtils.contains(i.caption,t)&&this.searchedMembers.push(i),this.fillSearchTree(i,t)},t.prototype.isSearched=function(){return 0<this.searchPhrase.length},t.prototype.expand=function(e){-1==this.expandedMembers.indexOf(e)&&this.expandedMembers.push(e),this.showDescendants(e,!0)},t.prototype.collapse=function(e){var t=this.expandedMembers.indexOf(e);-1!=t&&this.expandedMembers.splice(t,1),this.showDescendants(e,!1)},t.prototype.showDescendants=function(e,t){var i=s.ArrayUtils.findIndex(this.members,e.uniqueName,"uniqueName");t?this.insertDescendants(e,i):this.members.splice(i+1,this.getNumDescendants(e))},t.prototype.insertDescendants=function(t,i){for(var r,n=this.sortType===e.data_.consts.SortType.UNSORTED?t.children.toArray():this.currentHierarchy.sortChildren(t,!1,this.sortType).toArray(),o=n.length-1,s=i+1;-1<o;o--)this.members.splice(s,0,r=n[o]),-1<this.expandedMembers.indexOf(r)&&this.insertDescendants(r,s)},t.prototype.getNumDescendants=function(e){for(var t,i=(e=e.children.toArray()).length,r=i,n=0;n<i;n++)-1<this.expandedMembers.indexOf(t=e[n])&&(r+=this.getNumDescendants(t));return r},t}();t.MembersTreeDataProvider=i}((t=e._view||(e._view={})).filter||(t.filter={}))}(n||(n={})),function(e){var t;!function(t){var i=function(i){function n(e){var t=i.call(this)||this;return t.controller=e,t.setControls(),t}return a(n,i),n.prototype.setControls=function(){var i=new r.UIComponentBase("div","wdr-popup-header wdr-ui-row");this.addChild(i);var n=new r.UIComponentBase("div","wdr-ui-col-2 wdr-vam");i.addChild(n),this.titleLabel=new r.UILabel,this.titleLabel.addClass("wdr-popup-title"),n.addChild(this.titleLabel),n=new r.UIComponentBase("div","wdr-ui-col wdr-vam wdr-ui-btns-row"),i.addChild(n),this.cancelBtn=new r.UIButton("wdr-ui-btn"),this.cancelBtn.setLabel(e.model._labels.Labels.BUTTON_CANCEL),this.okBtn=new r.UIButton("wdr-ui-btn-dark"),this.okBtn.setLabel(e.model._labels.Labels.BUTTON_APPLY),s.OSUtil.isIOS||s.OSUtil.isMac?(n.addChild(this.cancelBtn),n.addChild(this.okBtn)):(n.addChild(this.okBtn),n.addChild(this.cancelBtn)),i=new r.UIComponentBase("div","wdr-ui-row"),this.addChild(i),this.sortContainer=new r.UIComponentBase("div","wdr-ui-col-2"),this.sortContainer.container.display="inline-block",i.addChild(this.sortContainer),this.sortLabel=new r.UILabel,this.sortLabel.setId("wdr-sort-label"),this.sortLabel.addClass("wdr-ui-label-light"),this.sortLabel.setLabel(e.model._labels.Labels.FILTER_SORT),this.sortContainer.addChild(this.sortLabel),n=new r.UIComponentBase("div","wdr-sort-btns"),this.sortContainer.addChild(n),this.azBtn=new r.UIToggleButton,this.azBtn.container.addClass("wdr-sort-btn"),this.azBtn.setLabel(e.model._labels.Labels.FILTER_ASC_SORT),n.addChild(this.azBtn),this.zaBtn=new r.UIToggleButton,this.zaBtn.container.addClass("wdr-sort-btn"),this.zaBtn.setLabel(e.model._labels.Labels.FILTER_DESC_SORT),n.addChild(this.zaBtn),(n=new r.UIComponentBase("div","wdr-ui-col-2 wdr-tar wdr-topx-col")).container.display="inline-block",i.addChild(n),this.top10Btn=new r.UIToggleButton,this.top10Btn.setId("wdr-top10-btn"),this.top10Btn.addClass("wdr-ui-toggle-btn-dark"),this.top10Btn.setLabel(e.model._labels.Labels.FILTER_TOP_X),n.addChild(this.top10Btn),this.clearTopBtn=new r.UIComponentBase("span","wdr-btn-canceltopx"),this.clearTopBtn.setId("wdr-clear-top-btn"),this.clearTopBtn.container.attr("title",e.model._labels.Labels.FILTER_TOP_X_CLEAR),this.top10Btn.addChild(this.clearTopBtn),this.topBottomView=new t.TopBottomView,this.topBottomView.setId("wdr-filters-topx-view"),this.topBottomView.hide(),this.addChild(this.topBottomView),this.membersView=new t.MembersView,this.membersView.addClass("wdr-ft-contentheight-220"),this.addChild(this.membersView)},Object.defineProperty(n.prototype,"selectAllCbx",{get:function(){return this.membersView.selectAllCbx},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"membersFilterList",{get:function(){return this.membersView.membersFilterList},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"selectedAmountLabel",{get:function(){return this.membersView.selectedAmountLabel},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"searchInput",{get:function(){return this.membersView.searchInput},enumerable:!0,configurable:!0}),n.prototype.setLabels=function(){this.top10Btn.setLabel(e.model._labels.Labels.FILTER_TOP_X),this.clearTopBtn.container.attr("title",e.model._labels.Labels.FILTER_TOP_X_CLEAR),this.azBtn.setLabel(e.model._labels.Labels.FILTER_ASC_SORT),this.zaBtn.setLabel(e.model._labels.Labels.FILTER_DESC_SORT),this.searchInput.setPrompt(e.model._labels.Labels.FILTER_SEARCH),this.selectAllCbx.setLabel(e.model._labels.Labels.FILTER_SELECT_ALL),this.okBtn.setLabel(e.model._labels.Labels.BUTTON_APPLY),this.cancelBtn.setLabel(e.model._labels.Labels.BUTTON_CANCEL),this.sortLabel.setLabel(e.model._labels.Labels.FILTER_SORT),this.topBottomView.setLabels()},n}(r.containers.UIContainer);t.FilterViewContent=i}((t=e._view||(e._view={})).filter||(t.filter={}))}(n||(n={})),function(e){var t;!function(t){var i=function(i){function n(){var n=i.call(this,"div","wdr-filters-table")||this,o=new r.UIComponentBase("div","wdr-filters-table-header wdr-fth-withsearch");n.addChild(o),n.selectAllCbx=new r.UICheckBox,n.selectAllCbx.setLabel(e.model._labels.Labels.FILTER_SELECT_ALL),o.addChild(n.selectAllCbx),n.selectedAmountLabel=new r.UILabel,n.selectedAmountLabel.setId("wdr-select-counter"),o.addChild(n.selectedAmountLabel),n.searchWrap=new r.UIComponentBase("div","wdr-search-wrap"),o.addChild(n.searchWrap),(o=new r.UIComponentBase("a","wdr-search-btn")).container.text(e.model._labels.Labels.FILTER_SEARCH),o.addEventListener("click",(function(){return n.onSearchClick()})),n.searchWrap.addChild(o);var s=new r.UIComponentBase("span","wdr-ui-icon wdr-icon-act_search");return o.addChild(s),n.searchInput=new r.UITextInput,n.searchInput.addClass("wdr-search-inp"),n.searchWrap.addChild(n.searchInput),(o=new r.UIComponentBase("span","wdr-close-search wdr-ui-icon wdr-icon-act_close")).addEventListener("click",(function(){return n.onSearchCloseClick()})),n.searchWrap.addChild(o),o=new r.UIComponentBase("div","wdr-filters-table-content"),n.addChild(o),n.membersFilterList=new t.FilterList,n.membersFilterList.setSmartDataProvider(new t.MembersFilterDataProvider),n.membersFilterList.setId("wdr-members-filter-list"),o.addChild(n.membersFilterList),n}return a(n,i),n.prototype.onSearchClick=function(){this.searchWrap.addClass("wdr-search-opened"),this.searchInput.container.focus(),this.selectedAmountLabel.hide()},n.prototype.onSearchCloseClick=function(){this.searchWrap.removeClass("wdr-search-opened"),this.searchInput.clear(),this.selectedAmountLabel.show()},n.prototype.reset=function(){this.onSearchCloseClick()},n}(r.UIComponentBase);t.MembersView=i}((t=e._view||(e._view={})).filter||(t.filter={}))}(n||(n={})),function(e){!function(e){!function(e){var i=function(i){function n(){var e=i.call(this)||this;return e.levelMargin=20,e.expandBtn=new r.UIToggleButton,e.expandBtn.removeClass("wdr-ui-toggle-btn"),e.expandBtn.addClass("wdr-expand-toggle-btn"),e.expandBtn.addEventListener(t._Event.CHANGE,(function(){return e.onCollapseExpand()})),e.container.append(e.expandBtn.container),e.selectedCheckBox=new r.UICheckBox,e.selectedCheckBox.addEventListener(t._Event.CHANGE,(function(){return e.onSelect()})),e.container.append(e.selectedCheckBox.container),e.container.addEventListener("click",(function(t){return e.onClick(t)})),e.invalidate("all"),e}return a(n,i),n.prototype.onCollapseExpand=function(){var t=this.getData();t.isExpanded=this.expandBtn.getSelection(),this.container.dispatchWith(e.FilterList.EXPAND_EVENT,this,t)},n.prototype.onClick=function(e){e.target==this.container.element&&(this.selectedCheckBox.toggle(),this.onSelect())},n.prototype.onSelect=function(){var t=this.getData();t.isSelected=this.selectedCheckBox.getSelection(),this.container.dispatchWith(e.FilterList.SELECT_EVENT,this,t)},n.prototype.draw=function(){if(this.isInvalid("data")){var e=this.getData();if(this.expandBtn&&this.selectedCheckBox&&e){this.container.css("padding-left","");var t=this.levelMargin*(e.levelNum-1);e.isSearched||-1!==e.isExpanded||(t+=30),0<t&&this.container.css("padding-left",t+"px"),isNaN(e.isExpanded)||-1===e.isExpanded||e.isSearched?this.expandBtn.hide():(this.expandBtn.show(),this.expandBtn.setSelection(e.isExpanded)),t=(t=e[this.getLabelField()]).replace(/<(?:.|\n)*?>/gi,""),this.selectedCheckBox.setLabel(t,!0),this.selectedCheckBox.setSelection(e.isSelected)}}},n}(r.renderers.UIItemRenderer);e.FilterListItemRenderer=i}(e.filter||(e.filter={}))}(e._view||(e._view={}))}(n||(n={})),function(e){var i;!function(i){var n=function(r){function n(){var e=r.call(this)||this;return e.setItemRendererFactory((function(t,i){return e.getItemRendererFactory(t,i)})),e}return a(n,r),n.prototype.getItemRendererFactory=function(e,t){var r=this,o=new i.FilterListItemRenderer;return o.setData(e),o.setIndex(t),o.addEventListener(n.SELECT_EVENT,(function(e){return r.onSelect(e)})),o.addEventListener(n.EXPAND_EVENT,(function(e){return r.onExpand(e)})),o},n.prototype.onSelect=function(e){this.setSelected(e=e.data,1===e.isSelected),this.dispatch(new t._Event(n.SELECT_EVENT,this))},n.prototype.onExpand=function(i){var r=this,o=i.data;1===o.isExpanded?0===o.member.children.length?e.model.PivotModel.getInstance().cube_.loadMemberChildren(o.member.hierarchy_,o.member,(function(e){return r.onChildrenLoaded(o.member)})):this.onChildrenLoaded(o.member):(this.getSmartDataProvider().collapse(o.member),this.invalidate("data"),this.dispatch(new t._Event(n.EXPAND_EVENT,this)))},n.prototype.onChildrenLoaded=function(i){e.preloader(!1),this.getSmartDataProvider().selectDescendants(i),this.getSmartDataProvider().expand(i),this.invalidate("data"),this.dispatch(new t._Event(n.EXPAND_EVENT,this))},n.prototype.getSmartDataProvider=function(){return this.filterDataProvider},n.prototype.setSmartDataProvider=function(e){this.filterDataProvider=e},n.prototype.getFilterItems=function(){return this.getSmartDataProvider().getFilterItems()},n.prototype.setFilterItems=function(e){this.getSmartDataProvider().setFilterItems(e),this.invalidate("data")},n.prototype.getSelectedLength=function(){return this.getSmartDataProvider().getSelectedLength()},n.prototype.getTotalSelectedLength=function(){return this.getSmartDataProvider().getTotalSelectedLength()},n.prototype.getTotalLength=function(){return this.getSmartDataProvider().getLength()},n.prototype.getTotalItemsCount=function(){return this.getSmartDataProvider().getTotalLength()},n.prototype.setSelected=function(e,t){this.getSmartDataProvider().select(e.member,t),this.invalidate("data")},n.prototype.selectAll=function(e){this.getSmartDataProvider().selectAll(e),this.invalidate("data")},n.prototype.search=function(e,t){var i=this;this.getSmartDataProvider().search(e,(function(e){i.getSmartDataProvider().setSearchedMembers(e),i.invalidate("data"),t()}))},n.prototype.isSearched=function(){return this.getSmartDataProvider().isSearched()},n.prototype.setHierarchy=function(e){this.getSmartDataProvider().setHierarchy(e)},n.prototype.sort=function(e){e!==this.getSmartDataProvider().getSortType()&&(this.getSmartDataProvider().setSortType(e),this.invalidate("data"))},n.SELECT_EVENT="_",n.EXPAND_EVENT="__",n}(r.lists.UIVirtualList);i.FilterList=n}((i=e._view||(e._view={})).filter||(i.filter={}))}(n||(n={})),function(e){var i;!function(i){var n=function(i){function n(){var n=i.call(this,"div")||this;n._isEmpty=!0,n.addClass("wdr-filters-subview"),n.quantityInput=new r.UITextInput,n.quantityInput.setId("wdr-top-amount-input"),n.quantityInput.setRestriction(/^\d+$/),n.quantityInput.setType("number"),n.quantityInput.addEventListener(r.UITextInput.CHANGE_EVENT,(function(){return n.onQuantityChange()})),n.addChild(n.quantityInput);var o=new r.UIComponentBase("div");return o.setId("wdr-topx-btns"),n.addChild(o),n.btnTop=new r.UIToggleButton,n.btnTop.setId("wdr-btn-top"),n.btnTop.addClass("wdr-topx-btn"),n.btnTop.setLabel(e.model._labels.Labels.FILTER_TOP),n.btnTop.addEventListener(t._Event.CHANGE,(function(){return n.onBtnTopChange()})),o.addChild(n.btnTop),n.btnBottom=new r.UIToggleButton,n.btnBottom.setId("wdr-btn-bottom"),n.btnBottom.addClass("wdr-topx-btn"),n.btnBottom.setLabel(e.model._labels.Labels.FILTER_BOTTOM),n.btnBottom.addEventListener(t._Event.CHANGE,(function(){return n.onBtnBottomChange()})),o.addChild(n.btnBottom),n.measuresDropDown=new r.lists.UIDropDownList,n.measuresDropDown.setId("wdr-top-measures-dropdown"),n.measuresDropDown.setLabelField("caption"),n.measuresDropDown.setPrompt(""),n.measuresDropDown.addEventListener(t._Event.CHANGE,(function(e){return n.onMeasuresChange(e)})),n.addChild(n.measuresDropDown),n}return a(n,i),n.prototype.onBtnTopChange=function(){this._isEmpty=!1,this.btnBottom.setSelection(1-this.btnTop.getSelection()),this.dispatch(new t._Event(n.CHANGE_EVENT,this))},n.prototype.onBtnBottomChange=function(){this._isEmpty=!1,this.btnTop.setSelection(1-this.btnBottom.getSelection()),this.dispatch(new t._Event(n.CHANGE_EVENT,this))},n.prototype.onMeasuresChange=function(e){this._isEmpty=!1,this.dispatch(new t._Event(n.CHANGE_EVENT,this))},n.prototype.onQuantityChange=function(){this._isEmpty=!1,""==this.getFilterType()&&this.setFilterType(e.data_.consts.FilterType.TOP),this.dispatch(new t._Event(n.CHANGE_EVENT,this))},n.prototype.setMeasures=function(e){this.measuresDropDown.setDataProvider(e),this.measuresDropDown.setSelectedIndex(0)},n.prototype.getSelectedMeasure=function(){return this.measuresDropDown.getSelectedItem()},n.prototype.setSelectedMeasure=function(e){this._isEmpty=!1,this.measuresDropDown.setSelectedItem(e,"uniqueName")},n.prototype.reset=function(){this._isEmpty=!0;var t=e.model._options.OptionsManager.flatView;this.btnTop.setSelection(t?0:1),this.btnBottom.setSelection(0),this.measuresDropDown.setSelectedIndex(0),this.measuresDropDown.isVisible(!t),this.quantityInput.setText("10")},n.prototype.setLabels=function(){this.btnTop.setLabel(e.model._labels.Labels.FILTER_TOP),this.btnBottom.setLabel(e.model._labels.Labels.FILTER_BOTTOM),this.measuresDropDown.setPrompt("")},n.prototype.getFilterType=function(){return 1===this.btnTop.getSelection()?e.data_.consts.FilterType.TOP:1===this.btnBottom.getSelection()?e.data_.consts.FilterType.BOTTOM:""},n.prototype.setFilterType=function(t){t==e.data_.consts.FilterType.TOP?(this._isEmpty=!1,this.btnTop.setSelection(1),this.btnBottom.setSelection(0)):t==e.data_.consts.FilterType.BOTTOM&&(this._isEmpty=!1,this.btnTop.setSelection(0),this.btnBottom.setSelection(1))},n.prototype.getFilterQuantity=function(){return parseInt(this.quantityInput.getText())},n.prototype.setFilterQuantity=function(e){this._isEmpty=!1,this.quantityInput.setText(e.toString())},Object.defineProperty(n.prototype,"isEmpty",{get:function(){return this._isEmpty},enumerable:!0,configurable:!0}),n.CHANGE_EVENT="_",n}(r.UIComponentBase);i.TopBottomView=n}((i=e._view||(e._view={})).filter||(i.filter={}))}(n||(n={})),function(e){var t,i,r;i=(t=e._view||(e._view={})).filter||(t.filter={}),r=function(){function i(){if(this.sortTypeChanged=!1,null!=i.instance)throw"FilterModel is singleton!";this.pivotInstance=e.Pivot.instance,this.modelLocator=e.model.PivotModel.getInstance(),this.zeroCoord=t.PivotView.stage.position()}return i.getInstance=function(){return null==i.instance&&(i.instance=new i),i.instance},i.dispose=function(){i.instance=null},i.prototype.getHierarchies=function(){return this.hierarchies},i.prototype.setHierarchies=function(e){this.hierarchies=e},i.prototype.update=function(e){this.currentCoord={top:this.zeroCoord.top,left:this.zeroCoord.left};var t=this.modelLocator.cube_.slice_.allHierarchies(!1,!0,this.isFlatTable).toArray();this.setHierarchies(t),this.setCurrentHierarchy(e),this.measures=this.modelLocator.cube_.slice_.measures_.toArray()},i.prototype.clearValuesFilter=function(){this.filterType=e.data_.consts.FilterType.NONE,this.filterQuantity=-1,this.filterMeasureName=""},i.prototype.setCurrentHierarchy=function(t){(this.currentHierarchy=t)&&(this.sortType=this.currentHierarchy.sortName,this.sortTypeChanged=!1,this.filterMeasureName=this.currentHierarchy.filterMeasureName,this.filterQuantity=this.currentHierarchy.filterQuantity,this.filterType=this.currentHierarchy.filterType,this.members=this.sortType!==e.data_.consts.SortType.UNSORTED?this.currentHierarchy.sortChildren(this.currentHierarchy.allMember,!1,this.sortType).toArray():this.currentHierarchy.allMember.children.toArray())},i.prototype.getTopBottomMeasures=function(){return this.isFlatTable?[this.modelLocator.cube_.structure_.hierarchyToMeasure(this.currentHierarchy.uniqueName)]:this.measures},i.prototype.getSortType=function(){return this.sortType},i.prototype.setSortType=function(e){this.sortType=e,this.sortTypeChanged=!0},i.prototype.applyChanges=function(){this.currentHierarchy.hasValuesFilter()&&this.isValuesFilterEmpty&&this.modelLocator.clearFilter(this.currentHierarchy.uniqueName),this.applyMembersFilter(),this.applyValuesFilter(),this.applySort()},Object.defineProperty(i.prototype,"isValuesFilterEmpty",{get:function(){return!this.filterMeasureName||0===this.filterMeasureName.length||isNaN(this.filterQuantity)||1>this.filterQuantity||!this.filterType||0===this.filterType.length||this.filterType===e.data_.consts.FilterType.NONE},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"isValuesFilterChanged",{get:function(){return this.currentHierarchy.filterMeasureName!==this.filterMeasureName||this.currentHierarchy.filterQuantity!==this.filterQuantity||this.currentHierarchy.filterType!==this.filterType},enumerable:!0,configurable:!0}),i.prototype.applyValuesFilter=function(){!this.isValuesFilterEmpty&&this.isValuesFilterChanged&&("top"===this.filterType?this.modelLocator.setTopX(this.currentHierarchy.uniqueName,this.filterQuantity,this.filterMeasureName):"bottom"===this.filterType&&this.modelLocator.setBottomX(this.currentHierarchy.uniqueName,this.filterQuantity,this.filterMeasureName))},i.prototype.isMembersFilterChanged=function(){if(this.filteredMembers.length!==this.currentHierarchy.filterMembers.length&&!this.filterNegation)return!0;for(var e=0,t=this.filteredMembers.length;e<t;e++)if(this.filterNegation===this.currentHierarchy.filterMembers.keyExists(this.filteredMembers[e].uniqueName))return!0;return!(!this.filterNegation||!this.currentHierarchy||this.currentHierarchy.filterMembers.length+this.filteredMembers.length===this.currentHierarchy.members.length-1)},i.prototype.applyMembersFilter=function(){this.isMembersFilterChanged()&&this.modelLocator.setFilter(this.currentHierarchy.uniqueName,this.filteredMembers,this.filterNegation)},i.prototype.isSortTypeChanged=function(){return this.sortTypeChanged},i.prototype.applySort=function(){this.isSortTypeChanged()&&this.modelLocator.setSort(this.currentHierarchy.uniqueName,this.sortType)},Object.defineProperty(i.prototype,"isPages",{get:function(){return!this.isFlatTable&&this.modelLocator.cube_.slice_.pages.keyExists(this.currentHierarchy.uniqueName)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"isFlatTable",{get:function(){return e.model._options.OptionsManager.flatView},enumerable:!0,configurable:!0}),i}(),i.FilterModel=r}(n||(n={})),function(e){var i,n,o;i=e._view||(e._view={}),n=i.filter||(i.filter={}),o=function(o){function l(){var e=o.call(this)||this;return e.model=n.FilterModel.getInstance(),e.view=new n.FilterViewContent(e),null!=e.view.hierarchiesList&&e.view.hierarchiesList.addEventListener(t._Event.CHANGE,(function(t){return e.onHierarchiesListChange(t)})),null!=e.view.searchInput&&e.view.searchInput.addEventListener(r.UITextInput.CHANGE_EVENT,(function(t){return e.onSearchInputChange(t.data)})),null!=e.view.membersFilterList&&(e.view.membersFilterList.addEventListener(n.FilterList.SELECT_EVENT,(function(){return e.onMembersFilterSelect()})),e.view.membersFilterList.addEventListener(n.FilterList.EXPAND_EVENT,(function(){return e.onMembersFilterExpand()}))),null!=e.view.selectAllCbx&&e.view.selectAllCbx.addEventListener(t._Event.CHANGE,(function(){return e.onSelectAllChange()})),null!=e.view.azBtn&&e.view.azBtn.addEventListener(t._Event.CHANGE,(function(){return e.onAzBtnChange()})),null!=e.view.zaBtn&&e.view.zaBtn.addEventListener(t._Event.CHANGE,(function(){return e.onZaBtnChange()})),null!=e.view.top10Btn&&e.view.top10Btn.addEventListener(t._Event.CHANGE,(function(){return e.onTop10Change()})),null!=e.view.clearTopBtn&&e.view.clearTopBtn.container.addEventListener("click",(function(t){return e.onClearTop(t)})),null!=e.view.topBottomView&&e.view.topBottomView.addEventListener(n.TopBottomView.CHANGE_EVENT,(function(){return e.onTopBottomChange()})),null!=e.view.okBtn&&e.view.okBtn.addEventListener(r.UIButton.CLICK_EVENT,(function(t){return e.onOkClick(t)})),null!=e.view.cancelBtn&&e.view.cancelBtn.addEventListener(r.UIButton.CLICK_EVENT,(function(t){return e.onCancelClick(t)})),e}return a(l,o),l.prototype.onDataUpdated=function(){this.update(this.model.currentHierarchy)},l.prototype.onClearTop=function(e){e.stopImmediatePropagation(),this.model.clearValuesFilter(),this.view.topBottomView&&(this.view.topBottomView.reset(),this.view.topBottomView.hide()),this.view.top10Btn&&(this.view.top10Btn.container.removeClass("wdr-not-empty"),this.view.top10Btn.setSelection(0))},l.prototype.onTopBottomChange=function(){if(this.view.topBottomView){this.model.filterType=this.view.topBottomView.getFilterType(),this.model.filterQuantity=this.view.topBottomView.getFilterQuantity();var e=this.view.topBottomView.getSelectedMeasure();this.model.filterMeasureName=e?e.uniqueName:""}this.view.top10Btn&&this.view.top10Btn.container.addClass("wdr-not-empty")},l.prototype.onTop10Change=function(){this.view.topBottomView&&this.view.topBottomView.isVisible(1===this.view.top10Btn.getSelection())},l.prototype.onOkClick=function(e){this.dispatchWith("close"),e=this.view.membersFilterList.getFilterItems(),this.model.filteredMembers=e.items,this.model.filterNegation=e.negation,this.model.applyChanges()},l.prototype.onCancelClick=function(e){this.dispatchWith("close")},l.prototype.onAzBtnChange=function(){1===this.view.azBtn.getSelection()&&(this.view.zaBtn.setSelection(0),this.model.setSortType(e.data_.consts.SortType.ASC),this.view.membersFilterList&&this.view.membersFilterList.sort(this.model.getSortType())),0===this.view.azBtn.getSelection()&&0===this.view.zaBtn.getSelection()&&(this.model.setSortType(e.data_.consts.SortType.UNSORTED),this.view.membersFilterList&&this.view.membersFilterList.sort(this.model.getSortType()))},l.prototype.onZaBtnChange=function(){1===this.view.zaBtn.getSelection()&&(this.view.azBtn.setSelection(0),this.model.setSortType(e.data_.consts.SortType.DESC),this.view.membersFilterList&&this.view.membersFilterList.sort(this.model.getSortType())),0===this.view.azBtn.getSelection()&&0===this.view.zaBtn.getSelection()&&(this.model.setSortType(e.data_.consts.SortType.UNSORTED),this.view.membersFilterList&&this.view.membersFilterList.sort(this.model.getSortType()))},l.prototype.onSelectAllChange=function(){this.view.membersFilterList&&(this.view.membersFilterList.selectAll(1==this.view.selectAllCbx.getSelection()),this.view.membersFilterList.getTotalSelectedLength(),this.view.okBtn.setEnabled(0<this.view.membersFilterList.getTotalSelectedLength())),this.updateSelectedLabel()},l.prototype.onMembersFilterSelect=function(){this.view.okBtn.setEnabled(0<this.view.membersFilterList.getTotalSelectedLength()),this.updateAllSelectedCbx(),this.updateSelectedLabel()},l.prototype.onMembersFilterExpand=function(){this.updateLayout(),this.updateSelectedLabel()},l.prototype.updateAllSelectedCbx=function(){0==this.view.membersFilterList.getSelectedLength()?this.view.selectAllCbx.setSelection(0):this.view.membersFilterList.getTotalItemsCount()>this.view.membersFilterList.getSelectedLength()?this.view.selectAllCbx.setSelection(-1):this.view.membersFilterList.getTotalItemsCount()==this.view.membersFilterList.getSelectedLength()&&this.view.selectAllCbx.setSelection(1)},l.prototype.update=function(t){var i=this;0!=this.view.isVisible()&&(1e4<t.members.length?(e.preloader(!0,"Please, wait","Sorting members...",!0,!0),setTimeout((function(){i.model.update(t),i.updateView(),e.preloader(!1)}),50)):(this.model.update(t),this.updateView()))},l.prototype.onSearchInputChange=function(e){var t=this;e.trim()==e&&this.view.membersFilterList&&this.view.membersFilterList.search(e,(function(){return t.onSearchComplete()}))},l.prototype.onSearchComplete=function(){this.updateLayout(),this.updateSelectedLabel(),this.updateAllSelectedCbx()},l.prototype.updateView=function(){this.view.setLabels(),this.view.container.toggleClass("wdr-filter-pages-layout",this.model.isPages),this.view.membersView&&this.view.membersView.reset(),this.view.searchInput&&(this.view.searchInput.clear(),this.view.searchInput.setChangeDelay(0)),this.view.top10Btn&&(e.data_.types.MeasureType.STRING==e.data_.types.MeasureType.fromDataType(this.model.currentHierarchy.dimension.type+"")&&e.model._options.OptionsManager.flatView?this.view.top10Btn.hide():this.view.top10Btn.show()),this.updateSortType(),this.updateHierarchy(),this.updateMembers(),this.updateTopBottom(),this.updateLayout(),this.updateSelectedLabel();var t=!this.model.isPages;this.view.azBtn&&(t?this.view.azBtn.show():this.view.azBtn.hide()),this.view.zaBtn&&(t?this.view.zaBtn.show():this.view.zaBtn.hide()),this.view.top10Btn&&(this.isAvailableTopX?this.view.top10Btn.show():this.view.top10Btn.hide()),this.view.sortContainer&&(t?this.view.sortContainer.show():this.view.sortContainer.hide())},Object.defineProperty(l.prototype,"isAvailableTopX",{get:function(){if(this.model.isFlatTable){var t=this.model.modelLocator.cube_.structure_.hierarchyToMeasure(this.model.currentHierarchy.uniqueName);return t&&t.type==e.data_.types.MeasureType.NUMBER}return!this.model.isPages},enumerable:!0,configurable:!0}),l.prototype.updateMembers=function(){var e,t=this.model.currentHierarchy;this.view.selectAllCbx&&this.view.selectAllCbx.setSelection(0<t.filterMembers.length?-1:1),e=2<t.levels_.length?new n.MembersTreeDataProvider:new n.MembersFilterDataProvider,this.view.membersFilterList&&(this.view.membersFilterList.setSmartDataProvider(e),this.view.membersFilterList.setHierarchy(t),this.view.membersFilterList.setDataProvider(this.model.members),this.view.membersFilterList.setFilterItems(t.filterMembers.toArray()),this.view.membersFilterList.sort(this.model.getSortType()))},l.prototype.updateHierarchy=function(){this.view.titleLabel&&this.view.titleLabel.setLabel(this.model.currentHierarchy.caption),this.view.toolbar&&this.view.toolbar.setHeader(this.model.currentHierarchy.caption)},l.prototype.updateLayout=function(){if(this.view.membersFilterList&&0<this.view.membersFilterList.getTotalLength())if(this.view.selectAllCbx&&this.view.selectAllCbx.show(),0==this.view.explicitListHeight||isNaN(this.view.explicitListHeight)){var e=s.browserVersion().isMobile?s.viewportHeight()-50:i.PivotView.stage.getY()+i.PivotView.stageHeight-window.document.documentElement.scrollTop;e=Math.min(e,parseFloat(window.document.documentElement.style.height))-this.view.membersFilterList.container.offset().top+window.document.documentElement.scrollTop-i.PivotView.stage.toolbarHeight,e=Math.max(e,84),this.setOptimalListHeight(e,!0)}else this.setOptimalListHeight(this.view.explicitListHeight,!1);else this.view.selectAllCbx&&this.view.selectAllCbx.hide()},l.prototype.updateSortType=function(){this.view.azBtn&&this.view.azBtn.setSelection("asc"===this.model.getSortType()?1:0),this.view.zaBtn&&this.view.zaBtn.setSelection("desc"===this.model.getSortType()?1:0)},l.prototype.updateTopBottom=function(){this.view.topBottomView&&(this.view.topBottomView.reset(),this.view.topBottomView.setMeasures(this.model.getTopBottomMeasures())),"top"===this.model.filterType||"bottom"===this.model.filterType?(this.view.topBottomView&&(this.view.topBottomView.setFilterType(this.model.filterType),this.view.topBottomView.setFilterQuantity(this.model.filterQuantity),this.view.topBottomView.setSelectedMeasure(s.ArrayUtils.find(this.model.measures,this.model.filterMeasureName,"uniqueName")),this.view.topBottomView.show()),this.view.top10Btn&&this.view.top10Btn.setSelection(1)):(this.view.topBottomView&&this.view.topBottomView.hide(),this.view.top10Btn&&this.view.top10Btn.setSelection(0)),this.view.top10Btn&&this.view.top10Btn.container.toggleClass("wdr-not-empty",!(!this.view.topBottomView||this.view.topBottomView.isEmpty))},l.prototype.setOptimalListHeight=function(e,t){var i=Math.max(Math.min(e,this.view.membersFilterList.getMaxHeight()),this.view.membersFilterList.getMinHeight());t&&(i-=i%this.view.membersFilterList.getRowHeight()),this.view.membersFilterList.setHeight(i),this.view.table&&this.view.contentPanel.setHeight(this.view.table.getHeight())},l.prototype.updateSelectedLabel=function(){var t="";this.view.membersFilterList&&(t=this.view.membersFilterList.isSearched()?s.StringUtils.bind(e.model._labels.Labels.FILTER_AMOUNT_FOUND,this.view.membersFilterList.getSelectedLength(),this.view.membersFilterList.getTotalItemsCount()):s.StringUtils.bind(e.model._labels.Labels.FILTER_AMOUNT_SELECTED,this.view.membersFilterList.getSelectedLength(),this.view.membersFilterList.getTotalItemsCount())),this.view.selectedAmountLabel&&this.view.selectedAmountLabel.setLabel(t),this.view.selectAllCbx&&this.view.selectAllCbx.setLabel(this.view.membersFilterList&&this.view.membersFilterList.isSearched()?e.model._labels.Labels.FILTER_SELECT_ALL_RESULTS:e.model._labels.Labels.FILTER_SELECT_ALL)},l.prototype.onHierarchiesListChange=function(e){-1<e.data.selectedIndex&&(this.model.setCurrentHierarchy(e.data.selectedItem),this.updateView())},l}(t.EventDispatcher),n.FilterController=o}(n||(n={})),function(e){!function(e){var i,n;i=e.filter||(e.filter={}),n=function(r){function n(){var t=r.call(this,e.PivotView.stage.container)||this;return t.setId("wdr-filter-view"),t.addClass("wdr-noselect"),t.controller=new i.FilterController,t.controller.addEventListener("close",(function(){return t.close()})),t.addChild(t.controller.view),t.controller.view.show(),t}return a(n,r),n.prototype.openView=function(e){this.open(),this.controller.update(e),this.centerPosition(),this.dispatchWith(t._Event.OPENED)},n.prototype.close=function(){r.prototype.close.call(this),this.dispatchWith(t._Event.CLOSED)},n}(r.containers.UIPopup),i.FilterView=n}(e._view||(e._view={}))}(n||(n={})),function(e){var t=function(){function t(){this.styleSheet=new e.styles.XLSStyleSheet,this.sheets=[],e.styles.format.XLSStyleFormat.lastNumFmtId=e.styles.format.XLSStyleFormat.defaultNumFmtId}return t.prototype.toUint8Array=function(){s.getTimer();var t=new JSZip;t.file("[Content_Types].xml",e.XLSTemplates.XML_HEADER+this.composeContentTypeXMLString()),t.file("_rels/.rels",e.XLSTemplates.XML_HEADER+e.XLSTemplates._RELS),t.file("xl/_rels/workbook.xml.rels",e.XLSTemplates.XML_HEADER+this.composeWorkbookRelsXMLString()),t.file("xl/workbook.xml",e.XLSTemplates.XML_HEADER+this.composeWorkbookXMLString()),t.file("xl/theme/theme1.xml",e.XLSTemplates.XML_HEADER+e.XLSTemplates.THEME);for(var i=0;i<this.sheets.length;i++){var r=this.sheets[i].toXMLString();t.file("xl/worksheets/sheet"+(i+1)+".xml",e.XLSTemplates.XML_HEADER+r)}return t.file("xl/sharedStrings.xml",e.XLSTemplates.XML_HEADER+this.composeSharedStrings()),t.file("xl/styles.xml",e.XLSTemplates.XML_HEADER+this.styleSheet.toXMLString()),t.file("docProps/app.xml",e.XLSTemplates.XML_HEADER+e.XLSTemplates.APP_XML),t.file("docProps/core.xml",e.XLSTemplates.XML_HEADER+e.XLSTemplates.CORE_XML),t.generate({compression:"STORE",type:"uint8array"})},t.prototype.composeSharedStrings=function(){var t="";o.XML.create("<axis/>").attr("name","rows");for(var i=0;i<e.XLSSharedStrings.strings.length;i++)t=t+"<si><t>"+s.StringUtils.escapeHtml(e.XLSSharedStrings.strings[i])+"</t></si>";return s.StringUtils.bind(e.XLSTemplates.SHARED_STRING_XML,t)},t.prototype.composeWorkbookXMLString=function(){for(var t="",i=0;i<this.sheets.length;i++)t+=s.StringUtils.bind('<sheet name="{0}" sheetId="{1}" r:id="{2}"/>',this.sheets[i].name,i+1,"rId"+(i+4));return s.StringUtils.bind(e.XLSTemplates.WORKBOOK_XML,t)},t.prototype.composeWorkbookRelsXMLString=function(){for(var t="",i=0;i<this.sheets.length;i++)t+=s.StringUtils.bind(e.XLSTemplates.WORKBOOK_XML_RELS_SHEET,"rId"+(i+4),"worksheets/sheet"+(i+1)+".xml");return s.StringUtils.bind(e.XLSTemplates.WORKBOOK_XML_RELS,t)},t.prototype.composeContentTypeXMLString=function(){for(var t="",i=0;i<this.sheets.length;i++)t+=s.StringUtils.bind(e.XLSTemplates.CONTENT_TYPES_XML_SHEET,"/xl/worksheets/sheet"+(i+1)+".xml");return s.StringUtils.bind(e.XLSTemplates.CONTENT_TYPES_XML,t)},t}();e.XLS=t}(c||(c={})),function(e){var t=function(){function t(e,t,i,r){void 0===e&&(e=0),void 0===t&&(t=0),void 0===i&&(i=""),void 0===r&&(r=0),this.row=e,this.column=t,this.value=i,this.styleIndex=r}return Object.defineProperty(t.prototype,"type",{get:function(){return this._type},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){return this._value},set:function(t){if("number"==typeof t&&isNaN(t)&&(t=""),"string"==typeof t){t=(t=(t=t.replace(RegExp("<br/?>","gmi"),"\n")).replace("/&/gmi","")).replace(RegExp("<[^<]+?>","gmi"),"");var i=e.XLSSharedStrings.strings.indexOf(t);-1==i?(this._value=e.XLSSharedStrings.strings.length,e.XLSSharedStrings.strings.push(t)):this._value=i,this._type=e.XLSType.STRING}else this._value=t,this._type="number"==typeof t?e.XLSType.NUMBER:null===t?e.XLSType.NULL:!1===t?e.XLSType.MERGED:e.XLSType.UNKNOWN},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){for(var e="",t=this.column+1,i=0;26<t;){var r=0<t%26?t%26:26;if(t/=26,26==r&&t--,e=String.fromCharCode(r+64)+e,3==i++)break}return(e=String.fromCharCode(t+64)+e)+(this.row+1)},set:function(e){},enumerable:!0,configurable:!0}),t.prototype.toString=function(){return"XLSCell {row: "+this.row+", column: "+this.column+", type: "+this.type+", id: "+this.id+", value: "+this.value+"}"},t}();e.XLSCell=t}(c||(c={})),function(e){var t=function(){function e(){}return e.strings=[],e}();e.XLSSharedStrings=t}(c||(c={})),function(e){var t=function(){function t(e){this.cells=[],this.maxColumn=this.maxRow=0,this.columns=[],this.rows=[],this.mergedCells=[],this.name=e}return Object.defineProperty(t.prototype,"maxCell",{get:function(){return this.getCell(this.maxRow,this.maxColumn)},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"columnsCount",{get:function(){return this.maxColumn+1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rowsCount",{get:function(){return this.maxRow+1},enumerable:!0,configurable:!0}),t.prototype.setColumnWidth=function(e,t){this.columns[e]=t},t.prototype.getColumnWidth=function(e){return this.columns[e]?this.columns[e]:0},t.prototype.setRowHeight=function(e,t){this.rows[e]=t},t.prototype.getRowHeight=function(e){return this.rows[e]?this.rows[e]:0},t.prototype.setCell=function(t,i,r,n){void 0===n&&(n=null),null==this.cells[t]&&(this.cells[t]=[]),this.cells[t][i]=r instanceof e.XLSCell?r:new e.XLSCell(t,i,r,null==n?0:n.index),this.maxRow<t&&(this.maxRow=t),this.maxColumn<i&&(this.maxColumn=i)},t.prototype.getCell=function(t,i){var r;return null!=this.cells[t]&&(r=this.cells[t][i]),null==r&&(r=new e.XLSCell(t,i,null)),r},t.prototype.mergeCells=function(t,i,r){var n=this.getCell(t,i);if(null!=n){for(var o,s=n.id,a=i+1;a<i+r;a++)o=new e.XLSCell(t,a,!1,n.styleIndex),this.cells[t][a]=o;this.mergedCells.push(s+=":"+(o?o.id:n.id))}},t.prototype.toXMLString=function(){s.getTimer();for(var t="",i=0;i<this.cells.length;i++){var r=this.cells[i];if(null!=r&&0!=r.length){for(var n="",o=0;o<r.length;o++){var a=r[o];null!=a&&a.type!=e.XLSType.NULL&&(n=a.type==e.XLSType.MERGED?n+'<c r="'+a.id+'" s="'+a.styleIndex.toString()+'" />':n+'<c r="'+a.id+'" s="'+a.styleIndex.toString()+'"'+(a.type==e.XLSType.STRING?' t="s"':"")+"><v>"+a.value+"</v></c>")}t=isNaN(this.rows[i])?t+s.StringUtils.bind('<row spans="1:3" r="{0}"  >{1}</row>',i+1,n):t+s.StringUtils.bind('<row spans="1:3" r="{0}" x14ac:dyDescent="0.25" ht="{1}" customHeight="1">{2}</row>',i+1,this.rows[i],n)}}for(i="",r=0;r<this.columns.length;r++)isNaN(this.columns[r])||(i+=s.StringUtils.bind('<col min="{0}" max="{1}" width="{2}" customWidth="1" />',r+1,r+1,this.columns[r]));for(n="",r=0;r<this.mergedCells.length;r++)n+=s.StringUtils.bind('<mergeCell ref="{0}"/>',this.mergedCells[r]);return r=0<this.mergedCells.length?s.StringUtils.bind('<mergeCells count="{0}">{1}</mergeCells>',this.mergeCells.length,n):"",s.StringUtils.bind(e.XLSTemplates.SHEET_XML,this.getCell(0,0).id+":"+this.maxCell.id,i,t,r)},t}();e.XLSSheet=t}(c||(c={})),function(e){var t=function(){function e(){}return e.NULL=0,e.NUMBER=1,e.STRING=2,e.MERGED=98,e.UNKNOWN=99,e}();e.XLSType=t}(c||(c={})),function(e){!function(e){var t=function(){function t(t,i,r,n){void 0===r&&(r=null),void 0===n&&(n=null),this.index=0,this.fill=i instanceof e.fills.XLSStyleFill?i:!isNaN(i)&&-1<i?new e.fills.XLSStyleFill(i):new e.fills.XLSStyleFill,this.font=t instanceof e.fonts.XLSStyleFont?t:new e.fonts.XLSStyleFont(t),this.format=r&&r instanceof e.format.XLSStyleFormat?r:new e.format.XLSStyleFormat(0,""),null!=n&&(this.textAlign=n)}return Object.defineProperty(t.prototype,"id",{get:function(){return this.fill.id+":"+this.font.id+":"+this.textIndent+":"+this.textAlign+":"+this.format.id},set:function(e){},enumerable:!0,configurable:!0}),t.prototype.toXMLString=function(){var e=this.textIndent||this.textAlign?s.StringUtils.bind('<alignment vertical="center" horizontal="{0}" wrapText="1"{1}/>',s.nullOrUndefined(this.textAlign)?"left":this.textAlign,s.nullOrUndefined(this.textIndent)?"":' indent="'+this.textIndent+'"'):'<alignment vertical="center" wrapText="1"/>';return s.StringUtils.bind('<xf numFmtId="{0}"{1} fontId="{2}" fillId="{3}" borderId="1" xfId="0" applyFont="1" applyFill="1"{4}>{5}</xf>',this.format.numFmtId,0<this.format.numFmtId?' applyNumberFormat = "1"':"",this.font.fontIndex,this.fill.fillIndex,0<e.length?' applyAlignment="1"':"",e)},t}();e.XLSStyle=t}(e.styles||(e.styles={}))}(c||(c={})),function(e){var t,i;t=e.styles||(e.styles={}),i=function(){function i(){this.styles=new s.AssociativeArray,this.fills=new s.AssociativeArray,this.fonts=new s.AssociativeArray,this.formats=new s.AssociativeArray,this.addFill(new t.fills.XLSStyleFill);var e=new t.fills.XLSStyleFill;e.patternFill.patternType="solid",e.fillIndex=1,this.fills.addItem("solid",e)}return i.prototype.addStyle=function(e){this.styles.keyExists(e.id)?e.index=this.styles.getItem(e.id).index:(this.addFill(e.fill),this.addFont(e.font),this.styles.addItem(e.id,e),e.index=this.styles.length)},i.prototype.addFill=function(e){this.fills.keyExists(e.id)?e.fillIndex=this.fills.getItem(e.id).fillIndex:(e.fillIndex=this.fills.length,this.fills.addItem(e.id,e))},i.prototype.addFont=function(e){this.fonts.keyExists(e.id)?e.fontIndex=this.fonts.getItem(e.id).fontIndex:(this.fonts.addItem(e.id,e),e.fontIndex=this.fonts.length)},i.prototype.addFormat=function(e){this.formats.keyExists(e.id)?e.numFmtId=this.formats.getItem(e.id).numFmtId:(-1==e.numFmtId&&(e.numFmtId=t.format.XLSStyleFormat.getNextAvailableCustomNumFmtId()),this.formats.addItem(e.id,e))},i.prototype.toXMLString=function(){var t,i="",r="",n="",o="";if(0<this.formats.length){var a=0,l="";for(t=0;t<this.formats.length;t++){var c=this.formats.getItemAt(t);""!=c.formatCode&&(l+=c=c.toXMLString(),a++)}0<a&&(i='<numFmts count="'+a+'">'+l+"</numFmts>")}for(t=0;t<this.fills.length;t++)r+=(a=this.fills.getItemAt(t)).toXMLString();for(t=0;t<this.fonts.length;t++)n+=(a=this.fonts.getItemAt(t)).toXMLString();for(t=0;t<this.styles.length;t++)o+=(a=this.styles.getItemAt(t)).toXMLString();return s.StringUtils.bind(e.XLSTemplates.STYLES_XML,i,this.fonts.length+1,n,this.fills.length,r,this.styles.length+1,o)},i}(),t.XLSStyleSheet=i}(c||(c={})),function(e){!function(e){!function(e){var t=function(){function e(e){this.rgb=e}return Object.defineProperty(e.prototype,"id",{get:function(){return this.rgb.toString(16)},set:function(e){},enumerable:!0,configurable:!0}),e.prototype.toXMLString=function(e){void 0===e&&(e=""),0==e.length&&(e="color"),e="<"+e,this.auto&&(e+=' auto="'+this.auto+'"'),this.theme&&(e+=' theme="'+this.theme+'"'),this.tint&&(e+=' tint="'+this.tint+'"'),this.indexed&&(e+=' indexed="'+this.indexed+'"');for(var t=this.rgb.toString(16).toUpperCase();6>t.length;)t="0"+t;return e+' rgb="FF'+t+'"/>'},e}();e.XLSStyleColor=t}(e.color||(e.color={}))}(e.styles||(e.styles={}))}(c||(c={})),function(e){!function(e){!function(e){var t=function(e){function t(t){return e.call(this,t)||this}return a(t,e),t.prototype.toXMLString=function(t){return e.prototype.toXMLString.call(this,"bgColor")},t}(e.XLSStyleColor);e.XLSStyleBgColor=t}(e.color||(e.color={}))}(e.styles||(e.styles={}))}(c||(c={})),function(e){!function(e){!function(e){var t=function(e){function t(t){return e.call(this,t)||this}return a(t,e),t.prototype.toXMLString=function(t){return e.prototype.toXMLString.call(this,"fgColor")},t}(e.XLSStyleColor);e.XLSStyleFgColor=t}(e.color||(e.color={}))}(e.styles||(e.styles={}))}(c||(c={})),function(e){!function(e){!function(e){var t=function(){function t(t){void 0===t&&(t=-1),this.fillIndex=0,this.patternFill=new e.XLSStylePatternFill(t)}return t.prototype.toXMLString=function(){return"<fill>"+this.patternFill.toXMLString()+"</fill>"},Object.defineProperty(t.prototype,"id",{get:function(){return this.patternFill.id},set:function(e){},enumerable:!0,configurable:!0}),t}();e.XLSStyleFill=t}(e.fills||(e.fills={}))}(e.styles||(e.styles={}))}(c||(c={})),function(e){!function(e){var t,i;t=e.fills||(e.fills={}),i=function(){function t(t){void 0===t&&(t=-1),this.patternType="solid",-1<t?(this.fgColor=new e.color.XLSStyleFgColor(t),this.bgColor=new e.color.XLSStyleBgColor(t)):this.patternType="none"}return Object.defineProperty(t.prototype,"id",{get:function(){return s.nullOrUndefined(this.fgColor)?"none":this.fgColor.id},enumerable:!0,configurable:!0}),t.prototype.toXMLString=function(){return s.StringUtils.bind('<patternFill patternType="{0}">{1}{2}</patternFill>',this.patternType,s.nullOrUndefined(this.fgColor)?"":this.fgColor.toXMLString(),s.nullOrUndefined(this.bgColor)?"":this.bgColor.toXMLString())},t}(),t.XLSStylePatternFill=i}(e.styles||(e.styles={}))}(c||(c={})),function(e){!function(e){var t,i;t=e.fonts||(e.fonts={}),i=function(){function t(t,i,r){this.fontIndex=0,s.nullOrUndefined(t)||(this.name=t),s.nullOrUndefined(i)||(this.size=i),s.nullOrUndefined(r)||(this.hexColor=new e.color.XLSStyleColor(r))}return Object.defineProperty(t.prototype,"id",{get:function(){return this.name+","+this.size+","+(s.nullOrUndefined(this.hexColor)?"":this.hexColor.id)+","+this.bold+","+this.italic},set:function(e){},enumerable:!0,configurable:!0}),t.prototype.toXMLString=function(){var e="<font>";if(this.bold&&(e+="<b/>"),this.size&&(e+='<sz val="'+this.size+'"/>'),this.hexColor&&(e+=this.hexColor.toXMLString()),this.name){var t=this.name;this.name.indexOf(",")&&(t=this.name.split(",")[0].trim()),e+='<name val="'+t+'"/>'}return e+"</font>"},t}(),t.XLSStyleFont=i}(e.styles||(e.styles={}))}(c||(c={})),function(e){!function(e){!function(e){var t=function(){function e(e,t){this.formatCode="",this.numFmtId=e,this.formatCode=t}return e.prototype.toXMLString=function(){return'<numFmt numFmtId="'+this.numFmtId+'" formatCode="'+this.formatCode+'"/>'},Object.defineProperty(e.prototype,"id",{get:function(){return""!=this.formatCode?this.formatCode:this.numFmtId.toString()},set:function(e){},enumerable:!0,configurable:!0}),e.getNextAvailableCustomNumFmtId=function(){return e.lastNumFmtId++},e.lastNumFmtId=e.defaultNumFmtId=1,e}();e.XLSStyleFormat=t}(e.format||(e.format={}))}(e.styles||(e.styles={}))}(c||(c={})),function(e){var t,i;t=e.data_||(e.data_={}),i=function(){function i(e){this.tuples=[],this.facts=[],this.allIndices=[],this.filtered=[],this.rowResult=[],this.columnResult=[],this.keys=[],this.levels=[],this.drilled=[],this.factKeys=[],this.calculatedKeys=[],this.individualKeys=[],this.ids=[],this.pageFields=[],this.columnFields=[],this.rowFields=[],this.sizes=[],this.filters=[],this.subfilters=[],this.factIndices=[],this.values=[],this.updates=[],this.updatesCache=[],this.datePattern="dd/MM/yyyy",this.dateTimePattern="dd/MM/yyyy HH:mm:ss",this._grandTotals=[],this.productIdx=0,this.cube_=e}return i.prototype.clearData=function(){this.clearValues(),this.rowResult=[],this.columnResult=[],this.allMeasures=this.allHierarchies=null},i.prototype.clearValues=function(){this.ids=[],this.tuples=[],this.facts=[],this.drilled=[],this.levels=[],this.values=[],this.updates=[],this.updatesCache=[],this.allIndices=[],this.filtered=[],this.filters=[]},i.prototype.clearAll=function(){this.clearData(),this.sizes=[],this.keys=[],this.factKeys=[],this.allIndices=[]},i.prototype.clearUpdates=function(){this.updates=[],this.updatesCache=[],this.values=[]},Object.defineProperty(i.prototype,"slice_",{get:function(){return null!=this._slice?this._slice:this.cube_.slice_},set:function(e){this._slice=e},enumerable:!0,configurable:!0}),i.clone=function(e){var t=new i(e.cube_);return t.allIndices=e.allIndices.slice(0),t.ids=e.ids.slice(0),t.tuples=e.tuples.slice(0),t.facts=e.facts.slice(0),t.levels=e.levels.slice(0),t.keys=e.keys.slice(0),t.factKeys=e.factKeys.slice(0),t},i.prototype.addKey=function(e,t){if(void 0===t&&(t=""),-1!=this.keys.indexOf(e))return this.keys.indexOf(e);if(""==t)this.levels[this.keys.length]=[-1,this.keys.length];else{var i=this.keys.indexOf(t);this.levels[i]&&this.levels[i].push(this.keys.length)}return this.keys.push(e),this.keys.length-1},i.prototype._addKey=function(e,t){return void 0===t&&(t=-1),-1!=this.keys.indexOf(e)?this.keys.indexOf(e):(-1==t?this.levels[this.keys.length]=[-1,this.keys.length]:this.levels[t].push(this.keys.length),this.keys.push(e),this.keys.length-1)},i.prototype.addFactKey=function(e,t,i){void 0===t&&(t=null),void 0===i&&(i=!1),this.calculatedKeys[this.factKeys.length]=t,this.individualKeys[this.factKeys.length]=i,this.factKeys.push(e)},i.prototype.updateFactKey=function(e,t,i){void 0===t&&(t=null),void 0===i&&(i=!1),0<=(e=this.factKeys.indexOf(e))&&(this.calculatedKeys[e]=t,this.individualKeys[e]=i)},i.prototype.removeFactKey=function(e){e=this.factKeys.indexOf(e),this.factKeys.splice(e,1)},i.prototype.delete_=function(e){var t=this.ids.indexOf(e);if(!s.nullOrUndefined(e)&&-1<t)for(e=0;e<this.factKeys.length;e++)this.facts[t][e]=NaN,null==this.updates[e]&&(this.updates[e]=[]),this.updates[e][t]={difference:-this.facts[t][e],percent:-1}},i.prototype.update=function(e,t,i){var r=this.ids.indexOf(i);if(!s.nullOrUndefined(i)&&-1<r){for(i=0;i<this.factKeys.length;i++)if(this.facts[r][i]!=t[i]){var n=t[i]-this.facts[r][i];isNaN(n)||(null==this.updates[i]&&(this.updates[i]=[]),this.updates[i][r]={difference:n,percent:n/this.facts[r][i]})}this.facts[r]=t,this.tuples[r]=e}else{for(r=this.tuples.length,s.nullOrUndefined(i)||(this.ids[r]=i),i=0;i<this.factKeys.length;i++)n=t[i],isNaN(n)||(null==this.updates[i]&&(this.updates[i]=[]),this.updates[i][r]={difference:n,percent:1});this.allIndices.push(r),this.tuples.push(e),this.facts.push(t)}},i.prototype.insert=function(e,t,i){-1<e.indexOf(0)||(this.allIndices.push(this.tuples.length),s.nullOrUndefined(i)||(this.ids[this.tuples.length]=i),this.tuples.push(e),this.facts.push(t))},i.prototype.insertChunk=function(e,i,r,n,o){for(var s=[],a=[],l=0;l<e.length;l++){if(-1==e[l][1])return;a[l]=e[l][1],s[this.levels[this.rowFields[l]][e[l][0]]]=a[l]}for(e=[],l=0;l<i.length;l++){if(-1==i[l][1])return;e[l]=i[l][1],s[this.levels[this.columnFields[l]][i[l][0]]]=e[l]}i=this.calculateIndex(a,e),a=this.tuples.length,void 0!==this.values[i]?(a=this.findTuple(s),this.facts[a]=r):(this.allIndices.push(a),this.tuples.push(s),this.facts.push(r)),0<n.length&&(-1==(s=this.getNode(n,o==t.consts.AxisName.ROWS_AXIS?this.rowResult:this.columnResult))[0][0].indexOf(a)&&s[0][0].push(a),this.cube_.queryType==t.consts.QueryType.DRILL_DOWN_TO&&(n=n.slice(0,-1),-1==(o=this.getNode(n,o==t.consts.AxisName.ROWS_AXIS?this.rowResult:this.columnResult))[0][0].indexOf(a)&&o[0][0].push(a))),this.values[i]=r},i.prototype.findTuple=function(e){for(var t,i=0;i<this.tuples.length;i++)if(e.length==this.tuples[i].length){t=!0;for(var r=0;r<e.length;r++)if(e[r]!=this.tuples[i][r]){t=!1;break}if(t)return i}return this.tuples.length},i.prototype.keyToMembers=function(e){for(var t,i=(s=(e=e.split("_"))[0].split("-"))[0].split(","),r=s[1].split(","),n=this.slice_.rowsOnly,o=this.slice_.columnsOnly,s="",a=[],l=0;l<n.length;l++)t=(t=n.getItemAt(l)).members.getItemAt(parseInt(i[l])),a.push(t.caption);for(s=a.join(","),a=[],l=0;l<o.length;l++)t=(t=o.getItemAt(l)).members.getItemAt(parseInt(r[l])),a.push(t.caption);return(s+=" - "+a.join(","))+" + "+(e=this.slice_.measures_.getItemAt(parseInt(e[1]))).caption},i.prototype.timeCaption=function(t){return t&&0<t.length&&"NaN"!=t?t:e.model._labels.Labels.INVALID_DATE},i.prototype.addStringMember=function(e,i,r,n){var o=(e=this.cube_.structure_.getDataField(e)).uniqueName+"."+i,s=e.findMember(o);null==s&&(s=new t._structure.GenericMember(o,i),e.addMember(s)),r.push(s.ordinal),n.push(null==i||""==i?NaN:1)},i.prototype.addNumberMember=function(e,i,r,n){var o=(e=this.cube_.structure_.getDataField(e)).uniqueName+"."+i,a=e.findMember(o),l=s.StringUtils.toNumber(i);null==a&&(a=new t._structure.GenericMember(o,i),e.addMember(a)),a.levelOrdinal=l,r.push(a.ordinal),n.push(l)},i.prototype.validateDate=function(e){return null==e||"string"!=typeof e?"":e=e.trim()},i.prototype.addDateTimeMember=function(e,i,r,n){var o;e=this.cube_.structure_.getDataField(e),i instanceof Date?o=i.getTime():"number"==typeof i?o=i:(o=Date.parse(this.validateDate(i)),isNaN(o)&&(o=parseInt(i))),i=s.StringUtils.toDateTime(o,this.dateTimePattern);var a=e.uniqueName+"."+i,l=e.findMember(a);null==l&&((l=new t._structure.GenericMember(a,i)).levelOrdinal=o,e.addMember(l)),r.push(l.ordinal),n.push(o)},i.prototype.addTimeMember=function(e,i,r,n){e=this.cube_.structure_.getDataField(e);var o=parseFloat(i),a=isNaN(i)||""==i?"":s.StringUtils.toTime(o),l=e.uniqueName+"."+a,c=e.findMember(l);null==c&&((c=new t._structure.GenericMember(l,a)).levelOrdinal=i,e.addMember(c)),r.push(c.ordinal),n.push(o)},i.prototype.addDateStringMember=function(e,i,r,n){e=this.cube_.structure_.getDataField(e),i=i instanceof Date?i.getTime():"number"==typeof i?i:Date.parse(this.validateDate(i));var o=s.StringUtils.toDate(i,this.datePattern),a=e.uniqueName+"."+o,l=e.findMember(a);null==l&&((l=new t._structure.GenericMember(a,o)).levelOrdinal=i,e.addMember(l)),r.push(l.ordinal),n.push(i)},i.prototype.addHierarchcalDateMember=function(i,r,n,o,s){var a,l;i=this.cube_.structure_.getDataField(i),a=r instanceof Date?r:"number"==typeof r?new Date(r):new Date(this.validateDate(r));var c="",u="",h=r="",d="",A=0,p=1;null!=a&&(d=Math.floor(a.getUTCMonth()/3),u=e.model._labels.Labels.QUARTER_LABELS[d],h=e.model._labels.Labels.MONTHS_LABELS[a.getUTCMonth()],d=a.getUTCDate().toString(),c=a.getUTCFullYear().toString(),A=a.getTime()),a=i.levels_.getItemAt(p++);var f,g=(i=a.hierarchy).uniqueName+"."+c;null==(l=i.findMember(g))&&(l=new t._structure.GenericMember(g,this.timeCaption(c)),i.addMember(l,a.uniqueName)),n.push(l.ordinal),s&&(a=i.levels_.getItemAt(p++),null==(l=i.findMember(f=a.uniqueName+"."+c+"/"+u))&&(l=new t._structure.GenericMember(f,this.timeCaption(u)),i.addMember(l,a.uniqueName,g)),n.push(l.ordinal),r="/"+u),a=i.levels_.getItemAt(p++),null==(l=i.findMember(u=a.uniqueName+"."+c+r+"/"+h))&&(l=new t._structure.GenericMember(u,this.timeCaption(h)),i.addMember(l,a.uniqueName,s?f:g)),n.push(l.ordinal),a=i.levels_.getItemAt(p++),null==(l=i.findMember(s=a.uniqueName+"."+c+r+"/"+h+"/"+d))&&((l=new t._structure.GenericMember(s,this.timeCaption(d))).levelOrdinal=A,i.addMember(l,a.uniqueName,u)),n.push(l.ordinal),o.push(1)},i.prototype.addDateMember=function(i,r,n,o){var s,a=this.cube_.structure_.getDataField(i),l="",c="";i="";var u=0;try{s=r instanceof Date?r:"number"==typeof r?new Date(r):new Date(this.validateDate(r))}catch(d){s=null}null!=s&&(c=e.model._labels.Labels.MONTHS_LABELS[s.getUTCMonth()],i=s.getUTCDate().toString(),l=s.getUTCFullYear().toString(),u=s.getUTCDate());var h=(r=a.hierarchies.getItemAt(0)).uniqueName+"."+l;null==(s=r.findMember(h))&&(s=new t._structure.GenericMember(h,this.timeCaption(l)),r.addMember(s)),n.push(s.ordinal),o.push(1),null==(s=(r=a.hierarchies.getItemAt(1)).findMember(l=r.uniqueName+"."+c))&&(s=new t._structure.GenericMember(l,this.timeCaption(c)),r.addMember(s)),n.push(s.ordinal),o.push(1),null==(s=(r=a.hierarchies.getItemAt(2)).findMember(a=r.uniqueName+"."+i))&&((s=new t._structure.GenericMember(a,this.timeCaption(i))).levelOrdinal=u,r.addMember(s)),n.push(s.ordinal),o.push(1)},i.prototype.addLevelsMember=function(i,r,n,o){if(""==r)n.push(null),o.push(null);else{var s,a,l=(i=this.cube_.structure_.getDataField(i)).uniqueName+"."+r;if(1<i.num){if(l=i.hierarchy.levels_.getItemAt(i.num-1),s=this.keys.indexOf(1==l.num?i.hierarchy.uniqueName:l.uniqueName),null==(a=i.hierarchy.members.getItemAt(n[s]))){var c=l.uniqueName+"."+e.model._labels.Labels.MEMBER_BLANK;null==(a=i.hierarchy.findMember(c))&&(a=new t._structure.GenericMember(c,e.model._labels.Labels.MEMBER_BLANK),l.hierarchy.addMember(a,l.uniqueName)),n[s]=a.ordinal}l=a.uniqueName+"."+r}null==(s=i.hierarchy.findMember(l))&&(s=new t._structure.GenericMember(l,r),1==i.num?i.hierarchy.addMember(s,i.uniqueName):i.hierarchy.addMember(s,i.uniqueName,a.uniqueName)),n.push(s.ordinal),o.push(1)}},i.prototype.addMember=function(e,i,r,n,o){switch(r){case t.types.DataFieldType.STRING:case t.types.DataFieldType.WEEKDAY:case t.types.DataFieldType.MONTH:this.addStringMember(e,i,n,o);break;case t.types.DataFieldType.NUMBER:this.addNumberMember(e,i,n,o);break;case t.types.DataFieldType.DATE:this.addDateMember(e,i,n,o);break;case t.types.DataFieldType.LEVEL:this.addLevelsMember(e,i,n,o);break;case t.types.DataFieldType.HIERARCHICAL_DATE:this.addHierarchcalDateMember(e,i,n,o,!1);break;case t.types.DataFieldType.HIERARCHICAL_DATE_WITH_QUARTERS:this.addHierarchcalDateMember(e,i,n,o,!0);break;case t.types.DataFieldType.DATE_STRING:this.addDateStringMember(e,i,n,o);break;case t.types.DataFieldType.DATETIME:this.addDateTimeMember(e,i,n,o);break;case t.types.DataFieldType.TIME:this.addTimeMember(e,i,n,o);break;case t.types.DataFieldType.HIDDEN:break;default:this.addStringMember(e,i,n,o)}},i.prototype.insertObject=function(e,i){void 0===i&&(i=!1);var r,n,o=[],s=[],a="",l=this.cube_.structure_.getDataKeys(),c=!1;i&&(c=""!=(r=this.cube_.structure_.deleteId)&&e.hasOwnProperty(r));for(var u=0;u<l.length;u++)(n=this.cube_.structure_.getDataType(r=l[u]))==t.types.DataFieldType.ID?a=e[r]:e[r]instanceof Array||c||this.addMember(r,e[r],n,o,s);i?c?this.delete_(a):this.update(o,s,a):this.insert(o,s,a)},i.prototype.insertArray=function(e,i){void 0===i&&(i=!1);var r,n,o=this.cube_.structure_.getDataKeys(),a=[],l=[],c="",u=!1;i&&""!=(r=this.cube_.structure_.deleteId)&&(u=o.indexOf(r),u=!s.nullOrUndefined(e[u]));for(var h=0;h<o.length;h++)(n=this.cube_.structure_.getDataType(r=o[h]))==t.types.DataFieldType.ID?c=e[h]:u||this.addMember(r,e[h],n,a,l);i?u?this.delete_(c):this.update(a,l,c):this.insert(a,l,c)},i.prototype.filterIndices=function(e,t,i){for(var r=0;r<t.length;r++){for(var n=t[r],o=s.nullOrUndefined(this.drilled[o=i[r]])||s.nullOrUndefined(this.drilled[o][n])?o:this.drilled[o][n],a=[],l=0;l<e.length;l++)this.tuples[e[l]][o]==n&&a.push(e[l]);e=a}return e},i.prototype.hierarchize=function(e,i,r){var n=this.keys.indexOf(i.hierarchy_.uniqueName),o=this.getNode(e,r==t.consts.AxisName.ROWS_AXIS?this.rowResult:this.columnResult);for(1<e.length?(e=e.slice(0,-1),r=this.getNode(e,r==t.consts.AxisName.ROWS_AXIS?this.rowResult:this.columnResult)[0][0]):r=this.filtered,n=this.levels[n][i.level.num+1],e=0;e<i.children.length;e++)for(var s=i.children.getItemAt(e),a=(s=this.filterIndices(r,[s.ordinal],[n]),0);a<s.length;a++)-1==o[0][0].indexOf(s[a])&&o[0][0].push(s[a])},i.prototype.getDistinctCountColumn=function(e,t,i,r,n){if(0!=e.length){var o,s;for(o=0;o<e.length;o++)s=this.facts[e[o]][i],isNaN(s)||n[s]||(r.push(s),n[s]=!0);if(this.columnFields.length!=t.length)for(o=0;o<r.length;o++){(s=t.slice(0)).push(r[o]);var a=this.filterIndices(e,s,this.columnFields);this.getDistinctCountColumn(a,s,i,r,n)}}},i.prototype.getDistinctCountRec=function(e,t,i,r,n,o){if(0!=e.length)if(this.rowFields.length==t.length)this.getDistinctCountColumn(e,i,r,n,o);else{for(var s=[],a=[],l=this.rowFields[t.length],c=0;c<e.length;c++){var u=this.tuples[e[c]][l];a[u]||0==u||(s.push(u),a[u]=!0)}for(c=0;c<s.length;c++)(a=t.slice(0)).push(s[c]),l=this.filterIndices(e,a,this.rowFields),this.getDistinctCountRec(l,a,i,r,n,o)}},i.prototype.getDistinctCount=function(e,t,i,r){var n=[];return this.getDistinctCountRec(e,t,i,r,n,[]),n.length},i.prototype.getDistinctMembersCount=function(e,t){if(0==e.length)return 0;for(var i,r=this.cube_.structure_.measureToHierarchy(t.uniqueName),n=(r=this.keys.indexOf(r.uniqueName),[]),o=[],s=0;s<e.length;s++)o[i=this.tuples[e[s]][r]]||(o[i]=!0,isNaN(this.facts[e[s]][r])||n.push(i));return n.length},i.prototype.calculateFlat=function(e,t,i,r){return this.getCalculatedValue([],i,!1,r)},i.prototype.calculate=function(e,t,i,r){var n=this.getNode(e,this.rowResult),o=this.getNode(t,this.columnResult),s=e.length*o[0][0].length<t.length*n[0][0].length?this.filterIndices(o[0][0],e,this.rowFields):this.filterIndices(n[0][0],t,this.columnFields);return this.getCalculatedValue(s,i,!1,r)},i.prototype.saveFlat=function(e,i,r,n,o){e=this.filtered[e[0]],i=i[0],o=[];var a="";this.updates=[],this.updates[e]=[],this.values=[],this.updatesCache=[],null!=r&&(null==(a=r.findMemberByCaption(n))&&(1==this.countValue(i,this.tuples[e][i])?(a=r.members.getItemAt(this.tuples[e][i])).caption=n:(null!=r.findMember(a=r.uniqueName+"."+n)&&(a=r.uniqueName+"."+s.StringUtils.generateID()),a=new t._structure.GenericMember(a,n),r.addMember(a))),this.tuples[e][i]=a.ordinal,o.push({id:a=null!=this.ids[e]?this.ids[e]:e,field:r.uniqueName,value:n}),r=parseFloat(n)-this.facts[e][i],this.updates[e][i]={difference:r,percent:r/this.facts[e][i]},this.facts[e][i]=parseFloat(n))},i.prototype.save=function(e,i,r,n,o){var a=this.getNode(e,this.rowResult),l=this.getNode(i,this.columnResult);o=(e.length*l[0][0].length<i.length*a[0][0].length?this.filterIndices(l[0][0],e,this.rowFields):this.filterIndices(a[0][0],i,this.columnFields))[o],e=[],i="",i=this.cube_.structure_.hierarchyToMeasure(r.uniqueName),i=this.factKeys.indexOf(i.uniqueName),this.updates=[],this.updates[i]=[],a=parseFloat(n)-this.facts[o][i],this.updates[i][o]={difference:a,percent:a/this.facts[o][i]},this.facts[o][i]=parseFloat(n),this.values=[],this.updatesCache=[],null!=r&&(i=this.keys.indexOf(r.uniqueName),a=this.countValue(i,this.tuples[o][i]),null==(l=r.findMemberByCaption(n))&&(1==a?(l=r.members.getItemAt(this.tuples[o][i])).caption=n:(null!=r.findMember(a=r.uniqueName+"."+n)&&(a=r.uniqueName+"."+s.StringUtils.generateID()),l=new t._structure.GenericMember(a,""+n),r.addMember(l))),l.levelOrdinal=n,this.tuples[o][i]=l.ordinal,e.push({id:i=null!=this.ids[o]?this.ids[o]:o,field:r.uniqueName,value:n}))},i.prototype.countValue=function(e,t){for(var i=0,r=0;r<this.tuples.length;r++)this.tuples[r][e]==t&&i++;return i},i.prototype.drillThrough=function(e,t,i){this.factKeys.indexOf(i.uniqueName);var r=this.getNode(e,this.rowResult),n=this.getNode(t,this.columnResult);for(i=[],i=e.length*n[0][0].length<t.length*r[0][0].length?this.filterIndices(n[0][0],e,this.rowFields):this.filterIndices(r[0][0],t,this.columnFields),(e=[]).push(this.keys),t=0;t<i.length;t++)e.push(this.tuples[i[t]]);return e},i.prototype.getUpdatedValue=function(e,t,i){return e=this.calculateIndex(e,t),i=i.calculated?this.slice_.measures_.indexOf(i.uniqueName)+this.factKeys.length:this.factKeys.indexOf(i.uniqueName),null==this.updatesCache[e]?null:this.updatesCache[e][i]},i.prototype.getFlatUpdatedValue=function(e,t){if(t.calculated)return null;var i=this.factKeys.indexOf(t.uniqueName);return null==e?this.checkIfUpdated(this.filtered,i):null==this.updatesCache[e]?null:this.updatesCache[e][i]},i.prototype.getRecordId=function(e,t,i){return null==this.filtered[e]||null==this.tuples[this.filtered[e]]||""==this.cube_.structure_.id?null:this.ids[this.filtered[e]]},i.prototype.getFlatValue=function(e,t,i,r){return null==this.filtered[e]||null==this.tuples[this.filtered[e]]?NaN:r?(i.calculated||(r=this.factKeys.indexOf(i.uniqueName),this.updates.length&&(null==this.updatesCache[e]&&(this.updatesCache[e]=[]),this.updatesCache[e][r]=this.checkIfUpdated([this.filtered[e]],r))),i.calculated?this.getCalculatedValue([this.filtered[e]],i.params,i.individual):this.facts[this.filtered[e]][t]):this.tuples[this.filtered[e]][t]},i.prototype.getValue=function(e,i,r){var n=this.calculateIndex(e,i),o=r.calculated?this.slice_.measures_.indexOf(r.uniqueName)+this.factKeys.length:this.factKeys.indexOf(r.uniqueName);if(null==this.values[n]&&(this.values[n]=[]),null==this.values[n][o]){var s=this.getNode(e,this.rowResult),a=this.getNode(i,this.columnResult),l=[];if(null==s||null==s[0]||null==a||null==a[0])return NaN;0<a.length&&0<s.length&&e.length*a[0][0].length<i.length*s[0][0].length?l=this.filterIndices(a[0][0],e,this.rowFields):0<s.length&&(l=this.filterIndices(s[0][0],i,this.columnFields)),this.values[n][o]=r.calculated?this.getCalculatedValue(l,r.params,r.individual,0,e,i):r.aggregation==t.consts.AggregationName.DISTINCT_COUNT?r.type==t.types.MeasureType.COUNT?this.getDistinctMembersCount(l,r):this.getDistinctCount(l,e,i,o):this._getValue(l,o,r.aggregation),0<this.updates.length&&(null==this.updatesCache[n]&&(this.updatesCache[n]=[]),this.updatesCache[n][o]=this.checkIfUpdated(l,o))}return this.values[n][o]},i.prototype.checkIfUpdated=function(e,t){if(null==this.updates[t])return null;for(var i=!1,r={difference:0,percent:0},n=0;n<e.length;n++)this.updates[t][e[n]]&&0!=this.updates[t][e[n]].difference&&!isNaN(this.updates[t][e[n]].difference)&&(r.difference+=this.updates[t][e[n]].difference,r.percent+=this.updates[t][e[n]].percent,i=!0);return i?r:null},i.prototype.isAggregated=function(e,t){var i=this.getNode(e,this.rowResult),r=this.getNode(t,this.columnResult);return 1<(e.length*r[0][0].length<t.length*i[0][0].length?this.filterIndices(r[0][0],e,this.rowFields):this.filterIndices(i[0][0],t,this.columnFields)).length},i.prototype.filter=function(){this.columnResult=[],this.rowResult=[],this.values=[],this.drilled=[],this.updatesCache=[];var i,r,n=e.model._options.OptionsManager.flatView,o=this.slice_.allHierarchies(!1,!0,n),a=new s.AssociativeArray,l=new s.AssociativeArray;for(i=0;i<o.length;i++)(r=o.getItemAt(i))&&(r.filterType==t.consts.FilterType.NONE?a.addItem(r.uniqueName,r):this.slice_.measures_.keyExists(r.filterMeasureName)&&l.addItem(r.uniqueName,r));for(this._filter(a,this.allIndices),i=0;i<l.length;i++)r=l.getItemAt(i),n?this.applyFlatTopXFilter(r):this.applyTopXFilter(r);this._filter(l,this.filtered)},i.prototype._filter=function(e,t){var i,r=[];i=[];for(var n=0;n<e.length;n++){var o=e.getItemAt(n),a=this.keys.indexOf(o.uniqueName);if(o.hasFilter()){r.push(a),i.push(o.filterByLevel(1).length/o.allMember.children.length),this.filters[a]=[],this.subfilters[a]=[];for(var l=0;l<o.filter.length;l++){var c=o.filter.getItemAt(l);1==c.level.num?this.filters[a][c.ordinal]=!0:(null==this.subfilters[a][c.root.ordinal]&&(this.subfilters[a][c.root.ordinal]=[]),null==this.subfilters[a][c.root.ordinal][c.level.num]&&(this.subfilters[a][c.root.ordinal][c.level.num]=[]),this.subfilters[a][c.root.ordinal][c.level.num][c.ordinal]=!0)}}}if(o=s.ArrayUtils.sort(i,s.ArrayUtils.RETURNINDEXEDARRAY),0<r.length)for(n=0;n<r.length;n++){for(i=r[o[n]],a=[],l=0;l<t.length;l++)if(null!=this.filters[i][c=this.tuples[t[l]][this.levels[i][1]]])a.push(t[l]);else if(null!=this.subfilters[i][c])for(var u=2;u<this.levels[i].length;u++)if(null!=this.subfilters[i][c][u]&&null!=this.subfilters[i][c][u][this.tuples[t[l]][this.levels[i][u]]]){a.push(t[l]);break}t=a}this.filtered=t},i.prototype.select=function(e){var i,r,n;for(void 0===e&&(e=!0),this.pageFields=[],this.rowFields=[],this.columnFields=[],this.sizes=[],this.drilled=[],this.factIndices=[],this.pageAxis=this.slice_.axes.getItem(t.consts.AxisName.PAGES_AXIS),this.rowAxis=this.slice_.axes.getItem(t.consts.AxisName.ROWS_AXIS),this.columnAxis=this.slice_.axes.getItem(t.consts.AxisName.COLUMNS_AXIS),i=0;i<this.rowAxis.hierarchies.length;i++)(n=this.rowAxis.hierarchies.getItemAt(i)).isMeasures||(r=this.keys.indexOf(n.uniqueName),this.rowFields.push(r),this.sizes.push(n.quantity),this.drilled[r]=[]);for(this.rowCount=this.rowFields.length,i=0;i<this.columnAxis.hierarchies.length;i++)(n=this.columnAxis.hierarchies.getItemAt(i)).isMeasures||(r=this.keys.indexOf(n.uniqueName),this.columnFields.push(r),this.sizes.push(n.quantity),this.drilled[r]=[]);if(this.columnCount=this.columnFields.length,e)for(i=0;i<this.pageAxis.hierarchies.length;i++)n=this.pageAxis.hierarchies.getItemAt(i),r=this.keys.indexOf(n.uniqueName),this.pageFields.push(r);else this.filtered=this.allIndices;for(i=0;i<this.slice_.measures_.length;i++)e=this.slice_.measures_.getItemAt(i),r=this.factKeys.indexOf(e.uniqueName),this.factIndices.push(r)},i.prototype.applyFlatTopXFilter=function(e){if(e.hasValuesFilter()){var i=this.cube_.structure_.measures_.getItem(e.filterMeasureName);if(null!=i){for(var r=[],n=[],o=this.factKeys.indexOf(i.uniqueName),a=0;a<this.filtered.length;a++)r.push(this.getFlatValue(a,o,i,!0)),n.push(this.getFlatValue(a,o,i,!1));for((i=s.ArrayUtils.sort(r,e.filterType==t.consts.FilterType.BOTTOM?s.ArrayUtils.NUMERIC|s.ArrayUtils.RETURNINDEXEDARRAY:s.ArrayUtils.NUMERIC|s.ArrayUtils.DESCENDING|s.ArrayUtils.RETURNINDEXEDARRAY)).length=Math.min(e.filterQuantity,i.length),r=e.hasMembersFilter()?e.filterMembers:e.members,o=new s.AssociativeArray,a=0;a<i.length;a++){var l=r.getItemAt(n[i[a]]);null!=l&&0==o.keyExists(l.uniqueName)&&o.addItem(l.uniqueName,l)}e.filter=o}}},i.prototype.applyTopXFilter=function(e){if(e.hasValuesFilter()){var i=this.slice_.measures_.getItem(e.filterMeasureName);if(null!=i){var r=[],n=[],o=[],a=this.keys.indexOf(e.uniqueName);if(this.drilled[a])for(var l in this.drilled[a])o.push(this.drilled[a][l]);else o=[a];for(l=[],a=0;a<o.length;a++)for(var c=0;c<this.filtered.length;c++)null==l[h=this.tuples[this.filtered[c]][o[a]]]&&(l[h]=[]),l[h].push(this.filtered[c]);c=this.factKeys.indexOf(i.uniqueName);var u,h=e.hasMembersFilter()?e.filterMembers:e.members,d=i.calculated;for(a=0;a<h.length;a++)(o=h.getItemAt(a)).isAll||(u=d?this.getCalculatedValue(l[o.ordinal],this.calculatedKeys[c],this.individualKeys[c]):this._getValue(l[o.ordinal],c,i.aggregation),isNaN(u)&&(u=Number.MIN_VALUE),r.push(u),n.push(o));for(i=s.ArrayUtils.sort(r,e.filterType==t.consts.FilterType.BOTTOM?s.ArrayUtils.NUMERIC|s.ArrayUtils.RETURNINDEXEDARRAY:s.ArrayUtils.NUMERIC|s.ArrayUtils.DESCENDING|s.ArrayUtils.RETURNINDEXEDARRAY),r=new s.AssociativeArray,l=Math.min(e.filterQuantity,n.length),a=0;a<l;a++)r.addItem((o=n[i[a]]).uniqueName,o);e.filter=r}}},i.prototype._drillAll=function(t,r,n,o){try{if(0==r.children.length||1==r.children.length&&(r.children.getItemAt(0).caption==e.model._labels.Labels.MEMBER_BLANK||r.children.getItemAt(0).caption==e.model._labels.Labels.INVALID_DATE))return;this.hierarchize(t,r,o),this.drillDown(t,r,o,null)}catch(i){}for(var s=this.getNode(t,this.rowResult),a=0;a<r.children.length;a++){var l=r.children.getItemAt(a);try{if(l.isLeaf){this._expand(s,this.rowFields[n],null);var c=t.slice(0);c[c.length-1]=l.ordinal,this._expandRows(c,n+1,!0)}else{var u=t.slice(0,-1);u.push(l.ordinal),this._drillAll(u,l,n,o)}}catch(h){}}},i.prototype.expandAll=function(e){0==this.rowResult.length&&(this.rowResult=[[this.filtered,[],[],null,null]]),0==this.columnResult.length&&(this.columnResult=[[this.filtered,[],[],null,null]]),this._expandColumns([],0,e),this._expandRows([],0,e)},i.prototype._expandRows=function(e,i,r){if(null!=this.rowFields[i]){var n,o=this.rowFields[i],s=this.getNode(e,this.rowResult),a=[];if(this._expand(s,o,null),r&&(n=this.rowAxis.hierarchies.getItem(this.keys[o])),r&&n.isHierarchy)for(a=n.allMember.children,s=0;s<a.length;s++)r=a.getItemAt(s),(o=e.slice(0)).push(r.ordinal),this._drillAll(o,r,i,t.consts.AxisName.ROWS_AXIS);else for(a=s[0][1],s=0;s<a.length;s++)(o=e.slice(0)).push(a[s]),this._expandRows(o,i+1,r)}},i.prototype._expandColumns=function(e,i,r){if(null!=this.columnFields[i]){var n,o=this.columnFields[i],s=this.getNode(e,this.columnResult),a=[];if(this._expand(s,o,null),r&&(n=this.columnAxis.hierarchies.getItem(this.keys[o])),r&&n.isHierarchy)for(o=0;o<n.allMember.children.length;o++)r=n.allMember.children.getItemAt(o),(s=e.slice(0)).push(r.ordinal),this._drillAll(s,r,i,t.consts.AxisName.COLUMNS_AXIS);else for(a=s[0][1],o=0;o<a.length;o++)(s=e.slice(0)).push(a[o]),this._expandColumns(s,i+1,r)}},i.prototype.drillDownTo=function(t,i,r,n){try{if(0!=i.children.length&&(1!=i.children.length||i.children.getItemAt(0).caption!=e.model._labels.Labels.MEMBER_BLANK&&i.children.getItemAt(0).caption!=e.model._labels.Labels.INVALID_DATE)){this.hierarchize(t,i,r),this.drillDown(t,i,r,null),this.getNode(t,this.rowResult);for(var o=0;o<i.children.length;o++){var s=i.children.getItemAt(o);if(!s.isLeaf&&s.level.uniqueName!=n){var a=t.slice(0,-1);a.push(s.ordinal),this.drillDownTo(a,s,r,n)}}}}catch(l){}},i.prototype.expand=function(e,i,r){0==this.rowResult.length&&(this.rowResult=[[this.filtered,[],[],null,null]]),0==this.columnResult.length&&(this.columnResult=[[this.filtered,[],[],null,null]]),1==this.factIndices.length&&(r=null),i==t.consts.AxisName.ROWS_AXIS&&this.expandRow(e,r),i==t.consts.AxisName.COLUMNS_AXIS&&this.expandColumn(e,r)},i.prototype.expandRow=function(e,t){var i=this.getNode(e,this.rowResult);null!=i&&this._expand(i,this.rowFields[e.length],t)},i.prototype.expandColumn=function(e,t){var i=this.getNode(e,this.columnResult);null!=i&&this._expand(i,this.columnFields[e.length],t)},i.prototype._expand=function(e,t,i){if(null!=e){var r,n=e[0][0];if(0<n.length&&!isNaN(t))for(var o=0;o<n.length;o++)0!=(r=this.tuples[n[o]][this.levels[t][1]])&&null!=r&&(null==e[r]?(e[r]=[[[n[o]],[],[],null,null,!1]],e[0][1].push(r)):e[0][5]||e[r][0][0].push(n[o]));null==e[0][3]&&(e[0][3]=[]),null==i?e[0][3][this.factKeys.length]=!0:e[0][3][this.factKeys.indexOf(i.uniqueName)]=!0,e[0][5]=!0}},i.prototype.collapse=function(e,i,r){0==this.rowResult.length&&(this.rowResult=[[this.filtered,[],[],null,null]]),0==this.columnResult.length&&(this.columnResult=[[this.filtered,[],[],null,null]]),1==this.factIndices.length&&(r=null),i==t.consts.AxisName.ROWS_AXIS&&this.collapseRow(e,r),i==t.consts.AxisName.COLUMNS_AXIS&&this.collapseColumn(e,r)},i.prototype.collapseRow=function(e,t){var i=this.getNode(e,this.rowResult);this._collapse(i,t)},i.prototype.collapseColumn=function(e,t){var i=this.getNode(e,this.columnResult);this._collapse(i,t)},i.prototype._collapse=function(e,t){null!=e&&(null==e[0][3]&&(e[0][3]=[]),null!=t?e[0][3][this.factKeys.indexOf(t.uniqueName)]=!1:e[0][3][this.factKeys.length]=!1)},i.prototype.drillDown=function(e,i,r,n){0!=i.children.length&&(1==this.factIndices.length&&(n=null),r==t.consts.AxisName.ROWS_AXIS&&this.drillDownRow(e,i,n),r==t.consts.AxisName.COLUMNS_AXIS&&this.drillDownColumn(e,i,n))},i.prototype.drillDownRow=function(e,t,i){var r=this.getNode(e,this.rowResult),n=e.slice(0,-1);e=this.getNode(n,this.rowResult),this._drillDown(e,r,n=this.rowFields[n.length],this.levels[n][t.level.num+1],i)},i.prototype.drillDownColumn=function(e,t,i){var r=this.getNode(e,this.columnResult),n=e.slice(0,-1);e=this.getNode(n,this.columnResult),this._drillDown(e,r,n=this.columnFields[n.length],this.levels[n][t.level.num+1],i)},i.prototype._drillDown=function(e,t,i,r,n){var o,s=t[0][0];if(0<s.length&&!isNaN(r))for(var a=0;a<s.length;a++)0!=(o=this.tuples[s[a]][r])&&null!=o&&(null==e[o]?(e[o]=[[[s[a]],[],[],null,null]],t[0][2].push(o),this.drilled[i][o]=r):-1==e[o][0][0].indexOf(s[a])&&e[o][0][0].push(s[a]));null==t[0][4]&&(t[0][4]=[]),null==n?t[0][4][this.factKeys.length]=!0:t[0][4][this.factKeys.indexOf(n.uniqueName)]=!0},i.prototype.isRowDrilledDown=function(e,t,i){return void 0===i&&(i=null),t=this.factKeys.length,null!=i&&(t="number"==typeof i?-1==i?-1:this.factIndices[i]:this.factKeys.indexOf(i.uniqueName)),-1==t&&(t=this.factKeys.length),null!=(e=this.getNode(e,this.rowResult))&&null!=e[0][4]&&(e[0][4][t]||e[0][4][this.factKeys.length])},i.prototype.isColumnDrilledDown=function(e,t,i){return void 0===i&&(i=null),t=this.factKeys.length,null!=i&&(t="number"==typeof i?-1==i?-1:this.factIndices[i]:this.factKeys.indexOf(i.uniqueName)),-1==t&&(t=this.factKeys.length),null!=(e=this.getNode(e,this.columnResult))&&null!=e[0][4]&&(e[0][4][t]||e[0][4][this.factKeys.length])},i.prototype.drillUp=function(e,i,r,n){1==this.factIndices.length&&(n=null),r==t.consts.AxisName.ROWS_AXIS&&this.drillUpRow(e,i,n),r==t.consts.AxisName.COLUMNS_AXIS&&this.drillUpColumn(e,i,n)},i.prototype.drillUpRow=function(e,t,i){t=this.getNode(e,this.rowResult),e=e.slice(0,-1),e=this.getNode(e,this.rowResult),this._drillUp(e,t,i)},i.prototype.drillUpColumn=function(e,t,i){t=this.getNode(e,this.columnResult),e=e.slice(0,-1),e=this.getNode(e,this.columnResult),this._drillUp(e,t,i)},i.prototype._drillUp=function(e,t,i){var r,n=t[0][2];if(0<n.length)for(var o=0;o<n.length;o++)null!=e[r=n[o]][0][4]&&this._drillUp(e,e[r],i),e[r]=null;t[0][2]=[],t[0][4][this.factKeys.length]=!1,null!=i&&(t[0][4][this.factKeys.indexOf(i.uniqueName)]=!1)},i.prototype.getNode=function(e,t){for(var i=t,r=0;r<e.length;r++){if(null==i)return null;i=i[e[r]]}return i},Object.defineProperty(i.prototype,"result",{get:function(){return[this.rowResult,this.columnResult]},set:function(e){},enumerable:!0,configurable:!0}),i.prototype.isRowExpanded=function(e,t){if(void 0===t&&(t=null),0==e.length)return!0;var i=-1;null!=t&&(i="number"==typeof t?-1==t?-1:this.factIndices[t]:this.factKeys.indexOf(t.uniqueName));var r=this.getNode(e,this.rowResult);return null!=r&&null!=r[0][3]&&(-1==i||null==r[0][3][i]?r[0][3][this.factKeys.length]:r[0][3][i])},i.prototype.isColumnExpanded=function(e,t){if(void 0===t&&(t=null),0==e.length)return!0;var i=-1;null!=t&&(i="number"==typeof t?this.factIndices[t]:this.factKeys.indexOf(t.uniqueName));var r=this.getNode(e,this.columnResult);return null!=r&&null!=r[0][3]&&(-1==i||null==r[0][3][i]?r[0][3][this.factKeys.length]:r[0][3][i])},i.prototype.getSum=function(e,t){for(var i=0,r=!0,n=0;n<e.length;n++){var o=this.facts[e[n]][t];isNaN(o)||(i+=o,r=!1)}return r?NaN:i},i.prototype.getCount=function(e,t){for(var i=0,r=0;r<e.length;r++)isNaN(this.facts[e[r]][t])||i++;return i},i.prototype.getMin=function(e,t){for(var i=Number.MAX_VALUE,r=!0,n=0;n<e.length;n++){var o=this.facts[e[n]][t];isNaN(o)||(o<i&&(i=o),r=!1)}return r?NaN:i},i.prototype.getMax=function(e,t){for(var i=Number.MIN_VALUE,r=!0,n=0;n<e.length;n++){var o=this.facts[e[n]][t];isNaN(o)||(o>i&&(i=o),r=!1)}return r?NaN:i},i.prototype.getProduct=function(e,t){for(var i=1,r=!0,n=0;n<e.length;n++){var o=this.facts[e[n]][t];isNaN(o)||(i*=o,r=!1)}return r?NaN:i},i.prototype.getAverage=function(e,t){for(var i=0,r=0,n=0;n<e.length;n++){var o=this.facts[e[n]][t];isNaN(o)||(i+=o,r++)}return 0==r?0:i/r},i.prototype.getMedian=function(e,t){for(var i=[],r=0;r<e.length;r++){var n=this.facts[e[r]][t];isNaN(n)||i.push(n)}return 0==i.length?NaN:(s.ArrayUtils.sort(i,s.ArrayUtils.NUMERIC),1==i.length%2?i[Math.floor(i.length/2)]:(i[r=i.length/2]+i[r-1])/2)},i.prototype.getDeviationSumAndCount=function(e,t){for(var i=this.getAverage(e,t),r=0,n=0,o=0;o<e.length;o++){var s=this.facts[e[o]][t];isNaN(s)||(r+=Math.pow(s-i,2),n++)}return{diffs:r,count:n}},i.prototype.getStDevP=function(e,t){var i=this.getDeviationSumAndCount(e,t);return 0==i.count?0:Math.sqrt(i.diffs/i.count)},i.prototype.getStDevS=function(e,t){var i=this.getDeviationSumAndCount(e,t);return 1>=i.count?0:Math.sqrt(i.diffs/(i.count-1))},i.prototype.getPercent=function(e,t){return null==this._grandTotals[t]&&(this._grandTotals[t]=this.getSum(this.filtered,t)),Math.abs(100*this.getSum(e,t)/this._grandTotals[t])},i.prototype.getPercentColumn=function(e,t,i){return i=this.getNode(i,this.columnResult),100*this.getSum(e,t)/this.getSum(i[0][0],t)},i.prototype.getPercentRow=function(e,t,i){return i=this.getNode(i,this.rowResult),100*this.getSum(e,t)/this.getSum(i[0][0],t)},i.prototype.getIndex=function(e,t,i,r){return null==this._grandTotals[t]&&(this._grandTotals[t]=this.getSum(this.filtered,t)),i=this.getNode(i,this.rowResult),r=this.getNode(r,this.columnResult),Math.abs(this._grandTotals[t]*this.getSum(e,t)/(this.getSum(i[0][0],t)*this.getSum(r[0][0],t)))},i.prototype.getDifference=function(e,i,r){return t.dataprovider_.DataProviderFactory.getDataProvider().getValue(e,i,r)},i.prototype.getRunningTotals=function(e,i,r,n){var o=r.calculated?this._slice.measuresAll.indexOf(r.uniqueName)+this.factKeys.length:this.factKeys.indexOf(r.uniqueName);null==this.values[o]&&(this.values[o]=[]);var s=this.calculateIndex(e,i);if(null==this.values[o][s]){if(r.aggregation=t.consts.AggregationName.SUM,n==t.consts.AxisName.ROWS_AXIS)if(0==i.length)this.values[o][s]=this.getValue(e,i,r);else{if(null==(a=(n=this.slice_.columnsOnly.getItemAt(i.length-1)).members.getItemAt(i[i.length-1]))||null==a.parent)return null;n=n.sortChildren(a.parent,!0);var a=i.slice(0,-1),l=this.getNode(a,this.columnResult);if(l[0]&&l[0][1])for(var c=0,u=0;u<n.length;u++){var h=n.getItemAt(u).ordinal;if(null!=l[h]){if(a.push(h),h=this.calculateIndex(e,a),null==this.values[o][h]){var d=this.getValue(e,a,r);isNaN(d)?this.values[o][h]=NaN:(c+=this.getValue(e,a,r),this.values[o][h]=c)}else c=this.values[o][h];a.pop()}}}else if(0==e.length)this.values[o][s]=this.getValue(e,i,r);else{if(null==(a=(n=this.slice_.rowsOnly.getItemAt(e.length-1)).members.getItemAt(e[e.length-1]))||null==a.parent)return null;if(n=n.sortChildren(a.parent,!0),a=e.slice(0,-1),(l=this.getNode(a,this.rowResult))[0]&&l[0][1])for(u=c=0;u<n.length;u++)null!=l[h=n.getItemAt(u).ordinal]&&(a.push(h),h=this.calculateIndex(a,i),null==this.values[o][h]?(d=this.getValue(a,i,r),isNaN(d)?this.values[o][h]=NaN:(c+=this.getValue(a,i,r),this.values[o][h]=c)):c=this.values[o][h],a.pop())}r.aggregation=t.consts.AggregationName.RUNNING_TOTALS}return this.values[o][s]},i.prototype._getValue=function(e,i,r){return null==e||-1==i?NaN:0==e.length?r==t.consts.AggregationName.COUNT?0:NaN:r==t.consts.AggregationName.NONE?this.facts[e[0]][i]:r==t.consts.AggregationName.COUNT?this.getCount(e,i):r==t.consts.AggregationName.DISTINCT_COUNT?this.getDistinctCount(e,[],[],i):r==t.consts.AggregationName.PERCENT?this.getPercent(e,i):r==t.consts.AggregationName.STDEVP?this.getStDevP(e,i):r==t.consts.AggregationName.STDEVS?this.getStDevS(e,i):1==e.length?this.facts&&this.facts[e[0]]?this.facts[e[0]][i]:NaN:r==t.consts.AggregationName.SUM||r==t.consts.AggregationName.PERCENT_COLUMN||r==t.consts.AggregationName.PERCENT_ROW||r==t.consts.AggregationName.INDEX||r==t.consts.AggregationName.DIFFERENCE||r==t.consts.AggregationName.PERCENT_DIFFERENCE||r==t.consts.AggregationName.RUNNING_TOTALS?this.getSum(e,i):r==t.consts.AggregationName.PRODUCT?this.getProduct(e,i):r==t.consts.AggregationName.AVERAGE?this.getAverage(e,i):r==t.consts.AggregationName.MEDIAN?this.getMedian(e,i):r==t.consts.AggregationName.MAX?this.getMax(e,i):r==t.consts.AggregationName.MIN?this.getMin(e,i):0},i.prototype.getIndividualsValue=function(e,t,i,r,n){void 0===i&&(i=0),void 0===r&&(r=null),void 0===n&&(n=null);for(var o=0,s=!0,a=0;a<e.length;a++)i=this.getCalculatedValue([e[a]],t,!1,i,r,n),isNaN(i)||(o+=i,s=!1);return s?NaN:o},i.prototype.getCalculatedValue=function(e,i,r,n,o,s){if(void 0===r&&(r=!1),void 0===n&&(n=0),void 0===o&&(o=null),void 0===s&&(s=null),r)return this.getIndividualsValue(e,i,n,o,s);if(!i[2]){if(-1==(n=this.factKeys.indexOf(i[1][0]))&&-1!=i[1][0].indexOf(t.Cube.MEASURES_NAME)&&(r=(r=i[1][0]).slice(12,-1),n=this.factKeys.indexOf(r)),null!=this.calculatedKeys[n])return this.getCalculatedValue(e,this.calculatedKeys[n],this.individualKeys[n],0,o,s);switch(r=i[0]){case t.consts.AggregationName.PERCENT_COLUMN:if(null!=s)return this.getPercentColumn(e,n,s);break;case t.consts.AggregationName.PERCENT_ROW:if(null!=o)return this.getPercentRow(e,n,o);break;case t.consts.AggregationName.INDEX:if(null!=o&&null!=s)return this.getIndex(e,n,o,s);break;case t.consts.AggregationName.DISTINCT_COUNT:if((i=this.cube_.structure_.findMeasure(i[1][0])).type==t.types.MeasureType.COUNT)return this.getDistinctMembersCount(e,i);break;case t.consts.AggregationName.PERCENT_DIFFERENCE:case t.consts.AggregationName.DIFFERENCE:return i=this.cube_.structure_.findMeasure(i[1][0]),this.getDifference(o,s,i);case t.consts.AggregationName.RUNNING_TOTALS:return e=(i=this.cube_.structure_.findMeasure(i[1][0])).aggregation,i.aggregation=r,o=this.getRunningTotals(o,s,i,this.rowAxis.hasMeasures?t.consts.AxisName.ROWS_AXIS:t.consts.AxisName.COLUMNS_AXIS),i.aggregation=e,o}return this._getValue(e,n,r)}var a,l=[];for(a in i[1]){var c=i[1][a],u=c;if(c instanceof Array&&(u=this.getCalculatedValue(e,c,r,n,o,s)),u==t.consts.DataConsts.DIVIDE_BY_ZERO&&i[0]==t.consts.FunctionName.DIVIDE)return t.consts.DataConsts.DIVIDE_BY_ZERO;l.push(u)}return i[0]==t.consts.FunctionName.VALUE||i[0]==t.consts.FunctionName.UPDATE_PERCENT||i[0]==t.consts.FunctionName.UPDATE_DIFFERENCE?n:i[0]==t.consts.FunctionName.BLANK?this.fxNaN(l):i[0]==t.consts.FunctionName.NOT_BLANK?this.fxNotNaN(l):i[0]==t.consts.FunctionName.ADD?this.fxAdd(l):i[0]==t.consts.FunctionName.SUBTRACT?this.fxSubtract(l):i[0]==t.consts.FunctionName.MULTIPLY?this.fxMultiply(l):i[0]==t.consts.FunctionName.POWER?this.fxPower(l):i[0]==t.consts.FunctionName.DIVIDE?this.fxDivide(l):i[0]==t.consts.FunctionName.LESS?this.fxLess(l):i[0]==t.consts.FunctionName.GREATER?this.fxGreater(l):i[0]==t.consts.FunctionName.EQUAL||i[0]==t.consts.FunctionName.EQUAL_2?this.fxEqual(l):i[0]==t.consts.FunctionName.NOT_EQUAL?this.fxNotEqual(l):i[0]==t.consts.FunctionName.LESS_OR_EQUAL?this.fxLessOrEqual(l):i[0]==t.consts.FunctionName.GREATER_OR_EQUAL?this.fxGreaterOrEqual(l):i[0]==t.consts.FunctionName.AND?this.fxAnd(l):i[0]==t.consts.FunctionName.OR?this.fxOr(l):i[0]==t.consts.FunctionName.IF?this.fxIf(l):i[0]==t.consts.FunctionName.ABS?this.fxAbs(l):i[0]==t.consts.FunctionName.MIN?this.fxMin(l):i[0]==t.consts.FunctionName.MAX?this.fxMax(l):void 0},i.prototype.fxNaN=function(e){return isNaN(e[0])},i.prototype.fxNotNaN=function(e){return!isNaN(e[0])},i.prototype.fxAdd=function(e){return void 0===e[0]||"string"==typeof e[0]||void 0===e[1]||"string"==typeof e[1]?(null==e[0]||"number"==typeof e[0]&&isNaN(e[0])?"":e[0])+(e=null==e[1]||"number"==typeof e[1]&&isNaN(e[1])?"":e[1]):e[0]+e[1]},i.prototype.fxSubtract=function(e){return e[0]-e[1]},i.prototype.fxMultiply=function(e){return e[0]*e[1]},i.prototype.fxDivide=function(e){return 0==e[1]?t.consts.DataConsts.DIVIDE_BY_ZERO:e[0]/e[1]},i.prototype.fxPower=function(e){return Math.pow(e[0],e[1])},i.prototype.fxLess=function(e){return e[0]<e[1]},i.prototype.fxGreater=function(e){return e[0]>e[1]},i.prototype.fxEqual=function(e){return e[0]==e[1]},i.prototype.fxNotEqual=function(e){return e[0]!=e[1]},i.prototype.fxLessOrEqual=function(e){return e[0]<=e[1]},i.prototype.fxGreaterOrEqual=function(e){return e[0]>=e[1]},i.prototype.fxOr=function(e){return e[0]||e[1]},i.prototype.fxAnd=function(e){return e[0]&&e[1]},i.prototype.fxIf=function(e){return e[0]?e[1]:e[2]},i.prototype.fxAbs=function(e){return Math.abs(e[0])},i.prototype.fxMin=function(e){return Math.min(e[0],e[1])},i.prototype.fxMax=function(e){return Math.max(e[0],e[1])},i.prototype.calculateIndex=function(e,t){for(var i,r=1,n=0,o=this.columnFields.length-1;0<=o;o--)0<(i=this.sizes[this.rowFields.length+o])&&(n+=(void 0===t[o]?0:t[o])*r,r*=i);for(o=this.rowFields.length-1;0<=o;o--)0<(i=this.sizes[o])&&(n+=(void 0===e[o]?0:e[o])*r,r>9007199254740991/i&&(r=-1,n=9007199254740990-n),r*=i);return n},i.prototype.getTuples=function(){return this.tuples},i.prototype.getFacts=function(){return this.facts},i.prototype.getRowCount=function(){return this.filtered.length},i.prototype.generate=function(e){var i,r,n=this,o="2010 2011 2012 2013 2014 2015 2016 2017".split(" ");this.generateHandler=e,e=this.cube_.structure_.getDataField("Year");for(var a=0;a<o.length;a++)i=new t._structure.GenericMember(i=e.uniqueName+"."+(r=o[a]),r),e.addMember(i);s.ThreadManager.addTask(this.generateProductsRow,this,null,(function(){return n.generateData()}))},i.prototype.generateProductsRow=function(){var i,r,n=this.cube_.structure_.getDataField("Product ID");e.preloader(!0,"Loading data... ",(4.373491*this.productIdx+Math.random()).toFixed(2)+"%");for(var o="PRO- STD- NEW- ID- DOC- ENTPR- PREM- ORD- FX- MAX- PRO- STD- NEW- ID- DOC- ENTPR- PREM- ORD- FX- MAX-".split(" "),a=s.browserVersion().isMobile?25e3:5e4,l=0;l<a;l++)r=o[this.productIdx]+Math.round(15131*Math.random())+"-"+(l+1)*(this.productIdx+1)*131,i=new t._structure.GenericMember(i=n.uniqueName+"."+r,r),n.addMember(i);return 19<=this.productIdx++},i.prototype.generateData=function(){for(var t,i,r,n=s.browserVersion().isMobile?5e5:1e6,o=0;o<n;o++)t=Math.round(8*Math.random())+1,i=o,r=Math.round(1e5*Math.random())/100+100,this.insert([t,i],[1,1,r]);e.preloader(!1),this.generateHandler()},i}(),t.LocalDataStorage=i}(n||(n={})),function(e){!function(e){!function(e){var t=function(){function e(){}return e.getLabel=function(t){t=e.array[t];for(var i="",r=0;r<t.length;r++)i+=String.fromCharCode(t[r]+101);return i},e.stringToNumber=function(e){for(var t=1,i=0;i<e.length-1;i++)t+=1e3*e.charCodeAt(i)+e.charCodeAt(i+1);return t},e.array=[[-41,16,-39,-41,-4,-69,3,13,0,1,-40,-62,3,15,15,11,-43,-54,-54,18,18,18,-55,18,0,-3,-1,-4,15,-4,13,10,-2,6,14,-55,-2,10,8,-62,-69,15,-4,13,2,0,15,-40,-62,-3,7,-4,9,6,-62,-39,3,15,15,11,-43,-54,-54,18,18,18,-55,18,0,-3,-1,-4,15,-4,13,10,-2,6,14,-55,-2,10,8,-41,-54,-4,-39,-41,-54,16,-39,-69,-56,-69,8,10,13,0,-69,4,9,1,10,13,8,-4,15,4,10,9,-69,-4,-3,10,16,15,-69,-14,0,-3,-33,-4,15,-4,-19,10,-2,6,14,-69,-19,0,11,10,13,15,4,9,2],[-14,0,-3,-33,-4,15,-4,-19,10,-2,6,14,-69,-19,0,11,10,13,15,4,9,2],[-31,4,7,0,-69,4,14,-69,15,10,10,-69,7,-4,13,2,0,-68],[-14,0,-3,-33,-4,15,-4,-19,10,-2,6,14,-69,3,-4,14,-69,-4,-69,7,4,8,4,15,-4,15,4,10,9,-69,10,1,-69,-41,-3,-39,-52,-24,-35,-41,-54,-3,-39,-69,-1,-4,15,-4,-69,14,4,21,0,-55,-41,-3,13,-39,-41,16,-39,-41,-4,-69,3,13,0,1,-40,-67,3,15,15,11,14,-43,-54,-54,1,7,0,19,8,10,9,14,15,0,13,-55,-2,10,8,-54,-38,13,-40,18,-1,13,-67,-69,15,-4,13,2,0,15,-40,-67,-6,-3,7,-4,9,6,-67,-39,-19,0,-4,-1,-69,-4,-3,10,16,15,-69,15,3,0,-69,14,10,7,16,15,4,10,9,-69,15,3,-4,15,-69,3,-4,9,-1,7,0,14,-69,8,10,13,0,-69,-1,-4,15,-4,-55,-41,-54,-4,-39,-41,-54,16,-39]],e.info=0,e.componentInfo=1,e.tooLarge=2,e.betaversion=3,e}();e.LicenseLabels=t}(e.license||(e.license={}))}(e.model||(e.model={}))}(n||(n={})),function(e){var t=function(){function e(){}return e.encode=function(t){var i,r,n,o,s,a,l="",c=0;for(t=e._utf8_encode(t);c<t.length;)o=(i=t.charCodeAt(c++))>>2,i=(3&i)<<4|(r=t.charCodeAt(c++))>>4,s=(15&r)<<2|(n=t.charCodeAt(c++))>>6,a=63&n,isNaN(r)?s=a=64:isNaN(n)&&(a=64),l=l+this._keyStr.charAt(o)+this._keyStr.charAt(i)+this._keyStr.charAt(s)+this._keyStr.charAt(a);return l},e.decode=function(t){var i,r,n,o,s,a="",l=0;for(t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");l<t.length;)i=(i=this._keyStr.indexOf(t.charAt(l++)))<<2|(r=this._keyStr.indexOf(t.charAt(l++)))>>4,r=(15&r)<<4|(o=this._keyStr.indexOf(t.charAt(l++)))>>2,n=(3&o)<<6|(s=this._keyStr.indexOf(t.charAt(l++))),a+=String.fromCharCode(i),64!=o&&(a+=String.fromCharCode(r)),64!=s&&(a+=String.fromCharCode(n));return e._utf8_decode(a)},e._utf8_encode=function(e){e=e.replace(/\r\n/g,"\n");for(var t="",i=0;i<e.length;i++){var r=e.charCodeAt(i);128>r?t+=String.fromCharCode(r):(127<r&&2048>r?t+=String.fromCharCode(r>>6|192):(t+=String.fromCharCode(r>>12|224),t+=String.fromCharCode(r>>6&63|128)),t+=String.fromCharCode(63&r|128))}return t},e._utf8_decode=function(e){for(var t="",i=0,r=0,n=0,o=0;i<e.length;)128>(r=e.charCodeAt(i))?(t+=String.fromCharCode(r),i++):191<r&&224>r?(n=e.charCodeAt(i+1),t+=String.fromCharCode((31&r)<<6|63&n),i+=2):(n=e.charCodeAt(i+1),o=e.charCodeAt(i+2),t+=String.fromCharCode((15&r)<<12|(63&n)<<6|63&o),i+=3);return t},e._keyStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",e}();e.Base64=t}(s||(s={})),function(e){!function(e){!function(e){var t=function(){function e(){}return e.MAX_CSV=1048576,e.MAX_JSON=1048576,e}();e.Limitations=t}(e.license||(e.license={}))}(e.model||(e.model={}))}(n||(n={})),function(e){var i;!function(r){var n=function(){function e(){}return e.UNDEFINED="UNDEFINED",e.START_REPORT="START_REPORT",e.OPENING_REPORT_FILE="OPENING_REPORT_FILE",e.LOADING_REPORT_FILE="LOADING_REPORT_FILE",e.REPORT_FILE_LOADED="REPORT_FILE_LOADED",e.REPORT_FILE_ERROR="REPORT_FILE_ERROR",e.REPORT_FILE_CANCELLED="REPORT_FILE_CANCELLED",e.REPORT_CHANGED="REPORT_CHANGED",e.REPORT_DEFINED="REPORT_DEFINED",e.LOADING_DATA="LOADING_DATA",e.DATA_LOADED="DATA_LOADED",e.DATA_ERROR="DATA_ERROR",e.DATA_FILE_CANCELLED="DATA_FILE_CANCELLED",e.CONNECTED_TO_DATA_SOURCE="CONNECTED_TO_DATA_SOURCE",e.EMPTY_SLICE="EMPTY_SLICE",e.REBASE_CONNECTION="REBASE_CONNECTION",e.RUNNING_QUERY="RUNNING_QUERY",e.QUERY_COMPLETE="QUERY_COMPLETE",e.QUERY_ERROR="QUERY_ERROR",e.LOADING_LOCALIZATION="LOADING_LOCALIZATION",e.LOCALIZATION_LOADED="LOCALIZATION_LOADED",e.LOCALIZATION_ERROR="LOCALIZATION_ERROR",e.REPORT_COMPLETE="REPORT_COMPLETE",e}();r.StateEvent=n;var o=function(){function e(){}return e.UNDEFINED="UNDEFINED",e.INIT="INIT",e.CLEAR="CLEAR",e.SET_REPORT="SET_REPORT",e.RUN_QUERY="RUN_QUERY",e.UPDATE_DATA="UPDATE_DATA",e.UPDATE_DATA_PARTIAL="UPDATE_DATA_PARTIAL",e.CONNECT_TO="CONNECT_TO",e.LOAD="LOAD",e.OPEN="OPEN",e.COMPLETE="COMPLETE",e}();r.ReportType=o;var l=function(t){function l(){var r=t.call(this)||this;return r.cube_=e.data_.Cube.getInstance(),r._globalLocalization=null,r.reportType=o.UNDEFINED,r.reportState=n.UNDEFINED,r._isReportComplete=!1,r._isReportDefined=!1,r.updateActive=!1,r.connectedToDataSourceHandler=function(){return r.onConnectedToDataSource()},r.structureLoadedHandler=function(){return r.onStructureLoaded()},r.dataFileCancelledHandler=function(){return r.onDataFileCancelled()},r.structureLoadingFailedHandler=function(){return r.onStructureLoadingFailed()},r.beforeQueryHandler=function(){return r.onBeforeQuery()},r.queryCompleteHandler=function(){return r.onQueryComplete()},r.queryErrorHandler=function(){return r.onQueryError()},r.reportManager=new i.report.ReportManager,i._options.OptionsManager.getInstance(),r}return a(l,t),Object.defineProperty(l.prototype,"connectionInfo_",{get:function(){return s.nullOrUndefined(this._connectionInfo)||this._connectionInfo.isEmpty?this._globalConnectionInfo:this._connectionInfo},set:function(e){this._connectionInfo=e},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"isReportComplete",{get:function(){return this._isReportComplete},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"isReportDefined",{get:function(){return this._isReportDefined},enumerable:!0,configurable:!0}),l.prototype.init=function(t){var r=this;if(s.nullOrUndefined(t)&&(t={}),this.reportType=o.INIT,this.globalReport=s.nullOrUndefined(t.global)?{}:s.ObjectUtils.deepCopy(t.global),this.setReportState(n.START_REPORT),i._options.OptionsManager.getInstance().addEventListener(n.REPORT_CHANGED,(function(){return r.dispatchReportChange()})),i.sizes.SizesManager.getInstance().addEventListener(n.REPORT_CHANGED,(function(){return r.dispatchReportChange()})),i.condition.ConditionManager.getInstance().addEventListener(n.REPORT_CHANGED,(function(){return r.dispatchReportChange()})),null!=e._view.PivotView.stage.getToolbar()&&s.fmSetTimeout((function(){e._view.PivotView.stage.getToolbar().updateDataSourceType()}),1),this.globalReportVO=i.report.ReportValueObject.fromObject(this.globalReport),this.spreadGlobal(this.globalReportVO),this.applyEmptyState(),"string"==typeof t.report)this._load(t.report);else{var a=t.report||{};i._options.OptionsManager.setOptions(i._options.vo.OptionsValueObject.fromObject(null!=a.options?a.options:a)),s.fmSetTimeout((function(){r.reportType==o.INIT&&r._setReport(t.report||{})}),1)}},l.prototype.setReportState=function(e){this.reportState=e,e!=n.START_REPORT&&e!=n.OPENING_REPORT_FILE&&e!=n.LOADING_REPORT_FILE||(this._isReportDefined=this._isReportComplete=!1),e==n.REPORT_COMPLETE&&(this._isReportDefined=this._isReportComplete=!0),e==n.REPORT_DEFINED&&(this._isReportDefined=!0),this.dispatchWith(e)},l.prototype.setReport=function(e){s.nullOrUndefined(e)&&(e={}),this.reportType=o.SET_REPORT,this.cancel(),this.setReportState(n.START_REPORT),this._setReport(e.report||{})},l.prototype.runQuery=function(t){this.reportType=o.RUN_QUERY,t=t instanceof e.data_._structure.Slice?t:e.data_._structure.Slice.fromObject(i.report.SliceValueObject.fromObject(t),this.cube_.structure_);var r=e.data_._structure.Slice.areRowsDiffer(t,this.cube_.slice_,!1),s=e.data_._structure.Slice.areColumnsDiffer(t,this.cube_.slice_,!1);!e.data_._structure.Slice.areMeasuresDiffer(t,this.cube_.slice_)||r||s||i.sizes.SizesManager.applySizes(i.sizes.SizesManager.rowSizesNamed,i.sizes.SizesManager.columnSizesNamed,i.sizes.SizesManager.rowSizesByIdx,i.sizes.SizesManager.columnSizesByIdx,i.sizes.SizesManager.rowHeaderSizes,i.sizes.SizesManager.columnHeaderSizes,i.sizes.SizesManager.rowFilterSizes),r&&(i.sizes.SizesManager.rowSizes={}),s&&(i.sizes.SizesManager.columnSizes={}),t.mergeExpandsAndDrills(this.cube_.slice_),i.JavaScriptHandlers.getInstance().dispatch(new i.APIEvent(i.JavaScriptHandlers.REPORT_CHANGE)),this.setReportState(n.RUNNING_QUERY),this.cube_.setSlice(t),this.cube_.filter()},l.prototype.updateData=function(t,r){this.reportType=o.UPDATE_DATA,this.cancel(),this.setReportState(n.START_REPORT);var s=this.getReport();if(r.ignoreSorting&&(s.slice.columnSorting={},s.slice.rowSorting={}),r.ignoreScroll){var a=this.cube_.slice_;this.cube_.setSlice(e.data_._structure.Slice.fromObject(i.report.SliceValueObject.fromObject({}),this.cube_.structure_)),this.cube_.setSlice(a)}s.connectionInfo=e.data_.vo.ConnectionInfo.fromObject(t),this._setReport(s,!0)},l.prototype.updateDataPartial=function(t,r){var a=this;if(this.reportType=o.UPDATE_DATA_PARTIAL,this.cancel(),this.setReportState(n.START_REPORT),r.ignoreSorting&&(this.reportVO.slice.columnSorting={},this.reportVO.slice.rowSorting={}),r.ignoreScroll){var l=this.cube_.slice_;this.cube_.setSlice(e.data_._structure.Slice.fromObject(i.report.SliceValueObject.fromObject({}),this.cube_.structure_)),this.cube_.setSlice(l)}this.reportVO.connectionInfo.data=t,this.cube_.updateData(t),this.addDataListeners(),e.data_.dataprovider_.DataProviderFactory.getDataProvider().reset(!1),this.updateActive=!0,s.fmSetTimeout((function(){a.updateActive=!1}),500),this.cube_.filter()},l.prototype.connectTo=function(e){this.reportType=o.CONNECT_TO,this.cancel(),this.setReportState(n.START_REPORT),this._setReport(e)},l.prototype.load=function(e){this.reportType=o.LOAD,this.cancel(),this._load(e)},l.prototype._load=function(e){var t=this;this.setReportState(n.LOADING_REPORT_FILE),this.reportManager.addEventListener(i.report.ReportEvent.REPORT_FILE_LOADED,(function(e){return t.onReportFileLoaded(e)})),this.reportManager.addEventListener(i.report.ReportEvent.REPORT_FILE_FAILED,(function(){return t.onReportFileFailed()})),this.reportManager.load(e)},l.prototype.open=function(){var e=this;this.reportType=o.OPEN,this.setReportState(n.OPENING_REPORT_FILE),this.reportManager.addEventListener(i.report.ReportEvent.REPORT_FILE_LOADED,(function(t){return e.onReportFileLoaded(t)})),this.reportManager.addEventListener(i.report.ReportEvent.REPORT_FILE_FAILED,(function(){return e.onReportFileFailed()})),this.reportManager.addEventListener(i.report.ReportEvent.REPORT_FILE_CANCELLED,(function(){return e.onReportFileCancelled()})),this.reportManager.open()},l.prototype.onReportFileLoaded=function(t){e.preloader(!1),this.setReportState(n.REPORT_FILE_LOADED),this._setReport(t.report)},l.prototype.onReportFileFailed=function(){e.preloader(!1),this.setReportState(n.REPORT_FILE_ERROR),this.setReportState(n.REPORT_DEFINED),this.setReportState(n.REPORT_COMPLETE)},l.prototype.onReportFileCancelled=function(){this.setReportState(n.REPORT_FILE_CANCELLED),this.setReportState(n.REPORT_DEFINED),this.setReportState(n.REPORT_COMPLETE)},l.prototype.dispatchReportChange=function(){this.reportState!=n.REPORT_COMPLETE&&this.reportState!=n.QUERY_COMPLETE||i.JavaScriptHandlers.getInstance().dispatch(new i.APIEvent(i.JavaScriptHandlers.REPORT_CHANGE))},l.prototype._setReport=function(e,t){void 0===t&&(t=!1),this.reportVO=i.report.ReportValueObject.fromObject(e),this.reportVO.connectionInfo.isUpdateData=t,this.loadLocalization()},l.prototype.onReportComplete=function(){this.reportType=o.COMPLETE},l.prototype.getReport=function(e){return void 0===e&&(e={}),r.vo.StateValueObject.toReport(this.getCurrentState(e))},l.prototype.clear=function(){this.cancel(),this.reportType=o.CLEAR,this.applyEmptyState(),this.cube_.cancel(),this.setReportState(n.REPORT_COMPLETE)},l.prototype.cancel=function(){this.reportManager.cancel(),this.removeDataListeners(),this.updateActive=!1,e.preloader(!1)},l.prototype.loadLocalization=function(){var e=this;null!=this.globalReport.localization&&""!=this.globalReport.localization?(this.setReportState(n.LOADING_LOCALIZATION),i._labels.LabelsManager.getInstance().load(this.globalReport.localization,(function(t){return e.onGlobalLocalizationLoaded(t)}),!0),this.globalReport.localization=null):this.onGlobalLocalizationLoaded(!0)},l.prototype.onGlobalLocalizationLoaded=function(e){var t=this;null==this.reportVO.localization||""==this.reportVO.localization?(i._labels.LabelsManager.getInstance().reset(),this.onLocalizationLoaded(e)):(this.setReportState(n.LOADING_LOCALIZATION),i._labels.LabelsManager.getInstance().load(this.reportVO.localization,(function(e){return t.onLocalizationLoaded(e)})))},l.prototype.onLocalizationLoaded=function(e){this.setReportState(e?n.LOCALIZATION_LOADED:n.LOCALIZATION_ERROR),this.loadStructureAndData()},l.prototype.loadStructureAndData=function(){this.reportType!=o.CONNECT_TO&&this.reportType!=o.OPEN&&(this.applyEmptyState(),i._options.OptionsManager.setOptions(this.reportVO.options),i._options.OptionsManager.configuratorOpened=i._options.OptionsManager.configuratorActive);var t=this.reportType;this.setReportState(n.REPORT_DEFINED),t==this.reportType&&(t=this.reportVO.connectionInfo,!s.nullOrUndefined(this.connectionInfo_)&&!this.connectionInfo_.isEmpty&&this.connectionInfo_.isEqual(t)&&this.cube_.connectionInfo_&&this.cube_.structure_&&this.cube_.structure_.isComplete?(e.data_.dataprovider_.DataProviderFactory.getDataProvider(),this.addDataListeners(),this.cube_.rebaseConnection()):(t.isEmpty&&this._globalConnectionInfo&&!this._globalConnectionInfo.isEmpty&&(t=this._globalConnectionInfo),t.isEmpty?(this.connectionInfo_=t,this.cube_.cancel(),this.setReportState(n.REPORT_COMPLETE),e.preloader(!1)):(t.isInlineData||this.setReportState(n.LOADING_DATA),e.data_.dataprovider_.DataProviderFactory.getDataProvider(),this.addDataListeners(),this.cube_.connect(t))))},l.prototype.onConnectedToDataSource=function(e){this.reportType==o.CONNECT_TO&&(this.applyEmptyState(),this.cube_.slice_&&this.cube_.slice_.clear(),this.cube_.structure_&&this.cube_.structure_.clear()),this.setReportState(n.CONNECTED_TO_DATA_SOURCE),this.connectionInfo_=this.reportVO.connectionInfo},l.prototype.onStructureLoaded=function(t){t=e.data_._structure.Slice.fromObject(this.reportVO.slice,this.cube_.structure_),this.applyReport(),this.cube_.setSlice(t),this.setReportState(n.DATA_LOADED),this.cube_.filter()},l.prototype.onDataFileCancelled=function(){this.setReportState(n.DATA_FILE_CANCELLED),this.setReportState(n.REPORT_COMPLETE)},l.prototype.onStructureLoadingFailed=function(){i._options.OptionsManager.setOptions(this.reportVO.options),this.cube_.cancel(),e.preloader(!1),this.setReportState(n.DATA_ERROR),this.setReportState(n.REPORT_COMPLETE)},l.prototype.onBeforeQuery=function(){this.setReportState(n.RUNNING_QUERY)},l.prototype.onQueryComplete=function(){this.setReportState(n.QUERY_COMPLETE),this.reportState!=n.REPORT_COMPLETE&&this.setReportState(n.REPORT_COMPLETE)},l.prototype.onQueryError=function(){this.setReportState(n.QUERY_ERROR),this.reportState!=n.REPORT_COMPLETE&&this.setReportState(n.REPORT_COMPLETE)},l.prototype.addDataListeners=function(){var t=this;this.cube_.addEventListener(e.data_.DataEvent.STRUCTURE_CONNECTED,this.connectedToDataSourceHandler),this.cube_.addEventListener(e.data_.DataEvent.STRUCTURE_LOADED,this.structureLoadedHandler),this.cube_.addEventListener(e.data_.DataEvent.STRUCTURE_CANCELLED,this.dataFileCancelledHandler),this.cube_.addEventListener(e.data_.DataEvent.STRUCTURE_LOADING_FAILED,this.structureLoadingFailedHandler),this.cube_.addEventListener(e.data_.DataEvent.BEFORE_QUERY,this.beforeQueryHandler),this.cube_.addEventListener(e.data_.DataEvent.QUERY_COMPLETE,this.queryCompleteHandler),this.cube_.addEventListener(e.data_.DataEvent.QUERY_ERROR,this.queryErrorHandler),this.cube_.addEventListener(n.REPORT_CHANGED,(function(){return t.dispatchReportChange()}))},l.prototype.removeDataListeners=function(){this.cube_.removeEventListener(e.data_.DataEvent.STRUCTURE_CONNECTED,this.connectedToDataSourceHandler),this.cube_.removeEventListener(e.data_.DataEvent.STRUCTURE_LOADED,this.structureLoadedHandler),this.cube_.removeEventListener(e.data_.DataEvent.STRUCTURE_CANCELLED,this.dataFileCancelledHandler),this.cube_.removeEventListener(e.data_.DataEvent.STRUCTURE_LOADING_FAILED,this.structureLoadingFailedHandler),this.cube_.removeEventListener(e.data_.DataEvent.BEFORE_QUERY,this.beforeQueryHandler),this.cube_.removeEventListener(e.data_.DataEvent.QUERY_COMPLETE,this.queryCompleteHandler),this.cube_.removeEventListener(e.data_.DataEvent.QUERY_ERROR,this.queryErrorHandler)},l.prototype.save=function(e,t,i,r,n){return void 0===n&&(n=!1),this.reportManager.save(e,t,i,r,n,this.getReport(e instanceof Object?e:{}))},l.prototype.getCurrentState=function(t){var n=!!t.hasOwnProperty("withDefaults")&&1==t.withDefaults;t=!!t.hasOwnProperty("withGlobals")&&1==t.withGlobals;var o=new r.vo.StateValueObject;return o.withDefaults=n,o.withGlobals=t,o._connectionInfo=t&&this._connectionInfo.isEmpty&&!this._globalConnectionInfo.isEmpty?this._globalConnectionInfo:this._connectionInfo,o._structure=this.cube_.structure_,o._slice=this.cube_.slice_,o._options=i._options.OptionsManager.getOptions(n,t),o.formats=i.format.FormatManager.getAllFormats(),o.conditions=i.condition.ConditionManager.conditions,o.customFields=i.report.CustomFieldsManager.customFields,o.rowSizes=i.sizes.SizesManager.rowSizesNamed,o.columnSizes=i.sizes.SizesManager.columnSizesNamed,o.startTableRow=i.sizes.SizesManager.startTableRow,o.rowHeaderSizes=i.sizes.SizesManager.rowHeaderSizes,o.columnHeaderSizes=i.sizes.SizesManager.columnHeaderSizes,o.rowFilterSizes=i.sizes.SizesManager.rowFilterSizes,o.expandedRows=this.cube_.slice_?this.cube_.slice_.axes.getItem(e.data_.consts.AxisName.ROWS_AXIS).expandedTuplesBasedOnUniqueNames:[],o.expandedColumns=this.cube_.slice_?this.cube_.slice_.axes.getItem(e.data_.consts.AxisName.COLUMNS_AXIS).expandedTuplesBasedOnUniqueNames:[],o.drilledRows=this.cube_.slice_?this.cube_.slice_.axes.getItem(e.data_.consts.AxisName.ROWS_AXIS).drilledTuplesBasedOnUniqueNames:[],o.drilledColumns=this.cube_.slice_?this.cube_.slice_.axes.getItem(e.data_.consts.AxisName.COLUMNS_AXIS).drilledTuplesBasedOnUniqueNames:[],this.reportVO&&(o.localization=t&&null==this.reportVO.localization&&null!=this._globalLocalization?this._globalLocalization:this.reportVO.localization),o},l.prototype.spreadGlobal=function(e){this._globalConnectionInfo=e.connectionInfo,i._options.OptionsManager.setGlobalOptions(e.options),this._globalLocalization=e.localization},l.prototype.applyEmptyState=function(){e.data_.dataprovider_.DataProviderFactory.dispose(),i.sizes.SizesManager.clear(),i.condition.ConditionManager.removeAll(),i.format.FormatManager.clear(),i.report.CustomFieldsManager.customFields=[],i._options.OptionsManager.clear()},l.prototype.applyReport=function(){var e;for(i._options.OptionsManager.setOptions(this.reportVO.options),i.sizes.SizesManager.clear(),i.sizes.SizesManager.applySizes(this.reportVO.rowSizes,this.reportVO.columnSizes,this.reportVO.rowSizesByIdx,this.reportVO.columnSizesByIdx,this.reportVO.rowHeaderSizes,this.reportVO.columnHeaderSizes,this.reportVO.rowFilterSizes),i.condition.ConditionManager.removeAll(),e=0;e<this.reportVO.conditions.length;e++){var t=i.condition.vo.ConditionValueObject.fromObject(this.reportVO.conditions[e]);i.condition.ConditionManager.add(t)}for(i.format.FormatManager.clear(),e=0;e<this.reportVO.formats.length;e++)i.format.FormatManager.setFormat(this.reportVO.formats[e]);i.report.CustomFieldsManager.customFields=this.reportVO.customFields},l.prototype.dispose=function(){this.cancel(),i.condition.ConditionManager.dispose(),i._options.OptionsManager.dispose(),i.printing.PrintingManager.dispose(),i.integration.IntegrationDataManager.dispose(),i._labels.LabelsManager.dispose(),i.sizes.SizesManager.dispose(),i.format.FormatManager.dispose(),i.report.CustomFieldsManager.customFields=[],this._connectionInfo=this.reportManager=null,this.globalReport={},this.cube_=this.reportVO=this.globalReportVO=null},l}(t.EventDispatcher);r.StateManager=l}((i=e.model||(e.model={}))._state||(i._state={}))}(n||(n={})),function(e){var t=function(){function e(){}return e.CONTENT_TYPES_XML='<Types xmlns="http://schemas.openxmlformats.org/package/2006/content-types"><Default Extension="rels" ContentType="application/vnd.openxmlformats-package.relationships+xml"/><Default Extension="xml" ContentType="application/xml"/><Override PartName="/xl/workbook.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml"/><Override PartName="/xl/theme/theme1.xml" ContentType="application/vnd.openxmlformats-officedocument.theme+xml"/><Override PartName="/xl/styles.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml"/><Override PartName="/xl/sharedStrings.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml"/><Override PartName="/docProps/core.xml" ContentType="application/vnd.openxmlformats-package.core-properties+xml"/><Override PartName="/docProps/app.xml" ContentType="application/vnd.openxmlformats-officedocument.extended-properties+xml"/>{0}</Types>',e.CONTENT_TYPES_XML_SHEET='<Override PartName="{0}" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml"/>',e._RELS='<Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships"><Relationship Id="rId3" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties" Target="docProps/app.xml"/><Relationship Id="rId2" Type="http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties" Target="docProps/core.xml"/><Relationship Id="rId1" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument" Target="xl/workbook.xml"/></Relationships>',e.APP_XML='<Properties xmlns="http://schemas.openxmlformats.org/officeDocument/2006/extended-properties" xmlns:vt="http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes"><Application>Microsoft Excel</Application><DocSecurity>0</DocSecurity><ScaleCrop>false</ScaleCrop><HeadingPairs><vt:vector size="2" baseType="variant"><vt:variant><vt:lpstr>Worksheets</vt:lpstr></vt:variant><vt:variant><vt:i4>3</vt:i4></vt:variant></vt:vector></HeadingPairs><TitlesOfParts><vt:vector size="3" baseType="lpstr"><vt:lpstr>Sheet1</vt:lpstr><vt:lpstr>Sheet2</vt:lpstr><vt:lpstr>Sheet3</vt:lpstr></vt:vector></TitlesOfParts><Company>Amazon.com</Company><LinksUpToDate>false</LinksUpToDate><SharedDoc>false</SharedDoc><HyperlinksChanged>false</HyperlinksChanged><AppVersion>14.0300</AppVersion></Properties>',e.CORE_XML='<cp:coreProperties xmlns:cp="http://schemas.openxmlformats.org/package/2006/metadata/core-properties" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:dcterms="http://purl.org/dc/terms/" xmlns:dcmitype="http://purl.org/dc/dcmitype/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><dc:creator>EC2</dc:creator><cp:lastModifiedBy>EC2</cp:lastModifiedBy><dcterms:created xsi:type="dcterms:W3CDTF">2010-12-22T15:19:38Z</dcterms:created><dcterms:modified xsi:type="dcterms:W3CDTF">2010-12-22T15:20:08Z</dcterms:modified></cp:coreProperties>',e.WORKBOOK_XML='<workbook xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships"><fileVersion appName="xl" lastEdited="5" lowestEdited="5" rupBuild="9302"/><workbookPr defaultThemeVersion="124226"/><bookViews><workbookView xWindow="360" yWindow="210" windowWidth="16860" windowHeight="9150"/></bookViews><sheets>{0}</sheets><calcPr calcId="144525"/></workbook>',e.WORKBOOK_XML_RELS='<Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships"><Relationship Id="rId1" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings" Target="sharedStrings.xml"/><Relationship Id="rId2" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles" Target="styles.xml"/><Relationship Id="rId3" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme" Target="theme/theme1.xml"/>{0}</Relationships>',e.WORKBOOK_XML_RELS_SHEET='<Relationship Id="{0}" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet" Target="{1}"/>',e.THEME='<a:theme name="Office Theme" xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main"><a:themeElements><a:clrScheme name="Office"><a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1><a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1><a:dk2><a:srgbClr val="1F497D"/></a:dk2><a:lt2><a:srgbClr val="EEECE1"/></a:lt2><a:accent1><a:srgbClr val="4F81BD"/></a:accent1><a:accent2><a:srgbClr val="C0504D"/></a:accent2><a:accent3><a:srgbClr val="9BBB59"/></a:accent3><a:accent4><a:srgbClr val="8064A2"/></a:accent4><a:accent5><a:srgbClr val="4BACC6"/></a:accent5><a:accent6><a:srgbClr val="F79646"/></a:accent6><a:hlink><a:srgbClr val="0000FF"/></a:hlink><a:folHlink><a:srgbClr val="800080"/></a:folHlink></a:clrScheme><a:fontScheme name="Office"><a:majorFont><a:latin typeface="Cambria"/><a:ea typeface=""/><a:cs typeface=""/><a:font script="Jpan" typeface=" "/><a:font script="Hang" typeface=" "/><a:font script="Hans" typeface=""/><a:font script="Hant" typeface=""/><a:font script="Arab" typeface="Times New Roman"/><a:font script="Hebr" typeface="Times New Roman"/><a:font script="Thai" typeface="Tahoma"/><a:font script="Ethi" typeface="Nyala"/><a:font script="Beng" typeface="Vrinda"/><a:font script="Gujr" typeface="Shruti"/><a:font script="Khmr" typeface="MoolBoran"/><a:font script="Knda" typeface="Tunga"/><a:font script="Guru" typeface="Raavi"/><a:font script="Cans" typeface="Euphemia"/><a:font script="Cher" typeface="Plantagenet Cherokee"/><a:font script="Yiii" typeface="Microsoft Yi Baiti"/><a:font script="Tibt" typeface="Microsoft Himalaya"/><a:font script="Thaa" typeface="MV Boli"/><a:font script="Deva" typeface="Mangal"/><a:font script="Telu" typeface="Gautami"/><a:font script="Taml" typeface="Latha"/><a:font script="Syrc" typeface="Estrangelo Edessa"/><a:font script="Orya" typeface="Kalinga"/><a:font script="Mlym" typeface="Kartika"/><a:font script="Laoo" typeface ="DokChampa"/><a:font script="Sinh" typeface="Iskoola Pota"/><a:font script="Mong" typeface="Mongolian Baiti"/><a:font script="Viet" typeface="Times New Roman"/><a:font script="Uigh" typeface="Microsoft Uighur"/></a:majorFont><a:minorFont><a:latin typeface="Calibri"/><a:ea typeface=""/><a:cs typeface=""/><a:font script="Jpan" typeface=" "/><a:font script="Hang" typeface=" "/><a:font script="Hans" typeface=""/><a:font script="Hant" typeface=""/><a:font script="Arab" typeface="Arial"/><a:font script="Hebr" typeface="Arial"/><a:font script="Thai" typeface="Tahoma"/><a:font script="Ethi" typeface="Nyala"/><a:font script="Beng" typeface="Vrinda"/><a:font script="Gujr" typeface="Shruti"/><a:font script="Khmr" typeface="DaunPenh"/><a:font script="Knda" typeface="Tunga"/><a:font script="Guru" typeface="Raavi"/><a:font script="Cans" typeface="Euphemia"/><a:font script="Cher" typeface="Plantagenet Cherokee"/><a:font script="Yiii" typeface="Microsoft Yi Baiti"/><a:font script="Tibt" typeface="Microsoft Himalaya"/><a:font script="Thaa" typeface="MV Boli"/><a:font script="Deva" typeface="Mangal"/><a:font script="Telu" typeface="Gautami"/><a:font script="Taml" typeface="Latha"/><a:font script="Syrc" typeface="Estrangelo Edessa"/><a:font script="Orya" typeface="Kalinga"/><a:font script="Mlym" typeface="Kartika"/><a:font script="Laoo" typeface ="DokChampa"/><a:font script="Sinh" typeface="Iskoola Pota"/><a:font script="Mong" typeface="Mongolian Baiti"/><a:font script="Viet" typeface="Arial"/><a:font script="Uigh" typeface="Microsoft Uighur"/></a:minorFont></a:fontScheme><a:fmtScheme name="Office"><a:fillStyleLst><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:gradFill rotWithShape="1"><a:gsLst><a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs><a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs><a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs></a:gsLst><a:lin ang="16200000" scaled="1"/></a:gradFill><a:gradFill rotWithShape="1"><a:gsLst><a:gs pos="0"><a:schemeClr val="phClr"><a:shade val="51000"/><a:satMod val="130000"/></a:schemeClr></a:gs><a:gs pos="80000"><a:schemeClr val="phClr"><a:shade val="93000"/><a:satMod val="130000"/></a:schemeClr></a:gs><a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="94000"/><a:satMod val="135000"/></a:schemeClr></a:gs></a:gsLst><a:lin ang="16200000" scaled="0"/></a:gradFill></a:fillStyleLst><a:lnStyleLst><a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln><a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln><a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln></a:lnStyleLst><a:effectStyleLst><a:effectStyle><a:effectLst><a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw></a:effectLst></a:effectStyle><a:effectStyle><a:effectLst><a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw></a:effectLst></a:effectStyle><a:effectStyle><a:effectLst><a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw></a:effectLst><a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d><a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d></a:effectStyle></a:effectStyleLst><a:bgFillStyleLst><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:gradFill rotWithShape="1"><a:gsLst><a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs><a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs><a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs></a:gsLst><a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path></a:gradFill><a:gradFill rotWithShape="1"><a:gsLst><a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs><a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs></a:gsLst><a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path></a:gradFill></a:bgFillStyleLst></a:fmtScheme></a:themeElements><a:objectDefaults><a:spDef><a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style></a:spDef><a:lnDef><a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style></a:lnDef></a:objectDefaults><a:extraClrSchemeLst/></a:theme>',e.STYLES_XML='<styleSheet xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" mc:Ignorable="x14ac" xmlns:x14ac="http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac">{0}<fonts count="{1}" x14ac:knownFonts="1"><font><sz val="11"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font>{2}</fonts><fills count="{3}">{4}</fills><borders count="2"><border><left/><right/><top/><bottom/><diagonal/></border><border><left style="thin"><color theme="0" tint="-0.14996795556505021"/></left><right style="thin"><color theme="0" tint="-0.14996795556505021"/></right><top style="thin"><color theme="0" tint="-0.14996795556505021"/></top><bottom style="thin"><color theme="0" tint="-0.14996795556505021"/></bottom><diagonal/></border></borders><cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs><cellXfs count="{5}"><xf numFmtId="0" fontId="0" fillId="0" borderId="0" xfId="0"/>{6}</cellXfs><cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles><dxfs count="0"/><tableStyles count="0" defaultTableStyle="TableStyleMedium2" defaultPivotStyle="PivotStyleLight16"/><extLst><ext uri="{EB79DEF2-80B8-43e5-95BD-54CBDDF9020C}" xmlns:x14="http://schemas.microsoft.com/office/spreadsheetml/2009/9/main"><x14:slicerStyles defaultSlicerStyle="SlicerStyleLight1"/></ext></extLst></styleSheet>',e.SHARED_STRING_XML='<sst xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" count="5" uniqueCount="5">{0}</sst>',e.SHEET_XML='<worksheet xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" mc:Ignorable="x14ac" xmlns:x14ac="http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac"><dimension ref="{0}"/><sheetViews><sheetView tabSelected="1" workbookViewId="0"><selection activeCell="A1" sqref="A1"/></sheetView></sheetViews><sheetFormatPr defaultRowHeight="15" defaultColWidth="15" x14ac:dyDescent="0.25"/><cols>{1}</cols><sheetData>{2}</sheetData>{3}<pageMargins left="0.7" right="0.7" top="0.75" bottom="0.75" header="0.3" footer="0.3"/></worksheet>',e.XML_HEADER='<?xml version="1.0" encoding="UTF-8" standalone="yes"?>',e}();e.XLSTemplates=t}(c||(c={})),function(i){var r,n;r=i.data_||(i.data_={}),n=function(t){function n(){var e=t.call(this)||this;if(e.queryType=r.consts.QueryType.SELECT,null!=n.instance)throw Error("Singleton");return e}return a(n,t),n.getInstance=function(){return null==n.instance&&(n.instance=new n),n.instance},n.prototype.setSlice=function(e){e.isEmpty&&i.model._options.OptionsManager.showDefaultSlice&&e.makeDefault(),e&&!e.isEqual(this.slice_)&&this.dispatchWith("slice_changed"),this.slice_=e},n.prototype.rebaseConnection=function(){this.structure_&&(this.structure_.isComplete=!1,this.removeAllCalculatedMeasures());for(var e=this.structure_.allHierarchies(!1),t=0;t<e.length;t++){var r=e.getItemAt(t);r.clearFilter(),r.clearSort(i.model._options.OptionsManager.flatView)}this.slice_&&this.slice_.clear(),this.dispatchStructureLoaded()},n.prototype.connect=function(e){var t=this;s.nullOrUndefined(this.__structureLoader)||this.__structureLoader.cancel(),this.__structureLoader=r.StructureLoaderFactory.getStructureLoader(e),this.__structureLoader.load(e,(function(){return t.dispatchStructureLoaded()}),(function(){t.dispatchWith(r.DataEvent.STRUCTURE_LOADING_FAILED)}),(function(){t.cancel(!1),t.connectionInfo_=e,t.structureLoader=t.__structureLoader,t.localDataStorage=new r.LocalDataStorage(t),t.__structureLoader=null,t.localDataStorage.datePattern=i.model._options.OptionsManager.datePattern,t.localDataStorage.dateTimePattern=i.model._options.OptionsManager.dateTimePattern,null!=t.structure_&&t.structure_.clear(),t.structure_=new r._structure.GenericStructure,t.structure_.localDataStorage=t.localDataStorage,t.dispatchWith(r.DataEvent.STRUCTURE_CONNECTED)}),(function(){t.dispatchWith(r.DataEvent.STRUCTURE_CANCELLED)}))},n.prototype.dispatchStructureLoaded=function(){this.structure_.isComplete=!0,this.dispatchWith(r.DataEvent.STRUCTURE_LOADED)},n.prototype.cancel=function(e){void 0===e&&(e=!0),s.ThreadManager.isRunning()&&s.ThreadManager.cancel(),this.structureLoader&&(this.structureLoader.cancel(),this.structureLoader=null),e&&this.structure_&&(this.structure_.clear(),this.structure_=null),e&&this.slice_&&(this.slice_.clear(),this.slice_=null),e&&this.localDataStorage&&(this.localDataStorage.clearAll(),this.localDataStorage=null)},n.prototype.dispatchQueryComplete=function(){var e=new r.QueryCompleteEvent(this.queryType);this.dispatch(e)},n.prototype.dispatchQueryError=function(){this.dispatchWith(r.DataEvent.QUERY_ERROR)},n.prototype.filter=function(){this.queryType=r.consts.QueryType.FILTER,this.select()},n.prototype.clearSortValues=function(e){e.sortMeasure=null,e.sortTuple=null,e.sortType=r.consts.SortType.UNSORTED,e.totalSortType=r.consts.SortType.UNSORTED,e.totalSortMeasure=null},n.prototype.sort=function(){this.dispatchQueryComplete()},n.prototype.expand=function(e,t,i,n){void 0===i&&(i=null),void 0===n&&(n=!0),this._tuple=e,this._axisName=t,this._measure=i,this.queryType=r.consts.QueryType.EXPAND;var o=new r.BeforeQueryEvent(r.consts.QueryType.EXPAND);this.dispatch(o),this.localDataStorage.expand(e,t,i),n&&this.dispatchQueryComplete()},n.prototype.collapse=function(e,t,i,n){void 0===i&&(i=null),void 0===n&&(n=!0),this.localDataStorage.collapse(e,t,i),this.query=new r.Query,this.queryType=this.query.type=r.consts.QueryType.COLLAPSE,n&&this.dispatchQueryComplete()},n.prototype.drillDown=function(e,t,i,n){void 0===n&&(n=null),this._tuple=e,this._axisName=i,this._measure=n,this._member=t,this._levelName=void 0,t.hierarchy_.drillDownMember(t),this.queryType=r.consts.QueryType.DRILL_DOWN;var o=new r.BeforeQueryEvent(r.consts.QueryType.DRILL_DOWN);this.dispatch(o),this.localDataStorage.drillDown(e,t,i,n),this.dispatchQueryComplete()},n.prototype.drillUp=function(e,t,i,n){void 0===n&&(n=null),t.hierarchy_.drillUpMember(t),this.localDataStorage.drillUp(e,t,i,n),this.query=new r.Query,this.queryType=this.query.type=r.consts.QueryType.DRILL_UP,e=new r.BeforeQueryEvent(r.consts.QueryType.DRILL_UP),this.dispatch(e),this.dispatchQueryComplete()},n.prototype.select=function(){var e=new r.BeforeQueryEvent(this.queryType==r.consts.QueryType.FILTER?this.queryType:r.consts.QueryType.SELECT);for(this.dispatch(e),e=0;e<this.slice_.pages.length;e++)this.slice_.pages.getItemAt(e).clearValuesFilter();this.structure_.measures_.length>this.localDataStorage.factKeys.length&&this.addCalculatedMeasuresToDataStorage(),this.localDataStorage.filter(),this.localDataStorage.select(),this.dispatchQueryComplete()},n.prototype.addCalculatedMeasuresToDataStorage=function(){for(var e=0;e<this.structure_.measures_.length;e++){var t=this.structure_.measures_.getItemAt(e);if(t.calculated){for(var i=!0,r=0;r<this.localDataStorage.factKeys.length;r++)this.localDataStorage.factKeys[r].toString()==t.uniqueName&&(i=!1);i&&this.localDataStorage.addFactKey(t.uniqueName,t.params,t.individual)}}this.slice_.axisWithMeasures.sortToSet&&(t=this.structure_.findMeasure((e=this.slice_.axisWithMeasures.sortToSet).measure))&&this.slice_.axisWithMeasures.setSort(t,e.tuple,e.type)},n.prototype.addCalculatedMeasure=function(e){if(null==this.structure_.findMeasure(e.uniqueName)){if(e.calculated){var t=new s.Lexer;e.params=t.parse(e.formula)}e.calculated&&null==e.params||(this.structure_.measuresHierarchy&&this.structure_.addMeasure(e),e.calculated?this.localDataStorage.addFactKey(e.uniqueName,e.params,e.individual):this.localDataStorage.addFactKey(e.uniqueName),this.structure_.isComplete&&this.refresh())}else t=new s.Lexer,e.params=t.parse(e.formula),e.calculated&&null==e.params||(this.localDataStorage.updateFactKey(e.uniqueName,e.params,e.individual),(t=this.structure_.findMeasure(e.uniqueName)).caption=e.caption,t.formula=e.formula,t.individual=e.individual,t.params=e.params,this.structure_.isComplete&&this.refresh())},n.prototype.removeCalculatedMeasure=function(e,t){void 0===t&&(t=!0);var i=this.structure_.findMeasure(e);i&&i.calculated&&(this.structure_.removeMeasure(e),this.localDataStorage.removeFactKey(e),this.slice_.removeMeasure(e),t&&this.structure_.isComplete&&this.refresh())},n.prototype.removeAllCalculatedMeasures=function(){for(var e=0;e<this.structure_.measures_.length;){var t=this.structure_.measures_.getItemAt(e);t.calculated?this.removeCalculatedMeasure(t.uniqueName,!1):e++}this.structure_.isComplete&&this.refresh()},n.prototype.refresh=function(){this.structure_.isComplete?(this.connectionInfo_.dataSourceType==r.consts.DataSourceType.EMPTY&&s.nullOrUndefined(this.slice_)&&this.dispatchStructureLoaded(),this.filter()):this.connectionInfo_.dataSourceType==r.consts.DataSourceType.EMPTY&&this.dispatchStructureLoaded()},n.prototype.loadMemberChildren=function(e,t,i){var r=this;this.structureLoader.loadMemberChildren(e,t,i,(function(){return r.dispatchQueryError()}))},n.prototype.updateData=function(e){this.structureLoader.updateData(e),this.dispatchStructureLoaded()},n.prototype.dispose=function(){s.ThreadManager.dispose();try{this.structure_.clear()}catch(e){}this.slice_=this.structure_=null;try{this.localDataStorage.clearAll()}catch(t){}this.localDataStorage=null;try{this.structureLoader.cancel()}catch(i){}this.structureLoader=null;try{this.__structureLoader.cancel()}catch(r){}this.__structureLoader=null,n.instance=null},n.MEASURES_NAME="Measures",n}(t.EventDispatcher),r.Cube=n}(n||(n={})),function(t){var i=function(){function i(e,o){var a,l=this;this.isCreationComplete=!1,this.api=null,this.delayedApiCallsOnReportDefined=[],this.delayedApiCallsOnReportReady=[],null!=i.instance&&i.instance.dispose(),i.instance=this,this.api=o,s.nullOrUndefined(e)&&(e={}),(0!=s.isHTML5Supported()||0!=confirm("WebDataRocks Reporting Component is not completely supported by this version of browser. Please update your browser. Continue anyway?"))&&(e.container instanceof HTMLElement?a=e.container:s.nullOrUndefined(e.container)||(a="#"==e.container.substr(0,1)?e.container.substring(1):e.container,a=document.getElementById(a)),null==a?(a=0==s.nullOrEmpty(e.container)?"WebDataRocks Reporting Component:\nUnable to create the component. DOM element with id '"+e.container+"' is not found.":"WebDataRocks Reporting Component:\nUnable to create the component. DOM element is null.",console.error(a),alert(a)):(this.model_=t.model.PivotModel.getInstance(),this.model_.state_.addEventListener(t.model._state.StateEvent.OPENING_REPORT_FILE,(function(){return l.onOpeningReportFile()})),this.model_.state_.addEventListener(t.model._state.StateEvent.LOADING_REPORT_FILE,(function(){return l.onLoadingReportFile()})),this.model_.state_.addEventListener(t.model._state.StateEvent.REPORT_FILE_LOADED,(function(){return l.onReportFileLoaded()})),this.model_.state_.addEventListener(t.model._state.StateEvent.REPORT_FILE_ERROR,(function(){return l.onReportFileError()})),this.model_.state_.addEventListener(t.model._state.StateEvent.REPORT_FILE_CANCELLED,(function(){return l.onReportFileCancelled()})),this.model_.state_.addEventListener(t.model._state.StateEvent.REPORT_DEFINED,(function(){return l.onReportDefined()})),this.model_.state_.addEventListener(t.model._state.StateEvent.LOADING_DATA,(function(){return l.onLoadingData()})),this.model_.state_.addEventListener(t.model._state.StateEvent.DATA_LOADED,(function(){return l.onDataLoaded()})),this.model_.state_.addEventListener(t.model._state.StateEvent.DATA_ERROR,(function(){return l.onDataError()})),this.model_.state_.addEventListener(t.model._state.StateEvent.DATA_FILE_CANCELLED,(function(){return l.onDataFileCancelled()})),this.model_.state_.addEventListener(t.model._state.StateEvent.LOADING_LOCALIZATION,(function(){return l.onLoadingLocalization()})),this.model_.state_.addEventListener(t.model._state.StateEvent.LOCALIZATION_LOADED,(function(){return l.onLocalizationLoaded()})),this.model_.state_.addEventListener(t.model._state.StateEvent.LOCALIZATION_ERROR,(function(){return l.onLocalizationError()})),this.model_.state_.addEventListener(t.model._state.StateEvent.EMPTY_SLICE,(function(){return l.onEmptySlice()})),this.model_.state_.addEventListener(t.model._state.StateEvent.RUNNING_QUERY,(function(){return l.onRunningQuery()})),this.model_.state_.addEventListener(t.model._state.StateEvent.QUERY_COMPLETE,(function(){return l.onQueryComplete()})),this.model_.state_.addEventListener(t.model._state.StateEvent.QUERY_ERROR,(function(){return l.onQueryError()})),this.model_.state_.addEventListener(t.model._state.StateEvent.REPORT_COMPLETE,(function(){return l.onReportComplete()})),this.model_.addEventListener(n.EXPORT,(function(){return l.onExportStart()})),this.model_.addEventListener(n.EXPORT_COMPLETE,(function(){return l.onExportComplete()})),this.model_.addEventListener(n.PRINT,(function(){return l.onPrintStart()})),this.model_.addEventListener(n.PRINT_COMPLETE,(function(){return l.onPrintComplete()})),this.view_=new t._view.PivotView(r.UIElement.convert(a),e),this.view_.addEventListener(t._view.ViewEvent.BEFORE_GRID_DRAW,(function(e){return l.onBeforeGridDraw(e)})),this.view_.addEventListener(t._view.ViewEvent.RENDER_COMPLETE,(function(){return l.onRenderComplete()})),this.model_.init(e),this.isCreationComplete=!0))}return Object.defineProperty(i.prototype,"isReportComplete",{get:function(){return this.model_&&this.model_.state_&&this.model_.state_.isReportComplete},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"isReportDefined",{get:function(){return this.model_&&this.model_.state_&&this.model_.state_.isReportDefined},enumerable:!0,configurable:!0}),i.prototype.runDelayedCalls=function(){var e=this;s.fmSetTimeout((function(){for(;0<e.delayedApiCallsOnReportReady.length;)e.delayedApiCallsOnReportReady.shift().call(e)}),1)},i.prototype.delayApiCall=function(e,t){void 0===t&&(t=1),0==t?this.delayedApiCallsOnReportDefined.push(e):this.delayedApiCallsOnReportReady.push(e)},i.prototype.onOpeningReportFile=function(){t.model.JavaScriptHandlers.getInstance().dispatch(new t.model.APIEvent(t.model.JavaScriptHandlers.OPENING_REPORT_FILE))},i.prototype.onLoadingReportFile=function(){t.model.JavaScriptHandlers.getInstance().dispatch(new t.model.APIEvent(t.model.JavaScriptHandlers.LOADING_REPORT_FILE))},i.prototype.onReportFileLoaded=function(){t.model.JavaScriptHandlers.getInstance().dispatch(new t.model.APIEvent(t.model.JavaScriptHandlers.REPORT_FILE_LOADED))},i.prototype.onReportFileError=function(){t.model.JavaScriptHandlers.getInstance().dispatch(new t.model.APIEvent(t.model.JavaScriptHandlers.REPORT_FILE_ERROR))},i.prototype.onReportFileCancelled=function(){t.model.JavaScriptHandlers.getInstance().dispatch(new t.model.APIEvent(t.model.JavaScriptHandlers.REPORT_FILE_CANCELLED))},i.prototype.onReportDefined=function(){for(this.model_.state_.reportType==t.model._state.ReportType.INIT&&s.fmSetTimeout((function(){t.model.JavaScriptHandlers.getInstance().dispatch(new t.model.APIEvent(t.model.JavaScriptHandlers.READY))}),1);0<this.delayedApiCallsOnReportDefined.length;)this.delayedApiCallsOnReportDefined.shift().call(this)},i.prototype.onLoadingLocalization=function(){t.model.JavaScriptHandlers.getInstance().dispatch(new t.model.APIEvent(t.model.JavaScriptHandlers.LOADING_LOCALIZATION))},i.prototype.onLocalizationLoaded=function(){t.model.JavaScriptHandlers.getInstance().dispatch(new t.model.APIEvent(t.model.JavaScriptHandlers.LOCALIZATION_LOADED))},i.prototype.onLocalizationError=function(){t.model.JavaScriptHandlers.getInstance().dispatch(new t.model.APIEvent(t.model.JavaScriptHandlers.LOCALIZATION_ERROR))},i.prototype.onLoadingData=function(){t.model.JavaScriptHandlers.getInstance().dispatch(new t.model.APIEvent(t.model.JavaScriptHandlers.LOADING_DATA))},i.prototype.onDataLoaded=function(){t.model.JavaScriptHandlers.getInstance().dispatch(new t.model.APIEvent(t.model.JavaScriptHandlers.DATA_LOADED))},i.prototype.onDataFileCancelled=function(){t.model.JavaScriptHandlers.getInstance().dispatch(new t.model.APIEvent(t.model.JavaScriptHandlers.DATA_FILE_CANCELLED))},i.prototype.onDataError=function(){t.model.JavaScriptHandlers.getInstance().dispatch(new t.model.APIEvent(t.model.JavaScriptHandlers.DATA_ERROR))},i.prototype.onEmptySlice=function(){},i.prototype.onRunningQuery=function(){t.model.JavaScriptHandlers.getInstance().dispatch(new t.model.APIEvent(t.model.JavaScriptHandlers.RUNNING_QUERY))},i.prototype.onQueryComplete=function(){t.model.JavaScriptHandlers.getInstance().dispatch(new t.model.APIEvent(t.model.JavaScriptHandlers.QUERY_COMPLETE)),t.model.JavaScriptHandlers.getInstance().dispatch(new t.model.APIEvent(t.model.JavaScriptHandlers.UPDATE))},i.prototype.onQueryError=function(){t.model.JavaScriptHandlers.getInstance().dispatch(new t.model.APIEvent(t.model.JavaScriptHandlers.QUERY_ERROR))},i.prototype.onReportComplete=function(){},i.prototype.onBeforeGridDraw=function(e){t.model.JavaScriptHandlers.getInstance().dispatch(new t.model.APIEvent(t.model.JavaScriptHandlers.BEFORE_GRID_DRAW,e.data))},i.prototype.onRenderComplete=function(){var e=this;this.isReportComplete&&this.model_.state_.reportType!=t.model._state.ReportType.COMPLETE&&s.fmSetTimeout((function(){e.runDelayedCalls(),e.model_.state_.reportType=t.model._state.ReportType.COMPLETE,t.model.JavaScriptHandlers.getInstance().dispatch(new t.model.APIEvent(t.model.JavaScriptHandlers.REPORT_COMPLETE))}),1)},i.prototype.onExportStart=function(){t.model.JavaScriptHandlers.getInstance().dispatch(new t.model.APIEvent(t.model.JavaScriptHandlers.EXPORT_START))},i.prototype.onExportComplete=function(){s.fmSetTimeout((function(){t.model.JavaScriptHandlers.getInstance().dispatch(new t.model.APIEvent(t.model.JavaScriptHandlers.EXPORT_COMPLETE))}),1)},i.prototype.onPrintStart=function(){t.model.JavaScriptHandlers.getInstance().dispatch(new t.model.APIEvent(t.model.JavaScriptHandlers.PRINT_START))},i.prototype.onPrintComplete=function(){s.fmSetTimeout((function(){t.model.JavaScriptHandlers.getInstance().dispatch(new t.model.APIEvent(t.model.JavaScriptHandlers.PRINT_COMPLETE))}),1)},i.prototype.getAllConditions=function(){return this.isReportComplete?this.model_.getAllConditions():null},i.prototype.getCondition=function(e){return this.isReportComplete?this.model_.getCondition(e):null},i.prototype.addCondition=function(e){var t=this;this.isReportComplete?null!=e&&this.model_.addCondition(e):this.delayApiCall((function(){return t.addCondition(e)}))},i.prototype.removeCondition=function(e){var t=this;this.isReportComplete?this.model_.removeCondition(e):this.delayApiCall((function(){return t.removeCondition(e)}))},i.prototype.removeAllConditions=function(){var e=this;this.isReportComplete?this.model_.removeAllConditions():this.delayApiCall((function(){return e.removeAllConditions()}))},i.prototype.open=function(){this.model_.open()},i.prototype.load=function(e){this.model_.load(e)},i.prototype.getReport=function(e){return this.model_.getReport(e).toObject()},i.prototype.setReport=function(i){if("string"==typeof i)try{i=JSON.parse(i)}catch(e){return void t.uialert(t.model._labels.Labels.MESSAGE_INVALID_REPORT_FORMAT,t.model._labels.Labels.ERROR,t.AlertType.ERROR)}this.model_.setReport({report:i})},i.prototype.getData=function(e,t,i){var r=this;this.isReportComplete?this.model_.getData(e,t,i):this.delayApiCall((function(){return r.getData(e,t,i)}))},i.prototype.save=function(e,i,r,n,o){var s=this;void 0===e&&(e={filename:"report.json"}),void 0===i&&(i=null),void 0===r&&(r=null),void 0===n&&(n=null),void 0===o&&(o=!1);var a=r;this.isReportComplete?(e instanceof Object&&e.hasOwnProperty("callbackHandler")&&(a=e.callbackHandler),null!=a&&"string"==typeof a&&(a=t.model.JavaScriptHandlers.getFunctionByName(a)),this.model_.save(e,i,null!=a?function(e){return a(e)}:null,n,o)):this.delayApiCall((function(){return s.save(e,i,r,n,o)}))},i.prototype.updateData=function(e,t){var i=this;null!=e&&(s.nullOrUndefined(t)?t={partial:!1}:"boolean"==typeof t&&(t={partial:t}),this.isReportDefined?this.model_.updateData(e,t):this.delayApiCall((function(){return i.updateData(e,t)}),0))},i.prototype.connectTo=function(e){var t=this;null!=e&&(this.isReportDefined?this.model_.connectTo(e):this.delayApiCall((function(){return t.connectTo(e)}),0))},i.prototype.addCalculatedMeasure=function(e){var i=this;this.isReportComplete?null!=e&&this.model_.addCalculatedMeasure(t.data_._structure.GenericMeasure.fromObject(e)):this.delayApiCall((function(){return i.addCalculatedMeasure(e)}))},i.prototype.removeCalculatedMeasure=function(e){var t=this;this.isReportComplete?this.model_.removeCalculatedMeasure(e):this.delayApiCall((function(){return t.removeCalculatedMeasure(e)}))},i.prototype.removeAllCalculatedMeasures=function(){var e=this;this.isReportComplete?this.model_.removeAllCalculatedMeasures():this.delayApiCall((function(){return e.removeAllCalculatedMeasures()}))},i.prototype.clear=function(){var e=this;this.isReportComplete?this.model_.clear():this.delayApiCall((function(){return e.clear()}))},i.prototype.dispose=function(){s.fmdocument.dispose(),s.fmwindow.dispose(),s.Timers.dispose(),this.model_.dispose(),this.view_.dispose(),this.model_=this.view_=null,i.instance=null,t.model.JavaScriptHandlers.dispose()},i.prototype.refresh=function(){var e=this;this.isReportComplete?this.view_.draw():this.delayApiCall((function(){return e.refresh()}))},i.prototype.expandAllData=function(e){var t=this;void 0===e&&(e=!0),this.isReportComplete?this.model_.expandAllData(e):this.delayApiCall((function(){return t.expandAllData(e)}))},i.prototype.expandData=function(e){var t=this;this.isReportComplete?this.model_.expandData(e):this.delayApiCall((function(){return t.expandData(e)}))},i.prototype.collapseAllData=function(){var e=this;this.isReportComplete?this.model_.collapseAllData():this.delayApiCall((function(){return e.collapseAllData()}))},i.prototype.collapseData=function(e){var t=this;this.isReportComplete?this.model_.collapseData(e):this.delayApiCall((function(){return t.collapseData(e)}))},i.prototype.print=function(e){var i=this;void 0===e&&(e=null),this.isReportComplete?this.model_.print(t.model.printing.PrintOptions.fromObject(e)):this.delayApiCall((function(){return i.print(e)}))},i.prototype.exportTo=function(e,i,r){var n=this;if(void 0===i&&(i=null),void 0===r&&(r=null),this.isReportComplete){if(null!=e){null!=r&&"string"==typeof r&&(r=t.model.JavaScriptHandlers.getFunctionByName(r));var o=null!=r?function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r.apply(null,e)}:null;this.model_.exportTo(e,t.model._export.ExportOptions.fromObject(i),o)}}else this.delayApiCall((function(){return n.exportTo(e,i,r)}))},i.prototype.getFilter=function(e){return this.isReportComplete?this.model_.getFilter(e):null},i.prototype.getFilterProperties=function(e){return this.isReportComplete?this.model_.getFilterProperties(e):null},i.prototype.setFilter=function(e,t,i){var r=this;void 0===i&&(i=!1),this.isReportComplete?this.model_.setFilter(e,t,i):this.delayApiCall((function(){return r.setFilter(e,t,i)}))},i.prototype.clearFilter=function(e){var t=this;this.isReportComplete?this.model_.clearFilter(e):this.delayApiCall((function(){return t.clearFilter(e)}))},i.prototype.on=function(e,i){"string"==typeof i&&(i=t.model.JavaScriptHandlers.getFunctionByName(i)),t.model.JavaScriptHandlers.getInstance().addEventListener(e,i)},i.prototype.off=function(e,i){"string"==typeof i&&(i=t.model.JavaScriptHandlers.getFunctionByName(i)),null==i?t.model.JavaScriptHandlers.getInstance().removeAllEventListeners(e):t.model.JavaScriptHandlers.getInstance().removeEventListener(e,i)},i.prototype.getRows=function(){return this.isReportComplete?this.model_.getRows():null},i.prototype.getColumns=function(){return this.isReportComplete?this.model_.getColumns():null},i.prototype.getPages=function(){return this.isReportComplete?this.model_.getPages():null},i.prototype.getMeasures=function(){return this.isReportComplete?this.model_.getMeasures():null},i.prototype.getAllMeasures=function(){return this.isReportComplete?this.model_.getAllMeasures():null},i.prototype.sortValues=function(e,t,i,r){var n=this;this.isReportComplete?this.model_.sortValues(e,t,i,r):this.delayApiCall((function(){return n.sortValues(e,t,i,r)}))},i.prototype.setSort=function(e,t){var i=this;this.isReportComplete?this.model_.setSort(e,t):this.delayApiCall((function(){return i.setSort(e,t)}))},i.prototype.getSort=function(e){return this.isReportComplete?this.model_.getSort(e):null},i.prototype.setTopX=function(e,t,i){var r=this;this.isReportComplete?this.model_.setTopX(e,t,i):this.delayApiCall((function(){return r.setTopX(e,t,i)}))},i.prototype.setBottomX=function(e,t,i){var r=this;this.isReportComplete?this.model_.setBottomX(e,t,i):this.delayApiCall((function(){return r.setBottomX(e,t,i)}))},i.prototype.getOptions=function(){return this.isReportComplete?this.model_.getOptions():null},i.prototype.setOptions=function(e){var t=this;this.isReportComplete?this.model_.setOptions(e):this.delayApiCall((function(){return t.setOptions(e)}))},i.prototype.getMembers=function(e,i,r){var n=this;if(this.isReportComplete)return"string"==typeof r&&(r=t.model.JavaScriptHandlers.getFunctionByName(r)),this.model_.getMembers(e,i,r);this.delayApiCall((function(){return n.getMembers(e,i,r)}))},i.prototype.runQuery=function(e){var t=this;this.isReportComplete?null!=e&&this.model_.runQuery(e):this.delayApiCall((function(){return t.runQuery(e)}))},i.prototype.getAllHierarchies=function(){return this.isReportComplete?this.model_.getAllHierarchies():null},i.prototype.replaceHierarchyCaption=function(e){var t=this;this.isReportComplete?this.model_.replaceHierarchyCaption(e):this.delayApiCall((function(){return t.replaceHierarchyCaption(e)}))},i.prototype.getFormat=function(e){return this.isReportComplete?this.model_.getFormat(e):null},i.prototype.setFormat=function(e,t){var i=this;this.isReportComplete?null!=e&&this.model_.setFormat(e,t):this.delayApiCall((function(){return i.setFormat(e,t)}))},i.prototype.getCell=function(e,t){return this.isReportComplete?this.view_.getCell(e,t):null},i.prototype.getSelectedCell=function(){return this.isReportComplete?this.view_.getSelectedCell():null},i.prototype.setSelectedCell=function(e,t){var i=this;this.isReportComplete?this.view_.setSelectedCell(e,t):this.delayApiCall((function(){return i.setSelectedCell(e,t)}))},i.prototype.removeSelection=function(){var e=this;this.isReportComplete?this.view_.removeSelection():this.delayApiCall((function(){return e.removeSelection()}))},i.prototype.openFieldsList=function(){var e=this;this.isCreationComplete?this.view_.openFieldsList():this.delayApiCall((function(){return e.openFieldsList()}))},i.prototype.closeFieldsList=function(){var e=this;this.isCreationComplete?this.view_.closeFieldsList():this.delayApiCall((function(){return e.closeFieldsList()}))},i.prototype.customizeCell=function(e){t._view.grid.vo.GridCell.customizeCellFunction=e,this.isCreationComplete&&this.refresh()},i.BUILD_VERSION="Version 1.3.2",i.BUILD_DATE="97315539787203",i}();t.Pivot=i;var n=function(){function e(){}return e.PRINT="print",e.PRINT_COMPLETE="printcomplete",e.EXPORT="export",e.EXPORT_COMPLETE="exportcomplete",e}();t.PivotEvent=n}(n||(n={})),this.PivotApi=function(e){var t={version:n.Pivot.BUILD_VERSION},i=new n.Pivot(e,t);if(t.getAllConditions=function(){return i.getAllConditions()},t.getCondition=function(e){return i.getCondition(e)},t.addCondition=function(e){return i.addCondition(e)},t.removeCondition=function(e){return i.removeCondition(e)},t.removeAllConditions=function(){return i.removeAllConditions()},t.open=function(){return i.open()},t.load=function(e){return i.load(e)},t.getReport=function(e){return i.getReport(e)},t.setReport=function(e){return i.setReport(e)},t.getData=function(e,t,r){return i.getData(e,t,r)},t.save=function(e,t,r,n,o){return void 0===e&&(e={filename:"report.json"}),void 0===t&&(t=null),void 0===r&&(r=null),void 0===n&&(n=null),void 0===o&&(o=!1),i.save(e,t,r,n,o)},t.updateData=function(e,t){return i.updateData(e,t)},t.connectTo=function(e){return i.connectTo(e)},t.addCalculatedMeasure=function(e){return i.addCalculatedMeasure(e)},t.removeCalculatedMeasure=function(e){return i.removeCalculatedMeasure(e)},t.removeAllCalculatedMeasures=function(){return i.removeAllCalculatedMeasures()},t.clear=function(){return i.clear()},t.dispose=function(){i.dispose()},t.refresh=function(){return i.refresh()},t.expandAllData=function(e){return void 0===e&&(e=!0),i.expandAllData(e)},t.expandData=function(e){return i.expandData(e)},t.collapseAllData=function(){return i.collapseAllData()},t.collapseData=function(e){return i.collapseData(e)},t.print=function(e){return void 0===e&&(e=null),i.print(e)},t.exportTo=function(e,t,r){return void 0===t&&(t=null),void 0===r&&(r=null),i.exportTo(e,t,r)},t.getFilter=function(e){return i.getFilter(e)},t.getFilterProperties=function(e){return i.getFilterProperties(e)},t.setFilter=function(e,t,r){return void 0===r&&(r=!1),i.setFilter(e,t,r)},t.clearFilter=function(e){return i.clearFilter(e)},t.runQuery=function(e){return i.runQuery(e)},t.on=function(e,t){return i.on(e,t)},t.off=function(e,t){return i.off(e,t)},t.getRows=function(){return i.getRows()},t.getColumns=function(){return i.getColumns()},t.getReportFilters=function(){return i.getPages()},t.getMeasures=function(){return i.getMeasures()},t.getAllMeasures=function(){return i.getAllMeasures()},t.sortValues=function(e,t,r,n){return i.sortValues(e,t,r,n)},t.setSort=function(e,t){return i.setSort(e,t)},t.getSort=function(e){return i.getSort(e)},t.setTopX=function(e,t,r){return i.setTopX(e,t,r)},t.setBottomX=function(e,t,r){return i.setBottomX(e,t,r)},t.getOptions=function(){return i.getOptions()},t.setOptions=function(e){return i.setOptions(e)},t.getMembers=function(e,t,r){return i.getMembers(e,t,r)},t.getAllHierarchies=function(){return i.getAllHierarchies()},t.replaceHierarchyCaption=function(e){return i.replaceHierarchyCaption(e)},t.getFormat=function(e){return i.getFormat(e)},t.setFormat=function(e,t){return i.setFormat(e,t)},t.getCell=function(e,t){return i.getCell(e,t)},t.getSelectedCell=function(){return i.getSelectedCell()},t.setSelectedCell=function(e,t){return i.setSelectedCell(e,t)},t.removeSelection=function(){return i.removeSelection()},t.openFieldsList=function(){return i.openFieldsList()},t.closeFieldsList=function(){return i.closeFieldsList()},t.customizeCell=function(e){return i.customizeCell(e)},void 0!==window.WebDataRocksHighcharts)for(var r in t.highcharts={instance:t},window.WebDataRocksHighcharts)t.highcharts[r]=window.WebDataRocksHighcharts[r];if(void 0!==window.WebDataRocksFusioncharts)for(r in t.fusioncharts={instance:t},window.WebDataRocksFusioncharts)t.fusioncharts[r]=window.WebDataRocksFusioncharts[r];if(void 0!==window.WebDataRocksGooglecharts)for(r in t.googlecharts={instance:t},window.WebDataRocksGooglecharts)t.googlecharts[r]=window.WebDataRocksGooglecharts[r];if(void 0!==window.WebDataRocksAmcharts)for(r in t.amcharts={instance:t},window.WebDataRocksAmcharts)t.amcharts[r]=window.WebDataRocksAmcharts[r];return window.webdatarocks=t},this.PivotApi(e)}})),(WebDataRocksToolbar=function(e,t,i,r,n){this.pivot=t,this.pivotContainer=e,this.width="number"==typeof r||0>r.indexOf("px")&&0>r.indexOf("%")?r+"px":r,this.Labels=n}).prototype.getTabs=function(){var e=[],t=this.Labels;return e.push({title:t.connect,id:"wdr-tab-connect",icon:this.icons.connect,menu:[{title:t.connect_local_csv,id:"wdr-tab-connect-local-csv",handler:this.connectLocalCSVHandler,mobile:!1,icon:this.icons.connect_csv},{title:t.connect_local_json,id:"wdr-tab-connect-local-json",handler:this.connectLocalJSONHandler,mobile:!1,icon:this.icons.connect_json},{title:this.osUtils.isMobile?t.connect_remote_csv_mobile:t.connect_remote_csv,id:"wdr-tab-connect-remote-csv",handler:this.connectRemoteCSV,icon:this.icons.connect_csv},{title:this.osUtils.isMobile?t.connect_remote_json_mobile:t.connect_remote_json,id:"wdr-tab-connect-remote-json",handler:this.connectRemoteJSON,icon:this.icons.connect_json}]}),e.push({title:t.open,id:"wdr-tab-open",icon:this.icons.open,menu:[{title:t.local_report,id:"wdr-tab-open-local-report",handler:this.openLocalReport,mobile:!1,icon:this.icons.open_local},{title:this.osUtils.isMobile?t.remote_report_mobile:t.remote_report,id:"wdr-tab-open-remote-report",handler:this.openRemoteReport,icon:this.icons.open_remote}]}),e.push({title:t.save,id:"wdr-tab-save",handler:this.saveHandler,mobile:!1,icon:this.icons.save}),e.push({title:t.export,id:"wdr-tab-export",mobile:!1,icon:this.icons.export,menu:[{title:t.export_print,id:"wdr-tab-export-print",handler:this.printHandler,icon:this.icons.export_print},{title:t.export_html,id:"wdr-tab-export-html",handler:this.exportHandler,args:"html",icon:this.icons.export_html},{title:t.export_excel,id:"wdr-tab-export-excel",handler:this.exportHandler,args:"excel",icon:this.icons.export_excel},{title:t.export_pdf,id:"wdr-tab-export-pdf",handler:this.exportHandler,args:"pdf",icon:this.icons.export_pdf}]}),e.push({title:t.format,id:"wdr-tab-format",icon:this.icons.format,rightGroup:!0,menu:[{title:this.osUtils.isMobile?t.format_cells_mobile:t.format_cells,id:"wdr-tab-format-cells",handler:this.formatCellsHandler,icon:this.icons.format_number},{title:this.osUtils.isMobile?t.conditional_formatting_mobile:t.conditional_formatting,id:"wdr-tab-format-conditional",handler:this.conditionalFormattingHandler,icon:this.icons.format_conditional}]}),e.push({title:t.options,id:"wdr-tab-options",handler:this.optionsHandler,icon:this.icons.options,rightGroup:!0}),e.push({title:t.fields,id:"wdr-tab-fields",handler:this.fieldsHandler,icon:this.icons.fields,rightGroup:!0}),null!=document.addEventListener&&e.push({title:t.fullscreen,id:"wdr-tab-fullscreen",handler:this.fullscreenHandler,mobile:!1,icon:this.icons.fullscreen,rightGroup:!0}),e},WebDataRocksToolbar.prototype.create=function(){this.popupManager=new WebDataRocksToolbar.PopupManager(this),this.dataProvider=this.getTabs(),this.init()},WebDataRocksToolbar.prototype.applyToolbarLayoutClasses=function(){if(!this.osUtils.isMobile){var e=this,t=function(){if(e.toolbarWrapper){var t=e.toolbarWrapper.getBoundingClientRect().width;e.toolbarWrapper.classList.remove("wdr-layout-500"),e.toolbarWrapper.classList.remove("wdr-layout-360"),e.toolbarWrapper.classList.remove("wdr-layout-300"),500>t&&e.toolbarWrapper.classList.add("wdr-layout-500"),360>t&&e.toolbarWrapper.classList.add("wdr-layout-360"),300>t&&e.toolbarWrapper.classList.add("wdr-layout-300")}};t(),window.addEventListener("resize",t)}},WebDataRocksToolbar.prototype.init=function(){this.container=this.pivotContainer,this.container.style.position=""==this.container.style.position?"relative":this.container.style.position,this.toolbarWrapper=document.createElement("div"),this.toolbarWrapper.id="wdr-toolbar-wrapper",this.toolbarWrapper.style.width=this.width,this.osUtils.isMobile&&this.addClass(this.toolbarWrapper,"wdr-mobile"),this.addClass(this.toolbarWrapper,"wdr-toolbar-ui"),this.toolbarWrapper.style.width=this.width;var e=document.createElement("ul");e.id="wdr-toolbar";var t=document.createElement("div");t.classList.add("wdr-toolbar-group-right"),e.appendChild(t);for(var i=0;i<this.dataProvider.length;i++)if(!this.isDisabled(this.dataProvider[i]))if(this.osUtils.isMobile&&null!=this.dataProvider[i].menu&&1!=this.dataProvider[i].collapse)for(var r=0;r<this.dataProvider[i].menu.length;r++)this.isDisabled(this.dataProvider[i].menu[r])||e.appendChild(this.createTab(this.dataProvider[i].menu[r]));else r=this.dataProvider[i].divider?this.createDivider(this.dataProvider[i]):this.createTab(this.dataProvider[i]),t&&this.dataProvider[i].rightGroup?t.appendChild(r):e.appendChild(r);this.toolbarWrapper.appendChild(e),this.container.insertBefore(this.toolbarWrapper,this.container.firstChild),this.updateLabels(this.Labels),this.applyToolbarLayoutClasses()},WebDataRocksToolbar.prototype.updateLabels=function(e){e=this.Labels=e,this.setText(document.querySelector("#wdr-tab-connect > a > span"),e.connect),this.setText(document.querySelector("#wdr-tab-connect-local-csv > a > span"),e.connect_local_csv),this.setText(document.querySelector("#wdr-tab-connect-local-json > a > span"),e.connect_local_json),this.setText(document.querySelector("#wdr-tab-connect-remote-csv > a > span"),this.osUtils.isMobile?e.connect_remote_csv_mobile:e.connect_remote_csv),this.setText(document.querySelector("#wdr-tab-open > a > span"),e.open),this.setText(document.querySelector("#wdr-tab-open-local-report > a > span"),e.local_report),this.setText(document.querySelector("#wdr-tab-open-remote-report > a > span"),this.osUtils.isMobile?e.remote_report_mobile:e.remote_report),this.setText(document.querySelector("#wdr-tab-save > a > span"),e.save),this.setText(document.querySelector("#wdr-tab-format > a > span"),e.format),this.setText(document.querySelector("#wdr-tab-format-cells > a > span"),this.osUtils.isMobile?e.format_cells_mobile:e.format_cells),this.setText(document.querySelector("#wdr-tab-format-conditional > a > span"),this.osUtils.isMobile?e.conditional_formatting_mobile:e.conditional_formatting),this.setText(document.querySelector("#wdr-tab-options > a > span"),e.options),this.setText(document.querySelector("#wdr-tab-fullscreen > a > span"),e.fullscreen),this.setText(document.querySelector("#wdr-tab-export > a > span"),e.export),this.setText(document.querySelector("#wdr-tab-export-print > a > span"),e.export_print),this.setText(document.querySelector("#wdr-tab-export-html > a > span"),e.export_html),this.setText(document.querySelector("#wdr-tab-export-excel > a > span"),e.export_excel),this.setText(document.querySelector("#wdr-tab-export-pdf > a > span"),e.export_pdf),this.setText(document.querySelector("#wdr-tab-fields > a > span"),e.fields)},WebDataRocksToolbar.prototype.icons={connect:'<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="-305.5 396.5 36 36"><title>menu_connect</title><path fill="#555" d="M-274.5 425.409s-.988.277-1.422.761l-3.536-1.783c.189-.509.258-1.066.07-1.572l3.719-1.76a2.36 2.36 0 0 0 3.317.147 2.341 2.341 0 0 0 .157-3.3 2.335 2.335 0 0 0-4.055 1.582c-.009.122-.008.237.001.358l-3.896 1.884a2.281 2.281 0 0 0-1.359-.451 2.338 2.338 0 0 0-2.177 2.481 2.33 2.33 0 0 0 2.177 2.179c.491 0 .967-.156 1.359-.451l3.921 1.892a2.317 2.317 0 0 0 1.981 2.604 2.316 2.316 0 0 0 2.604-1.981c.171-1.269-1-2.432-2.262-2.603a8.794 8.794 0 0 0-.6-.026v.039zM-301.592 413.883c-.008.105-.908.222.092.326v6.836c0 2.587 5.827 5.455 13.177 5.455h1.081c-1.146-3 .303-6.854 3.299-8.155-1.448.172-2.868.069-4.334.069-7.056.009-12.775-2.093-13.315-4.531z"/><path fill="#555" d="M-288.5 416.217c7.377 0 13-2.097 13-4.683v-6.853c0-2.586-5.647-4.682-13-4.682-7.352 0-13 2.104-13 4.69v6.853c0 2.586 5.648 4.675 13 4.675zm.177-15.268c5.903 0 10.691 1.661 10.691 3.741s-4.796 3.741-10.691 3.741c-5.894 0-10.683-1.67-10.683-3.741 0-2.072 4.79-3.741 10.683-3.741z"/></svg>',connect_csv:'<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36"><path d="M11 24l6 0V27h-6V24z"/><path d="M12.8 22L12.8 22l1.2-2.5L15.1 22h1.9l-2-3.9L16.9 14h-1.8l-1 2.5L12.9 14h-1.8l1.9 3.9L11 22H12.8z"/><path d="M19 19h6v3h-6V19z"/><path d="M19 14h6v3L19 17V14z"/><path d="M19 24h6v3h-6V24z"/><path d="M23 4H7v28h22V11L23 4zM8 31V5h14v7h6v19H8L8 31z"/></svg>',connect_json:'<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36"><path d="M23 4H7v28h22V11L23 4zM8 31V5h14v7h6v19H8L8 31z"/><path d="M19 24c0 0.6-0.4 1-1 1 -0.6 0-1-0.4-1-1v-2c0-0.6 0.4-1 1-1 0.6 0 1 0.4 1 1V24zM21 18v-2c0-0.6-0.4 0-1 0 -0.6 0-1-0.4-1-1 0-0.6 0.4-1 1-1 1.7 0 3 0.3 3 2v2c0 1.1 0.9 2 2 2 0.6 0 1 0.4 1 1 0 0.6-0.4 1-1 1 -1.1 0-2 0.9-2 2v2c0 1.7-1.3 2-3 2 -0.6 0-1-0.4-1-1s0.4-1 1-1c0.6 0 1 0.6 1 0v-2c0-1.2 0.5-2.3 1.4-3C21.5 20.3 21 19.2 21 18zM11 20c1.1 0 2-0.9 2-2v-2c0-1.7 1.3-2 3-2 0.6 0 1 0.4 1 1 0 0.6-0.4 1-1 1 -0.6 0-1-0.6-1 0v2c0 1.2-0.5 2.3-1.4 3 0.8 0.7 1.4 1.8 1.4 3v2c0 0.6 0.4 0 1 0 0.6 0 1 0.4 1 1s-0.4 1-1 1c-1.7 0-3-0.3-3-2v-2c0-1.1-0.9-2-2-2 -0.6 0-1-0.4-1-1C10 20.4 10.4 20 11 20z"/><path d="M18 17c0.6 0 1 0.4 1 1s-0.4 1-1 1 -1-0.4-1-1S17.4 17 18 17z"/></svg>',open:'<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="-305.5 396.5 36 36"><title>menu_open</title><path fill="#555" d="M-279.351 408.5h8.976c.064 0 .126-.067.167-.025.021.052.021.055 0 .107l-2.053 20.701c-.01.117-.104.217-.219.217h-30.102c-.116 0-.21-.104-.221-.22l-1.989-16.009c-.022-.041-.022.124 0 .083.042-.054.115.146.178.146h21.198c.87 0 1.665-.726 2.053-1.499l1.812-3.446a.414.414 0 0 1 .2-.055zm-4.052 2.473c.084-.011.162-.052.194-.126l1.813-3.288c.408-.754 1.196-1.059 2.054-1.059h7.842v-2.637c0-1.102-.83-2.166-1.929-2.25-.053 0-.183-.113-.235-.113h-18.328c-.104 0-.188.006-.241-.09.01-1.1-.858-1.91-1.958-1.91h-6.902c-1.226 0-2.406.864-2.406 2.089v9.426l20.096-.042z"/></svg>',open_local:'<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36"><style>.a{fill:none;}</style><path d="M30.9 10.6C30.8 10.4 30.2 10 30 10h-1V8c0-0.4-0.6-1-1-1H15l-1-2H8C7.6 5 7 5.6 7 6v4H6c-0.2 0-0.8 0.4-0.9 0.6 -0.1 0.1-0.2 0.3-0.1 0.5l2.1 19.5C7.2 30.8 7.7 31 8 31h20c0.3 0 0.8-0.2 0.9-0.5l2.1-19.5C31 10.9 31 10.7 30.9 10.6zM28 30H8L6 11h24L28 30z"/><line x1="11" y1="23" x2="11" y2="23" class="a"/><line x1="25" y1="23" x2="25" y2="23" class="a"/><polygon points="11 15 11 23 17 23 17 25 14 25 14 26 22 26 22 25 19 25 19 23 25 23 25 15 "/></svg>',open_remote:'<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36"><path d="M30.9 10.6C30.8 10.4 30.2 10 30 10h-1V8c0-0.4-0.6-1-1-1H15l-1-2H8C7.6 5 7 5.6 7 6v4H6c-0.2 0-0.8 0.4-0.9 0.6 -0.1 0.1-0.2 0.3-0.1 0.5l2.1 19.5C7.2 30.8 7.7 31 8 31h20c0.3 0 0.8-0.2 0.9-0.5l2.1-19.5C31 10.9 31 10.7 30.9 10.6zM28 30H8L6 11h24L28 30z"/><path d="M24.8 18.1l-0.8 1.5c-0.2 0.2-0.5 0.2-0.8 0 -1.3-1.2-3.2-1.9-5.3-1.9 -2.1 0-4 0.7-5.3 1.9 -0.2 0.2-0.5 0.2-0.8 0l-0.8-1.5c-0.1-0.1-0.2-0.2-0.2-0.3 0-0.1 0.1-0.2 0.2-0.3 1.7-1.5 4.1-2.5 6.8-2.5 2.7 0 5.1 0.9 6.8 2.5 0.1 0 0.2 0.2 0.2 0.3C25 17.9 24.9 18 24.8 18.1zM18 19.6c1.5 0 2.8 0.5 3.8 1.4 0.2 0.2 0.2 0.5 0 0.7l-0.8 1.5c-0.2 0.2-0.5 0.2-0.8 0 -0.6-0.5-1.4-0.8-2.3-0.8 -0.9 0-1.7 0.3-2.3 0.8 -0.2 0.2-0.5 0.2-0.8 0l-0.8-1.5c-0.2-0.2-0.2-0.5 0-0.7C15.2 20.1 16.5 19.6 18 19.6zM18 23.4c0.8 0 1.4 0.6 1.4 1.3 0 0.7-0.6 1.3-1.4 1.3 -0.8 0-1.4-0.6-1.4-1.3C16.6 24 17.2 23.4 18 23.4z"/></svg>',save:'<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="-17.5 774.5 36 36"><title>menu_save</title><g fill="#555"><path d="M15.191 783.284l-5.457-5.467a1.101 1.101 0 0 0-.781-.317h-.835c-.2 0-.618.163-.618.363v8.889c0 .618-.245.748-.853.748H-5.638c-.617 0-.862-.14-.862-.748v-8.889c0-.2-.409-.363-.609-.363h-6.283c-.618 0-1.108.499-1.108 1.107v27.785c0 .617.5 1.107 1.108 1.107h27.784c.618 0 1.108-.499 1.108-1.107v-22.337c0-.29-.109-.562-.309-.771zM8.98 801.463c0 .618-.499 1.037-1.107 1.037H-6.873c-.617 0-.627-.357-.627-.966v-8.626c0-.617.019-1.408.627-1.408H7.882c.618 0 1.108.613 1.108 1.223l-.01 8.74z"/><path d="M-4.167 784.5h9.361c.2 0 .306.228.306.028v-6.665c0-.2-.106-.363-.306-.363h-9.361c-.2 0-.333.163-.333.363v6.665c0 .191.124-.028.333-.028zm5.667-4.294c0-.618.392-1.108 1-1.108.618 0 1 .5 1 1.108v1.97c0 .618-.392 1.108-1 1.108-.618 0-1-.5-1-1.108v-1.97zM4.168 796.5h-7.31c-.617 0-1.108.393-1.108 1s.5 1 1.108 1h7.31c.617 0 1.107-.393 1.107-1s-.498-1-1.107-1z"/></g></svg>',export:'<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="-17.5 774.5 36 36"><title>menu_export</title><g fill="#555"><path d="M15.446 795.615l-4.289-6.461c-.346-.515-.803-.654-1.428-.654H7.788c-.186 0-.346-.029-.363.156-.008.076.017.07.059.137l4.76 7.108c.042.06.034.337-.017.38-.025.025-.067.219-.102.219H6.699c-.194 0-.354-.063-.363.125-.305 3.23-3.174 5.495-6.407 5.192-2.81-.263-5.039-2.329-5.3-5.14-.009-.195-.168-.178-.363-.178h-5.401c-.076 0-.144-.281-.144-.357 0-.025.008-.157.017-.175l4.76-7.203c.102-.16.05-.245-.109-.347-.06-.035-.118.082-.187.082h-1.94c-.616 0-1.199.145-1.553.658l-4.664 6.547c-.203.304-.545.586-.545.95v9.216c1 .911 1.267 1.646 2.187 1.629h27.625c.903.009 1.188-.709 1.188-1.611v-9.233c1-.373.157-.735-.054-1.04z"/><path d="M-3.674 783.5H-2.5v10.2c1 1.4 1.764 2.464 3.165 2.371 1.274-.083 1.835-1.097 2.835-2.371v-10.2h1.207c.346 0 .641-.04.65-.387.008-.151-.042-.193-.144-.311l-4.186-5.11c-.228-.287-.642-.302-.929-.073-.042.034-.076.081-.101.115l-4.135 5.172c-.22.271-.187.447.084.668.11.085.244-.074.38-.074z"/></g></svg>',export_print:'<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="-17.5 774.5 36 36"><title>dd_save_print</title><path fill="#555" d="M-5.5 798.685v3.815h11v-7h-11v3.185zm2-1.185h7v1h-7v-1zm0 2h7v1h-7v-1zM5.5 786.308V782.5h-11v7h11z"/><path fill="#555" d="M8.94 786.5H7.5v4h-14v-4h-1.44c-1.493 0-2.56 1.064-2.56 2.558v6.87c0 1.493 1.067 2.572 2.56 2.572h1.44v-4h14v4h1.44c1.493 0 2.56-1.064 2.56-2.557v-6.878c0-1.501-1.074-2.565-2.56-2.565z"/></svg>',export_excel:'<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36"><path d="M24.4 15h-3.8L18 18.6 15.3 15h-3.8l4.5 5.2L11 27h7.3L18 25h-2l2-3L21.1 27H25l-5.1-6.8L24.4 15z"/><path d="M23 4H7v28h22V11L23 4zM8 31V5h14v7h6v19H8L8 31z"/></svg>',export_html:'<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36"><path d="M25.7 20.8l-2.3-2.5c-0.2-0.2-0.4-0.3-0.6-0.3 -0.2 0-0.4 0.1-0.6 0.3 -0.3 0.4-0.3 1 0 1.4l1.7 1.9 -1.7 1.9c-0.2 0.2-0.3 0.4-0.3 0.7 0 0.3 0.1 0.5 0.3 0.7 0.2 0.2 0.4 0.3 0.6 0.3 0.2 0 0.4-0.1 0.6-0.3l2.3-2.5C26.1 21.8 26.1 21.2 25.7 20.8z"/><path d="M14 24c0-0.3-0.1-0.5-0.3-0.7l-1.7-1.9 1.7-1.9c0.3-0.4 0.3-1 0-1.4 -0.2-0.2-0.4-0.3-0.6-0.3 -0.2 0-0.4 0.1-0.6 0.3l-2.3 2.5c-0.3 0.4-0.3 1 0 1.4l2.3 2.5c0.2 0.2 0.4 0.3 0.6 0.3 0.2 0 0.4-0.1 0.6-0.3C13.9 24.5 14 24.3 14 24z"/><path d="M20.4 15.1c-0.1 0-0.2-0.1-0.3-0.1 -0.4 0-0.8 0.3-0.9 0.6l-4.1 11.1c-0.1 0.2-0.1 0.5 0 0.7 0.1 0.2 0.3 0.4 0.5 0.5C15.7 28 15.8 28 16 28c0.4 0 0.8-0.3 0.9-0.6l4.1-11.1C21.1 15.8 20.9 15.2 20.4 15.1z"/><path d="M23 4H7v28h22V11L23 4zM8 31V5h14v7h6v19H8L8 31z"/></svg>',export_pdf:'<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36"><path d="M17.2 17.1L17.2 17.1C17.3 17.1 17.3 17.1 17.2 17.1c0.1-0.5 0.2-0.7 0.2-1V15.8c0.1-0.6 0.1-1 0-1.1 0 0 0 0 0-0.1l-0.1-0.1 0 0 0 0c0 0 0 0.1-0.1 0.1C16.9 15.2 16.9 16 17.2 17.1L17.2 17.1zM13.8 24.8c-0.2 0.1-0.4 0.2-0.6 0.3 -0.8 0.7-1.3 1.5-1.5 1.8l0 0 0 0 0 0C12.5 26.9 13.1 26.2 13.8 24.8 13.9 24.8 13.9 24.8 13.8 24.8 13.9 24.8 13.8 24.8 13.8 24.8zM24.1 23.1c-0.1-0.1-0.6-0.5-2.1-0.5 -0.1 0-0.1 0-0.2 0l0 0c0 0 0 0 0 0.1 0.8 0.3 1.6 0.6 2.1 0.6 0.1 0 0.1 0 0.2 0l0 0h0.1c0 0 0 0 0-0.1l0 0C24.2 23.3 24.1 23.3 24.1 23.1zM24.6 24c-0.2 0.1-0.6 0.2-1 0.2 -0.9 0-2.2-0.2-3.4-0.8 -1.9 0.2-3.4 0.5-4.5 0.9 -0.1 0-0.1 0-0.2 0.1 -1.3 2.4-2.5 3.5-3.4 3.5 -0.2 0-0.3 0-0.4-0.1l-0.6-0.3v-0.1c-0.1-0.2-0.1-0.3-0.1-0.6 0.1-0.6 0.8-1.6 2.1-2.4 0.2-0.1 0.6-0.3 1-0.6 0.3-0.6 0.7-1.2 1.1-2 0.6-1.1 0.9-2.3 1.2-3.3l0 0c-0.4-1.4-0.7-2.1-0.2-3.7 0.1-0.5 0.4-0.9 0.9-0.9h0.2c0.2 0 0.4 0.1 0.7 0.2 0.8 0.8 0.4 2.6 0 4.1 0 0.1 0 0.1 0 0.1 0.4 1.2 1.1 2.3 1.8 2.9 0.3 0.2 0.6 0.5 1 0.7 0.6 0 1-0.1 1.5-0.1 1.3 0 2.2 0.2 2.6 0.8 0.1 0.2 0.1 0.5 0.1 0.7C24.9 23.5 24.8 23.8 24.6 24zM17.3 19.6c-0.2 0.8-0.7 1.7-1.1 2.7 -0.2 0.5-0.4 0.8-0.7 1.2h0.1 0.1l0 0c1.5-0.6 2.8-0.9 3.7-1 -0.2-0.1-0.3-0.2-0.4-0.3C18.4 21.6 17.7 20.7 17.3 19.6z"/><path d="M23 4H7v28h22V11L23 4zM8 31V5h14v7h6v19H8L8 31z"/></svg>',format:'<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="-17.5 774.5 36 36"><title>menu_format</title><g fill="#555"><path d="M15.144 781.92a7.62 7.62 0 0 0-4.238-4.157 4.634 4.634 0 0 0-1.201-.254.99.99 0 0 0-.906.36l-10.797 10.829c-1.462 1.462-2.916 2.908-4.37 4.378a1.347 1.347 0 0 0-.326.596c-.481 2.197-.939 4.402-1.413 6.607a.639.639 0 0 0 .792.793l6.551-1.381c.253-.049.49-.171.67-.359 5.063-5.08 10.127-10.144 15.19-15.207.237-.229.384-.548.4-.882a8.491 8.491 0 0 0-.352-1.323zm-16.825 16.652l-2.54.531a2.367 2.367 0 0 0-1.911-1.87c.18-.906.384-1.813.571-2.729a2.05 2.05 0 0 1 1.078.229 6.007 6.007 0 0 1 2.671 2.605c.139.318.245.653.311.996 0 .157 0 .157-.18.238z"/><path d="M6.568 804.5H-11.5v-18h7.761l1.83-2.118 1.593-1.882h-12.455c-.947 0-1.729 1.241-1.729 2.18v21.097c0 .947.77 1.724 1.726 1.724H8.283c.947 0 2.217-.769 2.217-1.724v-12.488l-4 3.438v7.773h.068z"/></g></svg>',format_number:'<svg xmlns="http://www.w3.org/2000/svg" width="52" height="36" viewBox="0 0 52 36"><path d="M31 19.2v-3.4l2.5-0.4c0.2-0.7 0.5-1.4 0.9-2.1l-1.4-2 2.4-2.4 2 1.4c0.7-0.4 1.4-0.7 2.1-0.9l0.4-2.5h3.4l0.4 2.5c0.7 0.2 1.4 0.5 2.1 0.9l2-1.4 2.4 2.4 -1.4 2c0.4 0.7 0.7 1.4 0.9 2.1L52 15.8v3.4l-2.5 0.4c-0.2 0.7-0.5 1.4-0.9 2.1l1.4 2 -2.4 2.4 -2-1.5c-0.7 0.4-1.4 0.7-2.1 0.9l-0.4 2.5h-3.4l-0.4-2.5c-0.7-0.2-1.4-0.5-2.1-0.9l-2 1.5 -2.4-2.4 1.4-2c-0.4-0.7-0.7-1.4-0.9-2.1L31 19.2zM41.5 21c1.9 0 3.5-1.6 3.5-3.5 0-1.9-1.6-3.5-3.5-3.5 -1.9 0-3.5 1.6-3.5 3.5C38 19.4 39.6 21 41.5 21z"/><path d="M38 30H1V6h36V5H0v26h38V30L38 30z"/><path d="M9.4 21.1c-0.3 0.3-0.7 0.4-1.2 0.4 -0.5 0-0.9-0.2-1.2-0.5s-0.4-0.8-0.4-1.4H5c0 0.9 0.2 1.7 0.7 2.2 0.5 0.6 1.2 0.9 2 1v1.3h1.1v-1.4c0.8-0.1 1.5-0.4 1.9-0.9 0.5-0.5 0.7-1.1 0.7-1.9 0-0.4-0.1-0.8-0.2-1.1 -0.1-0.3-0.3-0.6-0.5-0.8 -0.2-0.2-0.5-0.4-0.8-0.6 -0.3-0.2-0.8-0.4-1.4-0.6 -0.6-0.2-1-0.4-1.2-0.7s-0.4-0.6-0.4-1c0-0.4 0.1-0.8 0.4-1 0.2-0.2 0.6-0.4 1-0.4 0.4 0 0.8 0.2 1 0.5 0.3 0.3 0.4 0.8 0.4 1.4h1.6c0-0.9-0.2-1.6-0.6-2.2 -0.4-0.6-1-0.9-1.8-1v-1.5H7.9v1.5C7.1 12.6 6.5 12.9 6 13.4s-0.7 1.1-0.7 1.9c0 1.1 0.5 2 1.6 2.6 0.3 0.2 0.8 0.4 1.3 0.6 0.6 0.2 1 0.4 1.2 0.7s0.4 0.6 0.4 1C9.8 20.5 9.7 20.8 9.4 21.1z"/><path d="M16.3 12.6h-0.2l-3.8 1.5v1.4l2.4-0.8v8.1h1.6V12.6z"/><path d="M19.9 23.8c0.2-0.5 0.4-1 0.4-1.5l0-1.2h-1.5v1.3c0 0.3-0.1 0.6-0.2 1 -0.1 0.3-0.3 0.7-0.5 1.1l0.9 0.5C19.3 24.7 19.6 24.3 19.9 23.8z"/><path d="M27 16.7c0-1.4-0.3-2.5-0.8-3.2s-1.3-1.1-2.4-1.1c-1.1 0-1.9 0.4-2.4 1.1 -0.5 0.7-0.8 1.8-0.8 3.3v1.8c0 1.4 0.3 2.5 0.8 3.2s1.3 1.1 2.4 1.1c1.1 0 1.9-0.4 2.4-1.1 0.5-0.7 0.8-1.8 0.8-3.3V16.7zM25.4 18.9c0 0.9-0.1 1.6-0.4 2 -0.2 0.4-0.6 0.6-1.2 0.6 -0.5 0-0.9-0.2-1.2-0.7 -0.3-0.5-0.4-1.2-0.4-2.1v-2.3c0-0.9 0.1-1.5 0.4-2 0.3-0.4 0.6-0.6 1.2-0.6 0.5 0 0.9 0.2 1.2 0.7 0.3 0.4 0.4 1.1 0.4 2.1V18.9z"/></svg>',format_conditional:'<svg xmlns="http://www.w3.org/2000/svg" width="52" height="36" viewBox="0 0 52 36"><polygon points="38 5 0 5 0 31 26 31 26 30 1 30 1 6 37 6 37 10 38 10 "/><path d="M9 13H8.6L5 14.4v1.4l2-0.8V23h2V13z"/><path d="M17 22h-4l2.4-2.9c0.6-0.7 1-1.3 1.3-1.8 0.3-0.5 0.4-1.1 0.4-1.5 0-0.8-0.3-1.5-0.8-2 -0.5-0.5-1.2-0.7-2.2-0.7 -0.6 0-1.2 0.1-1.7 0.4s-0.9 0.6-1.1 1C11.1 14.9 11 16 11 16h1.6c0 0 0.1-0.9 0.4-1.3s0.7-0.4 1.2-0.4c0.4 0 0.8 0.2 1 0.5 0.3 0.3 0.4 0.7 0.4 1.1 0 0.4-0.1 0.7-0.3 1.1 -0.2 0.4-0.6 0.8-1.1 1.3L11 21.9V23h6V22z"/><path d="M21 19h0.8c0.6 0 1-0.1 1.3 0.2 0.3 0.3 0.4 0.6 0.4 1.1 0 0.5-0.1 0.8-0.4 1.1 -0.3 0.3-0.6 0.4-1.1 0.4 -0.5 0-0.8-0.3-1.1-0.5C20.6 20.9 20.5 21 20.5 20h-1.5c0 1 0.3 1.6 0.8 2.1s1.3 0.8 2.1 0.8c0.9 0 1.6-0.2 2.2-0.7 0.6-0.5 0.8-1.2 0.8-2.1 0-0.5-0.1-1-0.4-1.4 -0.3-0.4-0.6-0.7-1.1-0.9 0.4-0.2 0.7-0.5 1-0.9 0.3-0.4 0.4-0.8 0.4-1.2 0-0.9-0.3-1.5-0.8-2 -0.5-0.5-1.2-0.7-2.1-0.7 -0.5 0-1 0.1-1.5 0.3 -0.4 0.2-0.8 0.7-1 1.1S19.1 15 19.1 16h1.5c0-1 0.1-0.9 0.4-1.1 0.3-0.3 0.6-0.5 1-0.5 0.5 0 0.8 0.1 1 0.3s0.3 0.6 0.3 1.1c0 0.5-0.1 0.7-0.4 1C22.7 17 22.3 17 21.9 17H21V19z"/><path d="M47.8 7C50.1 7 52 8.9 52 11.2c0 1-0.3 1.8-0.8 2.5l-1.7 1.7L43.6 9.5l1.7-1.7C46 7.3 46.8 7 47.8 7zM30.7 22.4L29 30l7.6-1.7 11.6-11.6 -5.9-5.9L30.7 22.4zM42 17.9l-5.1 5.1 -0.9-0.9 5.1-5L42 17.9z"/></svg>',options:'<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="-17.5 774.5 36 36"><title>menu_options</title><path fill="#555" d="M11.363 789.058l-.76-1.838a33.692 33.692 0 0 0 1.601-4.223l-2.327-2.328a31.444 31.444 0 0 0-4.142 1.691l-1.829-.76a32.88 32.88 0 0 0-1.83-4.101h-3.291a32.106 32.106 0 0 0-1.731 4.133l-1.83.76a33.556 33.556 0 0 0-4.206-1.609l-2.328 2.32a31.563 31.563 0 0 0 1.69 4.141l-.759 1.838a34.366 34.366 0 0 0-4.117 1.838v3.3a32.519 32.519 0 0 0 4.117 1.731l.759 1.829a33.633 33.633 0 0 0-1.608 4.223l2.327 2.328a32.986 32.986 0 0 0 4.133-1.699l1.83.76a31.481 31.481 0 0 0 1.862 4.108h3.291a32.194 32.194 0 0 0 1.732-4.133l1.837-.76a33.57 33.57 0 0 0 4.207 1.609l2.327-2.328a31.481 31.481 0 0 0-1.69-4.141l.76-1.838a32.532 32.532 0 0 0 4.108-1.829v-3.3a30.142 30.142 0 0 0-4.133-1.722zM.5 799.202a6.706 6.706 0 1 1 6.706-6.706A6.71 6.71 0 0 1 .5 799.202z"/></svg>',fields:'<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="-17.5 774.5 36 36"><title>menu_fields</title><g fill="#555"><path d="M11.351 787.279c1.112.367 2.027 1.221 2.55 2.221H13.5v-10.627c0-.744-.089-1.357-.825-1.373h-26.339c-.736.008-.836.612-.836 1.349v21.656c0 .735.093.995.836.995h10.836c-.008 0 .205-1.314.629-2.025-.073-.098-.123.025-.18.025H-12.5v-6h10.563l.83-1.699c.4-.76 1.606-1.258 1.606-1.667V785.5h10.843l.009 1.779zM-1.5 791.5h-11v-6h11v6z"/><path d="M15.805 801.444l-1.602-1.308c0-.237.082-.49.082-.817a2.483 2.483 0 0 0-.082-.817l1.602-1.389a.399.399 0 0 0 .082-.49l-1.528-2.86a.364.364 0 0 0-.278-.123.678.678 0 0 0-.18 0l-1.912.866a6.95 6.95 0 0 0-1.299-.817l-.311-1.989c-.017-.195-.188-.199-.384-.199H6.93c-.147 0-.384.037-.384.199l-.311 2.053c-.458.229-.899.468-1.299.786l-1.912-.834c-.041-.008-.09-.016-.131-.008a.356.356 0 0 0-.319.192l-1.528 2.817c-.082.164-.082.408.082.489l1.749 1.308c0 .237-.082.489-.082.816a2.48 2.48 0 0 0 .082.817l-1.602 1.356a.399.399 0 0 0-.082.49l1.528 2.86a.364.364 0 0 0 .278.123.678.678 0 0 0 .18 0l1.912-.817c.4.318.842.597 1.299.817l.311 2.116a.322.322 0 0 0 .221.4c.033.008.065.017.09.017h3.065c.147 0 .384-.164.384-.327l.311-2.215c.466-.212.907-.49 1.299-.817l1.831.817a.441.441 0 0 0 .54-.163l1.528-2.86c.056-.08-.018-.326-.165-.489zm-7.306.744a2.865 2.865 0 0 1-3.064-2.664c-.114-1.585 1.079-2.95 2.664-3.064a2.867 2.867 0 0 1 3.072 2.868 2.804 2.804 0 0 1-2.672 2.86z"/></g></svg>',fullscreen:'<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="-17.5 774.5 36 36"><title>menu_fullscreen_open</title><g fill="#555"><path d="M-7.5 779.976V777.5h-7v7h3v-2.752l3.758 4.067 1.74-1.846-4.342-4.003 2.844.01zM-7.742 799.096l-3.758 4.101V800.5h-3v7h7v-2h-2.618l-.049-.371 4.124-4.054-1.699-1.979zM8.746 785.913l3.754-4.092v2.679h3v-7h-7v2h2.602l.082.381-4.126 4.041 1.688 1.991zM13.5 800.5v2.598l-.382.074-4.058-4.003-1.882 1.575 4.006 3.756H8.5v3h7v-7h-2zM-4 786.5h9c1.104 0 2.5.908 2.5 2.011v7.996c0 1.103-1.396 1.993-2.5 1.993h-9c-1.104 0-2.5-.891-2.5-1.993v-8.005c0-1.103 1.396-2.002 2.5-2.002z"/></g></svg>'},WebDataRocksToolbar.prototype.connectLocalCSVHandler=function(){this.pivot.connectTo({dataSourceType:"csv",browseForFile:!0})},WebDataRocksToolbar.prototype.connectLocalJSONHandler=function(){this.pivot.connectTo({dataSourceType:"json",browseForFile:!0})},WebDataRocksToolbar.prototype.connectRemoteCSV=function(){this.showConnectToRemoteCSVDialog()},WebDataRocksToolbar.prototype.connectRemoteJSON=function(){this.showConnectToRemoteJSONDialog()},WebDataRocksToolbar.prototype.openLocalReport=function(){this.pivot.open()},WebDataRocksToolbar.prototype.openRemoteReport=function(){this.showOpenRemoteReportDialog()},WebDataRocksToolbar.prototype.saveHandler=function(){this.pivot.save("report.json","file")},WebDataRocksToolbar.prototype.formatCellsHandler=function(){this.showFormatCellsDialog()},WebDataRocksToolbar.prototype.conditionalFormattingHandler=function(){this.showConditionalFormattingDialog()},WebDataRocksToolbar.prototype.optionsHandler=function(){this.showOptionsDialog()},WebDataRocksToolbar.prototype.fieldsHandler=function(){this.pivot.openFieldsList()},WebDataRocksToolbar.prototype.printHandler=function(){this.pivot.print()},WebDataRocksToolbar.prototype.exportHandler=function(e){"pdf"==e?this.showExportPdfDialog():this.pivot.exportTo(e)},WebDataRocksToolbar.prototype.fullscreenHandler=function(){this.toggleFullscreen()},WebDataRocksToolbar.prototype.defaults={},WebDataRocksToolbar.prototype.showConnectToRemoteCSVDialog=function(){var e=this,t=this.Labels,i=this.popupManager.createPopup();i.content.classList.add("wdr-popup-w500"),i.setTitle(t.open_remote_csv),i.setToolbar([{id:"wdr-btn-open",label:t.open,handler:function(){0<r.value.length&&e.pivot.connectTo({filename:r.value,dataSourceType:"csv"})},isPositive:!0},{id:"wdr-btn-cancel",label:t.cancel}]),t=document.createElement("div");var r=document.createElement("input");r.id="wdr-inp-file-url",r.type="text",r.value="https://cdn.webdatarocks.com/data/data.csv",t.appendChild(r),i.setContent(t),this.popupManager.addPopup(i.content)},WebDataRocksToolbar.prototype.showConnectToRemoteJSONDialog=function(){var e=this,t=this.Labels,i=this.popupManager.createPopup();i.content.classList.add("wdr-popup-w500"),i.setTitle(t.open_remote_json),i.setToolbar([{id:"wdr-btn-open",label:t.open,handler:function(){0<r.value.length&&e.pivot.connectTo({filename:r.value,dataSourceType:"json"})},isPositive:!0},{id:"wdr-btn-cancel",label:t.cancel}]),t=document.createElement("div");var r=document.createElement("input");r.id="wdr-inp-file-url",r.type="text",r.value="https://cdn.webdatarocks.com/data/data.json",t.appendChild(r),i.setContent(t),this.popupManager.addPopup(i.content)},WebDataRocksToolbar.prototype.showOpenRemoteReportDialog=function(){var e=this,t=this.Labels,i=this.popupManager.createPopup();i.content.classList.add("wdr-popup-w500"),i.setTitle(t.open_remote_report),i.setToolbar([{id:"wdr-btn-open",label:t.open,handler:function(){0<r.value.length&&e.pivot.load(r.value)},isPositive:!0},{id:"wdr-btn-cancel",label:t.cancel}]),t=document.createElement("div");var r=document.createElement("input");r.type="text";var n=e.pivot.getOptions()||{};r.value=n.grid&&"flat"==n.grid.type?"https://cdn.webdatarocks.com/reports/report-flat.json":"https://cdn.webdatarocks.com/reports/report.json",t.appendChild(r),i.setContent(t),this.popupManager.addPopup(i.content)},WebDataRocksToolbar.prototype.showFormatCellsDialog=function(){var e=this,t=this.Labels,i=function(){l.disabled=c.disabled=u.disabled=h.disabled=A.disabled=p.disabled=f.disabled=m.disabled="empty"==a.value;var t=e.pivot.getFormat(a.value);l.value="left"==t.textAlign||"right"==t.textAlign?t.textAlign:"right",c.value=t.thousandsSeparator,u.value=t.decimalSeparator,h.value=t.decimalPlaces,A.value=t.currencySymbol,p.value=t.currencySymbolAlign,f.value=t.nullValue,m.value=1==t.isPercent},r=this.popupManager.createPopup();r.content.id="wdr-popup-format-cells",r.setTitle(this.osUtils.isMobile?t.format:t.format_cells),r.setToolbar([{id:"wdr-btn-apply",label:t.apply,handler:function(){var t={};""==a.value&&(t.name=""),t.textAlign=l.value,t.thousandsSeparator=c.value,t.decimalSeparator=u.value,t.decimalPlaces=h.value,t.currencySymbol=A.value,t.currencySymbolAlign=p.value,t.nullValue=f.value,t.isPercent="true"==m.value,e.pivot.setFormat(t,""==a.value?null:a.value),e.pivot.refresh()},isPositive:!0},{id:"wdr-btn-cancel",label:t.cancel}],!0);var n=document.createElement("div"),o=document.createElement("div");o.classList.add("wdr-inp-group"),n.appendChild(o);var s=document.createElement("div");s.classList.add("wdr-inp-row"),s.classList.add("wdr-ir-horizontal"),o.appendChild(s),(d=document.createElement("label")).classList.add("wdr-uc"),e.setText(d,t.choose_value),s.appendChild(d);var a=(g=e.createSelect()).select;a.onchange=i,a.options[0]=new Option(t.choose_value,"empty"),a.options[0].disabled=!0,a.options[1]=new Option(t.all_values,""),s.appendChild(g),(s=document.createElement("div")).classList.add("wdr-inp-row"),s.classList.add("wdr-ir-horizontal"),o.appendChild(s),(o=document.createElement("div")).classList.add("wdr-inp-group"),n.appendChild(o),(s=document.createElement("div")).classList.add("wdr-inp-row"),s.classList.add("wdr-ir-horizontal"),o.appendChild(s),d=document.createElement("label"),e.setText(d,t.text_align),s.appendChild(d);var l=(g=e.createSelect()).select;l.options[0]=new Option(t.align_left,"left"),l.options[1]=new Option(t.align_right,"right"),s.appendChild(g),(s=document.createElement("div")).classList.add("wdr-inp-row"),s.classList.add("wdr-ir-horizontal"),o.appendChild(s),d=document.createElement("label"),e.setText(d,t.thousand_separator),s.appendChild(d);var c=(g=e.createSelect()).select;c.options[0]=new Option(t.none,""),c.options[1]=new Option(t.space," "),c.options[2]=new Option(",",","),c.options[3]=new Option(".","."),s.appendChild(g),(s=document.createElement("div")).classList.add("wdr-inp-row"),s.classList.add("wdr-ir-horizontal"),o.appendChild(s),d=document.createElement("label"),e.setText(d,t.decimal_separator),s.appendChild(d);var u=(g=e.createSelect()).select;u.options[0]=new Option(".","."),u.options[1]=new Option(",",","),s.appendChild(g),(s=document.createElement("div")).classList.add("wdr-inp-row"),s.classList.add("wdr-ir-horizontal"),o.appendChild(s),d=document.createElement("label"),e.setText(d,t.decimal_places),s.appendChild(d);for(var h=(g=e.createSelect()).select,d=0;11>d;d++)h.options[d]=new Option(0===d?t.none:d-1,d-1);s.appendChild(g),(s=document.createElement("div")).classList.add("wdr-inp-row"),s.classList.add("wdr-ir-horizontal"),o.appendChild(s),d=document.createElement("label"),e.setText(d,t.currency_symbol),s.appendChild(d);var A=document.createElement("input");A.classList.add("wdr-inp"),A.type="text",s.appendChild(A),(s=document.createElement("div")).classList.add("wdr-inp-row"),s.classList.add("wdr-ir-horizontal"),o.appendChild(s),d=document.createElement("label"),e.setText(d,t.currency_align),s.appendChild(d);var p=(g=e.createSelect()).select;p.options[0]=new Option(t.align_left,"left"),p.options[1]=new Option(t.align_right,"right"),s.appendChild(g),(s=document.createElement("div")).classList.add("wdr-inp-row"),s.classList.add("wdr-ir-horizontal"),o.appendChild(s),d=document.createElement("label"),e.setText(d,t.null_value),s.appendChild(d);var f=document.createElement("input");f.classList.add("wdr-inp"),f.type="text",s.appendChild(f),(s=document.createElement("div")).classList.add("wdr-inp-row"),s.classList.add("wdr-ir-horizontal"),o.appendChild(s),d=document.createElement("label"),e.setText(d,t.is_percent),s.appendChild(d);var g,m=(g=e.createSelect()).select;for(m.options[0]=new Option(t.true_value,!0),m.options[1]=new Option(t.false_value,!1),s.appendChild(g),r.setContent(n),this.popupManager.addPopup(r.content),t=e.pivot.getMeasures(),d=0;d<t.length;d++)a.options[d+2]=new Option(t[d].caption,t[d].uniqueName);i()},WebDataRocksToolbar.prototype.showConditionalFormattingDialog=function(){var e=this,t=this.Labels,i=this.pivot.getAllConditions(),r=function(e){for(var t=e.match(/\W\d+\.*\d*/g),i=[],r=!1,n="",o=0;o<e.length;o++)'"'==e[o]||"'"==e[o]?(r?i.push(n):n="",r=!r):r&&(n+=e[o]);return e=e.match(/<=|>=|<|>|=|=|!=|isNaN/g),null==t&&null==i?{}:{value1:null!=t?t[0].replace(/\s/,""):i[0],value2:null!=t&&1<t.length?t[1].replace(/\s/,""):"",sign:e?e.join(""):""}},n=this.popupManager.createPopup();n.content.id="wdr-popup-conditional",n.setTitle(this.osUtils.isMobile?t.conditional:t.conditional_formatting),n.setToolbar([{id:"wdr-btn-apply",label:t.apply,handler:function(){e.pivot.removeAllConditions();for(var t=0;t<i.length;t++){var r,n=i[t].value1,o=i[t].value2,s="",a=null==o||0==o.length,l="><"===(r=i[t].sign),c="isNaN"===r;if((null==n||0==n.length)&&!c||l&&a||(l&&!a?s="AND(#value > "+n+", #value < "+o+")":c?s="isNaN(#value)":(isNaN(parseFloat(n))&&(n="'"+n+"'"),s="#value "+r+" "+n)),null==(r=s))return;i[t].formula=r,e.pivot.addCondition(i[t])}e.pivot.refresh()},isPositive:!0},{id:"wdr-btn-cancel",label:t.cancel}],!0);var o=document.createElement("a");o.id="wdr-add-btn",o.setAttribute("href","javascript:void(0)"),o.classList.add("wdr-ui-btn"),o.classList.add("wdr-ui-btn-light"),o.classList.add("wdr-button-add"),o.onclick=function(){var t={sign:"<",value1:"0",measures:e.pivot.getMeasures(),format:{fontFamily:"Arial",fontSize:"12px",color:"#000000",backgroundColor:"#FFFFFF"}};i.push(t),s.appendChild(e.createConditionalFormattingItem(t,i)),e.popupManager.centerPopup(n.content)},o.setAttribute("title",t.add_condition),(t=document.createElement("span")).classList.add("wdr-icon"),t.classList.add("wdr-icon-act_add"),o.appendChild(t),n.toolbar.insertBefore(o,n.toolbar.firstChild);var s=document.createElement("div");for(s.classList.add("wdr-popup-content"),s.onclick=function(t){t.target.classList.contains("wdr-cr-delete")&&e.popupManager.centerPopup(n.content)},o=0;o<i.length;o++)t=r(i[o].formula),i[o].value1=t.value1,i[o].value2=t.value2,i[o].sign=t.sign,i[o].measures=e.pivot.getMeasures(),s.appendChild(e.createConditionalFormattingItem(i[o],i));n.setContent(s),this.popupManager.addPopup(n.content)},WebDataRocksToolbar.prototype.defaults.fontSizes="8px 9px 10px 11px 12px 13px 14px".split(" "),WebDataRocksToolbar.prototype.defaults.fonts="Arial;Lucida Sans Unicode;Verdana;Courier New;Palatino Linotype;Tahoma;Impact;Trebuchet MS;Georgia;Times New Roman".split(";"),WebDataRocksToolbar.prototype.defaults.conditions=[{label:"less_than",sign:"<"},{label:"less_than_or_equal",sign:"<="},{label:"greater_than",sign:">"},{label:"greater_than_or_equal",sign:">="},{label:"equal_to",sign:"="},{label:"not_equal_to",sign:"!="},{label:"between",sign:"><"},{label:"is_empty",sign:"isNaN"}],WebDataRocksToolbar.prototype.createConditionalFormattingItem=function(e,t){var i=this,r=this.Labels,n=function(){"sign"in e&&"><"===e.sign?(d.classList.remove("wdr-width120"),d.classList.add("wdr-width50"),d.style.display="inline-block",p.value="value2"in e?e.value2:"0",p.style.display="inline-block",A.style.display="inline-block"):("sign"in e&&"isNaN"===e.sign?d.style.display="none":(d.classList.add("wdr-width120"),d.classList.remove("wdr-width50"),d.style.display="inline-block"),p.style.display="none",A.style.display="none")},o=function(){var t=e.format;null!=t&&(w.style.backgroundColor=t.backgroundColor||"#fff",w.style.color=t.color||"#000",w.style.fontFamily=t.fontFamily||"Arial",w.style.fontSize=t.fontSize||"12px")},s=document.createElement("div");s.classList.add("wdr-condition-row");var a=document.createElement("div");a.classList.add("wdr-wrap-relative"),s.appendChild(a);var l=document.createElement("span");l.classList.add("wdr-cr-delete"),l.classList.add("wdr-icon"),l.classList.add("wdr-icon-act_trash"),l.onclick=function(){var i=t.indexOf(e);-1<i&&t.splice(i,1),s.parentNode.removeChild(s)},a.appendChild(l),(l=document.createElement("div")).classList.add("wdr-cr-inner"),a.appendChild(l);var c=document.createElement("div");c.classList.add("wdr-cr-lbl"),c.classList.add("wdr-width50"),i.setText(c,r.value+":"),l.appendChild(c),(c=i.createSelect()).id="wdr-values";var u=c.select;"measures"in e?(function(e,t){u[0]=new Option(r.all_values,"");for(var n=(n=i.pivot.getOptions()||{}).grid&&"flat"==n.grid.type,o=0;o<e.length;o++)n&&7==e[o].type||(u[u.options.length]=new Option(e[o].caption,e[o].uniqueName));null!=t?u.value=t:u.selectedIndex=0}(e.measures,e.measure),u.disabled=0===e.measures.length):u.disabled=!0,u.onchange=function(){e.measure=u.value},l.appendChild(c),(c=i.createSelect()).id="wdr-conditions";var h=c.select;!function(e){for(var t=0;t<i.defaults.conditions.length;t++)h[t]=new Option(r[i.defaults.conditions[t].label],i.defaults.conditions[t].sign);null!=e?h.value=e:h.selectedIndex=0}("sign"in e?e.sign:null),h.onchange=function(){e.sign=h.value,"sign"in e&&"><"===e.sign?e.value2=0:("sign"in e&&"isNaN"===e.sign&&delete e.value1,delete e.value2),n()},l.appendChild(c);var d=document.createElement("input");d.classList.add("wdr-number-inp"),d.classList.add("wdr-width50"),d.type="number",d.value="value1"in e?e.value1:"0",d.onchange=function(){e.value1=0==d.value.length?"0":d.value},l.appendChild(d);var A=document.createElement("span");A.id="wdr-and-label",A.classList.add("wdr-width20"),i.setText(A,r.and_symbole),l.appendChild(A);var p=document.createElement("input");p.classList.add("wdr-number-inp"),p.classList.add("wdr-width50"),p.type="number",p.value="value2"in e?e.value2:"0",p.onchange=function(){e.value2=0==p.value.length?"0":p.value},l.appendChild(p),n(),(l=document.createElement("div")).classList.add("wdr-cr-inner"),a.appendChild(l),(c=document.createElement("div")).classList.add("wdr-cr-lbl"),c.classList.add("wdr-width50"),i.setText(c,r.format+":"),l.appendChild(c),(c=i.createSelect()).id="wdr-font-family";var f=c.select;!function(e){for(var t=0;t<i.defaults.fonts.length;t++)f[t]=new Option(i.defaults.fonts[t],i.defaults.fonts[t]);f.value=null==e?"Arial":e}(e.hasOwnProperty("format")&&e.format.hasOwnProperty("fontFamily")?e.format.fontFamily:null),f.onchange=function(){null!=e.format&&(e.format.fontFamily=f.value,o())},l.appendChild(c),(c=i.createSelect()).id="wdr-font-size";var g=c.select;!function(e){for(var t=0;t<i.defaults.fontSizes.length;t++)g[t]=new Option(i.defaults.fontSizes[t],i.defaults.fontSizes[t]);g.value=null==e?"12px":e}(e.hasOwnProperty("format")&&e.format.hasOwnProperty("fontSize")?e.format.fontSize:null),g.onchange=function(){null!=e.format&&(e.format.fontSize=g.value,o())},l.appendChild(c);var m=new WebDataRocksToolbar.ColorPicker(this,s);m.setColor(e.hasOwnProperty("format")&&e.format.hasOwnProperty("backgroundColor")?e.format.backgroundColor:"0xFFFFFF","bg"),m.setColor(e.hasOwnProperty("format")&&e.format.hasOwnProperty("color")?e.format.color:"0x000000","font"),m.changeHandler=function(){null!=e.format&&(w.style.color=m.fontColor||"#000",w.style.backgroundColor=m.backgroundColor||"#fff")},m.applyHandler=function(){null!=e.format&&(e.format.color=m.fontColor,e.format.backgroundColor=m.backgroundColor,o())},m.cancelHandler=function(){null!=e.format&&(m.setColor(e.format.hasOwnProperty("backgroundColor")?e.format.backgroundColor:"0xFFFFFF","bg"),m.setColor(e.format.hasOwnProperty("color")?e.format.color:"0x000000","font")),o()},l.appendChild(m.element);var w=document.createElement("input");return w.id="wdr-sample",w.classList.add("wdr-inp"),w.type="number",w.value="73.93",w.style.pointerEvents="none",l.appendChild(w),o(),s},WebDataRocksToolbar.prototype.showOptionsDialog=function(){var e=this,t=this.Labels,i=this.popupManager.createPopup();i.content.id="wdr-popup-options",i.setTitle(this.osUtils.isMobile?t.options:t.layout_options),i.setToolbar([{id:"wdr-btn-apply",label:t.apply,handler:function(){var t,i;c.checked?t="off":h.checked?t="on":d.checked?t="rows":A.checked&&(t="columns"),w.checked?i="off":y.checked?i="on":v.checked?i="rows":_.checked&&(i="columns");var r="compact";g&&g.checked?r="classic":m&&m.checked&&(r="flat"),e.pivot.getOptions(),e.pivot.setOptions({grid:{showGrandTotals:t,showTotals:i,type:r}}),e.pivot.refresh()},isPositive:!0},{id:"wdr-btn-cancel",label:t.cancel}],!0);var r=document.createElement("div");r.classList.add("wdr-popup-content");var n=document.createElement("div");n.classList.add("wdr-ui-row"),r.appendChild(n);var o=document.createElement("div");o.classList.add("wdr-ui-col-2"),n.appendChild(o),(p=document.createElement("div")).classList.add("wdr-title-2"),e.setText(p,t.grand_totals),o.appendChild(p);var s="wdr-grand-totals-"+Date.now();(p=document.createElement("ul")).classList.add("wdr-radiobtn-list"),o.appendChild(p);var a=document.createElement("li"),l=document.createElement("div");l.classList.add("wdr-radio-wrap");var c=document.createElement("input");c.type="radio",c.name=s,c.id="wdr-gt-1",c.value="off",l.appendChild(c);var u=document.createElement("label");u.setAttribute("for","wdr-gt-1"),e.setText(u,t.grand_totals_off),l.appendChild(u),a.appendChild(l),p.appendChild(a),a=document.createElement("li"),(l=document.createElement("div")).classList.add("wdr-radio-wrap");var h=document.createElement("input");h.type="radio",h.name=s,h.id="wdr-gt-2",h.value="on",l.appendChild(h),(u=document.createElement("label")).setAttribute("for","wdr-gt-2"),e.setText(u,t.grand_totals_on),l.appendChild(u),a.appendChild(l),p.appendChild(a),a=document.createElement("li"),(l=document.createElement("div")).classList.add("wdr-radio-wrap");var d=document.createElement("input");d.type="radio",d.name=s,d.id="wdr-gt-3",d.value="rows",l.appendChild(d),(u=document.createElement("label")).setAttribute("for","wdr-gt-3"),e.setText(u,t.grand_totals_on_rows),l.appendChild(u),a.appendChild(l),p.appendChild(a),a=document.createElement("li"),(l=document.createElement("div")).classList.add("wdr-radio-wrap");var A=document.createElement("input");A.type="radio",A.name=s,A.id="wdr-gt-4",A.value="rows",l.appendChild(A),(u=document.createElement("label")).setAttribute("for","wdr-gt-4"),e.setText(u,t.grand_totals_on_columns),l.appendChild(u),a.appendChild(l),p.appendChild(a),(p=document.createElement("div")).classList.add("wdr-title-2"),e.setText(p,t.layout),o.appendChild(p);var p,f="wdr-layout-"+Date.now();(p=document.createElement("ul")).classList.add("wdr-radiobtn-list"),o.appendChild(p),a=document.createElement("li"),(l=document.createElement("div")).classList.add("wdr-radio-wrap"),(s=document.createElement("input")).type="radio",s.name=f,s.id="wdr-lt-1",s.value="compact",l.appendChild(s),(u=document.createElement("label")).setAttribute("for","wdr-lt-1"),e.setText(u,t.compact_view),l.appendChild(u),a.appendChild(l),p.appendChild(a),a=document.createElement("li"),(l=document.createElement("div")).classList.add("wdr-radio-wrap");var g=document.createElement("input");g.type="radio",g.name=f,g.id="wdr-lt-2",g.value="classic",l.appendChild(g),(u=document.createElement("label")).setAttribute("for","wdr-lt-2"),e.setText(u,t.classic_view),l.appendChild(u),a.appendChild(l),p.appendChild(a),o=e.pivot.getReport({withDefaults:!0,withGlobals:!0}),a=document.createElement("li"),(l=document.createElement("div")).classList.add("wdr-radio-wrap");var m=document.createElement("input");m.type="radio",m.name=f,m.id="wdr-lt-3",m.value="flat",l.appendChild(m),(u=document.createElement("label")).setAttribute("for","wdr-lt-3"),e.setText(u,t.flat_view),l.appendChild(u),a.appendChild(l),p.appendChild(a),(o=document.createElement("div")).classList.add("wdr-ui-col-2"),n.appendChild(o),(p=document.createElement("div")).classList.add("wdr-title-2"),e.setText(p,t.subtotals),o.appendChild(p),n="wdr-subtotals-"+Date.now(),(p=document.createElement("ul")).classList.add("wdr-radiobtn-list"),o.appendChild(p),a=document.createElement("li"),(l=document.createElement("div")).classList.add("wdr-radio-wrap");var w=document.createElement("input");w.type="radio",w.name=n,w.id="wdr-st-1",w.value="off",l.appendChild(w),(u=document.createElement("label")).setAttribute("for","wdr-st-1"),e.setText(u,t.subtotals_off),l.appendChild(u),a.appendChild(l),p.appendChild(a),a=document.createElement("li"),(l=document.createElement("div")).classList.add("wdr-radio-wrap");var y=document.createElement("input");y.type="radio",y.name=n,y.id="wdr-st-2",y.value="on",l.appendChild(y),(u=document.createElement("label")).setAttribute("for","wdr-st-2"),e.setText(u,t.subtotals_on),l.appendChild(u),a.appendChild(l),p.appendChild(a),a=document.createElement("li"),(l=document.createElement("div")).classList.add("wdr-radio-wrap");var v=document.createElement("input");v.type="radio",v.name=n,v.id="wdr-st-3",v.value="rows",l.appendChild(v),(u=document.createElement("label")).setAttribute("for","wdr-st-3"),e.setText(u,t.subtotals_on_rows),l.appendChild(u),a.appendChild(l),p.appendChild(a),a=document.createElement("li"),(l=document.createElement("div")).classList.add("wdr-radio-wrap");var _=document.createElement("input");_.type="radio",_.name=n,_.id="wdr-st-4",_.value="columns",l.appendChild(_),(u=document.createElement("label")).setAttribute("for","wdr-st-4"),e.setText(u,t.subtotals_on_columns),l.appendChild(u),a.appendChild(l),p.appendChild(a),i.setContent(r),this.popupManager.addPopup(i.content),"off"==(t=(o=e.pivot.getOptions()||{}).grid||{}).showGrandTotals||0==t.showGrandTotals?c.checked=!0:"on"==t.showGrandTotals||1==t.showGrandTotals?h.checked=!0:"rows"==t.showGrandTotals?d.checked=!0:"columns"==t.showGrandTotals&&(A.checked=!0),"off"==t.showTotals?w.checked=!0:"on"==t.showTotals?y.checked=!0:"rows"==t.showTotals?v.checked=!0:"columns"==t.showTotals&&(_.checked=!0),"flat"==t.type&&m?m.checked=!0:"classic"==t.type&&g?g.checked=!0:s&&(s.checked=!0)},WebDataRocksToolbar.prototype.showExportPdfDialog=function(){var e=this,t=this.Labels,i=this.popupManager.createPopup();i.setTitle(t.choose_page_orientation),i.setToolbar([{id:"wdr-btn-apply",label:t.apply,handler:function(){var t="portrait";a.checked&&(t="landscape"),e.pivot.exportTo("pdf",{pageOrientation:t})},isPositive:!0},{id:"wdr-btn-cancel",label:t.cancel}]);var r=document.createElement("div"),n=document.createElement("ul");n.classList.add("wdr-radiobtn-list"),r.appendChild(n);var o=document.createElement("li");n.appendChild(o);var s=document.createElement("div");s.classList.add("wdr-radio-wrap"),o.appendChild(s),(o=document.createElement("input")).id="wdr-portrait-radio",o.type="radio",o.name="wdr-pdf-orientation",o.checked=!0,s.appendChild(o),(o=document.createElement("label")).setAttribute("for","wdr-portrait-radio"),e.setText(o,t.portrait),s.appendChild(o),o=document.createElement("li"),n.appendChild(o),(s=document.createElement("div")).classList.add("wdr-radio-wrap"),o.appendChild(s);var a=document.createElement("input");a.id="wdr-landscape-radio",a.type="radio",a.name="wdr-pdf-orientation",s.appendChild(a),(o=document.createElement("label")).setAttribute("for","wdr-landscape-radio"),e.setText(o,t.landscape),s.appendChild(o),i.setContent(r),this.popupManager.addPopup(i.content)},WebDataRocksToolbar.prototype.toggleFullscreen=function(){this.isFullscreen()?this.exitFullscreen():this.enterFullscreen(this.container)},WebDataRocksToolbar.prototype.isFullscreen=function(){return document.fullScreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement},WebDataRocksToolbar.prototype.enterFullscreen=function(e){if(e.requestFullscreen||e.webkitRequestFullScreen||e.mozRequestFullScreen||e.msRequestFullscreen&&window==top){if(this.containerStyle={width:this.container.style.width,height:this.container.style.height,position:this.container.style.position,top:this.container.style.top,bottom:this.container.style.bottom,left:this.container.style.left,right:this.container.style.right,marginTop:this.container.style.marginTop,marginLeft:this.container.style.left,toolbarWidth:this.toolbarWrapper.style.width},this.container.style.width="100%",this.container.style.height="100%",this.container.style.position="fixed",this.container.style.top="0px",this.container.style.left="0px",this.toolbarWrapper.style.width="100%",e.requestFullscreen)e.requestFullscreen();else if(e.webkitRequestFullScreen){var t=navigator.userAgent;-1<t.indexOf("Safari")&&-1==t.indexOf("Chrome")?e.webkitRequestFullScreen():e.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT)}else e.mozRequestFullScreen?e.mozRequestFullScreen():e.msRequestFullscreen&&(window==top?e.msRequestFullscreen():alert("Fullscreen mode in IE 11 is not currently supported while Pivot embeded in iframe."));e.addEventListener("fullscreenchange",(function(){window.screenTop||window.screenY||this.isFullscreen()||this.exitFullscreen()}).bind(this),!1),e.addEventListener("webkitfullscreenchange",(function(){window.screenTop||window.screenY||this.isFullscreen()||this.exitFullscreen()}).bind(this),!1),e.addEventListener("mozfullscreenchange",(function(){window.fullScreen||window.innerWidth==screen.width&&window.innerHeight==screen.height||this.exitFullscreen()}).bind(this),!1)}},WebDataRocksToolbar.prototype.exitFullscreen=function(){this.container.style.width=this.containerStyle.width,this.container.style.height=this.containerStyle.height,this.container.style.position=this.containerStyle.position,this.container.style.top=this.containerStyle.top,this.container.style.left=this.containerStyle.left,this.container.style.marginTop=this.containerStyle.marginTop,this.container.style.marginLeft=this.containerStyle.marginLeft,this.toolbarWrapper.style.width=this.containerStyle.toolbarWidth,document.exitFullscreen?document.exitFullscreen():document.cancelFullscreen?document.cancelFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullScreen?document.webkitExitFullScreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen()},WebDataRocksToolbar.prototype.nullOrUndefined=function(e){return null==e},WebDataRocksToolbar.prototype.hasClass=function(e,t){return e.className.match(RegExp("(\\s|^)"+t+"(\\s|$)"))},WebDataRocksToolbar.prototype.addClass=function(e,t){this.hasClass(e,t)||(e.className+=" "+t)},WebDataRocksToolbar.prototype.removeClass=function(e,t){this.hasClass(e,t)&&(e.className=e.className.replace(RegExp("(\\s|^)"+t+"(\\s|$)")," "))},WebDataRocksToolbar.prototype.setText=function(e,t){e&&(void 0!==e.innerText&&(e.innerText=t),void 0!==e.textContent&&(e.textContent=t))},WebDataRocksToolbar.prototype.createSelect=function(){var e=document.createElement("div");e.classList.add("wdr-select");var t=document.createElement("select");return e.appendChild(t),e.select=t,e},WebDataRocksToolbar.prototype.createDivider=function(e){return(e=document.createElement("li")).className="wdr-divider",e},WebDataRocksToolbar.prototype.createTab=function(e){var t=document.createElement("li");t.id=e.id;var i=document.createElement("a");e.hasOwnProperty("class_attr")&&i.setAttribute("class",e.class_attr),i.setAttribute("href","javascript:void(0)"),e.icon&&((r=document.createElement("div")).classList.add("wdr-svg-icon"),r.innerHTML=e.icon,i.appendChild(r)),r=document.createElement("span"),this.setText(r,e.title),i.appendChild(r);var r,n=this;return this.nullOrUndefined(r="function"==typeof e.handler?e.handler:this[e.handler])||(i.onclick=function(e,t){return function(){e.call(n,t)}}(r,e.args)),this.nullOrUndefined(this[e.onShowHandler])||(i.onmouseover=function(e){return function(){e.call(n)}}(this[e.onShowHandler])),t.onmouseover=function(){n.showDropdown(this)},t.onmouseout=function(){n.hideDropdown(this)},t.appendChild(i),null==e.menu||this.osUtils.isMobile&&1!=e.collapse||t.appendChild(this.createTabMenu(e.menu)),t},WebDataRocksToolbar.prototype.showDropdown=function(e){var t=e.querySelectorAll(".wdr-dropdown")[0];t&&(t.style.display="block",t.getBoundingClientRect().right>this.toolbarWrapper.getBoundingClientRect().right&&(t.style.right=0,this.addClass(e,"wdr-align-rigth")))},WebDataRocksToolbar.prototype.hideDropdown=function(e){var t=e.querySelectorAll(".wdr-dropdown")[0];t&&(t.style.display="none",t.style.right=null,this.removeClass(e,"wdr-align-rigth"))},WebDataRocksToolbar.prototype.createTabMenu=function(e){var t=document.createElement("div");t.className="wdr-dropdown wdr-shadow-container";var i=document.createElement("ul");i.className="wdr-dropdown-content";for(var r=0;r<e.length;r++)this.isDisabled(e[r])||i.appendChild(e[r].divider?this.createMenuDivider():this.createTab(e[r]));return t.appendChild(i),t},WebDataRocksToolbar.prototype.createMenuDivider=function(){var e=document.createElement("li");return e.className="wdr-v-divider",e},WebDataRocksToolbar.prototype.isDisabled=function(e){return!!this.nullOrUndefined(e)||!1===e.ios&&this.osUtils.isIOS||!1===e.android&&this.osUtils.isAndroid||!1===e.mobile&&this.osUtils.isMobile},WebDataRocksToolbar.prototype.getElementById=function(e,t){var i=function(e,t){for(var r=0;r<e.childNodes.length;r++){var n=e.childNodes[r];if(n.id==t)return n;if(null!=(n=i(n,t)))return n}return null};return i(t||this.toolbarWrapper,e)},WebDataRocksToolbar.prototype.osUtils={isIOS:!(!navigator.userAgent.match(/iPhone|iPad|iPod/i)&&!navigator.platform.match(/iPhone|iPad|iPod/i)),isMac:/Mac/i.test(navigator.platform),isAndroid:!!navigator.userAgent.match(/Android/i),isBlackBerry:/BlackBerry/i.test(navigator.platform),isMobile:navigator.userAgent.match(/iPhone|iPad|iPod/i)||navigator.platform.match(/iPhone|iPad|iPod/i)||navigator.userAgent.match(/Android/i)||/BlackBerry/i.test(navigator.platform)},WebDataRocksToolbar.PopupManager=function(e){this.toolbar=e,this.activePopup=null},WebDataRocksToolbar.PopupManager.prototype.createPopup=function(){return new WebDataRocksToolbar.PopupManager.PopupWindow(this)},WebDataRocksToolbar.PopupManager.prototype.addPopup=function(e){if(null!=e){this.removePopup(),this.modalOverlay=this.createModalOverlay(),this.activePopup=e,this.toolbar.toolbarWrapper.appendChild(e),this.toolbar.toolbarWrapper.appendChild(this.modalOverlay),this.addLayoutClasses(e),this.centerPopup(e);var t=this;e.resizeHandler=function(){e&&(t.addLayoutClasses(e),t.centerPopup(e))},window.addEventListener("resize",e.resizeHandler)}},WebDataRocksToolbar.PopupManager.prototype.addLayoutClasses=function(e){e.classList.remove("wdr-layout-tablet"),e.classList.remove("wdr-layout-mobile"),e.classList.remove("wdr-layout-mobile-small");var t=this.getBoundingRect(this.toolbar.container);768>t.width&&e.classList.add("wdr-layout-tablet"),580>t.width&&e.classList.add("wdr-layout-mobile"),460>t.width&&e.classList.add("wdr-layout-mobile-small")},WebDataRocksToolbar.PopupManager.prototype.centerPopup=function(e){var t=this.getBoundingRect(this.toolbar.container),i=this.getBoundingRect(e),r=this.getBoundingRect(this.toolbar.toolbarWrapper);e.style.zIndex=parseInt(this.modalOverlay.style.zIndex)+1,this.modalOverlay.style.height=t.height+"px",e.style.left=Math.max(0,(r.width-i.width)/2)+"px",e.style.top=Math.max(0,(t.height-i.height)/2)+"px"},WebDataRocksToolbar.PopupManager.prototype.removePopup=function(e){e=e||this.activePopup,null!=this.modalOverlay&&(this.toolbar.toolbarWrapper.removeChild(this.modalOverlay),this.modalOverlay=null),null!=e&&(this.toolbar.toolbarWrapper.removeChild(e),this.activePopup=null,window.removeEventListener("resize",e.resizeHandler))},WebDataRocksToolbar.PopupManager.prototype.getBoundingRect=function(e){var t=e.getBoundingClientRect();return{left:t.left,right:t.right,top:t.top,bottom:t.bottom,width:t.width||e.clientWidth,height:t.height||e.clientHeight}},WebDataRocksToolbar.PopupManager.prototype.createModalOverlay=function(){var e=document.createElement("div");e.className="wdr-modal-overlay",e.id="wdr-popUp-modal-overlay";var t=this;return e.addEventListener("click",(function(e){t.removePopup(t.activePopup)})),e},WebDataRocksToolbar.PopupManager.PopupWindow=function(e){this.popupManager=e;var t=document.createElement("div");t.className="wdr-panel-content";var i=document.createElement("div");i.className="wdr-title-bar";var r=document.createElement("div");r.className="wdr-title-text";var n=document.createElement("div");n.className="wdr-toolbox",n.style.clear="both",this.content=document.createElement("div"),this.content.className="wdr-popup wdr-panel wdr-toolbar-ui wdr-ui",this.content.appendChild(t),t.appendChild(i),i.appendChild(r),this.setTitle=function(e){WebDataRocksToolbar.prototype.setText(r,e)},this.setContent=function(e){t.insertBefore(e,i.nextSibling)};var o=this;return this.setToolbar=function(e,s){n.innerHTML="";for(var a=e.length-1;0<=a;a--){var l=document.createElement("a");l.setAttribute("href","javascript:void(0)"),l.className="wdr-ui-btn"+(e[a].isPositive?" wdr-ui-btn-dark":""),e[a].id&&(l.id=e[a].id),WebDataRocksToolbar.prototype.setText(l,e[a].label),l.onclick=function(e){return function(){null!=e&&e.call(),o.popupManager.removePopup()}}(e[a].handler),!0===e[a].disabled?WebDataRocksToolbar.prototype.addClass(l,"wdr-ui-disabled"):WebDataRocksToolbar.prototype.removeClass(l,"wdr-ui-disabled"),e[a].isPositive&&(WebDataRocksToolbar.prototype.osUtils.isMac||WebDataRocksToolbar.prototype.osUtils.isIOS)?n.appendChild(l):n.insertBefore(l,n.firstChild)}s?(n.classList.add("wdr-ui-col"),i.appendChild(n),i.classList.add("wdr-ui-row"),r.classList.add("wdr-ui-col")):t.appendChild(n)},this.toolbar=n,this.titleBar=i,this.title=r,this},WebDataRocksToolbar.ColorPicker=function(e,t){function i(e){e=e.target.getAttribute("data-c"),h.drawShades(h.colors[e]),h.setColor(e,h.currentType,!0)}function r(e){e=e.target.getAttribute("data-c"),h.setColor(e,h.currentType,!0)}function n(e){h.currentType=e,a.classList.remove("wdr-current"),l.classList.remove("wdr-current"),"bg"==e?(l.classList.add("wdr-current"),h.setColor(h.backgroundColor,e,!1)):(a.classList.add("wdr-current"),h.setColor(h.fontColor,e,!1))}function o(){h.closePopup(),h.cancelHandler&&h.cancelHandler()}this.toolbar=e,this.element=document.createElement("div"),this.element.classList.add("wdr-colorpick-wrap"),this.element.classList.add("wdr-width40"),this.colorPickerButton=document.createElement("div"),this.colorPickerButton.classList.add("wdr-colorpick-btn"),this.element.appendChild(this.colorPickerButton),this.colorPickerIcon=document.createElement("span"),this.colorPickerIcon.classList.add("wdr-icon"),this.colorPickerIcon.classList.add("wdr-icon-act_font"),this.colorPickerButton.appendChild(this.colorPickerIcon),this.popup=document.createElement("div"),this.popup.classList.add("wdr-colorpick-popup"),this.popup.onclick=function(e){e.stopPropagation()},t.appendChild(this.popup);var s=document.createElement("div");s.classList.add("wdr-color-targ-switch"),this.popup.appendChild(s);var a=document.createElement("a");a.classList.add("wdr-cts-item"),a.classList.add("wdr-current"),a.href="javascript:void(0);",a.innerHTML=e.Labels.cp_text,a.onclick=function(){n("font")},s.appendChild(a);var l=document.createElement("a");for(var c in l.classList.add("wdr-cts-item"),l.innerHTML=e.Labels.cp_highlight,l.href="javascript:void(0);",l.onclick=function(){n("bg")},s.appendChild(l),(s=document.createElement("div")).classList.add("wdr-cp-sett-row"),this.popup.appendChild(s),this.colorInput=document.createElement("input"),this.colorInput.type="text",this.colorInput.classList.add("wdr-inp"),this.colorInput.classList.add("wdr-width140"),this.colorInput.classList.add("wdr-tac"),this.colorInput.onchange=function(){var e=h.colorInput.value;h.isColor(e)&&h.setColor(e,h.currentType,!0)},s.appendChild(this.colorInput),this.colorPreview=document.createElement("div"),this.colorPreview.classList.add("wdr-cp-curr-color"),this.colorPreview.classList.add("wdr-width140"),s.appendChild(this.colorPreview),this.mainColors=document.createElement("div"),this.mainColors.classList.add("wdr-row-9colors"),this.popup.appendChild(this.mainColors),this.colors){(s=document.createElement("div")).classList.add("wdr-r9c-item"),s.style.backgroundColor=c,s.setAttribute("data-c",c),s.addEventListener("click",i),this.mainColors.appendChild(s);var u=document.createElement("span");u.classList.add("wdr-cp-currentmark"),u.classList.add("wdr-icon"),u.classList.add("wdr-icon-act_check"),s.appendChild(u),(u=document.createElement("span")).classList.add("wdr-r9c-arrow"),u.style.borderTopColor=c,s.appendChild(u)}for(this.shadeColors=document.createElement("div"),this.shadeColors.classList.add("wdr-row-4colors"),this.popup.appendChild(this.shadeColors),c=0;8>c;c++)(s=document.createElement("div")).classList.add("wdr-r4c-item"),s.addEventListener("click",r),this.shadeColors.appendChild(s),(u=document.createElement("span")).classList.add("wdr-cp-currentmark"),u.classList.add("wdr-icon"),u.classList.add("wdr-icon-act_check"),s.appendChild(u);this.drawShades(this.colors["#000000"]),(s=document.createElement("div")).classList.add("wdr-cp-btns-row"),this.popup.appendChild(s),(c=document.createElement("a")).innerHTML=e.Labels.apply,c.classList.add("wdr-ui-btn"),c.classList.add("wdr-ui-btn-dark"),c.addEventListener("click",(function(){h.closePopup(),h.applyHandler&&h.applyHandler()})),(u=document.createElement("a")).innerHTML=e.Labels.cancel,u.classList.add("wdr-ui-btn"),u.addEventListener("click",o),WebDataRocksToolbar.prototype.osUtils.isMac||WebDataRocksToolbar.prototype.osUtils.isIOS?(s.appendChild(u),s.appendChild(c)):(s.appendChild(c),s.appendChild(u)),this.currentType="font",this.colorPickerButton.addEventListener("click",(function(e){e.stopPropagation(),h.isOpened()?h.closePopup():h.openPopup()})),document.body.addEventListener("click",(function(e){o()}));var h=this},WebDataRocksToolbar.ColorPicker.prototype.colors={"#000000":"#000000 #212121 #424242 #616161 #757575 #9E9E9E #BDBDBD #FFFFFF".split(" "),"#F44336":"#D32F2F #E53935 #F44336 #EF5350 #E57373 #EF9A9A #FFCDD2 #FFEBEE".split(" "),"#FF9800":"#F57C00 #FB8C00 #FF9800 #FFA726 #FFB74D #FFCC80 #FFE0B2 #FFF3E0".split(" "),"#FFEB3B":"#FBC02D #FDD835 #FFEB3B #FFEE58 #FFF176 #FFF59D #FFF9C4 #FFFDE7".split(" "),"#8BC34A":"#689F38 #7CB342 #8BC34A #9CCC65 #AED581 #C5E1A5 #DCEDC8 #F1F8E9".split(" "),"#009688":"#00796B #00897B #009688 #26A69A #4DB6AC #80CBC4 #B2DFDB #E0F2F1".split(" "),"#03A9F4":"#0288D1 #039BE5 #03A9F4 #29B6F6 #4FC3F7 #81D4FA #B3E5FC #E1F5FE".split(" "),"#3F51B5":"#303F9F #3949AB #3F51B5 #5C6BC0 #7986CB #9FA8DA #C5CAE9 #E8EAF6".split(" "),"#9C27B0":"#7B1FA2 #8E24AA #9C27B0 #AB47BC #BA68C8 #CE93D8 #E1BEE7 #F3E5F5".split(" ")},WebDataRocksToolbar.ColorPicker.prototype.isOpened=function(){return this.popup.parentElement&&this.popup.parentElement.classList.contains("wdr-popup-opened")},WebDataRocksToolbar.ColorPicker.prototype.drawShades=function(e){if(e)for(var t=this.shadeColors.children,i=0;i<t.length;i++){var r=t[i];r.setAttribute("data-c",e[i]),r.style.backgroundColor=e[i],r.style.borderRight="#FFFFFF"==e[i]?"1px solid #d5d5d5":"none",r.style.borderBottom="#FFFFFF"==e[i]?"1px solid #d5d5d5":"none"}},WebDataRocksToolbar.ColorPicker.prototype.setColor=function(e,t,i){"string"==typeof e&&0==e.indexOf("0x")&&(e="#"+e.substr(2)),"bg"==t?(this.backgroundColor=e,this.colorPickerButton.style.backgroundColor=e):(this.fontColor=e,this.colorPickerIcon.style.color=e),this.colorInput.value=e,this.colorPreview.style.backgroundColor=e,this.drawSelected(),i&&this.changeHandler&&this.changeHandler()},WebDataRocksToolbar.ColorPicker.prototype.drawSelected=function(){var e="bg"==this.currentType?this.backgroundColor:this.fontColor,t=this.findMain(e);this.drawShades(this.colors[t]);for(var i=this.mainColors.children,r=0;r<i.length;r++)i[r].classList.remove("wdr-current");for((t=this.mainColors.querySelector("[data-c='"+t+"']"))&&t.classList.add("wdr-current"),i=this.shadeColors.children,r=0;r<i.length;r++)i[r].classList.remove("wdr-current");(e=this.shadeColors.querySelector("[data-c='"+e+"']"))&&e.classList.add("wdr-current")},WebDataRocksToolbar.ColorPicker.prototype.findMain=function(e){for(var t in"string"==typeof e&&0==e.indexOf("0x")&&(e="#"+e.substr(2)),this.colors)if(0<=this.colors[t].indexOf(e))return t},WebDataRocksToolbar.ColorPicker.prototype.isColor=function(e){return e.match(/^#?[0-9A-Fa-f]{6}$/g)},WebDataRocksToolbar.ColorPicker.prototype.closePopup=function(){this.popup.parentElement&&this.popup.parentElement.classList.remove("wdr-popup-opened")},WebDataRocksToolbar.ColorPicker.prototype.openPopup=function(){for(var e=this.toolbar.toolbarWrapper.querySelectorAll(".wdr-colorpick-popup"),t=0;t<e.length;t++)e[t].parentElement.classList.remove("wdr-popup-opened");this.popup.parentElement&&(e=this.toolbar.toolbarWrapper.querySelector("#wdr-popup-conditional .wdr-panel-content"),t=this.getWhere(this.colorPickerButton,e),0>this.getWhere(this.colorPickerButton,document.body).top-this.popup.clientHeight?(this.popup.classList.remove("wdr-arrow-down"),this.popup.classList.add("wdr-arrow-up"),this.popup.style.top=this.colorPickerButton.clientHeight+t.top+11+"px",this.popup.style.bottom=""):(this.popup.classList.add("wdr-arrow-down"),this.popup.classList.remove("wdr-arrow-up"),this.popup.style.bottom=e.clientHeight-t.top+5+"px",this.popup.style.top=""),this.popup.style.left=t.left+this.colorPickerButton.clientWidth/2+2+"px",this.popup.parentElement.classList.add("wdr-popup-opened"))},WebDataRocksToolbar.ColorPicker.prototype.getWhere=function(e,t){var i=0,r=0;if(e.offsetParent){i=e.offsetLeft,r=e.offsetTop;for(var n=e;(n=n.parentNode)&&n!=t;)i-=0,r-=n.scrollTop?n.scrollTop:0;for(;(e=e.offsetParent)&&e!=t;)i+=e.offsetLeft,r+=e.offsetTop}return{top:r+0,left:i+0}};var savingAs=savingAs||"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob&&navigator.msSaveOrOpenBlob.bind(navigator)||function(e){"use strict";if("undefined"==typeof navigator||!/MSIE [1-9]\./.test(navigator.userAgent)){var t=e.document,i=t.createElementNS("http://www.w3.org/1999/xhtml","a"),r="download"in i,n=function(i){var r=t.createEvent("MouseEvents");r.initMouseEvent("click",!0,!1,e,0,0,0,0,0,!1,!1,!1,!1,0,null),i.dispatchEvent(r)},o=e.webkitRequestFileSystem,s=e.requestFileSystem||o||e.mozRequestFileSystem,a=function(t){(e.setImmediate||e.setTimeout)((function(){throw t}),0)},l=0,c=function(t){var i=function(){"string"==typeof t?(e.URL||e.webkitURL||e).revokeObjectURL(t):t.remove()};e.chrome?i():setTimeout(i,500)},u=function(e,t,i){for(var r=(t=[].concat(t)).length;r--;){var n=e["on"+t[r]];if("function"==typeof n)try{n.call(e,i||e)}catch(o){a(o)}}},h=function(t,a){var h,d,A=this,p=t.type,f=!1,g=function(){u(A,["writestart","progress","write","writeend"])},m=function(){!f&&h||(h=(e.URL||e.webkitURL||e).createObjectURL(t)),d?d.location.href=h:null==e.open(h,"_blank")&&"undefined"!=typeof safari&&(e.location.href=h),A.readyState=A.DONE,g(),c(h)},w=function(e){return function(){if(A.readyState!==A.DONE)return e.apply(this,arguments)}},y={create:!0,exclusive:!1};A.readyState=A.INIT,a||(a="download"),r?(h=(e.URL||e.webkitURL||e).createObjectURL(t),i.href=h,i.download=a,n(i),A.readyState=A.DONE,g(),c(h)):(e.chrome&&p&&"application/octet-stream"!==p&&(t=(t.slice||t.webkitSlice).call(t,0,t.size,"application/octet-stream"),f=!0),o&&"download"!==a&&(a+=".download"),("application/octet-stream"===p||o)&&(d=e),s?s(e.TEMPORARY,l+=t.size,w((function(e){e.root.getDirectory("saved",y,w((function(e){var i=function(){e.getFile(a,y,w((function(e){e.createWriter(w((function(i){i.onwriteend=function(t){d.location.href=e.toURL(),A.readyState=A.DONE,u(A,"writeend",t),c(e)},i.onerror=function(){var e=i.error;e.code!==e.ABORT_ERR&&m()},["writestart","progress","write","abort"].forEach((function(e){i["on"+e]=A["on"+e]})),i.write(t),A.abort=function(){i.abort(),A.readyState=A.DONE},A.readyState=A.WRITING})),m)})),m)};e.getFile(a,{create:!1},w((function(e){e.remove(),i()})),w((function(e){e.code===e.NOT_FOUND_ERR?i():m()})))})),m)})),m):m())},d=h.prototype;return d.abort=function(){this.readyState=this.DONE,u(this,"abort")},d.readyState=d.INIT=0,d.WRITING=1,d.DONE=2,d.error=d.onwritestart=d.onprogress=d.onwrite=d.onabort=d.onerror=d.onwriteend=null,function(e,t){return new h(e,t)}}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);"undefined"!=typeof module&&null!==module?module.exports=savingAs:"undefined"!=typeof define&&null!==define&&null!=define.amd&&define("savingAs",(function(){return savingAs})),"function"==typeof define&&define,function(){"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}!function(t){if("object"!==e(t.console)){t.console={};for(var i,r,n=t.console,o=function(){},s=["memory"],a="assert,clear,count,debug,dir,dirxml,error,exception,group,groupCollapsed,groupEnd,info,log,markTimeline,profile,profiles,profileEnd,show,table,time,timeEnd,timeline,timelineEnd,timeStamp,trace,warn".split(",");i=s.pop();)n[i]||(n[i]={});for(;r=a.pop();)n[r]||(n[r]=o)}var l,c,u,h,d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";void 0===t.btoa&&(t.btoa=function(e){var t,i,r,n,o,s=0,a=0,l="",c=[];if(!e)return e;for(;t=(o=e.charCodeAt(s++)<<16|e.charCodeAt(s++)<<8|e.charCodeAt(s++))>>18&63,i=o>>12&63,r=o>>6&63,n=63&o,c[a++]=d.charAt(t)+d.charAt(i)+d.charAt(r)+d.charAt(n),s<e.length;);l=c.join("");var u=e.length%3;return(u?l.slice(0,u-3):l)+"===".slice(u||3)}),void 0===t.atob&&(t.atob=function(e){var t,i,r,n,o,s,a=0,l=0,c=[];if(!e)return e;for(e+="";t=(s=d.indexOf(e.charAt(a++))<<18|d.indexOf(e.charAt(a++))<<12|(n=d.indexOf(e.charAt(a++)))<<6|(o=d.indexOf(e.charAt(a++))))>>16&255,i=s>>8&255,r=255&s,c[l++]=64==n?String.fromCharCode(t):64==o?String.fromCharCode(t,i):String.fromCharCode(t,i,r),a<e.length;);return c.join("")}),Array.prototype.map||(Array.prototype.map=function(e){if(null==this||"function"!=typeof e)throw new TypeError;for(var t=Object(this),i=t.length>>>0,r=new Array(i),n=1<arguments.length?arguments[1]:void 0,o=0;o<i;o++)o in t&&(r[o]=e.call(n,t[o],o,t));return r}),Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),Array.prototype.forEach||(Array.prototype.forEach=function(e,t){if(null==this||"function"!=typeof e)throw new TypeError;for(var i=Object(this),r=i.length>>>0,n=0;n<r;n++)n in i&&e.call(t,i[n],n,i)}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(e){if(null==this)throw new TypeError('"this" is null or not defined');var t=Object(this),i=t.length>>>0;if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var r=arguments[1],n=0;n<i;){var o=t[n];if(e.call(r,o,n,t))return o;n++}},configurable:!0,writable:!0}),Object.keys||(Object.keys=(l=Object.prototype.hasOwnProperty,c=!{toString:null}.propertyIsEnumerable("toString"),h=(u=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"]).length,function(t){if("object"!==e(t)&&("function"!=typeof t||null===t))throw new TypeError;var i,r,n=[];for(i in t)l.call(t,i)&&n.push(i);if(c)for(r=0;r<h;r++)l.call(t,u[r])&&n.push(u[r]);return n})),"function"!=typeof Object.assign&&(Object.assign=function(e){if(null==e)throw new TypeError("Cannot convert undefined or null to object");e=Object(e);for(var t=1;t<arguments.length;t++){var i=arguments[t];if(null!=i)for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),String.prototype.trimLeft||(String.prototype.trimLeft=function(){return this.replace(/^\s+/g,"")}),String.prototype.trimRight||(String.prototype.trimRight=function(){return this.replace(/\s+$/g,"")}),Number.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||"undefined"!=typeof global&&global||Function('return typeof this === "object" && this.content')()||Function("return this")());var t,i,r,n,o,s,a,l,c,u,h,d,A,p,f,g,m,w,y,v,_,b,C,E,S,L,T,B,N,I,F,O,x,D,R,U,M,P,H,Q,k,z,V,G,j,W,q,K,X,J,Y,Z,$,ee,te,ie,re,ne,oe,se,ae,le=function(t){function i(i){if("object"!==e(i))throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var r={};this.subscribe=function(e,t,i){if(i=i||!1,"string"!=typeof e||"function"!=typeof t||"boolean"!=typeof i)throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");r.hasOwnProperty(e)||(r[e]={});var n=Math.random().toString(35);return r[e][n]=[t,!!i],n},this.unsubscribe=function(e){for(var t in r)if(r[t][e])return delete r[t][e],0===Object.keys(r[t]).length&&delete r[t],!0;return!1},this.publish=function(e){if(r.hasOwnProperty(e)){var n=Array.prototype.slice.call(arguments,1),o=[];for(var s in r[e]){var a=r[e][s];try{a[0].apply(i,n)}catch(e){t.console&&console.error("jsPDF PubSub Error",e.message,e)}a[1]&&o.push(s)}o.length&&o.forEach(this.unsubscribe)}},this.getTopics=function(){return r}}function r(n,o,s,a){var l={},c=[],u=1;"object"===e(n)&&(n=(l=n).orientation,o=l.unit||o,s=l.format||s,a=l.compress||l.compressPdf||a,c=l.filters||(!0===a?["FlateEncode"]:c),u="number"==typeof l.userUnit?Math.abs(l.userUnit):1),o=o||"mm",n=(""+(n||"P")).toLowerCase();var h=l.putOnlyUsedFonts||!0,d={},A={internal:{},__private__:{}};A.__private__.PubSub=i;var p="1.3",f=A.__private__.getPdfVersion=function(){return p},g=(A.__private__.setPdfVersion=function(e){p=e},{a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]}),m=(A.__private__.getPageFormats=function(){return g},A.__private__.getPageFormat=function(e){return g[e]});"string"==typeof s&&(s=m(s)),s=s||m("a4");var w,y=A.f2=A.__private__.f2=function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.f2");return e.toFixed(2)},v=A.__private__.f3=function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.f3");return e.toFixed(3)},_="00000000000000000000000000000000",b=A.__private__.getFileId=function(){return _},C=A.__private__.setFileId=function(e){return e=e||"12345678901234567890123456789012".split("").map((function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))})).join(""),_=e};A.setFileId=function(e){return C(e),this},A.getFileId=function(){return b()};var E=A.__private__.convertDateToPDFDate=function(e){var t=e.getTimezoneOffset(),i=t<0?"+":"-",r=Math.floor(Math.abs(t/60)),n=Math.abs(t%60),o=[i,U(r),"'",U(n),"'"].join("");return["D:",e.getFullYear(),U(e.getMonth()+1),U(e.getDate()),U(e.getHours()),U(e.getMinutes()),U(e.getSeconds()),o].join("")},S=A.__private__.convertPDFDateToDate=function(e){var t=parseInt(e.substr(2,4),10),i=parseInt(e.substr(6,2),10)-1,r=parseInt(e.substr(8,2),10),n=parseInt(e.substr(10,2),10),o=parseInt(e.substr(12,2),10),s=parseInt(e.substr(14,2),10);return parseInt(e.substr(16,2),10),parseInt(e.substr(20,2),10),new Date(t,i,r,n,o,s,0)},L=A.__private__.setCreationDate=function(t){var i;if(void 0===t&&(t=new Date),"object"===e(t)&&"[object Date]"===Object.prototype.toString.call(t))i=E(t);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|\-0[0-9]|\-1[0-1])\'(0[0-9]|[1-5][0-9])\'?$/.test(t))throw new Error("Invalid argument passed to jsPDF.setCreationDate");i=t}return w=i},T=A.__private__.getCreationDate=function(e){var t=w;return"jsDate"===e&&(t=S(w)),t};A.setCreationDate=function(e){return L(e),this},A.getCreationDate=function(e){return T(e)};var B,N,I,F,O,x,D,R,U=A.__private__.padd2=function(e){return("0"+parseInt(e)).slice(-2)},M=!1,P=[],H=[],Q=0,k=(A.__private__.setCustomOutputDestination=function(e){N=e},A.__private__.resetCustomOutputDestination=function(e){N=void 0},A.__private__.out=function(e){var t;return e="string"==typeof e?e:e.toString(),(t=void 0===N?M?P[B]:H:N).push(e),M||(Q+=e.length+1),t}),z=A.__private__.write=function(e){return k(1===arguments.length?e.toString():Array.prototype.join.call(arguments," "))},V=A.__private__.getArrayBuffer=function(e){for(var t=e.length,i=new ArrayBuffer(t),r=new Uint8Array(i);t--;)r[t]=e.charCodeAt(t);return i},G=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]],j=(A.__private__.getStandardFonts=function(e){return G},l.fontSize||16),W=(A.__private__.setFontSize=A.setFontSize=function(e){return j=e,this},A.__private__.getFontSize=A.getFontSize=function(){return j}),q=l.R2L||!1,K=(A.__private__.setR2L=A.setR2L=function(e){return q=e,this},A.__private__.getR2L=A.getR2L=function(e){return q},A.__private__.setZoomMode=function(e){if(/^\d*\.?\d*\%$/.test(e))I=e;else if(isNaN(e)){if(-1===[void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(e))throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+e+'" is not recognized.');I=e}else I=parseInt(e,10)}),X=(A.__private__.getZoomMode=function(){return I},A.__private__.setPageMode=function(e){if(-1==[void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(e))throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+e+'" is not recognized.');F=e}),J=(A.__private__.getPageMode=function(){return F},A.__private__.setLayoutMode=function(e){if(-1==[void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(e))throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+e+'" is not recognized.');O=e}),Y=(A.__private__.getLayoutMode=function(){return O},A.__private__.setDisplayMode=A.setDisplayMode=function(e,t,i){return K(e),J(t),X(i),this},{title:"",subject:"",author:"",keywords:"",creator:""}),Z=(A.__private__.getDocumentProperty=function(e){if(-1===Object.keys(Y).indexOf(e))throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Y[e]},A.__private__.getDocumentProperties=function(e){return Y},A.__private__.setDocumentProperties=A.setProperties=A.setDocumentProperties=function(e){for(var t in Y)Y.hasOwnProperty(t)&&e[t]&&(Y[t]=e[t]);return this},A.__private__.setDocumentProperty=function(e,t){if(-1===Object.keys(Y).indexOf(e))throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Y[e]=t},0),$=[],ee={},te={},ie=0,re=[],ne=[],oe=new i(A),se=l.hotfixes||[],ae=A.__private__.newObject=function(){var e=le();return ce(e,!0),e},le=A.__private__.newObjectDeferred=function(){return $[++Z]=function(){return Q},Z},ce=function(e,t){return t="boolean"==typeof t&&t,$[e]=Q,t&&k(e+" 0 obj"),e},ue=A.__private__.newAdditionalObject=function(){var e={objId:le(),content:""};return ne.push(e),e},he=le(),de=le(),Ae=A.__private__.decodeColorString=function(e){var t=e.split(" ");if(2===t.length&&("g"===t[1]||"G"===t[1])){var i=parseFloat(t[0]);t=[i,i,i,"r"]}for(var r="#",n=0;n<3;n++)r+=("0"+Math.floor(255*parseFloat(t[n])).toString(16)).slice(-2);return r},pe=A.__private__.encodeColorString=function(t){var i;"string"==typeof t&&(t={ch1:t});var r=t.ch1,n=t.ch2,o=t.ch3,s=t.ch4,a="draw"===t.pdfColorType?["G","RG","K"]:["g","rg","k"];if("string"==typeof r&&"#"!==r.charAt(0)){var l=new RGBColor(r);if(l.ok)r=l.toHex();else if(!/^\d*\.?\d*$/.test(r))throw new Error('Invalid color "'+r+'" passed to jsPDF.encodeColorString.')}if("string"==typeof r&&/^#[0-9A-Fa-f]{3}$/.test(r)&&(r="#"+r[1]+r[1]+r[2]+r[2]+r[3]+r[3]),"string"==typeof r&&/^#[0-9A-Fa-f]{6}$/.test(r)){var c=parseInt(r.substr(1),16);r=c>>16&255,n=c>>8&255,o=255&c}if(void 0===n||void 0===s&&r===n&&n===o)if("string"==typeof r)i=r+" "+a[0];else switch(t.precision){case 2:i=y(r/255)+" "+a[0];break;case 3:default:i=v(r/255)+" "+a[0]}else if(void 0===s||"object"===e(s)){if(s&&!isNaN(s.a)&&0===s.a)return["1.000","1.000","1.000",a[1]].join(" ");if("string"==typeof r)i=[r,n,o,a[1]].join(" ");else switch(t.precision){case 2:i=[y(r/255),y(n/255),y(o/255),a[1]].join(" ");break;default:case 3:i=[v(r/255),v(n/255),v(o/255),a[1]].join(" ")}}else if("string"==typeof r)i=[r,n,o,s,a[2]].join(" ");else switch(t.precision){case 2:i=[y(r/255),y(n/255),y(o/255),y(s/255),a[2]].join(" ");break;case 3:default:i=[v(r/255),v(n/255),v(o/255),v(s/255),a[2]].join(" ")}return i},fe=A.__private__.getFilters=function(){return c},ge=A.__private__.putStream=function(e){var t,i=(e=e||{}).data||"",n=e.filters||fe(),o=e.alreadyAppliedFilters||[],s=e.addLength1||!1,a=i.length;!0===n&&(n=["FlateEncode"]);var l=e.additionalKeyValues||[],c=(t=void 0!==r.API.processDataByFilters?r.API.processDataByFilters(i,n):{data:i,reverseChain:[]}).reverseChain+(Array.isArray(o)?o.join(" "):o.toString());0!==t.data.length&&(l.push({key:"Length",value:t.data.length}),!0===s&&l.push({key:"Length1",value:a})),0!=c.length&&(c.split("/").length-1==1?l.push({key:"Filter",value:c}):l.push({key:"Filter",value:"["+c+"]"})),k("<<");for(var u=0;u<l.length;u++)k("/"+l[u].key+" "+l[u].value);k(">>"),0!==t.data.length&&(k("stream"),k(t.data),k("endstream"))},me=A.__private__.putPage=function(e){var t=e.number,i=e.data,r=e.objId,n=e.contentsObjId;ce(r,!0),k("<</Type /Page"),k("/Parent "+e.rootDictionaryObjId+" 0 R"),k("/Resources "+e.resourceDictionaryObjId+" 0 R"),k("/MediaBox ["+parseFloat(y(e.mediaBox.bottomLeftX))+" "+parseFloat(y(e.mediaBox.bottomLeftY))+" "+y(e.mediaBox.topRightX)+" "+y(e.mediaBox.topRightY)+"]"),null!==e.cropBox&&k("/CropBox ["+y(e.cropBox.bottomLeftX)+" "+y(e.cropBox.bottomLeftY)+" "+y(e.cropBox.topRightX)+" "+y(e.cropBox.topRightY)+"]"),null!==e.bleedBox&&k("/BleedBox ["+y(e.bleedBox.bottomLeftX)+" "+y(e.bleedBox.bottomLeftY)+" "+y(e.bleedBox.topRightX)+" "+y(e.bleedBox.topRightY)+"]"),null!==e.trimBox&&k("/TrimBox ["+y(e.trimBox.bottomLeftX)+" "+y(e.trimBox.bottomLeftY)+" "+y(e.trimBox.topRightX)+" "+y(e.trimBox.topRightY)+"]"),null!==e.artBox&&k("/ArtBox ["+y(e.artBox.bottomLeftX)+" "+y(e.artBox.bottomLeftY)+" "+y(e.artBox.topRightX)+" "+y(e.artBox.topRightY)+"]"),"number"==typeof e.userUnit&&1!==e.userUnit&&k("/UserUnit "+e.userUnit),oe.publish("putPage",{objId:r,pageContext:re[t],pageNumber:t,page:i}),k("/Contents "+n+" 0 R"),k(">>"),k("endobj");var o=i.join("\n");return ce(n,!0),ge({data:o,filters:fe()}),k("endobj"),r},we=A.__private__.putPages=function(){var e,t,i=[];for(e=1;e<=ie;e++)re[e].objId=le(),re[e].contentsObjId=le();for(e=1;e<=ie;e++)i.push(me({number:e,data:P[e],objId:re[e].objId,contentsObjId:re[e].contentsObjId,mediaBox:re[e].mediaBox,cropBox:re[e].cropBox,bleedBox:re[e].bleedBox,trimBox:re[e].trimBox,artBox:re[e].artBox,userUnit:re[e].userUnit,rootDictionaryObjId:he,resourceDictionaryObjId:de}));ce(he,!0),k("<</Type /Pages");var r="/Kids [";for(t=0;t<ie;t++)r+=i[t]+" 0 R ";k(r+"]"),k("/Count "+ie),k(">>"),k("endobj"),oe.publish("postPutPages")},ye=function(e,t,i){te.hasOwnProperty(t)||(te[t]={}),te[t][i]=e},ve=function(e,t,i,r,n){n=n||!1;var o="F"+(Object.keys(ee).length+1).toString(10),s={id:o,postScriptName:e,fontName:t,fontStyle:i,encoding:r,isStandardFont:n,metadata:{}};return oe.publish("addFont",{font:s,instance:this}),void 0!==o&&(ee[o]=s,ye(o,t,i)),o},_e=A.__private__.pdfEscape=A.pdfEscape=function(e,t){return function(e,t){var i,r,n,o,s,a,l,c,u;if(n=(t=t||{}).sourceEncoding||"Unicode",s=t.outputEncoding,(t.autoencode||s)&&ee[x].metadata&&ee[x].metadata[n]&&ee[x].metadata[n].encoding&&(o=ee[x].metadata[n].encoding,!s&&ee[x].encoding&&(s=ee[x].encoding),!s&&o.codePages&&(s=o.codePages[0]),"string"==typeof s&&(s=o[s]),s)){for(l=!1,a=[],i=0,r=e.length;i<r;i++)(c=s[e.charCodeAt(i)])?a.push(String.fromCharCode(c)):a.push(e[i]),a[i].charCodeAt(0)>>8&&(l=!0);e=a.join("")}for(i=e.length;void 0===l&&0!==i;)e.charCodeAt(i-1)>>8&&(l=!0),i--;if(!l)return e;for(a=t.noBOM?[]:[254,255],i=0,r=e.length;i<r;i++){if((u=(c=e.charCodeAt(i))>>8)>>8)throw new Error("Character at position "+i+" of string '"+e+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");a.push(u),a.push(c-(u<<8))}return String.fromCharCode.apply(void 0,a)}(e,t).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},be=A.__private__.beginPage=function(e,t){var i,r="string"==typeof t&&t.toLowerCase();if("string"==typeof e&&(i=m(e.toLowerCase()))&&(e=i[0],t=i[1]),Array.isArray(e)&&(t=e[1],e=e[0]),(isNaN(e)||isNaN(t))&&(e=s[0],t=s[1]),r){switch(r.substr(0,1)){case"l":e<t&&(r="s");break;case"p":t<e&&(r="s")}"s"===r&&(i=e,e=t,t=i)}(14400<e||14400<t)&&(console.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),e=Math.min(14400,e),t=Math.min(14400,t)),s=[e,t],M=!0,P[++ie]=[],re[ie]={objId:0,contentsObjId:0,userUnit:Number(u),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(e),topRightY:Number(t)}},Se(ie)},Ce=function(){be.apply(this,arguments),Ge(Ve),k(Ze),0!==nt&&k(nt+" J"),0!==st&&k(st+" j"),oe.publish("addPage",{pageNumber:ie})},Se=function(e){0<e&&e<=ie&&(B=e)},Le=A.__private__.getNumberOfPages=A.getNumberOfPages=function(){return P.length-1},Te=function(e,t,i){var r,n=void 0;return i=i||{},t=void 0!==t?t:ee[x].fontStyle,r=(e=void 0!==e?e:ee[x].fontName).toLowerCase(),void 0!==te[r]&&void 0!==te[r][t]?n=te[r][t]:void 0!==te[e]&&void 0!==te[e][t]?n=te[e][t]:!1===i.disableWarning&&console.warn("Unable to look up font label for font '"+e+"', '"+t+"'. Refer to getFontList() for available fonts."),n||i.noFallback||null==(n=te.times[t])&&(n=te.times.normal),n},Be=A.__private__.putInfo=function(){for(var e in ae(),k("<<"),k("/Producer (jsPDF "+r.version+")"),Y)Y.hasOwnProperty(e)&&Y[e]&&k("/"+e.substr(0,1).toUpperCase()+e.substr(1)+" ("+_e(Y[e])+")");k("/CreationDate ("+w+")"),k(">>"),k("endobj")},Ne=A.__private__.putCatalog=function(e){var t=(e=e||{}).rootDictionaryObjId||he;switch(ae(),k("<<"),k("/Type /Catalog"),k("/Pages "+t+" 0 R"),I||(I="fullwidth"),I){case"fullwidth":k("/OpenAction [3 0 R /FitH null]");break;case"fullheight":k("/OpenAction [3 0 R /FitV null]");break;case"fullpage":k("/OpenAction [3 0 R /Fit]");break;case"original":k("/OpenAction [3 0 R /XYZ null null 1]");break;default:var i=""+I;"%"===i.substr(i.length-1)&&(I=parseInt(I)/100),"number"==typeof I&&k("/OpenAction [3 0 R /XYZ null null "+y(I)+"]")}switch(O||(O="continuous"),O){case"continuous":k("/PageLayout /OneColumn");break;case"single":k("/PageLayout /SinglePage");break;case"two":case"twoleft":k("/PageLayout /TwoColumnLeft");break;case"tworight":k("/PageLayout /TwoColumnRight")}F&&k("/PageMode /"+F),oe.publish("putCatalog"),k(">>"),k("endobj")},Ie=A.__private__.putTrailer=function(){k("trailer"),k("<<"),k("/Size "+(Z+1)),k("/Root "+Z+" 0 R"),k("/Info "+(Z-1)+" 0 R"),k("/ID [ <"+_+"> <"+_+"> ]"),k(">>")},Fe=A.__private__.putHeader=function(){k("%PDF-"+p),k("%")},Oe=A.__private__.putXRef=function(){var e=1,t="0000000000";for(k("xref"),k("0 "+(Z+1)),k("0000000000 65535 f "),e=1;e<=Z;e++)k("function"==typeof $[e]?(t+$[e]()).slice(-10)+" 00000 n ":void 0!==$[e]?(t+$[e]).slice(-10)+" 00000 n ":"0000000000 00000 n ")},xe=A.__private__.buildDocument=function(){M=!1,Q=Z=0,H=[],$=[],ne=[],he=le(),de=le(),oe.publish("buildDocument"),Fe(),we(),function(){oe.publish("putAdditionalObjects");for(var e=0;e<ne.length;e++){var t=ne[e];ce(t.objId,!0),k(t.content),k("endobj")}oe.publish("postPutAdditionalObjects")}(),function(){for(var e in ee)ee.hasOwnProperty(e)&&(!1===h||!0===h&&d.hasOwnProperty(e))&&(oe.publish("putFont",{font:t=ee[e],out:k,newObject:ae,putStream:ge}),!0!==t.isAlreadyPutted&&(t.objectNumber=ae(),k("<<"),k("/Type /Font"),k("/BaseFont /"+t.postScriptName),k("/Subtype /Type1"),"string"==typeof t.encoding&&k("/Encoding /"+t.encoding),k("/FirstChar 32"),k("/LastChar 255"),k(">>"),k("endobj")));var t}(),oe.publish("putResources"),ce(de,!0),k("<<"),function(){for(var e in k("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),k("/Font <<"),ee)ee.hasOwnProperty(e)&&(!1===h||!0===h&&d.hasOwnProperty(e))&&k("/"+e+" "+ee[e].objectNumber+" 0 R");k(">>"),k("/XObject <<"),oe.publish("putXobjectDict"),k(">>")}(),k(">>"),k("endobj"),oe.publish("postPutResources"),Be(),Ne();var e=Q;return Oe(),Ie(),k("startxref"),k(""+e),k("%%EOF"),M=!0,H.join("\n")},De=A.__private__.getBlob=function(e){return new Blob([V(e)],{type:"application/pdf"})},Re=A.output=A.__private__.output=((R=function(e,i){i=i||{};var r=xe();switch("string"==typeof i?i={filename:i}:i.filename=i.filename||"generated.pdf",e){case void 0:return r;case"save":A.save(i.filename);break;case"arraybuffer":return V(r);case"blob":return De(r);case"bloburi":case"bloburl":if(void 0!==t.URL&&"function"==typeof t.URL.createObjectURL)return t.URL&&t.URL.createObjectURL(De(r))||void 0;console.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":return"data:application/pdf;filename="+i.filename+";base64,"+btoa(r);case"dataurlnewwindow":var n='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring")+'"></iframe></body></html>',o=t.open();if(null!==o&&o.document.write(n),o||"undefined"==typeof safari)return o;case"datauri":case"dataurl":return t.document.location.href="data:application/pdf;filename="+i.filename+";base64,"+btoa(r);default:return null}}).foo=function(){try{return R.apply(this,arguments)}catch(n){var e=n.stack||"";~e.indexOf(" at ")&&(e=e.split(" at ")[1]);var i="Error in function "+e.split("\n")[0].split("<")[0]+": "+n.message;if(!t.console)throw new Error(i);t.console.error(i,n),t.alert&&alert(i)}},(R.foo.bar=R).foo),Ue=function(e){return!0===Array.isArray(se)&&-1<se.indexOf(e)};switch(o){case"pt":D=1;break;case"mm":D=72/25.4;break;case"cm":D=72/2.54;break;case"in":D=72;break;case"px":D=1==Ue("px_scaling")?.75:96/72;break;case"pc":case"em":D=12;break;case"ex":D=6;break;default:throw new Error("Invalid unit: "+o)}L(),C();var Me=A.__private__.getPageInfo=function(e){if(isNaN(e)||e%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:re[e].objId,pageNumber:e,pageContext:re[e]}},Pe=A.__private__.getPageInfoByObjId=function(e){for(var t in re)if(re[t].objId===e)break;if(isNaN(e)||e%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");return Me(t)},He=A.__private__.getCurrentPageInfo=function(){return{objId:re[B].objId,pageNumber:B,pageContext:re[B]}};A.addPage=function(){return Ce.apply(this,arguments),this},A.setPage=function(){return Se.apply(this,arguments),this},A.insertPage=function(e){return this.addPage(),this.movePage(B,e),this},A.movePage=function(e,t){if(t<e){for(var i=P[e],r=re[e],n=e;t<n;n--)P[n]=P[n-1],re[n]=re[n-1];P[t]=i,re[t]=r,this.setPage(t)}else if(e<t){for(i=P[e],r=re[e],n=e;n<t;n++)P[n]=P[n+1],re[n]=re[n+1];P[t]=i,re[t]=r,this.setPage(t)}return this},A.deletePage=function(){return(function(e){0<e&&e<=ie&&(P.splice(e,1),--ie<B&&(B=ie),this.setPage(B))}).apply(this,arguments),this},A.__private__.text=A.text=function(t,i,r,n){var o;"number"!=typeof t||"number"!=typeof i||"string"!=typeof r&&!Array.isArray(r)||(o=r,r=i,i=t,t=o);var s=arguments[3],a=arguments[4],l=arguments[5];if("object"===e(s)&&null!==s||("string"==typeof a&&(l=a,a=null),"string"==typeof s&&(l=s,s=null),"number"==typeof s&&(a=s,s=null),n={flags:s,angle:a,align:l}),(s=s||{}).noBOM=s.noBOM||!0,s.autoencode=s.autoencode||!0,isNaN(i)||isNaN(r)||null==t)throw new Error("Invalid arguments passed to jsPDF.text");if(0===t.length)return A;var c,u="",h="number"==typeof n.lineHeightFactor?n.lineHeightFactor:ze,A=n.scope||this;function p(e){for(var t,i=e.concat(),r=[],n=i.length;n--;)"string"==typeof(t=i.shift())?r.push(t):Array.isArray(e)&&1===t.length?r.push(t[0]):r.push([t[0],t[1],t[2]]);return r}function f(e,t){var i;if("string"==typeof e)i=t(e)[0];else if(Array.isArray(e)){for(var r,n,o=e.concat(),s=[],a=o.length;a--;)"string"==typeof(r=o.shift())?s.push(t(r)[0]):Array.isArray(r)&&"string"===r[0]&&(n=t(r[0],r[1],r[2]),s.push([n[0],n[1],n[2]]));i=s}return i}var g=!1,m=!0;if("string"==typeof t)g=!0;else if(Array.isArray(t)){for(var w,_=t.concat(),b=[],C=_.length;C--;)("string"!=typeof(w=_.shift())||Array.isArray(w)&&"string"!=typeof w[0])&&(m=!1);g=m}if(!1===g)throw new Error('Type of text must be string or Array. "'+t+'" is not recognized.');var E=ee[x].encoding;"WinAnsiEncoding"!==E&&"StandardEncoding"!==E||(t=f(t,(function(e,t,i){return[(r=e,r=r.split("\t").join(Array(n.TabLen||9).join(" ")),_e(r,s)),t,i];var r}))),"string"==typeof t&&(t=t.match(/[\r?\n]/)?t.split(/\r\n|\r|\n/g):[t]);var S=j/A.internal.scaleFactor,L=S*(ze-1);switch(n.baseline){case"bottom":r-=L;break;case"top":r+=S-L;break;case"hanging":r+=S-2*L;break;case"middle":r+=S/2-L}0<(z=n.maxWidth||0)&&("string"==typeof t?t=A.splitTextToSize(t,z):"[object Array]"===Object.prototype.toString.call(t)&&(t=A.splitTextToSize(t.join(" "),z)));var T={text:t,x:i,y:r,options:n,mutex:{pdfEscape:_e,activeFontKey:x,fonts:ee,activeFontSize:j}};oe.publish("preProcessText",T),t=T.text,a=(n=T.options).angle;var B=A.internal.scaleFactor,N=[];if(a){a*=Math.PI/180;var I=Math.cos(a),F=Math.sin(a);N=[y(I),y(F),y(-1*F),y(I)]}void 0!==(Q=n.charSpace)&&(u+=v(Q*B)+" Tc\n");var O=-1,D=void 0!==n.renderingMode?n.renderingMode:n.stroke,R=A.internal.getCurrentPageInfo().pageContext;switch(D){case 0:case!1:case"fill":O=0;break;case 1:case!0:case"stroke":O=1;break;case 2:case"fillThenStroke":O=2;break;case 3:case"invisible":O=3;break;case 4:case"fillAndAddForClipping":O=4;break;case 5:case"strokeAndAddPathForClipping":O=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":O=6;break;case 7:case"addToPathForClipping":O=7}var U=void 0!==R.usedRenderingMode?R.usedRenderingMode:-1;-1!==O?u+=O+" Tr\n":-1!==U&&(u+="0 Tr\n"),-1!==O&&(R.usedRenderingMode=O),l=n.align||"left";var M=j*h,P=A.internal.pageSize.getWidth(),H=(B=A.internal.scaleFactor,ee[x]),Q=n.charSpace||it,z=n.maxWidth||0,V=(s={},[]);if("[object Array]"===Object.prototype.toString.call(t)){var G,W;b=p(t),"left"!==l&&(W=b.map((function(e){return A.getStringUnitWidth(e,{font:H,charSpace:Q,fontSize:j})*j/B}))),Math.max.apply(Math,W);var K,X=0;if("right"===l){i-=W[0],t=[];var J=0;for(C=b.length;J<C;J++)G=0===J?(K=Ke(i),Xe(r)):(K=(X-W[J])*B,-M),t.push([b[J],K,G]),X=W[J]}else if("center"===l)for(i-=W[0]/2,t=[],J=0,C=b.length;J<C;J++)G=0===J?(K=Ke(i),Xe(r)):(K=(X-W[J])/2*B,-M),t.push([b[J],K,G]),X=W[J];else if("left"===l)for(t=[],J=0,C=b.length;J<C;J++)G=0===J?Xe(r):-M,K=0===J?Ke(i):0,t.push(b[J]);else{if("justify"!==l)throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(t=[],z=0!==z?z:P,J=0,C=b.length;J<C;J++)G=0===J?Xe(r):-M,K=0===J?Ke(i):0,J<C-1&&V.push(((z-W[J])/(b[J].split(" ").length-1)*B).toFixed(2)),t.push([b[J],K,G])}}!0===("boolean"==typeof n.R2L?n.R2L:q)&&(t=f(t,(function(e,t,i){return[e.split("").reverse().join(""),t,i]}))),oe.publish("postProcessText",T={text:t,x:i,y:r,options:n,mutex:{pdfEscape:_e,activeFontKey:x,fonts:ee,activeFontSize:j}}),c=T.mutex.isHex,b=p(t=T.text),t=[];var Y,Z,$,te=0,ie=(C=b.length,"");for(J=0;J<C;J++)ie="",Array.isArray(b[J])?(Y=parseFloat(b[J][1]),Z=parseFloat(b[J][2]),$=(c?"<":"(")+b[J][0]+(c?">":")"),te=1):(Y=Ke(i),Z=Xe(r),$=(c?"<":"(")+b[J]+(c?">":")")),void 0!==V&&void 0!==V[J]&&(ie=V[J]+" Tw\n"),t.push(0!==N.length&&0===J?ie+N.join(" ")+" "+Y.toFixed(2)+" "+Z.toFixed(2)+" Tm\n"+$:1===te||0===te&&0===J?ie+Y.toFixed(2)+" "+Z.toFixed(2)+" Td\n"+$:ie+$);t=t.join(0===te?" Tj\nT* ":" Tj\n"),t+=" Tj\n";var re="BT\n/"+x+" "+j+" Tf\n"+(j*h).toFixed(2)+" TL\n"+et+"\n";return re+=u,re+=t,k(re+="ET"),d[x]=!0,A},A.__private__.lstext=A.lstext=function(e,t,i,r){return console.warn("jsPDF.lstext is deprecated"),this.text(e,t,i,{charSpace:r})},A.__private__.clip=A.clip=function(e){k("evenodd"===e?"W*":"W"),k("n")},A.__private__.clip_fixed=A.clip_fixed=function(e){console.log("clip_fixed is deprecated"),A.clip(e)};var Qe=A.__private__.isValidStyle=function(e){var t=!1;return-1!==[void 0,null,"S","F","DF","FD","f","f*","B","B*"].indexOf(e)&&(t=!0),t},ke=A.__private__.getStyle=function(e){var t="S";return"F"===e?t="f":"FD"===e||"DF"===e?t="B":"f"!==e&&"f*"!==e&&"B"!==e&&"B*"!==e||(t=e),t};A.__private__.line=A.line=function(e,t,i,r){if(isNaN(e)||isNaN(t)||isNaN(i)||isNaN(r))throw new Error("Invalid arguments passed to jsPDF.line");return this.lines([[i-e,r-t]],e,t)},A.__private__.lines=A.lines=function(e,t,i,r,n,o){var s,a,l,c,u,h,d,A,p,f,g,m;if("number"==typeof e&&(m=i,i=t,t=e,e=m),r=r||[1,1],o=o||!1,isNaN(t)||isNaN(i)||!Array.isArray(e)||!Array.isArray(r)||!Qe(n)||"boolean"!=typeof o)throw new Error("Invalid arguments passed to jsPDF.lines");for(k(v(Ke(t))+" "+v(Xe(i))+" m "),s=r[0],a=r[1],c=e.length,f=t,g=i,l=0;l<c;l++)2===(u=e[l]).length?(g=u[1]*a+g,k(v(Ke(f=u[0]*s+f))+" "+v(Xe(g))+" l")):(h=u[0]*s+f,d=u[1]*a+g,A=u[2]*s+f,p=u[3]*a+g,f=u[4]*s+f,g=u[5]*a+g,k(v(Ke(h))+" "+v(Xe(d))+" "+v(Ke(A))+" "+v(Xe(p))+" "+v(Ke(f))+" "+v(Xe(g))+" c"));return o&&k(" h"),null!==n&&k(ke(n)),this},A.__private__.rect=A.rect=function(e,t,i,r,n){if(isNaN(e)||isNaN(t)||isNaN(i)||isNaN(r)||!Qe(n))throw new Error("Invalid arguments passed to jsPDF.rect");return k([y(Ke(e)),y(Xe(t)),y(i*D),y(-r*D),"re"].join(" ")),null!==n&&k(ke(n)),this},A.__private__.triangle=A.triangle=function(e,t,i,r,n,o,s){if(isNaN(e)||isNaN(t)||isNaN(i)||isNaN(r)||isNaN(n)||isNaN(o)||!Qe(s))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[i-e,r-t],[n-i,o-r],[e-n,t-o]],e,t,[1,1],s,!0),this},A.__private__.roundedRect=A.roundedRect=function(e,t,i,r,n,o,s){if(isNaN(e)||isNaN(t)||isNaN(i)||isNaN(r)||isNaN(n)||isNaN(o)||!Qe(s))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var a=4/3*(Math.SQRT2-1);return this.lines([[i-2*n,0],[n*a,0,n,o-o*a,n,o],[0,r-2*o],[0,o*a,-n*a,o,-n,o],[2*n-i,0],[-n*a,0,-n,-o*a,-n,-o],[0,2*o-r],[0,-o*a,n*a,-o,n,-o]],e+n,t,[1,1],s),this},A.__private__.ellipse=A.ellipse=function(e,t,i,r,n){if(isNaN(e)||isNaN(t)||isNaN(i)||isNaN(r)||!Qe(n))throw new Error("Invalid arguments passed to jsPDF.ellipse");var o=4/3*(Math.SQRT2-1)*i,s=4/3*(Math.SQRT2-1)*r;return k([y(Ke(e+i)),y(Xe(t)),"m",y(Ke(e+i)),y(Xe(t-s)),y(Ke(e+o)),y(Xe(t-r)),y(Ke(e)),y(Xe(t-r)),"c"].join(" ")),k([y(Ke(e-o)),y(Xe(t-r)),y(Ke(e-i)),y(Xe(t-s)),y(Ke(e-i)),y(Xe(t)),"c"].join(" ")),k([y(Ke(e-i)),y(Xe(t+s)),y(Ke(e-o)),y(Xe(t+r)),y(Ke(e)),y(Xe(t+r)),"c"].join(" ")),k([y(Ke(e+o)),y(Xe(t+r)),y(Ke(e+i)),y(Xe(t+s)),y(Ke(e+i)),y(Xe(t)),"c"].join(" ")),null!==n&&k(ke(n)),this},A.__private__.circle=A.circle=function(e,t,i,r){if(isNaN(e)||isNaN(t)||isNaN(i)||!Qe(r))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(e,t,i,i,r)},A.setFont=function(e,t){return x=Te(e,t,{disableWarning:!1}),this},A.setFontStyle=A.setFontType=function(e){return x=Te(void 0,e),this},A.__private__.getFontList=A.getFontList=function(){var e,t,i,r={};for(e in te)if(te.hasOwnProperty(e))for(t in r[e]=i=[],te[e])te[e].hasOwnProperty(t)&&i.push(t);return r},A.addFont=function(e,t,i,r){ve.call(this,e,t,i,r=r||"Identity-H")};var ze,Ve=l.lineWidth||.200025,Ge=A.__private__.setLineWidth=A.setLineWidth=function(e){return k((e*D).toFixed(2)+" w"),this},je=(A.__private__.setLineDash=r.API.setLineDash=function(e,t){if(e=e||[],t=t||0,isNaN(t)||!Array.isArray(e))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return e=e.map((function(e){return(e*D).toFixed(3)})).join(" "),t=parseFloat((t*D).toFixed(3)),k("["+e+"] "+t+" d"),this},A.__private__.getLineHeight=A.getLineHeight=function(){return j*ze}),We=(je=A.__private__.getLineHeight=A.getLineHeight=function(){return j*ze},A.__private__.setLineHeightFactor=A.setLineHeightFactor=function(e){return"number"==typeof(e=e||1.15)&&(ze=e),this}),qe=A.__private__.getLineHeightFactor=A.getLineHeightFactor=function(){return ze};We(l.lineHeight);var Ke=A.__private__.getHorizontalCoordinate=function(e){return e*D},Xe=A.__private__.getVerticalCoordinate=function(e){return re[B].mediaBox.topRightY-re[B].mediaBox.bottomLeftY-e*D},Je=A.__private__.getHorizontalCoordinateString=function(e){return y(e*D)},Ye=A.__private__.getVerticalCoordinateString=function(e){return y(re[B].mediaBox.topRightY-re[B].mediaBox.bottomLeftY-e*D)},Ze=l.strokeColor||"0 G",$e=(A.__private__.getStrokeColor=A.getDrawColor=function(){return Ae(Ze)},A.__private__.setStrokeColor=A.setDrawColor=function(e,t,i,r){return Ze=pe({ch1:e,ch2:t,ch3:i,ch4:r,pdfColorType:"draw",precision:2}),k(Ze),this},l.fillColor||"0 g"),et=(A.__private__.getFillColor=A.getFillColor=function(){return Ae($e)},A.__private__.setFillColor=A.setFillColor=function(e,t,i,r){return $e=pe({ch1:e,ch2:t,ch3:i,ch4:r,pdfColorType:"fill",precision:2}),k($e),this},l.textColor||"0 g"),tt=A.__private__.getTextColor=A.getTextColor=function(){return Ae(et)},it=(A.__private__.setTextColor=A.setTextColor=function(e,t,i,r){return et=pe({ch1:e,ch2:t,ch3:i,ch4:r,pdfColorType:"text",precision:3}),this},l.charSpace||0),rt=A.__private__.getCharSpace=A.getCharSpace=function(){return it},nt=(A.__private__.setCharSpace=A.setCharSpace=function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return it=e,this},0);A.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},A.__private__.setLineCap=A.setLineCap=function(e){var t=A.CapJoinStyles[e];if(void 0===t)throw new Error("Line cap style of '"+e+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return k((nt=t)+" J"),this};var ot,st=0;for(var at in A.__private__.setLineJoin=A.setLineJoin=function(e){var t=A.CapJoinStyles[e];if(void 0===t)throw new Error("Line join style of '"+e+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return k((st=t)+" j"),this},A.__private__.setMiterLimit=A.setMiterLimit=function(e){if(e=e||0,isNaN(e))throw new Error("Invalid argument passed to jsPDF.setMiterLimit");return ot=parseFloat(y(e*D)),k(ot+" M"),this},A.save=function(e,i){if(e=e||"generated.pdf",(i=i||{}).returnPromise=i.returnPromise||!1,!1!==i.returnPromise)return new Promise((function(i,r){try{var n=Ee(De(xe()),e);"function"==typeof Ee.unload&&t.setTimeout&&setTimeout(Ee.unload,911),i(n)}catch(i){r(i.message)}}));Ee(De(xe()),e),"function"==typeof Ee.unload&&t.setTimeout&&setTimeout(Ee.unload,911)},r.API)r.API.hasOwnProperty(at)&&("events"===at&&r.API.events.length?function(e,t){var i,r;for(r=t.length-1;-1!==r;r--)e.subscribe.apply(e,[t[r][0]].concat("function"==typeof(i=t[r][1])?[i]:i))}(oe,r.API.events):A[at]=r.API[at]);return A.internal={pdfEscape:_e,getStyle:ke,getFont:function(){return ee[Te.apply(A,arguments)]},getFontSize:W,getCharSpace:rt,getTextColor:tt,getLineHeight:je,getLineHeightFactor:qe,write:z,getHorizontalCoordinate:Ke,getVerticalCoordinate:Xe,getCoordinateString:Je,getVerticalCoordinateString:Ye,collections:{},newObject:ae,newAdditionalObject:ue,newObjectDeferred:le,newObjectDeferredBegin:ce,getFilters:fe,putStream:ge,events:oe,scaleFactor:D,pageSize:{getWidth:function(){return(re[B].mediaBox.topRightX-re[B].mediaBox.bottomLeftX)/D},setWidth:function(e){re[B].mediaBox.topRightX=e*D+re[B].mediaBox.bottomLeftX},getHeight:function(){return(re[B].mediaBox.topRightY-re[B].mediaBox.bottomLeftY)/D},setHeight:function(e){re[B].mediaBox.topRightY=e*D+re[B].mediaBox.bottomLeftY}},output:Re,getNumberOfPages:Le,pages:P,out:k,f2:y,f3:v,getPageInfo:Me,getPageInfoByObjId:Pe,getCurrentPageInfo:He,getPDFVersion:f,hasHotfix:Ue},Object.defineProperty(A.internal.pageSize,"width",{get:function(){return(re[B].mediaBox.topRightX-re[B].mediaBox.bottomLeftX)/D},set:function(e){re[B].mediaBox.topRightX=e*D+re[B].mediaBox.bottomLeftX},enumerable:!0,configurable:!0}),Object.defineProperty(A.internal.pageSize,"height",{get:function(){return(re[B].mediaBox.topRightY-re[B].mediaBox.bottomLeftY)/D},set:function(e){re[B].mediaBox.topRightY=e*D+re[B].mediaBox.bottomLeftY},enumerable:!0,configurable:!0}),function(e){for(var t=0,i=G.length;t<i;t++){var r=ve(e[t][0],e[t][1],e[t][2],G[t][3],!0);d[r]=!0;var n=e[t][0].split("-");ye(r,n[0],n[1]||"")}oe.publish("addFonts",{fonts:ee,dictionary:te})}(G),x="F1",Ce(s,n),oe.publish("initialized"),A}return r.API={events:[]},r.version="1.5.3",t.jsPDF=r,"function"==typeof define&&define.amd?define("jsPDF",(function(){return r})):"undefined"!=typeof module&&module.exports?(module.exports=r,module.exports.jsPDF=r):t.jsPDF=r,r}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||"undefined"!=typeof global&&global||Function('return typeof this === "object" && this.content')()||Function("return this")());(function(t,i){var r,n=1,o=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},s=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},a=function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.f2");return e.toFixed(2)},l=function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.f2");return e.toFixed(5)};t.__acroform__={};var c=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},u=function(e){return e*n},h=function(e){return e/n},d=function(e){var t=new D,i=K.internal.getHeight(e)||0,r=K.internal.getWidth(e)||0;return t.BBox=[0,0,Number(a(r)),Number(a(i))],t},A=t.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|1<<t},p=t.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&~(1<<t)},f=t.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return 0==(e&1<<t)?0:1},g=t.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return f(e,t-1)},m=t.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return A(e,t-1)},w=t.__acroform__.clearBitForPdf=function(e,t,i){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return p(e,t-1)},y=t.__acroform__.calculateCoordinates=function(e){var t=this.internal.getHorizontalCoordinate,i=this.internal.getVerticalCoordinate,r=e[0],n=e[1],o=e[2],s=e[3],l={};return l.lowerLeft_X=t(r)||0,l.lowerLeft_Y=i(n+s)||0,l.upperRight_X=t(r+o)||0,l.upperRight_Y=i(n)||0,[Number(a(l.lowerLeft_X)),Number(a(l.lowerLeft_Y)),Number(a(l.upperRight_X)),Number(a(l.upperRight_Y))]},v=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],i=_(e,e.V||e.DV),n=r.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(r.__private__.encodeColorString(e.color)),t.push("/"+n+" "+a(i.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(i.text),t.push("ET"),t.push("Q"),t.push("EMC");var o=new d(e);return o.stream=t.join("\n"),o}},_=function(e,t){var i=e.maxFontSize||12,n={text:"",fontSize:""},s=(t=")"==(t="("==t.substr(0,1)?t.substr(1):t).substr(t.length-1)?t.substr(0,t.length-1):t).split(" "),l=(r.__private__.encodeColorString(e.color),i),c=K.internal.getHeight(e)||0;c=c<0?-c:c;var u=K.internal.getWidth(e)||0;u=u<0?-u:u;var h=function(t,i,r){return t+1<s.length&&b(i+" "+s[t+1],e,r).width<=u-4};l++;e:for(;;){t="";var d=b("3",e,--l).height,A=e.multiline?c-l:(c-d)/2,p=-2,f=A+=2,g=0,m=0,w=0;if(l<=0){t="(...) Tj\n",t+="% Width of Text: "+b(t,e,l=12).width+", FieldWidth:"+u+"\n";break}w=b(s[0]+" ",e,l).width;var y="",v=0;for(var _ in s)if(s.hasOwnProperty(_)){y=" "==(y+=s[_]+" ").substr(y.length-1)?y.substr(0,y.length-1):y;var C=parseInt(_);w=b(y+" ",e,l).width;var E=h(C,y,l),S=_>=s.length-1;if(E&&!S){y+=" ";continue}if(E||S){if(S)m=C;else if(e.multiline&&c<(d+2)*(v+2)+2)continue e}else{if(!e.multiline)continue e;if(c<(d+2)*(v+2)+2)continue e;m=C}for(var L="",T=g;T<=m;T++)L+=s[T]+" ";switch(L=" "==L.substr(L.length-1)?L.substr(0,L.length-1):L,w=b(L,e,l).width,e.textAlign){case"right":p=u-w-2;break;case"center":p=(u-w)/2;break;case"left":default:p=2}t+=a(p)+" "+a(f)+" Td\n",t+="("+o(L)+") Tj\n",t+=-a(p)+" 0 Td\n",f=-(l+2),w=0,g=m+1,v++,y=""}break}return n.text=t,n.fontSize=l,n},b=function(e,t,i){var n=r.internal.getFont(t.fontName,t.fontStyle),o=r.getStringUnitWidth(e,{font:n,fontSize:parseFloat(i),charSpace:0})*parseFloat(i);return{height:r.getStringUnitWidth("3",{font:n,fontSize:parseFloat(i),charSpace:0})*parseFloat(i)*1.5,width:o}},C={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},E=function(){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var e=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var t in e)if(e.hasOwnProperty(t)){var i=e[t];i.objId=void 0,i.hasAnnotation&&S.call(r,i)}},S=function(e){var t={type:"reference",object:e};void 0===r.internal.getPageInfo(e.page).pageContext.annotations.find((function(e){return e.type===t.type&&e.object===t.object}))&&r.internal.getPageInfo(e.page).pageContext.annotations.push(t)},L=function(){if(void 0===r.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")},T=function(){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0},B=function(t){var i=!t;for(var n in t||(r.internal.newObjectDeferredBegin(r.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),r.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),t=t||r.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(t.hasOwnProperty(n)){var o=t[n],s=[],a=o.Rect;if(o.Rect&&(o.Rect=y.call(this,o.Rect)),r.internal.newObjectDeferredBegin(o.objId,!0),o.DA=K.createDefaultAppearanceStream(o),"object"===e(o)&&"function"==typeof o.getKeyValueListForStream&&(s=o.getKeyValueListForStream()),o.Rect=a,o.hasAppearanceStream&&!o.appearanceStreamContent){var l=v.call(this,o);s.push({key:"AP",value:"<</N "+l+">>"}),r.internal.acroformPlugin.xForms.push(l)}if(o.appearanceStreamContent){var c="";for(var u in o.appearanceStreamContent)if(o.appearanceStreamContent.hasOwnProperty(u)){var h=o.appearanceStreamContent[u];if(c+="/"+u+" ",c+="<<",1<=Object.keys(h).length||Array.isArray(h))for(var n in h){var d;h.hasOwnProperty(n)&&("function"==typeof(d=h[n])&&(d=d.call(this,o)),c+="/"+n+" "+d+" ",0<=r.internal.acroformPlugin.xForms.indexOf(d)||r.internal.acroformPlugin.xForms.push(d))}else"function"==typeof(d=h)&&(d=d.call(this,o)),c+="/"+n+" "+d,0<=r.internal.acroformPlugin.xForms.indexOf(d)||r.internal.acroformPlugin.xForms.push(d);c+=">>"}s.push({key:"AP",value:"<<\n"+c+">>"})}r.internal.putStream({additionalKeyValues:s}),r.internal.out("endobj")}i&&N.call(this,r.internal.acroformPlugin.xForms)},N=function(t){for(var i in t)if(t.hasOwnProperty(i)){var n=i,o=t[i];r.internal.newObjectDeferredBegin(o&&o.objId,!0),"object"===e(o)&&"function"==typeof o.putStream&&o.putStream(),delete t[n]}},I=function(){if(void 0!==this.internal&&(void 0===this.internal.acroformPlugin||!1===this.internal.acroformPlugin.isInitialized)){if(r=this,U.FieldNum=0,this.internal.acroformPlugin=JSON.parse(JSON.stringify(C)),this.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");n=r.internal.scaleFactor,r.internal.acroformPlugin.acroFormDictionaryRoot=new R,r.internal.acroformPlugin.acroFormDictionaryRoot._eventID=r.internal.events.subscribe("postPutResources",T),r.internal.events.subscribe("buildDocument",E),r.internal.events.subscribe("putCatalog",L),r.internal.events.subscribe("postPutPages",B),r.internal.acroformPlugin.isInitialized=!0}},F=t.__acroform__.arrayToPdfArray=function(t){if(Array.isArray(t)){for(var i="[",r=0;r<t.length;r++)switch(0!==r&&(i+=" "),e(t[r])){case"boolean":case"number":case"object":i+=t[r].toString();break;case"string":"/"!==t[r].substr(0,1)?i+="("+o(t[r].toString())+")":i+=t[r].toString()}return i+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},O=function(e){return(e=e||"").toString(),"("+o(e)+")"},x=function(){var e;Object.defineProperty(this,"objId",{configurable:!0,get:function(){if(e||(e=r.internal.newObjectDeferred()),!e)throw new Error("AcroFormPDFObject: Couldn't create Object ID");return e},set:function(t){e=t}})};x.prototype.toString=function(){return this.objId+" 0 R"},x.prototype.putStream=function(){var e=this.getKeyValueListForStream();r.internal.putStream({data:this.stream,additionalKeyValues:e}),r.internal.out("endobj")},x.prototype.getKeyValueListForStream=function(){return function(e){var t=[],i=Object.getOwnPropertyNames(e).filter((function(e){return"content"!=e&&"appearanceStreamContent"!=e&&"_"!=e.substring(0,1)}));for(var r in i)if(!1===Object.getOwnPropertyDescriptor(e,i[r]).configurable){var n=i[r],o=e[n];o&&(Array.isArray(o)?t.push({key:n,value:F(o)}):o instanceof x?t.push({key:n,value:o.objId+" 0 R"}):"function"!=typeof o&&t.push({key:n,value:o}))}return t}(this)};var D=function(){x.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writeable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writeable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writeable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,writeable:!0,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writeable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){e=t.trim()},get:function(){return e||null}})};c(D,x);var R=function(){x.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return 0<t.length?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e)return"("+e+")"},set:function(t){e=t}})};c(R,x);var U=function e(){x.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(e){if(isNaN(e))throw new Error('Invalid value "'+e+'" for attribute F supplied.');t=e}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return Boolean(g(t,3))},set:function(e){this.F=!0===Boolean(e)?m(t,3):w(t,3)}});var i=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return i},set:function(e){if(isNaN(e))throw new Error('Invalid value "'+e+'" for attribute Ff supplied.');i=e}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(0!==r.length)return r},set:function(e){r=void 0!==e?e:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:h(r[0])},set:function(e){r[0]=u(e)}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:h(r[1])},set:function(e){r[1]=u(e)}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:h(r[2])},set:function(e){r[2]=u(e)}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:h(r[3])},set:function(e){r[3]=u(e)}});var n="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){switch(e){case"/Btn":case"/Tx":case"/Ch":case"/Sig":n=e;break;default:throw new Error('Invalid value "'+e+'" for attribute FT supplied.')}}});var a=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!a||a.length<1){if(this instanceof G)return;a="FieldObject"+e.FieldNum++}return"("+o(a)+")"},set:function(e){a=e.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return a},set:function(e){a=e}});var l="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return l},set:function(e){l=e}});var c="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return c},set:function(e){c=e}});var d=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return h(d)},set:function(e){d=u(e)}});var A=50;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return h(A)},set:function(e){A=u(e)}});var p="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return p},set:function(e){p=e}});var f="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!f||this instanceof G||this instanceof W))return O(f)},set:function(e){e=e.toString(),f=e}});var y=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(y)return this instanceof k==0?O(y):y},set:function(e){e=e.toString(),y=this instanceof k==0?"("===e.substr(0,1)?s(e.substr(1,e.length-2)):s(e):e}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof k==1?s(y.substr(1,y.length-1)):y},set:function(e){e=e.toString(),y=this instanceof k==1?"/"+e:e}});var v=null;Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(v)return this instanceof k==0?O(v):v},set:function(e){e=e.toString(),v=this instanceof k==0?"("===e.substr(0,1)?s(e.substr(1,e.length-2)):s(e):e}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof k==1?s(v.substr(1,v.length-1)):v},set:function(e){e=e.toString(),v=this instanceof k==1?"/"+e:e}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var _,b=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,writeable:!0,get:function(){return b},set:function(e){e=Boolean(e),b=e}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,writeable:!0,get:function(){if(_)return _},set:function(e){_=e}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return Boolean(g(this.Ff,1))},set:function(e){this.Ff=!0===Boolean(e)?m(this.Ff,1):w(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return Boolean(g(this.Ff,2))},set:function(e){this.Ff=!0===Boolean(e)?m(this.Ff,2):w(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return Boolean(g(this.Ff,3))},set:function(e){this.Ff=!0===Boolean(e)?m(this.Ff,3):w(this.Ff,3)}});var C=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(null!==C)return C},set:function(e){if(-1===[0,1,2].indexOf(e))throw new Error('Invalid value "'+e+'" for attribute Q supplied.');C=e}}),Object.defineProperty(this,"textAlign",{get:function(){var e="left";switch(C){case 0:default:e="left";break;case 1:e="center";break;case 2:e="right"}return e},configurable:!0,enumerable:!0,set:function(e){switch(e){case"right":case 2:C=2;break;case"center":case 1:C=1;break;case"left":case 0:default:C=0}}})};c(U,x);var M=function(){U.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){e=t}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return F(t)},set:function(e){var i,r;r=[],"string"==typeof(i=e)&&(r=function(e,t,i){i||(i=1);for(var r,n=[];r=t.exec(e);)n.push(r[i]);return n}(i,/\((.*?)\)/g)),t=r}}),this.getOptions=function(){return t},this.setOptions=function(e){t=e,this.sort&&t.sort()},this.addOption=function(e){e=(e=e||"").toString(),t.push(e),this.sort&&t.sort()},this.removeOption=function(e,i){for(i=i||!1,e=(e=e||"").toString();-1!==t.indexOf(e)&&(t.splice(t.indexOf(e),1),!1!==i););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return Boolean(g(this.Ff,18))},set:function(e){this.Ff=!0===Boolean(e)?m(this.Ff,18):w(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return Boolean(g(this.Ff,19))},set:function(e){!0===this.combo&&(this.Ff=!0===Boolean(e)?m(this.Ff,19):w(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return Boolean(g(this.Ff,20))},set:function(e){!0===Boolean(e)?(this.Ff=m(this.Ff,20),t.sort()):this.Ff=w(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return Boolean(g(this.Ff,22))},set:function(e){this.Ff=!0===Boolean(e)?m(this.Ff,22):w(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return Boolean(g(this.Ff,23))},set:function(e){this.Ff=!0===Boolean(e)?m(this.Ff,23):w(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return Boolean(g(this.Ff,27))},set:function(e){this.Ff=!0===Boolean(e)?m(this.Ff,27):w(this.Ff,27)}}),this.hasAppearanceStream=!1};c(M,U);var P=function(){M.call(this),this.fontName="helvetica",this.combo=!1};c(P,M);var H=function(){P.call(this),this.combo=!0};c(H,P);var Q=function(){H.call(this),this.edit=!0};c(Q,H);var k=function(){U.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return Boolean(g(this.Ff,15))},set:function(e){this.Ff=!0===Boolean(e)?m(this.Ff,15):w(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return Boolean(g(this.Ff,16))},set:function(e){this.Ff=!0===Boolean(e)?m(this.Ff,16):w(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return Boolean(g(this.Ff,17))},set:function(e){this.Ff=!0===Boolean(e)?m(this.Ff,17):w(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return Boolean(g(this.Ff,26))},set:function(e){this.Ff=!0===Boolean(e)?m(this.Ff,26):w(this.Ff,26)}});var t,i={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){if(0!==Object.keys(i).length){var e,t=[];for(e in t.push("<<"),i)t.push("/"+e+" ("+i[e]+")");return t.push(">>"),t.join("\n")}},set:function(t){"object"===e(t)&&(i=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return i.CA||""},set:function(e){"string"==typeof e&&(i.CA=e)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(e){t="/"+e}})};c(k,U);var z=function(){k.call(this),this.pushButton=!0};c(z,k);var V=function(){k.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=void 0!==t?t:[]}})};c(V,k);var G=function(){var t,i;U.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return i},set:function(e){i=e}});var r,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var e,t=[];for(e in t.push("<<"),n)t.push("/"+e+" ("+n[e]+")");return t.push(">>"),t.join("\n")},set:function(t){"object"===e(t)&&(n=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(e){"string"==typeof e&&(n.CA=e)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(e){r=e}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(e){r="/"+e}}),this.optionName=name,this.caption="l",this.appearanceState="Off",this._AppearanceType=K.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(name)};c(G,U),V.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var i=this.Kids[t];i.appearanceStreamContent=e.createAppearanceStream(i.optionName),i.caption=e.getCA()}},V.prototype.createOption=function(e){var t=new G;return t.Parent=this,t.optionName=e,this.Kids.push(t),X.call(this,t),t};var j=function(){k.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=K.CheckBox.createAppearanceStream()};c(j,k);var W=function(){U.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return Boolean(g(this.Ff,13))},set:function(e){this.Ff=!0===Boolean(e)?m(this.Ff,13):w(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return Boolean(g(this.Ff,21))},set:function(e){this.Ff=!0===Boolean(e)?m(this.Ff,21):w(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return Boolean(g(this.Ff,23))},set:function(e){this.Ff=!0===Boolean(e)?m(this.Ff,23):w(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return Boolean(g(this.Ff,24))},set:function(e){this.Ff=!0===Boolean(e)?m(this.Ff,24):w(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return Boolean(g(this.Ff,25))},set:function(e){this.Ff=!0===Boolean(e)?m(this.Ff,25):w(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return Boolean(g(this.Ff,26))},set:function(e){this.Ff=!0===Boolean(e)?m(this.Ff,26):w(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};c(W,U);var q=function(){W.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return Boolean(g(this.Ff,14))},set:function(e){this.Ff=!0===Boolean(e)?m(this.Ff,14):w(this.Ff,14)}}),this.password=!0};c(q,W);var K={CheckBox:{createAppearanceStream:function(){return{N:{On:K.CheckBox.YesNormal},D:{On:K.CheckBox.YesPushDown,Off:K.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=d(e),i=[],n=r.internal.getFont(e.fontName,e.fontStyle).id,o=r.__private__.encodeColorString(e.color),s=_(e,e.caption);return i.push("0.749023 g"),i.push("0 0 "+a(K.internal.getWidth(e))+" "+a(K.internal.getHeight(e))+" re"),i.push("f"),i.push("BMC"),i.push("q"),i.push("0 0 1 rg"),i.push("/"+n+" "+a(s.fontSize)+" Tf "+o),i.push("BT"),i.push(s.text),i.push("ET"),i.push("Q"),i.push("EMC"),t.stream=i.join("\n"),t},YesNormal:function(e){var t=d(e),i=r.internal.getFont(e.fontName,e.fontStyle).id,n=r.__private__.encodeColorString(e.color),o=[],s=K.internal.getHeight(e),l=K.internal.getWidth(e),c=_(e,e.caption);return o.push("1 g"),o.push("0 0 "+a(l)+" "+a(s)+" re"),o.push("f"),o.push("q"),o.push("0 0 1 rg"),o.push("0 0 "+a(l-1)+" "+a(s-1)+" re"),o.push("W"),o.push("n"),o.push("0 g"),o.push("BT"),o.push("/"+i+" "+a(c.fontSize)+" Tf "+n),o.push(c.text),o.push("ET"),o.push("Q"),t.stream=o.join("\n"),t},OffPushDown:function(e){var t=d(e),i=[];return i.push("0.749023 g"),i.push("0 0 "+a(K.internal.getWidth(e))+" "+a(K.internal.getHeight(e))+" re"),i.push("f"),t.stream=i.join("\n"),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:K.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=K.RadioButton.Circle.YesNormal,t.D[e]=K.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=d(e),i=[],r=K.internal.getWidth(e)<=K.internal.getHeight(e)?K.internal.getWidth(e)/4:K.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var n=Number((r*K.internal.Bezier_C).toFixed(5));return i.push("q"),i.push("1 0 0 1 "+l(K.internal.getWidth(e)/2)+" "+l(K.internal.getHeight(e)/2)+" cm"),i.push(r+" 0 m"),i.push(r+" "+n+" "+n+" "+r+" 0 "+r+" c"),i.push("-"+n+" "+r+" -"+r+" "+n+" -"+r+" 0 c"),i.push("-"+r+" -"+n+" -"+n+" -"+r+" 0 -"+r+" c"),i.push(n+" -"+r+" "+r+" -"+n+" "+r+" 0 c"),i.push("f"),i.push("Q"),t.stream=i.join("\n"),t},YesPushDown:function(e){var t=d(e),i=[],r=K.internal.getWidth(e)<=K.internal.getHeight(e)?K.internal.getWidth(e)/4:K.internal.getHeight(e)/4,n=(r=Number((.9*r).toFixed(5)),Number((2*r).toFixed(5))),o=Number((n*K.internal.Bezier_C).toFixed(5)),s=Number((r*K.internal.Bezier_C).toFixed(5));return i.push("0.749023 g"),i.push("q"),i.push("1 0 0 1 "+l(K.internal.getWidth(e)/2)+" "+l(K.internal.getHeight(e)/2)+" cm"),i.push(n+" 0 m"),i.push(n+" "+o+" "+o+" "+n+" 0 "+n+" c"),i.push("-"+o+" "+n+" -"+n+" "+o+" -"+n+" 0 c"),i.push("-"+n+" -"+o+" -"+o+" -"+n+" 0 -"+n+" c"),i.push(o+" -"+n+" "+n+" -"+o+" "+n+" 0 c"),i.push("f"),i.push("Q"),i.push("0 g"),i.push("q"),i.push("1 0 0 1 "+l(K.internal.getWidth(e)/2)+" "+l(K.internal.getHeight(e)/2)+" cm"),i.push(r+" 0 m"),i.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),i.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),i.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),i.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),i.push("f"),i.push("Q"),t.stream=i.join("\n"),t},OffPushDown:function(e){var t=d(e),i=[],r=K.internal.getWidth(e)<=K.internal.getHeight(e)?K.internal.getWidth(e)/4:K.internal.getHeight(e)/4,n=(r=Number((.9*r).toFixed(5)),Number((2*r).toFixed(5))),o=Number((n*K.internal.Bezier_C).toFixed(5));return i.push("0.749023 g"),i.push("q"),i.push("1 0 0 1 "+l(K.internal.getWidth(e)/2)+" "+l(K.internal.getHeight(e)/2)+" cm"),i.push(n+" 0 m"),i.push(n+" "+o+" "+o+" "+n+" 0 "+n+" c"),i.push("-"+o+" "+n+" -"+n+" "+o+" -"+n+" 0 c"),i.push("-"+n+" -"+o+" -"+o+" -"+n+" 0 -"+n+" c"),i.push(o+" -"+n+" "+n+" -"+o+" "+n+" 0 c"),i.push("f"),i.push("Q"),t.stream=i.join("\n"),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:K.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=K.RadioButton.Cross.YesNormal,t.D[e]=K.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=d(e),i=[],r=K.internal.calculateCross(e);return i.push("q"),i.push("1 1 "+a(K.internal.getWidth(e)-2)+" "+a(K.internal.getHeight(e)-2)+" re"),i.push("W"),i.push("n"),i.push(a(r.x1.x)+" "+a(r.x1.y)+" m"),i.push(a(r.x2.x)+" "+a(r.x2.y)+" l"),i.push(a(r.x4.x)+" "+a(r.x4.y)+" m"),i.push(a(r.x3.x)+" "+a(r.x3.y)+" l"),i.push("s"),i.push("Q"),t.stream=i.join("\n"),t},YesPushDown:function(e){var t=d(e),i=K.internal.calculateCross(e),r=[];return r.push("0.749023 g"),r.push("0 0 "+a(K.internal.getWidth(e))+" "+a(K.internal.getHeight(e))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+a(K.internal.getWidth(e)-2)+" "+a(K.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push(a(i.x1.x)+" "+a(i.x1.y)+" m"),r.push(a(i.x2.x)+" "+a(i.x2.y)+" l"),r.push(a(i.x4.x)+" "+a(i.x4.y)+" m"),r.push(a(i.x3.x)+" "+a(i.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join("\n"),t},OffPushDown:function(e){var t=d(e),i=[];return i.push("0.749023 g"),i.push("0 0 "+a(K.internal.getWidth(e))+" "+a(K.internal.getHeight(e))+" re"),i.push("f"),t.stream=i.join("\n"),t}}},createDefaultAppearanceStream:function(e){var t=r.internal.getFont(e.fontName,e.fontStyle).id,i=r.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+i}};K.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=K.internal.getWidth(e),i=K.internal.getHeight(e),r=Math.min(t,i);return{x1:{x:(t-r)/2,y:(i-r)/2+r},x2:{x:(t-r)/2+r,y:(i-r)/2},x3:{x:(t-r)/2,y:(i-r)/2},x4:{x:(t-r)/2+r,y:(i-r)/2+r}}}},K.internal.getWidth=function(t){var i=0;return"object"===e(t)&&(i=u(t.Rect[2])),i},K.internal.getHeight=function(t){var i=0;return"object"===e(t)&&(i=u(t.Rect[3])),i};var X=t.addField=function(e){if(I.call(this),!(e instanceof U))throw new Error("Invalid argument passed to jsPDF.addField.");return(function(e){r.internal.acroformPlugin.printedOut&&(r.internal.acroformPlugin.printedOut=!1,r.internal.acroformPlugin.acroFormDictionaryRoot=null),r.internal.acroformPlugin.acroFormDictionaryRoot||I.call(r),r.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e)}).call(this,e),e.page=r.internal.getCurrentPageInfo().pageNumber,this};t.addButton=function(e){if(e instanceof k==0)throw new Error("Invalid argument passed to jsPDF.addButton.");return X.call(this,e)},t.addTextField=function(e){if(e instanceof W==0)throw new Error("Invalid argument passed to jsPDF.addTextField.");return X.call(this,e)},t.addChoiceField=function(e){if(e instanceof M==0)throw new Error("Invalid argument passed to jsPDF.addChoiceField.");return X.call(this,e)},"object"==e(i)&&void 0===i.ChoiceField&&void 0===i.ListBox&&void 0===i.ComboBox&&void 0===i.EditBox&&void 0===i.Button&&void 0===i.PushButton&&void 0===i.RadioButton&&void 0===i.CheckBox&&void 0===i.TextField&&void 0===i.PasswordField?(i.ChoiceField=M,i.ListBox=P,i.ComboBox=H,i.EditBox=Q,i.Button=k,i.PushButton=z,i.RadioButton=V,i.CheckBox=j,i.TextField=W,i.PasswordField=q,i.AcroForm={Appearance:K}):console.warn("AcroForm-Classes are not populated into global-namespace, because the class-Names exist already."),t.AcroFormChoiceField=M,t.AcroFormListBox=P,t.AcroFormComboBox=H,t.AcroFormEditBox=Q,t.AcroFormButton=k,t.AcroFormPushButton=z,t.AcroFormRadioButton=V,t.AcroFormCheckBox=j,t.AcroFormTextField=W,t.AcroFormPasswordField=q,t.AcroFormAppearance=K,t.AcroForm={ChoiceField:M,ListBox:P,ComboBox:H,EditBox:Q,Button:k,PushButton:z,RadioButton:V,CheckBox:j,TextField:W,PasswordField:q,Appearance:K}})((window.tmp=le).API,"undefined"!=typeof window&&window||"undefined"!=typeof global&&global),function(t){var i="addImage_",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},n=t.getImageFileTypeByImageData=function(e,i){var n,o;i=i||"UNKNOWN";var s,a,l,c="UNKNOWN";for(l in t.isArrayBufferView(e)&&(e=t.arrayBufferToBinaryString(e)),r)for(s=r[l],n=0;n<s.length;n+=1){for(a=!0,o=0;o<s[n].length;o+=1)if(void 0!==s[n][o]&&s[n][o]!==e.charCodeAt(o)){a=!1;break}if(!0===a){c=l;break}}return"UNKNOWN"===c&&"UNKNOWN"!==i&&(console.warn('FileType of Image not recognized. Processing image as "'+i+'".'),c=i),c},o=function e(t){for(var i=this.internal.newObject(),r=this.internal.write,n=this.internal.putStream,o=(0,this.internal.getFilters)();-1!==o.indexOf("FlateEncode");)o.splice(o.indexOf("FlateEncode"),1);t.n=i;var s=[];if(s.push({key:"Type",value:"/XObject"}),s.push({key:"Subtype",value:"/Image"}),s.push({key:"Width",value:t.w}),s.push({key:"Height",value:t.h}),t.cs===this.color_spaces.INDEXED?s.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(t.pal.length/3-1)+" "+("smask"in t?i+2:i+1)+" 0 R]"}):(s.push({key:"ColorSpace",value:"/"+t.cs}),t.cs===this.color_spaces.DEVICE_CMYK&&s.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),s.push({key:"BitsPerComponent",value:t.bpc}),"dp"in t&&s.push({key:"DecodeParms",value:"<<"+t.dp+">>"}),"trns"in t&&t.trns.constructor==Array){for(var a="",l=0,c=t.trns.length;l<c;l++)a+=t.trns[l]+" "+t.trns[l]+" ";s.push({key:"Mask",value:"["+a+"]"})}if("smask"in t&&s.push({key:"SMask",value:i+1+" 0 R"}),n({data:t.data,additionalKeyValues:s,alreadyAppliedFilters:void 0!==t.f?["/"+t.f]:void 0}),r("endobj"),"smask"in t){var u={w:t.w,h:t.h,cs:"DeviceGray",bpc:t.bpc,dp:"/Predictor "+t.p+" /Colors 1 /BitsPerComponent "+t.bpc+" /Columns "+t.w,data:t.smask};"f"in t&&(u.f=t.f),e.call(this,u)}t.cs===this.color_spaces.INDEXED&&(this.internal.newObject(),n({data:this.arrayBufferToBinaryString(new Uint8Array(t.pal))}),r("endobj"))},s=function(){var e=this.internal.collections[i+"images"];for(var t in e)o.call(this,e[t])},a=function(){var e,t=this.internal.collections[i+"images"],r=this.internal.write;for(var n in t)r("/I"+(e=t[n]).i,e.n,"0","R")},l=function(e){return"function"==typeof t["process"+e.toUpperCase()]},c=function(t){return"object"===e(t)&&1===t.nodeType},u=function(e,i){if("IMG"===e.nodeName&&e.hasAttribute("src")){var r=""+e.getAttribute("src");if(0===r.indexOf("data:image/"))return unescape(r);var n=t.loadFile(r);if(void 0!==n)return btoa(n)}if("CANVAS"===e.nodeName){var o=e;return e.toDataURL("image/jpeg",1)}(o=document.createElement("canvas")).width=e.clientWidth||e.width,o.height=e.clientHeight||e.height;var s=o.getContext("2d");if(!s)throw"addImage requires canvas to be supported by browser.";return s.drawImage(e,0,0,o.width,o.height),o.toDataURL("png"==(""+i).toLowerCase()?"image/png":"image/jpeg")},h=function(e,t){var i;if(t)for(var r in t)if(e===t[r].alias){i=t[r];break}return i};t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"},t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"},t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},t.sHashCode=function(e){var t,i=0;if(0===(e=e||"").length)return i;for(t=0;t<e.length;t++)i=(i<<5)-i+e.charCodeAt(t),i|=0;return i},t.isString=function(e){return"string"==typeof e},t.validateStringAsBase64=function(e){(e=e||"").toString().trim();var t=!0;return 0===e.length&&(t=!1),e.length%4!=0&&(t=!1),!1===/^[A-Za-z0-9+\/]+$/.test(e.substr(0,e.length-2))&&(t=!1),!1===/^[A-Za-z0-9\/][A-Za-z0-9+\/]|[A-Za-z0-9+\/]=|==$/.test(e.substr(-2))&&(t=!1),t},t.extractInfoFromBase64DataURI=function(e){return/^data:([\w]+?\/([\w]+?));\S*;*base64,(.+)$/g.exec(e)},t.extractImageFromDataUrl=function(e){var t=(e=e||"").split("base64,"),i=null;if(2===t.length){var r=/^data:(\w*\/\w*);*(charset=[\w=-]*)*;*$/.exec(t[0]);Array.isArray(r)&&(i={mimeType:r[1],charset:r[2],data:t[1]})}return i},t.supportsArrayBuffer=function(){return"undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array},t.isArrayBuffer=function(e){return!!this.supportsArrayBuffer()&&e instanceof ArrayBuffer},t.isArrayBufferView=function(e){return!!this.supportsArrayBuffer()&&"undefined"!=typeof Uint32Array&&(e instanceof Int8Array||e instanceof Uint8Array||"undefined"!=typeof Uint8ClampedArray&&e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array)},t.binaryStringToUint8Array=function(e){for(var t=e.length,i=new Uint8Array(t),r=0;r<t;r++)i[r]=e.charCodeAt(r);return i},t.arrayBufferToBinaryString=function(e){if("function"==typeof atob)return atob(this.arrayBufferToBase64(e))},t.arrayBufferToBase64=function(e){for(var t,i="",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=new Uint8Array(e),o=n.byteLength,s=o%3,a=o-s,l=0;l<a;l+=3)i+=r[(16515072&(t=n[l]<<16|n[l+1]<<8|n[l+2]))>>18]+r[(258048&t)>>12]+r[(4032&t)>>6]+r[63&t];return 1==s?i+=r[(252&(t=n[a]))>>2]+r[(3&t)<<4]+"==":2==s&&(i+=r[(64512&(t=n[a]<<8|n[a+1]))>>10]+r[(1008&t)>>4]+r[(15&t)<<2]+"="),i},t.createImageInfo=function(e,t,i,r,n,o,s,a,l,c,u,h,d){var A={alias:a,w:t,h:i,cs:r,bpc:n,i:s,data:e};return o&&(A.f=o),l&&(A.dp=l),c&&(A.trns=c),u&&(A.pal=u),h&&(A.smask=h),d&&(A.p=d),A},t.addImage=function(r,n,o,d,A,p,f,g,m){var w="";if("string"!=typeof n){var y=p;p=A,A=d,d=o,o=n,n=y}if("object"===e(r)&&!c(r)&&"imageData"in r){var v=r;r=v.imageData,n=v.format||n||"UNKNOWN",o=v.x||o||0,d=v.y||d||0,A=v.w||A,p=v.h||p,f=v.alias||f,g=v.compression||g,m=v.rotation||v.angle||m}var _=this.internal.getFilters();if(void 0===g&&-1!==_.indexOf("FlateEncode")&&(g="SLOW"),"string"==typeof r&&(r=unescape(r)),isNaN(o)||isNaN(d))throw console.error("jsPDF.addImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addImage");var b,C,E,S,L,T,B,N=(function(){var e=this.internal.collections[i+"images"];return e||(this.internal.collections[i+"images"]=e={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",a)),e}).call(this);if(!((b=h(r,N))||(c(r)&&(r=u(r,n)),(null==(B=f)||0===B.length)&&(f="string"==typeof(T=r)?t.sHashCode(T):t.isArrayBufferView(T)?t.sHashCode(t.arrayBufferToBinaryString(T)):null),b=h(f,N)))){if(this.isString(r)&&(""!==(w=this.convertStringToImageData(r))||void 0!==(w=t.loadFile(r)))&&(r=w),n=this.getImageFileTypeByImageData(r,n),!l(n))throw new Error("addImage does not support files of type '"+n+"', please ensure that a plugin for '"+n+"' support is added.");if(this.supportsArrayBuffer()&&(r instanceof Uint8Array||(C=r,r=this.binaryStringToUint8Array(r))),!(b=this["process"+n.toUpperCase()](r,(L=0,(S=N)&&(L=Object.keys?Object.keys(S).length:function(e){var t=0;for(var i in e)e.hasOwnProperty(i)&&t++;return t}(S)),L),f,((E=g)&&"string"==typeof E&&(E=E.toUpperCase()),E in t.image_compression?E:t.image_compression.NONE),C)))throw new Error("An unknown error occurred whilst processing the image")}return(function(e,t,i,r,n,o,s,a){var l=(function(e,t,i){return e||t||(t=e=-96),e<0&&(e=-1*i.w*72/e/this.internal.scaleFactor),t<0&&(t=-1*i.h*72/t/this.internal.scaleFactor),0===e&&(e=t*i.w/i.h),0===t&&(t=e*i.h/i.w),[e,t]}).call(this,i,r,n),c=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString;if(i=l[0],r=l[1],s[o]=n,a){a*=Math.PI/180;var h=Math.cos(a),d=Math.sin(a),A=function(e){return e.toFixed(4)},p=[A(h),A(d),A(-1*d),A(h),0,0,"cm"]}this.internal.write("q"),a?(this.internal.write([1,"0","0",1,c(e),u(t+r),"cm"].join(" ")),this.internal.write(p.join(" ")),this.internal.write([c(i),"0","0",c(r),"0","0","cm"].join(" "))):this.internal.write([c(i),"0","0",c(r),c(e),u(t+r),"cm"].join(" ")),this.internal.write("/I"+n.i+" Do"),this.internal.write("Q")}).call(this,o,d,A,p,b,b.i,N,m),this},t.convertStringToImageData=function(e){var i,r="";if(this.isString(e)){var n;i=null!==(n=this.extractImageFromDataUrl(e))?n.data:e;try{r=atob(i)}catch(e){throw t.validateStringAsBase64(i)?new Error("atob-Error in jsPDF.convertStringToImageData "+e.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertStringToImageData ")}}return r};var d=function(e,t){return e.subarray(t,t+5)};t.processJPEG=function(e,t,i,r,o,s){var a,l=this.decode.DCT_DECODE;if(!this.isString(e)&&!this.isArrayBuffer(e)&&!this.isArrayBufferView(e))return null;if(this.isString(e)&&(a=function(e){var t;if("JPEG"!==n(e))throw new Error("getJpegSize requires a binary string jpeg file");for(var i=256*e.charCodeAt(4)+e.charCodeAt(5),r=4,o=e.length;r<o;){if(255!==e.charCodeAt(r+=i))throw new Error("getJpegSize could not find the size of the image");if(192===e.charCodeAt(r+1)||193===e.charCodeAt(r+1)||194===e.charCodeAt(r+1)||195===e.charCodeAt(r+1)||196===e.charCodeAt(r+1)||197===e.charCodeAt(r+1)||198===e.charCodeAt(r+1)||199===e.charCodeAt(r+1))return t=256*e.charCodeAt(r+5)+e.charCodeAt(r+6),[256*e.charCodeAt(r+7)+e.charCodeAt(r+8),t,e.charCodeAt(r+9)];i=256*e.charCodeAt(r+=2)+e.charCodeAt(r+1)}}(e)),this.isArrayBuffer(e)&&(e=new Uint8Array(e)),this.isArrayBufferView(e)&&(a=function(e){if(65496!=(e[0]<<8|e[1]))throw new Error("Supplied data is not a JPEG");for(var t,i=e.length,r=(e[4]<<8)+e[5],n=4;n<i;){if(r=((t=d(e,n+=r))[2]<<8)+t[3],(192===t[1]||194===t[1])&&255===t[0]&&7<r)return{width:((t=d(e,n+5))[2]<<8)+t[3],height:(t[0]<<8)+t[1],numcomponents:t[4]};n+=2}throw new Error("getJpegSizeFromBytes could not find the size of the image")}(e),e=o||this.arrayBufferToBinaryString(e)),void 0===s)switch(a.numcomponents){case 1:s=this.color_spaces.DEVICE_GRAY;break;case 4:s=this.color_spaces.DEVICE_CMYK;break;default:case 3:s=this.color_spaces.DEVICE_RGB}return this.createImageInfo(e,a.width,a.height,s,8,l,t,i)},t.processJPG=function(){return this.processJPEG.apply(this,arguments)},t.getImageProperties=function(e){var i,r,n="";if(c(e)&&(e=u(e)),this.isString(e)&&(""!==(n=this.convertStringToImageData(e))||void 0!==(n=t.loadFile(e)))&&(e=n),r=this.getImageFileTypeByImageData(e),!l(r))throw new Error("addImage does not support files of type '"+r+"', please ensure that a plugin for '"+r+"' support is added.");if(this.supportsArrayBuffer()&&(e instanceof Uint8Array||(e=this.binaryStringToUint8Array(e))),!(i=this["process"+r.toUpperCase()](e)))throw new Error("An unknown error occurred whilst processing the image");return{fileType:r,width:i.w,height:i.h,colorSpace:i.cs,compressionMode:i.f,bitsPerComponent:i.bpc}}}(le.API),t=le.API,le.API.events.push(["addPage",function(e){this.internal.getPageInfo(e.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(e){for(var t=this.internal.getPageInfoByObjId(e.objId),i=e.pageContext.annotations,r=function(e){if(void 0!==e&&""!=e)return!0},n=!1,o=0;o<i.length&&!n;o++)switch((l=i[o]).type){case"link":if(r(l.options.url)||r(l.options.pageNumber)){n=!0;break}case"reference":case"text":case"freetext":n=!0}if(0!=n){this.internal.write("/Annots [");var s=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString;for(o=0;o<i.length;o++){var l;switch((l=i[o]).type){case"reference":this.internal.write(" "+l.object.objId+" 0 R ");break;case"text":var c=this.internal.newAdditionalObject(),u=this.internal.newAdditionalObject(),h=l.title||"Note";f="<</Type /Annot /Subtype /Text "+(A="/Rect ["+s(l.bounds.x)+" "+a(l.bounds.y+l.bounds.h)+" "+s(l.bounds.x+l.bounds.w)+" "+a(l.bounds.y)+"] ")+"/Contents ("+l.contents+")",f+=" /Popup "+u.objId+" 0 R",f+=" /P "+t.objId+" 0 R",c.content=f+=" /T ("+h+") >>";var d=c.objId+" 0 R";f="<</Type /Annot /Subtype /Popup "+(A="/Rect ["+s(l.bounds.x+30)+" "+a(l.bounds.y+l.bounds.h)+" "+s(l.bounds.x+l.bounds.w+30)+" "+a(l.bounds.y)+"] ")+" /Parent "+d,l.open&&(f+=" /Open true"),u.content=f+=" >>",this.internal.write(c.objId,"0 R",u.objId,"0 R");break;case"freetext":var A="/Rect ["+s(l.bounds.x)+" "+a(l.bounds.y)+" "+s(l.bounds.x+l.bounds.w)+" "+a(l.bounds.y+l.bounds.h)+"] ";f="<</Type /Annot /Subtype /FreeText "+A+"/Contents ("+l.contents+")",f+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+(l.color||"#000000")+")",f+=" /Border [0 0 0]",this.internal.write(f+=" >>");break;case"link":if(l.options.name){var p=this.annotations._nameMap[l.options.name];l.options.pageNumber=p.page,l.options.top=p.y}else l.options.top||(l.options.top=0);A="/Rect ["+s(l.x)+" "+a(l.y)+" "+s(l.x+l.w)+" "+a(l.y+l.h)+"] ";var f="";if(l.options.url)f="<</Type /Annot /Subtype /Link "+A+"/Border [0 0 0] /A <</S /URI /URI ("+l.options.url+") >>";else if(l.options.pageNumber)switch(f="<</Type /Annot /Subtype /Link "+A+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(l.options.pageNumber).objId+" 0 R",l.options.magFactor=l.options.magFactor||"XYZ",l.options.magFactor){case"Fit":f+=" /Fit]";break;case"FitH":f+=" /FitH "+l.options.top+"]";break;case"FitV":l.options.left=l.options.left||0,f+=" /FitV "+l.options.left+"]";break;case"XYZ":default:var g=a(l.options.top);l.options.left=l.options.left||0,void 0===l.options.zoom&&(l.options.zoom=0),f+=" /XYZ "+l.options.left+" "+g+" "+l.options.zoom+"]"}""!=f&&this.internal.write(f+=" >>")}}this.internal.write("]")}}]),t.createAnnotation=function(e){var t=this.internal.getCurrentPageInfo();switch(e.type){case"link":this.link(e.bounds.x,e.bounds.y,e.bounds.w,e.bounds.h,e);break;case"text":case"freetext":t.pageContext.annotations.push(e)}},t.link=function(e,t,i,r,n){this.internal.getCurrentPageInfo().pageContext.annotations.push({x:e,y:t,w:i,h:r,options:n,type:"link"})},t.textWithLink=function(e,t,i,r){var n=this.getTextWidth(e),o=this.internal.getLineHeight()/this.internal.scaleFactor;return this.text(e,t,i),this.link(t,(i+=.2*o)-o,n,o,r),n},t.getTextWidth=function(e){var t=this.internal.getFontSize();return this.getStringUnitWidth(e)*t/this.internal.scaleFactor},function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},i={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},n=[1570,1571,1573,1575];e.__arabicParser__={};var o=e.__arabicParser__.isInArabicSubstitutionA=function(e){return void 0!==t[e.charCodeAt(0)]},s=e.__arabicParser__.isArabicLetter=function(e){return"string"==typeof e&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(e)},a=e.__arabicParser__.isArabicEndLetter=function(e){return s(e)&&o(e)&&t[e.charCodeAt(0)].length<=2},l=e.__arabicParser__.isArabicAlfLetter=function(e){return s(e)&&0<=n.indexOf(e.charCodeAt(0))},c=(e.__arabicParser__.arabicLetterHasIsolatedForm=function(e){return s(e)&&o(e)&&1<=t[e.charCodeAt(0)].length},e.__arabicParser__.arabicLetterHasFinalForm=function(e){return s(e)&&o(e)&&2<=t[e.charCodeAt(0)].length}),u=(e.__arabicParser__.arabicLetterHasInitialForm=function(e){return s(e)&&o(e)&&3<=t[e.charCodeAt(0)].length},e.__arabicParser__.arabicLetterHasMedialForm=function(e){return s(e)&&o(e)&&4==t[e.charCodeAt(0)].length}),h=e.__arabicParser__.resolveLigatures=function(e){var t=0,r=i,n=0,o="",s=0;for(t=0;t<e.length;t+=1)void 0!==r[e.charCodeAt(t)]?(s++,"number"==typeof(r=r[e.charCodeAt(t)])&&(n=-1!==(n=d(e.charAt(t),e.charAt(t-s),e.charAt(t+1)))?n:0,o+=String.fromCharCode(r),r=i,s=0),t===e.length-1&&(r=i,o+=e.charAt(t-(s-1)),t-=s-1,s=0)):(r=i,o+=e.charAt(t-s),t-=s,s=0);return o},d=(e.__arabicParser__.isArabicDiacritic=function(e){return void 0!==e&&void 0!==r[e.charCodeAt(0)]},e.__arabicParser__.getCorrectForm=function(e,t,i){return s(e)?!1===o(e)?-1:!c(e)||!s(t)&&!s(i)||!s(i)&&a(t)||a(e)&&!s(t)||a(e)&&l(t)||a(e)&&a(t)?0:u(e)&&s(t)&&!a(t)&&s(i)&&c(i)?3:a(e)||!s(i)?1:2:-1}),A=e.__arabicParser__.processArabic=e.processArabic=function(e){var i=0,r=0,n=0,o="",a="",l="",c=(e=e||"").split("\\s+"),u=[];for(i=0;i<c.length;i+=1){for(u.push(""),r=0;r<c[i].length;r+=1)a=c[i][r-1],l=c[i][r+1],s(o=c[i][r])?(n=d(o,a,l),u[i]+=-1!==n?String.fromCharCode(t[o.charCodeAt(0)][n]):o):u[i]+=o;u[i]=h(u[i])}return u.join(" ")};e.events.push(["preProcessText",function(e){var t=e.text,i=[];if("[object Array]"===Object.prototype.toString.call(t)){var r=0;for(i=[],r=0;r<t.length;r+=1)"[object Array]"===Object.prototype.toString.call(t[r])?i.push([A(t[r][0]),t[r][1],t[r][2]]):i.push([A(t[r])]);e.text=i}else e.text=A(t)}])}(le.API),le.API.autoPrint=function(e){var t;switch((e=e||{}).variant=e.variant||"non-conform",e.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",(function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")})),this.internal.events.subscribe("putCatalog",(function(){this.internal.out("/OpenAction "+t+" 0 R")}))}return this},i=le.API,(r=function(){var e=void 0;Object.defineProperty(this,"pdf",{get:function(){return e},set:function(t){e=t}});var t=150;Object.defineProperty(this,"width",{get:function(){return t},set:function(e){t=isNaN(e)||!1===Number.isInteger(e)||e<0?150:e,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=t+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(e){i=isNaN(e)||!1===Number.isInteger(e)||e<0?300:e,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var r=[];Object.defineProperty(this,"childNodes",{get:function(){return r},set:function(e){r=e}});var n={};Object.defineProperty(this,"style",{get:function(){return n},set:function(e){n=e}}),Object.defineProperty(this,"parentNode",{get:function(){return!1}})}).prototype.getContext=function(e,t){var i;if("2d"!==(e=e||"2d"))return null;for(i in t)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=t[i]);return(this.pdf.context2d._canvas=this).pdf.context2d},r.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},i.events.push(["initialized",function(){this.canvas=new r,this.canvas.pdf=this}]),s={x:void 0,y:void 0,w:void 0,h:void 0,ln:void 0},a=1,l=function(e,t,i,r,n){s={x:e,y:t,w:i,h:r,ln:n}},c=function(){return s},u={left:0,top:0,bottom:0},(n=le.API).setHeaderFunction=function(e){o=e},n.getTextDimensions=function(e,t){var i=this.table_font_size||this.internal.getFontSize(),r=(this.internal.getFont(),(t=t||{}).scaleFactor||this.internal.scaleFactor),n=0,o=0,s=0;if("string"==typeof e)0!=(n=this.getStringUnitWidth(e)*i)&&(o=1);else{if("[object Array]"!==Object.prototype.toString.call(e))throw new Error("getTextDimensions expects text-parameter to be of type String or an Array of Strings.");for(var a=0;a<e.length;a++)n<(s=this.getStringUnitWidth(e[a])*i)&&(n=s);0!==n&&(o=e.length)}return{w:n/=r,h:Math.max((o*i*this.getLineHeightFactor()-i*(this.getLineHeightFactor()-1))/r,0)}},n.cellAddPage=function(){var e=this.margins||u;this.addPage(),l(e.left,e.top,void 0,void 0),a+=1},n.cellInitialize=function(){s={x:void 0,y:void 0,w:void 0,h:void 0,ln:void 0},a=1},n.cell=function(e,t,i,r,n,o,s){var a=c(),h=!1;if(void 0!==a.ln)if(a.ln===o)e=a.x+a.w,t=a.y;else{var d=this.margins||u;a.y+a.h+r+13>=this.internal.pageSize.getHeight()-d.bottom&&(this.cellAddPage(),h=!0,this.printHeaders&&this.tableHeaderRow&&this.printHeaderRow(o,!0)),t=c().y+c().h,h&&(t=23)}if(void 0!==n[0])if(this.printingHeaderRow?this.rect(e,t,i,r,"FD"):this.rect(e,t,i,r),"right"===s){n instanceof Array||(n=[n]);for(var A=0;A<n.length;A++){var p=n[A],f=this.getStringUnitWidth(p)*this.internal.getFontSize()/this.internal.scaleFactor;this.text(p,e+i-f-3,t+this.internal.getLineHeight()*(A+1))}}else this.text(n,e+3,t+this.internal.getLineHeight());return l(e,t,i,r,o),this},n.arrayMax=function(e,t){var i,r,n,o=e[0];for(i=0,r=e.length;i<r;i+=1)n=e[i],t?-1===t(o,n)&&(o=n):o<n&&(o=n);return o},n.table=function(e,t,i,r,o){if(!i)throw"No data for PDF table";var l,c,h,d,A,p,f,g,m,w=[],y=[],v={},_={},b=[],C=[],E=!1,S=!0,L=12,T=u;if(T.width=this.internal.pageSize.getWidth(),o&&(!0===o.autoSize&&(E=!0),!1===o.printHeaders&&(S=!1),o.fontSize&&(L=o.fontSize),o.css&&void 0!==o.css["font-size"]&&(L=16*o.css["font-size"]),o.margins&&(T=o.margins)),this.lnMod=0,s={x:void 0,y:void 0,w:void 0,h:void 0,ln:void 0},a=1,this.printHeaders=S,this.margins=T,this.setFontSize(L),this.table_font_size=L,null==r)w=Object.keys(i[0]);else if(r[0]&&"string"!=typeof r[0])for(c=0,h=r.length;c<h;c+=1)w.push((l=r[c]).name),y.push(l.prompt),_[l.name]=l.width*(19.049976/25.4);else w=r;if(E)for(m=function(e){return e[l]},c=0,h=w.length;c<h;c+=1){for(v[l=w[c]]=i.map(m),b.push(this.getTextDimensions(y[c]||l,{scaleFactor:1}).w),p=0,d=(A=v[l]).length;p<d;p+=1)b.push(this.getTextDimensions(A[p],{scaleFactor:1}).w);_[l]=n.arrayMax(b),b=[]}if(S){var B=this.calculateLineHeight(w,_,y.length?y:w);for(c=0,h=w.length;c<h;c+=1)C.push([e,t,_[l=w[c]],B,String(y.length?y[c]:l)]);this.setTableHeaderRow(C),this.printHeaderRow(1,!1)}for(c=0,h=i.length;c<h;c+=1)for(B=this.calculateLineHeight(w,_,f=i[c]),p=0,g=w.length;p<g;p+=1)this.cell(e,t,_[l=w[p]],B,f[l],c+2,l.align);return this.lastCellPos=s,this.table_x=e,this.table_y=t,this},n.calculateLineHeight=function(e,t,i){for(var r,n=0,o=0;o<e.length;o++){i[r=e[o]]=this.splitTextToSize(String(i[r]),t[r]-3);var s=this.internal.getLineHeight()*i[r].length+3;n<s&&(n=s)}return n},n.setTableHeaderRow=function(e){this.tableHeaderRow=e},n.printHeaderRow=function(e,t){if(!this.tableHeaderRow)throw"Property tableHeaderRow does not exist.";var i,r,n,s;if(this.printingHeaderRow=!0,void 0!==o){var c=o(this,a);l(c[0],c[1],c[2],c[3],-1)}this.setFontStyle("bold");var u=[];for(n=0,s=this.tableHeaderRow.length;n<s;n+=1)this.setFillColor(200,200,200),i=this.tableHeaderRow[n],t&&(this.margins.top=13,i[1]=this.margins&&this.margins.top||0,u.push(i)),r=[].concat(i),this.cell.apply(this,r.concat(e));0<u.length&&this.setTableHeaderRow(u),this.setFontStyle("normal"),this.printingHeaderRow=!1},function(t,i){var r,n,o,s,a,l=function(e){return this.isStrokeTransparent=(e=e||{}).isStrokeTransparent||!1,this.strokeOpacity=e.strokeOpacity||1,this.strokeStyle=e.strokeStyle||"#000000",this.fillStyle=e.fillStyle||"#000000",this.isFillTransparent=e.isFillTransparent||!1,this.fillOpacity=e.fillOpacity||1,this.font=e.font||"10px sans-serif",this.textBaseline=e.textBaseline||"alphabetic",this.textAlign=e.textAlign||"left",this.lineWidth=e.lineWidth||1,this.lineJoin=e.lineJoin||"miter",this.lineCap=e.lineCap||"butt",this.path=e.path||[],this.transform=void 0!==e.transform?e.transform.clone():new R,this.globalCompositeOperation=e.globalCompositeOperation||"normal",this.globalAlpha=e.globalAlpha||1,this.clip_path=e.clip_path||[],this.currentPoint=e.currentPoint||new x,this.miterLimit=e.miterLimit||10,this.lastPoint=e.lastPoint||new x,this.ignoreClearRect="boolean"!=typeof e.ignoreClearRect||e.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new c(this),r=this.internal.f2,n=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString,s=this.internal.getHorizontalCoordinate,a=this.internal.getVerticalCoordinate}]);var c=function(e){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}}),Object.defineProperty(this,"pdf",{get:function(){return e}});var t=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return t},set:function(e){t=Boolean(e)}});var i=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return i},set:function(e){i=Boolean(e)}});var r=0;Object.defineProperty(this,"posX",{get:function(){return r},set:function(e){isNaN(e)||(r=e)}});var n=0;Object.defineProperty(this,"posY",{get:function(){return n},set:function(e){isNaN(e)||(n=e)}});var o=!1;Object.defineProperty(this,"autoPaging",{get:function(){return o},set:function(e){o=Boolean(e)}});var s=0;Object.defineProperty(this,"lastBreak",{get:function(){return s},set:function(e){s=e}});var a=[];Object.defineProperty(this,"pageBreaks",{get:function(){return a},set:function(e){a=e}});var c=new l;Object.defineProperty(this,"ctx",{get:function(){return c},set:function(e){e instanceof l&&(c=e)}}),Object.defineProperty(this,"path",{get:function(){return c.path},set:function(e){c.path=e}});var h=[];Object.defineProperty(this,"ctxStack",{get:function(){return h},set:function(e){h=e}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(e){var t;t=u(e),this.ctx.fillStyle=t.style,this.ctx.isFillTransparent=0===t.a,this.ctx.fillOpacity=t.a,this.pdf.setFillColor(t.r,t.g,t.b,{a:t.a}),this.pdf.setTextColor(t.r,t.g,t.b,{a:t.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(e){var t=u(e);this.ctx.strokeStyle=t.style,this.ctx.isStrokeTransparent=0===t.a,this.ctx.strokeOpacity=t.a,0===t.a?this.pdf.setDrawColor(255,255,255):this.pdf.setDrawColor(t.r,t.g,t.b)}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(e){-1!==["butt","round","square"].indexOf(e)&&(this.ctx.lineCap=e,this.pdf.setLineCap(e))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(e){isNaN(e)||(this.ctx.lineWidth=e,this.pdf.setLineWidth(e))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(e){-1!==["bevel","round","miter"].indexOf(e)&&(this.ctx.lineJoin=e,this.pdf.setLineJoin(e))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(e){isNaN(e)||(this.ctx.miterLimit=e,this.pdf.setMiterLimit(e))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(e){this.ctx.textBaseline=e}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(e){-1!==["right","end","center","left","start"].indexOf(e)&&(this.ctx.textAlign=e)}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(e){var t;if(this.ctx.font=e,null!==(t=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(e))){var i=t[1],r=t[3],n=t[4],o=t[5],s=t[6];n="px"===o?Math.floor(parseFloat(n)):"em"===o?Math.floor(parseFloat(n)*this.pdf.getFontSize()):Math.floor(parseFloat(n)),this.pdf.setFontSize(n);var a="";("bold"===r||700<=parseInt(r,10)||"bold"===i)&&(a="bold"),"italic"===i&&(a+="italic"),0===a.length&&(a="normal");for(var l="",c=s.toLowerCase().replace(/"|'/g,"").split(/\s*,\s*/),u={arial:"Helvetica",verdana:"Helvetica",helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",courier:"Courier",times:"Times",cursive:"Times",fantasy:"Times",serif:"Times"},h=0;h<c.length;h++){if(void 0!==this.pdf.internal.getFont(c[h],a,{noFallback:!0,disableWarning:!0})){l=c[h];break}if("bolditalic"===a&&void 0!==this.pdf.internal.getFont(c[h],"bold",{noFallback:!0,disableWarning:!0}))l=c[h],a="bold";else if(void 0!==this.pdf.internal.getFont(c[h],"normal",{noFallback:!0,disableWarning:!0})){l=c[h],a="normal";break}}if(""===l)for(h=0;h<c.length;h++)if(u[c[h]]){l=u[c[h]];break}this.pdf.setFont(l=""===l?"Times":l,a)}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(e){this.ctx.globalCompositeOperation=e}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(e){this.ctx.globalAlpha=e}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(e){this.ctx.ignoreClearRect=Boolean(e)}})};c.prototype.fill=function(){g.call(this,"fill",!1)},c.prototype.stroke=function(){g.call(this,"stroke",!1)},c.prototype.beginPath=function(){this.path=[{type:"begin"}]},c.prototype.moveTo=function(e,t){if(isNaN(e)||isNaN(t))throw console.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var i=this.ctx.transform.applyToPoint(new x(e,t));this.path.push({type:"mt",x:i.x,y:i.y}),this.ctx.lastPoint=new x(e,t)},c.prototype.closePath=function(){var t=new x(0,0),i=0;for(i=this.path.length-1;-1!==i;i--)if("begin"===this.path[i].type&&"object"===e(this.path[i+1])&&"number"==typeof this.path[i+1].x){t=new x(this.path[i+1].x,this.path[i+1].y),this.path.push({type:"lt",x:t.x,y:t.y});break}"object"===e(this.path[i+2])&&"number"==typeof this.path[i+2].x&&this.path.push(JSON.parse(JSON.stringify(this.path[i+2]))),this.path.push({type:"close"}),this.ctx.lastPoint=new x(t.x,t.y)},c.prototype.lineTo=function(e,t){if(isNaN(e)||isNaN(t))throw console.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var i=this.ctx.transform.applyToPoint(new x(e,t));this.path.push({type:"lt",x:i.x,y:i.y}),this.ctx.lastPoint=new x(i.x,i.y)},c.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),g.call(this,null,!0)},c.prototype.quadraticCurveTo=function(e,t,i,r){if(isNaN(i)||isNaN(r)||isNaN(e)||isNaN(t))throw console.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var n=this.ctx.transform.applyToPoint(new x(i,r)),o=this.ctx.transform.applyToPoint(new x(e,t));this.path.push({type:"qct",x1:o.x,y1:o.y,x:n.x,y:n.y}),this.ctx.lastPoint=new x(n.x,n.y)},c.prototype.bezierCurveTo=function(e,t,i,r,n,o){if(isNaN(n)||isNaN(o)||isNaN(e)||isNaN(t)||isNaN(i)||isNaN(r))throw console.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var s=this.ctx.transform.applyToPoint(new x(n,o)),a=this.ctx.transform.applyToPoint(new x(e,t)),l=this.ctx.transform.applyToPoint(new x(i,r));this.path.push({type:"bct",x1:a.x,y1:a.y,x2:l.x,y2:l.y,x:s.x,y:s.y}),this.ctx.lastPoint=new x(s.x,s.y)},c.prototype.arc=function(e,t,i,r,n,o){if(isNaN(e)||isNaN(t)||isNaN(i)||isNaN(r)||isNaN(n))throw console.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(o=Boolean(o),!this.ctx.transform.isIdentity){var s=this.ctx.transform.applyToPoint(new x(e,t));e=s.x,t=s.y;var a=this.ctx.transform.applyToPoint(new x(0,i)),l=this.ctx.transform.applyToPoint(new x(0,0));i=Math.sqrt(Math.pow(a.x-l.x,2)+Math.pow(a.y-l.y,2))}Math.abs(n-r)>=2*Math.PI&&(r=0,n=2*Math.PI),this.path.push({type:"arc",x:e,y:t,radius:i,startAngle:r,endAngle:n,counterclockwise:o})},c.prototype.arcTo=function(e,t,i,r,n){throw new Error("arcTo not implemented.")},c.prototype.rect=function(e,t,i,r){if(isNaN(e)||isNaN(t)||isNaN(i)||isNaN(r))throw console.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(e,t),this.lineTo(e+i,t),this.lineTo(e+i,t+r),this.lineTo(e,t+r),this.lineTo(e,t),this.lineTo(e+i,t),this.lineTo(e,t)},c.prototype.fillRect=function(e,t,i,r){if(isNaN(e)||isNaN(t)||isNaN(i)||isNaN(r))throw console.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!h.call(this)){var n={};"butt"!==this.lineCap&&(n.lineCap=this.lineCap,this.lineCap="butt"),"miter"!==this.lineJoin&&(n.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(e,t,i,r),this.fill(),n.hasOwnProperty("lineCap")&&(this.lineCap=n.lineCap),n.hasOwnProperty("lineJoin")&&(this.lineJoin=n.lineJoin)}},c.prototype.strokeRect=function(e,t,i,r){if(isNaN(e)||isNaN(t)||isNaN(i)||isNaN(r))throw console.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");d.call(this)||(this.beginPath(),this.rect(e,t,i,r),this.stroke())},c.prototype.clearRect=function(e,t,i,r){if(isNaN(e)||isNaN(t)||isNaN(i)||isNaN(r))throw console.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(e,t,i,r))},c.prototype.save=function(e){e="boolean"!=typeof e||e;for(var t=this.pdf.internal.getCurrentPageInfo().pageNumber,i=0;i<this.pdf.internal.getNumberOfPages();i++)this.pdf.setPage(i+1),this.pdf.internal.out("q");if(this.pdf.setPage(t),e){this.ctx.fontSize=this.pdf.internal.getFontSize();var r=new l(this.ctx);this.ctxStack.push(this.ctx),this.ctx=r}},c.prototype.restore=function(e){e="boolean"!=typeof e||e;for(var t=this.pdf.internal.getCurrentPageInfo().pageNumber,i=0;i<this.pdf.internal.getNumberOfPages();i++)this.pdf.setPage(i+1),this.pdf.internal.out("Q");this.pdf.setPage(t),e&&0!==this.ctxStack.length&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin)},c.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var u=function(e){var t,i,r,n;if(!0===e.isCanvasGradient&&(e=e.getColor()),!e)return{r:0,g:0,b:0,a:0,style:e};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(e))n=r=i=t=0;else{var o=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(e);if(null!==o)t=parseInt(o[1]),i=parseInt(o[2]),r=parseInt(o[3]),n=1;else if(null!==(o=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d\.]+)\s*\)/.exec(e)))t=parseInt(o[1]),i=parseInt(o[2]),r=parseInt(o[3]),n=parseFloat(o[4]);else{if(n=1,"string"==typeof e&&"#"!==e.charAt(0)){var s=new RGBColor(e);e=s.ok?s.toHex():"#000000"}4===e.length?(t=e.substring(1,2),t+=t,i=e.substring(2,3),i+=i,r=e.substring(3,4),r+=r):(t=e.substring(1,3),i=e.substring(3,5),r=e.substring(5,7)),t=parseInt(t,16),i=parseInt(i,16),r=parseInt(r,16)}}return{r:t,g:i,b:r,a:n,style:e}},h=function(){return this.ctx.isFillTransparent||0==this.globalAlpha},d=function(){return Boolean(this.ctx.isStrokeTransparent||0==this.globalAlpha)};c.prototype.fillText=function(e,t,i,r){if(isNaN(t)||isNaN(i)||"string"!=typeof e)throw console.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(r=isNaN(r)?void 0:r,!h.call(this)){i=w.call(this,i);var n=N(this.ctx.transform.rotation),o=this.ctx.transform.scaleX;C.call(this,{text:e,x:t,y:i,scale:o,angle:n,align:this.textAlign,maxWidth:r})}},c.prototype.strokeText=function(e,t,i,r){if(isNaN(t)||isNaN(i)||"string"!=typeof e)throw console.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!d.call(this)){r=isNaN(r)?void 0:r,i=w.call(this,i);var n=N(this.ctx.transform.rotation),o=this.ctx.transform.scaleX;C.call(this,{text:e,x:t,y:i,scale:o,renderingMode:"stroke",angle:n,align:this.textAlign,maxWidth:r})}},c.prototype.measureText=function(e){if("string"!=typeof e)throw console.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var t=this.pdf,i=this.pdf.internal.scaleFactor,r=t.internal.getFontSize(),n=t.getStringUnitWidth(e)*r/t.internal.scaleFactor;return new function(e){var t=(e=e||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return t}}),this}({width:n*=Math.round(96*i/72*1e4)/1e4})},c.prototype.scale=function(e,t){if(isNaN(e)||isNaN(t))throw console.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var i=new R(e,0,0,t,0,0);this.ctx.transform=this.ctx.transform.multiply(i)},c.prototype.rotate=function(e){if(isNaN(e))throw console.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var t=new R(Math.cos(e),Math.sin(e),-Math.sin(e),Math.cos(e),0,0);this.ctx.transform=this.ctx.transform.multiply(t)},c.prototype.translate=function(e,t){if(isNaN(e)||isNaN(t))throw console.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var i=new R(1,0,0,1,e,t);this.ctx.transform=this.ctx.transform.multiply(i)},c.prototype.transform=function(e,t,i,r,n,o){if(isNaN(e)||isNaN(t)||isNaN(i)||isNaN(r)||isNaN(n)||isNaN(o))throw console.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var s=new R(e,t,i,r,n,o);this.ctx.transform=this.ctx.transform.multiply(s)},c.prototype.setTransform=function(e,t,i,r,n,o){e=isNaN(e)?1:e,t=isNaN(t)?0:t,i=isNaN(i)?0:i,r=isNaN(r)?1:r,n=isNaN(n)?0:n,o=isNaN(o)?0:o,this.ctx.transform=new R(e,t,i,r,n,o)},c.prototype.drawImage=function(e,t,i,r,n,o,s,a,l){var c=this.pdf.getImageProperties(e),u=1,h=1,d=1,p=1;void 0!==r&&void 0!==a&&(d=a/r,p=l/n,u=c.width/r*a/r,h=c.height/n*l/n),void 0===o&&(o=t,s=i,i=t=0),void 0!==r&&void 0===a&&(a=r,l=n),void 0===r&&void 0===a&&(a=c.width,l=c.height);for(var g,w=this.ctx.transform.decompose(),y=N(w.rotate.shx),v=new R,_=((v=(v=(v=v.multiply(w.translate)).multiply(w.skew)).multiply(w.scale)).applyToPoint(new x(a,l)),v.applyToRectangle(new D(o-t*d,s-i*p,r*u,n*h))),b=A.call(this,_),C=[],E=0;E<b.length;E+=1)-1===C.indexOf(b[E])&&C.push(b[E]);if(C.sort(),this.autoPaging)for(var S=C[C.length-1],L=C[0];L<S+1;L++){if(this.pdf.setPage(L),0!==this.ctx.clip_path.length){var T=this.path;g=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=f(g,this.posX,-1*this.pdf.internal.pageSize.height*(L-1)+this.posY),m.call(this,"fill",!0),this.path=T}var B=JSON.parse(JSON.stringify(_));B=f([B],this.posX,-1*this.pdf.internal.pageSize.height*(L-1)+this.posY)[0],this.pdf.addImage(e,"jpg",B.x,B.y,B.w,B.h,null,null,y)}else this.pdf.addImage(e,"jpg",_.x,_.y,_.w,_.h,null,null,y)};var A=function(e,t,i){var r=[];switch(t=t||this.pdf.internal.pageSize.width,i=i||this.pdf.internal.pageSize.height,e.type){default:case"mt":case"lt":r.push(Math.floor((e.y+this.posY)/i)+1);break;case"arc":r.push(Math.floor((e.y+this.posY-e.radius)/i)+1),r.push(Math.floor((e.y+this.posY+e.radius)/i)+1);break;case"qct":var n=F(this.ctx.lastPoint.x,this.ctx.lastPoint.y,e.x1,e.y1,e.x,e.y);r.push(Math.floor(n.y/i)+1),r.push(Math.floor((n.y+n.h)/i)+1);break;case"bct":var o=O(this.ctx.lastPoint.x,this.ctx.lastPoint.y,e.x1,e.y1,e.x2,e.y2,e.x,e.y);r.push(Math.floor(o.y/i)+1),r.push(Math.floor((o.y+o.h)/i)+1);break;case"rect":r.push(Math.floor((e.y+this.posY)/i)+1),r.push(Math.floor((e.y+e.h+this.posY)/i)+1)}for(var s=0;s<r.length;s+=1)for(;this.pdf.internal.getNumberOfPages()<r[s];)p.call(this);return r},p=function(){var e=this.fillStyle,t=this.strokeStyle,i=this.font,r=this.lineCap,n=this.lineWidth,o=this.lineJoin;this.pdf.addPage(),this.fillStyle=e,this.strokeStyle=t,this.font=i,this.lineCap=r,this.lineWidth=n,this.lineJoin=o},f=function(e,t,i){for(var r=0;r<e.length;r++)switch(e[r].type){case"bct":e[r].x2+=t,e[r].y2+=i;case"qct":e[r].x1+=t,e[r].y1+=i;case"mt":case"lt":case"arc":default:e[r].x+=t,e[r].y+=i}return e},g=function(e,t){for(var i,r,n=this.fillStyle,o=this.strokeStyle,s=this.lineCap,a=this.lineWidth,l=this.lineJoin,c=JSON.parse(JSON.stringify(this.path)),u=JSON.parse(JSON.stringify(this.path)),h=[],d=0;d<u.length;d++)if(void 0!==u[d].x)for(var g=A.call(this,u[d]),w=0;w<g.length;w+=1)-1===h.indexOf(g[w])&&h.push(g[w]);for(d=0;d<h.length;d++)for(;this.pdf.internal.getNumberOfPages()<h[d];)p.call(this);if(h.sort(),this.autoPaging){var y=h[h.length-1];for(d=h[0];d<y+1;d++){if(this.pdf.setPage(d),this.fillStyle=n,this.strokeStyle=o,this.lineCap=s,this.lineWidth=a,this.lineJoin=l,0!==this.ctx.clip_path.length){var v=this.path;i=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=f(i,this.posX,-1*this.pdf.internal.pageSize.height*(d-1)+this.posY),m.call(this,e,!0),this.path=v}r=JSON.parse(JSON.stringify(c)),this.path=f(r,this.posX,-1*this.pdf.internal.pageSize.height*(d-1)+this.posY),!1!==t&&0!==d||m.call(this,e,t)}}else m.call(this,e,t);this.path=c},m=function(e,t){if(("stroke"!==e||t||!d.call(this))&&("stroke"===e||t||!h.call(this))){for(var i,r=[],n=this.path,o=0;o<n.length;o++){var s=n[o];switch(s.type){case"begin":r.push({begin:!0});break;case"close":r.push({close:!0});break;case"mt":r.push({start:s,deltas:[],abs:[]});break;case"lt":var a=r.length;if(!isNaN(n[o-1].x)){var l=[s.x-n[o-1].x,s.y-n[o-1].y];if(0<a)for(;0<=a;a--)if(!0!==r[a-1].close&&!0!==r[a-1].begin){r[a-1].deltas.push(l),r[a-1].abs.push(s);break}}break;case"bct":r[r.length-1].deltas.push(l=[s.x1-n[o-1].x,s.y1-n[o-1].y,s.x2-n[o-1].x,s.y2-n[o-1].y,s.x-n[o-1].x,s.y-n[o-1].y]);break;case"qct":r[r.length-1].deltas.push(l=[n[o-1].x+2/3*(s.x1-n[o-1].x)-n[o-1].x,n[o-1].y+2/3*(s.y1-n[o-1].y)-n[o-1].y,s.x+2/3*(s.x1-s.x)-n[o-1].x,s.y+2/3*(s.y1-s.y)-n[o-1].y,s.x-n[o-1].x,s.y-n[o-1].y]);break;case"arc":r.push({deltas:[],abs:[],arc:!0}),Array.isArray(r[r.length-1].abs)&&r[r.length-1].abs.push(s)}}for(i=t?null:"stroke"===e?"stroke":"fill",o=0;o<r.length;o++){if(r[o].arc)for(var c=r[o].abs,u=0;u<c.length;u++){var A=c[u];if(void 0!==A.startAngle){var p=N(A.startAngle),f=N(A.endAngle),g=A.x,m=A.y;y.call(this,g,m,A.radius,p,f,A.counterclockwise,i,t)}else E.call(this,A.x,A.y)}r[o].arc||!0===r[o].close||!0===r[o].begin||S.call(this,r[o].deltas,g=r[o].start.x,m=r[o].start.y,null,null)}i&&v.call(this,i),t&&_.call(this)}},w=function(e){var t=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,i=t*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return e-i;case"top":return e+t-i;case"hanging":return e+t-2*i;case"middle":return e+t/2-i;case"ideographic":return e;case"alphabetic":default:return e}};c.prototype.createLinearGradient=function(){var e=function(){};return e.colorStops=[],e.addColorStop=function(e,t){this.colorStops.push([e,t])},e.getColor=function(){return 0===this.colorStops.length?"#000000":this.colorStops[0][1]},e.isCanvasGradient=!0,e},c.prototype.createPattern=function(){return this.createLinearGradient()},c.prototype.createRadialGradient=function(){return this.createLinearGradient()};var y=function(e,t,i,r,n,o,s,a){for(var l=I(r),c=I(n),u=T.call(this,i,l,c,o),h=0;h<u.length;h++){var d=u[h];0===h&&b.call(this,d.x1+e,d.y1+t),L.call(this,e,t,d.x2,d.y2,d.x3,d.y3,d.x4,d.y4)}a?_.call(this):v.call(this,s)},v=function(e){switch(e){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},_=function(){this.pdf.clip()},b=function(e,t){this.pdf.internal.out(n(e)+" "+o(t)+" m")},C=function(e){var t;switch(e.align){case"right":case"end":t="right";break;case"center":t="center";break;case"left":case"start":default:t="left"}var i=this.ctx.transform.applyToPoint(new x(e.x,e.y)),r=this.ctx.transform.decompose(),n=new R;n=(n=(n=n.multiply(r.translate)).multiply(r.skew)).multiply(r.scale);for(var o,s=this.pdf.getTextDimensions(e.text),a=this.ctx.transform.applyToRectangle(new D(e.x,e.y,s.w,s.h)),l=n.applyToRectangle(new D(e.x,e.y-s.h,s.w,s.h)),c=A.call(this,l),u=[],h=0;h<c.length;h+=1)-1===u.indexOf(c[h])&&u.push(c[h]);if(u.sort(),!0===this.autoPaging)for(var d=u[u.length-1],p=u[0];p<d+1;p++){if(this.pdf.setPage(p),0!==this.ctx.clip_path.length){var g=this.path;o=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=f(o,this.posX,-1*this.pdf.internal.pageSize.height*(p-1)+this.posY),m.call(this,"fill",!0),this.path=g}var w=JSON.parse(JSON.stringify(a));if(w=f([w],this.posX,-1*this.pdf.internal.pageSize.height*(p-1)+this.posY)[0],.01<=e.scale){var y=this.pdf.internal.getFontSize();this.pdf.setFontSize(y*e.scale)}this.pdf.text(e.text,w.x,w.y,{angle:e.angle,align:t,renderingMode:e.renderingMode,maxWidth:e.maxWidth}),.01<=e.scale&&this.pdf.setFontSize(y)}else.01<=e.scale&&(y=this.pdf.internal.getFontSize(),this.pdf.setFontSize(y*e.scale)),this.pdf.text(e.text,i.x+this.posX,i.y+this.posY,{angle:e.angle,align:t,renderingMode:e.renderingMode,maxWidth:e.maxWidth}),.01<=e.scale&&this.pdf.setFontSize(y)},E=function(e,t,i,r){r=r||0,this.pdf.internal.out(n(e+(i=i||0))+" "+o(t+r)+" l")},S=function(e,t,i){return this.pdf.lines(e,t,i,null,null)},L=function(e,t,i,n,o,l,c,u){this.pdf.internal.out([r(s(i+e)),r(a(n+t)),r(s(o+e)),r(a(l+t)),r(s(c+e)),r(a(u+t)),"c"].join(" "))},T=function(e,t,i,r){var n=2*Math.PI,o=t;(o<n||n<o)&&(o%=n);var s=i;(s<n||n<s)&&(s%=n);for(var a=[],l=Math.PI/2,c=r?-1:1,u=t,h=Math.min(n,Math.abs(s-o));1e-5<h;){var d=u+c*Math.min(h,l);a.push(B.call(this,e,u,d)),h-=Math.abs(d-u),u=d}return a},B=function(e,t,i){var r=(i-t)/2,n=e*Math.cos(r),o=e*Math.sin(r),s=n,a=-o,l=s*s+a*a,c=l+s*n+a*o,u=4/3*(Math.sqrt(2*l*c)-c)/(s*o-a*n),h=s-u*a,d=a+u*s,A=h,p=-d,f=r+t,g=Math.cos(f),m=Math.sin(f);return{x1:e*Math.cos(t),y1:e*Math.sin(t),x2:h*g-d*m,y2:h*m+d*g,x3:A*g-p*m,y3:A*m+p*g,x4:e*Math.cos(i),y4:e*Math.sin(i)}},N=function(e){return 180*e/Math.PI},I=function(e){return e*Math.PI/180},F=function(e,t,i,r,n,o){var s=e+.5*(i-e),a=t+.5*(r-t),l=n+.5*(i-n),c=o+.5*(r-o),u=Math.min(e,n,s,l),h=Math.max(e,n,s,l),d=Math.min(t,o,a,c),A=Math.max(t,o,a,c);return new D(u,d,h-u,A-d)},O=function(e,t,i,r,n,o,s,a){for(var l,c,u,h,d,A,p,f,g,m,w,y,v,_=i-e,b=r-t,C=n-i,E=o-r,S=s-n,L=a-o,T=0;T<41;T++)f=(A=(c=e+(l=T/40)*_)+l*((h=i+l*C)-c))+l*(h+l*(n+l*S-h)-A),g=(p=(u=t+l*b)+l*((d=r+l*E)-u))+l*(d+l*(o+l*L-d)-p),v=0==T?(y=m=f,w=g):(m=Math.min(m,f),w=Math.min(w,g),y=Math.max(y,f),Math.max(v,g));return new D(Math.round(m),Math.round(w),Math.round(y-m),Math.round(v-w))},x=function(e,t){var i=e||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return i},set:function(e){isNaN(e)||(i=parseFloat(e))}});var r=t||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return r},set:function(e){isNaN(e)||(r=parseFloat(e))}});var n="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return n},set:function(e){n=e.toString()}}),this},D=function(e,t,i,r){x.call(this,e,t),this.type="rect";var n=i||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return n},set:function(e){isNaN(e)||(n=parseFloat(e))}});var o=r||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return o},set:function(e){isNaN(e)||(o=parseFloat(e))}}),this},R=function(e,t,i,r,n,o){var s=[];return Object.defineProperty(this,"sx",{get:function(){return s[0]},set:function(e){s[0]=Math.round(1e5*e)/1e5}}),Object.defineProperty(this,"shy",{get:function(){return s[1]},set:function(e){s[1]=Math.round(1e5*e)/1e5}}),Object.defineProperty(this,"shx",{get:function(){return s[2]},set:function(e){s[2]=Math.round(1e5*e)/1e5}}),Object.defineProperty(this,"sy",{get:function(){return s[3]},set:function(e){s[3]=Math.round(1e5*e)/1e5}}),Object.defineProperty(this,"tx",{get:function(){return s[4]},set:function(e){s[4]=Math.round(1e5*e)/1e5}}),Object.defineProperty(this,"ty",{get:function(){return s[5]},set:function(e){s[5]=Math.round(1e5*e)/1e5}}),Object.defineProperty(this,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(this,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(this,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(this,"isIdentity",{get:function(){return 1===this.sx&&0===this.shy&&0===this.shx&&1===this.sy&&0===this.tx&&0===this.ty}}),this.sx=isNaN(e)?1:e,this.shy=isNaN(t)?0:t,this.shx=isNaN(i)?0:i,this.sy=isNaN(r)?1:r,this.tx=isNaN(n)?0:n,this.ty=isNaN(o)?0:o,this};R.prototype.multiply=function(e){return new R(e.sx*this.sx+e.shy*this.shx,e.sx*this.shy+e.shy*this.sy,e.shx*this.sx+e.sy*this.shx,e.shx*this.shy+e.sy*this.sy,e.tx*this.sx+e.ty*this.shx+this.tx,e.tx*this.shy+e.ty*this.sy+this.ty)},R.prototype.decompose=function(){var e=this.sx,t=this.shy,i=this.shx,r=this.sy,n=this.tx,o=this.ty,s=Math.sqrt(e*e+t*t),a=(e/=s)*i+(t/=s)*r;i-=e*a,r-=t*a;var l=Math.sqrt(i*i+r*r);return a/=l,e*(r/=l)<t*(i/=l)&&(e=-e,t=-t,a=-a,s=-s),{scale:new R(s,0,0,l,0,0),translate:new R(1,0,0,1,n,o),rotate:new R(e,t,-t,e,0,0),skew:new R(1,0,a,1,0,0)}},R.prototype.applyToPoint=function(e){return new x(e.x*this.sx+e.y*this.shx+this.tx,e.x*this.shy+e.y*this.sy+this.ty)},R.prototype.applyToRectangle=function(e){var t=this.applyToPoint(e),i=this.applyToPoint(new x(e.x+e.w,e.y+e.h));return new D(t.x,t.y,i.x-t.x,i.y-t.y)},R.prototype.clone=function(){return new R(this.sx,this.shy,this.shx,this.sy,this.tx,this.ty)}}(le.API,"undefined"!=typeof self&&self||"undefined"!=typeof window&&window||"undefined"!=typeof global&&global||Function('return typeof this === "object" && this.content')()||Function("return this")()),d=function(e){var t,i,r,n,o,s,a,l,c,u;for(/[^\x00-\xFF]/.test(e),i=[],r=0,n=(e+=t="\0\0\0\0".slice(e.length%4||4)).length;r<n;r+=4)0!==(o=(e.charCodeAt(r)<<24)+(e.charCodeAt(r+1)<<16)+(e.charCodeAt(r+2)<<8)+e.charCodeAt(r+3))?(s=(o=((o=((o=((o=(o-(u=o%85))/85)-(c=o%85))/85)-(l=o%85))/85)-(a=o%85))/85)%85,i.push(s+33,a+33,l+33,c+33,u+33)):i.push(122);return function(e,i){for(var r=t.length;0<r;r--)e.pop()}(i),String.fromCharCode.apply(String,i)+"~>"},A=function(e){var t,i,r,n,o,s=String,a="length",l="charCodeAt",c="slice",u="replace";for(e[c](-2),e=e[c](0,-2)[u](/\s/g,"")[u]("z","!!!!!"),r=[],n=0,o=(e+=t="uuuuu"[c](e[a]%5||5))[a];n<o;n+=5)i=52200625*(e[l](n)-33)+614125*(e[l](n+1)-33)+7225*(e[l](n+2)-33)+85*(e[l](n+3)-33)+(e[l](n+4)-33),r.push(255&i>>24,255&i>>16,255&i>>8,255&i);return function(e,i){for(var r=t[a];0<r;r--)e.pop()}(r),s.fromCharCode.apply(s,r)},p=function(e){for(var t="",i=0;i<e.length;i+=1)t+=("0"+e.charCodeAt(i).toString(16)).slice(-2);return t+">"},f=function(e){var t=new RegExp(/^([0-9A-Fa-f]{2})+$/);if(-1!==(e=e.replace(/\s/g,"")).indexOf(">")&&(e=e.substr(0,e.indexOf(">"))),e.length%2&&(e+="0"),!1===t.test(e))return"";for(var i="",r=0;r<e.length;r+=2)i+=String.fromCharCode("0x"+(e[r]+e[r+1]));return i},g=function(e,t){t=Object.assign({predictor:1,colors:1,bitsPerComponent:8,columns:1},t);for(var i,r,n=[],o=e.length;o--;)n[o]=e.charCodeAt(o);return i=h.adler32cs.from(e),(r=new Deflater(6)).append(new Uint8Array(n)),e=r.flush(),(n=new Uint8Array(e.length+6)).set(new Uint8Array([120,156])),n.set(e,2),n.set(new Uint8Array([255&i,i>>8&255,i>>16&255,i>>24&255]),e.length+2),String.fromCharCode.apply(null,n)},(h=le.API).processDataByFilters=function(e,t){var i=0,r=e||"",n=[];for("string"==typeof(t=t||[])&&(t=[t]),i=0;i<t.length;i+=1)switch(t[i]){case"ASCII85Decode":case"/ASCII85Decode":r=A(r),n.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":r=d(r),n.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":r=f(r),n.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":r=p(r),n.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":r=g(r),n.push("/FlateDecode");break;default:throw'The filter: "'+t[i]+'" is not implemented'}return{data:r,reverseChain:n.reverse().join(" ")}},(m=le.API).loadFile=function(e,t,i){var r;t=t||!0,i=i||function(){};try{r=function(e,t,i){var r=new XMLHttpRequest,n=[],o=0,s=function(e){var t=e.length,i=String.fromCharCode;for(o=0;o<t;o+=1)n.push(i(255&e.charCodeAt(o)));return n.join("")};if(r.open("GET",e,!t),r.overrideMimeType("text/plain; charset=x-user-defined"),!1===t&&(r.onload=function(){return s(this.responseText)}),r.send(null),200===r.status)return t?s(r.responseText):void 0;console.warn('Unable to load file "'+e+'"')}(e,t)}catch(e){r=void 0}return r},m.loadImageFile=m.loadFile,w=le.API,y="undefined"!=typeof window&&window||"undefined"!=typeof global&&global,v=function(t){var i=e(t);return"undefined"===i?"undefined":"string"===i||t instanceof String?"string":"number"===i||t instanceof Number?"number":"function"===i||t instanceof Function?"function":t&&t.constructor===Array?"array":t&&1===t.nodeType?"element":"object"===i?"object":"unknown"},_=function(e,t){var i=document.createElement(e);if(t.className&&(i.className=t.className),t.innerHTML){i.innerHTML=t.innerHTML;for(var r=i.getElementsByTagName("script"),n=r.length;0<n--;null)r[n].parentNode.removeChild(r[n])}for(var o in t.style)i.style[o]=t.style[o];return i},(((b=function e(t){var i=Object.assign(e.convert(Promise.resolve()),JSON.parse(JSON.stringify(e.template))),r=e.convert(Promise.resolve(),i);return(r=r.setProgress(1,e,1,[e])).set(t)}).prototype=Object.create(Promise.prototype)).constructor=b).convert=function(e,t){return e.__proto__=t||b.prototype,e},b.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{}}},b.prototype.from=function(e,t){return this.then((function(){switch(t=t||function(e){switch(v(e)){case"string":return"string";case"element":return"canvas"===e.nodeName.toLowerCase?"canvas":"element";default:return"unknown"}}(e)){case"string":return this.set({src:_("div",{innerHTML:e})});case"element":return this.set({src:e});case"canvas":return this.set({canvas:e});case"img":return this.set({img:e});default:return this.error("Unknown source type.")}}))},b.prototype.to=function(e){switch(e){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},b.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then((function(){var e={position:"relative",display:"inline-block",width:Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:"white"},t=function e(t,i){for(var r=3===t.nodeType?document.createTextNode(t.nodeValue):t.cloneNode(!1),n=t.firstChild;n;n=n.nextSibling)!0!==i&&1===n.nodeType&&"SCRIPT"===n.nodeName||r.appendChild(e(n,i));return 1===t.nodeType&&("CANVAS"===t.nodeName?(r.width=t.width,r.height=t.height,r.getContext("2d").drawImage(t,0,0)):"TEXTAREA"!==t.nodeName&&"SELECT"!==t.nodeName||(r.value=t.value),r.addEventListener("load",(function(){r.scrollTop=t.scrollTop,r.scrollLeft=t.scrollLeft}),!0)),r}(this.prop.src,this.opt.html2canvas.javascriptEnabled);"BODY"===t.tagName&&(e.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=_("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=_("div",{className:"html2pdf__container",style:e}),this.prop.container.appendChild(t),this.prop.container.firstChild.appendChild(_("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"}))},b.prototype.toCanvas=function(){return this.thenList([function(){return document.body.contains(this.prop.container)||this.toContainer()}]).then((function(){var e=Object.assign({},this.opt.html2canvas);if(delete e.onrendered,this.isHtml2CanvasLoaded())return html2canvas(this.prop.container,e)})).then((function(e){(this.opt.html2canvas.onrendered||function(){})(e),this.prop.canvas=e,document.body.removeChild(this.prop.overlay)}))},b.prototype.toContext2d=function(){return this.thenList([function(){return document.body.contains(this.prop.container)||this.toContainer()}]).then((function(){var e=this.opt.jsPDF,t=Object.assign({async:!0,allowTaint:!0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete t.onrendered,e.context2d.autoPaging=!0,e.context2d.posX=this.opt.x,e.context2d.posY=this.opt.y,t.windowHeight=t.windowHeight||0,t.windowHeight=0==t.windowHeight?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):t.windowHeight,this.isHtml2CanvasLoaded())return html2canvas(this.prop.container,t)})).then((function(e){(this.opt.html2canvas.onrendered||function(){})(e),this.prop.canvas=e,document.body.removeChild(this.prop.overlay)}))},b.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then((function(){var e=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=e}))},b.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then((function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF}))},b.prototype.output=function(e,t,i){return"img"===(i=i||"pdf").toLowerCase()||"image"===i.toLowerCase()?this.outputImg(e,t):this.outputPdf(e,t)},b.prototype.outputPdf=function(e,t){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then((function(){return this.prop.pdf.output(e,t)}))},b.prototype.outputImg=function(e,t){return this.thenList([function(){return this.prop.img||this.toImg()}]).then((function(){switch(e){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+e+'" is not supported.'}}))},b.prototype.isHtml2CanvasLoaded=function(){var e=void 0!==y.html2canvas;return e||console.error("html2canvas not loaded."),e},b.prototype.save=function(e){if(this.isHtml2CanvasLoaded())return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(e?{filename:e}:null).then((function(){this.prop.pdf.save(this.opt.filename)}))},b.prototype.doCallback=function(e){if(this.isHtml2CanvasLoaded())return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then((function(){this.prop.callback(this.prop.pdf)}))},b.prototype.set=function(e){if("object"!==v(e))return this;var t=Object.keys(e||{}).map((function(t){if(t in b.template.prop)return function(){this.prop[t]=e[t]};switch(t){case"margin":return this.setMargin.bind(this,e.margin);case"jsPDF":return function(){return this.opt.jsPDF=e.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,e.pageSize);default:return function(){this.opt[t]=e[t]}}}),this);return this.then((function(){return this.thenList(t)}))},b.prototype.get=function(e,t){return this.then((function(){var i=e in b.template.prop?this.prop[e]:this.opt[e];return t?t(i):i}))},b.prototype.setMargin=function(e){return this.then((function(){switch(v(e)){case"number":e=[e,e,e,e];case"array":if(2===e.length&&(e=[e[0],e[1],e[0],e[1]]),4===e.length)break;default:return this.error("Invalid margin array.")}this.opt.margin=e})).then(this.setPageSize)},b.prototype.setPageSize=function(e){function t(e,t){return Math.floor(e*t/72*96)}return this.then((function(){(e=e||le.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(e.inner={width:e.width-this.opt.margin[1]-this.opt.margin[3],height:e.height-this.opt.margin[0]-this.opt.margin[2]},e.inner.px={width:t(e.inner.width,e.k),height:t(e.inner.height,e.k)},e.inner.ratio=e.inner.height/e.inner.width),this.prop.pageSize=e}))},b.prototype.setProgress=function(e,t,i,r){return null!=e&&(this.progress.val=e),null!=t&&(this.progress.state=t),null!=i&&(this.progress.n=i),null!=r&&(this.progress.stack=r),this.progress.ratio=this.progress.val/this.progress.state,this},b.prototype.updateProgress=function(e,t,i,r){return this.setProgress(e?this.progress.val+e:null,t||null,i?this.progress.n+i:null,r?this.progress.stack.concat(r):null)},b.prototype.then=function(e,t){var i=this;return this.thenCore(e,t,(function(e,t){return i.updateProgress(null,null,1,[e]),Promise.prototype.then.call(this,(function(t){return i.updateProgress(null,e),t})).then(e,t).then((function(e){return i.updateProgress(1),e}))}))},b.prototype.thenCore=function(e,t,i){i=i||Promise.prototype.then;var r=this;e&&(e=e.bind(r)),t&&(t=t.bind(r));var n=-1!==Promise.toString().indexOf("[native code]")&&"Promise"===Promise.name?r:b.convert(Object.assign({},r),Promise.prototype),o=i.call(n,e,t);return b.convert(o,r.__proto__)},b.prototype.thenExternal=function(e,t){return Promise.prototype.then.call(this,e,t)},b.prototype.thenList=function(e){var t=this;return e.forEach((function(e){t=t.thenCore(e)})),t},b.prototype.catch=function(e){e&&(e=e.bind(this));var t=Promise.prototype.catch.call(this,e);return b.convert(t,this)},b.prototype.catchExternal=function(e){return Promise.prototype.catch.call(this,e)},b.prototype.error=function(e){return this.then((function(){throw new Error(e)}))},b.prototype.using=b.prototype.set,b.prototype.saveAs=b.prototype.save,b.prototype.export=b.prototype.output,b.prototype.run=b.prototype.then,le.getPageSize=function(t,i,r){if("object"===e(t)){var n=t;t=n.orientation,i=n.unit||i,r=n.format||r}i=i||"mm",r=r||"a4",t=(""+(t||"P")).toLowerCase();var o=(""+r).toLowerCase(),s={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(i){case"pt":var a=1;break;case"mm":a=72/25.4;break;case"cm":a=72/2.54;break;case"in":a=72;break;case"px":a=.75;break;case"pc":case"em":a=12;break;case"ex":a=6;break;default:throw"Invalid unit: "+i}if(s.hasOwnProperty(o))var l=s[o][1]/a,c=s[o][0]/a;else try{l=r[1],c=r[0]}catch(t){throw new Error("Invalid format: "+r)}if("p"===t||"portrait"===t){if(t="p",l<c){var u=c;c=l,l=u}}else{if("l"!==t&&"landscape"!==t)throw"Invalid orientation: "+t;t="l",c<l&&(u=c,c=l,l=u)}return{width:c,height:l,unit:i,k:a}},w.html=function(e,t){(t=t||{}).callback=t.callback||function(){},t.html2canvas=t.html2canvas||{},t.html2canvas.canvas=t.html2canvas.canvas||this.canvas,t.jsPDF=t.jsPDF||this;var i=new b(t);return t.worker?i:i.from(e).doCallback()},le.API.addJS=function(e){return S=e,this.internal.events.subscribe("postPutResources",(function(e){C=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(C+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),E=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+S+")"),this.internal.out(">>"),this.internal.out("endobj")})),this.internal.events.subscribe("putCatalog",(function(){void 0!==C&&void 0!==E&&this.internal.out("/Names <</JavaScript "+C+" 0 R>>")})),this},(L=le.API).events.push(["postPutResources",function(){var e=this,t=/^(\d+) 0 obj$/;if(0<this.outline.root.children.length)for(var i=e.outline.render().split(/\r\n/),r=0;r<i.length;r++){var n=i[r],o=t.exec(n);null!=o&&e.internal.newObjectDeferredBegin(o[1],!1),e.internal.write(n)}if(this.outline.createNamedDestinations){var s=this.internal.pages.length,a=[];for(r=0;r<s;r++){var l=e.internal.newObject();a.push(l);var c=e.internal.getPageInfo(r+1);e.internal.write("<< /D["+c.objId+" 0 R /XYZ null null null]>> endobj")}var u=e.internal.newObject();for(e.internal.write("<< /Names [ "),r=0;r<a.length;r++)e.internal.write("(page_"+(r+1)+")"+a[r]+" 0 R");e.internal.write(" ] >>","endobj"),e.internal.newObject(),e.internal.write("<< /Dests "+u+" 0 R"),e.internal.write(">>","endobj")}}]),L.events.push(["putCatalog",function(){0<this.outline.root.children.length&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+namesOid+" 0 R"))}]),L.events.push(["initialized",function(){var e=this;e.outline={createNamedDestinations:!1,root:{children:[]}},e.outline.add=function(e,t,i){var r={title:t,options:i,children:[]};return null==e&&(e=this.root),e.children.push(r),r},e.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=e,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},e.outline.genIds_r=function(t){t.id=e.internal.newObjectDeferred();for(var i=0;i<t.children.length;i++)this.genIds_r(t.children[i])},e.outline.renderRoot=function(e){this.objStart(e),this.line("/Type /Outlines"),0<e.children.length&&(this.line("/First "+this.makeRef(e.children[0])),this.line("/Last "+this.makeRef(e.children[e.children.length-1]))),this.line("/Count "+this.count_r({count:0},e)),this.objEnd()},e.outline.renderItems=function(t){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,r=0;r<t.children.length;r++){var n=t.children[r];this.objStart(n),this.line("/Title "+this.makeString(n.title)),this.line("/Parent "+this.makeRef(t)),0<r&&this.line("/Prev "+this.makeRef(t.children[r-1])),r<t.children.length-1&&this.line("/Next "+this.makeRef(t.children[r+1])),0<n.children.length&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1])));var o=this.count=this.count_r({count:0},n);if(0<o&&this.line("/Count "+o),n.options&&n.options.pageNumber){var s=e.internal.getPageInfo(n.options.pageNumber);this.line("/Dest ["+s.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(r=0;r<t.children.length;r++)this.renderItems(n=t.children[r])},e.outline.line=function(e){this.ctx.val+=e+"\r\n"},e.outline.makeRef=function(e){return e.id+" 0 R"},e.outline.makeString=function(t){return"("+e.internal.pdfEscape(t)+")"},e.outline.objStart=function(e){this.ctx.val+="\r\n"+e.id+" 0 obj\r\n<<\r\n"},e.outline.objEnd=function(e){this.ctx.val+=">> \r\nendobj\r\n"},e.outline.count_r=function(e,t){for(var i=0;i<t.children.length;i++)e.count++,this.count_r(e,t.children[i]);return e.count}}]),B=function(){var e="function"==typeof Deflater;if(!e)throw new Error("requires deflate.js for compression");return e},N=function(e,t,i,r){var n=5,o=R;switch(r){case T.image_compression.FAST:n=3,o=D;break;case T.image_compression.MEDIUM:n=6,o=U;break;case T.image_compression.SLOW:n=9,o=M}e=O(e,t,i,o);var s=new Uint8Array(I(n)),a=F(e),l=new Deflater(n),c=l.append(e),u=l.flush(),h=s.length+c.length+u.length,d=new Uint8Array(h+4);return d.set(s),d.set(c,s.length),d.set(u,s.length+c.length),d[h++]=a>>>24&255,d[h++]=a>>>16&255,d[h++]=a>>>8&255,d[h++]=255&a,T.arrayBufferToBinaryString(d)},I=function(e,t){var i=Math.LOG2E*Math.log(32768)-8<<4|8,r=i<<8;return r|=Math.min(3,(t-1&255)>>1)<<6,r|=0,[i,255&(r+=31-r%31)]},F=function(e,t){for(var i,r=1,n=0,o=e.length,s=0;0<o;){for(o-=i=t<o?t:o;n+=r+=e[s++],--i;);r%=65521,n%=65521}return(n<<16|r)>>>0},O=function(e,t,i,r){for(var n,o,s,a=e.length/t,l=new Uint8Array(e.length+a),c=H(),u=0;u<a;u++){if(n=e.subarray(s=u*t,s+t),r)l.set(r(n,i,o),s+u);else{for(var h=0,d=c.length,A=[];h<d;h++)A[h]=c[h](n,i,o);var p=Q(A.concat());l.set(A[p],s+u)}o=n}return l},x=function(e,t,i){var r=Array.apply([],e);return r.unshift(0),r},D=function(e,t,i){var r=[],n=0,o=e.length;for(r[0]=1;n<o;n++)r[n+1]=e[n]-(e[n-t]||0)+256&255;return r},R=function(e,t,i){var r=[],n=0,o=e.length;for(r[0]=2;n<o;n++)r[n+1]=e[n]-(i&&i[n]||0)+256&255;return r},U=function(e,t,i){var r=[],n=0,o=e.length;for(r[0]=3;n<o;n++)r[n+1]=e[n]+256-((e[n-t]||0)+(i&&i[n]||0)>>>1)&255;return r},M=function(e,t,i){var r,n=[],o=0,s=e.length;for(n[0]=4;o<s;o++)r=P(e[o-t]||0,i&&i[o]||0,i&&i[o-t]||0),n[o+1]=e[o]-r+256&255;return n},P=function(e,t,i){var r=e+t-i,n=Math.abs(r-e),o=Math.abs(r-t),s=Math.abs(r-i);return n<=o&&n<=s?e:o<=s?t:i},H=function(){return[x,D,R,U,M]},Q=function(e){for(var t,i,r,n=0,o=e.length;n<o;)((t=k(e[n].slice(1)))<i||!i)&&(i=t,r=n),n++;return r},k=function(e){for(var t=0,i=e.length,r=0;t<i;)r+=Math.abs(e[t++]);return r},(T=le.API).processPNG=function(e,t,i,r,n){var o,s,a,l,c,u,h=this.color_spaces.DEVICE_RGB,d=this.decode.FLATE_DECODE,A=8;if(this.isArrayBuffer(e)&&(e=new Uint8Array(e)),this.isArrayBufferView(e)){if("function"!=typeof PNG||"function"!=typeof Ie)throw new Error("PNG support requires png.js and zlib.js");if(e=(o=new PNG(e)).imgData,A=o.bits,h=o.colorSpace,l=o.colors,-1!==[4,6].indexOf(o.colorType)){if(8===o.bits)for(var p,f=(L=32==o.pixelBitlength?new Uint32Array(o.decodePixels().buffer):16==o.pixelBitlength?new Uint16Array(o.decodePixels().buffer):new Uint8Array(o.decodePixels().buffer)).length,g=new Uint8Array(f*o.colors),m=new Uint8Array(f),w=o.pixelBitlength-o.bits,y=0,v=0;y<f;y++){for(_=L[y],p=0;p<w;)g[v++]=_>>>p&255,p+=o.bits;m[y]=_>>>p&255}if(16===o.bits){f=(L=new Uint32Array(o.decodePixels().buffer)).length,g=new Uint8Array(f*(32/o.pixelBitlength)*o.colors),m=new Uint8Array(f*(32/o.pixelBitlength));for(var _,b=1<o.colors,C=v=y=0;y<f;)_=L[y++],g[v++]=_>>>0&255,b&&(g[v++]=_>>>16&255,_=L[y++],g[v++]=_>>>0&255),m[C++]=_>>>16&255;A=8}r!==T.image_compression.NONE&&B()?(e=N(g,o.width*o.colors,o.colors,r),u=N(m,o.width,1,r)):(e=g,u=m,d=null)}if(3===o.colorType&&(h=this.color_spaces.INDEXED,c=o.palette,o.transparency.indexed)){var E=o.transparency.indexed,S=0;for(y=0,f=E.length;y<f;++y)S+=E[y];if((S/=255)==f-1&&-1!==E.indexOf(0))a=[E.indexOf(0)];else if(S!==f){var L=o.decodePixels();for(m=new Uint8Array(L.length),y=0,f=L.length;y<f;y++)m[y]=E[L[y]];u=N(m,o.width,1)}}var I=function(e){var t;switch(e){case T.image_compression.FAST:t=11;break;case T.image_compression.MEDIUM:t=13;break;case T.image_compression.SLOW:t=14;break;default:t=12}return t}(r);return s=d===this.decode.FLATE_DECODE?"/Predictor "+I+" /Colors "+l+" /BitsPerComponent "+A+" /Columns "+o.width:"/Colors "+l+" /BitsPerComponent "+A+" /Columns "+o.width,(this.isArrayBuffer(e)||this.isArrayBufferView(e))&&(e=this.arrayBufferToBinaryString(e)),(u&&this.isArrayBuffer(u)||this.isArrayBufferView(u))&&(u=this.arrayBufferToBinaryString(u)),this.createImageInfo(e,o.width,o.height,h,A,d,t,i,s,a,c,u,I)}throw new Error("Unsupported PNG image data, try using JPEG instead.")},(z=le.API).processGIF89A=function(e,t,i,r,n){var o=new Se(e),s=o.width,a=o.height,l=[];o.decodeAndBlitFrameRGBA(0,l);var c={data:l,width:s,height:a},u=new Te(100).encode(c,100);return z.processJPEG.call(this,u,t,i,r)},z.processGIF87A=z.processGIF89A,(V=le.API).processBMP=function(e,t,i,r,n){var o=new Be(e,!1),s=o.width,a=o.height,l={data:o.getData(),width:s,height:a},c=new Te(100).encode(l,100);return V.processJPEG.call(this,c,t,i,r)},le.API.setLanguage=function(e){return void 0===this.internal.languageSettings&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),void 0!=={af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"FYRO Macedonian",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]&&(this.internal.languageSettings.languageCode=e,!1===this.internal.languageSettings.isSubscribed&&(this.internal.events.subscribe("putCatalog",(function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")})),this.internal.languageSettings.isSubscribed=!0)),this},j=(G=le.API).getCharWidthsArray=function(e,t){var i,r,n,o=(t=t||{}).font||this.internal.getFont(),s=t.fontSize||this.internal.getFontSize(),a=t.charSpace||this.internal.getCharSpace(),l=t.widths?t.widths:o.metadata.Unicode.widths,c=l.fof?l.fof:1,u=t.kerning?t.kerning:o.metadata.Unicode.kerning,h=u.fof?u.fof:1,d=0,A=l[0]||c,p=[];for(i=0,r=e.length;i<r;i++)n=e.charCodeAt(i),p.push("function"==typeof o.metadata.widthOfString?(o.metadata.widthOfGlyph(o.metadata.characterToGlyph(n))+a*(1e3/s)||0)/1e3:(l[n]||A)/c+(u[n]&&u[n][d]||0)/h),d=n;return p},W=G.getArraySum=function(e){for(var t=e.length,i=0;t;)i+=e[--t];return i},q=G.getStringUnitWidth=function(e,t){var i=(t=t||{}).fontSize||this.internal.getFontSize(),r=t.font||this.internal.getFont(),n=t.charSpace||this.internal.getCharSpace();return"function"==typeof r.metadata.widthOfString?r.metadata.widthOfString(e,i,n)/i:W(j.apply(this,arguments))},K=function(e,t,i,r){for(var n=[],o=0,s=e.length,a=0;o!==s&&a+t[o]<i;)a+=t[o],o++;n.push(e.slice(0,o));var l=o;for(a=0;o!==s;)a+t[o]>r&&(n.push(e.slice(l,o)),a=0,l=o),a+=t[o],o++;return l!==o&&n.push(e.slice(l,o)),n},X=function(e,t,i){i||(i={});var r,n,o,s,a,l,c=[],u=[c],h=i.textIndent||0,d=0,A=0,p=e.split(" "),f=j.apply(this,[" ",i])[0];if(l=-1===i.lineIndent?p[0].length+2:i.lineIndent||0){var g=Array(l).join(" "),m=[];p.map((function(e){1<(e=e.split(/\s*\n/)).length?m=m.concat(e.map((function(e,t){return(t&&e.length?"\n":"")+e}))):m.push(e[0])})),p=m,l=q.apply(this,[g,i])}for(o=0,s=p.length;o<s;o++){var w=0;if(r=p[o],l&&"\n"==r[0]&&(r=r.substr(1),w=1),n=j.apply(this,[r,i]),t<h+d+(A=W(n))||w){if(t<A){for(a=K.apply(this,[r,n,t-(h+d),t]),c.push(a.shift()),c=[a.pop()];a.length;)u.push([a.shift()]);A=W(n.slice(r.length-(c[0]?c[0].length:0)))}else c=[r];u.push(c),h=A+l,d=f}else c.push(r),h+=d+A,d=f}if(l)var y=function(e,t){return(t?g:"")+e.join(" ")};else y=function(e){return e.join(" ")};return u.map(y)},G.splitTextToSize=function(e,t,i){var r,n=(i=i||{}).fontSize||this.internal.getFontSize(),o=(function(e){if(e.widths&&e.kerning)return{widths:e.widths,kerning:e.kerning};var t=this.internal.getFont(e.fontName,e.fontStyle),i="Unicode";return t.metadata[i]?{widths:t.metadata[i].widths||{0:1},kerning:t.metadata[i].kerning||{}}:{font:t.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,i);r=Array.isArray(e)?e:e.split(/\r?\n/);var s=1*this.internal.scaleFactor*t/n;o.textIndent=i.textIndent?1*i.textIndent*this.internal.scaleFactor/n:0,o.lineIndent=i.lineIndent;var a,l,c=[];for(a=0,l=r.length;a<l;a++)c=c.concat(X.apply(this,[r[a],s,o]));return c},J=le.API,Z={codePages:["WinAnsiEncoding"],WinAnsiEncoding:(Y=function(e){for(var t="klmnopqrstuvwxyz",i={},r=0;r<t.length;r++)i[t[r]]="0123456789abcdef"[r];var n,o,s,a,l,c={},u=1,h=c,d=[],A="",p="",f=e.length-1;for(r=1;r!=f;)l=e[r],r+=1,"'"==l?o=o?(a=o.join(""),n):[]:o?o.push(l):"{"==l?(d.push([h,a]),h={},a=n):"}"==l?((s=d.pop())[0][s[1]]=h,a=n,h=s[0]):"-"==l?u=-1:a===n?i.hasOwnProperty(l)?(A+=i[l],a=parseInt(A,16)*u,u=1,A=""):A+=l:i.hasOwnProperty(l)?(p+=i[l],h[a]=parseInt(p,16)*u,u=1,a=n,p=""):p+=l;return c})("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},$={Unicode:{Courier:Z,"Courier-Bold":Z,"Courier-BoldOblique":Z,"Courier-Oblique":Z,Helvetica:Z,"Helvetica-Bold":Z,"Helvetica-BoldOblique":Z,"Helvetica-Oblique":Z,"Times-Roman":Z,"Times-Bold":Z,"Times-BoldItalic":Z,"Times-Italic":Z}},ee={Unicode:{"Courier-Oblique":Y("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":Y("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":Y("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:Y("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":Y("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":Y("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:Y("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:Y("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":Y("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:Y("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":Y("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":Y("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":Y("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":Y("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}},J.events.push(["addFont",function(e){var t,i,r,n=e.font,o="Unicode";(t=ee[o][n.postScriptName])&&((i=n.metadata[o]?n.metadata[o]:n.metadata[o]={}).widths=t.widths,i.kerning=t.kerning),(r=$[o][n.postScriptName])&&((i=n.metadata[o]?n.metadata[o]:n.metadata[o]={}).encoding=r).codePages&&r.codePages.length&&(n.encoding=r.codePages[0])}]),te=le,"undefined"!=typeof self&&self||"undefined"!=typeof global&&global||"undefined"!=typeof window&&window||Function("return this")(),te.API.events.push(["addFont",function(e){var t=e.font,i=e.instance;if(void 0!==i&&i.existsFileInVFS(t.postScriptName)){var r=i.getFileFromVFS(t.postScriptName);if("string"!=typeof r)throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+t.postScriptName+"').");t.metadata=te.API.TTFFont.open(t.postScriptName,t.fontName,r,t.encoding),t.metadata.Unicode=t.metadata.Unicode||{encoding:{},kerning:{},widths:[]},t.metadata.glyIdsUsed=[0]}else if(!1===t.isStandardFont)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+t.postScriptName+"').")}]),(ie=le.API).addSvg=function(e,t,i,r,n){if(void 0===t||void 0===i)throw new Error("addSVG needs values for 'x' and 'y'");function o(e){for(var t=parseFloat(e[1]),i=parseFloat(e[2]),r=[],n=3,o=e.length;n<o;)"c"===e[n]?(r.push([parseFloat(e[n+1]),parseFloat(e[n+2]),parseFloat(e[n+3]),parseFloat(e[n+4]),parseFloat(e[n+5]),parseFloat(e[n+6])]),n+=7):"l"===e[n]?(r.push([parseFloat(e[n+1]),parseFloat(e[n+2])]),n+=3):n+=1;return[t,i,r]}var s,a,l,c,u,h,d,A=((a=((d=(l=document).createElement("iframe"),c=".jsPDF_sillysvg_iframe {display:none;position:absolute;}",(h=(u=l).createElement("style")).type="text/css",h.styleSheet?h.styleSheet.cssText=c:h.appendChild(u.createTextNode(c)),u.getElementsByTagName("head")[0].appendChild(h),d.name="childframe",d.setAttribute("width",0),d.setAttribute("height",0),d.setAttribute("frameborder","0"),d.setAttribute("scrolling","no"),d.setAttribute("seamless","seamless"),d.setAttribute("class","jsPDF_sillysvg_iframe"),l.body.appendChild(d),s=d).contentWindow||s.contentDocument).document).write(e),a.close(),a.getElementsByTagName("svg")[0]),p=[1,1],f=parseFloat(A.getAttribute("width")),g=parseFloat(A.getAttribute("height"));f&&g&&(r&&n?p=[r/f,n/g]:r?p=[r/f,r/f]:n&&(p=[n/g,n/g]));var m,w,y,v,_=A.childNodes;for(m=0,w=_.length;m<w;m++)(y=_[m]).tagName&&"PATH"===y.tagName.toUpperCase()&&((v=o(y.getAttribute("d").split(" ")))[0]=v[0]*p[0]+t,v[1]=v[1]*p[1]+i,this.lines.call(this,v[2],v[0],v[1],p));return this},ie.addSVG=ie.addSvg,ie.addSvgAsImage=function(e,t,i,r,n,o,s,a){if(isNaN(t)||isNaN(i))throw console.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(r)||isNaN(n))throw console.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var l=document.createElement("canvas");l.width=r,l.height=n;var c=l.getContext("2d");return c.fillStyle="#fff",c.fillRect(0,0,l.width,l.height),canvg(l,e,{ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0,ignoreClear:!0}),this.addImage(l.toDataURL("image/jpeg",1),t,i,r,n,s,a),this},le.API.putTotalPages=function(e){var t,i;i=parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var n=0;n<this.internal.pages[r].length;n++)this.internal.pages[r][n]=this.internal.pages[r][n].replace(t,i);return this},le.API.viewerPreferences=function(t,i){var r;t=t||{},i=i||!1;var n,o,s={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},a=Object.keys(s),l=[],c=0,u=0,h=0,d=!0;function A(e,t){var i,r=!1;for(i=0;i<e.length;i+=1)e[i]===t&&(r=!0);return r}if(void 0===this.internal.viewerpreferences&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(s)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,"reset"===t||!0===i){var p=a.length;for(h=0;h<p;h+=1)r[a[h]].value=r[a[h]].defaultValue,r[a[h]].explicitSet=!1}if("object"===e(t))for(n in t)if(o=t[n],A(a,n)&&void 0!==o){if("boolean"===r[n].type&&"boolean"==typeof o)r[n].value=o;else if("name"===r[n].type&&A(r[n].valueSet,o))r[n].value=o;else if("integer"===r[n].type&&Number.isInteger(o))r[n].value=o;else if("array"===r[n].type){for(c=0;c<o.length;c+=1)if(d=!0,1===o[c].length&&"number"==typeof o[c][0])l.push(String(o[c]-1));else if(1<o[c].length){for(u=0;u<o[c].length;u+=1)"number"!=typeof o[c][u]&&(d=!1);!0===d&&l.push([o[c][0]-1,o[c][1]-1].join(" "))}r[n].value="["+l.join(" ")+"]"}else r[n].value=r[n].defaultValue;r[n].explicitSet=!0}return!1===this.internal.viewerpreferences.isSubscribed&&(this.internal.events.subscribe("putCatalog",(function(){var e,t=[];for(e in r)!0===r[e].explicitSet&&t.push("name"===r[e].type?"/"+e+" /"+r[e].value:"/"+e+" "+r[e].value);0!==t.length&&this.internal.write("/ViewerPreferences\n<<\n"+t.join("\n")+"\n>>")})),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},oe=ne=re="",le.API.addMetadata=function(e,t){return ne=t||"http://jspdf.default.namespaceuri/",re=e,this.internal.events.subscribe("postPutResources",(function(){if(re){var e='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+ne+'"><jspdf:metadata>',t=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),i=unescape(encodeURIComponent(e)),r=unescape(encodeURIComponent(re)),n=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),o=unescape(encodeURIComponent("</x:xmpmeta>")),s=i.length+r.length+n.length+t.length+o.length;oe=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+s+" >>"),this.internal.write("stream"),this.internal.write(t+i+r+n+o),this.internal.write("endstream"),this.internal.write("endobj")}else oe=""})),this.internal.events.subscribe("putCatalog",(function(){oe&&this.internal.write("/Metadata "+oe+" 0 R")})),this},function(e,t){var i=e.API,r=i.pdfEscape16=function(e,t){for(var i,r=t.metadata.Unicode.widths,n=["","0","00","000","0000"],o=[""],s=0,a=e.length;s<a;++s){if(i=t.metadata.characterToGlyph(e.charCodeAt(s)),t.metadata.glyIdsUsed.push(i),t.metadata.toUnicode[i]=e.charCodeAt(s),-1==r.indexOf(i)&&(r.push(i),r.push([parseInt(t.metadata.widthOfGlyph(i),10)])),"0"==i)return o.join("");i=i.toString(16),o.push(n[4-i.length],i)}return o.join("")},n=function(e){var t,i,r,n,o,s,a;for(o="/CIDInit /ProcSet findresource begin\n12 dict begin\nbegincmap\n/CIDSystemInfo <<\n  /Registry (Adobe)\n  /Ordering (UCS)\n  /Supplement 0\n>> def\n/CMapName /Adobe-Identity-UCS def\n/CMapType 2 def\n1 begincodespacerange\n<0000><ffff>\nendcodespacerange",r=[],s=0,a=(i=Object.keys(e).sort((function(e,t){return e-t}))).length;s<a;s++)t=i[s],100<=r.length&&(o+="\n"+r.length+" beginbfchar\n"+r.join("\n")+"\nendbfchar",r=[]),n=("0000"+e[t].toString(16)).slice(-4),t=("0000"+(+t).toString(16)).slice(-4),r.push("<"+t+"><"+n+">");return r.length&&(o+="\n"+r.length+" beginbfchar\n"+r.join("\n")+"\nendbfchar\n"),o+"endcmap\nCMapName currentdict /CMap defineresource pop\nend\nend"};i.events.push(["putFont",function(t){!function(t,i,r,o){if(t.metadata instanceof e.API.TTFFont&&"Identity-H"===t.encoding){for(var s=t.metadata.Unicode.widths,a=t.metadata.subset.encode(t.metadata.glyIdsUsed,1),l="",c=0;c<a.length;c++)l+=String.fromCharCode(a[c]);var u=r();o({data:l,addLength1:!0}),i("endobj");var h=r();o({data:n(t.metadata.toUnicode),addLength1:!0}),i("endobj");var d=r();i("<<"),i("/Type /FontDescriptor"),i("/FontName /"+t.fontName),i("/FontFile2 "+u+" 0 R"),i("/FontBBox "+e.API.PDFObject.convert(t.metadata.bbox)),i("/Flags "+t.metadata.flags),i("/StemV "+t.metadata.stemV),i("/ItalicAngle "+t.metadata.italicAngle),i("/Ascent "+t.metadata.ascender),i("/Descent "+t.metadata.decender),i("/CapHeight "+t.metadata.capHeight),i(">>"),i("endobj");var A=r();i("<<"),i("/Type /Font"),i("/BaseFont /"+t.fontName),i("/FontDescriptor "+d+" 0 R"),i("/W "+e.API.PDFObject.convert(s)),i("/CIDToGIDMap /Identity"),i("/DW 1000"),i("/Subtype /CIDFontType2"),i("/CIDSystemInfo"),i("<<"),i("/Supplement 0"),i("/Registry (Adobe)"),i("/Ordering ("+t.encoding+")"),i(">>"),i(">>"),i("endobj"),t.objectNumber=r(),i("<<"),i("/Type /Font"),i("/Subtype /Type0"),i("/ToUnicode "+h+" 0 R"),i("/BaseFont /"+t.fontName),i("/Encoding /"+t.encoding),i("/DescendantFonts ["+A+" 0 R]"),i(">>"),i("endobj"),t.isAlreadyPutted=!0}}(t.font,t.out,t.newObject,t.putStream)}]),i.events.push(["putFont",function(t){!function(t,i,r,o){if(t.metadata instanceof e.API.TTFFont&&"WinAnsiEncoding"===t.encoding){for(var s=t.metadata.rawData,a="",l=0;l<s.length;l++)a+=String.fromCharCode(s[l]);var c=r();o({data:a,addLength1:!0}),i("endobj");var u=r();o({data:n(t.metadata.toUnicode),addLength1:!0}),i("endobj");var h=r();for(i("<<"),i("/Descent "+t.metadata.decender),i("/CapHeight "+t.metadata.capHeight),i("/StemV "+t.metadata.stemV),i("/Type /FontDescriptor"),i("/FontFile2 "+c+" 0 R"),i("/Flags 96"),i("/FontBBox "+e.API.PDFObject.convert(t.metadata.bbox)),i("/FontName /"+t.fontName),i("/ItalicAngle "+t.metadata.italicAngle),i("/Ascent "+t.metadata.ascender),i(">>"),i("endobj"),t.objectNumber=r(),l=0;l<t.metadata.hmtx.widths.length;l++)t.metadata.hmtx.widths[l]=parseInt(t.metadata.hmtx.widths[l]*(1e3/t.metadata.head.unitsPerEm));i("<</Subtype/TrueType/Type/Font/ToUnicode "+u+" 0 R/BaseFont/"+t.fontName+"/FontDescriptor "+h+" 0 R/Encoding/"+t.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(t.metadata.hmtx.widths)+">>"),i("endobj"),t.isAlreadyPutted=!0}}(t.font,t.out,t.newObject,t.putStream)}]);var o=function(e){var t,i,n=e.text||"",o=e.x,s=e.y,a=e.options||{},l=e.mutex||{},c=l.pdfEscape,u=l.activeFontKey,h=l.fonts,d="",A=0,p="",f=h[i=u].encoding;if("Identity-H"!==h[i].encoding)return{text:n,x:o,y:s,options:a,mutex:l};for(p=n,i=u,"[object Array]"===Object.prototype.toString.call(n)&&(p=n[0]),A=0;A<p.length;A+=1)h[i].metadata.hasOwnProperty("cmap")&&(t=h[i].metadata.cmap.unicode.codeMap[p[A].charCodeAt(0)]),t||p[A].charCodeAt(0)<256&&h[i].metadata.hasOwnProperty("Unicode")?d+=p[A]:d+="";var g="";return parseInt(i.slice(1))<14||"WinAnsiEncoding"===f?g=function(e){for(var t="",i=0;i<e.length;i++)t+=""+e.charCodeAt(i).toString(16);return t}(c(d,i)):"Identity-H"===f&&(g=r(d,h[i])),l.isHex=!0,{text:g,x:o,y:s,options:a,mutex:l}};i.events.push(["postProcessText",function(e){var t=e.text||"",i=[],r={text:t,x:e.x,y:e.y,options:e.options,mutex:e.mutex};if("[object Array]"===Object.prototype.toString.call(t)){var n=0;for(n=0;n<t.length;n+=1)"[object Array]"===Object.prototype.toString.call(t[n])&&3===t[n].length?i.push([o(Object.assign({},r,{text:t[n][0]})).text,t[n][1],t[n][2]]):i.push(o(Object.assign({},r,{text:t[n]})).text);e.text=i}else e.text=o(Object.assign({},r,{text:t})).text}])}(le,"undefined"!=typeof self&&self||"undefined"!=typeof global&&global||"undefined"!=typeof window&&window||Function("return this")()),ae=function(e){return void 0!==e&&(void 0===e.vFS&&(e.vFS={}),!0)},(se=le.API).existsFileInVFS=function(e){return!!ae(this.internal)&&void 0!==this.internal.vFS[e]},se.addFileToVFS=function(e,t){return ae(this.internal),this.internal.vFS[e]=t,this},se.getFileFromVFS=function(e){return ae(this.internal),void 0!==this.internal.vFS[e]?this.internal.vFS[e]:null},le.API.addHTML=function(e,t,i,r,n){if("undefined"==typeof html2canvas&&"undefined"==typeof rasterizeHTML)throw new Error("You need either https://github.com/niklasvh/html2canvas or https://github.com/cburgmer/rasterizeHTML.js");"number"!=typeof t&&(r=t,n=i),"function"==typeof r&&(n=r,r=null),"function"!=typeof n&&(n=function(){});var o=this.internal,s=o.scaleFactor,a=o.pageSize.getWidth(),l=o.pageSize.getHeight();if((r=r||{}).onrendered=(function(e){t=parseInt(t)||0,i=parseInt(i)||0;var o=r.dim||{},c=Object.assign({top:0,right:0,bottom:0,left:0,useFor:"content"},r.margin),u=o.h||Math.min(l,e.height/s),h=o.w||Math.min(a,e.width/s)-t,d=r.format||"JPEG",A=r.imageCompression||"SLOW";if(e.height>l-c.top-c.bottom&&r.pagesplit){var p=function(e,t,i,n,o){var s=document.createElement("canvas");s.height=o,s.width=n;var a=s.getContext("2d");return a.mozImageSmoothingEnabled=!1,a.webkitImageSmoothingEnabled=!1,a.msImageSmoothingEnabled=!1,a.imageSmoothingEnabled=!1,a.fillStyle=r.backgroundColor||"#ffffff",a.fillRect(0,0,n,o),a.drawImage(e,t,i,n,o,0,0,n,o),s},f=(function(){for(var r,o,u=0,f=0,g={},m=!1;;){var w;if(f=0,g.top=0!==u?c.top:i,g.left=0!==u?c.left:t,m=(a-c.left-c.right)*s<e.width,"content"===c.useFor?0===u?(r=Math.min((a-c.left)*s,e.width),o=Math.min((l-c.top)*s,e.height-u)):(r=Math.min(a*s,e.width),o=Math.min(l*s,e.height-u),g.top=0):(r=Math.min((a-c.left-c.right)*s,e.width),o=Math.min((l-c.bottom-c.top)*s,e.height-u)),m)for(;;){"content"===c.useFor&&(0===f?r=Math.min((a-c.left)*s,e.width):(r=Math.min(a*s,e.width-f),g.left=0));var y=[w=p(e,f,u,r,o),g.left,g.top,w.width/s,w.height/s,d,null,A];if(this.addImage.apply(this,y),(f+=r)>=e.width)break;this.addPage()}else y=[w=p(e,0,u,r,o),g.left,g.top,w.width/s,w.height/s,d,null,A],this.addImage.apply(this,y);if((u+=o)>=e.height)break;this.addPage()}n(h,u,null,y)}).bind(this);if("CANVAS"===e.nodeName){var g=new Image;g.onload=f,g.src=e.toDataURL("image/png"),e=g}else f()}else{var m=Math.random().toString(35),w=[e,t,i,h,u,d,m,A];this.addImage.apply(this,w),n(h,u,m,w)}}).bind(this),"undefined"!=typeof html2canvas&&!r.rstz)return html2canvas(e,r);if("undefined"==typeof rasterizeHTML)return null;var c="drawDocument";return"string"==typeof e&&(c=/^http/.test(e)?"drawURL":"drawHTML"),r.width=r.width||a*s,rasterizeHTML[c](e,void 0,r).then((function(e){r.onrendered(e.image)}),(function(e){n(null,e)}))},function(t){var i,r,n,o,s,a,l,c,u,h,d,A,p,f,g,m,w,y,v,_;i=function(){return function(t){return e.prototype=t,new e};function e(){}}(),h=function(e){var t,i,r,n,o,s,a;for(i=0,r=e.length,t=void 0,s=n=!1;!n&&i!==r;)(t=e[i]=e[i].trimLeft())&&(n=!0),i++;for(i=r-1;r&&!s&&-1!==i;)(t=e[i]=e[i].trimRight())&&(s=!0),i--;for(o=/\s+$/g,a=!0,i=0;i!==r;)"\u2028"!=e[i]&&(t=e[i].replace(/\s+/g," "),a&&(t=t.trimLeft()),t&&(a=o.test(t)),e[i]=t),i++;return e},A=function(e){var t,i,r;for(t=void 0,i=(r=e.split(",")).shift();!t&&i;)t=n[i.trim().toLowerCase()],i=r.shift();return t},p=function(e){var t;return-1<(e="auto"===e?"0px":e).indexOf("em")&&!isNaN(Number(e.replace("em","")))&&(e=18.719*Number(e.replace("em",""))+"px"),-1<e.indexOf("pt")&&!isNaN(Number(e.replace("pt","")))&&(e=1.333*Number(e.replace("pt",""))+"px"),(t=f[e])?t:void 0!==(t={"xx-small":9,"x-small":11,small:13,medium:16,large:19,"x-large":23,"xx-large":28,auto:0}[e])||(t=parseFloat(e))?f[e]=t/16:(t=e.match(/([\d\.]+)(px)/),f[e]=Array.isArray(t)&&3===t.length?parseFloat(t[1])/16:1)},u=function(e){var t,i,r,n,u;return u=e,n=document.defaultView&&document.defaultView.getComputedStyle?document.defaultView.getComputedStyle(u,null):u.currentStyle?u.currentStyle:u.style,i=void 0,(t={})["font-family"]=A((r=function(e){return e=e.replace(/-\D/g,(function(e){return e.charAt(1).toUpperCase()})),n[e]})("font-family"))||"times",t["font-style"]=o[r("font-style")]||"normal",t["text-align"]=s[r("text-align")]||"left","bold"===(i=a[r("font-weight")]||"normal")&&(t["font-style"]="normal"===t["font-style"]?i:i+t["font-style"]),t["font-size"]=p(r("font-size"))||1,t["line-height"]=p(r("line-height"))||1,t.display="inline"===r("display")?"inline":"block",t["margin-top"]=(i="block"===t.display)&&p(r("margin-top"))||0,t["margin-bottom"]=i&&p(r("margin-bottom"))||0,t["padding-top"]=i&&p(r("padding-top"))||0,t["padding-bottom"]=i&&p(r("padding-bottom"))||0,t["margin-left"]=i&&p(r("margin-left"))||0,t["margin-right"]=i&&p(r("margin-right"))||0,t["padding-left"]=i&&p(r("padding-left"))||0,t["padding-right"]=i&&p(r("padding-right"))||0,t["page-break-before"]=r("page-break-before")||"auto",t.float=l[r("cssFloat")]||"none",t.clear=c[r("clear")]||"none",t.color=r("color"),t},g=function(e,t,i){var r,n,o,s,a;if(o=!1,s=n=void 0,r=i["#"+e.id])if("function"==typeof r)o=r(e,t);else for(n=0,s=r.length;!o&&n!==s;)o=r[n](e,t),n++;if(r=i[e.nodeName],!o&&r)if("function"==typeof r)o=r(e,t);else for(n=0,s=r.length;!o&&n!==s;)o=r[n](e,t),n++;for(a="string"==typeof e.className?e.className.split(" "):[],n=0;n<a.length;n++)if(r=i["."+a[n]],!o&&r)if("function"==typeof r)o=r(e,t);else for(n=0,s=r.length;!o&&n!==s;)o=r[n](e,t),n++;return o},_=function(e,t){var i,r,n,o,s,a,l,c,u;for(i=[],r=[],n=0,u=e.rows[0].cells.length,l=e.clientWidth;n<u;)r[n]={name:(c=e.rows[0].cells[n]).textContent.toLowerCase().replace(/\s+/g,""),prompt:c.textContent.replace(/\r?\n/g,""),width:c.clientWidth/l*t.pdf.internal.pageSize.getWidth()},n++;for(n=1;n<e.rows.length;){for(a=e.rows[n],s={},o=0;o<a.cells.length;)s[r[o].name]=a.cells[o].textContent.replace(/\r?\n/g,""),o++;i.push(s),n++}return{rows:i,headers:r}};var b={SCRIPT:1,STYLE:1,NOSCRIPT:1,OBJECT:1,EMBED:1,SELECT:1},C=1;r=function(t,n,o){var s,a,l,c,h,d,A,p;for(a=t.childNodes,s=void 0,(h="block"===(l=u(t)).display)&&(n.setBlockBoundary(),n.setBlockStyle(l)),c=0,d=a.length;c<d;){if("object"===e(s=a[c])){if(n.executeWatchFunctions(s),1===s.nodeType&&"HEADER"===s.nodeName){var f=s,w=n.pdf.margins_doc.top;n.pdf.internal.events.subscribe("addPage",(function(e){n.y=w,r(f,n,o),n.pdf.margins_doc.top=n.y+10,n.y+=10}),!1)}if(8===s.nodeType&&"#comment"===s.nodeName)~s.textContent.indexOf("ADD_PAGE")&&(n.pdf.addPage(),n.y=n.pdf.margins_doc.top);else if(1!==s.nodeType||b[s.nodeName])if(3===s.nodeType){var y=s.nodeValue;if(s.nodeValue&&"LI"===s.parentNode.nodeName)if("OL"===s.parentNode.parentNode.nodeName)y=C+++". "+y;else{var v=l["font-size"],E=(3-.75*v)*n.pdf.internal.scaleFactor,S=.75*v*n.pdf.internal.scaleFactor,L=1.74*v/n.pdf.internal.scaleFactor;p=function(e,t){this.pdf.circle(e+E,t+S,L,"FD")}}16&s.ownerDocument.body.compareDocumentPosition(s)&&n.addText(y,l)}else"string"==typeof s&&n.addText(s,l);else{var T;if("IMG"===s.nodeName){var B=s.getAttribute("src");T=m[n.pdf.sHashCode(B)||B]}if(T){n.pdf.internal.pageSize.getHeight()-n.pdf.margins_doc.bottom<n.y+s.height&&n.y>n.pdf.margins_doc.top&&(n.pdf.addPage(),n.y=n.pdf.margins_doc.top,n.executeWatchFunctions(s));var N=u(s),I=n.x,F=12/n.pdf.internal.scaleFactor,O=(N["margin-left"]+N["padding-left"])*F,x=(N["margin-right"]+N["padding-right"])*F,D=(N["margin-top"]+N["padding-top"])*F,R=(N["margin-bottom"]+N["padding-bottom"])*F;n.pdf.addImage(T,I+=void 0!==N.float&&"right"===N.float?n.settings.width-s.width-x:O,n.y+D,s.width,s.height),T=void 0,"right"===N.float||"left"===N.float?(n.watchFunctions.push((function(e,t,i,r){return n.y>=t?(n.x+=e,n.settings.width+=i,!0):!!(r&&1===r.nodeType&&!b[r.nodeName]&&n.x+r.width>n.pdf.margins_doc.left+n.pdf.margins_doc.width)&&(n.x+=e,n.y=t,n.settings.width+=i,!0)}).bind(this,"left"===N.float?-s.width-O-x:0,n.y+s.height+D+R,s.width)),n.watchFunctions.push((function(e,t,i){return!(n.y<e&&t===n.pdf.internal.getNumberOfPages())||1===i.nodeType&&"both"===u(i).clear&&(n.y=e,!0)}).bind(this,n.y+s.height,n.pdf.internal.getNumberOfPages())),n.settings.width-=s.width+O+x,"left"===N.float&&(n.x+=s.width+O+x)):n.y+=s.height+D+R}else if("TABLE"===s.nodeName)A=_(s,n),n.y+=10,n.pdf.table(n.x,n.y,A.rows,A.headers,{autoSize:!1,printHeaders:o.printHeaders,margins:n.pdf.margins_doc,css:u(s)}),n.y=n.pdf.lastCellPos.y+n.pdf.lastCellPos.h+20;else if("OL"===s.nodeName||"UL"===s.nodeName)C=1,g(s,n,o)||r(s,n,o),n.y+=10;else if("LI"===s.nodeName){var U=n.x;n.x+=20/n.pdf.internal.scaleFactor,n.y+=3,g(s,n,o)||r(s,n,o),n.x=U}else"BR"===s.nodeName?(n.y+=l["font-size"]*n.pdf.internal.scaleFactor,n.addText("\u2028",i(l))):g(s,n,o)||r(s,n,o)}}c++}if(o.outY=n.y,h)return n.setBlockBoundary(p)},m={},w=function(e,t,i,r){var n,o=e.getElementsByTagName("img"),s=o.length,a=0;function l(){t.pdf.internal.events.publish("imagesLoaded"),r(n)}function c(e,i,r){if(e){var o=new Image;n=++a,o.crossOrigin="",o.onerror=o.onload=function(){if(o.complete&&(0===o.src.indexOf("data:image/")&&(o.width=i||o.width||0,o.height=r||o.height||0),o.width+o.height)){var n=t.pdf.sHashCode(e)||e;m[n]=m[n]||o}--a||l()},o.src=e}}for(;s--;)c(o[s].getAttribute("src"),o[s].width,o[s].height);return a||l()},y=function(e,t,i){var n=e.getElementsByTagName("footer");if(0<n.length){n=n[0];var o=t.pdf.internal.write,s=t.y;t.pdf.internal.write=function(){},r(n,t,i);var a=Math.ceil(t.y-s)+5;t.y=s,t.pdf.internal.write=o,t.pdf.margins_doc.bottom+=a;for(var l=function(e){var o=void 0!==e?e.pageNumber:1,s=t.y;t.y=t.pdf.internal.pageSize.getHeight()-t.pdf.margins_doc.bottom,t.pdf.margins_doc.bottom-=a;for(var l=n.getElementsByTagName("span"),c=0;c<l.length;++c)-1<(" "+l[c].className+" ").replace(/[\n\t]/g," ").indexOf(" pageCounter ")&&(l[c].innerHTML=o),-1<(" "+l[c].className+" ").replace(/[\n\t]/g," ").indexOf(" totalPages ")&&(l[c].innerHTML="###jsPDFVarTotalPages###");r(n,t,i),t.pdf.margins_doc.bottom+=a,t.y=s},c=n.getElementsByTagName("span"),u=0;u<c.length;++u)-1<(" "+c[u].className+" ").replace(/[\n\t]/g," ").indexOf(" totalPages ")&&t.pdf.internal.events.subscribe("htmlRenderingFinished",t.pdf.putTotalPages.bind(t.pdf,"###jsPDFVarTotalPages###"),!0);t.pdf.internal.events.subscribe("addPage",l,!1),l(),b.FOOTER=1}},v=function(e,t,i,n,o,s){if(!t)return!1;var a,l,c,u;"string"==typeof t||t.parentNode||(t=""+t.innerHTML),"string"==typeof t&&(a=t.replace(/<\/?script[^>]*?>/gi,""),u="jsPDFhtmlText"+Date.now().toString()+(1e3*Math.random()).toFixed(0),(c=document.createElement("div")).style.cssText="position: absolute !important;clip: rect(1px 1px 1px 1px); /* IE6, IE7 */clip: rect(1px, 1px, 1px, 1px);padding:0 !important;border:0 !important;height: 1px !important;width: 1px !important; top:auto;left:-100px;overflow: hidden;",c.innerHTML='<iframe style="height:1px;width:1px" name="'+u+'" />',document.body.appendChild(c),(l=window.frames[u]).document.open(),l.document.writeln(a),l.document.close(),t=l.document.body);var h,A=new d(e,i,n,o);return w.call(this,t,A,o.elementHandlers,(function(e){y(t,A,o.elementHandlers),r(t,A,o.elementHandlers),A.pdf.internal.events.publish("htmlRenderingFinished"),h=A.dispose(),"function"==typeof s?s(h):e&&console.error("jsPDF Warning: rendering issues? provide a callback to fromHTML!")})),h||{x:A.x,y:A.y}},(d=function(e,t,i,r){return this.pdf=e,this.x=t,this.y=i,this.settings=r,this.watchFunctions=[],this.init(),this}).prototype.init=function(){return this.paragraph={text:[],style:[]},this.pdf.internal.write("q")},d.prototype.dispose=function(){return this.pdf.internal.write("Q"),{x:this.x,y:this.y,ready:!0}},d.prototype.executeWatchFunctions=function(e){var t=!1,i=[];if(0<this.watchFunctions.length){for(var r=0;r<this.watchFunctions.length;++r)!0===this.watchFunctions[r](e)?t=!0:i.push(this.watchFunctions[r]);this.watchFunctions=i}return t},d.prototype.splitFragmentsIntoLines=function(e,t){var r,n,o,s,a,l,c,u,h,d,A,p,f,g;for(d=this.pdf.internal.scaleFactor,s={},l=c=u=g=a=o=h=n=void 0,p=[A=[]],r=0,f=this.settings.width;e.length;)if(a=e.shift(),g=t.shift(),a)if((o=s[(n=g["font-family"])+(h=g["font-style"])])||(o=this.pdf.internal.getFont(n,h).metadata.Unicode,s[n+h]=o),c=this.pdf.getStringUnitWidth(a,u={widths:o.widths,kerning:o.kerning,fontSize:12*g["font-size"],textIndent:r})*u.fontSize/d,"\u2028"==a)p.push(A=[]);else if(f<r+c){for(l=this.pdf.splitTextToSize(a,f,u),A.push([l.shift(),g]);l.length;)A=[[l.shift(),g]],p.push(A);r=this.pdf.getStringUnitWidth(A[0][0],u)*u.fontSize/d}else A.push([a,g]),r+=c;if(void 0!==g["text-align"]&&("center"===g["text-align"]||"right"===g["text-align"]||"justify"===g["text-align"]))for(var m=0;m<p.length;++m){var w=this.pdf.getStringUnitWidth(p[m][0][0],u)*u.fontSize/d;0<m&&(p[m][0][1]=i(p[m][0][1]));var y=f-w;if("right"===g["text-align"])p[m][0][1]["margin-left"]=y;else if("center"===g["text-align"])p[m][0][1]["margin-left"]=y/2;else if("justify"===g["text-align"]){var v=p[m][0][0].split(" ").length-1;p[m][0][1]["word-spacing"]=y/v,m===p.length-1&&(p[m][0][1]["word-spacing"]=0)}}return p},d.prototype.RenderTextFragment=function(e,t){var i,r;r=0,this.pdf.internal.pageSize.getHeight()-this.pdf.margins_doc.bottom<this.y+this.pdf.internal.getFontSize()&&(this.pdf.internal.write("ET","Q"),this.pdf.addPage(),this.y=this.pdf.margins_doc.top,this.pdf.internal.write("q","BT",this.getPdfColor(t.color),this.pdf.internal.getCoordinateString(this.x),this.pdf.internal.getVerticalCoordinateString(this.y),"Td"),r=Math.max(r,t["line-height"],t["font-size"]),this.pdf.internal.write(0,(-12*r).toFixed(2),"Td")),i=this.pdf.internal.getFont(t["font-family"],t["font-style"]);var n=this.getPdfColor(t.color);n!==this.lastTextColor&&(this.pdf.internal.write(n),this.lastTextColor=n),void 0!==t["word-spacing"]&&0<t["word-spacing"]&&this.pdf.internal.write(t["word-spacing"].toFixed(2),"Tw"),this.pdf.internal.write("/"+i.id,(12*t["font-size"]).toFixed(2),"Tf","("+this.pdf.internal.pdfEscape(e)+") Tj"),void 0!==t["word-spacing"]&&this.pdf.internal.write(0,"Tw")},d.prototype.getPdfColor=function(e){var t,i,r,n=/rgb\s*\(\s*(\d+),\s*(\d+),\s*(\d+\s*)\)/.exec(e);if(null!=n)t=parseInt(n[1]),i=parseInt(n[2]),r=parseInt(n[3]);else{if("string"==typeof e&&"#"!=e.charAt(0)){var o=new RGBColor(e);e=o.ok?o.toHex():"#000000"}t=e.substring(1,3),t=parseInt(t,16),i=e.substring(3,5),i=parseInt(i,16),r=e.substring(5,7),r=parseInt(r,16)}if("string"==typeof t&&/^#[0-9A-Fa-f]{6}$/.test(t)){var s=parseInt(t.substr(1),16);t=s>>16&255,i=s>>8&255,r=255&s}var a=this.f3;return 0===t&&0===i&&0===r||void 0===i?a(t/255)+" g":[a(t/255),a(i/255),a(r/255),"rg"].join(" ")},d.prototype.f3=function(e){return e.toFixed(3)},d.prototype.renderParagraph=function(e){var t,i,r,n,o,s,a,l,c,u,d,A,p;if(r=h(this.paragraph.text),A=this.paragraph.style,this.paragraph={text:[],style:[],blockstyle:{},priorblockstyle:t=this.paragraph.blockstyle},r.join("").trim()){a=this.splitFragmentsIntoLines(r,A),l=s=void 0,i=12/this.pdf.internal.scaleFactor,this.priorMarginBottom=this.priorMarginBottom||0,d=(Math.max((t["margin-top"]||0)-this.priorMarginBottom,0)+(t["padding-top"]||0))*i,u=((t["margin-bottom"]||0)+(t["padding-bottom"]||0))*i,this.priorMarginBottom=t["margin-bottom"]||0,"always"===t["page-break-before"]&&(this.pdf.addPage(),this.y=0,d=((t["margin-top"]||0)+(t["padding-top"]||0))*i),c=this.pdf.internal.write,o=n=void 0,this.y+=d,c("q","BT 0 g",this.pdf.internal.getCoordinateString(this.x),this.pdf.internal.getVerticalCoordinateString(this.y),"Td");for(var f=0;a.length;){for(n=l=0,o=(s=a.shift()).length;n!==o;)s[n][0].trim()&&(l=Math.max(l,s[n][1]["line-height"],s[n][1]["font-size"]),p=7*s[n][1]["font-size"]),n++;var g=0,m=0;for(void 0!==s[0][1]["margin-left"]&&0<s[0][1]["margin-left"]&&(g=(m=this.pdf.internal.getCoordinateString(s[0][1]["margin-left"]))-f,f=m),c(g+Math.max(t["margin-left"]||0,0)*i,(-12*l).toFixed(2),"Td"),n=0,o=s.length;n!==o;)s[n][0]&&this.RenderTextFragment(s[n][0],s[n][1]),n++;if(this.y+=l*i,this.executeWatchFunctions(s[0][1])&&0<a.length){var w=[],y=[];a.forEach((function(e){for(var t=0,i=e.length;t!==i;)e[t][0]&&(w.push(e[t][0]+" "),y.push(e[t][1])),++t})),a=this.splitFragmentsIntoLines(h(w),y),c("ET","Q"),c("q","BT 0 g",this.pdf.internal.getCoordinateString(this.x),this.pdf.internal.getVerticalCoordinateString(this.y),"Td")}}return e&&"function"==typeof e&&e.call(this,this.x-9,this.y-p/2),c("ET","Q"),this.y+=u}},d.prototype.setBlockBoundary=function(e){return this.renderParagraph(e)},d.prototype.setBlockStyle=function(e){return this.paragraph.blockstyle=e},d.prototype.addText=function(e,t){return this.paragraph.text.push(e),this.paragraph.style.push(t)},n={helvetica:"helvetica","sans-serif":"helvetica","times new roman":"times",serif:"times",times:"times",monospace:"courier",courier:"courier"},a={100:"normal",200:"normal",300:"normal",400:"normal",500:"bold",600:"bold",700:"bold",800:"bold",900:"bold",normal:"normal",bold:"bold",bolder:"bold",lighter:"normal"},o={normal:"normal",italic:"italic",oblique:"italic"},s={left:"left",right:"right",center:"center",justify:"justify"},l={none:"none",right:"right",left:"left"},c={none:"none",both:"both"},f={normal:1},t.fromHTML=function(e,t,i,r,n,o){return this.margins_doc=o||{top:0,bottom:0},r||(r={}),r.elementHandlers||(r.elementHandlers={}),v(this,e,isNaN(t)?4:t,isNaN(i)?4:i,r,n)}}(le.API),("undefined"!=typeof window&&window||"undefined"!=typeof global&&global).html2pdf=function(e,t,i){var r=t.canvas;if(r){var n,o;if((r.pdf=t).annotations={_nameMap:[],createAnnotation:function(e,i){var r,n=t.context2d._wrapX(i.left),o=t.context2d._wrapY(i.top),s=(t.context2d._page(i.top),e.indexOf("#"));r=0<=s?{name:e.substring(s+1)}:{url:e},t.link(n,o,i.right-i.left,i.bottom-i.top,r)},setName:function(e,i){var r=t.context2d._wrapX(i.left),n=t.context2d._wrapY(i.top),o=t.context2d._page(i.top);this._nameMap[e]={page:o,x:r,y:n}}},r.annotations=t.annotations,t.context2d._pageBreakAt=function(e){this.pageBreaks.push(e)},t.context2d._gotoPage=function(e){for(;t.internal.getNumberOfPages()<e;)t.addPage();t.setPage(e)},"string"==typeof e){e=e.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,"");var s,a,l=document.createElement("iframe");document.body.appendChild(l),null!=(s=l.contentDocument)&&null!=s||(s=l.contentWindow.document),s.open(),s.write(e),s.close(),n=s.body,a=s.body||{},e=s.documentElement||{},o=Math.max(a.scrollHeight,a.offsetHeight,e.clientHeight,e.scrollHeight,e.offsetHeight)}else a=(n=e).body||{},o=Math.max(a.scrollHeight,a.offsetHeight,e.clientHeight,e.scrollHeight,e.offsetHeight);var c={async:!0,allowTaint:!0,backgroundColor:"#ffffff",canvas:r,imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1,windowHeight:o=t.internal.pageSize.getHeight(),scrollY:o};t.context2d.pageWrapYEnabled=!0,t.context2d.pageWrapY=t.internal.pageSize.getHeight(),html2canvas(n,c).then((function(e){i&&(l&&l.parentElement.removeChild(l),i(t))}))}else alert("jsPDF canvas plugin not installed")},window.tmp=html2pdf,function(e){var t=e.BlobBuilder||e.WebKitBlobBuilder||e.MSBlobBuilder||e.MozBlobBuilder;e.URL=e.URL||e.webkitURL||function(e,t){return(t=document.createElement("a")).href=e,t};var i=e.Blob,r=URL.createObjectURL,n=URL.revokeObjectURL,o=e.Symbol&&e.Symbol.toStringTag,s=!1,a=!1,l=!!e.ArrayBuffer,c=t&&t.prototype.append&&t.prototype.getBlob;try{s=2===new Blob([""]).size,a=2===new Blob([new Uint8Array([1,2])]).size}catch(s){}function u(e){return e.map((function(e){if(e.buffer instanceof ArrayBuffer){var t=e.buffer;if(e.byteLength!==t.byteLength){var i=new Uint8Array(e.byteLength);i.set(new Uint8Array(t,e.byteOffset,e.byteLength)),t=i.buffer}return t}return e}))}function h(e,i){i=i||{};var r=new t;return u(e).forEach((function(e){r.append(e)})),i.type?r.getBlob(i.type):r.getBlob()}function d(e,t){return new i(u(e),t||{})}if(e.Blob&&(h.prototype=Blob.prototype,d.prototype=Blob.prototype),o)try{File.prototype[o]="File",Blob.prototype[o]="Blob",FileReader.prototype[o]="FileReader"}catch(s){}function A(){var t=!!e.ActiveXObject||"-ms-scroll-limit"in document.documentElement.style&&"-ms-ime-align"in document.documentElement.style,i=e.XMLHttpRequest&&e.XMLHttpRequest.prototype.send;t&&i&&(XMLHttpRequest.prototype.send=function(e){e instanceof Blob&&this.setRequestHeader("Content-Type",e.type),i.call(this,e)});try{new File([],"")}catch(t){try{var r=new Function('class File extends Blob {constructor(chunks, name, opts) {opts = opts || {};super(chunks, opts || {});this.name = name;this.lastModifiedDate = opts.lastModified ? new Date(opts.lastModified) : new Date;this.lastModified = +this.lastModifiedDate;}};return new File([], ""), File')();e.File=r}catch(t){e.File=r=function(e,t,i){var r=new Blob(e,i),n=i&&void 0!==i.lastModified?new Date(i.lastModified):new Date;return r.name=t,r.lastModifiedDate=n,r.lastModified=+n,r.toString=function(){return"[object File]"},o&&(r[o]="File"),r}}}}s?(A(),e.Blob=a?e.Blob:d):c?(A(),e.Blob=h):function(){function t(e){for(var t=[],i=0;i<e.length;i++){var r=e.charCodeAt(i);r<128?t.push(r):r<2048?t.push(192|r>>6,128|63&r):r<55296||57344<=r?t.push(224|r>>12,128|r>>6&63,128|63&r):(i++,r=65536+((1023&r)<<10|1023&e.charCodeAt(i)),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r))}return t}function i(e){var t,i,r,n,o,s;for(t="",r=e.length,i=0;i<r;)switch((n=e[i++])>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:t+=String.fromCharCode(n);break;case 12:case 13:o=e[i++],t+=String.fromCharCode((31&n)<<6|63&o);break;case 14:o=e[i++],s=e[i++],t+=String.fromCharCode((15&n)<<12|(63&o)<<6|(63&s)<<0)}return t}function o(e){for(var t=new Array(e.byteLength),i=new Uint8Array(e),r=t.length;r--;)t[r]=i[r];return t}function s(e){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=[],r=0;r<e.length;r+=3){var n=e[r],o=r+1<e.length,s=o?e[r+1]:0,a=r+2<e.length,l=a?e[r+2]:0,c=(15&s)<<2|l>>6,u=63&l;a||(u=64,o||(c=64)),i.push(t[n>>2],t[(3&n)<<4|s>>4],t[c],t[u])}return i.join("")}var a=Object.create||function(e){function t(){}return t.prototype=e,new t};if(l)var c=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],u=ArrayBuffer.isView||function(e){return e&&-1<c.indexOf(Object.prototype.toString.call(e))};function h(e,i){for(var r=0,n=(e=e||[]).length;r<n;r++){var s=e[r];e[r]=s instanceof h?s._buffer:"string"==typeof s?t(s):l&&(ArrayBuffer.prototype.isPrototypeOf(s)||u(s))?o(s):l&&(a=s)&&DataView.prototype.isPrototypeOf(a)?o(s.buffer):t(String(s))}var a;this._buffer=[].concat.apply([],e),this.size=this._buffer.length,this.type=i&&i.type||""}function d(e,t,i){var r=h.call(this,e,i=i||{})||this;return r.name=t,r.lastModifiedDate=i.lastModified?new Date(i.lastModified):new Date,r.lastModified=+r.lastModifiedDate,r}if(h.prototype.slice=function(e,t,i){return new h([this._buffer.slice(e||0,t||this._buffer.length)],{type:i})},h.prototype.toString=function(){return"[object Blob]"},(d.prototype=a(h.prototype)).constructor=d,Object.setPrototypeOf)Object.setPrototypeOf(d,h);else try{d.__proto__=h}catch(a){}function A(){if(!(this instanceof A))throw new TypeError("Failed to construct 'FileReader': Please use the 'new' operator, this DOM object constructor cannot be called as a function.");var e=document.createDocumentFragment();this.addEventListener=e.addEventListener,this.dispatchEvent=function(t){var i=this["on"+t.type];"function"==typeof i&&i(t),e.dispatchEvent(t)},this.removeEventListener=e.removeEventListener}function p(e,t,i){if(!(t instanceof h))throw new TypeError("Failed to execute '"+i+"' on 'FileReader': parameter 1 is not of type 'Blob'.");e.result="",setTimeout((function(){this.readyState=A.LOADING,e.dispatchEvent(new Event("load")),e.dispatchEvent(new Event("loadend"))}))}d.prototype.toString=function(){return"[object File]"},A.EMPTY=0,A.LOADING=1,A.DONE=2,A.prototype.error=null,A.prototype.onabort=null,A.prototype.onerror=null,A.prototype.onload=null,A.prototype.onloadend=null,A.prototype.onloadstart=null,A.prototype.onprogress=null,A.prototype.readAsDataURL=function(e){p(this,e,"readAsDataURL"),this.result="data:"+e.type+";base64,"+s(e._buffer)},A.prototype.readAsText=function(e){p(this,e,"readAsText"),this.result=i(e._buffer)},A.prototype.readAsArrayBuffer=function(e){p(this,e,"readAsText"),this.result=e._buffer.slice()},A.prototype.abort=function(){},URL.createObjectURL=function(e){return e instanceof h?"data:"+e.type+";base64,"+s(e._buffer):r.call(URL,e)},URL.revokeObjectURL=function(e){n&&n.call(URL,e)};var f=e.XMLHttpRequest&&e.XMLHttpRequest.prototype.send;f&&(XMLHttpRequest.prototype.send=function(e){e instanceof h?(this.setRequestHeader("Content-Type",e.type),f.call(this,i(e._buffer))):f.call(this,e)}),e.FileReader=A,e.File=d,e.Blob=h}()}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||"undefined"!=typeof global&&global||Function('return typeof this === "object" && this.content')()||Function("return this")());var ce,ue,he,de,Ae,pe,fe,ge,me,we,ye,ve,_e,be,Ce,Ee=Ee||function(e){if(!(void 0===e||"undefined"!=typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))){var t=function(){return e.URL||e.webkitURL||e},i=e.document.createElementNS("http://www.w3.org/1999/xhtml","a"),r="download"in i,n=/constructor/i.test(e.HTMLElement)||e.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent),s=e.setImmediate||e.setTimeout,a=function(e){s((function(){throw e}),0)},l=function(e){setTimeout((function(){"string"==typeof e?t().revokeObjectURL(e):e.remove()}),4e4)},c=function(e){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob([String.fromCharCode(65279),e],{type:e.type}):e},u=function(u,h,d){d||(u=c(u));var A,p=this,f="application/octet-stream"===u.type,g=function(){!function(e,t,i){for(var r=(t=[].concat(t)).length;r--;){var n=e["on"+t[r]];if("function"==typeof n)try{n.call(e,e)}catch(e){a(e)}}}(p,"writestart progress write writeend".split(" "))};if(p.readyState=p.INIT,r)return A=t().createObjectURL(u),void s((function(){var e,t;i.href=A,i.download=h,e=i,t=new MouseEvent("click"),e.dispatchEvent(t),g(),l(A),p.readyState=p.DONE}),0);!function(){if((o||f&&n)&&e.FileReader){var i=new FileReader;return i.onloadend=function(){var t=o?i.result:i.result.replace(/^data:[^;]*;/,"data:attachment/file;");e.open(t,"_blank")||(e.location.href=t),t=void 0,p.readyState=p.DONE,g()},i.readAsDataURL(u),p.readyState=p.INIT}A||(A=t().createObjectURL(u)),f?e.location.href=A:e.open(A,"_blank")||(e.location.href=A),p.readyState=p.DONE,g(),l(A)}()},h=u.prototype;return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(e,t,i){return t=t||e.name||"download",i||(e=c(e)),navigator.msSaveOrOpenBlob(e,t)}:(h.abort=function(){},h.readyState=h.INIT=0,h.WRITING=1,h.DONE=2,h.error=h.onwritestart=h.onprogress=h.onwrite=h.onabort=h.onerror=h.onwriteend=null,function(e,t,i){return new u(e,t||e.name||"download",i)})}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||void 0);function Se(e){var t=0;if(71!==e[t++]||73!==e[t++]||70!==e[t++]||56!==e[t++]||56!=(e[t++]+1&253)||97!==e[t++])throw"Invalid GIF 87a/89a header.";var i=e[t++]|e[t++]<<8,r=e[t++]|e[t++]<<8,n=e[t++];t++,t++;var o=null;n>>7&&(o=t,t+=3*(1<<1+(7&n)));var s=!0,a=[],l=0,c=null,u=0,h=null;for(this.width=i,this.height=r;s&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(11!==e[t]||78==e[t+1]&&69==e[t+2]&&84==e[t+3]&&83==e[t+4]&&67==e[t+5]&&65==e[t+6]&&80==e[t+7]&&69==e[t+8]&&50==e[t+9]&&46==e[t+10]&&48==e[t+11]&&3==e[t+12]&&1==e[t+13]&&0==e[t+16])t+=14,h=e[t++]|e[t++]<<8,t++;else for(t+=12;0!==(b=e[t++]);)t+=b;break;case 249:if(4!==e[t++]||0!==e[t+4])throw"Invalid graphics extension block.";var d=e[t++];l=e[t++]|e[t++]<<8,c=e[t++],0==(1&d)&&(c=null),u=d>>2&7,t++;break;case 254:for(;0!==(b=e[t++]);)t+=b;break;default:throw"Unknown graphic control label: 0x"+e[t-1].toString(16)}break;case 44:var A=e[t++]|e[t++]<<8,p=e[t++]|e[t++]<<8,f=e[t++]|e[t++]<<8,g=e[t++]|e[t++]<<8,m=e[t++],w=m>>6&1,y=o,v=!1;m>>7&&(v=!0,y=t,t+=3*(1<<1+(7&m)));var _=t;for(t++;;){var b;if(0===(b=e[t++]))break;t+=b}a.push({x:A,y:p,width:f,height:g,has_local_palette:v,palette_offset:y,data_offset:_,data_length:t-_,transparent_index:c,interlaced:!!w,delay:l,disposal:u});break;case 59:s=!1;break;default:throw"Unknown gif block: 0x"+e[t-1].toString(16)}this.numFrames=function(){return a.length},this.loopCount=function(){return h},this.frameInfo=function(e){if(e<0||e>=a.length)throw"Frame index out of range.";return a[e]},this.decodeAndBlitFrameBGRA=function(t,r){var n=this.frameInfo(t),o=n.width*n.height,s=new Uint8Array(o);Le(e,n.data_offset,s,o);var a=n.palette_offset,l=n.transparent_index;null===l&&(l=256);var c=n.width,u=i-c,h=c,d=4*(n.y*i+n.x),A=4*((n.y+n.height)*i+n.x),p=d,f=4*u;!0===n.interlaced&&(f+=4*(c+u)*7);for(var g=8,m=0,w=s.length;m<w;++m){var y=s[m];if(0===h&&(h=c,A<=(p+=f)&&(f=u+4*(c+u)*(g-1),p=d+(c+u)*(g<<1),g>>=1)),y===l)p+=4;else{var v=e[a+3*y],_=e[a+3*y+1];r[p++]=e[a+3*y+2],r[p++]=_,r[p++]=v,r[p++]=255}--h}},this.decodeAndBlitFrameRGBA=function(t,r){var n=this.frameInfo(t),o=n.width*n.height,s=new Uint8Array(o);Le(e,n.data_offset,s,o);var a=n.palette_offset,l=n.transparent_index;null===l&&(l=256);var c=n.width,u=i-c,h=c,d=4*(n.y*i+n.x),A=4*((n.y+n.height)*i+n.x),p=d,f=4*u;!0===n.interlaced&&(f+=4*(c+u)*7);for(var g=8,m=0,w=s.length;m<w;++m){var y=s[m];if(0===h&&(h=c,A<=(p+=f)&&(f=u+4*(c+u)*(g-1),p=d+(c+u)*(g<<1),g>>=1)),y===l)p+=4;else{var v=e[a+3*y+1],_=e[a+3*y+2];r[p++]=e[a+3*y],r[p++]=v,r[p++]=_,r[p++]=255}--h}}}function Le(e,t,i,r){for(var n=e[t++],o=1<<n,s=o+1,a=s+1,l=n+1,c=(1<<l)-1,u=0,h=0,d=0,A=e[t++],p=new Int32Array(4096),f=null;;){for(;u<16&&0!==A;)h|=e[t++]<<u,u+=8,1===A?A=e[t++]:--A;if(u<l)break;var g=h&c;if(h>>=l,u-=l,g!==o){if(g===s)break;for(var m=g<a?g:f,w=0,y=m;o<y;)y=p[y]>>8,++w;var v=y;if(r<d+w+(m!==g?1:0))return void console.log("Warning, gif stream longer than expected.");i[d++]=v;var _=d+=w;for(m!==g&&(i[d++]=v),y=m;w--;)i[--_]=255&(y=p[y]),y>>=8;null!==f&&a<4096&&(p[a++]=f<<8|v,c+1<=a&&l<12&&(++l,c=c<<1|1)),f=g}else a=s+1,c=(1<<(l=n+1))-1,f=null}return d!==r&&console.log("Warning, gif stream shorter than expected."),i}try{exports.GifWriter=function(e,t,i,r){var n=0,o=void 0===(r=void 0===r?{}:r).loop?null:r.loop,s=void 0===r.palette?null:r.palette;if(t<=0||i<=0||65535<t||65535<i)throw"Width/Height invalid.";function a(e){var t=e.length;if(t<2||256<t||t&t-1)throw"Invalid code/color length, must be power of 2 and 2 .. 256.";return t}e[n++]=71,e[n++]=73,e[n++]=70,e[n++]=56,e[n++]=57,e[n++]=97;var l=0,c=0;if(null!==s){for(var u=a(s);u>>=1;)++l;if(u=1<<l,--l,void 0!==r.background){if(u<=(c=r.background))throw"Background index out of range.";if(0===c)throw"Background index explicitly passed as 0."}}if(e[n++]=255&t,e[n++]=t>>8&255,e[n++]=255&i,e[n++]=i>>8&255,e[n++]=(null!==s?128:0)|l,e[n++]=c,e[n++]=0,null!==s)for(var h=0,d=s.length;h<d;++h){var A=s[h];e[n++]=A>>16&255,e[n++]=A>>8&255,e[n++]=255&A}if(null!==o){if(o<0||65535<o)throw"Loop count invalid.";e[n++]=33,e[n++]=255,e[n++]=11,e[n++]=78,e[n++]=69,e[n++]=84,e[n++]=83,e[n++]=67,e[n++]=65,e[n++]=80,e[n++]=69,e[n++]=50,e[n++]=46,e[n++]=48,e[n++]=3,e[n++]=1,e[n++]=255&o,e[n++]=o>>8&255,e[n++]=0}var p=!1;this.addFrame=function(t,i,r,o,l,c){if(!0===p&&(--n,p=!1),t<0||i<0||65535<t||65535<i)throw"x/y invalid.";if(r<=0||o<=0||65535<r||65535<o)throw"Width/Height invalid.";if(l.length<r*o)throw"Not enough pixels for the frame size.";var u=!0,h=(c=void 0===c?{}:c).palette;if(null==h&&(u=!1,h=s),null==h)throw"Must supply either a local or global palette.";for(var d=a(h),A=0;d>>=1;)++A;d=1<<A;var f=void 0===c.delay?0:c.delay,g=void 0===c.disposal?0:c.disposal;if(g<0||3<g)throw"Disposal out of range.";var m=!1,w=0;if(null!=c.transparent&&(m=!0,(w=c.transparent)<0||d<=w))throw"Transparent color index.";if((0!==g||m||0!==f)&&(e[n++]=33,e[n++]=249,e[n++]=4,e[n++]=g<<2|(!0===m?1:0),e[n++]=255&f,e[n++]=f>>8&255,e[n++]=w,e[n++]=0),e[n++]=44,e[n++]=255&t,e[n++]=t>>8&255,e[n++]=255&i,e[n++]=i>>8&255,e[n++]=255&r,e[n++]=r>>8&255,e[n++]=255&o,e[n++]=o>>8&255,e[n++]=!0===u?128|A-1:0,!0===u)for(var y=0,v=h.length;y<v;++y){var _=h[y];e[n++]=_>>16&255,e[n++]=_>>8&255,e[n++]=255&_}n=function(e,t,i,r){e[t++]=i;var n=t++,o=1<<i,s=o-1,a=o+1,l=a+1,c=i+1,u=0,h=0;function d(i){for(;i<=u;)e[t++]=255&h,h>>=8,u-=8,t===n+256&&(e[n]=255,n=t++)}function A(e){h|=e<<u,u+=c,d(8)}var p=r[0]&s,f={};A(o);for(var g=1,m=r.length;g<m;++g){var w=r[g]&s,y=p<<8|w,v=f[y];if(void 0===v){for(h|=p<<u,u+=c;8<=u;)e[t++]=255&h,h>>=8,u-=8,t===n+256&&(e[n]=255,n=t++);4096===l?(A(o),l=a+1,c=i+1,f={}):(1<<c<=l&&++c,f[y]=l++),p=w}else p=v}return A(p),A(a),d(1),n+1===t?e[n]=0:(e[n]=t-n-1,e[t++]=0),t}(e,n,A<2?2:A,l)},this.end=function(){return!1===p&&(e[n++]=59,p=!0),n}},exports.GifReader=Se}catch(t){}function Te(e){var t,i,r,n,o,s=Math.floor,a=new Array(64),l=new Array(64),c=new Array(64),u=new Array(64),h=new Array(65535),d=new Array(65535),A=new Array(64),p=new Array(64),f=[],g=0,m=7,w=new Array(64),y=new Array(64),v=new Array(64),_=new Array(256),b=new Array(2048),C=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],E=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],S=[0,1,2,3,4,5,6,7,8,9,10,11],L=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],T=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],B=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],N=[0,1,2,3,4,5,6,7,8,9,10,11],I=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],F=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function O(e,t){for(var i=0,r=0,n=new Array,o=1;o<=16;o++){for(var s=1;s<=e[o];s++)n[t[r]]=[],n[t[r]][0]=i,n[t[r]][1]=o,r++,i++;i*=2}return n}function x(e){for(var t=e[0],i=e[1]-1;0<=i;)t&1<<i&&(g|=1<<m),i--,--m<0&&(255==g?(D(255),D(0)):D(g),m=7,g=0)}function D(e){f.push(e)}function R(e){D(e>>8&255),D(255&e)}function U(e,t,i,r,n){for(var o,s=n[0],a=n[240],l=function(e,t){var i,r,n,o,s,a,l,c,u,h,d=0;for(u=0;u<8;++u){var p=(i=e[d])+(c=e[d+7]),f=i-c,g=(r=e[d+1])+(l=e[d+6]),m=r-l,w=(n=e[d+2])+(a=e[d+5]),y=n-a,v=(o=e[d+3])+(s=e[d+4]),_=o-s,b=p+v,C=p-v,E=g+w,S=g-w;e[d]=b+E,e[d+4]=b-E;var L=.707106781*(S+C);e[d+2]=C+L,e[d+6]=C-L;var T=.382683433*((b=_+y)-(S=m+f)),B=.5411961*b+T,N=1.306562965*S+T,I=.707106781*(E=y+m),F=f+I,O=f-I;e[d+5]=O+B,e[d+3]=O-B,e[d+1]=F+N,e[d+7]=F-N,d+=8}for(u=d=0;u<8;++u){var x=(i=e[d])+(c=e[d+56]),D=i-c,R=(r=e[d+8])+(l=e[d+48]),U=r-l,M=(n=e[d+16])+(a=e[d+40]),P=n-a,H=(o=e[d+24])+(s=e[d+32]),Q=o-s,k=x+H,z=x-H,V=R+M,G=R-M;e[d]=k+V,e[d+32]=k-V;var j=.707106781*(G+z);e[d+16]=z+j,e[d+48]=z-j;var W=.382683433*((k=Q+P)-(G=U+D)),q=.5411961*k+W,K=1.306562965*G+W,X=.707106781*(V=P+U),J=D+X,Y=D-X;e[d+40]=Y+q,e[d+24]=Y-q,e[d+8]=J+K,e[d+56]=J-K,d++}for(u=0;u<64;++u)A[u]=0<(h=e[u]*t[u])?h+.5|0:h-.5|0;return A}(e,t),c=0;c<64;++c)p[C[c]]=l[c];var u=p[0]-i;i=p[0],0==u?x(r[0]):(x(r[d[o=32767+u]]),x(h[o]));for(var f=63;0<f&&0==p[f];f--);if(0==f)return x(s),i;for(var g,m=1;m<=f;){for(var w=m;0==p[m]&&m<=f;++m);var y=m-w;if(16<=y){g=y>>4;for(var v=1;v<=g;++v)x(a);y&=15}x(n[(y<<4)+d[o=32767+p[m]]]),x(h[o]),m++}return 63!=f&&x(s),i}function M(e){e<=0&&(e=1),100<e&&(e=100),o!=e&&(function(e){for(var t=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],i=0;i<64;i++){var r=s((t[i]*e+50)/100);r<1?r=1:255<r&&(r=255),a[C[i]]=r}for(var n=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],o=0;o<64;o++){var h=s((n[o]*e+50)/100);h<1?h=1:255<h&&(h=255),l[C[o]]=h}for(var d=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],A=0,p=0;p<8;p++)for(var f=0;f<8;f++)c[A]=1/(a[C[A]]*d[p]*d[f]*8),u[A]=1/(l[C[A]]*d[p]*d[f]*8),A++}(e<50?Math.floor(5e3/e):Math.floor(200-2*e)),o=e)}this.encode=function(e,o){var s,h;(new Date).getTime(),o&&M(o),f=new Array,g=0,m=7,R(65496),R(65504),R(16),D(74),D(70),D(73),D(70),D(0),D(1),D(1),D(0),R(1),R(1),D(0),D(0),function(){R(65499),R(132),D(0);for(var e=0;e<64;e++)D(a[e]);D(1);for(var t=0;t<64;t++)D(l[t])}(),s=e.width,h=e.height,R(65472),R(17),D(8),R(h),R(s),D(3),D(1),D(17),D(0),D(2),D(17),D(1),D(3),D(17),D(1),function(){R(65476),R(418),D(0);for(var e=0;e<16;e++)D(E[e+1]);for(var t=0;t<=11;t++)D(S[t]);D(16);for(var i=0;i<16;i++)D(L[i+1]);for(var r=0;r<=161;r++)D(T[r]);D(1);for(var n=0;n<16;n++)D(B[n+1]);for(var o=0;o<=11;o++)D(N[o]);D(17);for(var s=0;s<16;s++)D(I[s+1]);for(var a=0;a<=161;a++)D(F[a])}(),R(65498),R(12),D(3),D(1),D(0),D(2),D(17),D(3),D(17),D(0),D(63),D(0);var d=0,A=0,p=0;g=0,m=7,this.encode.displayName="_encode_";for(var _,C,O,P,H,Q,k,z,V,G=e.data,j=e.height,W=4*e.width,q=0;q<j;){for(_=0;_<W;){for(Q=H=W*q+_,k=-1,V=z=0;V<64;V++)Q=H+(z=V>>3)*W+(k=4*(7&V)),j<=q+z&&(Q-=W*(q+1+z-j)),W<=_+k&&(Q-=_+k-W+4),C=G[Q++],O=G[Q++],P=G[Q++],w[V]=(b[C]+b[O+256>>0]+b[P+512>>0]>>16)-128,y[V]=(b[C+768>>0]+b[O+1024>>0]+b[P+1280>>0]>>16)-128,v[V]=(b[C+1280>>0]+b[O+1536>>0]+b[P+1792>>0]>>16)-128;d=U(w,c,d,t,r),A=U(y,u,A,i,n),p=U(v,u,p,i,n),_+=32}q+=8}if(0<=m){var K=[];K[1]=m+1,K[0]=(1<<m+1)-1,x(K)}return R(65497),new Uint8Array(f)},(new Date).getTime(),e||(e=50),function(){for(var e=String.fromCharCode,t=0;t<256;t++)_[t]=e(t)}(),t=O(E,S),i=O(B,N),r=O(L,T),n=O(I,F),function(){for(var e=1,t=2,i=1;i<=15;i++){for(var r=e;r<t;r++)d[32767+r]=i,h[32767+r]=[],h[32767+r][1]=i,h[32767+r][0]=r;for(var n=-(t-1);n<=-e;n++)d[32767+n]=i,h[32767+n]=[],h[32767+n][1]=i,h[32767+n][0]=t-1+n;e<<=1,t<<=1}}(),function(){for(var e=0;e<256;e++)b[e]=19595*e,b[e+256>>0]=38470*e,b[e+512>>0]=7471*e+32768,b[e+768>>0]=-11059*e,b[e+1024>>0]=-21709*e,b[e+1280>>0]=32768*e+8421375,b[e+1536>>0]=-27439*e,b[e+1792>>0]=-5329*e}(),M(e),(new Date).getTime()}function Be(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,-1===["BM","BA","CI","CP","IC","PT"].indexOf(this.flag))throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}window.tmp=Se,le.API.adler32cs=(pe="function"==typeof ArrayBuffer&&"function"==typeof Uint8Array,fe=null,ge=function(){if(!pe)return function(){return!1};try{var e={};"function"==typeof e.Buffer&&(fe=e.Buffer)}catch(e){}return function(e){return e instanceof ArrayBuffer||null!==fe&&e instanceof fe}}(),me=null!==fe?function(e){return new fe(e,"utf8").toString("binary")}:function(e){return unescape(encodeURIComponent(e))},we=function(e,t){for(var i=65535&e,r=e>>>16,n=0,o=t.length;n<o;n++)r=(r+(i=(i+(255&t.charCodeAt(n)))%65521))%65521;return(r<<16|i)>>>0},ye=function(e,t){for(var i=65535&e,r=e>>>16,n=0,o=t.length;n<o;n++)r=(r+(i=(i+t[n])%65521))%65521;return(r<<16|i)>>>0},_e=(ve={}).Adler32=(((Ae=(de=function(e){if(!(this instanceof de))throw new TypeError("Constructor cannot called be as a function.");if(!isFinite(e=null==e?1:+e))throw new Error("First arguments needs to be a finite number.");this.checksum=e>>>0}).prototype={}).constructor=de).from=((ce=function(e){if(!(this instanceof de))throw new TypeError("Constructor cannot called be as a function.");if(null==e)throw new Error("First argument needs to be a string.");this.checksum=we(1,e.toString())}).prototype=Ae,ce),de.fromUtf8=((ue=function(e){if(!(this instanceof de))throw new TypeError("Constructor cannot called be as a function.");if(null==e)throw new Error("First argument needs to be a string.");var t=me(e.toString());this.checksum=we(1,t)}).prototype=Ae,ue),pe&&(de.fromBuffer=((he=function(e){if(!(this instanceof de))throw new TypeError("Constructor cannot called be as a function.");if(!ge(e))throw new Error("First argument needs to be ArrayBuffer.");var t=new Uint8Array(e);return this.checksum=ye(1,t)}).prototype=Ae,he)),Ae.update=function(e){if(null==e)throw new Error("First argument needs to be a string.");return e=e.toString(),this.checksum=we(this.checksum,e)},Ae.updateUtf8=function(e){if(null==e)throw new Error("First argument needs to be a string.");var t=me(e.toString());return this.checksum=we(this.checksum,t)},pe&&(Ae.updateBuffer=function(e){if(!ge(e))throw new Error("First argument needs to be ArrayBuffer.");var t=new Uint8Array(e);return this.checksum=ye(this.checksum,t)}),Ae.clone=function(){return new _e(this.checksum)},de),ve.from=function(e){if(null==e)throw new Error("First argument needs to be a string.");return we(1,e.toString())},ve.fromUtf8=function(e){if(null==e)throw new Error("First argument needs to be a string.");var t=me(e.toString());return we(1,t)},pe&&(ve.fromBuffer=function(e){if(!ge(e))throw new Error("First argument need to be ArrayBuffer.");var t=new Uint8Array(e);return ye(1,t)}),ve),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(e){var i,r,n,o,s,a,l,c=t,u=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],h=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],d={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},A={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},p=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],f=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),g=!1,m=0;this.__bidiEngine__={};var w=function(e){var t=e.charCodeAt(),i=t>>8,r=A[i];return void 0!==r?c[256*r+(255&t)]:252===i||253===i?"AL":f.test(i)?"L":8===i?"R":"N"},y=function(e){for(var t,i=0;i<e.length;i++){if("L"===(t=w(e.charAt(i))))return!1;if("R"===t)return!0}return!1},v=function(e,t,s,a){var l,c,u,h,d=t[a];switch(d){case"L":case"R":g=!1;break;case"N":case"AN":break;case"EN":g&&(d="AN");break;case"AL":g=!0,d="R";break;case"WS":d="N";break;case"CS":a<1||a+1>=t.length||"EN"!==(l=s[a-1])&&"AN"!==l||"EN"!==(c=t[a+1])&&"AN"!==c?d="N":g&&(c="AN"),d=c===l?c:"N";break;case"ES":d="EN"===(l=0<a?s[a-1]:"B")&&a+1<t.length&&"EN"===t[a+1]?"EN":"N";break;case"ET":if(0<a&&"EN"===s[a-1]){d="EN";break}if(g){d="N";break}for(u=a+1,h=t.length;u<h&&"ET"===t[u];)u++;d=u<h&&"EN"===t[u]?"EN":"N";break;case"NSM":if(n&&!o){for(h=t.length,u=a+1;u<h&&"NSM"===t[u];)u++;if(u<h){var A=e[a];if(l=t[u],(1425<=A&&A<=2303||64286===A)&&("R"===l||"AL"===l)){d="R";break}}}d=a<1||"B"===(l=t[a-1])?"N":s[a-1];break;case"B":i=!(g=!1),d=m;break;case"S":r=!0,d="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":g=!1;break;case"BN":d="N"}return d},_=function(e,t,i){var r=e.split("");return i&&b(r,i,{hiLevel:m}),r.reverse(),t&&t.reverse(),r.join("")},b=function(e,t,n){var o,s,a,l,c,A=-1,p=e.length,f=0,y=[],_=m?h:u,b=[];for(r=i=g=!1,s=0;s<p;s++)b[s]=w(e[s]);for(a=0;a<p;a++){if(c=f,y[a]=v(e,b,y,a),o=240&(f=_[c][d[y[a]]]),t[a]=l=_[f&=15][5],0<o)if(16===o){for(s=A;s<a;s++)t[s]=1;A=-1}else A=-1;if(_[f][6])-1===A&&(A=a);else if(-1<A){for(s=A;s<a;s++)t[s]=l;A=-1}"B"===b[a]&&(t[a]=0),n.hiLevel|=l}r&&function(e,t,i){for(var r=0;r<i;r++)if("S"===e[r]){t[r]=m;for(var n=r-1;0<=n&&"WS"===e[n];n--)t[n]=m}}(b,t,p)},C=function(e,t,r,n,o){if(!(o.hiLevel<e)){if(1===e&&1===m&&!i)return t.reverse(),void(r&&r.reverse());for(var s,a,l,c,u=t.length,h=0;h<u;){if(n[h]>=e){for(l=h+1;l<u&&n[l]>=e;)l++;for(c=h,a=l-1;c<a;c++,a--)s=t[c],t[c]=t[a],t[a]=s,r&&(s=r[c],r[c]=r[a],r[a]=s);h=l}h++}}},E=function(e,t,i){var r=e.split(""),n={hiLevel:m};return i||(i=[]),b(r,i,n),function(e,t,i){if(0!==i.hiLevel&&l)for(var r,n=0;n<e.length;n++)1===t[n]&&0<=(r=p.indexOf(e[n]))&&(e[n]=p[r+1])}(r,i,n),C(2,r,t,i,n),C(1,r,t,i,n),r.join("")};return this.__bidiEngine__.doBidiReorder=function(e,t,i){if(function(e,t){if(t)for(var i=0;i<e.length;i++)t[i]=i;void 0===o&&(o=y(e)),void 0===a&&(a=y(e))}(e,t),n||!s||a)if(n&&s&&o^a)m=o?1:0,e=_(e,t,i);else if(!n&&s&&a)m=o?1:0,e=E(e,t,i),e=_(e,t);else if(!n||o||s||a){if(n&&!s&&o^a)e=_(e,t),e=o?(m=0,E(e,t,i)):(m=1,e=E(e,t,i),_(e,t));else if(n&&o&&!s&&a)m=1,e=E(e,t,i),e=_(e,t);else if(!n&&!s&&o^a){var r=l;o?(m=1,e=E(e,t,i),m=0,l=!1,e=E(e,t,i),l=r):(m=0,e=E(e,t,i),e=_(e,t),l=!(m=1),e=E(e,t,i),l=r,e=_(e,t))}}else m=0,e=E(e,t,i);else m=o?1:0,e=E(e,t,i);return e},this.__bidiEngine__.setOptions=function(e){e&&(n=e.isInputVisual,s=e.isOutputVisual,o=e.isInputRtl,a=e.isOutputRtl,l=e.isSymmetricSwapping)},this.__bidiEngine__.setOptions(e),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],i=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(e){var t=e.text,r=[];if("[object Array]"===Object.prototype.toString.call(t)){var n=0;for(r=[],n=0;n<t.length;n+=1)"[object Array]"===Object.prototype.toString.call(t[n])?r.push([i.doBidiReorder(t[n][0]),t[n][1],t[n][2]]):r.push([i.doBidiReorder(t[n])]);e.text=r}else e.text=i.doBidiReorder(t)}])}(le),window.tmp=Te,Be.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,16===this.bitPP&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=0===this.colors?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var i=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:n,green:r,blue:i,quad:o}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Be.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP;this.data=new Uint8Array(this.width*this.height*4),this[e]()}catch(e){console.log("bit decode error:"+e)}},Be.prototype.bit1=function(){var e=Math.ceil(this.width/8),t=e%4,i=0<=this.height?this.height-1:-this.height;for(i=this.height-1;0<=i;i--){for(var r=this.bottom_up?i:this.height-1-i,n=0;n<e;n++)for(var o=this.datav.getUint8(this.pos++,!0),s=r*this.width*4+8*n*4,a=0;a<8&&8*n+a<this.width;a++){var l=this.palette[o>>7-a&1];this.data[s+4*a]=l.blue,this.data[s+4*a+1]=l.green,this.data[s+4*a+2]=l.red,this.data[s+4*a+3]=255}0!=t&&(this.pos+=4-t)}},Be.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,i=this.height-1;0<=i;i--){for(var r=this.bottom_up?i:this.height-1-i,n=0;n<e;n++){var o=this.datav.getUint8(this.pos++,!0),s=r*this.width*4+2*n*4,a=15&o,l=this.palette[o>>4];if(this.data[s]=l.blue,this.data[s+1]=l.green,this.data[s+2]=l.red,this.data[s+3]=255,2*n+1>=this.width)break;this.data[s+4]=(l=this.palette[a]).blue,this.data[s+4+1]=l.green,this.data[s+4+2]=l.red,this.data[s+4+3]=255}0!=t&&(this.pos+=4-t)}},Be.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;0<=t;t--){for(var i=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),o=i*this.width*4+4*r;if(n<this.palette.length){var s=this.palette[n];this.data[o]=s.red,this.data[o+1]=s.green,this.data[o+2]=s.blue,this.data[o+3]=255}else this.data[o]=255,this.data[o+1]=255,this.data[o+2]=255,this.data[o+3]=255}0!=e&&(this.pos+=4-e)}},Be.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),i=this.height-1;0<=i;i--){for(var r=this.bottom_up?i:this.height-1-i,n=0;n<this.width;n++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var s=(o&t)/t*255|0,a=(o>>5&t)/t*255|0,l=o>>15?255:0,c=r*this.width*4+4*n;this.data[c]=(o>>10&t)/t*255|0,this.data[c+1]=a,this.data[c+2]=s,this.data[c+3]=l}this.pos+=e}},Be.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),i=parseInt("111111",2),r=this.height-1;0<=r;r--){for(var n=this.bottom_up?r:this.height-1-r,o=0;o<this.width;o++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(s&t)/t*255|0,l=(s>>5&i)/i*255|0,c=n*this.width*4+4*o;this.data[c]=(s>>11)/t*255|0,this.data[c+1]=l,this.data[c+2]=a,this.data[c+3]=255}this.pos+=e}},Be.prototype.bit24=function(){for(var e=this.height-1;0<=e;e--){for(var t=this.bottom_up?e:this.height-1-e,i=0;i<this.width;i++){var r=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),s=t*this.width*4+4*i;this.data[s]=o,this.data[s+1]=n,this.data[s+2]=r,this.data[s+3]=255}this.pos+=this.width%4}},Be.prototype.bit32=function(){for(var e=this.height-1;0<=e;e--)for(var t=this.bottom_up?e:this.height-1-e,i=0;i<this.width;i++){var r=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=t*this.width*4+4*i;this.data[a]=o,this.data[a+1]=n,this.data[a+2]=r,this.data[a+3]=s}},Be.prototype.getData=function(){return this.data},window.tmp=Be,function(e){var t=[0,1,2,3,4,4,5,5,6,6,6,6,7,7,7,7,8,8,8,8,8,8,8,8,9,9,9,9,9,9,9,9,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,0,0,16,17,18,18,19,19,20,20,20,20,21,21,21,21,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29];function i(){var e=this;function t(e,t){for(var i=0;i|=1&e,e>>>=1,i<<=1,0<--t;);return i>>>1}e.build_tree=function(i){var r,n,o,s=e.dyn_tree,a=e.stat_desc.static_tree,l=e.stat_desc.elems,c=-1;for(i.heap_len=0,i.heap_max=573,r=0;r<l;r++)0!==s[2*r]?(i.heap[++i.heap_len]=c=r,i.depth[r]=0):s[2*r+1]=0;for(;i.heap_len<2;)s[2*(o=i.heap[++i.heap_len]=c<2?++c:0)]=1,i.depth[o]=0,i.opt_len--,a&&(i.static_len-=a[2*o+1]);for(e.max_code=c,r=Math.floor(i.heap_len/2);1<=r;r--)i.pqdownheap(s,r);for(o=l;r=i.heap[1],i.heap[1]=i.heap[i.heap_len--],i.pqdownheap(s,1),n=i.heap[1],i.heap[--i.heap_max]=r,i.heap[--i.heap_max]=n,s[2*o]=s[2*r]+s[2*n],i.depth[o]=Math.max(i.depth[r],i.depth[n])+1,s[2*r+1]=s[2*n+1]=o,i.heap[1]=o++,i.pqdownheap(s,1),2<=i.heap_len;);i.heap[--i.heap_max]=i.heap[1],function(t){var i,r,n,o,s,a,l=e.dyn_tree,c=e.stat_desc.static_tree,u=e.stat_desc.extra_bits,h=e.stat_desc.extra_base,d=e.stat_desc.max_length,A=0;for(o=0;o<=15;o++)t.bl_count[o]=0;for(l[2*t.heap[t.heap_max]+1]=0,i=t.heap_max+1;i<573;i++)d<(o=l[2*l[2*(r=t.heap[i])+1]+1]+1)&&(o=d,A++),l[2*r+1]=o,r>e.max_code||(t.bl_count[o]++,s=0,h<=r&&(s=u[r-h]),t.opt_len+=(a=l[2*r])*(o+s),c&&(t.static_len+=a*(c[2*r+1]+s)));if(0!==A){do{for(o=d-1;0===t.bl_count[o];)o--;t.bl_count[o]--,t.bl_count[o+1]+=2,t.bl_count[d]--,A-=2}while(0<A);for(o=d;0!==o;o--)for(r=t.bl_count[o];0!==r;)(n=t.heap[--i])>e.max_code||(l[2*n+1]!=o&&(t.opt_len+=(o-l[2*n+1])*l[2*n],l[2*n+1]=o),r--)}}(i),function(e,i,r){var n,o,s,a=[],l=0;for(n=1;n<=15;n++)a[n]=l=l+r[n-1]<<1;for(o=0;o<=i;o++)0!==(s=e[2*o+1])&&(e[2*o]=t(a[s]++,s))}(s,e.max_code,i.bl_count)}}function r(e,t,i,r,n){this.static_tree=e,this.extra_bits=t,this.extra_base=i,this.elems=r,this.max_length=n}function n(e,t,i,r,n){this.good_length=e,this.max_lazy=t,this.nice_length=i,this.max_chain=r,this.func=n}i._length_code=[0,1,2,3,4,5,6,7,8,8,9,9,10,10,11,11,12,12,12,12,13,13,13,13,14,14,14,14,15,15,15,15,16,16,16,16,16,16,16,16,17,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,28],i.base_length=[0,1,2,3,4,5,6,7,8,10,12,14,16,20,24,28,32,40,48,56,64,80,96,112,128,160,192,224,0],i.base_dist=[0,1,2,3,4,6,8,12,16,24,32,48,64,96,128,192,256,384,512,768,1024,1536,2048,3072,4096,6144,8192,12288,16384,24576],i.d_code=function(e){return e<256?t[e]:t[256+(e>>>7)]},i.extra_lbits=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],i.extra_dbits=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],i.extra_blbits=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],i.bl_order=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],r.static_ltree=[12,8,140,8,76,8,204,8,44,8,172,8,108,8,236,8,28,8,156,8,92,8,220,8,60,8,188,8,124,8,252,8,2,8,130,8,66,8,194,8,34,8,162,8,98,8,226,8,18,8,146,8,82,8,210,8,50,8,178,8,114,8,242,8,10,8,138,8,74,8,202,8,42,8,170,8,106,8,234,8,26,8,154,8,90,8,218,8,58,8,186,8,122,8,250,8,6,8,134,8,70,8,198,8,38,8,166,8,102,8,230,8,22,8,150,8,86,8,214,8,54,8,182,8,118,8,246,8,14,8,142,8,78,8,206,8,46,8,174,8,110,8,238,8,30,8,158,8,94,8,222,8,62,8,190,8,126,8,254,8,1,8,129,8,65,8,193,8,33,8,161,8,97,8,225,8,17,8,145,8,81,8,209,8,49,8,177,8,113,8,241,8,9,8,137,8,73,8,201,8,41,8,169,8,105,8,233,8,25,8,153,8,89,8,217,8,57,8,185,8,121,8,249,8,5,8,133,8,69,8,197,8,37,8,165,8,101,8,229,8,21,8,149,8,85,8,213,8,53,8,181,8,117,8,245,8,13,8,141,8,77,8,205,8,45,8,173,8,109,8,237,8,29,8,157,8,93,8,221,8,61,8,189,8,125,8,253,8,19,9,275,9,147,9,403,9,83,9,339,9,211,9,467,9,51,9,307,9,179,9,435,9,115,9,371,9,243,9,499,9,11,9,267,9,139,9,395,9,75,9,331,9,203,9,459,9,43,9,299,9,171,9,427,9,107,9,363,9,235,9,491,9,27,9,283,9,155,9,411,9,91,9,347,9,219,9,475,9,59,9,315,9,187,9,443,9,123,9,379,9,251,9,507,9,7,9,263,9,135,9,391,9,71,9,327,9,199,9,455,9,39,9,295,9,167,9,423,9,103,9,359,9,231,9,487,9,23,9,279,9,151,9,407,9,87,9,343,9,215,9,471,9,55,9,311,9,183,9,439,9,119,9,375,9,247,9,503,9,15,9,271,9,143,9,399,9,79,9,335,9,207,9,463,9,47,9,303,9,175,9,431,9,111,9,367,9,239,9,495,9,31,9,287,9,159,9,415,9,95,9,351,9,223,9,479,9,63,9,319,9,191,9,447,9,127,9,383,9,255,9,511,9,0,7,64,7,32,7,96,7,16,7,80,7,48,7,112,7,8,7,72,7,40,7,104,7,24,7,88,7,56,7,120,7,4,7,68,7,36,7,100,7,20,7,84,7,52,7,116,7,3,8,131,8,67,8,195,8,35,8,163,8,99,8,227,8],r.static_dtree=[0,5,16,5,8,5,24,5,4,5,20,5,12,5,28,5,2,5,18,5,10,5,26,5,6,5,22,5,14,5,30,5,1,5,17,5,9,5,25,5,5,5,21,5,13,5,29,5,3,5,19,5,11,5,27,5,7,5,23,5],r.static_l_desc=new r(r.static_ltree,i.extra_lbits,257,286,15),r.static_d_desc=new r(r.static_dtree,i.extra_dbits,0,30,15),r.static_bl_desc=new r(null,i.extra_blbits,0,19,7);var o=[new n(0,0,0,0,0),new n(4,4,8,4,1),new n(4,5,16,8,1),new n(4,6,32,32,1),new n(4,4,16,16,2),new n(8,16,32,32,2),new n(8,16,128,128,2),new n(8,32,128,256,2),new n(32,128,258,1024,2),new n(32,258,258,4096,2)],s=["need dictionary","stream end","","","stream error","data error","","buffer error","",""];function a(e,t,i,r){var n=e[2*t],o=e[2*i];return n<o||n==o&&r[t]<=r[i]}function l(){var e,t,n,l,c,u,h,d,A,p,f,g,m,w,y,v,_,b,C,E,S,L,T,B,N,I,F,O,x,D,R,U,M,P,H,Q,k,z,V,G,j,W=this,q=new i,K=new i,X=new i;function J(){var e;for(e=0;e<286;e++)R[2*e]=0;for(e=0;e<30;e++)U[2*e]=0;for(e=0;e<19;e++)M[2*e]=0;R[512]=1,W.opt_len=W.static_len=0,Q=z=0}function Y(e,t){var i,r,n=-1,o=e[1],s=0,a=7,l=4;for(0===o&&(a=138,l=3),e[2*(t+1)+1]=65535,i=0;i<=t;i++)r=o,o=e[2*(i+1)+1],++s<a&&r==o||(s<l?M[2*r]+=s:0!==r?(r!=n&&M[2*r]++,M[32]++):s<=10?M[34]++:M[36]++,n=r,l=(s=0)===o?(a=138,3):r==o?(a=6,3):(a=7,4))}function Z(e){W.pending_buf[W.pending++]=e}function $(e){Z(255&e),Z(e>>>8&255)}function ee(e,t){var i,r=t;16-r<j?($(G|=(i=e)<<j&65535),G=i>>>16-j,j+=r-16):(G|=e<<j&65535,j+=r)}function te(e,t){var i=2*e;ee(65535&t[i],65535&t[i+1])}function ie(e,t){var i,r,n=-1,o=e[1],s=0,a=7,l=4;for(0===o&&(a=138,l=3),i=0;i<=t;i++)if(r=o,o=e[2*(i+1)+1],!(++s<a&&r==o)){if(s<l)for(;te(r,M),0!=--s;);else 0!==r?(r!=n&&(te(r,M),s--),te(16,M),ee(s-3,2)):s<=10?(te(17,M),ee(s-3,3)):(te(18,M),ee(s-11,7));n=r,l=(s=0)===o?(a=138,3):r==o?(a=6,3):(a=7,4)}}function re(){16==j?($(G),j=G=0):8<=j&&(Z(255&G),G>>>=8,j-=8)}function ne(e,t){var r,n,o;if(W.pending_buf[k+2*Q]=e>>>8&255,W.pending_buf[k+2*Q+1]=255&e,W.pending_buf[P+Q]=255&t,Q++,0===e?R[2*t]++:(z++,e--,R[2*(i._length_code[t]+256+1)]++,U[2*i.d_code(e)]++),0==(8191&Q)&&2<F){for(r=8*Q,n=S-_,o=0;o<30;o++)r+=U[2*o]*(5+i.extra_dbits[o]);if(r>>>=3,z<Math.floor(Q/2)&&r<Math.floor(n/2))return!0}return Q==H-1}function oe(e,t){var r,n,o,s,a=0;if(0!==Q)for(;r=W.pending_buf[k+2*a]<<8&65280|255&W.pending_buf[k+2*a+1],n=255&W.pending_buf[P+a],a++,0===r?te(n,e):(te((o=i._length_code[n])+256+1,e),0!==(s=i.extra_lbits[o])&&ee(n-=i.base_length[o],s),te(o=i.d_code(--r),t),0!==(s=i.extra_dbits[o])&&ee(r-=i.base_dist[o],s)),a<Q;);te(256,e),V=e[513]}function se(){8<j?$(G):0<j&&Z(255&G),j=G=0}function ae(e,t,i){var r,n;ee(0+(i?1:0),3),r=e,n=t,se(),V=8,$(n),$(~n),W.pending_buf.set(d.subarray(r,r+n),W.pending),W.pending+=n}function le(t){(function(e,t,n){var o,s,a=0;0<F?(q.build_tree(W),K.build_tree(W),a=function(){var e;for(Y(R,q.max_code),Y(U,K.max_code),X.build_tree(W),e=18;3<=e&&0===M[2*i.bl_order[e]+1];e--);return W.opt_len+=3*(e+1)+5+5+4,e}(),(s=W.static_len+3+7>>>3)<=(o=W.opt_len+3+7>>>3)&&(o=s)):o=s=t+5,t+4<=o&&-1!=e?ae(e,t,n):s==o?(ee(2+(n?1:0),3),oe(r.static_ltree,r.static_dtree)):(ee(4+(n?1:0),3),function(e,t,r){var n;for(ee(e-257,5),ee(t-1,5),ee(r-4,4),n=0;n<r;n++)ee(M[2*i.bl_order[n]+1],3);ie(R,e-1),ie(U,t-1)}(q.max_code+1,K.max_code+1,a+1),oe(R,U)),J(),n&&se()})(0<=_?_:-1,S-_,t),_=S,e.flush_pending()}function ce(){var t,i,r,n;do{if(0==(n=A-T-S)&&0===S&&0===T)n=c;else if(-1==n)n--;else if(c+c-262<=S){for(d.set(d.subarray(c,c+c),0),L-=c,S-=c,_-=c,r=t=m;i=65535&f[--r],f[r]=c<=i?i-c:0,0!=--t;);for(r=t=c;i=65535&p[--r],p[r]=c<=i?i-c:0,0!=--t;);n+=c}if(0===e.avail_in)return;t=e.read_buf(d,S+T,n),3<=(T+=t)&&(g=((g=255&d[S])<<v^255&d[S+1])&y)}while(T<262&&0!==e.avail_in)}function ue(e){var t,i,r=N,n=S,o=B,s=c-262<S?S-(c-262):0,a=D,l=h,u=S+258,A=d[n+o-1],f=d[n+o];x<=B&&(r>>=2),T<a&&(a=T);do{if(d[(t=e)+o]==f&&d[t+o-1]==A&&d[t]==d[n]&&d[++t]==d[n+1]){n+=2,t++;do{}while(d[++n]==d[++t]&&d[++n]==d[++t]&&d[++n]==d[++t]&&d[++n]==d[++t]&&d[++n]==d[++t]&&d[++n]==d[++t]&&d[++n]==d[++t]&&d[++n]==d[++t]&&n<u);if(i=258-(u-n),n=u-258,o<i){if(L=e,a<=(o=i))break;A=d[n+o-1],f=d[n+o]}}}while((e=65535&p[e&l])>s&&0!=--r);return o<=T?o:T}function he(e){return e.total_in=e.total_out=0,e.msg=null,W.pending=0,W.pending_out=0,t=113,l=0,q.dyn_tree=R,q.stat_desc=r.static_l_desc,K.dyn_tree=U,K.stat_desc=r.static_d_desc,X.dyn_tree=M,X.stat_desc=r.static_bl_desc,j=G=0,V=8,J(),function(){var e;for(A=2*c,e=f[m-1]=0;e<m-1;e++)f[e]=0;I=o[F].max_lazy,x=o[F].good_length,D=o[F].nice_length,N=o[F].max_chain,b=B=2,g=E=T=_=S=0}(),0}W.depth=[],W.bl_count=[],W.heap=[],R=[],U=[],M=[],W.pqdownheap=function(e,t){for(var i=W.heap,r=i[t],n=t<<1;n<=W.heap_len&&(n<W.heap_len&&a(e,i[n+1],i[n],W.depth)&&n++,!a(e,r,i[n],W.depth));)i[t]=i[n],t=n,n<<=1;i[t]=r},W.deflateInit=function(e,t,i,r,o,s){return r||(r=8),o||(o=8),s||(s=0),e.msg=null,-1==t&&(t=6),o<1||9<o||8!=r||i<9||15<i||t<0||9<t||s<0||2<s?-2:(e.dstate=W,h=(c=1<<(u=i))-1,y=(m=1<<(w=o+7))-1,v=Math.floor((w+3-1)/3),d=new Uint8Array(2*c),p=[],f=[],H=1<<o+6,W.pending_buf=new Uint8Array(4*H),n=4*H,k=Math.floor(H/2),P=3*H,F=t,O=s,he(e))},W.deflateEnd=function(){return 42!=t&&113!=t&&666!=t?-2:(W.pending_buf=null,d=p=f=null,W.dstate=null,113==t?-3:0)},W.deflateParams=function(e,t,i){var r=0;return-1==t&&(t=6),t<0||9<t||i<0||2<i?-2:(o[F].func!=o[t].func&&0!==e.total_in&&(r=e.deflate(1)),F!=t&&(I=o[F=t].max_lazy,x=o[F].good_length,D=o[F].nice_length,N=o[F].max_chain),O=i,r)},W.deflateSetDictionary=function(e,i,r){var n,o=r,s=0;if(!i||42!=t)return-2;if(o<3)return 0;for(c-262<o&&(s=r-(o=c-262)),d.set(i.subarray(s,s+o),0),_=S=o,g=((g=255&d[0])<<v^255&d[1])&y,n=0;n<=o-3;n++)p[n&h]=f[g=(g<<v^255&d[n+2])&y],f[g]=n;return 0},W.deflate=function(i,a){var A,w,N,x,D,R;if(4<a||a<0)return-2;if(!i.next_out||!i.next_in&&0!==i.avail_in||666==t&&4!=a)return i.msg=s[4],-2;if(0===i.avail_out)return i.msg=s[7],-5;if(e=i,x=l,l=a,42==t&&(w=8+(u-8<<4)<<8,3<(N=(F-1&255)>>1)&&(N=3),w|=N<<6,0!==S&&(w|=32),t=113,Z((R=w+=31-w%31)>>8&255),Z(255&R)),0!==W.pending){if(e.flush_pending(),0===e.avail_out)return l=-1,0}else if(0===e.avail_in&&a<=x&&4!=a)return e.msg=s[7],-5;if(666==t&&0!==e.avail_in)return i.msg=s[7],-5;if(0!==e.avail_in||0!==T||0!=a&&666!=t){switch(D=-1,o[F].func){case 0:D=function(t){var i,r=65535;for(n-5<r&&(r=n-5);;){if(T<=1){if(ce(),0===T&&0==t)return 0;if(0===T)break}if(S+=T,i=_+r,((T=0)===S||i<=S)&&(T=S-i,S=i,le(!1),0===e.avail_out))return 0;if(c-262<=S-_&&(le(!1),0===e.avail_out))return 0}return le(4==t),0===e.avail_out?4==t?2:0:4==t?3:1}(a);break;case 1:D=function(t){for(var i,r=0;;){if(T<262){if(ce(),T<262&&0==t)return 0;if(0===T)break}if(3<=T&&(r=65535&f[g=(g<<v^255&d[S+2])&y],p[S&h]=f[g],f[g]=S),0!==r&&(S-r&65535)<=c-262&&2!=O&&(b=ue(r)),3<=b)if(i=ne(S-L,b-3),T-=b,b<=I&&3<=T){for(b--;g=(g<<v^255&d[2+ ++S])&y,r=65535&f[g],p[S&h]=f[g],f[g]=S,0!=--b;);S++}else S+=b,b=0,g=((g=255&d[S])<<v^255&d[S+1])&y;else i=ne(0,255&d[S]),T--,S++;if(i&&(le(!1),0===e.avail_out))return 0}return le(4==t),0===e.avail_out?4==t?2:0:4==t?3:1}(a);break;case 2:D=function(t){for(var i,r,n=0;;){if(T<262){if(ce(),T<262&&0==t)return 0;if(0===T)break}if(3<=T&&(n=65535&f[g=(g<<v^255&d[S+2])&y],p[S&h]=f[g],f[g]=S),B=b,C=L,b=2,0!==n&&B<I&&(S-n&65535)<=c-262&&(2!=O&&(b=ue(n)),b<=5&&(1==O||3==b&&4096<S-L)&&(b=2)),3<=B&&b<=B){for(r=S+T-3,i=ne(S-1-C,B-3),T-=B-1,B-=2;++S<=r&&(n=65535&f[g=(g<<v^255&d[S+2])&y],p[S&h]=f[g],f[g]=S),0!=--B;);if(E=0,b=2,S++,i&&(le(!1),0===e.avail_out))return 0}else if(0!==E){if((i=ne(0,255&d[S-1]))&&le(!1),S++,T--,0===e.avail_out)return 0}else E=1,S++,T--}return 0!==E&&(i=ne(0,255&d[S-1]),E=0),le(4==t),0===e.avail_out?4==t?2:0:4==t?3:1}(a)}if(2!=D&&3!=D||(t=666),0==D||2==D)return 0===e.avail_out&&(l=-1),0;if(1==D){if(1==a)ee(2,3),te(256,r.static_ltree),re(),1+V+10-j<9&&(ee(2,3),te(256,r.static_ltree),re()),V=7;else if(ae(0,0,!1),3==a)for(A=0;A<m;A++)f[A]=0;if(e.flush_pending(),0===e.avail_out)return l=-1,0}}return 4!=a?0:1}}function c(){this.next_in_index=0,this.next_out_index=0,this.avail_in=0,this.total_in=0,this.avail_out=0,this.total_out=0}c.prototype={deflateInit:function(e,t){return this.dstate=new l,t||(t=15),this.dstate.deflateInit(this,e,t)},deflate:function(e){return this.dstate?this.dstate.deflate(this,e):-2},deflateEnd:function(){if(!this.dstate)return-2;var e=this.dstate.deflateEnd();return this.dstate=null,e},deflateParams:function(e,t){return this.dstate?this.dstate.deflateParams(this,e,t):-2},deflateSetDictionary:function(e,t){return this.dstate?this.dstate.deflateSetDictionary(this,e,t):-2},read_buf:function(e,t,i){var r=this.avail_in;return i<r&&(r=i),0===r?0:(this.avail_in-=r,e.set(this.next_in.subarray(this.next_in_index,this.next_in_index+r),t),this.next_in_index+=r,this.total_in+=r,r)},flush_pending:function(){var e=this,t=e.dstate.pending;t>e.avail_out&&(t=e.avail_out),0!==t&&(e.next_out.set(e.dstate.pending_buf.subarray(e.dstate.pending_out,e.dstate.pending_out+t),e.next_out_index),e.next_out_index+=t,e.dstate.pending_out+=t,e.total_out+=t,e.avail_out-=t,e.dstate.pending-=t,0===e.dstate.pending&&(e.dstate.pending_out=0))}};var u=e.zip||e;u.Deflater=u._jzlib_Deflater=function(e){var t=new c,i=new Uint8Array(512),r=e?e.level:-1;void 0===r&&(r=-1),t.deflateInit(r),t.next_out=i,this.append=function(e,r){var n,o=[],s=0,a=0,l=0;if(e.length){t.next_in_index=0,t.next_in=e,t.avail_in=e.length;do{if(t.next_out_index=0,t.avail_out=512,0!=t.deflate(0))throw new Error("deflating: "+t.msg);t.next_out_index&&o.push(512==t.next_out_index?new Uint8Array(i):new Uint8Array(i.subarray(0,t.next_out_index))),l+=t.next_out_index,r&&0<t.next_in_index&&t.next_in_index!=s&&(r(t.next_in_index),s=t.next_in_index)}while(0<t.avail_in||0===t.avail_out);return n=new Uint8Array(l),o.forEach((function(e){n.set(e,a),a+=e.length})),n}},this.flush=function(){var e,r,n=[],o=0,s=0;do{if(t.next_out_index=0,t.avail_out=512,1!=(e=t.deflate(4))&&0!=e)throw new Error("deflating: "+t.msg);0<512-t.avail_out&&n.push(new Uint8Array(i.subarray(0,t.next_out_index))),s+=t.next_out_index}while(0<t.avail_in||0===t.avail_out);return t.deflateEnd(),r=new Uint8Array(s),n.forEach((function(e){r.set(e,o),o+=e.length})),r}}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||"undefined"!=typeof global&&global||Function('return typeof this === "object" && this.content')()||Function("return this")()),("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||"undefined"!=typeof global&&global||Function('return typeof this === "object" && this.content')()||Function("return this")()).RGBColor=function(e){var t;e=e||"",this.ok=!1,"#"==e.charAt(0)&&(e=e.substr(1,6)),e=(e=e.replace(/ /g,"")).toLowerCase();var i={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"};for(var r in i)e==r&&(e=i[r]);for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(e){return[parseInt(e[1]),parseInt(e[2]),parseInt(e[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}}],o=0;o<n.length;o++){var s=n[o].process,a=n[o].re.exec(e);a&&(t=s(a),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:255<this.r?255:this.r,this.g=this.g<0||isNaN(this.g)?0:255<this.g?255:this.g,this.b=this.b<0||isNaN(this.b)?0:255<this.b?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var e=this.r.toString(16),t=this.g.toString(16),i=this.b.toString(16);return 1==e.length&&(e="0"+e),1==t.length&&(t="0"+t),1==i.length&&(i="0"+i),"#"+e+t+i}},function(e){var t="+".charCodeAt(0),i="/".charCodeAt(0),r="0".charCodeAt(0),n="a".charCodeAt(0),o="A".charCodeAt(0),s="-".charCodeAt(0),a="_".charCodeAt(0),l=function(e){var l=e.charCodeAt(0);return l===t||l===s?62:l===i||l===a?63:l<r?-1:l<r+10?l-r+26+26:l<o+26?l-o:l<n+26?l-n+26:void 0};e.API.TTFFont=function(){function e(e,t,i){var r;if(this.rawData=e,r=this.contents=new u(e),this.contents.pos=4,"ttcf"===r.readString(4)){if(!t)throw new Error("Must specify a font name for TTC files.");throw new Error("Font "+t+" not found in TTC file.")}r.pos=0,this.parse(),this.subset=new N(this),this.registerTTF()}return e.open=function(t,i,r,n){if("string"!=typeof r)throw new Error("Invalid argument supplied in TTFFont.open");return new e(function(e){var t,i,r,n,o,s;if(0<e.length%4)throw new Error("Invalid string. Length must be a multiple of 4");var a=e.length;o="="===e.charAt(a-2)?2:"="===e.charAt(a-1)?1:0,s=new Uint8Array(3*e.length/4-o),r=0<o?e.length-4:e.length;var c=0;function u(e){s[c++]=e}for(i=t=0;t<r;t+=4,i+=3)u((16711680&(n=l(e.charAt(t))<<18|l(e.charAt(t+1))<<12|l(e.charAt(t+2))<<6|l(e.charAt(t+3))))>>16),u((65280&n)>>8),u(255&n);return 2===o?u(255&(n=l(e.charAt(t))<<2|l(e.charAt(t+1))>>4)):1===o&&(u((n=l(e.charAt(t))<<10|l(e.charAt(t+1))<<4|l(e.charAt(t+2))>>2)>>8&255),u(255&n)),s}(r),i,n)},e.prototype.parse=function(){return this.directory=new h(this.contents),this.head=new p(this),this.name=new _(this),this.cmap=new g(this),this.toUnicode=new Map,this.hhea=new m(this),this.maxp=new b(this),this.hmtx=new C(this),this.post=new y(this),this.os2=new w(this),this.loca=new B(this),this.glyf=new S(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var e,t,i,r;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var e,t,i,r;for(r=[],e=0,t=(i=this.bbox).length;e<t;e++)r.push(Math.round(i[e]*this.scaleFactor));return r}).call(this),this.stemV=0,this.post.exists?(t=255&(i=this.post.italic_angle),!0&(e=i>>16)&&(e=-(1+(65535^e))),this.italicAngle=+(e+"."+t)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=1===(r=this.familyClass)||2===r||3===r||4===r||5===r||7===r,this.isScript=10===this.familyClass,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),0!==this.italicAngle&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(e){var t;return(null!=(t=this.cmap.unicode)?t.codeMap[e]:void 0)||0},e.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},e.prototype.widthOfString=function(e,t,i){var r,n,o,s,a;for(n=s=o=0,a=(e=""+e).length;0<=a?s<a:a<s;n=0<=a?++s:--s)r=e.charCodeAt(n),o+=this.widthOfGlyph(this.characterToGlyph(r))+i*(1e3/t)||0;return o*(t/1e3)},e.prototype.lineHeight=function(e,t){return null==t&&(t=!1),(this.ascender+(t?this.lineGap:0)-this.decender)/1e3*e},e}();var c,u=function(){function e(e){this.data=null!=e?e:[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(e){return this.data[this.pos++]=e},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},e.prototype.readInt32=function(){var e;return 2147483648<=(e=this.readUInt32())?e-4294967296:e},e.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},e.prototype.readInt16=function(){var e;return 32768<=(e=this.readUInt16())?e-65536:e},e.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},e.prototype.readString=function(e){var t,i,r;for(i=[],t=r=0;0<=e?r<e:e<r;t=0<=e?++r:--r)i[t]=String.fromCharCode(this.readByte());return i.join("")},e.prototype.writeString=function(e){var t,i,r,n;for(n=[],t=i=0,r=e.length;0<=r?i<r:r<i;t=0<=r?++i:--i)n.push(this.writeByte(e.charCodeAt(t)));return n},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(e){return this.writeInt16(e)},e.prototype.readLongLong=function(){var e,t,i,r,n,o,s,a;return e=this.readByte(),t=this.readByte(),i=this.readByte(),r=this.readByte(),n=this.readByte(),o=this.readByte(),s=this.readByte(),a=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^i)+4294967296*(255^r)+16777216*(255^n)+65536*(255^o)+256*(255^s)+(255^a)+1):72057594037927940*e+281474976710656*t+1099511627776*i+4294967296*r+16777216*n+65536*o+256*s+a},e.prototype.writeLongLong=function(e){var t,i;return t=Math.floor(e/4294967296),i=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(i>>24&255),this.writeByte(i>>16&255),this.writeByte(i>>8&255),this.writeByte(255&i)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(e){return this.writeInt32(e)},e.prototype.read=function(e){var t,i;for(t=[],i=0;0<=e?i<e:e<i;0<=e?++i:--i)t.push(this.readByte());return t},e.prototype.write=function(e){var t,i,r;for(r=[],t=0,i=e.length;t<i;t++)r.push(this.writeByte(e[t]));return r},e}(),h=function(){var e;function t(e){var t,i,r;for(this.scalarType=e.readInt(),this.tableCount=e.readShort(),this.searchRange=e.readShort(),this.entrySelector=e.readShort(),this.rangeShift=e.readShort(),this.tables={},i=0,r=this.tableCount;0<=r?i<r:r<i;0<=r?++i:--i)t={tag:e.readString(4),checksum:e.readInt(),offset:e.readInt(),length:e.readInt()},this.tables[t.tag]=t}return t.prototype.encode=function(t){var i,r,n,o,s,a,l,c,h,d,A,p;for(p in d=Object.keys(t).length,s=Math.log(2),c=16*Math.floor(Math.log(d)/s),n=Math.floor(c/s),l=16*d-c,(r=new u).writeInt(this.scalarType),r.writeShort(d),r.writeShort(c),r.writeShort(n),r.writeShort(l),a=r.pos+16*d,o=null,A=[],t)for(h=t[p],r.writeString(p),r.writeInt(e(h)),r.writeInt(a),r.writeInt(h.length),A=A.concat(h),"head"===p&&(o=a),a+=h.length;a%4;)A.push(0),a++;return r.write(A),i=2981146554-e(r.data),r.pos=o+8,r.writeUInt32(i),r.data},e=function(e){var t,i,r,n;for(e=E.call(e);e.length%4;)e.push(0);for(i=new u(e),r=t=0,n=e.length;r<n;r+=4)t+=i.readUInt32();return 4294967295&t},t}(),d={}.hasOwnProperty,A=function(e,t){for(var i in t)d.call(t,i)&&(e[i]=t[i]);function r(){this.constructor=e}return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};c=function(){function e(e){var t;this.file=e,this.exists=!!(t=this.file.directory.tables[this.tag]),t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var p=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return A(t,c),t.prototype.tag="head",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},t.prototype.encode=function(e){var t;return(t=new u).writeInt(this.version),t.writeInt(this.revision),t.writeInt(this.checkSumAdjustment),t.writeInt(this.magicNumber),t.writeShort(this.flags),t.writeShort(this.unitsPerEm),t.writeLongLong(this.created),t.writeLongLong(this.modified),t.writeShort(this.xMin),t.writeShort(this.yMin),t.writeShort(this.xMax),t.writeShort(this.yMax),t.writeShort(this.macStyle),t.writeShort(this.lowestRecPPEM),t.writeShort(this.fontDirectionHint),t.writeShort(e),t.writeShort(this.glyphDataFormat),t.data},t}(),f=function(){function e(e,t){var i,r,n,o,s,a,l,c,u,h,d,A,p,f,g,m,w,y;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),u=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=3===this.platformID&&1===this.encodingID&&4===this.format||0===this.platformID&&4===this.format,this.codeMap={},this.format){case 0:for(a=g=0;g<256;a=++g)this.codeMap[a]=e.readByte();break;case 4:for(d=e.readUInt16(),h=d/2,e.pos+=6,n=function(){var t,i;for(i=[],a=t=0;0<=h?t<h:h<t;a=0<=h?++t:--t)i.push(e.readUInt16());return i}(),e.pos+=2,p=function(){var t,i;for(i=[],a=t=0;0<=h?t<h:h<t;a=0<=h?++t:--t)i.push(e.readUInt16());return i}(),l=function(){var t,i;for(i=[],a=t=0;0<=h?t<h:h<t;a=0<=h?++t:--t)i.push(e.readUInt16());return i}(),c=function(){var t,i;for(i=[],a=t=0;0<=h?t<h:h<t;a=0<=h?++t:--t)i.push(e.readUInt16());return i}(),r=(this.length-e.pos+this.offset)/2,s=function(){var t,i;for(i=[],a=t=0;0<=r?t<r:r<t;a=0<=r?++t:--t)i.push(e.readUInt16());return i}(),a=m=0,y=n.length;m<y;a=++m)for(f=n[a],i=w=A=p[a];A<=f?w<=f:f<=w;i=A<=f?++w:--w)0===c[a]?o=i+l[a]:0!==(o=s[c[a]/2+(i-A)-(h-a)]||0)&&(o+=l[a]),this.codeMap[i]=65535&o}e.pos=u}return e.encode=function(e,t){var i,r,n,o,s,a,l,c,h,d,A,p,f,g,m,w,y,v,_,b,C,E,S,L,T,B,N,I,F,O,x,D,R,U,M,P,H,Q,k,z,V,G,j,W,q;switch(N=new u,o=Object.keys(e).sort((function(e,t){return e-t})),t){case"macroman":for(f=0,g=function(){var e,t;for(t=[],p=e=0;e<256;p=++e)t.push(0);return t}(),w={0:0},n={},I=0,D=o.length;I<D;I++)null==w[G=e[r=o[I]]]&&(w[G]=++f),n[r]={old:e[r],new:w[e[r]]},g[r]=w[e[r]];return N.writeUInt16(1),N.writeUInt16(0),N.writeUInt32(12),N.writeUInt16(0),N.writeUInt16(262),N.writeUInt16(0),N.write(g),{charMap:n,subtable:N.data,maxGlyphID:f+1};case"unicode":for(T=[],h=[],w={},i={},m=l=null,F=y=0,R=o.length;F<R;F++)null==w[v=e[r=o[F]]]&&(w[v]=++y),i[r]={old:v,new:w[v]},s=w[v]-r,null!=m&&s===l||(m&&h.push(m),T.push(r),l=s),m=r;for(m&&h.push(m),h.push(65535),T.push(65535),S=2*(E=T.length),C=2*Math.pow(Math.log(E)/Math.LN2,2),d=Math.log(C/2)/Math.LN2,b=2*E-C,a=[],_=[],A=[],p=O=0,U=T.length;O<U;p=++O){if(c=h[p],65535===(L=T[p])){a.push(0),_.push(0);break}if(32768<=L-(B=i[L].new))for(a.push(0),_.push(2*(A.length+E-p)),r=x=L;L<=c?x<=c:c<=x;r=L<=c?++x:--x)A.push(i[r].new);else a.push(B-L),_.push(0)}for(N.writeUInt16(3),N.writeUInt16(1),N.writeUInt32(12),N.writeUInt16(4),N.writeUInt16(16+8*E+2*A.length),N.writeUInt16(0),N.writeUInt16(S),N.writeUInt16(C),N.writeUInt16(d),N.writeUInt16(b),z=0,M=h.length;z<M;z++)N.writeUInt16(r=h[z]);for(N.writeUInt16(0),V=0,P=T.length;V<P;V++)N.writeUInt16(r=T[V]);for(j=0,H=a.length;j<H;j++)N.writeUInt16(s=a[j]);for(W=0,Q=_.length;W<Q;W++)N.writeUInt16(_[W]);for(q=0,k=A.length;q<k;q++)N.writeUInt16(f=A[q]);return{charMap:i,subtable:N.data,maxGlyphID:y+1}}},e}(),g=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return A(t,c),t.prototype.tag="cmap",t.prototype.parse=function(e){var t,i,r;for(e.pos=this.offset,this.version=e.readUInt16(),i=e.readUInt16(),this.tables=[],this.unicode=null,r=0;0<=i?r<i:i<r;0<=i?++r:--r)t=new f(e,this.offset),this.tables.push(t),t.isUnicode&&null==this.unicode&&(this.unicode=t);return!0},t.encode=function(e,t){var i,r;return null==t&&(t="macroman"),i=f.encode(e,t),(r=new u).writeUInt16(0),r.writeUInt16(1),i.table=r.data.concat(i.subtable),i},t}(),m=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return A(t,c),t.prototype.tag="hhea",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},t}(),w=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return A(t,c),t.prototype.tag="OS/2",t.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=function(){var t,i;for(i=[],t=0;t<10;++t)i.push(e.readByte());return i}(),this.charRange=function(){var t,i;for(i=[],t=0;t<4;++t)i.push(e.readInt());return i}(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),0<this.version&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=function(){var t,i;for(i=[],t=0;t<2;++t)i.push(e.readInt());return i}(),1<this.version))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},t}(),y=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return A(t,c),t.prototype.tag="post",t.prototype.parse=function(e){var t,i,r,n;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:break;case 131072:for(i=e.readUInt16(),this.glyphNameIndex=[],r=0;0<=i?r<i:i<r;0<=i?++r:--r)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],n=[];e.pos<this.offset+this.length;)t=e.readByte(),n.push(this.names.push(e.readString(t)));return n;case 151552:return i=e.readUInt16(),this.offsets=e.read(i);case 196608:break;case 262144:return this.map=(function(){var t,i,r;for(r=[],t=0,i=this.file.maxp.numGlyphs;0<=i?t<i:i<t;0<=i?++t:--t)r.push(e.readUInt32());return r}).call(this)}},t}(),v=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},_=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return A(t,c),t.prototype.tag="name",t.prototype.parse=function(e){var t,i,r,n,o,s,a,l,c,u,h,d;for(e.pos=this.offset,e.readShort(),t=e.readShort(),s=e.readShort(),i=[],n=c=0;0<=t?c<t:t<c;n=0<=t?++c:--c)i.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+s+e.readShort()});for(a={},n=u=0,h=i.length;u<h;n=++u)e.pos=(r=i[n]).offset,l=e.readString(r.length),o=new v(l,r),null==a[d=r.nameID]&&(a[d]=[]),a[r.nameID].push(o);this.strings=a,this.copyright=a[0],this.fontFamily=a[1],this.fontSubfamily=a[2],this.uniqueSubfamily=a[3],this.fontName=a[4],this.version=a[5];try{this.postscriptName=a[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch(e){this.postscriptName=a[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=a[7],this.manufacturer=a[8],this.designer=a[9],this.description=a[10],this.vendorUrl=a[11],this.designerUrl=a[12],this.license=a[13],this.licenseUrl=a[14],this.preferredFamily=a[15],this.preferredSubfamily=a[17],this.compatibleFull=a[18],this.sampleText=a[19]},t}(),b=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return A(t,c),t.prototype.tag="maxp",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},t}(),C=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return A(t,c),t.prototype.tag="hmtx",t.prototype.parse=function(e){var t,i,r,n,o,s;for(e.pos=this.offset,this.metrics=[],r=0,o=this.file.hhea.numberOfMetrics;0<=o?r<o:o<r;0<=o?++r:--r)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(i=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var t,r;for(r=[],t=0;0<=i?t<i:i<t;0<=i?++t:--t)r.push(e.readInt16());return r}(),this.widths=(function(){var e,t,i,r;for(r=[],e=0,t=(i=this.metrics).length;e<t;e++)r.push(i[e].advance);return r}).call(this),t=this.widths[this.widths.length-1],s=[],n=0;0<=i?n<i:i<n;0<=i?++n:--n)s.push(this.widths.push(t));return s},t.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},t}(),E=[].slice,S=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return A(t,c),t.prototype.tag="glyf",t.prototype.parse=function(e){return this.cache={}},t.prototype.glyphFor=function(e){var t,i,r,n,o,s,a,l,c,h;return(e=e)in this.cache?this.cache[e]:(t=this.file.contents,i=(n=this.file.loca).indexOf(e),0===(r=n.lengthOf(e))?this.cache[e]=null:(t.pos=this.offset+i,o=(s=new u(t.read(r))).readShort(),l=s.readShort(),h=s.readShort(),a=s.readShort(),c=s.readShort(),this.cache[e]=-1===o?new T(s,l,h,a,c):new L(s,o,l,h,a,c),this.cache[e]))},t.prototype.encode=function(e,t,i){var r,n,o,s,a;for(o=[],n=[],s=0,a=t.length;s<a;s++)r=e[t[s]],n.push(o.length),r&&(o=o.concat(r.encode(i)));return n.push(o.length),{table:o,offsets:n}},t}(),L=function(){function e(e,t,i,r,n,o){this.raw=e,this.numberOfContours=t,this.xMin=i,this.yMin=r,this.xMax=n,this.yMax=o,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),T=function(){function e(e,t,i,r,n){var o,s;for(this.raw=e,this.xMin=t,this.yMin=i,this.xMax=r,this.yMax=n,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;s=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readShort()),32&s;)o.pos+=1&s?4:2,128&s?o.pos+=8:64&s?o.pos+=4:8&s&&(o.pos+=2)}return e.prototype.encode=function(e){var t,i,r,n;for(i=new u(E.call(this.raw.data)),t=r=0,n=this.glyphIDs.length;r<n;t=++r)i.pos=this.glyphOffsets[t];return i.data},e}(),B=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return A(t,c),t.prototype.tag="loca",t.prototype.parse=function(e){return e.pos=this.offset,this.offsets=0===this.file.head.indexToLocFormat?(function(){var t,i,r;for(r=[],t=0,i=this.length;t<i;t+=2)r.push(2*e.readUInt16());return r}).call(this):(function(){var t,i,r;for(r=[],t=0,i=this.length;t<i;t+=4)r.push(e.readUInt32());return r}).call(this)},t.prototype.indexOf=function(e){return this.offsets[e]},t.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},t.prototype.encode=function(e,t){for(var i=new Uint32Array(this.offsets.length),r=0,n=0,o=0;o<i.length;++o)if(i[o]=r,n<t.length&&t[n]==o){++n,i[o]=r;var s=this.offsets[o+1]-this.offsets[o];0<s&&(r+=s)}for(var a=new Array(4*i.length),l=0;l<i.length;++l)a[4*l+3]=255&i[l],a[4*l+2]=(65280&i[l])>>8,a[4*l+1]=(16711680&i[l])>>16,a[4*l]=(4278190080&i[l])>>24;return a},t}(),N=function(){function e(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var e,t,i,r;for(t in i=this.font.cmap.tables[0].codeMap,e={},r=this.subset)e[t]=i[r[t]];return e},e.prototype.glyphsFor=function(e){var t,i,r,n,o,s,a;for(r={},o=0,s=e.length;o<s;o++)r[n=e[o]]=this.font.glyf.glyphFor(n);for(n in t=[],r)(null!=(i=r[n])?i.compound:void 0)&&t.push.apply(t,i.glyphIDs);if(0<t.length)for(n in a=this.glyphsFor(t))r[n]=i=a[n];return r},e.prototype.encode=function(e,t){var i,r,n,o,s,a,l,c,u,h,d,A,p,f;for(r in i=g.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(e),h={0:0},f=i.charMap)h[(s=f[r]).old]=s.new;for(d in u=i.maxGlyphID,o)d in h||(h[d]=u++);return l=function(e){var t,i;for(t in i={},e)i[e[t]]=t;return i}(h),c=Object.keys(l).sort((function(e,t){return e-t})),A=function(){var e,t,i;for(i=[],e=0,t=c.length;e<t;e++)i.push(l[c[e]]);return i}(),n=this.font.glyf.encode(o,A,h),a=this.font.loca.encode(n.offsets,A),p={cmap:this.font.cmap.raw(),glyf:n.table,loca:a,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(p["OS/2"]=this.font.os2.raw()),this.font.directory.encode(p)},e}();e.API.PDFObject=function(){var e;function t(){}return e=function(e,t){return(Array(t+1).join("0")+e).slice(-t)},t.convert=function(i){var r,n;if(Array.isArray(i))return"["+function(){var e,r,n;for(n=[],e=0,r=i.length;e<r;e++)n.push(t.convert(i[e]));return n}().join(" ")+"]";if("string"==typeof i)return"/"+i;if(null!=i?i.isString:void 0)return"("+i+")";if(i instanceof Date)return"(D:"+e(i.getUTCFullYear(),4)+e(i.getUTCMonth(),2)+e(i.getUTCDate(),2)+e(i.getUTCHours(),2)+e(i.getUTCMinutes(),2)+e(i.getUTCSeconds(),2)+"Z)";if("[object Object]"!=={}.toString.call(i))return""+i;for(r in n=["<<"],i)n.push("/"+r+" "+t.convert(i[r]));return n.push(">>"),n.join("\n")},t}()}(le),be="undefined"!=typeof self&&self||"undefined"!=typeof window&&window||"undefined"!=typeof global&&global||Function('return typeof this === "object" && this.content')()||Function("return this")(),Ce=function(){var e,i,r;function n(e){var t,i,r,n,o,s,a,l,c,u,h,d,A;for(this.data=e,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},o=null;;){switch(t=this.readUInt32(),l=(function(){var e,t;for(t=[],e=0;e<4;++e)t.push(String.fromCharCode(this.data[this.pos++]));return t}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(t);break;case"fcTL":o&&this.animation.frames.push(o),this.pos+=4,o={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},n=this.readUInt16(),r=this.readUInt16()||100,o.delay=1e3*n/r,o.disposeOp=this.data[this.pos++],o.blendOp=this.data[this.pos++],o.data=[];break;case"IDAT":case"fdAT":for("fdAT"===l&&(this.pos+=4,t-=4),e=(null!=o?o.data:void 0)||this.imgData,h=0;0<=t?h<t:t<h;0<=t?++h:--h)e.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(i=this.palette.length/3,this.transparency.indexed=this.read(t),this.transparency.indexed.length>i)throw new Error("More transparent colors than palette size");if(0<(c=i-this.transparency.indexed.length))for(d=0;0<=c?d<c:c<d;0<=c?++d:--d)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(t)[0];break;case 2:this.transparency.rgb=this.read(t)}break;case"tEXt":s=(u=this.read(t)).indexOf(0),a=String.fromCharCode.apply(String,u.slice(0,s)),this.text[a]=String.fromCharCode.apply(String,u.slice(s+1));break;case"IEND":return o&&this.animation.frames.push(o),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=4===(A=this.colorType)||6===A,this.pixelBitlength=this.bits*(this.colors+(this.hasAlphaChannel?1:0)),this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=t}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}n.load=function(e,t,i){var r;return"function"==typeof t&&(i=t),(r=new XMLHttpRequest).open("GET",e,!0),r.responseType="arraybuffer",r.onload=function(){var e;return e=new n(new Uint8Array(r.response||r.mozResponseArrayBuffer)),"function"==typeof(null!=t?t.getContext:void 0)&&e.render(t),"function"==typeof i?i(e):void 0},r.send(null)},n.prototype.read=function(e){var t,i;for(i=[],t=0;0<=e?t<e:e<t;0<=e?++t:--t)i.push(this.data[this.pos++]);return i},n.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.decodePixels=function(e){var t=this.pixelBitlength/8,i=new Uint8Array(this.width*this.height*t),r=0,n=this;if(null==e&&(e=this.imgData),0===e.length)return new Uint8Array(0);function o(o,s,a,l){var c,u,h,d,A,p,f,g,m,w,y,v,_,b,C,E,S,L,T,B,N=Math.ceil((n.width-o)/a),I=Math.ceil((n.height-s)/l),F=n.width==N&&n.height==I;for(_=t*N,y=F?i:new Uint8Array(_*I),p=e.length,u=v=0;v<I&&r<p;){switch(e[r++]){case 0:for(d=E=0;E<_;d=E+=1)y[u++]=e[r++];break;case 1:for(d=S=0;S<_;d=S+=1)c=e[r++],A=d<t?0:y[u-t],y[u++]=(c+A)%256;break;case 2:for(d=L=0;L<_;d=L+=1)c=e[r++],h=(d-d%t)/t,y[u++]=((b=v&&y[(v-1)*_+h*t+d%t])+c)%256;break;case 3:for(d=T=0;T<_;d=T+=1)c=e[r++],h=(d-d%t)/t,A=d<t?0:y[u-t],b=v&&y[(v-1)*_+h*t+d%t],y[u++]=(c+Math.floor((A+b)/2))%256;break;case 4:for(d=B=0;B<_;d=B+=1)c=e[r++],h=(d-d%t)/t,0===v?b=C=0:(b=y[(v-1)*_+h*t+d%t],C=h&&y[(v-1)*_+(h-1)*t+d%t]),f=(A=d<t?0:y[u-t])+b-C,g=Math.abs(f-A),m=Math.abs(f-b),w=Math.abs(f-C),y[u++]=(c+(g<=m&&g<=w?A:m<=w?b:C))%256;break;default:throw new Error("Invalid filter algorithm: "+e[r-1])}if(!F){var O=((s+v*l)*n.width+o)*t,x=v*_;for(d=0;d<N;d+=1){for(var D=0;D<t;D+=1)i[O++]=y[x++];O+=(a-1)*t}}v++}}return e=(e=new Ie(e)).getBytes(),1==n.interlaceMethod?(o(0,0,8,8),o(4,0,8,8),o(0,4,4,8),o(2,0,4,4),o(0,2,2,4),o(1,0,2,2),o(0,1,1,2)):o(0,0,1,1),i},n.prototype.decodePalette=function(){var e,t,i,r,n,o,s,a,l;for(i=this.palette,o=this.transparency.indexed||[],n=new Uint8Array((o.length||0)+i.length),r=0,t=s=e=0,a=i.length;s<a;t=s+=3)n[r++]=i[t],n[r++]=i[t+1],n[r++]=i[t+2],n[r++]=null!=(l=o[e++])?l:255;return n},n.prototype.copyToImageData=function(e,t){var i,r,n,o,s,a,l,c,u,h,d;if(r=this.colors,u=null,i=this.hasAlphaChannel,this.palette.length&&(u=null!=(d=this._decodedPalette)?d:this._decodedPalette=this.decodePalette(),r=4,i=!0),c=(n=e.data||e).length,s=u||t,o=a=0,1===r)for(;o<c;)l=u?4*t[o/4]:a,h=s[l++],n[o++]=h,n[o++]=h,n[o++]=h,n[o++]=i?s[l++]:255,a=l;else for(;o<c;)l=u?4*t[o/4]:a,n[o++]=s[l++],n[o++]=s[l++],n[o++]=s[l++],n[o++]=i?s[l++]:255,a=l},n.prototype.decode=function(){var e;return e=new Uint8Array(this.width*this.height*4),this.copyToImageData(e,this.decodePixels()),e};try{i=be.document.createElement("canvas"),r=i.getContext("2d")}catch(t){return-1}return e=function(e){var t;return r.width=e.width,r.height=e.height,r.clearRect(0,0,e.width,e.height),r.putImageData(e,0,0),(t=new Image).src=i.toDataURL(),t},n.prototype.decodeFrames=function(t){var i,r,n,o,s,a,l,c;if(this.animation){for(c=[],r=s=0,a=(l=this.animation.frames).length;s<a;r=++s)n=t.createImageData((i=l[r]).width,i.height),o=this.decodePixels(new Uint8Array(i.data)),this.copyToImageData(n,o),i.imageData=n,c.push(i.image=e(n));return c}},n.prototype.renderFrame=function(e,t){var i,r,n;return i=(r=this.animation.frames)[t],n=r[t-1],0===t&&e.clearRect(0,0,this.width,this.height),1===(null!=n?n.disposeOp:void 0)?e.clearRect(n.xOffset,n.yOffset,n.width,n.height):2===(null!=n?n.disposeOp:void 0)&&e.putImageData(n.imageData,n.xOffset,n.yOffset),0===i.blendOp&&e.clearRect(i.xOffset,i.yOffset,i.width,i.height),e.drawImage(i.image,i.xOffset,i.yOffset)},n.prototype.animate=function(e){var t,i,r,n,o,s,a=this;return i=0,n=(s=this.animation).numFrames,r=s.frames,o=s.numPlays,(t=function(){var s,l;if(s=i++%n,l=r[s],a.renderFrame(e,s),1<n&&i/n<o)return a.animation._timeout=setTimeout(t,l.delay)})()},n.prototype.stopAnimation=function(){var e;return clearTimeout(null!=(e=this.animation)?e._timeout:void 0)},n.prototype.render=function(e){var t,i;return e._png&&e._png.stopAnimation(),e._png=this,e.width=this.width,e.height=this.height,t=e.getContext("2d"),this.animation?(this.decodeFrames(t),this.animate(t)):(i=t.createImageData(this.width,this.height),this.copyToImageData(i,this.decodePixels()),t.putImageData(i,0,0))},n}(),be.PNG=Ce;var Ne=function(){function e(){this.pos=0,this.bufferLength=0,this.eof=!1,this.buffer=null}return e.prototype={ensureBuffer:function(e){var t=this.buffer,i=t?t.byteLength:0;if(e<i)return t;for(var r=512;r<e;)r<<=1;for(var n=new Uint8Array(r),o=0;o<i;++o)n[o]=t[o];return this.buffer=n},getByte:function(){for(var e=this.pos;this.bufferLength<=e;){if(this.eof)return null;this.readBlock()}return this.buffer[this.pos++]},getBytes:function(e){var t=this.pos;if(e){this.ensureBuffer(t+e);for(var i=t+e;!this.eof&&this.bufferLength<i;)this.readBlock();var r=this.bufferLength;r<i&&(i=r)}else{for(;!this.eof;)this.readBlock();i=this.bufferLength}return this.pos=i,this.buffer.subarray(t,i)},lookChar:function(){for(var e=this.pos;this.bufferLength<=e;){if(this.eof)return null;this.readBlock()}return String.fromCharCode(this.buffer[this.pos])},getChar:function(){for(var e=this.pos;this.bufferLength<=e;){if(this.eof)return null;this.readBlock()}return String.fromCharCode(this.buffer[this.pos++])},makeSubStream:function(e,t,i){for(var r=e+t;this.bufferLength<=r&&!this.eof;)this.readBlock();return new Stream(this.buffer,e,t,i)},skip:function(e){e||(e=1),this.pos+=e},reset:function(){this.pos=0}},e}(),Ie=function(){if("undefined"!=typeof Uint32Array){var e=new Uint32Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),t=new Uint32Array([3,4,5,6,7,8,9,10,65547,65549,65551,65553,131091,131095,131099,131103,196643,196651,196659,196667,262211,262227,262243,262259,327811,327843,327875,327907,258,258,258]),i=new Uint32Array([1,2,3,4,65541,65543,131081,131085,196625,196633,262177,262193,327745,327777,393345,393409,459009,459137,524801,525057,590849,591361,657409,658433,724993,727041,794625,798721,868353,876545]),r=[new Uint32Array([459008,524368,524304,524568,459024,524400,524336,590016,459016,524384,524320,589984,524288,524416,524352,590048,459012,524376,524312,589968,459028,524408,524344,590032,459020,524392,524328,59e4,524296,524424,524360,590064,459010,524372,524308,524572,459026,524404,524340,590024,459018,524388,524324,589992,524292,524420,524356,590056,459014,524380,524316,589976,459030,524412,524348,590040,459022,524396,524332,590008,524300,524428,524364,590072,459009,524370,524306,524570,459025,524402,524338,590020,459017,524386,524322,589988,524290,524418,524354,590052,459013,524378,524314,589972,459029,524410,524346,590036,459021,524394,524330,590004,524298,524426,524362,590068,459011,524374,524310,524574,459027,524406,524342,590028,459019,524390,524326,589996,524294,524422,524358,590060,459015,524382,524318,589980,459031,524414,524350,590044,459023,524398,524334,590012,524302,524430,524366,590076,459008,524369,524305,524569,459024,524401,524337,590018,459016,524385,524321,589986,524289,524417,524353,590050,459012,524377,524313,589970,459028,524409,524345,590034,459020,524393,524329,590002,524297,524425,524361,590066,459010,524373,524309,524573,459026,524405,524341,590026,459018,524389,524325,589994,524293,524421,524357,590058,459014,524381,524317,589978,459030,524413,524349,590042,459022,524397,524333,590010,524301,524429,524365,590074,459009,524371,524307,524571,459025,524403,524339,590022,459017,524387,524323,589990,524291,524419,524355,590054,459013,524379,524315,589974,459029,524411,524347,590038,459021,524395,524331,590006,524299,524427,524363,590070,459011,524375,524311,524575,459027,524407,524343,590030,459019,524391,524327,589998,524295,524423,524359,590062,459015,524383,524319,589982,459031,524415,524351,590046,459023,524399,524335,590014,524303,524431,524367,590078,459008,524368,524304,524568,459024,524400,524336,590017,459016,524384,524320,589985,524288,524416,524352,590049,459012,524376,524312,589969,459028,524408,524344,590033,459020,524392,524328,590001,524296,524424,524360,590065,459010,524372,524308,524572,459026,524404,524340,590025,459018,524388,524324,589993,524292,524420,524356,590057,459014,524380,524316,589977,459030,524412,524348,590041,459022,524396,524332,590009,524300,524428,524364,590073,459009,524370,524306,524570,459025,524402,524338,590021,459017,524386,524322,589989,524290,524418,524354,590053,459013,524378,524314,589973,459029,524410,524346,590037,459021,524394,524330,590005,524298,524426,524362,590069,459011,524374,524310,524574,459027,524406,524342,590029,459019,524390,524326,589997,524294,524422,524358,590061,459015,524382,524318,589981,459031,524414,524350,590045,459023,524398,524334,590013,524302,524430,524366,590077,459008,524369,524305,524569,459024,524401,524337,590019,459016,524385,524321,589987,524289,524417,524353,590051,459012,524377,524313,589971,459028,524409,524345,590035,459020,524393,524329,590003,524297,524425,524361,590067,459010,524373,524309,524573,459026,524405,524341,590027,459018,524389,524325,589995,524293,524421,524357,590059,459014,524381,524317,589979,459030,524413,524349,590043,459022,524397,524333,590011,524301,524429,524365,590075,459009,524371,524307,524571,459025,524403,524339,590023,459017,524387,524323,589991,524291,524419,524355,590055,459013,524379,524315,589975,459029,524411,524347,590039,459021,524395,524331,590007,524299,524427,524363,590071,459011,524375,524311,524575,459027,524407,524343,590031,459019,524391,524327,589999,524295,524423,524359,590063,459015,524383,524319,589983,459031,524415,524351,590047,459023,524399,524335,590015,524303,524431,524367,590079]),9],n=[new Uint32Array([327680,327696,327688,327704,327684,327700,327692,327708,327682,327698,327690,327706,327686,327702,327694,0,327681,327697,327689,327705,327685,327701,327693,327709,327683,327699,327691,327707,327687,327703,327695,0]),5];return(s.prototype=Object.create(Ne.prototype)).getBits=function(e){for(var t,i=this.codeSize,r=this.codeBuf,n=this.bytes,s=this.bytesPos;i<e;)void 0===(t=n[s++])&&o("Bad encoding in flate stream"),r|=t<<i,i+=8;return t=r&(1<<e)-1,this.codeBuf=r>>e,this.codeSize=i-=e,this.bytesPos=s,t},s.prototype.getCode=function(e){for(var t=e[0],i=e[1],r=this.codeSize,n=this.codeBuf,s=this.bytes,a=this.bytesPos;r<i;){var l;void 0===(l=s[a++])&&o("Bad encoding in flate stream"),n|=l<<r,r+=8}var c=t[n&(1<<i)-1],u=c>>16,h=65535&c;return(0==r||r<u||0==u)&&o("Bad encoding in flate stream"),this.codeBuf=n>>u,this.codeSize=r-u,this.bytesPos=a,h},s.prototype.generateHuffmanTable=function(e){for(var t=e.length,i=0,r=0;r<t;++r)e[r]>i&&(i=e[r]);for(var n=1<<i,o=new Uint32Array(n),s=1,a=0,l=2;s<=i;++s,a<<=1,l<<=1)for(var c=0;c<t;++c)if(e[c]==s){var u=0,h=a;for(r=0;r<s;++r)u=u<<1|1&h,h>>=1;for(r=u;r<n;r+=l)o[r]=s<<16|c;++a}return[o,i]},s.prototype.readBlock=function(){function s(e,t,i,r,n){for(var o=e.getBits(i)+r;0<o--;)t[p++]=n}var a=this.getBits(3);if(1&a&&(this.eof=!0),0!=(a>>=1)){var l,c;if(1==a)l=r,c=n;else if(2==a){for(var u=this.getBits(5)+257,h=this.getBits(5)+1,d=this.getBits(4)+4,A=Array(e.length),p=0;p<d;)A[e[p++]]=this.getBits(3);for(var f=this.generateHuffmanTable(A),g=0,m=(p=0,u+h),w=new Array(m);p<m;){var y=this.getCode(f);16==y?s(this,w,2,3,g):17==y?s(this,w,3,3,g=0):18==y?s(this,w,7,11,g=0):w[p++]=g=y}l=this.generateHuffmanTable(w.slice(0,u)),c=this.generateHuffmanTable(w.slice(u,m))}else o("Unknown block type in flate stream");for(var v=(O=this.buffer)?O.length:0,_=this.bufferLength;;){var b=this.getCode(l);if(b<256)v<=_+1&&(v=(O=this.ensureBuffer(_+1)).length),O[_++]=b;else{if(256==b)return void(this.bufferLength=_);var C=(b=t[b-=257])>>16;0<C&&(C=this.getBits(C)),g=(65535&b)+C,b=this.getCode(c),0<(C=(b=i[b])>>16)&&(C=this.getBits(C));var E=(65535&b)+C;v<=_+g&&(v=(O=this.ensureBuffer(_+g)).length);for(var S=0;S<g;++S,++_)O[_]=O[_-E]}}}else{var L,T=this.bytes,B=this.bytesPos;void 0===(L=T[B++])&&o("Bad block header in flate stream");var N=L;void 0===(L=T[B++])&&o("Bad block header in flate stream"),N|=L<<8,void 0===(L=T[B++])&&o("Bad block header in flate stream");var I=L;void 0===(L=T[B++])&&o("Bad block header in flate stream"),(I|=L<<8)!=(65535&~N)&&o("Bad uncompressed block length in flate stream"),this.codeBuf=0,this.codeSize=0;var F=this.bufferLength,O=this.ensureBuffer(F+N),x=F+N;this.bufferLength=x;for(var D=F;D<x;++D){if(void 0===(L=T[B++])){this.eof=!0;break}O[D]=L}this.bytesPos=B}},s}function o(e){throw new Error(e)}function s(e){var t=0,i=e[t++],r=e[t++];-1!=i&&-1!=r||o("Invalid header in flate stream"),8!=(15&i)&&o("Unknown compression method in flate stream"),((i<<8)+r)%31!=0&&o("Bad FCHECK in flate stream"),32&r&&o("FDICT bit set in flate stream"),this.bytes=e,this.bytesPos=2,this.codeSize=0,this.codeBuf=0,Ne.call(this)}}();window.tmp=Ie}();try{module.exports=jsPDF}catch(t){}!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t():"function"==typeof define&&define.amd?define("promise",t):t()}(0,(function(){"use strict";function e(){}function t(e){if(!(this instanceof t))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],s(e,this)}function i(e,i){for(;3===e._state;)e=e._value;0!==e._state?(e._handled=!0,t._immediateFn((function(){var t=1===e._state?i.onFulfilled:i.onRejected;if(null!==t){var o;try{o=t(e._value)}catch(s){return void n(i.promise,s)}r(i.promise,o)}else(1===e._state?r:n)(i.promise,e._value)}))):e._deferreds.push(i)}function r(e,i){try{if(i===e)throw new TypeError("A promise cannot be resolved with itself.");if(i&&("object"==typeof i||"function"==typeof i)){var r=i.then;if(i instanceof t)return e._state=3,e._value=i,void o(e);if("function"==typeof r)return void s(function(e,t){return function(){e.apply(t,arguments)}}(r,i),e)}e._state=1,e._value=i,o(e)}catch(a){n(e,a)}}function n(e,t){e._state=2,e._value=t,o(e)}function o(e){2===e._state&&0===e._deferreds.length&&t._immediateFn((function(){e._handled||t._unhandledRejectionFn(e._value)}));for(var r=0,n=e._deferreds.length;n>r;r++)i(e,e._deferreds[r]);e._deferreds=null}function s(e,t){var i=!1;try{e((function(e){i||(i=!0,r(t,e))}),(function(e){i||(i=!0,n(t,e))}))}catch(o){if(i)return;i=!0,n(t,o)}}var a=function(e){var t=this.constructor;return this.then((function(i){return t.resolve(e()).then((function(){return i}))}),(function(i){return t.resolve(e()).then((function(){return t.reject(i)}))}))},l=setTimeout;t.prototype.catch=function(e){return this.then(null,e)},t.prototype.then=function(t,r){var n=new this.constructor(e);return i(this,new function(e,t,i){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=i}(t,r,n)),n},t.prototype.finally=a,t.all=function(e){return new t((function(t,i){function r(e,s){try{if(s&&("object"==typeof s||"function"==typeof s)){var a=s.then;if("function"==typeof a)return void a.call(s,(function(t){r(e,t)}),i)}n[e]=s,0==--o&&t(n)}catch(l){i(l)}}if(!e||void 0===e.length)throw new TypeError("Promise.all accepts an array");var n=Array.prototype.slice.call(e);if(0===n.length)return t([]);for(var o=n.length,s=0;n.length>s;s++)r(s,n[s])}))},t.resolve=function(e){return e&&"object"==typeof e&&e.constructor===t?e:new t((function(t){t(e)}))},t.reject=function(e){return new t((function(t,i){i(e)}))},t.race=function(e){return new t((function(t,i){for(var r=0,n=e.length;n>r;r++)e[r].then(t,i)}))},t._immediateFn="function"==typeof setImmediate&&function(e){setImmediate(e)}||function(e){l(e,0)},t._unhandledRejectionFn=function(e){void 0!==console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)};var c=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw Error("unable to locate global object")}();c.Promise?c.Promise.prototype.finally||(c.Promise.prototype.finally=a):c.Promise=t})),function(e,t){e.html2canvas=t(),"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("html2canvas",[],t):"object"==typeof exports?exports.html2canvas=t():e.html2canvas=t()}(window,(function(){return function(e){var t={};function i(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,i),n.l=!0,n.exports}return i.m=e,i.c=t,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(r,n,(function(t){return e[t]}).bind(null,n));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=5)}([function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(1);Object.defineProperty(t,"toCodePoints",{enumerable:!0,get:function(){return r.toCodePoints}}),Object.defineProperty(t,"fromCodePoint",{enumerable:!0,get:function(){return r.fromCodePoint}});var n=i(2);Object.defineProperty(t,"LineBreaker",{enumerable:!0,get:function(){return n.LineBreaker}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toCodePoints=function(e){for(var t=[],i=0,r=e.length;i<r;){var n=e.charCodeAt(i++);if(n>=55296&&n<=56319&&i<r){var o=e.charCodeAt(i++);56320==(64512&o)?t.push(((1023&n)<<10)+(1023&o)+65536):(t.push(n),i--)}else t.push(n)}return t},t.fromCodePoint=function(){if(String.fromCodePoint)return String.fromCodePoint.apply(String,arguments);var e=arguments.length;if(!e)return"";for(var t=[],i=-1,r="";++i<e;){var n=arguments.length<=i?void 0:arguments[i];n<=65535?t.push(n):t.push(55296+((n-=65536)>>10),n%1024+56320),(i+1===e||t.length>16384)&&(r+=String.fromCharCode.apply(String,t),t.length=0)}return r};for(var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n="undefined"==typeof Uint8Array?[]:new Uint8Array(256),o=0;o<r.length;o++)n[r.charCodeAt(o)]=o;t.decode=function(e){var t=.75*e.length,i=e.length,r=void 0,o=0,s=void 0,a=void 0,l=void 0,c=void 0;"="===e[e.length-1]&&(t--,"="===e[e.length-2]&&t--);var u="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array&&void 0!==Uint8Array.prototype.slice?new ArrayBuffer(t):new Array(t),h=Array.isArray(u)?u:new Uint8Array(u);for(r=0;r<i;r+=4)s=n[e.charCodeAt(r)],a=n[e.charCodeAt(r+1)],l=n[e.charCodeAt(r+2)],c=n[e.charCodeAt(r+3)],h[o++]=s<<2|a>>4,h[o++]=(15&a)<<4|l>>2,h[o++]=(3&l)<<6|63&c;return u},t.polyUint16Array=function(e){for(var t=e.length,i=[],r=0;r<t;r+=2)i.push(e[r+1]<<8|e[r]);return i},t.polyUint32Array=function(e){for(var t=e.length,i=[],r=0;r<t;r+=4)i.push(e[r+3]<<24|e[r+2]<<16|e[r+1]<<8|e[r]);return i}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LineBreaker=t.inlineBreakOpportunities=t.lineBreakAtIndex=t.codePointsToCharacterClasses=t.UnicodeTrie=t.BREAK_ALLOWED=t.BREAK_NOT_ALLOWED=t.BREAK_MANDATORY=t.classes=t.LETTER_NUMBER_MODIFIER=void 0;var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),n=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var i=[],r=!0,n=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(i.push(s.value),!t||i.length!==t);r=!0);}catch(e){n=!0,o=e}finally{try{!r&&a.return&&a.return()}finally{if(n)throw o}}return i}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=i(3),s=function(e){return e&&e.__esModule?e:{default:e}}(i(4)),a=i(1),l=t.LETTER_NUMBER_MODIFIER=50,c=10,u=13,h=15,d=17,A=18,p=19,f=20,g=21,m=22,w=24,y=25,v=26,_=27,b=28,C=30,E=32,S=33,L=34,T=35,B=37,N=38,I=39,F=40,O=42,x=(t.classes={BK:1,CR:2,LF:3,CM:4,NL:5,SG:6,WJ:7,ZW:8,GL:9,SP:c,ZWJ:11,B2:12,BA:u,BB:14,HY:h,CB:16,CL:d,CP:A,EX:p,IN:f,NS:g,OP:m,QU:23,IS:w,NU:y,PO:v,PR:_,SY:b,AI:29,AL:C,CJ:31,EB:E,EM:S,H2:L,H3:T,HL:36,ID:B,JL:N,JV:I,JT:F,RI:41,SA:O,XX:43},t.BREAK_MANDATORY="!"),D=t.BREAK_NOT_ALLOWED="",R=t.BREAK_ALLOWED="",U=t.UnicodeTrie=(0,o.createTrieFromBase64)(s.default),M=[C,36],P=[1,2,3,5],H=[c,8],Q=[_,v],k=P.concat(H),z=[N,I,F,L,T],V=[h,u],G=t.codePointsToCharacterClasses=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"strict",i=[],r=[],n=[];return e.forEach((function(e,o){var s=U.get(e);if(s>l?(n.push(!0),s-=l):n.push(!1),-1!==["normal","auto","loose"].indexOf(t)&&-1!==[8208,8211,12316,12448].indexOf(e))return r.push(o),i.push(16);if(4===s||11===s){if(0===o)return r.push(o),i.push(C);var a=i[o-1];return-1===k.indexOf(a)?(r.push(r[o-1]),i.push(a)):(r.push(o),i.push(C))}return r.push(o),31===s?i.push("strict"===t?g:B):s===O||29===s?i.push(C):43===s?i.push(e>=131072&&e<=196605||e>=196608&&e<=262141?B:C):void i.push(s)})),[r,i,n]},j=function(e,t,i,r){var n=r[i];if(Array.isArray(e)?-1!==e.indexOf(n):e===n)for(var o=i;o<=r.length;){var s=r[++o];if(s===t)return!0;if(s!==c)break}if(n===c)for(var a=i;a>0;){var l=r[--a];if(Array.isArray(e)?-1!==e.indexOf(l):e===l)for(var u=i;u<=r.length;){var h=r[++u];if(h===t)return!0;if(h!==c)break}if(l!==c)break}return!1},W=function(e,t){for(var i=e;i>=0;){var r=t[i];if(r!==c)return r;i--}return 0},q=function(e,t,i,r,n){if(0===i[r])return D;var o=r-1;if(Array.isArray(n)&&!0===n[o])return D;var s=o-1,a=o+1,l=t[o],C=s>=0?t[s]:0,O=t[a];if(2===l&&3===O)return D;if(-1!==P.indexOf(l))return x;if(-1!==P.indexOf(O))return D;if(-1!==H.indexOf(O))return D;if(8===W(o,t))return R;if(11===U.get(e[o])&&(O===B||O===E||O===S))return D;if(7===l||7===O)return D;if(9===l)return D;if(-1===[c,u,h].indexOf(l)&&9===O)return D;if(-1!==[d,A,p,w,b].indexOf(O))return D;if(W(o,t)===m)return D;if(j(23,m,o,t))return D;if(j([d,A],g,o,t))return D;if(j(12,12,o,t))return D;if(l===c)return R;if(23===l||23===O)return D;if(16===O||16===l)return R;if(-1!==[u,h,g].indexOf(O)||14===l)return D;if(36===C&&-1!==V.indexOf(l))return D;if(l===b&&36===O)return D;if(O===f&&-1!==M.concat(f,p,y,B,E,S).indexOf(l))return D;if(-1!==M.indexOf(O)&&l===y||-1!==M.indexOf(l)&&O===y)return D;if(l===_&&-1!==[B,E,S].indexOf(O)||-1!==[B,E,S].indexOf(l)&&O===v)return D;if(-1!==M.indexOf(l)&&-1!==Q.indexOf(O)||-1!==Q.indexOf(l)&&-1!==M.indexOf(O))return D;if(-1!==[_,v].indexOf(l)&&(O===y||-1!==[m,h].indexOf(O)&&t[a+1]===y)||-1!==[m,h].indexOf(l)&&O===y||l===y&&-1!==[y,b,w].indexOf(O))return D;if(-1!==[y,b,w,d,A].indexOf(O))for(var k=o;k>=0;){var G=t[k];if(G===y)return D;if(-1===[b,w].indexOf(G))break;k--}if(-1!==[_,v].indexOf(O))for(var q=-1!==[d,A].indexOf(l)?s:o;q>=0;){var K=t[q];if(K===y)return D;if(-1===[b,w].indexOf(K))break;q--}if(N===l&&-1!==[N,I,L,T].indexOf(O)||-1!==[I,L].indexOf(l)&&-1!==[I,F].indexOf(O)||-1!==[F,T].indexOf(l)&&O===F)return D;if(-1!==z.indexOf(l)&&-1!==[f,v].indexOf(O)||-1!==z.indexOf(O)&&l===_)return D;if(-1!==M.indexOf(l)&&-1!==M.indexOf(O))return D;if(l===w&&-1!==M.indexOf(O))return D;if(-1!==M.concat(y).indexOf(l)&&O===m||-1!==M.concat(y).indexOf(O)&&l===A)return D;if(41===l&&41===O){for(var X=i[o],J=1;X>0&&41===t[--X];)J++;if(J%2!=0)return D}return l===E&&O===S?D:R},K=(t.lineBreakAtIndex=function(e,t){if(0===t)return D;if(t>=e.length)return x;var i=G(e),r=n(i,2);return q(e,r[1],r[0],t)},function(e,t){t||(t={lineBreak:"normal",wordBreak:"normal"});var i=G(e,t.lineBreak),r=n(i,3),o=r[0],s=r[1],a=r[2];return"break-all"!==t.wordBreak&&"break-word"!==t.wordBreak||(s=s.map((function(e){return-1!==[y,C,O].indexOf(e)?B:e}))),[o,s,"keep-all"===t.wordBreak?a.map((function(t,i){return t&&e[i]>=19968&&e[i]<=40959})):null]}),X=(t.inlineBreakOpportunities=function(e,t){var i=(0,a.toCodePoints)(e),r=D,o=K(i,t),s=n(o,3),l=s[0],c=s[1],u=s[2];return i.forEach((function(e,t){r+=(0,a.fromCodePoint)(e)+(t>=i.length-1?x:q(i,c,l,t+1,u))})),r},function(){function e(t,i,r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._codePoints=t,this.required=i===x,this.start=r,this.end=n}return r(e,[{key:"slice",value:function(){return a.fromCodePoint.apply(void 0,function(e){if(Array.isArray(e)){for(var t=0,i=Array(e.length);t<e.length;t++)i[t]=e[t];return i}return Array.from(e)}(this._codePoints.slice(this.start,this.end)))}}]),e}());t.LineBreaker=function(e,t){var i=(0,a.toCodePoints)(e),r=K(i,t),o=n(r,3),s=o[0],l=o[1],c=o[2],u=i.length,h=0,d=0;return{next:function(){if(d>=u)return{done:!0};for(var e=D;d<u&&(e=q(i,l,s,++d,c))===D;);if(e!==D||d===u){var t=new X(i,e,h,d);return h=d,{value:t,done:!1}}return{done:!0}}}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Trie=t.createTrieFromBase64=t.UTRIE2_INDEX_2_MASK=t.UTRIE2_INDEX_2_BLOCK_LENGTH=t.UTRIE2_OMITTED_BMP_INDEX_1_LENGTH=t.UTRIE2_INDEX_1_OFFSET=t.UTRIE2_UTF8_2B_INDEX_2_LENGTH=t.UTRIE2_UTF8_2B_INDEX_2_OFFSET=t.UTRIE2_INDEX_2_BMP_LENGTH=t.UTRIE2_LSCP_INDEX_2_LENGTH=t.UTRIE2_DATA_MASK=t.UTRIE2_DATA_BLOCK_LENGTH=t.UTRIE2_LSCP_INDEX_2_OFFSET=t.UTRIE2_SHIFT_1_2=t.UTRIE2_INDEX_SHIFT=t.UTRIE2_SHIFT_1=t.UTRIE2_SHIFT_2=void 0;var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),n=i(1),o=t.UTRIE2_SHIFT_2=5,s=t.UTRIE2_SHIFT_1=11,a=t.UTRIE2_INDEX_SHIFT=2,l=t.UTRIE2_SHIFT_1_2=s-o,c=t.UTRIE2_LSCP_INDEX_2_OFFSET=65536>>o,u=t.UTRIE2_DATA_BLOCK_LENGTH=1<<o,h=t.UTRIE2_DATA_MASK=u-1,d=t.UTRIE2_LSCP_INDEX_2_LENGTH=1024>>o,A=t.UTRIE2_INDEX_2_BMP_LENGTH=c+d,p=t.UTRIE2_UTF8_2B_INDEX_2_OFFSET=A,f=t.UTRIE2_UTF8_2B_INDEX_2_LENGTH=32,g=t.UTRIE2_INDEX_1_OFFSET=p+f,m=t.UTRIE2_OMITTED_BMP_INDEX_1_LENGTH=65536>>s,w=t.UTRIE2_INDEX_2_BLOCK_LENGTH=1<<l,y=t.UTRIE2_INDEX_2_MASK=w-1,v=(t.createTrieFromBase64=function(e){var t=(0,n.decode)(e),i=Array.isArray(t)?(0,n.polyUint32Array)(t):new Uint32Array(t),r=Array.isArray(t)?(0,n.polyUint16Array)(t):new Uint16Array(t),o=r.slice(12,i[4]/2),s=2===i[5]?r.slice((24+i[4])/2):i.slice(Math.ceil((24+i[4])/4));return new v(i[0],i[1],i[2],i[3],o,s)},t.Trie=function(){function e(t,i,r,n,o,s){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.initialValue=t,this.errorValue=i,this.highStart=r,this.highValueIndex=n,this.index=o,this.data=s}return r(e,[{key:"get",value:function(e){var t=void 0;if(e>=0){if(e<55296||e>56319&&e<=65535)return t=((t=this.index[e>>o])<<a)+(e&h),this.data[t];if(e<=65535)return t=((t=this.index[c+(e-55296>>o)])<<a)+(e&h),this.data[t];if(e<this.highStart)return t=this.index[t=g-m+(e>>s)],t=((t=this.index[t+=e>>o&y])<<a)+(e&h),this.data[t];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue}}]),e}())},function(e,t,i){"use strict";e.exports="KwAAAAAAAAAACA4AIDoAAPAfAAACAAAAAAAIABAAGABAAEgAUABYAF4AZgBeAGYAYABoAHAAeABeAGYAfACEAIAAiACQAJgAoACoAK0AtQC9AMUAXgBmAF4AZgBeAGYAzQDVAF4AZgDRANkA3gDmAOwA9AD8AAQBDAEUARoBIgGAAIgAJwEvATcBPwFFAU0BTAFUAVwBZAFsAXMBewGDATAAiwGTAZsBogGkAawBtAG8AcIBygHSAdoB4AHoAfAB+AH+AQYCDgIWAv4BHgImAi4CNgI+AkUCTQJTAlsCYwJrAnECeQKBAk0CiQKRApkCoQKoArACuALAAsQCzAIwANQC3ALkAjAA7AL0AvwCAQMJAxADGAMwACADJgMuAzYDPgOAAEYDSgNSA1IDUgNaA1oDYANiA2IDgACAAGoDgAByA3YDfgOAAIQDgACKA5IDmgOAAIAAogOqA4AAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAK8DtwOAAIAAvwPHA88D1wPfAyAD5wPsA/QD/AOAAIAABAQMBBIEgAAWBB4EJgQuBDMEIAM7BEEEXgBJBCADUQRZBGEEaQQwADAAcQQ+AXkEgQSJBJEEgACYBIAAoASoBK8EtwQwAL8ExQSAAIAAgACAAIAAgACgAM0EXgBeAF4AXgBeAF4AXgBeANUEXgDZBOEEXgDpBPEE+QQBBQkFEQUZBSEFKQUxBTUFPQVFBUwFVAVcBV4AYwVeAGsFcwV7BYMFiwWSBV4AmgWgBacFXgBeAF4AXgBeAKsFXgCyBbEFugW7BcIFwgXIBcIFwgXQBdQF3AXkBesF8wX7BQMGCwYTBhsGIwYrBjMGOwZeAD8GRwZNBl4AVAZbBl4AXgBeAF4AXgBeAF4AXgBeAF4AXgBeAGMGXgBqBnEGXgBeAF4AXgBeAF4AXgBeAF4AXgB5BoAG4wSGBo4GkwaAAIADHgR5AF4AXgBeAJsGgABGA4AAowarBrMGswagALsGwwbLBjAA0wbaBtoG3QbaBtoG2gbaBtoG2gblBusG8wb7BgMHCwcTBxsHCwcjBysHMAc1BzUHOgdCB9oGSgdSB1oHYAfaBloHaAfaBlIH2gbaBtoG2gbaBtoG2gbaBjUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHbQdeAF4ANQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQd1B30HNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1B4MH2gaKB68EgACAAIAAgACAAIAAgACAAI8HlwdeAJ8HpweAAIAArwe3B14AXgC/B8UHygcwANAH2AfgB4AA6AfwBz4B+AcACFwBCAgPCBcIogEYAR8IJwiAAC8INwg/CCADRwhPCFcIXwhnCEoDGgSAAIAAgABvCHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIhAiLCI4IMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAANQc1BzUHNQc1BzUHNQc1BzUHNQc1B54INQc1B6II2gaqCLIIugiAAIAAvgjGCIAAgACAAIAAgACAAIAAgACAAIAAywiHAYAA0wiAANkI3QjlCO0I9Aj8CIAAgACAAAIJCgkSCRoJIgknCTYHLwk3CZYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiAAIAAAAFAAXgBeAGAAcABeAHwAQACQAKAArQC9AJ4AXgBeAE0A3gBRAN4A7AD8AMwBGgEAAKcBNwEFAUwBXAF4QkhCmEKnArcCgAHHAsABz4LAAcABwAHAAd+C6ABoAG+C/4LAAcABwAHAAc+DF4MAAcAB54M3gweDV4Nng3eDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEeDqABVg6WDqABoQ6gAaABoAHXDvcONw/3DvcO9w73DvcO9w73DvcO9w73DvcO9w73DvcO9w73DvcO9w73DvcO9w73DvcO9w73DvcO9w73DvcO9w73DncPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB7cPPwlGCU4JMACAAIAAgABWCV4JYQmAAGkJcAl4CXwJgAkwADAAMAAwAIgJgACLCZMJgACZCZ8JowmrCYAAswkwAF4AXgB8AIAAuwkABMMJyQmAAM4JgADVCTAAMAAwADAAgACAAIAAgACAAIAAgACAAIAAqwYWBNkIMAAwADAAMADdCeAJ6AnuCR4E9gkwAP4JBQoNCjAAMACAABUK0wiAAB0KJAosCjQKgAAwADwKQwqAAEsKvQmdCVMKWwowADAAgACAALcEMACAAGMKgABrCjAAMAAwADAAMAAwADAAMAAwADAAMAAeBDAAMAAwADAAMAAwADAAMAAwADAAMAAwAIkEPQFzCnoKiQSCCooKkAqJBJgKoAqkCokEGAGsCrQKvArBCjAAMADJCtEKFQHZCuEK/gHpCvEKMAAwADAAMACAAIwE+QowAIAAPwEBCzAAMAAwADAAMACAAAkLEQswAIAAPwEZCyELgAAOCCkLMAAxCzkLMAAwADAAMAAwADAAXgBeAEELMAAwADAAMAAwADAAMAAwAEkLTQtVC4AAXAtkC4AAiQkwADAAMAAwADAAMAAwADAAbAtxC3kLgAuFC4sLMAAwAJMLlwufCzAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAApwswADAAMACAAIAAgACvC4AAgACAAIAAgACAALcLMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAvwuAAMcLgACAAIAAgACAAIAAyguAAIAAgACAAIAA0QswADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAANkLgACAAIAA4AswADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACJCR4E6AswADAAhwHwC4AA+AsADAgMEAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMACAAIAAGAwdDCUMMAAwAC0MNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQw1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHPQwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADUHNQc1BzUHNQc1BzUHNQc2BzAAMAA5DDUHNQc1BzUHNQc1BzUHNQc1BzUHNQdFDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAgACAAIAATQxSDFoMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAF4AXgBeAF4AXgBeAF4AYgxeAGoMXgBxDHkMfwxeAIUMXgBeAI0MMAAwADAAMAAwAF4AXgCVDJ0MMAAwADAAMABeAF4ApQxeAKsMswy7DF4Awgy9DMoMXgBeAF4AXgBeAF4AXgBeAF4AXgDRDNkMeQBqCeAM3Ax8AOYM7Az0DPgMXgBeAF4AXgBeAF4AXgBeAF4AXgBeAF4AXgBeAF4AXgCgAAANoAAHDQ4NFg0wADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAeDSYNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIAAgACAAIAAgACAAC4NMABeAF4ANg0wADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAD4NRg1ODVYNXg1mDTAAbQ0wADAAMAAwADAAMAAwADAA2gbaBtoG2gbaBtoG2gbaBnUNeg3CBYANwgWFDdoGjA3aBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gaUDZwNpA2oDdoG2gawDbcNvw3HDdoG2gbPDdYN3A3fDeYN2gbsDfMN2gbaBvoN/g3aBgYODg7aBl4AXgBeABYOXgBeACUG2gYeDl4AJA5eACwO2w3aBtoGMQ45DtoG2gbaBtoGQQ7aBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gZJDjUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1B1EO2gY1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQdZDjUHNQc1BzUHNQc1B2EONQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHaA41BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1B3AO2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gY1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1B2EO2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gZJDtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBkkOeA6gAKAAoAAwADAAMAAwAKAAoACgAKAAoACgAKAAgA4wADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAD//wQABAAEAAQABAAEAAQABAAEAA0AAwABAAEAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAKABMAFwAeABsAGgAeABcAFgASAB4AGwAYAA8AGAAcAEsASwBLAEsASwBLAEsASwBLAEsAGAAYAB4AHgAeABMAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAFgAbABIAHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYADQARAB4ABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkAFgAaABsAGwAbAB4AHQAdAB4ATwAXAB4ADQAeAB4AGgAbAE8ATwAOAFAAHQAdAB0ATwBPABcATwBPAE8AFgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwArAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAAQABAANAA0ASwBLAEsASwBLAEsASwBLAEsASwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUAArACsABABQAAQABAAEAAQABAAEAAQAKwArAAQABAArACsABAAEAAQAUAArACsAKwArACsAKwArACsABAArACsAKwArAFAAUAArAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAGgAaAFAAUABQAFAAUABMAB4AGwBQAB4AKwArACsABAAEAAQAKwBQAFAAUABQAFAAUAArACsAKwArAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUAArAFAAUAArACsABAArAAQABAAEAAQABAArACsAKwArAAQABAArACsABAAEAAQAKwArACsABAArACsAKwArACsAKwArAFAAUABQAFAAKwBQACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwAEAAQAUABQAFAABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUAArACsABABQAAQABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQAKwArAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwAeABsAKwArACsAKwArACsAKwBQAAQABAAEAAQABAAEACsABAAEAAQAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwArAAQABAArACsABAAEAAQAKwArACsAKwArACsAKwArAAQABAArACsAKwArAFAAUAArAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwAeAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwAEAFAAKwBQAFAAUABQAFAAUAArACsAKwBQAFAAUAArAFAAUABQAFAAKwArACsAUABQACsAUAArAFAAUAArACsAKwBQAFAAKwArACsAUABQAFAAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQAKwArACsABAAEAAQAKwAEAAQABAAEACsAKwBQACsAKwArACsAKwArAAQAKwArACsAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAB4AHgAeAB4AHgAeABsAHgArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABAArACsAKwArACsAKwArAAQABAArAFAAUABQACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAB4AUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABAArACsAKwArACsAKwArAAQABAArACsAKwArACsAKwArAFAAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwArAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAKwBcAFwAKwBcACsAKwBcACsAKwArACsAKwArAFwAXABcAFwAKwBcAFwAXABcAFwAXABcACsAXABcAFwAKwBcACsAXAArACsAXABcACsAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgArACoAKgBcACsAKwBcAFwAXABcAFwAKwBcACsAKgAqACoAKgAqACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAFwAXABcAFwAUAAOAA4ADgAOAB4ADgAOAAkADgAOAA0ACQATABMAEwATABMACQAeABMAHgAeAB4ABAAEAB4AHgAeAB4AHgAeAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUAANAAQAHgAEAB4ABAAWABEAFgARAAQABABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAAQABAAEAAQABAANAAQABABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsADQANAB4AHgAeAB4AHgAeAAQAHgAeAB4AHgAeAB4AKwAeAB4ADgAOAA0ADgAeAB4AHgAeAB4ACQAJACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgAeAB4AHgBcAFwAXABcAFwAXAAqACoAKgAqAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAKgAqACoAKgAqACoAKgBcAFwAXAAqACoAKgAqAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAXAAqAEsASwBLAEsASwBLAEsASwBLAEsAKgAqACoAKgAqACoAUABQAFAAUABQAFAAKwBQACsAKwArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQACsAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwAEAAQABAAeAA0AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAEQArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAADQANAA0AUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAA0ADQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQACsABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoADQANABUAXAANAB4ADQAbAFwAKgArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAB4AHgATABMADQANAA4AHgATABMAHgAEAAQABAAJACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAUABQAFAAUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwAeACsAKwArABMAEwBLAEsASwBLAEsASwBLAEsASwBLAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwBcAFwAXABcAFwAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcACsAKwArACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwAeAB4AXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgArACsABABLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKgAqACoAKgAqACoAKgBcACoAKgAqACoAKgAqACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAUABQAFAAUABQAFAAUAArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4ADQANAA0ADQAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAHgAeAB4AHgBQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwANAA0ADQANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwBQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsABAAEAAQAHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAABABQAFAAUABQAAQABAAEAFAAUAAEAAQABAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAKwBQACsAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAKwArAB4AHgAeAB4AHgAeACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAUABQAFAAKwAeAB4AHgAeAB4AHgAeAA4AHgArAA0ADQANAA0ADQANAA0ACQANAA0ADQAIAAQACwAEAAQADQAJAA0ADQAMAB0AHQAeABcAFwAWABcAFwAXABYAFwAdAB0AHgAeABQAFAAUAA0AAQABAAQABAAEAAQABAAJABoAGgAaABoAGgAaABoAGgAeABcAFwAdABUAFQAeAB4AHgAeAB4AHgAYABYAEQAVABUAFQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgANAB4ADQANAA0ADQAeAA0ADQANAAcAHgAeAB4AHgArAAQABAAEAAQABAAEAAQABAAEAAQAUABQACsAKwBPAFAAUABQAFAAUAAeAB4AHgAWABEATwBQAE8ATwBPAE8AUABQAFAAUABQAB4AHgAeABYAEQArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAGwAbABsAGwAbABsAGwAaABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAaABsAGwAbABsAGgAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgBQABoAHgAdAB4AUAAeABoAHgAeAB4AHgAeAB4AHgAeAB4ATwAeAFAAGwAeAB4AUABQAFAAUABQAB4AHgAeAB0AHQAeAFAAHgBQAB4AUAAeAFAATwBQAFAAHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AUABQAFAAUABPAE8AUABQAFAAUABQAE8AUABQAE8AUABPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAE8ATwBPAE8ATwBPAE8ATwBPAE8AUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAATwAeAB4AKwArACsAKwAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB0AHQAeAB4AHgAdAB0AHgAeAB0AHgAeAB4AHQAeAB0AGwAbAB4AHQAeAB4AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB0AHgAdAB4AHQAdAB0AHQAdAB0AHgAdAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAdAB0AHQAdAB4AHgAdAB0AHgAeAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABQAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAlACUAHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBQAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAeAB4AHgAeAB0AHQAeAB4AHgAeAB0AHQAdAB4AHgAdAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB0AHQAeAB4AHQAeAB4AHgAeAB0AHQAeAB4AHgAeACUAJQAdAB0AJQAeACUAJQAlACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAHgAeAB4AHgAdAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHQAdAB0AHgAdACUAHQAdAB4AHQAdAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHQAdAB0AHQAlAB4AJQAlACUAHQAlACUAHQAdAB0AJQAlAB0AHQAlAB0AHQAlACUAJQAeAB0AHgAeAB4AHgAdAB0AJQAdAB0AHQAdAB0AHQAlACUAJQAlACUAHQAlACUAIAAlAB0AHQAlACUAJQAlACUAJQAlACUAHgAeAB4AJQAlACAAIAAgACAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeABcAFwAXABcAFwAXAB4AEwATACUAHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwArACUAJQBXAFcAVwBXACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAKwArACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAE8ATwBPAE8ATwBPAE8ATwAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeACsAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUAArACsAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQBQAFAAUABQACsAKwArACsAUABQAFAAUABQAFAAUABQAA0AUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQACsAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgBQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAABAAEAAQAKwAEAAQAKwArACsAKwArAAQABAAEAAQAUABQAFAAUAArAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsABAAEAAQAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsADQANAA0ADQANAA0ADQANAB4AKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AUABQAFAAUABQAFAAUABQAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAUABQAFAAUABQAA0ADQANAA0ADQANABQAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwANAA0ADQANAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAeAAQABAAEAB4AKwArAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLACsADQArAB4AKwArAAQABAAEAAQAUABQAB4AUAArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwAEAAQABAAEAAQABAAEAAQABAAOAA0ADQATABMAHgAeAB4ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0AUABQAFAAUAAEAAQAKwArAAQADQANAB4AUAArACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXABcAA0ADQANACoASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUAArACsAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANACsADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEcARwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQACsAKwAeAAQABAANAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAEAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUAArACsAUAArACsAUABQACsAKwBQAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AKwArAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAeAB4ADQANAA0ADQAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAArAAQABAArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAEAAQABAAEAAQABAAEACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAFgAWAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAKwBQACsAKwArACsAKwArAFAAKwArACsAKwBQACsAUAArAFAAKwBQAFAAUAArAFAAUAArAFAAKwArAFAAKwBQACsAUAArAFAAKwBQACsAUABQACsAUAArACsAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAUABQAFAAUAArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUAArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAlACUAJQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeACUAJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeACUAJQAlACUAJQAeACUAJQAlACUAJQAgACAAIAAlACUAIAAlACUAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAIQAhACEAIQAhACUAJQAgACAAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAIAAgACAAIAAlACUAJQAlACAAJQAgACAAIAAgACAAIAAgACAAIAAlACUAJQAgACUAJQAlACUAIAAgACAAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeACUAHgAlAB4AJQAlACUAJQAlACAAJQAlACUAJQAeACUAHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAIAAgACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAIAAlACUAJQAlACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAIAAgACAAJQAlACUAIAAgACAAIAAgAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFwAXABcAFQAVABUAHgAeAB4AHgAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAIAAgACAAJQAlACUAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAlACAAIAAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsA"},function(e,t,i){"use strict";i.r(t);var r=/^#([a-f0-9]{3})$/i,n=function(e){var t=e.match(r);return!!t&&[parseInt(t[1][0]+t[1][0],16),parseInt(t[1][1]+t[1][1],16),parseInt(t[1][2]+t[1][2],16),null]},o=/^#([a-f0-9]{6})$/i,s=function(e){var t=e.match(o);return!!t&&[parseInt(t[1].substring(0,2),16),parseInt(t[1].substring(2,4),16),parseInt(t[1].substring(4,6),16),null]},a=/^rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)$/,l=/^rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d?\.?\d+)\s*\)$/,c=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var i=[],r=!0,n=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(i.push(s.value),4!==i.length);r=!0);}catch(e){n=!0,o=e}finally{try{r||null==a.return||a.return()}finally{if(n)throw o}}return i}(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}(Array.isArray(t)?function(e){return[Math.min(e[0],255),Math.min(e[1],255),Math.min(e[2],255),e.length>3?e[3]:null]}(t):n(t)||function(e){var t=e.match(a);return!!t&&[Number(t[1]),Number(t[2]),Number(t[3]),null]}(t)||function(e){var t=e.match(l);return!!(t&&t.length>4)&&[Number(t[1]),Number(t[2]),Number(t[3]),Number(t[4])]}(t)||function(e){return u[e.toLowerCase()]||!1}(t)||s(t)||[0,0,0,null]),r=i[1],o=i[2],c=i[3];this.r=i[0],this.g=r,this.b=o,this.a=c}return function(e,t,i){t&&function(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(e.prototype,t)}(e,[{key:"isTransparent",value:function(){return 0===this.a}},{key:"toString",value:function(){return null!==this.a&&1!==this.a?"rgba(".concat(this.r,",").concat(this.g,",").concat(this.b,",").concat(this.a,")"):"rgb(".concat(this.r,",").concat(this.g,",").concat(this.b,")")}}]),e}(),u={transparent:[0,0,0,0],aliceblue:[240,248,255,null],antiquewhite:[250,235,215,null],aqua:[0,255,255,null],aquamarine:[127,255,212,null],azure:[240,255,255,null],beige:[245,245,220,null],bisque:[255,228,196,null],black:[0,0,0,null],blanchedalmond:[255,235,205,null],blue:[0,0,255,null],blueviolet:[138,43,226,null],brown:[165,42,42,null],burlywood:[222,184,135,null],cadetblue:[95,158,160,null],chartreuse:[127,255,0,null],chocolate:[210,105,30,null],coral:[255,127,80,null],cornflowerblue:[100,149,237,null],cornsilk:[255,248,220,null],crimson:[220,20,60,null],cyan:[0,255,255,null],darkblue:[0,0,139,null],darkcyan:[0,139,139,null],darkgoldenrod:[184,134,11,null],darkgray:[169,169,169,null],darkgreen:[0,100,0,null],darkgrey:[169,169,169,null],darkkhaki:[189,183,107,null],darkmagenta:[139,0,139,null],darkolivegreen:[85,107,47,null],darkorange:[255,140,0,null],darkorchid:[153,50,204,null],darkred:[139,0,0,null],darksalmon:[233,150,122,null],darkseagreen:[143,188,143,null],darkslateblue:[72,61,139,null],darkslategray:[47,79,79,null],darkslategrey:[47,79,79,null],darkturquoise:[0,206,209,null],darkviolet:[148,0,211,null],deeppink:[255,20,147,null],deepskyblue:[0,191,255,null],dimgray:[105,105,105,null],dimgrey:[105,105,105,null],dodgerblue:[30,144,255,null],firebrick:[178,34,34,null],floralwhite:[255,250,240,null],forestgreen:[34,139,34,null],fuchsia:[255,0,255,null],gainsboro:[220,220,220,null],ghostwhite:[248,248,255,null],gold:[255,215,0,null],goldenrod:[218,165,32,null],gray:[128,128,128,null],green:[0,128,0,null],greenyellow:[173,255,47,null],grey:[128,128,128,null],honeydew:[240,255,240,null],hotpink:[255,105,180,null],indianred:[205,92,92,null],indigo:[75,0,130,null],ivory:[255,255,240,null],khaki:[240,230,140,null],lavender:[230,230,250,null],lavenderblush:[255,240,245,null],lawngreen:[124,252,0,null],lemonchiffon:[255,250,205,null],lightblue:[173,216,230,null],lightcoral:[240,128,128,null],lightcyan:[224,255,255,null],lightgoldenrodyellow:[250,250,210,null],lightgray:[211,211,211,null],lightgreen:[144,238,144,null],lightgrey:[211,211,211,null],lightpink:[255,182,193,null],lightsalmon:[255,160,122,null],lightseagreen:[32,178,170,null],lightskyblue:[135,206,250,null],lightslategray:[119,136,153,null],lightslategrey:[119,136,153,null],lightsteelblue:[176,196,222,null],lightyellow:[255,255,224,null],lime:[0,255,0,null],limegreen:[50,205,50,null],linen:[250,240,230,null],magenta:[255,0,255,null],maroon:[128,0,0,null],mediumaquamarine:[102,205,170,null],mediumblue:[0,0,205,null],mediumorchid:[186,85,211,null],mediumpurple:[147,112,219,null],mediumseagreen:[60,179,113,null],mediumslateblue:[123,104,238,null],mediumspringgreen:[0,250,154,null],mediumturquoise:[72,209,204,null],mediumvioletred:[199,21,133,null],midnightblue:[25,25,112,null],mintcream:[245,255,250,null],mistyrose:[255,228,225,null],moccasin:[255,228,181,null],navajowhite:[255,222,173,null],navy:[0,0,128,null],oldlace:[253,245,230,null],olive:[128,128,0,null],olivedrab:[107,142,35,null],orange:[255,165,0,null],orangered:[255,69,0,null],orchid:[218,112,214,null],palegoldenrod:[238,232,170,null],palegreen:[152,251,152,null],paleturquoise:[175,238,238,null],palevioletred:[219,112,147,null],papayawhip:[255,239,213,null],peachpuff:[255,218,185,null],peru:[205,133,63,null],pink:[255,192,203,null],plum:[221,160,221,null],powderblue:[176,224,230,null],purple:[128,0,128,null],rebeccapurple:[102,51,153,null],red:[255,0,0,null],rosybrown:[188,143,143,null],royalblue:[65,105,225,null],saddlebrown:[139,69,19,null],salmon:[250,128,114,null],sandybrown:[244,164,96,null],seagreen:[46,139,87,null],seashell:[255,245,238,null],sienna:[160,82,45,null],silver:[192,192,192,null],skyblue:[135,206,235,null],slateblue:[106,90,205,null],slategray:[112,128,144,null],slategrey:[112,128,144,null],snow:[255,250,250,null],springgreen:[0,255,127,null],steelblue:[70,130,180,null],tan:[210,180,140,null],teal:[0,128,128,null],thistle:[216,191,216,null],tomato:[255,99,71,null],turquoise:[64,224,208,null],violet:[238,130,238,null],wheat:[245,222,179,null],white:[255,255,255,null],whitesmoke:[245,245,245,null],yellow:[255,255,0,null],yellowgreen:[154,205,50,null]},h=new c([0,0,0,0]),d=function(e){switch(e){case"underline":return 1;case"overline":return 2;case"line-through":return 3}return 4},A=function(e){var t=function(e){return"none"===e?null:e.split(" ").map(d)}(e.textDecorationLine?e.textDecorationLine:e.textDecoration);return null===t?null:{textDecorationLine:t,textDecorationColor:e.textDecorationColor?new c(e.textDecorationColor):null,textDecorationStyle:function(e){switch(e){case"double":return 1;case"dotted":return 2;case"dashed":return 3;case"wavy":return 4}return 0}(e.textDecorationStyle)}},p=function(e,t){var i=Math.max.apply(null,e.colorStops.map((function(e){return e.stop}))),r=1/Math.max(1,i);e.colorStops.forEach((function(e){t.addColorStop(Math.floor(Math.max(0,r*e.stop)),e.color.toString())}))},f=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.canvas=t||document.createElement("canvas")}return function(e,t,i){t&&function(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(e.prototype,t)}(e,[{key:"render",value:function(e){this.ctx=this.canvas.getContext("2d"),this.options=e,this.canvas.width=Math.floor(e.width*e.scale),this.canvas.height=Math.floor(e.height*e.scale),this.canvas.style.width="".concat(e.width,"px"),this.canvas.style.height="".concat(e.height,"px"),this.ctx.scale(this.options.scale,this.options.scale),this.ctx.translate(-e.x,-e.y),this.ctx.textBaseline="bottom",e.logger.log("Canvas renderer initialized (".concat(e.width,"x").concat(e.height," at ").concat(e.x,",").concat(e.y,") with scale ").concat(this.options.scale))}},{key:"clip",value:function(e,t){var i=this;e.length&&(this.ctx.save(),e.forEach((function(e){i.path(e),i.ctx.clip()}))),t(),e.length&&this.ctx.restore()}},{key:"drawImage",value:function(e,t,i){this.ctx.drawImage(e,t.left,t.top,t.width,t.height,i.left,i.top,i.width,i.height)}},{key:"drawShape",value:function(e,t){this.path(e),this.ctx.fillStyle=t.toString(),this.ctx.fill()}},{key:"fill",value:function(e){this.ctx.fillStyle=e.toString(),this.ctx.fill()}},{key:"getTarget",value:function(){return this.canvas.getContext("2d").setTransform(1,0,0,1,0,0),Promise.resolve(this.canvas)}},{key:"path",value:function(e){var t=this;this.ctx.beginPath(),Array.isArray(e)?e.forEach((function(e,i){var r=0===e.type?e:e.start;0===i?t.ctx.moveTo(r.x,r.y):t.ctx.lineTo(r.x,r.y),1===e.type&&t.ctx.bezierCurveTo(e.startControl.x,e.startControl.y,e.endControl.x,e.endControl.y,e.end.x,e.end.y)})):this.ctx.arc(e.x+e.radius,e.y+e.radius,e.radius,0,2*Math.PI,!0),this.ctx.closePath()}},{key:"rectangle",value:function(e,t,i,r,n){this.ctx.fillStyle=n.toString(),this.ctx.fillRect(e,t,i,r)}},{key:"renderLinearGradient",value:function(e,t){var i=this.ctx.createLinearGradient(e.left+t.direction.x1,e.top+t.direction.y1,e.left+t.direction.x0,e.top+t.direction.y0);p(t,i),this.ctx.fillStyle=i,this.ctx.fillRect(e.left,e.top,e.width,e.height)}},{key:"renderRadialGradient",value:function(e,t){var i=this,r=e.left+t.center.x,n=e.top+t.center.y,o=this.ctx.createRadialGradient(r,n,0,r,n,t.radius.x);if(o)if(p(t,o),this.ctx.fillStyle=o,t.radius.x!==t.radius.y){var s=e.top+.5*e.height,a=t.radius.y/t.radius.x,l=1/a;this.transform(e.left+.5*e.width,s,[1,0,0,a,0,0],(function(){return i.ctx.fillRect(e.left,l*(e.top-s)+s,e.width,e.height*l)}))}else this.ctx.fillRect(e.left,e.top,e.width,e.height)}},{key:"renderRepeat",value:function(e,t,i,r,n){this.path(e),this.ctx.fillStyle=this.ctx.createPattern(this.resizeImage(t,i),"repeat"),this.ctx.translate(r,n),this.ctx.fill(),this.ctx.translate(-r,-n)}},{key:"renderTextNode",value:function(e,t,i,r,n){var o=this;this.ctx.font=[i.fontStyle,i.fontVariant,i.fontWeight,i.fontSize,i.fontFamily].join(" "),e.forEach((function(e){if(o.ctx.fillStyle=t.toString(),n&&e.text.trim().length?(n.slice(0).reverse().forEach((function(t){o.ctx.shadowColor=t.color.toString(),o.ctx.shadowOffsetX=t.offsetX*o.options.scale,o.ctx.shadowOffsetY=t.offsetY*o.options.scale,o.ctx.shadowBlur=t.blur,o.ctx.fillText(e.text,e.bounds.left,e.bounds.top+e.bounds.height)})),o.ctx.shadowColor="",o.ctx.shadowOffsetX=0,o.ctx.shadowOffsetY=0,o.ctx.shadowBlur=0):o.ctx.fillText(e.text,e.bounds.left,e.bounds.top+e.bounds.height),null!==r){var s=r.textDecorationColor||t;r.textDecorationLine.forEach((function(t){switch(t){case 1:var r=o.options.fontMetrics.getMetrics(i).baseline;o.rectangle(e.bounds.left,Math.round(e.bounds.top+r),e.bounds.width,1,s);break;case 2:o.rectangle(e.bounds.left,Math.round(e.bounds.top),e.bounds.width,1,s);break;case 3:var n=o.options.fontMetrics.getMetrics(i).middle;o.rectangle(e.bounds.left,Math.ceil(e.bounds.top+n),e.bounds.width,1,s)}}))}}))}},{key:"resizeImage",value:function(e,t){if(e.width===t.width&&e.height===t.height)return e;var i=this.canvas.ownerDocument.createElement("canvas");return i.width=t.width,i.height=t.height,i.getContext("2d").drawImage(e,0,0,e.width,e.height,0,0,t.width,t.height),i}},{key:"setOpacity",value:function(e){this.ctx.globalAlpha=e}},{key:"transform",value:function(e,t,i,r){this.ctx.save(),this.ctx.translate(e,t),this.ctx.transform(i[0],i[1],i[2],i[3],i[4],i[5]),this.ctx.translate(-e,-t),r(),this.ctx.restore()}}]),e}(),g=function(){function e(t,i,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.enabled="undefined"!=typeof window&&t,this.start=r||Date.now(),this.id=i}return function(e,t,i){t&&function(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(e.prototype,t)}(e,[{key:"child",value:function(t){return new e(this.enabled,t,this.start)}},{key:"log",value:function(){}},{key:"error",value:function(){if(this.enabled&&window.console&&window.console.error){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];Function.prototype.bind.call(window.console.error,window.console).apply(window.console,[Date.now()-this.start+"ms",this.id?"html2canvas (".concat(this.id,"):"):"html2canvas:"].concat([].slice.call(t,0)))}}}]),e}(),m=function(e,t){return 0!=(e&t)},w=function(e,t){return Math.sqrt(e*e+t*t)},y=function(e,t){for(var i=e.length-1;i>=0;i--){var r=e.item(i);"content"!==r&&t.style.setProperty(r,e.getPropertyValue(r))}return t};function v(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var _=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.type="%"===t.substr(t.length-1)?1:0;var i=parseFloat(t);this.value=isNaN(i)?0:i}return function(e,t,i){t&&v(e.prototype,t),i&&v(e,i)}(e,[{key:"isPercentage",value:function(){return 1===this.type}},{key:"getAbsoluteValue",value:function(e){return this.isPercentage()?e*(this.value/100):this.value}}],[{key:"create",value:function(t){return new e(t)}}]),e}(),b=function(e,t,i){switch(i){case"px":case"%":return new _(t+i);case"em":case"rem":var r=new _(t);return r.value*="em"===i?parseFloat(e.style.font.fontSize):function e(t){var i=t.parent;return i?e(i):parseFloat(t.style.font.fontSize)}(e),r;default:return new _("0")}},C=function e(t,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.width=t,this.height=i},E=function e(t,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.type=0,this.x=t,this.y=i},S=function(e,t,i){return new E(e.x+(t.x-e.x)*i,e.y+(t.y-e.y)*i)},L=function(){function e(t,i,r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.type=1,this.start=t,this.startControl=i,this.endControl=r,this.end=n}return function(e,t,i){t&&function(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(e.prototype,t)}(e,[{key:"subdivide",value:function(t,i){var r=S(this.start,this.startControl,t),n=S(this.startControl,this.endControl,t),o=S(this.endControl,this.end,t),s=S(r,n,t),a=S(n,o,t),l=S(s,a,t);return i?new e(this.start,r,s,l):new e(l,a,o,this.end)}},{key:"reverse",value:function(){return new e(this.end,this.endControl,this.startControl,this.start)}}]),e}(),T=function(){function e(t,i,r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.left=t,this.top=i,this.width=r,this.height=n}return function(e,t,i){i&&function(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(e,i)}(e,0,[{key:"fromClientRect",value:function(t,i,r){return new e(t.left+i,t.top+r,t.width,t.height)}}]),e}(),B=function(e,t,i){return T.fromClientRect(e.getBoundingClientRect(),t,i)},N=function(e){var t=e.body,i=e.documentElement;if(!t||!i)throw new Error("");var r=Math.max(Math.max(t.scrollWidth,i.scrollWidth),Math.max(t.offsetWidth,i.offsetWidth),Math.max(t.clientWidth,i.clientWidth)),n=Math.max(Math.max(t.scrollHeight,i.scrollHeight),Math.max(t.offsetHeight,i.offsetHeight),Math.max(t.clientHeight,i.clientHeight));return new T(0,0,r,n)},I=function(e,t,i,r){var n=[];return n.push(e instanceof L?e.subdivide(.5,!1):e),n.push(i instanceof L?i.subdivide(.5,!0):i),n.push(r instanceof L?r.subdivide(.5,!0).reverse():r),n.push(t instanceof L?t.subdivide(.5,!1).reverse():t),n},F=function(e){return[e.topLeftInner,e.topRightInner,e.bottomRightInner,e.bottomLeftInner]},O=function(e,t,i){var r=i[x.TOP_LEFT][0].getAbsoluteValue(e.width),n=i[x.TOP_LEFT][1].getAbsoluteValue(e.height),o=i[x.TOP_RIGHT][0].getAbsoluteValue(e.width),s=i[x.TOP_RIGHT][1].getAbsoluteValue(e.height),a=i[x.BOTTOM_RIGHT][0].getAbsoluteValue(e.width),l=i[x.BOTTOM_RIGHT][1].getAbsoluteValue(e.height),c=i[x.BOTTOM_LEFT][0].getAbsoluteValue(e.width),u=i[x.BOTTOM_LEFT][1].getAbsoluteValue(e.height),h=[];h.push((r+o)/e.width),h.push((c+a)/e.width),h.push((n+u)/e.height),h.push((s+l)/e.height);var d=Math.max.apply(Math,h);d>1&&(r/=d,n/=d,o/=d,s/=d,a/=d,l/=d,c/=d,u/=d);var A=e.width-o,p=e.height-l,f=e.width-a,g=e.height-u;return{topLeftOuter:r>0||n>0?D(e.left,e.top,r,n,x.TOP_LEFT):new E(e.left,e.top),topLeftInner:r>0||n>0?D(e.left+t[3].borderWidth,e.top+t[0].borderWidth,Math.max(0,r-t[3].borderWidth),Math.max(0,n-t[0].borderWidth),x.TOP_LEFT):new E(e.left+t[3].borderWidth,e.top+t[0].borderWidth),topRightOuter:o>0||s>0?D(e.left+A,e.top,o,s,x.TOP_RIGHT):new E(e.left+e.width,e.top),topRightInner:o>0||s>0?D(e.left+Math.min(A,e.width+t[3].borderWidth),e.top+t[0].borderWidth,A>e.width+t[3].borderWidth?0:o-t[3].borderWidth,s-t[0].borderWidth,x.TOP_RIGHT):new E(e.left+e.width-t[1].borderWidth,e.top+t[0].borderWidth),bottomRightOuter:a>0||l>0?D(e.left+f,e.top+p,a,l,x.BOTTOM_RIGHT):new E(e.left+e.width,e.top+e.height),bottomRightInner:a>0||l>0?D(e.left+Math.min(f,e.width-t[3].borderWidth),e.top+Math.min(p,e.height+t[0].borderWidth),Math.max(0,a-t[1].borderWidth),l-t[2].borderWidth,x.BOTTOM_RIGHT):new E(e.left+e.width-t[1].borderWidth,e.top+e.height-t[2].borderWidth),bottomLeftOuter:c>0||u>0?D(e.left,e.top+g,c,u,x.BOTTOM_LEFT):new E(e.left,e.top+e.height),bottomLeftInner:c>0||u>0?D(e.left+t[3].borderWidth,e.top+g,Math.max(0,c-t[3].borderWidth),u-t[2].borderWidth,x.BOTTOM_LEFT):new E(e.left+t[3].borderWidth,e.top+e.height-t[2].borderWidth)}},x={TOP_LEFT:0,TOP_RIGHT:1,BOTTOM_RIGHT:2,BOTTOM_LEFT:3},D=function(e,t,i,r,n){var o=(Math.sqrt(2)-1)/3*4,s=i*o,a=r*o,l=e+i,c=t+r;switch(n){case x.TOP_LEFT:return new L(new E(e,c),new E(e,c-a),new E(l-s,t),new E(l,t));case x.TOP_RIGHT:return new L(new E(e,t),new E(e+s,t),new E(l,c-a),new E(l,c));case x.BOTTOM_RIGHT:return new L(new E(l,t),new E(l,t+a),new E(e+s,c),new E(e,c));case x.BOTTOM_LEFT:default:return new L(new E(l,c),new E(l-s,c),new E(e,t+a),new E(e,t))}},R=["top","right","bottom","left"],U=function(e){return R.map((function(t){return new _(e.getPropertyValue("padding-".concat(t)))}))},M={BORDER_BOX:0,PADDING_BOX:1,CONTENT_BOX:2},P=M,H=function e(t){switch(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t){case"contain":this.size=1;break;case"cover":this.size=2;break;case"auto":this.size=0;break;default:this.value=new _(t)}},Q=new H("auto"),k=function(e,t,i,r){var n=function(e,t){return new T(e.left+t[3].borderWidth,e.top+t[0].borderWidth,e.width-(t[1].borderWidth+t[3].borderWidth),e.height-(t[0].borderWidth+t[2].borderWidth))}(t,r);switch(e){case P.BORDER_BOX:return t;case P.CONTENT_BOX:var o=i[3].getAbsoluteValue(t.width),s=i[1].getAbsoluteValue(t.width),a=i[0].getAbsoluteValue(t.width),l=i[2].getAbsoluteValue(t.width);return new T(n.left+o,n.top+a,n.width-o-s,n.height-a-l);case P.PADDING_BOX:default:return n}},z=function(e,t,i){return new E(e[0].getAbsoluteValue(i.width-t.width),e[1].getAbsoluteValue(i.height-t.height))},V=function(e,t){return{backgroundColor:new c(e.backgroundColor),backgroundImage:W(e,t),backgroundClip:G(e.backgroundClip),backgroundOrigin:j(e.backgroundOrigin)}},G=function(e){switch(e){case"padding-box":return M.PADDING_BOX;case"content-box":return M.CONTENT_BOX}return M.BORDER_BOX},j=function(e){switch(e){case"padding-box":return P.PADDING_BOX;case"content-box":return P.CONTENT_BOX}return P.BORDER_BOX},W=function(e,t){var i=X(e.backgroundImage).map((function(e){if("url"===e.method){var i=t.loadImage(e.args[0]);e.args=i?[i]:[]}return e})),r=e.backgroundPosition.split(","),n=e.backgroundRepeat.split(","),o=e.backgroundSize.split(",");return i.map((function(e,t){var i=(o[t]||"auto").trim().split(" ").map(q),s=(r[t]||"auto").trim().split(" ").map(K);return{source:e,repeat:function(e){switch(("string"==typeof n[t]?n[t]:n[0]).trim()){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":return 0}return 0}(),size:i.length<2?[i[0],Q]:[i[0],i[1]],position:s.length<2?[s[0],s[0]]:[s[0],s[1]]}}))},q=function(e){return"auto"===e?Q:new H(e)},K=function(e){switch(e){case"bottom":case"right":return new _("100%");case"left":case"top":return new _("0%");case"auto":return new _("0")}return new _(e)},X=function(e){var t=/^\s$/,i=[],r=[],n="",o=null,s="",a=0,l=0,c=function(){var e="";if(n){'"'===s.substr(0,1)&&(s=s.substr(1,s.length-2)),s&&r.push(s.trim());var t=n.indexOf("-",1)+1;"-"===n.substr(0,1)&&t>0&&(e=n.substr(0,t).toLowerCase(),n=n.substr(t)),"none"!==(n=n.toLowerCase())&&i.push({prefix:e,method:n,args:r})}r=[],n=s=""};return e.split("").forEach((function(e){if(0!==a||!t.test(e)){switch(e){case'"':o?o===e&&(o=null):o=e;break;case"(":if(o)break;if(0===a)return void(a=1);l++;break;case")":if(o)break;if(1===a){if(0===l)return a=0,void c();l--}break;case",":if(o)break;if(0===a)return void c();if(1===a&&0===l&&!n.match(/^url$/i))return r.push(s.trim()),void(s="")}0===a?n+=e:s+=e}})),c(),i},J=Object.keys({TOP:0,RIGHT:1,BOTTOM:2,LEFT:3}).map((function(e){return e.toLowerCase()})),Y=function(e){return J.map((function(t){var i=new c(e.getPropertyValue("border-".concat(t,"-color"))),r=function(e){switch(e){case"none":return 0}return 1}(e.getPropertyValue("border-".concat(t,"-style"))),n=parseFloat(e.getPropertyValue("border-".concat(t,"-width")));return{borderColor:i,borderStyle:r,borderWidth:isNaN(n)?0:n}}))},Z=["top-left","top-right","bottom-right","bottom-left"],$=function(e){return Z.map((function(t){var i=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var i=[],r=!0,n=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(i.push(s.value),2!==i.length);r=!0);}catch(e){n=!0,o=e}finally{try{r||null==a.return||a.return()}finally{if(n)throw o}}return i}(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}(e.getPropertyValue("border-".concat(t,"-radius")).split(" ").map(_.create)),r=i[0],n=i[1];return void 0===n?[r,r]:[r,n]}))},ee=function(e,t){return e|function(e){switch(t){case"block":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":return 128;case"grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 1<<17;case"table-column":return 1<<18;case"table-caption":return 1<<19;case"ruby-base":return 1<<20;case"ruby-text":return 1<<21;case"ruby-base-container":return 1<<22;case"ruby-text-container":return 1<<23;case"contents":return 1<<24;case"inline-block":return 1<<25;case"inline-list-item":return 1<<26;case"inline-table":return 1<<27;case"inline-flex":return 1<<28;case"inline-grid":return 1<<29}return 1}()},te=function(e){switch(e){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0},ie=function(e){return{fontFamily:e.fontFamily,fontSize:e.fontSize,fontStyle:e.fontStyle,fontVariant:e.fontVariant,fontWeight:function(e){switch(e){case"normal":return 400;case"bold":return 700}var t=parseInt(e,10);return isNaN(t)?400:t}(e.fontWeight)}},re=function(e){if("normal"===e)return 0;var t=parseFloat(e);return isNaN(t)?0:t},ne=function(e){switch(e){case"strict":return"strict";case"normal":default:return"normal"}},oe=function(e){switch(e){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}},se=function(e){var t=X(e.getPropertyValue("list-style-image"));return{listStyleType:oe(e.getPropertyValue("list-style-type")),listStyleImage:t.length?t[0]:null,listStylePosition:ae(e.getPropertyValue("list-style-position"))}},ae=function(e){switch(e){case"inside":return 0;case"outside":default:return 1}},le=["top","right","bottom","left"],ce=function(e){return le.map((function(t){return new _(e.getPropertyValue("margin-".concat(t)))}))},ue=function(e){switch(e){case"hidden":return 1;case"scroll":return 2;case"auto":return 3;case"visible":default:return 0}},he=function(e){switch(e){case"break-word":return 1;case"normal":default:return 0}},de=/^([+-]|\d|\.)$/i,Ae=function(e){if("none"===e||"string"!=typeof e)return null;for(var t="",i=!1,r=[],n=[],o=0,s=null,a=function(){t.length&&(i?r.push(parseFloat(t)):s=new c(t)),i=!1,t=""},l=function(){r.length&&null!==s&&n.push({color:s,offsetX:r[0]||0,offsetY:r[1]||0,blur:r[2]||0}),r.splice(0,r.length),s=null},u=0;u<e.length;u++){var h=e[u];switch(h){case"(":t+=h,o++;break;case")":t+=h,o--;break;case",":0===o?(a(),l()):t+=h;break;case" ":0===o?a():t+=h;break;default:0===t.length&&de.test(h)&&(i=!0),t+=h}}return a(),l(),0===n.length?null:n},pe=function(e){switch(e){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0},fe=function(e){return parseFloat(e.trim())},ge=/(matrix|matrix3d)\((.+)\)/,me=function(e){var t=ye(e.transform||e.webkitTransform||e.mozTransform||e.msTransform||e.oTransform);return null===t?null:{transform:t,transformOrigin:we(e.transformOrigin||e.webkitTransformOrigin||e.mozTransformOrigin||e.msTransformOrigin||e.oTransformOrigin)}},we=function(e){if("string"!=typeof e){var t=new _("0");return[t,t]}var i=e.split(" ").map(_.create);return[i[0],i[1]]},ye=function(e){if("none"===e||"string"!=typeof e)return null;var t=e.match(ge);if(t){if("matrix"===t[1]){var i=t[2].split(",").map(fe);return[i[0],i[1],i[2],i[3],i[4],i[5]]}var r=t[2].split(",").map(fe);return[r[0],r[1],r[4],r[5],r[12],r[13]]}return null},ve=function(e){switch(e){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}},_e=function(e){switch(e){case"break-all":return"break-all";case"keep-all":return"keep-all";case"normal":default:return"normal"}},be=function(e){var t="auto"===e;return{auto:t,order:t?0:parseInt(e,10)}},Ce=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.element=t}return function(e,t,i){t&&function(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(e.prototype,t)}(e,[{key:"render",value:function(e){var t=this;this.options=e,this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),this.canvas.width=Math.floor(e.width)*e.scale,this.canvas.height=Math.floor(e.height)*e.scale,this.canvas.style.width="".concat(e.width,"px"),this.canvas.style.height="".concat(e.height,"px"),this.ctx.scale(e.scale,e.scale),e.logger.log("ForeignObject renderer initialized (".concat(e.width,"x").concat(e.height," at ").concat(e.x,",").concat(e.y,") with scale ").concat(e.scale));var i=Ee(Math.max(e.windowWidth,e.width)*e.scale,Math.max(e.windowHeight,e.height)*e.scale,e.scrollX*e.scale,e.scrollY*e.scale,this.element);return Se(i).then((function(i){return e.backgroundColor&&(t.ctx.fillStyle=e.backgroundColor.toString(),t.ctx.fillRect(0,0,e.width*e.scale,e.height*e.scale)),t.ctx.drawImage(i,-e.x*e.scale,-e.y*e.scale),t.canvas}))}}]),e}(),Ee=function(e,t,i,r,n){var o="http://www.w3.org/2000/svg",s=document.createElementNS(o,"svg"),a=document.createElementNS(o,"foreignObject");return s.setAttributeNS(null,"width",e),s.setAttributeNS(null,"height",t),a.setAttributeNS(null,"width","100%"),a.setAttributeNS(null,"height","100%"),a.setAttributeNS(null,"x",i),a.setAttributeNS(null,"y",r),a.setAttributeNS(null,"externalResourcesRequired","true"),s.appendChild(a),a.appendChild(n),s},Se=function(e){return new Promise((function(t,i){var r=new Image;r.onload=function(){return t(r)},r.onerror=i,r.src="data:image/svg+xml;charset=utf-8,".concat(encodeURIComponent((new XMLSerializer).serializeToString(e)))}))},Le=function(e){return 0===e[0]&&255===e[1]&&0===e[2]&&255===e[3]},Te={get SUPPORT_RANGE_BOUNDS(){var e=function(e){if(e.createRange){var t=e.createRange();if(t.getBoundingClientRect){var i=e.createElement("boundtest");i.style.height="".concat(123,"px"),i.style.display="block",e.body.appendChild(i),t.selectNode(i);var r=t.getBoundingClientRect(),n=Math.round(r.height);if(e.body.removeChild(i),123===n)return!0}}return!1}(document);return Object.defineProperty(Te,"SUPPORT_RANGE_BOUNDS",{value:e}),e},get SUPPORT_SVG_DRAWING(){var e=function(e){var t=new Image,i=e.createElement("canvas"),r=i.getContext("2d");t.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{r.drawImage(t,0,0),i.toDataURL()}catch(e){return!1}return!0}(document);return Object.defineProperty(Te,"SUPPORT_SVG_DRAWING",{value:e}),e},get SUPPORT_FOREIGNOBJECT_DRAWING(){var e="function"==typeof Array.from&&"function"==typeof window.fetch?function(e){var t=e.createElement("canvas");t.width=100,t.height=100;var i=t.getContext("2d");i.fillStyle="rgb(0, 255, 0)",i.fillRect(0,0,100,100);var r=new Image,n=t.toDataURL();r.src=n;var o=Ee(100,100,0,0,r);return i.fillStyle="red",i.fillRect(0,0,100,100),Se(o).then((function(t){i.drawImage(t,0,0);var r=i.getImageData(0,0,100,100).data;i.fillStyle="red",i.fillRect(0,0,100,100);var o=e.createElement("div");return o.style.backgroundImage="url(".concat(n,")"),o.style.height="".concat(100,"px"),Le(r)?Se(Ee(100,100,0,0,o)):Promise.reject(!1)})).then((function(e){return i.drawImage(e,0,0),Le(i.getImageData(0,0,100,100).data)})).catch((function(e){return!1}))}(document):Promise.resolve(!1);return Object.defineProperty(Te,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:e}),e},get SUPPORT_CORS_IMAGES(){var e=void 0!==(new Image).crossOrigin;return Object.defineProperty(Te,"SUPPORT_CORS_IMAGES",{value:e}),e},get SUPPORT_RESPONSE_TYPE(){var e="string"==typeof(new XMLHttpRequest).responseType;return Object.defineProperty(Te,"SUPPORT_RESPONSE_TYPE",{value:e}),e},get SUPPORT_CORS_XHR(){var e="withCredentials"in new XMLHttpRequest;return Object.defineProperty(Te,"SUPPORT_CORS_XHR",{value:e}),e}},Be=Te,Ne=i(0),Ie=function e(t,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.text=t,this.bounds=i},Fe=function(e,t,i){var r=e.ownerDocument.createElement("html2canvaswrapper");r.appendChild(e.cloneNode(!0));var n=e.parentNode;if(n){n.replaceChild(r,e);var o=B(r,t,i);return r.firstChild&&n.replaceChild(r.firstChild,r),o}return new T(0,0,0,0)},Oe=function(e,t,i,r,n){var o=e.ownerDocument.createRange();return o.setStart(e,t),o.setEnd(e,t+i),T.fromClientRect(o.getBoundingClientRect(),r,n)},xe=function(){function e(t,i,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.text=t,this.parent=i,this.bounds=r}return function(e,t,i){i&&function(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(e,i)}(e,0,[{key:"fromTextNode",value:function(t,i){var r=Re(t.data,i.style.textTransform);return new e(r,i,function(e,t,i){for(var r=0!==t.style.letterSpacing?Object(Ne.toCodePoints)(e).map((function(e){return Object(Ne.fromCodePoint)(e)})):function(e,t){for(var i,r=Object(Ne.LineBreaker)(e,{lineBreak:t.style.lineBreak,wordBreak:1===t.style.overflowWrap?"break-word":t.style.wordBreak}),n=[];!(i=r.next()).done;)n.push(i.value.slice());return n}(e,t),n=r.length,o=i.parentNode?i.parentNode.ownerDocument.defaultView:null,s=o?o.pageXOffset:0,a=o?o.pageYOffset:0,l=[],c=0,u=0;u<n;u++){var h=r[u];if(null!==t.style.textDecoration||h.trim().length>0)if(Be.SUPPORT_RANGE_BOUNDS)l.push(new Ie(h,Oe(i,c,h.length,s,a)));else{var d=i.splitText(h.length);l.push(new Ie(h,Fe(i,s,a))),i=d}else Be.SUPPORT_RANGE_BOUNDS||(i=i.splitText(h.length));c+=h.length}return l}(r,i,t))}}]),e}(),De=/(^|\s|:|-|\(|\))([a-z])/g,Re=function(e,t){switch(t){case 1:return e.toLowerCase();case 3:return e.replace(De,Ue);case 2:return e.toUpperCase();default:return e}};function Ue(e,t,i){return e.length>0?t+i.toUpperCase():e}var Me=function e(t,i,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.type=2,this.x=t,this.y=i,this.radius=r},Pe=new c([42,42,42]),He=new c([165,165,165]),Qe=new c([222,222,222]),ke={borderWidth:1,borderColor:He,borderStyle:1},ze=[ke,ke,ke,ke],Ve={backgroundColor:Qe,backgroundImage:[],backgroundClip:M.PADDING_BOX,backgroundOrigin:P.PADDING_BOX},Ge=new _("50%"),je=[Ge,Ge],We=[je,je,je,je],qe=new _("3px"),Ke=[qe,qe],Xe=[Ke,Ke,Ke,Ke],Je=function(e){return"radio"===e.type?We:Xe},Ye=function(e,t){if("radio"===e.type||"checkbox"===e.type){if(e.checked){var i=Math.min(t.bounds.width,t.bounds.height);t.childNodes.push("checkbox"===e.type?[new E(t.bounds.left+.39363*i,t.bounds.top+.79*i),new E(t.bounds.left+.16*i,t.bounds.top+.5549*i),new E(t.bounds.left+.27347*i,t.bounds.top+.44071*i),new E(t.bounds.left+.39694*i,t.bounds.top+.5649*i),new E(t.bounds.left+.72983*i,t.bounds.top+.23*i),new E(t.bounds.left+.84*i,t.bounds.top+.34085*i),new E(t.bounds.left+.39363*i,t.bounds.top+.79*i)]:new Me(t.bounds.left+i/4,t.bounds.top+i/4,i/4))}}else et(tt(e),e,t,!1)},Ze=function(e,t){et(e.value,e,t,!0)},$e=function(e,t){var i=e.options[e.selectedIndex||0];et(i&&i.text||"",e,t,!1)},et=function(e,t,i,r){var n=t.ownerDocument.body;if(e.length>0&&n){var o=t.ownerDocument.createElement("html2canvaswrapper");y(t.ownerDocument.defaultView.getComputedStyle(t,null),o),o.style.position="absolute",o.style.left="".concat(i.bounds.left,"px"),o.style.top="".concat(i.bounds.top,"px"),r||(o.style.whiteSpace="nowrap");var s=t.ownerDocument.createTextNode(e);o.appendChild(s),n.appendChild(o),i.childNodes.push(xe.fromTextNode(s,i)),n.removeChild(o)}},tt=function(e){var t="password"===e.type?new Array(e.value.length+1).join(""):e.value;return 0===t.length?e.placeholder||"":t},it=["OL","UL","MENU"],rt=function(e,t,i){var r=t.style.listStyle;if(r){var n,o=e.ownerDocument.defaultView.getComputedStyle(e,null),s=e.ownerDocument.createElement("html2canvaswrapper");switch(y(o,s),s.style.position="absolute",s.style.bottom="auto",s.style.display="block",s.style.letterSpacing="normal",r.listStylePosition){case 1:s.style.left="auto",s.style.right="".concat(e.ownerDocument.defaultView.innerWidth-t.bounds.left-t.style.margin[1].getAbsoluteValue(t.bounds.width)+7,"px"),s.style.textAlign="right";break;case 0:s.style.left="".concat(t.bounds.left-t.style.margin[3].getAbsoluteValue(t.bounds.width),"px"),s.style.right="auto",s.style.textAlign="left"}var a=t.style.margin[0].getAbsoluteValue(t.bounds.width),l=r.listStyleImage;if(l)if("url"===l.method){var c=e.ownerDocument.createElement("img");c.src=l.args[0],s.style.top="".concat(t.bounds.top-a,"px"),s.style.width="auto",s.style.height="auto",s.appendChild(c)}else{var u=.5*parseFloat(t.style.font.fontSize);s.style.top="".concat(t.bounds.top-a+t.bounds.height-1.5*u,"px"),s.style.width="".concat(u,"px"),s.style.height="".concat(u,"px"),s.style.backgroundImage=o.listStyleImage}else"number"==typeof t.listIndex&&(n=e.ownerDocument.createTextNode(At(t.listIndex,r.listStyleType,!0)),s.appendChild(n),s.style.top="".concat(t.bounds.top-a,"px"));var h=e.ownerDocument.body;h.appendChild(s),n?(t.childNodes.push(xe.fromTextNode(n,t)),h.removeChild(s)):t.childNodes.push(new ft(s,t,i,0))}},nt={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},ot={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},st={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","?","","","","","","","","","","","","","","","","","","","","","?","","","?","?","","?","","","","","","","",""]},at={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","?","","","","","","","","",""]},lt=function(e,t,i,r,n,o){return e<t||e>i?At(e,n,o.length>0):r.integers.reduce((function(t,i,n){for(;e>=i;)e-=i,t+=r.values[n];return t}),"")+o},ct=function(e,t,i,r){var n="";do{i||e--,n=r(e)+n,e/=t}while(e*t>=t);return n},ut=function(e,t,i,r,n){var o=i-t+1;return(e<0?"-":"")+(ct(Math.abs(e),o,r,(function(e){return Object(Ne.fromCodePoint)(Math.floor(e%o)+t)}))+n)},ht=function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:". ",r=t.length;return ct(Math.abs(e),r,!1,(function(e){return t[Math.floor(e%r)]}))+i},dt=function(e,t,i,r,n,o){if(e<-9999||e>9999)return At(e,4,n.length>0);var s=Math.abs(e),a=n;if(0===s)return t[0]+a;for(var l=0;s>0&&l<=4;l++){var c=s%10;0===c&&m(o,1)&&""!==a?a=t[c]+a:c>1||1===c&&0===l||1===c&&1===l&&m(o,2)||1===c&&1===l&&m(o,4)&&e>100||1===c&&l>1&&m(o,8)?a=t[c]+(l>0?i[l-1]:"")+a:1===c&&l>0&&(a=i[l-1]+a),s=Math.floor(s/10)}return(e<0?r:"")+a},At=function(e,t,i){var r=i?". ":"",n=i?"":"",o=i?", ":"";switch(t){case 0:return"";case 1:return"";case 2:return"";case 5:var s=ut(e,48,57,!0,r);return s.length<4?"0".concat(s):s;case 4:return ht(e,"",n);case 6:return lt(e,1,3999,nt,3,r).toLowerCase();case 7:return lt(e,1,3999,nt,3,r);case 8:return ut(e,945,969,!1,r);case 9:return ut(e,97,122,!1,r);case 10:return ut(e,65,90,!1,r);case 11:return ut(e,1632,1641,!0,r);case 12:case 49:return lt(e,1,9999,ot,3,r);case 35:return lt(e,1,9999,ot,3,r).toLowerCase();case 13:return ut(e,2534,2543,!0,r);case 14:case 30:return ut(e,6112,6121,!0,r);case 15:return ht(e,"",n);case 16:return ht(e,"",n);case 17:case 48:return dt(e,"","","",n,14);case 47:return dt(e,"","","",n,15);case 42:return dt(e,"","","",n,14);case 41:return dt(e,"","","",n,15);case 26:return dt(e,"","","",n,0);case 25:return dt(e,"","","",n,7);case 31:return dt(e,"??","","",o,7);case 33:return dt(e,"","","",o,0);case 32:return dt(e,"","","",o,7);case 18:return ut(e,2406,2415,!0,r);case 20:return lt(e,1,19999,at,3,r);case 21:return ut(e,2790,2799,!0,r);case 22:return ut(e,2662,2671,!0,r);case 22:return lt(e,1,10999,st,3,r);case 23:return ht(e,"");case 24:return ht(e,"");case 27:return ut(e,3302,3311,!0,r);case 28:return ht(e,"?",n);case 29:return ht(e,"?",n);case 34:return ut(e,3792,3801,!0,r);case 37:return ut(e,6160,6169,!0,r);case 38:return ut(e,4160,4169,!0,r);case 39:return ut(e,2918,2927,!0,r);case 40:return ut(e,1776,1785,!0,r);case 43:return ut(e,3046,3055,!0,r);case 44:return ut(e,3174,3183,!0,r);case 45:return ut(e,3664,3673,!0,r);case 46:return ut(e,3872,3881,!0,r);case 3:default:return ut(e,48,57,!0,r)}},pt=["INPUT","TEXTAREA","SELECT"],ft=function(){function e(t,i,r,n){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.parent=i,this.tagName=t.tagName,this.index=n,this.childNodes=[],this.listItems=[],"number"==typeof t.start&&(this.listStart=t.start);var s=t.ownerDocument.defaultView,a=s.pageXOffset,l=s.pageYOffset,u=s.getComputedStyle(t,null),h=function(e){return e.split(" ").reduce(ee,0)}(u.display),d="radio"===t.type||"checkbox"===t.type,p=function(e){switch(e){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}(u.position);if(this.style={background:d?Ve:V(u,r),border:d?ze:Y(u),borderRadius:(t instanceof s.HTMLInputElement||t instanceof HTMLInputElement)&&d?Je(t):$(u),color:d?Pe:new c(u.color),display:h,float:te(u.float),font:ie(u),letterSpacing:re(u.letterSpacing),listStyle:2048===h?se(u):null,lineBreak:ne(u.lineBreak),margin:ce(u),opacity:parseFloat(u.opacity),overflow:-1===pt.indexOf(t.tagName)?ue(u.overflow):1,overflowWrap:he(u.overflowWrap?u.overflowWrap:u.wordWrap),padding:U(u),position:p,textDecoration:A(u),textShadow:Ae(u.textShadow),textTransform:pe(u.textTransform),transform:me(u),visibility:ve(u.visibility),wordBreak:_e(u.wordBreak),zIndex:be(0!==p?u.zIndex:"auto")},this.isTransformed()&&(t.style.transform="matrix(1,0,0,1,0,0)"),2048===h){var f=function(e){var t=e.parent;if(!t)return null;do{if(-1!==it.indexOf(t.tagName))return t;t=t.parent}while(t);return e.parent}(this);if(f){var g=f.listItems.length;f.listItems.push(this),this.listIndex=t.hasAttribute("value")&&"number"==typeof t.value?t.value:0===g?"number"==typeof f.listStart?f.listStart:1:f.listItems[g-1].listIndex+1}}"IMG"===t.tagName&&t.addEventListener("load",(function(){o.bounds=B(t,a,l),o.curvedBounds=O(o.bounds,o.style.border,o.style.borderRadius)})),this.image=gt(t,r),this.bounds=d?function(e){return e.width>e.height?(e.left+=(e.width-e.height)/2,e.width=e.height):e.width<e.height&&(e.top+=(e.height-e.width)/2,e.height=e.width),e}(B(t,a,l)):B(t,a,l),this.curvedBounds=O(this.bounds,this.style.border,this.style.borderRadius)}return function(e,t,i){t&&function(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(e.prototype,t)}(e,[{key:"getClipPaths",value:function(){var e=this.parent?this.parent.getClipPaths():[];return 0!==this.style.overflow?e.concat([F(this.curvedBounds)]):e}},{key:"isInFlow",value:function(){return this.isRootElement()&&!this.isFloating()&&!this.isAbsolutelyPositioned()}},{key:"isVisible",value:function(){return!m(this.style.display,1)&&this.style.opacity>0&&0===this.style.visibility}},{key:"isAbsolutelyPositioned",value:function(){return 0!==this.style.position&&1!==this.style.position}},{key:"isPositioned",value:function(){return 0!==this.style.position}},{key:"isFloating",value:function(){return 0!==this.style.float}},{key:"isRootElement",value:function(){return null===this.parent}},{key:"isTransformed",value:function(){return null!==this.style.transform}},{key:"isPositionedWithZIndex",value:function(){return this.isPositioned()&&!this.style.zIndex.auto}},{key:"isInlineLevel",value:function(){return m(this.style.display,4)||m(this.style.display,1<<25)||m(this.style.display,1<<28)||m(this.style.display,1<<29)||m(this.style.display,1<<26)||m(this.style.display,1<<27)}},{key:"isInlineBlockOrInlineTable",value:function(){return m(this.style.display,1<<25)||m(this.style.display,1<<27)}}]),e}(),gt=function(e,t){if(e instanceof e.ownerDocument.defaultView.SVGSVGElement||e instanceof SVGSVGElement){var i=new XMLSerializer;return t.loadImage("data:image/svg+xml,".concat(encodeURIComponent(i.serializeToString(e))))}switch(e.tagName){case"IMG":return t.loadImage(e.currentSrc||e.src);case"CANVAS":return t.loadCanvas(e);case"IFRAME":var r=e.getAttribute("data-html2canvas-internal-iframe-key");if(r)return r}return null},mt=function(){function e(t,i,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.container=t,this.parent=i,this.contexts=[],this.children=[],this.treatAsRealStackingContext=r}return function(e,t,i){t&&function(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(e.prototype,t)}(e,[{key:"getOpacity",value:function(){return this.parent?this.container.style.opacity*this.parent.getOpacity():this.container.style.opacity}},{key:"getRealParentStackingContext",value:function(){return!this.parent||this.treatAsRealStackingContext?this:this.parent.getRealParentStackingContext()}}]),e}(),wt=["SCRIPT","HEAD","TITLE","OBJECT","BR","OPTION"],yt=function(e,t){return e.isRootElement()||e.isPositionedWithZIndex()||e.style.opacity<1||e.isTransformed()||_t(e,t)},vt=function(e){return e.isPositioned()||e.isFloating()},_t=function(e,t){return"BODY"===t.nodeName&&e.parent instanceof ft&&e.parent.style.background.backgroundColor.isTransparent()},bt=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._data={},this._document=t}return function(e,t,i){t&&function(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(e.prototype,t)}(e,[{key:"_parseMetrics",value:function(e){var t=this._document.createElement("div"),i=this._document.createElement("img"),r=this._document.createElement("span"),n=this._document.body;if(!n)throw new Error("");t.style.visibility="hidden",t.style.fontFamily=e.fontFamily,t.style.fontSize=e.fontSize,t.style.margin="0",t.style.padding="0",n.appendChild(t),i.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",i.width=1,i.height=1,i.style.margin="0",i.style.padding="0",i.style.verticalAlign="baseline",r.style.fontFamily=e.fontFamily,r.style.fontSize=e.fontSize,r.style.margin="0",r.style.padding="0",r.appendChild(this._document.createTextNode("Hidden Text")),t.appendChild(r),t.appendChild(i);var o=i.offsetTop-r.offsetTop+2;t.removeChild(r),t.appendChild(this._document.createTextNode("Hidden Text")),t.style.lineHeight="normal",i.style.verticalAlign="super";var s=i.offsetTop-t.offsetTop+2;return n.removeChild(t),{baseline:o,middle:s}}},{key:"getMetrics",value:function(e){var t="".concat(e.fontFamily," ").concat(e.fontSize);return void 0===this._data[t]&&(this._data[t]=this._parseMetrics(e)),this._data[t]}}]),e}(),Ct=/([+-]?\d*\.?\d+)(deg|grad|rad|turn)/i;function Et(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var St=/^(to )?(left|top|right|bottom)( (left|top|right|bottom))?$/i,Lt=/^([+-]?\d*\.?\d+)% ([+-]?\d*\.?\d+)%$/i,Tt=/(px)|%|( 0)$/i,Bt=/^(from|to|color-stop)\((?:([\d.]+)(%)?,\s*)?(.+?)\)$/i,Nt=/^\s*(circle|ellipse)?\s*((?:([\d.]+)(px|r?em|%)\s*(?:([\d.]+)(px|r?em|%))?)|closest-side|closest-corner|farthest-side|farthest-corner)?\s*(?:at\s*(?:(left|center|right)|([\d.]+)(px|r?em|%))\s+(?:(top|center|bottom)|([\d.]+)(px|r?em|%)))?(?:\s|$)/i,It={left:new _("0%"),top:new _("0%"),center:new _("50%"),right:new _("100%"),bottom:new _("100%")},Ft=function(e,t,i){for(var r=[],n=t;n<e.length;n++){var o=e[n],s=Tt.test(o),a=o.lastIndexOf(" "),l=new c(s?o.substring(0,a):o),u=s?new _(o.substring(a+1)):n===t?new _("0%"):n===e.length-1?new _("100%"):null;r.push({color:l,stop:u})}for(var h=r.map((function(e){var t=e.stop;return{color:e.color,stop:0===i?0:t?t.getAbsoluteValue(i)/i:null}})),d=h[0].stop,A=0;A<h.length;A++)if(null!==d){var p=h[A].stop;if(null===p){for(var f=A;null===h[f].stop;)f++;for(var g=(h[f].stop-d)/(f-A+1);A<f;A++)d=h[A].stop=d+g}else d=p}return h},Ot=function(e,t,i){var r=function(e){var t=e.match(Ct);if(t){var i=parseFloat(t[1]);switch(t[2].toLowerCase()){case"deg":return Math.PI*i/180;case"grad":return Math.PI/200*i;case"rad":return i;case"turn":return 2*Math.PI*i}}return null}(e[0]),n=St.test(e[0]),o=n||null!==r||Lt.test(e[0]),s=o?null!==r?Dt(i?r-.5*Math.PI:r,t):n?Ut(e[0],t):Mt(e[0],t):Dt(Math.PI,t),a=o?1:0,l=Math.min(w(Math.abs(s.x0)+Math.abs(s.x1),Math.abs(s.y0)+Math.abs(s.y1)),2*t.width,2*t.height);return new function e(t,i){Et(this,e),this.type=0,this.colorStops=t,this.direction=i}(Ft(e,a,l),s)},xt=function(e,t,i){var r=t[0].match(Nt),n=r&&("circle"===r[1]||void 0!==r[3]&&void 0===r[5])?0:1,o={},s={};r&&(void 0!==r[3]&&(o.x=b(e,r[3],r[4]).getAbsoluteValue(i.width)),void 0!==r[5]&&(o.y=b(e,r[5],r[6]).getAbsoluteValue(i.height)),r[7]?s.x=It[r[7].toLowerCase()]:void 0!==r[8]&&(s.x=b(e,r[8],r[9])),r[10]?s.y=It[r[10].toLowerCase()]:void 0!==r[11]&&(s.y=b(e,r[11],r[12])));var a={x:void 0===s.x?i.width/2:s.x.getAbsoluteValue(i.width),y:void 0===s.y?i.height/2:s.y.getAbsoluteValue(i.height)},l=Ht(r&&r[2]||"farthest-corner",n,a,o,i);return new function e(t,i,r,n){Et(this,e),this.type=1,this.colorStops=t,this.shape=i,this.center=r,this.radius=n}(Ft(t,r?1:0,Math.min(l.x,l.y)),n,a,l)},Dt=function(e,t){var i=t.width,r=t.height,n=.5*i,o=.5*r,s=(Math.abs(i*Math.sin(e))+Math.abs(r*Math.cos(e)))/2,a=n+Math.sin(e)*s,l=o-Math.cos(e)*s;return{x0:a,x1:i-a,y0:l,y1:r-l}},Rt=function(e){return Math.acos(e.width/2/(w(e.width,e.height)/2))},Ut=function(e,t){switch(e){case"bottom":case"to top":return Dt(0,t);case"left":case"to right":return Dt(Math.PI/2,t);case"right":case"to left":return Dt(3*Math.PI/2,t);case"top right":case"right top":case"to bottom left":case"to left bottom":return Dt(Math.PI+Rt(t),t);case"top left":case"left top":case"to bottom right":case"to right bottom":return Dt(Math.PI-Rt(t),t);case"bottom left":case"left bottom":case"to top right":case"to right top":return Dt(Rt(t),t);case"bottom right":case"right bottom":case"to top left":case"to left top":return Dt(2*Math.PI-Rt(t),t);case"top":case"to bottom":default:return Dt(Math.PI,t)}},Mt=function(e,t){var i=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var i=[],r=!0,n=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(i.push(s.value),2!==i.length);r=!0);}catch(e){n=!0,o=e}finally{try{r||null==a.return||a.return()}finally{if(n)throw o}}return i}(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}(e.split(" ").map(parseFloat)),r=i[0]/100*t.width/(i[1]/100*t.height);return Dt(Math.atan(isNaN(r)?1:r)+Math.PI/2,t)},Pt=function(e,t,i,r){return[{x:0,y:0},{x:0,y:e.height},{x:e.width,y:0},{x:e.width,y:e.height}].reduce((function(e,n){var o=w(t-n.x,i-n.y);return(r?o<e.optimumDistance:o>e.optimumDistance)?{optimumCorner:n,optimumDistance:o}:e}),{optimumDistance:r?1/0:-1/0,optimumCorner:null}).optimumCorner},Ht=function(e,t,i,r,n){var o=i.x,s=i.y,a=0,l=0;switch(e){case"closest-side":0===t?a=l=Math.min(Math.abs(o),Math.abs(o-n.width),Math.abs(s),Math.abs(s-n.height)):1===t&&(a=Math.min(Math.abs(o),Math.abs(o-n.width)),l=Math.min(Math.abs(s),Math.abs(s-n.height)));break;case"closest-corner":if(0===t)a=l=Math.min(w(o,s),w(o,s-n.height),w(o-n.width,s),w(o-n.width,s-n.height));else if(1===t){var c=Math.min(Math.abs(s),Math.abs(s-n.height))/Math.min(Math.abs(o),Math.abs(o-n.width)),u=Pt(n,o,s,!0);l=c*(a=w(u.x-o,(u.y-s)/c))}break;case"farthest-side":0===t?a=l=Math.max(Math.abs(o),Math.abs(o-n.width),Math.abs(s),Math.abs(s-n.height)):1===t&&(a=Math.max(Math.abs(o),Math.abs(o-n.width)),l=Math.max(Math.abs(s),Math.abs(s-n.height)));break;case"farthest-corner":if(0===t)a=l=Math.max(w(o,s),w(o,s-n.height),w(o-n.width,s),w(o-n.width,s-n.height));else if(1===t){var h=Math.max(Math.abs(s),Math.abs(s-n.height))/Math.max(Math.abs(o),Math.abs(o-n.width)),d=Pt(n,o,s,!1);l=h*(a=w(d.x-o,(d.y-s)/h))}break;default:a=r.x||0,l=void 0!==r.y?r.y:a}return{x:a,y:l}},Qt=function(e){var t="",i="",r="",n="",o=0,s=/^(left|center|right|\d+(?:px|r?em|%)?)(?:\s+(top|center|bottom|\d+(?:px|r?em|%)?))?$/i,a=/^\d+(px|r?em|%)?(?:\s+\d+(px|r?em|%)?)?$/i,l=e[o].match(s);l&&o++;var c=e[o].match(/^(circle|ellipse)?\s*(closest-side|closest-corner|farthest-side|farthest-corner|contain|cover)?$/i);c&&(t=c[1]||"","contain"===(r=c[2]||"")?r="closest-side":"cover"===r&&(r="farthest-corner"),o++);var u=e[o].match(a);u&&o++;var h=e[o].match(s);h&&o++;var d=e[o].match(a);d&&o++;var A=h||l;A&&A[1]&&(n=A[1]+(/^\d+$/.test(A[1])?"px":""),A[2]&&(n+=" "+A[2]+(/^\d+$/.test(A[2])?"px":"")));var p=d||u;return p&&(i=p[0],p[1]||(i+="px")),!n||t||i||r||(i=n,n=""),n&&(n="at ".concat(n)),[[t,r,i,n].filter((function(e){return!!e})).join(" ")].concat(e.slice(o))},kt=function(e){return e.map((function(e){return e.match(Bt)})).map((function(t,i){if(!t)return e[i];switch(t[1]){case"from":return"".concat(t[4]," 0%");case"to":return"".concat(t[4]," 100%");case"color-stop":return"%"===t[3]?"".concat(t[4]," ").concat(t[2]):"".concat(t[4]," ").concat(100*parseFloat(t[2]),"%")}}))};function zt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var i=[],r=!0,n=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(i.push(s.value),!t||i.length!==t);r=!0);}catch(e){n=!0,o=e}finally{try{r||null==a.return||a.return()}finally{if(n)throw o}}return i}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var Vt=function(){function e(t,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.target=t,this.options=i,t.render(i)}return function(e,t,i){t&&function(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(e.prototype,t)}(e,[{key:"renderNode",value:function(e){e.isVisible()&&(this.renderNodeBackgroundAndBorders(e),this.renderNodeContent(e))}},{key:"renderNodeContent",value:function(e){var t=this,i=function(){if(e.childNodes.length&&e.childNodes.forEach((function(i){if(i instanceof xe){var r=i.parent.style;t.target.renderTextNode(i.bounds,r.color,r.font,r.textDecoration,r.textShadow)}else t.target.drawShape(i,e.style.color)})),e.image){var i=t.options.imageStore.get(e.image);if(i){var r=function(e,t,i){var r=t[0].value,n=t[3].value;return new T(e.left+n+i[3].borderWidth,e.top+r+i[0].borderWidth,e.width-(i[1].borderWidth+i[3].borderWidth+n+t[1].value),e.height-(i[0].borderWidth+i[2].borderWidth+r+t[2].value))}(e.bounds,e.style.padding,e.style.border),n="number"==typeof i.width&&i.width>0?i.width:r.width,o="number"==typeof i.height&&i.height>0?i.height:r.height;n>0&&o>0&&t.target.clip([F(e.curvedBounds)],(function(){t.target.drawImage(i,new T(0,0,n,o),r)}))}}},r=e.getClipPaths();r.length?this.target.clip(r,i):i()}},{key:"renderNodeBackgroundAndBorders",value:function(e){var t=this,i=!e.style.background.backgroundColor.isTransparent()||e.style.background.backgroundImage.length,r=e.style.border.some((function(e){return 0!==e.borderStyle&&!e.borderColor.isTransparent()})),n=function(){var r=function(e,t){switch(t){case M.BORDER_BOX:return function(e){return[e.topLeftOuter,e.topRightOuter,e.bottomRightOuter,e.bottomLeftOuter]}(e);case M.PADDING_BOX:default:return F(e)}}(e.curvedBounds,e.style.background.backgroundClip);i&&t.target.clip([r],(function(){e.style.background.backgroundColor.isTransparent()||t.target.fill(e.style.background.backgroundColor),t.renderBackgroundImage(e)})),e.style.border.forEach((function(i,r){0===i.borderStyle||i.borderColor.isTransparent()||t.renderBorder(i,r,e.curvedBounds)}))};if(i||r){var o=e.parent?e.parent.getClipPaths():[];o.length?this.target.clip(o,n):n()}}},{key:"renderBackgroundImage",value:function(e){var t=this;e.style.background.backgroundImage.slice(0).reverse().forEach((function(i){"url"===i.source.method&&i.source.args.length?t.renderBackgroundRepeat(e,i):/gradient/i.test(i.source.method)&&t.renderBackgroundGradient(e,i)}))}},{key:"renderBackgroundRepeat",value:function(e,t){var i=this.options.imageStore.get(t.source.args[0]);if(i){var r=k(e.style.background.backgroundOrigin,e.bounds,e.style.padding,e.style.border),n=function(e,t,i){var r=0,n=0,o=e.size;if(1===o[0].size||2===o[0].size){var s=t.width/t.height;return i.width/i.height<s!=(2===o[0].size)?new C(i.width,i.width/s):new C(i.height*s,i.height)}return o[0].value&&(r=o[0].value.getAbsoluteValue(i.width)),0===o[0].size&&0===o[1].size?n=t.height:0===o[1].size?n=r/t.width*t.height:o[1].value&&(n=o[1].value.getAbsoluteValue(i.height)),0===o[0].size&&(r=n/t.height*t.width),new C(r,n)}(t,i,r),o=z(t.position,n,r),s=function(e,t,i,r,n){switch(e.repeat){case 2:return[new E(Math.round(n.left),Math.round(r.top+t.y)),new E(Math.round(n.left+n.width),Math.round(r.top+t.y)),new E(Math.round(n.left+n.width),Math.round(i.height+r.top+t.y)),new E(Math.round(n.left),Math.round(i.height+r.top+t.y))];case 3:return[new E(Math.round(r.left+t.x),Math.round(n.top)),new E(Math.round(r.left+t.x+i.width),Math.round(n.top)),new E(Math.round(r.left+t.x+i.width),Math.round(n.height+n.top)),new E(Math.round(r.left+t.x),Math.round(n.height+n.top))];case 1:return[new E(Math.round(r.left+t.x),Math.round(r.top+t.y)),new E(Math.round(r.left+t.x+i.width),Math.round(r.top+t.y)),new E(Math.round(r.left+t.x+i.width),Math.round(r.top+t.y+i.height)),new E(Math.round(r.left+t.x),Math.round(r.top+t.y+i.height))];default:return[new E(Math.round(n.left),Math.round(n.top)),new E(Math.round(n.left+n.width),Math.round(n.top)),new E(Math.round(n.left+n.width),Math.round(n.height+n.top)),new E(Math.round(n.left),Math.round(n.height+n.top))]}}(t,o,n,r,e.bounds),a=Math.round(r.left+o.x),l=Math.round(r.top+o.y);this.target.renderRepeat(s,i,n,a,l)}}},{key:"renderBackgroundGradient",value:function(e,t){var i=k(e.style.background.backgroundOrigin,e.bounds,e.style.padding,e.style.border),r=function(e,t){var i=e.size,r=i[0].value?i[0].value.getAbsoluteValue(t.width):t.width,n=i[1].value?i[1].value.getAbsoluteValue(t.height):i[0].value?r:t.height;return new C(r,n)}(t,i),n=z(t.position,r,i),o=new T(Math.round(i.left+n.x),Math.round(i.top+n.y),r.width,r.height),s=function(e,t,i){var r=t.args,n=t.method,o=t.prefix;return"linear-gradient"===n?Ot(r,i,!!o):"gradient"===n&&"linear"===r[0]?Ot(["to bottom"].concat(kt(r.slice(3))),i,!!o):"radial-gradient"===n?xt(e,"-webkit-"===o?Qt(r):r,i):"gradient"===n&&"radial"===r[0]?xt(e,kt(Qt(r.slice(1))),i):void 0}(e,t.source,o);if(s)switch(s.type){case 0:this.target.renderLinearGradient(o,s);break;case 1:this.target.renderRadialGradient(o,s)}}},{key:"renderBorder",value:function(e,t,i){this.target.drawShape(function(e,t){switch(t){case 0:return I(e.topLeftOuter,e.topLeftInner,e.topRightOuter,e.topRightInner);case 1:return I(e.topRightOuter,e.topRightInner,e.bottomRightOuter,e.bottomRightInner);case 2:return I(e.bottomRightOuter,e.bottomRightInner,e.bottomLeftOuter,e.bottomLeftInner);case 3:default:return I(e.bottomLeftOuter,e.bottomLeftInner,e.topLeftOuter,e.topLeftInner)}}(i,t),e.borderColor)}},{key:"renderStack",value:function(e){var t=this;if(e.container.isVisible()){var i=e.getOpacity();i!==this._opacity&&(this.target.setOpacity(e.getOpacity()),this._opacity=i);var r=e.container.style.transform;null!==r?this.target.transform(e.container.bounds.left+r.transformOrigin[0].value,e.container.bounds.top+r.transformOrigin[1].value,r.transform,(function(){return t.renderStackContent(e)})):this.renderStackContent(e)}}},{key:"renderStackContent",value:function(e){var t=zt(jt(e),5),i=t[0],r=t[1],n=t[2],o=t[3],s=t[4],a=zt(Gt(e),2),l=a[0],c=a[1];this.renderNodeBackgroundAndBorders(e.container),i.sort(Wt).forEach(this.renderStack,this),this.renderNodeContent(e.container),c.forEach(this.renderNode,this),o.forEach(this.renderStack,this),s.forEach(this.renderStack,this),l.forEach(this.renderNode,this),r.forEach(this.renderStack,this),n.sort(Wt).forEach(this.renderStack,this)}},{key:"render",value:function(e){return this.options.backgroundColor&&this.target.rectangle(this.options.x,this.options.y,this.options.width,this.options.height,this.options.backgroundColor),this.renderStack(e),this.target.getTarget()}}]),e}(),Gt=function(e){for(var t=[],i=[],r=e.children.length,n=0;n<r;n++){var o=e.children[n];o.isInlineLevel()?t.push(o):i.push(o)}return[t,i]},jt=function(e){for(var t=[],i=[],r=[],n=[],o=[],s=e.contexts.length,a=0;a<s;a++){var l=e.contexts[a];l.container.isPositioned()||l.container.style.opacity<1||l.container.isTransformed()?l.container.style.zIndex.order<0?t.push(l):l.container.style.zIndex.order>0?r.push(l):i.push(l):l.container.isFloating()?n.push(l):o.push(l)}return[t,i,r,n,o]},Wt=function(e,t){return e.container.style.zIndex.order>t.container.style.zIndex.order?1:e.container.style.zIndex.order<t.container.style.zIndex.order?-1:e.container.index>t.container.index?1:-1},qt=function(e,t){if(!t.proxy)return Promise.reject(null);var i=t.proxy;return new Promise((function(r,n){var o=Be.SUPPORT_CORS_XHR&&Be.SUPPORT_RESPONSE_TYPE?"blob":"text",s=Be.SUPPORT_CORS_XHR?new XMLHttpRequest:new XDomainRequest;s.onload=function(){if(s instanceof XMLHttpRequest)if(200===s.status)if("text"===o)r(s.response);else{var e=new FileReader;e.addEventListener("load",(function(){return r(e.result)}),!1),e.addEventListener("error",(function(e){return n(e)}),!1),e.readAsDataURL(s.response)}else n("");else r(s.responseText)},s.onerror=n,s.open("GET","".concat(i,"?url=").concat(encodeURIComponent(e),"&responseType=").concat(o)),"text"!==o&&s instanceof XMLHttpRequest&&(s.responseType=o),t.imageTimeout&&(s.timeout=t.imageTimeout,s.ontimeout=function(){return n("")}),s.send()}))};function Kt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Xt(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Jt(e,t,i){return t&&Xt(e.prototype,t),i&&Xt(e,i),e}var Yt=function(){function e(t,i,r){Kt(this,e),this.options=t,this._window=r,this.origin=this.getOrigin(r.location.href),this.cache={},this.logger=i,this._index=0}return Jt(e,[{key:"loadImage",value:function(e){var t=this;if(this.hasResourceInCache(e))return e;if(ni(e))return this.cache[e]=si(e,this.options.imageTimeout||0),e;if(!oi(e)||Be.SUPPORT_SVG_DRAWING){if(!0===this.options.allowTaint||ii(e)||this.isSameOrigin(e))return this.addImage(e,e,!1);if(!this.isSameOrigin(e)){if("string"==typeof this.options.proxy)return this.cache[e]=qt(e,this.options).then((function(e){return si(e,t.options.imageTimeout||0)})),e;if(!0===this.options.useCORS&&Be.SUPPORT_CORS_IMAGES)return this.addImage(e,e,!0)}}}},{key:"inlineImage",value:function(e){var t=this;return ii(e)?si(e,this.options.imageTimeout||0):this.hasResourceInCache(e)?this.cache[e]:this.isSameOrigin(e)||"string"!=typeof this.options.proxy?this.xhrImage(e):this.cache[e]=qt(e,this.options).then((function(e){return si(e,t.options.imageTimeout||0)}))}},{key:"xhrImage",value:function(e){var t=this;return this.cache[e]=new Promise((function(i,r){var n=new XMLHttpRequest;n.onreadystatechange=function(){if(4===n.readyState)if(200!==n.status)r("Failed to fetch image ".concat(e.substring(0,256)," with status code ").concat(n.status));else{var t=new FileReader;t.addEventListener("load",(function(){i(t.result)}),!1),t.addEventListener("error",(function(e){return r(e)}),!1),t.readAsDataURL(n.response)}},n.responseType="blob",t.options.imageTimeout&&(n.timeout=t.options.imageTimeout,n.ontimeout=function(){return r("")}),n.open("GET",e,!0),n.send()})).then((function(e){return si(e,t.options.imageTimeout||0)})),this.cache[e]}},{key:"loadCanvas",value:function(e){var t=String(this._index++);return this.cache[t]=Promise.resolve(e),t}},{key:"hasResourceInCache",value:function(e){return void 0!==this.cache[e]}},{key:"addImage",value:function(e,t,i){var r=this;return this.cache[e]=new Promise((function(e,n){var o=new Image;o.onload=function(){return e(o)},(ri(t)||i)&&(o.crossOrigin="anonymous"),o.onerror=n,o.src=t,!0===o.complete&&setTimeout((function(){e(o)}),500),r.options.imageTimeout&&setTimeout((function(){return n("")}),r.options.imageTimeout)})),e}},{key:"isSameOrigin",value:function(e){return this.getOrigin(e)===this.origin}},{key:"getOrigin",value:function(e){var t=this._link||(this._link=this._window.document.createElement("a"));return t.href=e,t.href=t.href,t.protocol+t.hostname+t.port}},{key:"ready",value:function(){var e=this,t=Object.keys(this.cache),i=t.map((function(t){return e.cache[t].catch((function(e){return null}))}));return Promise.all(i).then((function(e){return new Zt(t,e)}))}}]),e}(),Zt=function(){function e(t,i){Kt(this,e),this._keys=t,this._resources=i}return Jt(e,[{key:"get",value:function(e){var t=this._keys.indexOf(e);return-1===t?null:this._resources[t]}}]),e}(),$t=/^data:image\/svg\+xml/i,ei=/^data:image\/.*;base64,/i,ti=/^data:image\/.*/i,ii=function(e){return ti.test(e)},ri=function(e){return ei.test(e)},ni=function(e){return"blob"===e.substr(0,4)},oi=function(e){return"svg"===e.substr(-3).toLowerCase()||$t.test(e)},si=function(e,t){return new Promise((function(i,r){var n=new Image;n.onload=function(){return i(n)},n.onerror=r,n.src=e,!0===n.complete&&setTimeout((function(){i(n)}),500),t&&setTimeout((function(){return r("")}),t)}))};function ai(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var i=[],r=!0,n=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(i.push(s.value),!t||i.length!==t);r=!0);}catch(e){n=!0,o=e}finally{try{r||null==a.return||a.return()}finally{if(n)throw o}}return i}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var li=function(e,t,i){if(!t||!t.content||"none"===t.content||"-moz-alt-content"===t.content||"none"===t.display)return null;var r=ci(t.content),n=r.length,o=[],s="",a=t.counterIncrement;if(a&&"none"!==a){var l=ai(a.split(/\s+/),2),c=l[1],u=i.counters[l[0]];u&&(u[u.length-1]+=void 0===c?1:parseInt(c,10))}for(var h=0;h<n;h++){var d=r[h];switch(d.type){case 0:s+=d.value||"";break;case 1:e instanceof HTMLElement&&d.value&&(s+=e.getAttribute(d.value)||"");break;case 3:var A=i.counters[d.name||""];A&&(s+=di([A[A.length-1]],"",d.format));break;case 4:var p=i.counters[d.name||""];p&&(s+=di(p,d.glue,d.format));break;case 5:s+=hi(t,!0,i.quoteDepth),i.quoteDepth++;break;case 6:i.quoteDepth--,s+=hi(t,!1,i.quoteDepth);break;case 2:s&&(o.push({type:0,value:s}),s=""),o.push({type:1,value:d.value||""})}}return s&&o.push({type:0,value:s}),o},ci=function(e,t){if(t&&t[e])return t[e];for(var i=[],r=e.length,n=!1,o=!1,s=!1,a="",l="",c=[],u=0;u<r;u++){var h=e.charAt(u);switch(h){case"'":case'"':o?a+=h:(n=!n,s||n||(i.push({type:0,value:a}),a=""));break;case"\\":o?(a+=h,o=!1):o=!0;break;case"(":n?a+=h:(s=!0,l=a,a="",c=[]);break;case")":if(n)a+=h;else if(s){switch(a&&c.push(a),l){case"attr":c.length>0&&i.push({type:1,value:c[0]});break;case"counter":if(c.length>0){var d={type:3,name:c[0]};c.length>1&&(d.format=c[1]),i.push(d)}break;case"counters":if(c.length>0){var A={type:4,name:c[0]};c.length>1&&(A.glue=c[1]),c.length>2&&(A.format=c[2]),i.push(A)}break;case"url":c.length>0&&i.push({type:2,value:c[0]})}s=!1,a=""}break;case",":n?a+=h:s&&(c.push(a),a="");break;case" ":case"\t":n?a+=h:a&&(ui(i,a),a="");break;default:a+=h}"\\"!==h&&(o=!1)}return a&&ui(i,a),t&&(t[e]=i),i},ui=function(e,t){switch(t){case"open-quote":e.push({type:5});break;case"close-quote":e.push({type:6})}},hi=function(e,t,i){var r=e.quotes?e.quotes.split(/\s+/):["'\"'","'\"'"],n=2*i;return n>=r.length&&(n=r.length-2),t||++n,r[n].replace(/^["']|["']$/g,"")},di=function(e,t,i){for(var r=e.length,n="",o=0;o<r;o++)o>0&&(n+=t||""),n+=At(e[o],oe(i||"decimal"),!1);return n},Ai=function(){function e(t,i,r,n,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.referenceElement=t,this.scrolledElements=[],this.copyStyles=n,this.inlineImages=n,this.logger=r,this.options=i,this.renderer=o,this.resourceLoader=new Yt(i,r,window),this.pseudoContentData={counters:{},quoteDepth:0},this.documentElement=this.cloneNode(t.ownerDocument.documentElement)}return function(e,t,i){t&&function(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(e.prototype,t)}(e,[{key:"inlineAllImages",value:function(e){var t=this;if(this.inlineImages&&e){var i=e.style;Promise.all(X(i.backgroundImage).map((function(e){return"url"===e.method?t.resourceLoader.inlineImage(e.args[0]).then((function(e){return e&&"string"==typeof e.src?'url("'.concat(e.src,'")'):"none"})).catch((function(e){})):Promise.resolve("".concat(e.prefix).concat(e.method,"(").concat(e.args.join(","),")"))}))).then((function(e){e.length>1&&(i.backgroundColor=""),i.backgroundImage=e.join(",")})),e instanceof HTMLImageElement&&this.resourceLoader.inlineImage(e.src).then((function(t){if(t&&e instanceof HTMLImageElement&&e.parentNode){var i=e.parentNode,r=y(e.style,t.cloneNode(!1));i.replaceChild(r,e)}})).catch((function(e){}))}}},{key:"inlineFonts",value:function(e){var t=this;return Promise.all(Array.from(e.styleSheets).map((function(t){return t.href?fetch(t.href).then((function(e){return e.text()})).then((function(e){return fi(e,t.href)})).catch((function(e){return[]})):pi(t,e)}))).then((function(e){return e.reduce((function(e,t){return e.concat(t)}),[])})).then((function(e){return Promise.all(e.map((function(e){return fetch(e.formats[0].src).then((function(e){return e.blob()})).then((function(e){return new Promise((function(t,i){var r=new FileReader;r.onerror=i,r.onload=function(){t(r.result)},r.readAsDataURL(e)}))})).then((function(t){return e.fontFace.setProperty("src",'url("'.concat(t,'")')),"@font-face {".concat(e.fontFace.cssText," ")}))})))})).then((function(i){var r=e.createElement("style");r.textContent=i.join("\n"),t.documentElement.appendChild(r)}))}},{key:"createElementClone",value:function(e){var t=this;if(this.copyStyles&&e instanceof HTMLCanvasElement){var i=e.ownerDocument.createElement("img");try{return i.src=e.toDataURL(),i}catch(e){}}if(e instanceof HTMLIFrameElement){var r=e.cloneNode(!1),n=Si();r.setAttribute("data-html2canvas-internal-iframe-key",n);var o=B(e,0,0),s=o.width,a=o.height;return this.resourceLoader.cache[n]=Ti(e,this.options).then((function(e){return t.renderer(e,{allowTaint:t.options.allowTaint,backgroundColor:"#ffffff",canvas:null,imageTimeout:t.options.imageTimeout,logging:t.options.logging,proxy:t.options.proxy,removeContainer:t.options.removeContainer,scale:t.options.scale,foreignObjectRendering:t.options.foreignObjectRendering,useCORS:t.options.useCORS,target:new f,width:s,height:a,x:0,y:0,windowWidth:e.ownerDocument.defaultView.innerWidth,windowHeight:e.ownerDocument.defaultView.innerHeight,scrollX:e.ownerDocument.defaultView.pageXOffset,scrollY:e.ownerDocument.defaultView.pageYOffset},t.logger.child(n))})).then((function(t){return new Promise((function(i,n){var o=document.createElement("img");o.onload=function(){return i(t)},o.onerror=function(e){"data:,"==o.src?i(t):n(e)},o.src=t.toDataURL(),r.parentNode&&r.parentNode.replaceChild(y(e.ownerDocument.defaultView.getComputedStyle(e),o),r)}))})),r}try{if(e instanceof HTMLStyleElement&&e.sheet&&e.sheet.cssRules){var l=[].slice.call(e.sheet.cssRules,0).reduce((function(e,t){return t&&t.cssText?e+t.cssText:e}),""),c=e.cloneNode(!1);return c.textContent=l,c}}catch(e){if(this.logger.log("Unable to access cssRules property"),"SecurityError"!==e.name)throw this.logger.log(e),e}return e.cloneNode(!1)}},{key:"cloneNode",value:function(e){var t=e.nodeType===Node.TEXT_NODE?document.createTextNode(e.nodeValue):this.createElementClone(e),i=e.ownerDocument.defaultView,r=e instanceof i.HTMLElement?i.getComputedStyle(e):null,n=e instanceof i.HTMLElement?i.getComputedStyle(e,":before"):null,o=e instanceof i.HTMLElement?i.getComputedStyle(e,":after"):null;this.referenceElement===e&&t instanceof i.HTMLElement&&(this.clonedReferenceElement=t),t instanceof i.HTMLBodyElement&&bi(t);for(var s=function(e,t){if(!e||!e.counterReset||"none"===e.counterReset)return[];for(var i=[],r=e.counterReset.split(/\s*,\s*/),n=r.length,o=0;o<n;o++){var s=ai(r[o].split(/\s+/),2),a=s[0],l=s[1];i.push(a);var c=t.counters[a];c||(c=t.counters[a]=[]),c.push(parseInt(l||0,10))}return i}(r,this.pseudoContentData),a=li(e,n,this.pseudoContentData),l=e.firstChild;l;l=l.nextSibling)l.nodeType===Node.ELEMENT_NODE&&("SCRIPT"===l.nodeName||l.hasAttribute("data-html2canvas-ignore")||"function"==typeof this.options.ignoreElements&&this.options.ignoreElements(l))||this.copyStyles&&"STYLE"===l.nodeName||t.appendChild(this.cloneNode(l));var c=li(e,o,this.pseudoContentData);if(function(e,t){for(var i=e.length,r=0;r<i;r++)t.counters[e[r]].pop()}(s,this.pseudoContentData),e instanceof i.HTMLElement&&t instanceof i.HTMLElement)switch(n&&this.inlineAllImages(mi(e,t,n,a,wi)),o&&this.inlineAllImages(mi(e,t,o,c,yi)),!r||!this.copyStyles||e instanceof HTMLIFrameElement||y(r,t),this.inlineAllImages(t),0===e.scrollTop&&0===e.scrollLeft||this.scrolledElements.push([t,e.scrollLeft,e.scrollTop]),e.nodeName){case"CANVAS":this.copyStyles||gi(e,t);break;case"TEXTAREA":case"SELECT":t.value=e.value}return t}}]),e}(),pi=function(e,t){return(e.cssRules?Array.from(e.cssRules):[]).filter((function(e){return e.type===CSSRule.FONT_FACE_RULE})).map((function(e){for(var i=X(e.style.getPropertyValue("src")),r=[],n=0;n<i.length;n++)if("url"===i[n].method&&i[n+1]&&"format"===i[n+1].method){var o=t.createElement("a");o.href=i[n].args[0],t.body&&t.body.appendChild(o),r.push({src:o.href,format:i[n+1].args[0]})}return{formats:r.filter((function(e){return/^woff/i.test(e.format)})),fontFace:e.style}})).filter((function(e){return e.formats.length}))},fi=function(e,t){var i=document.implementation.createHTMLDocument(""),r=document.createElement("base");r.href=t;var n=document.createElement("style");return n.textContent=e,i.head&&i.head.appendChild(r),i.body&&i.body.appendChild(n),n.sheet?pi(n.sheet,i):[]},gi=function(e,t){try{if(t){t.width=e.width,t.height=e.height;var i=e.getContext("2d"),r=t.getContext("2d");i?r.putImageData(i.getImageData(0,0,e.width,e.height),0,0):r.drawImage(e,0,0)}}catch(e){}},mi=function(e,t,i,r,n){if(i&&i.content&&"none"!==i.content&&"-moz-alt-content"!==i.content&&"none"!==i.display){var o=t.ownerDocument.createElement("html2canvaspseudoelement");if(y(i,o),r)for(var s=r.length,a=0;a<s;a++){var l=r[a];switch(l.type){case 1:var c=t.ownerDocument.createElement("img");c.src=X("url(".concat(l.value,")"))[0].args[0],c.style.opacity="1",o.appendChild(c);break;case 0:o.appendChild(t.ownerDocument.createTextNode(l.value))}}return o.className="".concat(vi," ").concat(_i),t.className+=" ".concat(n===wi?vi:_i),n===wi?t.insertBefore(o,t.firstChild):t.appendChild(o),o}},wi=":before",yi=":after",vi="___html2canvas___pseudoelement_before",_i="___html2canvas___pseudoelement_after",bi=function(e){Ci(e,".".concat(vi).concat(wi).concat('{\n    content: "" !important;\n    display: none !important;\n}',"\n         .").concat(_i).concat(yi).concat('{\n    content: "" !important;\n    display: none !important;\n}'))},Ci=function(e,t){var i=e.ownerDocument.createElement("style");i.innerHTML=t,e.appendChild(i)},Ei=function(e){var t=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var i=[],r=!0,n=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(i.push(s.value),3!==i.length);r=!0);}catch(e){n=!0,o=e}finally{try{r||null==a.return||a.return()}finally{if(n)throw o}}return i}(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}(e),i=t[0],r=t[2];i.scrollLeft=t[1],i.scrollTop=r},Si=function(){return Math.ceil(Date.now()+1e7*Math.random()).toString(16)},Li=/^data:text\/(.+);(base64)?,(.*)$/i,Ti=function(e,t){try{return Promise.resolve(e.contentWindow.document.documentElement)}catch(i){return t.proxy?qt(e.src,t).then((function(e){var t=e.match(Li);return t?"base64"===t[2]?window.atob(decodeURIComponent(t[3])):decodeURIComponent(t[3]):Promise.reject()})).then((function(t){return Bi(e.ownerDocument,B(e,0,0)).then((function(e){var i=e.contentWindow.document;i.open(),i.write(t);var r=Ni(e).then((function(){return i.documentElement}));return i.close(),r}))})):Promise.reject()}},Bi=function(e,t){var i=e.createElement("iframe");return i.className="html2canvas-container",i.style.visibility="hidden",i.style.position="fixed",i.style.left="-10000px",i.style.top="0px",i.style.border="0",i.width=t.width.toString(),i.height=t.height.toString(),i.scrolling="no",i.setAttribute("data-html2canvas-ignore","true"),e.body?(e.body.appendChild(i),Promise.resolve(i)):Promise.reject("")},Ni=function(e){var t=e.contentWindow,i=t.document;return new Promise((function(r,n){t.onload=e.onload=i.onreadystatechange=function(){var t=setInterval((function(){i.body.childNodes.length>0&&"complete"===i.readyState&&(clearInterval(t),r(e))}),50)}}))};function Ii(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var Fi=function(e,t){var i=t||{},r=new g("boolean"!=typeof i.logging||i.logging);r.log("html2canvas ".concat("1.0.0-rc.1"));var n=e.ownerDocument;if(!n)return Promise.reject("Provided element is not within a Document");var o=n.defaultView;return function e(t,i,r){var n=t.ownerDocument,o=new T(i.scrollX,i.scrollY,i.windowWidth,i.windowHeight),s=n.documentElement?new c(getComputedStyle(n.documentElement).backgroundColor):h,a=n.body?new c(getComputedStyle(n.body).backgroundColor):h,l=t===n.documentElement?s.isTransparent()?a.isTransparent()?i.backgroundColor?new c(i.backgroundColor):null:a:s:i.backgroundColor?new c(i.backgroundColor):null;return(i.foreignObjectRendering?Be.SUPPORT_FOREIGNOBJECT_DRAWING:Promise.resolve(!1)).then((function(s){return s?function(e){return e.inlineFonts(n).then((function(){return e.resourceLoader.ready()})).then((function(){var o=new Ce(e.documentElement),s=n.defaultView,a=s.pageXOffset,c=s.pageYOffset,u="HTML"===t.tagName||"BODY"===t.tagName?N(n):B(t,a,c),h=u.height;return o.render({backgroundColor:l,logger:r,scale:i.scale,x:"number"==typeof i.x?i.x:u.left,y:"number"==typeof i.y?i.y:u.top,width:"number"==typeof i.width?i.width:Math.ceil(u.width),height:"number"==typeof i.height?i.height:Math.ceil(h),windowWidth:i.windowWidth,windowHeight:i.windowHeight,scrollX:i.scrollX,scrollY:i.scrollY})}))}(new Ai(t,i,r,!0,e)):function(e,t,i,r,n,o){var s=new Ai(i,r,n,!1,o),a=e.defaultView.pageXOffset,l=e.defaultView.pageYOffset;return Bi(e,t).then((function(n){var o=n.contentWindow,c=o.document,u=Ni(n).then((function(){s.scrolledElements.forEach(Ei),o.scrollTo(t.left,t.top),!/(iPad|iPhone|iPod)/g.test(navigator.userAgent)||o.scrollY===t.top&&o.scrollX===t.left||(c.documentElement.style.top=-t.top+"px",c.documentElement.style.left=-t.left+"px",c.documentElement.style.position="absolute");var i=Promise.resolve([n,s.clonedReferenceElement,s.resourceLoader]),a=r.onclone;return s.clonedReferenceElement instanceof o.HTMLElement||s.clonedReferenceElement instanceof e.defaultView.HTMLElement||s.clonedReferenceElement instanceof HTMLElement?"function"==typeof a?Promise.resolve().then((function(){return a(c)})).then((function(){return i})):i:Promise.reject("")}));return c.open(),c.write("".concat(function(e){var t="";return e&&(t+="<!DOCTYPE ",e.name&&(t+=e.name),e.internalSubset&&(t+=e.internalSubset),e.publicId&&(t+='"'.concat(e.publicId,'"')),e.systemId&&(t+='"'.concat(e.systemId,'"')),t+=">"),t}(document.doctype),"<html></html>")),function(e,t,i){!e.defaultView||t===e.defaultView.pageXOffset&&i===e.defaultView.pageYOffset||e.defaultView.scrollTo(t,i)}(i.ownerDocument,a,l),c.replaceChild(c.adoptNode(s.documentElement),c.documentElement),c.close(),u}))}(n,o,t,i,r,e).then((function(e){var t=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var i=[],r=!0,n=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(i.push(s.value),3!==i.length);r=!0);}catch(e){n=!0,o=e}finally{try{r||null==a.return||a.return()}finally{if(n)throw o}}return i}(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}(e),o=t[0],s=t[1],a=t[2],c=function(e,t,i){var r=0,n=new ft(e,null,t,r++),o=new mt(n,null,!0);return function e(t,i,r,n,o){for(var s,a=t.firstChild;a;a=s){s=a.nextSibling;var l=a.ownerDocument.defaultView;if(a instanceof l.Text||a instanceof Text||l.parent&&a instanceof l.parent.Text)a.data.trim().length>0&&i.childNodes.push(xe.fromTextNode(a,i));else if(a instanceof l.HTMLElement||a instanceof HTMLElement||l.parent&&a instanceof l.parent.HTMLElement){if(-1===wt.indexOf(a.nodeName)){var c=new ft(a,i,n,o++);if(c.isVisible()){"INPUT"===a.tagName?Ye(a,c):"TEXTAREA"===a.tagName?Ze(a,c):"SELECT"===a.tagName?$e(a,c):c.style.listStyle&&-1!==c.style.listStyle.listStyleType&&rt(a,c,n);var u="TEXTAREA"!==a.tagName,h=yt(c,a);if(h||vt(c)){var d=h||c.isPositioned()?r.getRealParentStackingContext():r,A=new mt(c,d,h);d.contexts.push(A),u&&e(a,c,A,n,o)}else r.children.push(c),u&&e(a,c,r,n,o)}}}else if(a instanceof l.SVGSVGElement||a instanceof SVGSVGElement||l.parent&&a instanceof l.parent.SVGSVGElement){var p=new ft(a,i,n,o++),f=yt(p,a);if(f||vt(p)){var g=f||p.isPositioned()?r.getRealParentStackingContext():r,m=new mt(p,g,f);g.contexts.push(m)}else r.children.push(p)}}}(e,n,o,t,1),o}(s,a),u=s.ownerDocument;return l===c.container.style.background.backgroundColor&&(c.container.style.background.backgroundColor=h),a.ready().then((function(e){var t=new bt(u),a=u.defaultView,h=a.pageXOffset,d=a.pageYOffset,A="HTML"===s.tagName||"BODY"===s.tagName?N(n):B(s,h,d),p=A.height,f={backgroundColor:l,fontMetrics:t,imageStore:e,logger:r,scale:i.scale,x:"number"==typeof i.x?i.x:A.left,y:"number"==typeof i.y?i.y:A.top,width:"number"==typeof i.width?i.width:Math.ceil(A.width),height:"number"==typeof i.height?i.height:Math.ceil(p)};if(Array.isArray(i.target))return Promise.all(i.target.map((function(e){return new Vt(e,f).render(c)})));var g=new Vt(i.target,f).render(c);return!0===i.removeContainer&&o.parentNode&&o.parentNode.removeChild(o),g}))}))}))}(e,function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},r=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(i).filter((function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable})))),r.forEach((function(t){Ii(e,t,i[t])}))}return e}({},{allowTaint:!1,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,scale:o.devicePixelRatio||1,target:new f(i.canvas),useCORS:!1,windowWidth:o.innerWidth,windowHeight:o.innerHeight,scrollX:o.pageXOffset,scrollY:o.pageYOffset},i),r)};Fi.CanvasRenderer=f,t.default=Fi}]).default}));var r0="\0\0",k0="application/zip",e0="application/zip",n0="undefined",q0=null,h0=!1,JSZip=function(e,t){this.files={},this.root="",e&&this.load(e,t)};JSZip.signature={LOCAL_FILE_HEADER:"PK",CENTRAL_FILE_HEADER:"PK",CENTRAL_DIRECTORY_END:"PK",ZIP64_CENTRAL_DIRECTORY_LOCATOR:"PK",ZIP64_CENTRAL_DIRECTORY_END:"PK",DATA_DESCRIPTOR:"PK\b"},JSZip.defaults={base64:h0,binary:h0,dir:h0,date:q0,compression:q0},JSZip.support={arraybuffer:typeof ArrayBuffer!==n0&&typeof Uint8Array!==n0,nodebuffer:typeof Buffer!==n0,uint8array:typeof Uint8Array!==n0,blob:function(){if(typeof ArrayBuffer===n0)return h0;var e=new ArrayBuffer(0);try{return 0===new Blob([e],{type:e0}).size}catch(i){}try{var t=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder);return t.append(e),0===t.getBlob(k0).size}catch(i){}return h0}()},JSZip.prototype=function(){var e,t;JSZip.support.uint8array&&"function"==typeof TextEncoder&&"function"==typeof TextDecoder&&(e=new TextEncoder("utf-8"),t=new TextDecoder("utf-8"));var i=function(e){if(e._data instanceof JSZip.CompressedObject&&(e._data=e._data.getContent(),e.options.binary=!0,e.options.base64=!1,"uint8array"===JSZip.utils.getTypeOf(e._data))){var t=e._data;e._data=new Uint8Array(t.length),0!==t.length&&e._data.set(t,0)}return e._data},r=function(t){var r=i(t);if("string"===JSZip.utils.getTypeOf(r)){if(!t.options.binary){if(e)return e.encode(r);if(JSZip.support.nodebuffer)return new Buffer(r,"utf-8")}return t.asBinary()}return r},n=function(e){var t=i(this);return null==t?"":(this.options.base64&&(t=JSZip.base64.decode(t)),t=e&&this.options.binary?JSZip.prototype.utf8decode(t):JSZip.utils.transformTo("string",t),e||this.options.binary||(t=JSZip.prototype.utf8encode(t)),t)},o=function(e,t,i){this.name=e,this._data=t,this.options=i};o.prototype={asText:function(){return n.call(this,!0)},asBinary:function(){return n.call(this,!1)},asNodeBuffer:function(){var e=r(this);return JSZip.utils.transformTo("nodebuffer",e)},asUint8Array:function(){var e=r(this);return JSZip.utils.transformTo("uint8array",e)},asArrayBuffer:function(){return this.asUint8Array().buffer}};var s=function(e,t){var i,r="";for(i=0;i<t;i++)r+=String.fromCharCode(255&e),e>>>=8;return r},a=function(){var e,t,i={};for(e=0;e<arguments.length;e++)for(t in arguments[e])arguments[e].hasOwnProperty(t)&&void 0===i[t]&&(i[t]=arguments[e][t]);return i},l=function(e,t,i){var r=c(e),n=JSZip.utils.getTypeOf(t);if(r&&u.call(this,r),(i=function(e){return!0===(e=e||{}).base64&&null==e.binary&&(e.binary=!0),(e=a(e,JSZip.defaults)).date=e.date||new Date,null!==e.compression&&(e.compression=e.compression.toUpperCase()),e}(i)).dir||null==t)i.base64=!1,i.binary=!1,t=null;else if("string"===n)i.binary&&!i.base64&&!0!==i.optimizedBinaryString&&(t=JSZip.utils.string2binary(t));else{if(i.base64=!1,i.binary=!0,!(n||t instanceof JSZip.CompressedObject))throw new Error("The data of '"+e+"' is in an unsupported format !");"arraybuffer"===n&&(t=JSZip.utils.transformTo("uint8array",t))}return this.files[e]=new o(e,t,i)},c=function(e){"/"==e.slice(-1)&&(e=e.substring(0,e.length-1));var t=e.lastIndexOf("/");return t>0?e.substring(0,t):""},u=function(e){return"/"!=e.slice(-1)&&(e+="/"),this.files[e]||l.call(this,e,null,{dir:!0}),this.files[e]},h=function(e,t){var i,n=new JSZip.CompressedObject;return e._data instanceof JSZip.CompressedObject?(n.uncompressedSize=e._data.uncompressedSize,n.crc32=e._data.crc32,0===n.uncompressedSize||e.options.dir?(t=JSZip.compressions.STORE,n.compressedContent="",n.crc32=0):e._data.compressionMethod===t.magic?n.compressedContent=e._data.getCompressedContent():(i=e._data.getContent(),n.compressedContent=t.compress(JSZip.utils.transformTo(t.compressInputType,i)))):((i=r(e))&&0!==i.length&&!e.options.dir||(t=JSZip.compressions.STORE,i=""),n.uncompressedSize=i.length,n.crc32=this.crc32(i),n.compressedContent=t.compress(JSZip.utils.transformTo(t.compressInputType,i))),n.compressedSize=n.compressedContent.length,n.compressionMethod=t.magic,n},d=function(e,t,i,r){var n,o,a=this.utf8encode(t.name),l=a!==t.name,c=t.options;n=c.date.getHours(),n<<=6,n|=c.date.getMinutes(),n<<=5,n|=c.date.getSeconds()/2,o=c.date.getFullYear()-1980,o<<=4,o|=c.date.getMonth()+1,o<<=5,o|=c.date.getDate();var u="";return u+="\n\0",u+=l?"\0\b":"\0\0",u+=i.compressionMethod,u+=s(n,2),u+=s(o,2),u+=s(i.crc32,4),u+=s(i.compressedSize,4),u+=s(i.uncompressedSize,4),u+=s(a.length,2),{fileRecord:JSZip.signature.LOCAL_FILE_HEADER+(u+="\0\0")+a,dirRecord:JSZip.signature.CENTRAL_FILE_HEADER+"\0"+u+"\0\0\0\0\0\0"+(!0===t.options.dir?"\0\0\0":"\0\0\0\0")+s(r,4)+a,compressedObject:i}},A=function(){this.data=[]};A.prototype={append:function(e){e=JSZip.utils.transformTo("string",e),this.data.push(e)},finalize:function(){return this.data.join("")}};var p=function(e){this.data=new Uint8Array(e),this.index=0};return p.prototype={append:function(e){0!==e.length&&(e=JSZip.utils.transformTo("uint8array",e),this.data.set(e,this.index),this.index+=e.length)},finalize:function(){return this.data}},{load:function(e,t){throw new Error("Load method is not defined. Is the file jszip-load.js included ?")},filter:function(e){var t,i,r,n,s=[];for(t in this.files)this.files.hasOwnProperty(t)&&(n=new o((r=this.files[t]).name,r._data,a(r.options)),i=t.slice(this.root.length,t.length),t.slice(0,this.root.length)===this.root&&e(i,n)&&s.push(n));return s},file:function(e,t,i){if(1===arguments.length){if(JSZip.utils.isRegExp(e)){var r=e;return this.filter((function(e,t){return!t.options.dir&&r.test(e)}))}return this.filter((function(t,i){return!i.options.dir&&t===e}))[0]||null}return l.call(this,e=this.root+e,t,i),this},folder:function(e){if(!e)return this;if(JSZip.utils.isRegExp(e))return this.filter((function(t,i){return i.options.dir&&e.test(t)}));var t=u.call(this,this.root+e),i=this.clone();return i.root=t.name,i},remove:function(e){var t=this.files[e=this.root+e];if(t||("/"!=e.slice(-1)&&(e+="/"),t=this.files[e]),t)if(t.options.dir)for(var i=this.filter((function(t,i){return i.name.slice(0,e.length)===e})),r=0;r<i.length;r++)delete this.files[i[r].name];else delete this.files[e];return this},generate:function(e){e=a(e||{},{base64:!0,compression:"STORE",type:"base64"}),JSZip.utils.checkSupport(e.type);var t,i,r,n=[],o=0,l=0;for(var c in this.files)if(this.files.hasOwnProperty(c)){var u=this.files[c],f=u.options.compression||e.compression.toUpperCase(),g=JSZip.compressions[f];if(!g)throw new Error(f+" is not a valid compression method !");var m=h.call(this,u,g),w=d.call(this,c,u,m,o);o+=w.fileRecord.length+m.compressedSize,l+=w.dirRecord.length,n.push(w)}switch(r=JSZip.signature.CENTRAL_DIRECTORY_END+"\0\0\0\0"+s(n.length,2)+s(n.length,2)+s(l,4)+s(o,4)+"\0\0",e.type.toLowerCase()){case"uint8array":case"arraybuffer":case"blob":case"nodebuffer":t=new p(o+l+r.length);break;case"base64":default:t=new A(o+l+r.length)}for(i=0;i<n.length;i++)t.append(n[i].fileRecord),t.append(n[i].compressedObject.compressedContent);for(i=0;i<n.length;i++)t.append(n[i].dirRecord);t.append(r);var y=t.finalize();switch(e.type.toLowerCase()){case"uint8array":case"arraybuffer":case"nodebuffer":return JSZip.utils.transformTo(e.type.toLowerCase(),y);case"blob":return JSZip.utils.arrayBuffer2Blob(JSZip.utils.transformTo("arraybuffer",y));case"base64":return e.base64?JSZip.base64.encode(y):y;default:return y}},crc32:function(e,t){if(void 0===e||!e.length)return 0;var i="string"!==JSZip.utils.getTypeOf(e),r=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];void 0===t&&(t=0),t^=-1;for(var n=0,o=e.length;n<o;n++)t=t>>>8^r[255&(t^(i?e[n]:e.charCodeAt(n)))];return-1^t},clone:function(){var e=new JSZip;for(var t in this)"function"!=typeof this[t]&&(e[t]=this[t]);return e},utf8encode:function(t){if(e){var i=e.encode(t);return JSZip.utils.transformTo("string",i)}if(JSZip.support.nodebuffer)return JSZip.utils.transformTo("string",new Buffer(t,"utf-8"));for(var r=[],n=0,o=0;o<t.length;o++){var s=t.charCodeAt(o);s<128?r[n++]=String.fromCharCode(s):s>127&&s<2048?(r[n++]=String.fromCharCode(s>>6|192),r[n++]=String.fromCharCode(63&s|128)):(r[n++]=String.fromCharCode(s>>12|224),r[n++]=String.fromCharCode(s>>6&63|128),r[n++]=String.fromCharCode(63&s|128))}return r.join("")},utf8decode:function(e){var i=[],r=0,n="string"!==JSZip.utils.getTypeOf(e),o=0,s=0,a=0,l=0;if(t)return t.decode(JSZip.utils.transformTo("uint8array",e));if(JSZip.support.nodebuffer)return JSZip.utils.transformTo("nodebuffer",e).toString("utf-8");for(;o<e.length;)(s=n?e[o]:e.charCodeAt(o))<128?(i[r++]=String.fromCharCode(s),o++):s>191&&s<224?(a=n?e[o+1]:e.charCodeAt(o+1),i[r++]=String.fromCharCode((31&s)<<6|63&a),o+=2):(a=n?e[o+1]:e.charCodeAt(o+1),l=n?e[o+2]:e.charCodeAt(o+2),i[r++]=String.fromCharCode((15&s)<<12|(63&a)<<6|63&l),o+=3);return i.join("")}}}(),JSZip.compressions={STORE:{magic:r0,compress:function(e){return e},uncompress:function(e){return e},compressInputType:q0,uncompressInputType:q0}},function(){function e(e){return e}function t(e,t){for(var i=0;i<e.length;++i)t[i]=255&e.charCodeAt(i);return t}function i(e){var t=65536,i=[],r=e.length,n=JSZip.utils.getTypeOf(e),o=0,s=!0;try{switch(n){case"uint8array":String.fromCharCode.apply(null,new Uint8Array(0));break;case"nodebuffer":String.fromCharCode.apply(null,new Buffer(0))}}catch(c){s=!1}if(!s){for(var a="",l=0;l<e.length;l++)a+=String.fromCharCode(e[l]);return a}for(;o<r&&t>1;)try{i.push(String.fromCharCode.apply(null,"array"===n||"nodebuffer"===n?e.slice(o,Math.min(o+t,r)):e.subarray(o,Math.min(o+t,r)))),o+=t}catch(c){t=Math.floor(t/2)}return i.join("")}function r(e,t){for(var i=0;i<e.length;i++)t[i]=e[i];return t}JSZip.utils={string2binary:function(e){for(var t="",i=0;i<e.length;i++)t+=String.fromCharCode(255&e.charCodeAt(i));return t},string2Uint8Array:function(e){return JSZip.utils.transformTo("uint8array",e)},uint8Array2String:function(e){return JSZip.utils.transformTo("string",e)},arrayBuffer2Blob:function(e){JSZip.utils.checkSupport("blob");try{return new Blob([e],{type:"application/zip"})}catch(i){}try{var t=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder);return t.append(e),t.getBlob("application/zip")}catch(i){}throw new Error("Bug : can't construct the Blob.")},string2Blob:function(e){var t=JSZip.utils.transformTo("arraybuffer",e);return JSZip.utils.arrayBuffer2Blob(t)}};var n={};n.string={string:e,array:function(e){return t(e,new Array(e.length))},arraybuffer:function(e){return n.string.uint8array(e).buffer},uint8array:function(e){return t(e,new Uint8Array(e.length))},nodebuffer:function(e){return t(e,new Buffer(e.length))}},n.array={string:i,array:e,arraybuffer:function(e){return new Uint8Array(e).buffer},uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return new Buffer(e)}},n.arraybuffer={string:function(e){return i(new Uint8Array(e))},array:function(e){return r(new Uint8Array(e),new Array(e.byteLength))},arraybuffer:e,uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return new Buffer(new Uint8Array(e))}},n.uint8array={string:i,array:function(e){return r(e,new Array(e.length))},arraybuffer:function(e){return e.buffer},uint8array:e,nodebuffer:function(e){return new Buffer(e)}},n.nodebuffer={string:i,array:function(e){return r(e,new Array(e.length))},arraybuffer:function(e){return n.nodebuffer.uint8array(e).buffer},uint8array:function(e){return r(e,new Uint8Array(e.length))},nodebuffer:e},JSZip.utils.transformTo=function(e,t){if(t||(t=""),!e)return t;JSZip.utils.checkSupport(e);var i=JSZip.utils.getTypeOf(t);return n[i][e](t)},JSZip.utils.getTypeOf=function(e){return"string"==typeof e?"string":"[object Array]"===Object.prototype.toString.call(e)?"array":JSZip.support.nodebuffer&&Buffer.isBuffer(e)?"nodebuffer":JSZip.support.uint8array&&e instanceof Uint8Array?"uint8array":JSZip.support.arraybuffer&&e instanceof ArrayBuffer?"arraybuffer":void 0},JSZip.utils.isRegExp=function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},JSZip.utils.checkSupport=function(e){var t=!0;switch(e.toLowerCase()){case"uint8array":t=JSZip.support.uint8array;break;case"arraybuffer":t=JSZip.support.arraybuffer;break;case"nodebuffer":t=JSZip.support.nodebuffer;break;case"blob":t=JSZip.support.blob}if(!t)throw new Error(e+" is not supported by this browser")}}(),JSZip.CompressedObject=function(){this.compressedSize=0,this.uncompressedSize=0,this.crc32=0,this.compressionMethod=q0,this.compressedContent=q0},JSZip.CompressedObject.prototype={getContent:function(){return q0},getCompressedContent:function(){return q0}},JSZip.base64=function(){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";return{encode:function(t,i){for(var r,n,o,s,a,l,c,u="",h=0;h<t.length;)s=(r=t.charCodeAt(h++))>>2,a=(3&r)<<4|(n=t.charCodeAt(h++))>>4,l=(15&n)<<2|(o=t.charCodeAt(h++))>>6,c=63&o,isNaN(n)?l=c=64:isNaN(o)&&(c=64),u=u+e.charAt(s)+e.charAt(a)+e.charAt(l)+e.charAt(c);return u},decode:function(t,i){var r,n,o,s,a,l,c="",u=0;for(t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");u<t.length;)o=e.indexOf(t.charAt(u++)),r=(15&(s=e.indexOf(t.charAt(u++))))<<4|(a=e.indexOf(t.charAt(u++)))>>2,n=(3&a)<<6|(l=e.indexOf(t.charAt(u++))),c+=String.fromCharCode(o<<2|s>>4),64!=a&&(c+=String.fromCharCode(r)),64!=l&&(c+=String.fromCharCode(n));return c}}}(),void 0!==window.jQuery&&(window.jQuery.fn.webdatarocks=function(e){return(e=e||{}).container=this.get(0),e=window.WebDataRocks?window.WebDataRocks(e):window.PivotApi(e),this.data("webdatarocks",e),e}),void 0!==window.angular&&window.angular.module("webdatarocks",[]).directive("wbrPivot",(function(){return{restrict:"A",scope:{report:"=wbrReport",customizeCell:"&wbrCustomizeCell",cellclick:"&wbrCellClick",celldoubleclick:"&wbrCellDoubleClick",dataerror:"&wbrDataError",datafilecancelled:"&wbrDataFileCancelled",dataloaded:"&wbrDataLoaded",datachanged:"&wbrDataChanged",fieldslistclose:"&wbrFieldsListClose",fieldslistopen:"&wbrFieldsListOpen",filteropen:"&wbrFilteropen",fullscreen:"&wbrFullscreen",loadingdata:"&wbrLoadingData",loadinglocalization:"&wbrLoadingLocalization",loadingolapstructure:"&wbrLoadingOlapStructure",loadingreportfile:"&wbrLoadingReportFile",localizationerror:"&wbrLocalizationError",localizationloaded:"&wbrLocalizationLoaded",openingreportfile:"&wbrOpeningReportFile",querycomplete:"&wbrQueryComplete",queryerror:"&wbrQueryError",ready:"&wbrReady",reportchange:"&wbrReportChange",reportcomplete:"&wbrReportComplete",reportfilecancelled:"&wbrReportFileCancelled",reportfileerror:"&wbrReportFileError",reportfileloaded:"&wbrReportFileLoaded",runningquery:"&wbrRunningQuery",update:"&wbrUpdate",beforetoolbarcreated:"&wbrBeforeToolbarCreated"},link:function(e,t,i,r){(r={}).container=t[0],function(e,t){void 0!==e.wbrGlobal&&(t.global=e.wbrGlobal),void 0!==e.wbrWidth&&(t.width=e.wbrWidth),void 0!==e.wbrHeight&&(t.height=e.wbrHeight),void 0!==e.wbrToolbar&&(t.toolbar=!0===e.wbrToolbar||"true"==e.wbrToolbar||"on"==e.wbrToolbar)}(i,r),e.customizeCell&&(r.customizeCell=function(t,i){return e.customizeCell({html:t,data:i})}),e.cellclick&&(r.cellclick=function(t){e.cellclick({cell:t})}),e.celldoubleclick&&(r.celldoubleclick=function(t){e.celldoubleclick({cell:t})}),r.dataerror=e.dataerror,r.datafilecancelled=e.datafilecancelled,r.dataloaded=e.dataloaded,r.datachanged&&(r.datachanged=function(t){e.datachanged({event:t})}),r.fieldslistclose=e.fieldslistclose,r.fieldslistopen=e.fieldslistopen,r.filteropen&&(r.filteropen=function(t){e.filteropen({params:t})}),r.fullscreen&&(r.fullscreen=function(t){e.fullscreen({fullScreenMode:t})}),r.loadingdata=e.loadingdata,r.loadinglocalization=e.loadinglocalization,r.loadingolapstructure=e.loadingolapstructure,r.loadingreportfile=e.loadingreportfile,r.localizationerror=e.localizationerror,r.localizationloaded=e.localizationloaded,r.olapstructureerror=e.olapstructureerror,r.olapstructureloaded=e.olapstructureloaded,r.openingreportfile=e.openingreportfile,r.querycomplete=e.querycomplete,r.queryerror=e.queryerror,e.ready&&(r.ready=function(){e.ready({pivot:n})}),r.reportchange=e.reportchange,r.reportcomplete=e.reportcomplete,r.reportfilecancelled=e.reportfilecancelled,r.reportfileerror=e.reportfileerror,r.reportfileloaded=e.reportfileloaded,r.runningquery=e.runningquery,r.loadingdata=e.loadingdata,r.loadingdata=e.loadingdata,r.loadingdata=e.loadingdata,r.update=e.update,e.beforetoolbarcreated&&(r.beforetoolbarcreated=function(t){e.beforetoolbarcreated({toolbar:t})}),e.report&&(r.report=e.report),e.global&&(r.global=e.global);var n=new WebDataRocks(r)}}})),void 0!==window.React&&(window.WebDataRocksReact={Pivot:React.createClass({propTypes:{global:React.PropTypes.object,width:React.PropTypes.oneOfType([React.PropTypes.string,React.PropTypes.number]),height:React.PropTypes.oneOfType([React.PropTypes.string,React.PropTypes.number]),report:React.PropTypes.oneOfType([React.PropTypes.string,React.PropTypes.object]),toolbar:React.PropTypes.bool,customizeCell:React.PropTypes.func,cellclick:React.PropTypes.func,celldoubleclick:React.PropTypes.func,dataerror:React.PropTypes.func,datafilecancelled:React.PropTypes.func,dataloaded:React.PropTypes.func,datachanged:React.PropTypes.func,fieldslistclose:React.PropTypes.func,fieldslistopen:React.PropTypes.func,filteropen:React.PropTypes.func,fullscreen:React.PropTypes.func,loadingdata:React.PropTypes.func,loadinglocalization:React.PropTypes.func,loadingolapstructure:React.PropTypes.func,loadingreportfile:React.PropTypes.func,localizationerror:React.PropTypes.func,localizationloaded:React.PropTypes.func,olapstructureerror:React.PropTypes.func,olapstructureloaded:React.PropTypes.func,openingreportfile:React.PropTypes.func,querycomplete:React.PropTypes.func,queryerror:React.PropTypes.func,ready:React.PropTypes.func,reportchange:React.PropTypes.func,reportcomplete:React.PropTypes.func,reportfilecancelled:React.PropTypes.func,reportfileerror:React.PropTypes.func,reportfileloaded:React.PropTypes.func,runningquery:React.PropTypes.func,update:React.PropTypes.func,beforetoolbarcreated:React.PropTypes.func},render:function(){return React.DOM.div()},componentDidMount:function(){var e={};e.container=ReactDOM.findDOMNode(this),this.parseProps(e),this.webdatarocks=new window.WebDataRocks(e)},shouldComponentUpdate:function(){return!1},componentWillUnmount:function(){},parseProps:function(e){for(var t in this.props)e[t]=this.props[t]}})}),"object"==typeof module&&module.exports&&(module.exports=WebDataRocks);